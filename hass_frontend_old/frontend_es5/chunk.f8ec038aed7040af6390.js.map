{"version":3,"sources":["webpack:///./src/mixins/localize-mixin.js","webpack:///./src/mixins/events-mixin.js","webpack:///./src/panels/config/ha-config-section.ts","webpack:///./src/components/ha-switch.ts","webpack:///./src/common/datetime/format_date_time.ts","webpack:///./src/components/buttons/ha-progress-button.js","webpack:///./src/util/toast-saved-success.ts","webpack:///./src/mixins/navigate-mixin.js","webpack:///./src/components/buttons/ha-call-api-button.js","webpack:///./src/data/alexa.ts","webpack:///./src/panels/config/cloud/account/cloud-webhooks.ts","webpack:///./src/panels/config/cloud/dialog-manage-cloudhook/show-dialog-manage-cloudhook.ts","webpack:///./src/data/webhook.ts","webpack:///./src/panels/config/cloud/account/cloud-alexa-pref.ts","webpack:///./src/panels/config/cloud/account/cloud-google-pref.ts","webpack:///./src/panels/config/cloud/account/cloud-remote-pref.ts","webpack:///./src/panels/config/cloud/dialog-cloud-certificate/show-dialog-cloud-certificate.ts","webpack:///./src/panels/config/cloud/account/cloud-account.js","webpack:///./src/panels/config/cloud/login/cloud-login.js","webpack:///./src/panels/config/cloud/ha-config-cloud.ts"],"names":["dedupingMixin","superClass","_superClass","_class","_classCallCheck","this","_possibleConstructorReturn","_getPrototypeOf","apply","arguments","_inherits","key","get","hass","Object","localize","type","Function","computed","value","EventsMixin","detail","options","fireEvent","node","_decorate","customElement","_initialize","_HTMLElement","F","_HTMLElement2","HaConfigSection","_this","call","_assertThisInitialized","attachShadow","mode","shadowRoot","innerHTML","d","HTMLElement","MwcSwitch","customElements","_MwcSwitch","HaSwitch","_MwcSwitch2","_getPrototypeOf2","_len","length","args","Array","_key","concat","kind","decorators","query","_get","prototype","style","setProperty","classList","toggle","Boolean","_slot","assignedNodes","static","css","_templateObject","fecha__WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","toLocaleStringSupportsOptions","Date","toLocaleString","e","name","dateObj","locales","year","month","day","hour","minute","fecha","format","HaProgressButton","PolymerElement","html","progress","disabled","className","$","container","add","setTimeout","remove","addEventListener","ev","buttonTapped","stopPropagation","tempClass","define","__webpack_exports__","showSaveSuccessToast","_toast__WEBPACK_IMPORTED_MODULE_0__","el","showToast","message","navigate","HaCallApiButton","method","data","LitElement","_buttonTapped","eventData","path","callApi","resp","progressButton","actionSuccess","success","response","actionError","_context","t0","renderRoot","querySelector","String","fetchCloudAlexaEntities","syncCloudAlexaEntities","callWS","CloudWebhooks","_LitElement","_LitElement2","_progress","property","_fetchData","renderStyle","_renderBody","changedProps","has","cloudStatus","_cloudHooks","prefs","cloudhooks","_this2","_localHooks","_templateObject3","map","entry","_templateObject4","domain","toLowerCase","webhook_id","includes","_templateObject5","_templateObject6","_handleManageButton","_templateObject7","_enableWebhook","_templateObject2","webhookId","element","webhookDialogParams","_this3","webhook","find","ent","cloudhook","disableHook","_disableWebhook","dialogTag","dialogImport","Promise","all","then","bind","dialogParams","currentTarget","parentElement","_showDialog","_enableWebhook2","_asyncToGenerator","regeneratorRuntime","mark","_callee","updatedWebhook","wrap","prev","next","_toConsumableArray","createCloudhook","sent","alert","abrupt","filter","wid","finish","assign","stop","_x","_disableWebhook2","_callee2","_ref","newHooks","_context2","deleteCloudhook","_objectWithoutProperties","_toPropertyKey","_x2","_fetchData2","_callee3","_context3","config","components","_templateObject8","CloudAlexaPref","cloud_alexa_pref_decorate","cloud_alexa_pref_classCallCheck","cloud_alexa_pref_possibleConstructorReturn","cloud_alexa_pref_getPrototypeOf","cloud_alexa_pref_assertThisInitialized","cloud_alexa_pref_inherits","cloud_alexa_pref_templateObject","_prefs","alexa_enabled","alexa_report_state","cloud_alexa_pref_templateObject2","_enabledToggleChanged","cloud_alexa_pref_templateObject3","_reportToggleChanged","_handleSync","_syncing","_handleSync2","cloud_alexa_pref_asyncToGenerator","body","_enabledToggleChanged2","target","updateCloudPref","checked","_reportToggleChanged2","cloud_alexa_pref_templateObject4","CloudGooglePref","cloud_google_pref_decorate","cloud_google_pref_classCallCheck","cloud_google_pref_possibleConstructorReturn","cloud_google_pref_getPrototypeOf","cloud_google_pref_assertThisInitialized","cloud_google_pref_inherits","cloud_google_pref_templateObject","_this$cloudStatus$pre","google_enabled","google_report_state","google_secure_devices_pin","cloud_google_pref_templateObject2","_enableToggleChanged","cloud_google_pref_templateObject3","_pinChanged","_syncEntitiesCalled","status_code","_enableToggleChanged2","cloud_google_pref_asyncToGenerator","cloud_google_pref_defineProperty","id","_pinChanged2","input","_x3","cloud_google_pref_templateObject4","cloud_remote_pref_decorate","CloudRemotePref","cloud_remote_pref_classCallCheck","cloud_remote_pref_possibleConstructorReturn","cloud_remote_pref_getPrototypeOf","cloud_remote_pref_assertThisInitialized","cloud_remote_pref_inherits","cloud_remote_pref_templateObject","_this$cloudStatus","remote_connected","remote_domain","remote_certificate","cloud_remote_pref_templateObject3","_toggleChanged","cloud_remote_pref_templateObject4","_openCertInfo","cloud_remote_pref_templateObject2","certificateInfo","_toggleChanged2","connectCloudRemote","disconnectCloudRemote","cloud_remote_pref_templateObject5","CloudAccount","LocalizeMixin","cloud_account_get","cloud_account_getPrototypeOf","_fetchSubscriptionInfo","connected","fetchCloudSubscriptionInfo","_subscription","provider","cloud","fire","subInfo","description","human_description","plan_renewal_date","replace","formatDateTime","language","cloud_account_templateObject","isWide","CloudLogin","NavigateMixin","cloud_login_templateObject","email","notify","_password","_requestInProgress","flashMessage","_error","cloud_login_get","cloud_login_getPrototypeOf","requestAnimationFrame","flashRipple","simulatedRipple","invalid","password","keyCode","_handleLogin","preventDefault","focus","setProperties","err","errCode","code","props","LOGGED_IN_URLS","NOT_LOGGED_IN_URLS","HaConfigCloud","defaultPage","showLoading","initialLoad","_cloudStatusLoaded","beforeRender","page","logged_in","routes","login","tag","register","load","forgot-password","account","google-assistant","alexa","resolve","_resolveCloudStatusLoaded","_this4","ha_config_cloud_get","ha_config_cloud_getPrototypeOf","_flashMessage","oldStatus","undefined","route","prefix","_this5","_loginEmail","_currentPage","narrow","HassRouterPage"],"mappings":"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","file":"chunk.f8ec038aed7040af6390.js","sourcesContent":["import { dedupingMixin } from \"@polymer/polymer/lib/utils/mixin\";\n/**\n * Polymer Mixin to enable a localize function powered by language/resources from hass object.\n *\n * @polymerMixin\n */\nexport default dedupingMixin(\n  (superClass) =>\n    class extends superClass {\n      static get properties() {\n        return {\n          hass: Object,\n\n          /**\n           * Translates a string to the current `language`. Any parameters to the\n           * string should be passed in order, as follows:\n           * `localize(stringKey, param1Name, param1Value, param2Name, param2Value)`\n           */\n          localize: {\n            type: Function,\n            computed: \"__computeLocalize(hass.localize)\",\n          },\n        };\n      }\n\n      __computeLocalize(localize) {\n        return localize;\n      }\n    }\n);\n","import { dedupingMixin } from \"@polymer/polymer/lib/utils/mixin\";\n\nimport { fireEvent } from \"../common/dom/fire_event\";\n\n// Polymer legacy event helpers used courtesy of the Polymer project.\n//\n// Copyright (c) 2017 The Polymer Authors. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without\n// modification, are permitted provided that the following conditions are\n// met:\n//\n//    * Redistributions of source code must retain the above copyright\n// notice, this list of conditions and the following disclaimer.\n//    * Redistributions in binary form must reproduce the above\n// copyright notice, this list of conditions and the following disclaimer\n// in the documentation and/or other materials provided with the\n// distribution.\n//    * Neither the name of Google Inc. nor the names of its\n// contributors may be used to endorse or promote products derived from\n// this software without specific prior written permission.\n//\n// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n// \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n// LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n// A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n// OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n// SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n// LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n// DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n// THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n// (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n// OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n\n/* @polymerMixin */\nexport const EventsMixin = dedupingMixin(\n  (superClass) =>\n    class extends superClass {\n      /**\n   * Dispatches a custom event with an optional detail value.\n   *\n   * @param {string} type Name of event type.\n   * @param {*=} detail Detail value containing event-specific\n   *   payload.\n   * @param {{ bubbles: (boolean|undefined),\n               cancelable: (boolean|undefined),\n                composed: (boolean|undefined) }=}\n    *  options Object specifying options.  These may include:\n    *  `bubbles` (boolean, defaults to `true`),\n    *  `cancelable` (boolean, defaults to false), and\n    *  `node` on which to fire the event (HTMLElement, defaults to `this`).\n    * @return {Event} The new event that was fired.\n    */\n      fire(type, detail, options) {\n        options = options || {};\n        return fireEvent(options.node || this, type, detail, options);\n      }\n    }\n);\n","import { customElement } from \"lit-element\";\n\n@customElement(\"ha-config-section\")\nexport class HaConfigSection extends HTMLElement {\n  constructor() {\n    super();\n    this.attachShadow({ mode: \"open\" });\n    this.shadowRoot!.innerHTML = `\n    <style>\n      .content {\n        padding: 28px 20px 0;\n        max-width: 640px;\n        margin: 0 auto;\n      }\n\n      .header {\n        font-family: var(--paper-font-headline_-_font-family);\n        -webkit-font-smoothing: var(\n          --paper-font-headline_-_-webkit-font-smoothing\n        );\n        font-size: var(--paper-font-headline_-_font-size);\n        font-weight: var(--paper-font-headline_-_font-weight);\n        letter-spacing: var(--paper-font-headline_-_letter-spacing);\n        line-height: var(--paper-font-headline_-_line-height);\n        opacity: var(--dark-primary-opacity);\n      }\n\n      .together {\n        margin-top: 20px;\n      }\n\n      .intro {\n        font-family: var(--paper-font-subhead_-_font-family);\n        -webkit-font-smoothing: var(\n          --paper-font-subhead_-_-webkit-font-smoothing\n        );\n        font-weight: var(--paper-font-subhead_-_font-weight);\n        line-height: var(--paper-font-subhead_-_line-height);\n        width: 100%;\n        width: 100%;\n        max-width: 500px;\n        opacity: var(--dark-primary-opacity);\n        font-size: 14px;\n        padding-bottom: 20px;\n      }\n\n      .panel {\n        margin-top: -24px;\n      }\n\n      .panel ::slotted(*) {\n        margin-top: 24px;\n        display: block;\n      }\n    </style>\n    <div class=\"content\">\n      <div class=\"header\"><slot name=\"header\"></slot></div>\n      <div class=\"together\">\n        <div class=\"intro\"><slot name=\"introduction\"></slot></div>\n        <div class=\"panel\"><slot></slot></div>\n      </div>\n    </div>\n    `;\n  }\n}\n","import { customElement, CSSResult, css, query } from \"lit-element\";\nimport \"@material/mwc-switch\";\nimport { style } from \"@material/mwc-switch/mwc-switch-css\";\n// tslint:disable-next-line\nimport { Switch } from \"@material/mwc-switch\";\nimport { Constructor } from \"../types\";\n// tslint:disable-next-line\nconst MwcSwitch = customElements.get(\"mwc-switch\") as Constructor<Switch>;\n\n@customElement(\"ha-switch\")\nexport class HaSwitch extends MwcSwitch {\n  @query(\"slot\") private _slot!: HTMLSlotElement;\n\n  protected firstUpdated() {\n    super.firstUpdated();\n    this.style.setProperty(\n      \"--mdc-theme-secondary\",\n      \"var(--switch-checked-color)\"\n    );\n    this.classList.toggle(\n      \"slotted\",\n      Boolean(this._slot.assignedNodes().length)\n    );\n  }\n\n  protected static get styles(): CSSResult[] {\n    return [\n      style,\n      css`\n        :host {\n          display: flex;\n          flex-direction: row;\n          align-items: center;\n        }\n        .mdc-switch.mdc-switch--checked .mdc-switch__thumb {\n          background-color: var(--switch-checked-button-color);\n          border-color: var(--switch-checked-button-color);\n        }\n        .mdc-switch.mdc-switch--checked .mdc-switch__track {\n          background-color: var(--switch-checked-track-color);\n          border-color: var(--switch-checked-track-color);\n        }\n        .mdc-switch:not(.mdc-switch--checked) .mdc-switch__thumb {\n          background-color: var(--switch-unchecked-button-color);\n          border-color: var(--switch-unchecked-button-color);\n        }\n        .mdc-switch:not(.mdc-switch--checked) .mdc-switch__track {\n          background-color: var(--switch-unchecked-track-color);\n          border-color: var(--switch-unchecked-track-color);\n        }\n        :host(.slotted) .mdc-switch {\n          margin-right: 24px;\n        }\n      `,\n    ];\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-switch\": HaSwitch;\n  }\n}\n","import fecha from \"fecha\";\n\n// Check for support of native locale string options\nfunction toLocaleStringSupportsOptions() {\n  try {\n    new Date().toLocaleString(\"i\");\n  } catch (e) {\n    return e.name === \"RangeError\";\n  }\n  return false;\n}\n\nexport default toLocaleStringSupportsOptions()\n  ? (dateObj: Date, locales: string) =>\n      dateObj.toLocaleString(locales, {\n        year: \"numeric\",\n        month: \"long\",\n        day: \"numeric\",\n        hour: \"numeric\",\n        minute: \"2-digit\",\n      })\n  : (dateObj: Date) => fecha.format(dateObj, \"haDateTime\");\n","import \"@material/mwc-button\";\nimport \"@polymer/paper-spinner/paper-spinner\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nclass HaProgressButton extends PolymerElement {\n  static get template() {\n    return html`\n      <style>\n        .container {\n          position: relative;\n          display: inline-block;\n        }\n\n        mwc-button {\n          transition: all 1s;\n        }\n\n        .success mwc-button {\n          --mdc-theme-primary: white;\n          background-color: var(--google-green-500);\n          transition: none;\n        }\n\n        .error mwc-button {\n          --mdc-theme-primary: white;\n          background-color: var(--google-red-500);\n          transition: none;\n        }\n\n        .progress {\n          @apply --layout;\n          @apply --layout-center-center;\n          position: absolute;\n          top: 0;\n          left: 0;\n          right: 0;\n          bottom: 0;\n        }\n      </style>\n      <div class=\"container\" id=\"container\">\n        <mwc-button\n          id=\"button\"\n          disabled=\"[[computeDisabled(disabled, progress)]]\"\n          on-click=\"buttonTapped\"\n        >\n          <slot></slot>\n        </mwc-button>\n        <template is=\"dom-if\" if=\"[[progress]]\">\n          <div class=\"progress\"><paper-spinner active=\"\"></paper-spinner></div>\n        </template>\n      </div>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: {\n        type: Object,\n      },\n\n      progress: {\n        type: Boolean,\n        value: false,\n      },\n\n      disabled: {\n        type: Boolean,\n        value: false,\n      },\n    };\n  }\n\n  tempClass(className) {\n    var classList = this.$.container.classList;\n    classList.add(className);\n    setTimeout(() => {\n      classList.remove(className);\n    }, 1000);\n  }\n\n  ready() {\n    super.ready();\n    this.addEventListener(\"click\", (ev) => this.buttonTapped(ev));\n  }\n\n  buttonTapped(ev) {\n    if (this.progress) ev.stopPropagation();\n  }\n\n  actionSuccess() {\n    this.tempClass(\"success\");\n  }\n\n  actionError() {\n    this.tempClass(\"error\");\n  }\n\n  computeDisabled(disabled, progress) {\n    return disabled || progress;\n  }\n}\n\ncustomElements.define(\"ha-progress-button\", HaProgressButton);\n","import { showToast } from \"./toast\";\nimport { HomeAssistant } from \"../types\";\n\nexport const showSaveSuccessToast = (el: HTMLElement, hass: HomeAssistant) =>\n  showToast(el, {\n    message: hass!.localize(\"ui.common.successfully_saved\"),\n  });\n","import { dedupingMixin } from \"@polymer/polymer/lib/utils/mixin\";\nimport { navigate } from \"../common/navigate\";\n\n/*\n * @polymerMixin\n * @appliesMixin EventsMixin\n */\nexport default dedupingMixin(\n  (superClass) =>\n    class extends superClass {\n      navigate(...args) {\n        navigate(this, ...args);\n      }\n    }\n);\n","import { LitElement, html } from \"lit-element\";\n\nimport \"./ha-progress-button\";\nimport { fireEvent } from \"../../common/dom/fire_event\";\n\nclass HaCallApiButton extends LitElement {\n  render() {\n    return html`\n      <ha-progress-button\n        .progress=\"${this.progress}\"\n        @click=\"${this._buttonTapped}\"\n        ?disabled=\"${this.disabled}\"\n        ><slot></slot\n      ></ha-progress-button>\n    `;\n  }\n\n  constructor() {\n    super();\n    this.method = \"POST\";\n    this.data = {};\n    this.disabled = false;\n    this.progress = false;\n  }\n\n  static get properties() {\n    return {\n      hass: {},\n      progress: Boolean,\n      path: String,\n      method: String,\n      data: {},\n      disabled: Boolean,\n    };\n  }\n\n  get progressButton() {\n    return this.renderRoot.querySelector(\"ha-progress-button\");\n  }\n\n  async _buttonTapped() {\n    this.progress = true;\n    const eventData = {\n      method: this.method,\n      path: this.path,\n      data: this.data,\n    };\n\n    try {\n      const resp = await this.hass.callApi(this.method, this.path, this.data);\n      this.progress = false;\n      this.progressButton.actionSuccess();\n      eventData.success = true;\n      eventData.response = resp;\n    } catch (err) {\n      this.progress = false;\n      this.progressButton.actionError();\n      eventData.success = false;\n      eventData.response = err;\n    }\n\n    fireEvent(this, \"hass-api-called\", eventData);\n  }\n}\n\ncustomElements.define(\"ha-call-api-button\", HaCallApiButton);\n","import { HomeAssistant } from \"../types\";\n\nexport interface AlexaEntity {\n  entity_id: string;\n  display_categories: string[];\n  interfaces: string[];\n}\n\nexport const fetchCloudAlexaEntities = (hass: HomeAssistant) =>\n  hass.callWS<AlexaEntity[]>({ type: \"cloud/alexa/entities\" });\n\nexport const syncCloudAlexaEntities = (hass: HomeAssistant) =>\n  hass.callWS({ type: \"cloud/alexa/sync\" });\n","import { html, LitElement, PropertyValues, property } from \"lit-element\";\nimport \"@polymer/paper-item/paper-item\";\nimport \"@polymer/paper-item/paper-item-body\";\nimport \"@polymer/paper-spinner/paper-spinner\";\n\nimport \"../../../../components/ha-card\";\nimport \"../../../../components/ha-switch\";\n\nimport { HomeAssistant, WebhookError } from \"../../../../types\";\nimport { Webhook, fetchWebhooks } from \"../../../../data/webhook\";\nimport {\n  createCloudhook,\n  deleteCloudhook,\n  CloudWebhook,\n  CloudStatusLoggedIn,\n} from \"../../../../data/cloud\";\nimport { showManageCloudhookDialog } from \"../dialog-manage-cloudhook/show-dialog-manage-cloudhook\";\n\nexport class CloudWebhooks extends LitElement {\n  @property() public hass?: HomeAssistant;\n  @property() public cloudStatus?: CloudStatusLoggedIn;\n  @property() private _cloudHooks?: { [webhookId: string]: CloudWebhook };\n  @property() private _localHooks?: Webhook[];\n  @property() private _progress: string[];\n\n  constructor() {\n    super();\n    this._progress = [];\n  }\n\n  public connectedCallback() {\n    super.connectedCallback();\n    this._fetchData();\n  }\n\n  protected render() {\n    return html`\n      ${this.renderStyle()}\n      <ha-card\n        header=${this.hass!.localize(\n          \"ui.panel.config.cloud.account.webhooks.title\"\n        )}\n      >\n        <div class=\"card-content\">\n          ${this.hass!.localize(\"ui.panel.config.cloud.account.webhooks.info\")}\n          ${this._renderBody()}\n\n          <div class=\"footer\">\n            <a href=\"https://www.nabucasa.com/config/webhooks\" target=\"_blank\">\n              ${this.hass!.localize(\n                \"ui.panel.config.cloud.account.webhooks.link_learn_more\"\n              )}\n            </a>\n          </div>\n        </div>\n      </ha-card>\n    `;\n  }\n\n  protected updated(changedProps: PropertyValues) {\n    super.updated(changedProps);\n    if (changedProps.has(\"cloudStatus\") && this.cloudStatus) {\n      this._cloudHooks = this.cloudStatus.prefs.cloudhooks || {};\n    }\n  }\n\n  private _renderBody() {\n    if (!this.cloudStatus || !this._localHooks || !this._cloudHooks) {\n      return html`\n        <div class=\"body-text\">\n          ${this.hass!.localize(\n            \"ui.panel.config.cloud.account.webhooks.loading\"\n          )}\n        </div>\n      `;\n    }\n\n    if (this._localHooks.length === 0) {\n      return html`\n        <div class=\"body-text\">\n          ${this.hass!.localize(\n            \"ui.panel.config.cloud.account.webhooks.no_hooks_yet\"\n          )}\n          <a href=\"/config/integrations\"\n            >${this.hass!.localize(\n              \"ui.panel.config.cloud.account.webhooks.no_hooks_yet_link_integration\"\n            )}</a\n          >\n          ${this.hass!.localize(\n            \"ui.panel.config.cloud.account.webhooks.no_hooks_yet2\"\n          )}\n          <a href=\"/config/automation/new\"\n            >${this.hass!.localize(\n              \"ui.panel.config.cloud.account.webhooks.no_hooks_yet_link_automation\"\n            )}</a\n          >.\n        </div>\n      `;\n    }\n\n    return this._localHooks.map(\n      (entry) => html`\n        <div class=\"webhook\" .entry=\"${entry}\">\n          <paper-item-body two-line>\n            <div>\n              ${entry.name}\n              ${entry.domain === entry.name.toLowerCase()\n                ? \"\"\n                : ` (${entry.domain})`}\n            </div>\n            <div secondary>${entry.webhook_id}</div>\n          </paper-item-body>\n          ${this._progress.includes(entry.webhook_id)\n            ? html`\n                <div class=\"progress\">\n                  <paper-spinner active></paper-spinner>\n                </div>\n              `\n            : this._cloudHooks![entry.webhook_id]\n            ? html`\n                <mwc-button @click=\"${this._handleManageButton}\">\n                  ${this.hass!.localize(\n                    \"ui.panel.config.cloud.account.webhooks.manage\"\n                  )}\n                </mwc-button>\n              `\n            : html`\n                <ha-switch @click=\"${this._enableWebhook}\"></ha-switch>\n              `}\n        </div>\n      `\n    );\n  }\n\n  private _showDialog(webhookId: string) {\n    const webhook = this._localHooks!.find(\n      (ent) => ent.webhook_id === webhookId\n    )!;\n    const cloudhook = this._cloudHooks![webhookId];\n    showManageCloudhookDialog(this, {\n      webhook,\n      cloudhook,\n      disableHook: () => this._disableWebhook(webhookId),\n    });\n  }\n\n  private _handleManageButton(ev: MouseEvent) {\n    const entry = (ev.currentTarget as any).parentElement.entry as Webhook;\n    this._showDialog(entry.webhook_id);\n  }\n\n  private async _enableWebhook(ev: MouseEvent) {\n    const entry = (ev.currentTarget as any).parentElement.entry;\n    this._progress = [...this._progress, entry.webhook_id];\n    let updatedWebhook;\n\n    try {\n      updatedWebhook = await createCloudhook(this.hass!, entry.webhook_id);\n    } catch (err) {\n      alert((err as WebhookError).message);\n      return;\n    } finally {\n      this._progress = this._progress.filter((wid) => wid !== entry.webhook_id);\n    }\n\n    this._cloudHooks = {\n      ...this._cloudHooks,\n      [entry.webhook_id]: updatedWebhook,\n    };\n\n    // Only open dialog if we're not also enabling others, otherwise it's confusing\n    if (this._progress.length === 0) {\n      this._showDialog(entry.webhook_id);\n    }\n  }\n\n  private async _disableWebhook(webhookId: string) {\n    this._progress = [...this._progress, webhookId];\n    try {\n      await deleteCloudhook(this.hass!, webhookId!);\n    } catch (err) {\n      alert(\n        `${this.hass!.localize(\n          \"ui.panel.config.cloud.account.webhooks.disable_hook_error_msg\"\n        )} ${(err as WebhookError).message}`\n      );\n      return;\n    } finally {\n      this._progress = this._progress.filter((wid) => wid !== webhookId);\n    }\n\n    // Remove cloud related parts from entry.\n    const { [webhookId]: disabledHook, ...newHooks } = this._cloudHooks!;\n    this._cloudHooks = newHooks;\n  }\n\n  private async _fetchData() {\n    this._localHooks = this.hass!.config.components.includes(\"webhook\")\n      ? await fetchWebhooks(this.hass!)\n      : [];\n  }\n\n  private renderStyle() {\n    return html`\n      <style>\n        .body-text {\n          padding: 8px 0;\n        }\n        .webhook {\n          display: flex;\n          padding: 4px 0;\n        }\n        .progress {\n          margin-right: 16px;\n          display: flex;\n          flex-direction: column;\n          justify-content: center;\n        }\n        .footer {\n          padding-top: 16px;\n        }\n        .body-text a,\n        .footer a {\n          color: var(--primary-color);\n        }\n      </style>\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"cloud-webhooks\": CloudWebhooks;\n  }\n}\n\ncustomElements.define(\"cloud-webhooks\", CloudWebhooks);\n","import { fireEvent } from \"../../../../common/dom/fire_event\";\nimport { Webhook } from \"../../../../data/webhook\";\nimport { CloudWebhook } from \"../../../../data/cloud\";\n\nexport interface WebhookDialogParams {\n  webhook: Webhook;\n  cloudhook: CloudWebhook;\n  disableHook: () => void;\n}\n\nexport const showManageCloudhookDialog = (\n  element: HTMLElement,\n  webhookDialogParams: WebhookDialogParams\n): void => {\n  fireEvent(element, \"show-dialog\", {\n    dialogTag: \"dialog-manage-cloudhook\",\n    dialogImport: () =>\n      import(\n        /* webpackChunkName: \"cloud-webhook-manage-dialog\" */ \"./dialog-manage-cloudhook\"\n      ),\n    dialogParams: webhookDialogParams,\n  });\n};\n","import { HomeAssistant } from \"../types\";\n\nexport interface Webhook {\n  webhook_id: string;\n  domain: string;\n  name: string;\n}\n\nexport const fetchWebhooks = (hass: HomeAssistant): Promise<Webhook[]> =>\n  hass.callWS({\n    type: \"webhook/list\",\n  });\n","import {\n  html,\n  LitElement,\n  TemplateResult,\n  CSSResult,\n  css,\n  property,\n} from \"lit-element\";\nimport \"@material/mwc-button\";\n\nimport \"../../../../components/ha-card\";\nimport \"../../../../components/ha-switch\";\n\n// tslint:disable-next-line: no-duplicate-imports\nimport { HaSwitch } from \"../../../../components/ha-switch\";\nimport { fireEvent } from \"../../../../common/dom/fire_event\";\nimport { HomeAssistant } from \"../../../../types\";\nimport { CloudStatusLoggedIn, updateCloudPref } from \"../../../../data/cloud\";\nimport { syncCloudAlexaEntities } from \"../../../../data/alexa\";\n\nexport class CloudAlexaPref extends LitElement {\n  @property() public hass?: HomeAssistant;\n  @property() public cloudStatus?: CloudStatusLoggedIn;\n  @property() private _syncing = false;\n\n  protected render(): TemplateResult | void {\n    if (!this.cloudStatus) {\n      return html``;\n    }\n\n    const { alexa_enabled, alexa_report_state } = this.cloudStatus!.prefs;\n\n    return html`\n      <ha-card\n        header=${this.hass!.localize(\n          \"ui.panel.config.cloud.account.alexa.title\"\n        )}\n      >\n        <div class=\"switch\">\n          <ha-switch\n            .checked=${alexa_enabled}\n            @change=${this._enabledToggleChanged}\n          ></ha-switch>\n        </div>\n        <div class=\"card-content\">\n          ${this.hass!.localize(\"ui.panel.config.cloud.account.alexa.info\")}\n          <ul>\n            <li>\n              <a\n                href=\"https://skills-store.amazon.com/deeplink/dp/B0772J1QKB?deviceType=app\"\n                target=\"_blank\"\n              >\n                ${this.hass!.localize(\n                  \"ui.panel.config.cloud.account.alexa.enable_ha_skill\"\n                )}\n              </a>\n            </li>\n            <li>\n              <a\n                href=\"https://www.nabucasa.com/config/amazon_alexa/\"\n                target=\"_blank\"\n              >\n                ${this.hass!.localize(\n                  \"ui.panel.config.cloud.account.alexa.config_documentation\"\n                )}\n              </a>\n            </li>\n          </ul>\n          ${alexa_enabled\n            ? html`\n                <div class=\"state-reporting\">\n                  <h3>\n                    ${this.hass!.localize(\n                      \"ui.panel.config.cloud.account.alexa.enable_state_reporting\"\n                    )}\n                  </h3>\n                  <div class=\"state-reporting-switch\">\n                    <ha-switch\n                      .checked=${alexa_report_state}\n                      @change=${this._reportToggleChanged}\n                    ></ha-switch>\n                  </div>\n                </div>\n                <p>\n                  ${this.hass!.localize(\n                    \"ui.panel.config.cloud.account.alexa.info_state_reporting\"\n                  )}\n                </p>\n              `\n            : \"\"}\n        </div>\n        <div class=\"card-actions\">\n          <mwc-button @click=${this._handleSync} .disabled=${this._syncing}>\n            ${this.hass!.localize(\n              \"ui.panel.config.cloud.account.alexa.sync_entities\"\n            )}\n          </mwc-button>\n          <div class=\"spacer\"></div>\n          <a href=\"/config/cloud/alexa\">\n            <mwc-button\n              >${this.hass!.localize(\n                \"ui.panel.config.cloud.account.alexa.manage_entities\"\n              )}</mwc-button\n            >\n          </a>\n        </div>\n      </ha-card>\n    `;\n  }\n\n  private async _handleSync() {\n    this._syncing = true;\n    try {\n      await syncCloudAlexaEntities(this.hass!);\n    } catch (err) {\n      alert(\n        `${this.hass!.localize(\n          \"ui.panel.config.cloud.account.alexa.sync_entities_error\"\n        )} ${err.body.message}`\n      );\n    } finally {\n      this._syncing = false;\n    }\n  }\n\n  private async _enabledToggleChanged(ev) {\n    const toggle = ev.target as HaSwitch;\n    try {\n      await updateCloudPref(this.hass!, { alexa_enabled: toggle.checked! });\n      fireEvent(this, \"ha-refresh-cloud-status\");\n    } catch (err) {\n      toggle.checked = !toggle.checked;\n    }\n  }\n\n  private async _reportToggleChanged(ev) {\n    const toggle = ev.target as HaSwitch;\n    try {\n      await updateCloudPref(this.hass!, {\n        alexa_report_state: toggle.checked!,\n      });\n      fireEvent(this, \"ha-refresh-cloud-status\");\n    } catch (err) {\n      alert(\n        `${this.hass!.localize(\n          \"ui.panel.config.cloud.account.alexa.state_reporting_error\",\n          \"enable_disable\",\n          this.hass!.localize(\n            toggle.checked\n              ? \"ui.panel.config.cloud.account.alexa.enable\"\n              : \"ui.panel.config.cloud.account.alexa.disable\"\n          )\n        )} ${err.message}`\n      );\n      toggle.checked = !toggle.checked;\n    }\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      a {\n        color: var(--primary-color);\n      }\n      .switch {\n        position: absolute;\n        right: 24px;\n        top: 32px;\n      }\n      .card-actions {\n        display: flex;\n      }\n      .card-actions a {\n        text-decoration: none;\n      }\n      .spacer {\n        flex-grow: 1;\n      }\n      .state-reporting {\n        display: flex;\n        margin-top: 1.5em;\n      }\n      .state-reporting + p {\n        margin-top: 0.5em;\n      }\n      .state-reporting h3 {\n        flex-grow: 1;\n        margin: 0;\n      }\n      .state-reporting-switch {\n        margin-top: 0.25em;\n        margin-right: 7px;\n        margin-left: 0.5em;\n      }\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"cloud-alexa-pref\": CloudAlexaPref;\n  }\n}\n\ncustomElements.define(\"cloud-alexa-pref\", CloudAlexaPref);\n","import {\n  html,\n  LitElement,\n  TemplateResult,\n  CSSResult,\n  css,\n  property,\n} from \"lit-element\";\nimport \"@material/mwc-button\";\nimport \"../../../../components/buttons/ha-call-api-button\";\n\nimport \"../../../../components/ha-card\";\nimport \"../../../../components/ha-switch\";\n\n// tslint:disable-next-line\nimport { HaSwitch } from \"../../../../components/ha-switch\";\nimport { fireEvent } from \"../../../../common/dom/fire_event\";\nimport { HomeAssistant } from \"../../../../types\";\nimport { CloudStatusLoggedIn, updateCloudPref } from \"../../../../data/cloud\";\nimport { PaperInputElement } from \"@polymer/paper-input/paper-input\";\nimport { showSaveSuccessToast } from \"../../../../util/toast-saved-success\";\n\nexport class CloudGooglePref extends LitElement {\n  @property() public hass?: HomeAssistant;\n  @property() public cloudStatus?: CloudStatusLoggedIn;\n\n  protected render(): TemplateResult | void {\n    if (!this.cloudStatus) {\n      return html``;\n    }\n\n    const {\n      google_enabled,\n      google_report_state,\n      google_secure_devices_pin,\n    } = this.cloudStatus.prefs;\n\n    return html`\n      <ha-card\n        header=${this.hass!.localize(\n          \"ui.panel.config.cloud.account.google.title\"\n        )}\n      >\n        <div class=\"switch\">\n          <ha-switch\n            id=\"google_enabled\"\n            .checked=\"${google_enabled}\"\n            @change=\"${this._enableToggleChanged}\"\n          ></ha-switch>\n        </div>\n        <div class=\"card-content\">\n          ${this.hass!.localize(\"ui.panel.config.cloud.account.google.info\")}\n          <ul>\n            <li>\n              <a\n                href=\"https://assistant.google.com/services/a/uid/00000091fd5fb875?hl=en-US\"\n                target=\"_blank\"\n              >\n                ${this.hass!.localize(\n                  \"ui.panel.config.cloud.account.google.enable_ha_skill\"\n                )}\n              </a>\n            </li>\n            <li>\n              <a\n                href=\"https://www.nabucasa.com/config/google_assistant/\"\n                target=\"_blank\"\n              >\n                ${this.hass!.localize(\n                  \"ui.panel.config.cloud.account.google.config_documentation\"\n                )}\n              </a>\n            </li>\n          </ul>\n          ${google_enabled\n            ? html`\n                <div class=\"state-reporting\">\n                  <h3>\n                    ${this.hass!.localize(\n                      \"ui.panel.config.cloud.account.google.enable_state_reporting\"\n                    )}\n                  </h3>\n                  <div class=\"state-reporting-switch\">\n                    <ha-switch\n                      .checked=${google_report_state}\n                      @change=${this._reportToggleChanged}\n                    ></ha-switch>\n                  </div>\n                </div>\n                <p>\n                  ${this.hass!.localize(\n                    \"ui.panel.config.cloud.account.google.info_state_reporting\"\n                  )}\n                </p>\n                <div class=\"secure_devices\">\n                  <h3>\n                    ${this.hass!.localize(\n                      \"ui.panel.config.cloud.account.google.security_devices\"\n                    )}\n                  </h3>\n                  ${this.hass!.localize(\n                    \"ui.panel.config.cloud.account.google.enter_pin_info\"\n                  )}\n                  <paper-input\n                    label=\"${this.hass!.localize(\n                      \"ui.panel.config.cloud.account.google.devices_pin\"\n                    )}\"\n                    id=\"google_secure_devices_pin\"\n                    placeholder=\"${this.hass!.localize(\n                      \"ui.panel.config.cloud.account.google.enter_pin_hint\"\n                    )}\"\n                    .value=${google_secure_devices_pin || \"\"}\n                    @change=\"${this._pinChanged}\"\n                  ></paper-input>\n                </div>\n              `\n            : \"\"}\n        </div>\n        <div class=\"card-actions\">\n          <ha-call-api-button\n            .hass=\"${this.hass}\"\n            .disabled=\"${!google_enabled}\"\n            @hass-api-called=${this._syncEntitiesCalled}\n            path=\"cloud/google_actions/sync\"\n          >\n            ${this.hass!.localize(\n              \"ui.panel.config.cloud.account.google.sync_entities\"\n            )}\n          </ha-call-api-button>\n          <div class=\"spacer\"></div>\n          <a href=\"/config/cloud/google-assistant\">\n            <mwc-button\n              >${this.hass!.localize(\n                \"ui.panel.config.cloud.account.google.manage_entities\"\n              )}</mwc-button\n            >\n          </a>\n        </div>\n      </ha-card>\n    `;\n  }\n\n  private _syncEntitiesCalled(ev: CustomEvent) {\n    if (!ev.detail.success && ev.detail.response.status_code === 404) {\n      alert(\n        this.hass!.localize(\n          \"ui.panel.config.cloud.account.google.sync_entities_404_message\"\n        )\n      );\n    }\n  }\n\n  private async _enableToggleChanged(ev) {\n    const toggle = ev.target as HaSwitch;\n    try {\n      await updateCloudPref(this.hass!, { [toggle.id]: toggle.checked! });\n      fireEvent(this, \"ha-refresh-cloud-status\");\n    } catch (err) {\n      toggle.checked = !toggle.checked;\n    }\n  }\n\n  private async _reportToggleChanged(ev) {\n    const toggle = ev.target as HaSwitch;\n    try {\n      await updateCloudPref(this.hass!, {\n        google_report_state: toggle.checked!,\n      });\n      fireEvent(this, \"ha-refresh-cloud-status\");\n    } catch (err) {\n      alert(\n        `Unable to ${toggle.checked ? \"enable\" : \"disable\"} report state. ${\n          err.message\n        }`\n      );\n      toggle.checked = !toggle.checked;\n    }\n  }\n\n  private async _pinChanged(ev) {\n    const input = ev.target as PaperInputElement;\n    try {\n      await updateCloudPref(this.hass!, {\n        [input.id]: input.value || null,\n      });\n      showSaveSuccessToast(this, this.hass!);\n      fireEvent(this, \"ha-refresh-cloud-status\");\n    } catch (err) {\n      alert(\n        `${this.hass!.localize(\n          \"ui.panel.config.cloud.account.google.enter_pin_error\"\n        )} ${err.message}`\n      );\n      input.value = this.cloudStatus!.prefs.google_secure_devices_pin;\n    }\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      a {\n        color: var(--primary-color);\n      }\n      .switch {\n        position: absolute;\n        right: 24px;\n        top: 32px;\n      }\n      ha-call-api-button {\n        color: var(--primary-color);\n        font-weight: 500;\n      }\n      .secure_devices {\n        padding-top: 8px;\n      }\n      paper-input {\n        width: 250px;\n      }\n      .card-actions {\n        display: flex;\n      }\n      .card-actions a {\n        text-decoration: none;\n      }\n      .spacer {\n        flex-grow: 1;\n      }\n      .state-reporting {\n        display: flex;\n        margin-top: 1.5em;\n      }\n      .state-reporting + p {\n        margin-top: 0.5em;\n      }\n      h3 {\n        margin: 0 0 8px 0;\n      }\n      .state-reporting h3 {\n        flex-grow: 1;\n        margin: 0;\n      }\n      .state-reporting-switch {\n        margin-top: 0.25em;\n        margin-right: 7px;\n        margin-left: 0.5em;\n      }\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"cloud-google-pref\": CloudGooglePref;\n  }\n}\n\ncustomElements.define(\"cloud-google-pref\", CloudGooglePref);\n","import {\n  html,\n  LitElement,\n  TemplateResult,\n  customElement,\n  CSSResult,\n  css,\n  property,\n} from \"lit-element\";\nimport \"@material/mwc-button\";\nimport \"@polymer/paper-item/paper-item-body\";\n\nimport \"../../../../components/ha-card\";\nimport \"../../../../components/ha-switch\";\n\n// tslint:disable-next-line\nimport { HaSwitch } from \"../../../../components/ha-switch\";\nimport { fireEvent } from \"../../../../common/dom/fire_event\";\nimport { HomeAssistant } from \"../../../../types\";\nimport {\n  connectCloudRemote,\n  disconnectCloudRemote,\n  CloudStatusLoggedIn,\n} from \"../../../../data/cloud\";\nimport { showCloudCertificateDialog } from \"../dialog-cloud-certificate/show-dialog-cloud-certificate\";\n\n@customElement(\"cloud-remote-pref\")\nexport class CloudRemotePref extends LitElement {\n  @property() public hass?: HomeAssistant;\n  @property() public cloudStatus?: CloudStatusLoggedIn;\n\n  protected render(): TemplateResult | void {\n    if (!this.cloudStatus) {\n      return html``;\n    }\n\n    const {\n      remote_connected,\n      remote_domain,\n      remote_certificate,\n    } = this.cloudStatus;\n\n    if (!remote_certificate) {\n      return html`\n        <ha-card\n          header=${this.hass!.localize(\n            \"ui.panel.config.cloud.account.remote.title\"\n          )}\n        >\n          <div class=\"preparing\">\n            ${this.hass!.localize(\n              \"ui.panel.config.cloud.account.remote.access_is_being_prepared\"\n            )}\n          </div>\n        </ha-card>\n      `;\n    }\n\n    return html`\n      <ha-card\n        header=${this.hass!.localize(\n          \"ui.panel.config.cloud.account.remote.title\"\n        )}\n      >\n        <div class=\"switch\">\n          <ha-switch\n            .checked=\"${remote_connected}\"\n            @change=\"${this._toggleChanged}\"\n          ></ha-switch>\n        </div>\n        <div class=\"card-content\">\n          ${this.hass!.localize(\"ui.panel.config.cloud.account.remote.info\")}\n          ${remote_connected\n            ? this.hass!.localize(\n                \"ui.panel.config.cloud.account.remote.instance_is_available\"\n              )\n            : this.hass!.localize(\n                \"ui.panel.config.cloud.account.remote.instance_will_be_available\"\n              )}\n          <a href=\"https://${remote_domain}\" target=\"_blank\" class=\"break-word\">\n            https://${remote_domain}</a\n          >.\n        </div>\n        <div class=\"card-actions\">\n          <a href=\"https://www.nabucasa.com/config/remote/\" target=\"_blank\">\n            <mwc-button\n              >${this.hass!.localize(\n                \"ui.panel.config.cloud.account.remote.link_learn_how_it_works\"\n              )}</mwc-button\n            >\n          </a>\n          ${remote_certificate\n            ? html`\n                <div class=\"spacer\"></div>\n                <mwc-button @click=${this._openCertInfo}>\n                  ${this.hass!.localize(\n                    \"ui.panel.config.cloud.account.remote.certificate_info\"\n                  )}\n                </mwc-button>\n              `\n            : \"\"}\n        </div>\n      </ha-card>\n    `;\n  }\n\n  private _openCertInfo() {\n    showCloudCertificateDialog(this, {\n      certificateInfo: this.cloudStatus!.remote_certificate!,\n    });\n  }\n\n  private async _toggleChanged(ev) {\n    const toggle = ev.target as HaSwitch;\n\n    try {\n      if (toggle.checked) {\n        await connectCloudRemote(this.hass!);\n      } else {\n        await disconnectCloudRemote(this.hass!);\n      }\n      fireEvent(this, \"ha-refresh-cloud-status\");\n    } catch (err) {\n      alert(err.message);\n      toggle.checked = !toggle.checked;\n    }\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      .preparing {\n        padding: 0 16px 16px;\n      }\n      a {\n        color: var(--primary-color);\n      }\n      .break-word {\n        overflow-wrap: break-word;\n      }\n      .switch {\n        position: absolute;\n        right: 24px;\n        top: 32px;\n      }\n      .card-actions {\n        display: flex;\n      }\n      .card-actions a {\n        text-decoration: none;\n      }\n      .spacer {\n        flex-grow: 1;\n      }\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"cloud-remote-pref\": CloudRemotePref;\n  }\n}\n","import { fireEvent } from \"../../../../common/dom/fire_event\";\nimport { CertificateInformation } from \"../../../../data/cloud\";\n\nexport interface CloudCertificateParams {\n  certificateInfo: CertificateInformation;\n}\n\nexport const showCloudCertificateDialog = (\n  element: HTMLElement,\n  webhookDialogParams: CloudCertificateParams\n): void => {\n  fireEvent(element, \"show-dialog\", {\n    dialogTag: \"dialog-cloud-certificate\",\n    dialogImport: () =>\n      import(\n        /* webpackChunkName: \"dialog-cloud-certificate\" */ \"./dialog-cloud-certificate\"\n      ),\n    dialogParams: webhookDialogParams,\n  });\n};\n","import \"@material/mwc-button\";\nimport \"@polymer/paper-item/paper-item-body\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport \"../../../../components/ha-card\";\nimport \"../../../../components/buttons/ha-call-api-button\";\nimport \"../../../../layouts/hass-subpage\";\nimport \"../../../../resources/ha-style\";\nimport \"../../ha-config-section\";\nimport \"./cloud-webhooks\";\nimport \"./cloud-alexa-pref\";\nimport \"./cloud-google-pref\";\nimport \"./cloud-remote-pref\";\n\nimport { EventsMixin } from \"../../../../mixins/events-mixin\";\nimport { fetchCloudSubscriptionInfo } from \"../../../../data/cloud\";\n\nimport formatDateTime from \"../../../../common/datetime/format_date_time\";\nimport LocalizeMixin from \"../../../../mixins/localize-mixin\";\n\n/*\n * @appliesMixin EventsMixin\n * @appliesMixin LocalizeMixin\n */\nclass CloudAccount extends EventsMixin(LocalizeMixin(PolymerElement)) {\n  static get template() {\n    return html`\n      <style include=\"iron-flex ha-style\">\n        [slot=\"introduction\"] {\n          margin: -1em 0;\n        }\n        [slot=\"introduction\"] a {\n          color: var(--primary-color);\n        }\n        .content {\n          padding-bottom: 24px;\n          direction: ltr;\n        }\n        .account-row {\n          display: flex;\n          padding: 0 16px;\n        }\n        mwc-button {\n          align-self: center;\n        }\n        .soon {\n          font-style: italic;\n          margin-top: 24px;\n          text-align: center;\n        }\n        .nowrap {\n          white-space: nowrap;\n        }\n        .wrap {\n          white-space: normal;\n        }\n        .status {\n          text-transform: capitalize;\n          padding: 16px;\n        }\n        a {\n          color: var(--primary-color);\n        }\n      </style>\n      <hass-subpage\n        showBackButton=\"[[!isWide]]\"\n        header=\"[[localize('ui.panel.config.cloud.caption')]]\"\n      >\n        <div class=\"content\">\n          <ha-config-section is-wide=\"[[isWide]]\">\n            <span slot=\"header\"\n              >[[localize('ui.panel.config.cloud.caption')]]</span\n            >\n            <div slot=\"introduction\">\n              <p>\n                [[localize('ui.panel.config.cloud.account.thank_you_note')]]\n              </p>\n            </div>\n\n            <ha-card\n              header=\"[[localize('ui.panel.config.cloud.account.nabu_casa_account')]]\"\n            >\n              <div class=\"account-row\">\n                <paper-item-body two-line=\"\">\n                  [[cloudStatus.email]]\n                  <div secondary class=\"wrap\">\n                    [[_formatSubscription(_subscription)]]\n                  </div>\n                </paper-item-body>\n              </div>\n\n              <div class=\"account-row\">\n                <paper-item-body\n                  >[[localize('ui.panel.config.cloud.account.connection_status')]]</paper-item-body\n                >\n                <div class=\"status\">[[cloudStatus.cloud]]</div>\n              </div>\n\n              <div class=\"card-actions\">\n                <a href=\"https://account.nabucasa.com\" target=\"_blank\"\n                  ><mwc-button\n                    >[[localize('ui.panel.config.cloud.account.manage_account')]]</mwc-button\n                  ></a\n                >\n                <mwc-button style=\"float: right\" on-click=\"handleLogout\"\n                  >[[localize('ui.panel.config.cloud.account.sign_out')]]</mwc-button\n                >\n              </div>\n            </ha-card>\n          </ha-config-section>\n\n          <ha-config-section is-wide=\"[[isWide]]\">\n            <span slot=\"header\"\n              >[[localize('ui.panel.config.cloud.account.integrations')]]</span\n            >\n            <div slot=\"introduction\">\n              <p>\n                [[localize('ui.panel.config.cloud.account.integrations_introduction')]]\n              </p>\n              <p>\n                [[localize('ui.panel.config.cloud.account.integrations_introduction2')]]\n                <a href=\"https://www.nabucasa.com\" target=\"_blank\"\n                  >[[localize('ui.panel.config.cloud.account.integrations_link_all_features')]]</a\n                >.\n              </p>\n            </div>\n\n            <cloud-remote-pref\n              hass=\"[[hass]]\"\n              cloud-status=\"[[cloudStatus]]\"\n            ></cloud-remote-pref>\n\n            <cloud-alexa-pref\n              hass=\"[[hass]]\"\n              cloud-status=\"[[cloudStatus]]\"\n            ></cloud-alexa-pref>\n\n            <cloud-google-pref\n              hass=\"[[hass]]\"\n              cloud-status=\"[[cloudStatus]]\"\n            ></cloud-google-pref>\n\n            <cloud-webhooks\n              hass=\"[[hass]]\"\n              cloud-status=\"[[cloudStatus]]\"\n            ></cloud-webhooks>\n          </ha-config-section>\n        </div>\n      </hass-subpage>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      isWide: Boolean,\n      cloudStatus: Object,\n      _subscription: {\n        type: Object,\n        value: null,\n      },\n    };\n  }\n\n  ready() {\n    super.ready();\n    this._fetchSubscriptionInfo();\n  }\n\n  _computeRemoteConnected(connected) {\n    return connected\n      ? this.hass.localize(\"ui.panel.config.cloud.account.connected\")\n      : this.hass.localize(\"ui.panel.config.cloud.account.not_connected\");\n  }\n\n  async _fetchSubscriptionInfo() {\n    this._subscription = await fetchCloudSubscriptionInfo(this.hass);\n    if (\n      this._subscription.provider &&\n      this.cloudStatus &&\n      this.cloudStatus.cloud !== \"connected\"\n    ) {\n      this.fire(\"ha-refresh-cloud-status\");\n    }\n  }\n\n  handleLogout() {\n    this.hass\n      .callApi(\"post\", \"cloud/logout\")\n      .then(() => this.fire(\"ha-refresh-cloud-status\"));\n  }\n\n  _formatSubscription(subInfo) {\n    if (subInfo === null) {\n      return this.hass.localize(\n        \"ui.panel.config.cloud.account.fetching_subscription\"\n      );\n    }\n\n    let description = subInfo.human_description;\n\n    if (subInfo.plan_renewal_date) {\n      description = description.replace(\n        \"{periodEnd}\",\n        formatDateTime(\n          new Date(subInfo.plan_renewal_date * 1000),\n          this.hass.language\n        )\n      );\n    }\n\n    return description;\n  }\n}\n\ncustomElements.define(\"cloud-account\", CloudAccount);\n","import \"@material/mwc-button\";\nimport \"@polymer/paper-icon-button/paper-icon-button\";\nimport \"@polymer/paper-input/paper-input\";\nimport \"@polymer/paper-item/paper-item-body\";\nimport \"@polymer/paper-item/paper-item\";\nimport \"@polymer/paper-ripple/paper-ripple\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport \"../../../../components/ha-card\";\nimport \"../../../../components/buttons/ha-progress-button\";\nimport \"../../../../layouts/hass-subpage\";\nimport \"../../../../resources/ha-style\";\n\nimport \"../../ha-config-section\";\nimport { EventsMixin } from \"../../../../mixins/events-mixin\";\nimport NavigateMixin from \"../../../../mixins/navigate-mixin\";\nimport \"../../../../components/ha-icon-next\";\nimport LocalizeMixin from \"../../../../mixins/localize-mixin\";\n/*\n * @appliesMixin NavigateMixin\n * @appliesMixin EventsMixin\n * @appliesMixin LocalizeMixin\n */\nclass CloudLogin extends LocalizeMixin(\n  NavigateMixin(EventsMixin(PolymerElement))\n) {\n  static get template() {\n    return html`\n      <style include=\"iron-flex ha-style\">\n        .content {\n          padding-bottom: 24px;\n          direction: ltr;\n        }\n        [slot=\"introduction\"] {\n          margin: -1em 0;\n        }\n        [slot=\"introduction\"] a {\n          color: var(--primary-color);\n        }\n        paper-item {\n          cursor: pointer;\n        }\n        ha-card {\n          overflow: hidden;\n        }\n        ha-card .card-header {\n          margin-bottom: -8px;\n        }\n        h1 {\n          @apply --paper-font-headline;\n          margin: 0;\n        }\n        .error {\n          color: var(--google-red-500);\n        }\n        .card-actions {\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n        }\n        [hidden] {\n          display: none;\n        }\n        .flash-msg {\n          padding-right: 44px;\n        }\n        .flash-msg paper-icon-button {\n          position: absolute;\n          top: 8px;\n          right: 8px;\n          color: var(--secondary-text-color);\n        }\n      </style>\n      <hass-subpage\n        showBackButton=\"[[!isWide]]\"\n        header=\"[[localize('ui.panel.config.cloud.caption')]]\"\n      >\n        <div class=\"content\">\n          <ha-config-section is-wide=\"[[isWide]]\">\n            <span slot=\"header\"\n              >[[localize('ui.panel.config.cloud.caption')]]</span\n            >\n            <div slot=\"introduction\">\n              <p>\n                [[localize('ui.panel.config.cloud.login.introduction')]]\n              </p>\n              <p>\n                [[localize('ui.panel.config.cloud.login.introduction2')]]\n                <a href=\"https://www.nabucasa.com\" target=\"_blank\"\n                  >Nabu&nbsp;Casa,&nbsp;Inc</a\n                >\n                [[localize('ui.panel.config.cloud.login.introduction2a')]]\n              </p>\n              <p>\n                [[localize('ui.panel.config.cloud.login.introduction3')]]\n              </p>\n              <p>\n                <a href=\"https://www.nabucasa.com\" target=\"_blank\"\n                  >[[localize('ui.panel.config.cloud.login.learn_more_link')]]</a\n                >\n              </p>\n            </div>\n\n            <ha-card hidden$=\"[[!flashMessage]]\">\n              <div class=\"card-content flash-msg\">\n                [[flashMessage]]\n                <paper-icon-button icon=\"hass:close\" on-click=\"_dismissFlash\"\n                  >[[localize('ui.panel.config.cloud.login.dismiss')]]</paper-icon-button\n                >\n                <paper-ripple id=\"flashRipple\" noink=\"\"></paper-ripple>\n              </div>\n            </ha-card>\n\n            <ha-card\n              header=\"[[localize('ui.panel.config.cloud.login.sign_in')]]\"\n            >\n              <div class=\"card-content\">\n                <div class=\"error\" hidden$=\"[[!_error]]\">[[_error]]</div>\n                <paper-input\n                  label=\"[[localize('ui.panel.config.cloud.login.email')]]\"\n                  id=\"email\"\n                  type=\"email\"\n                  value=\"{{email}}\"\n                  on-keydown=\"_keyDown\"\n                  error-message=\"[[localize('ui.panel.config.cloud.login.email_error_msg')]]\"\n                ></paper-input>\n                <paper-input\n                  id=\"password\"\n                  label=\"[[localize('ui.panel.config.cloud.login.password')]]\"\n                  value=\"{{_password}}\"\n                  type=\"password\"\n                  on-keydown=\"_keyDown\"\n                  error-message=\"[[localize('ui.panel.config.cloud.login.password_error_msg')]]\"\n                ></paper-input>\n              </div>\n              <div class=\"card-actions\">\n                <ha-progress-button\n                  on-click=\"_handleLogin\"\n                  progress=\"[[_requestInProgress]]\"\n                  >[[localize('ui.panel.config.cloud.login.sign_in')]]</ha-progress-button\n                >\n                <button\n                  class=\"link\"\n                  hidden=\"[[_requestInProgress]]\"\n                  on-click=\"_handleForgotPassword\"\n                >\n                  [[localize('ui.panel.config.cloud.login.forgot_password')]]\n                </button>\n              </div>\n            </ha-card>\n\n            <ha-card>\n              <paper-item on-click=\"_handleRegister\">\n                <paper-item-body two-line=\"\">\n                  [[localize('ui.panel.config.cloud.login.start_trial')]]\n                  <div secondary=\"\">\n                    [[localize('ui.panel.config.cloud.login.trial_info')]]\n                  </div>\n                </paper-item-body>\n                <ha-icon-next></ha-icon-next>\n              </paper-item>\n            </ha-card>\n          </ha-config-section>\n        </div>\n      </hass-subpage>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      isWide: Boolean,\n      email: {\n        type: String,\n        notify: true,\n      },\n      _password: {\n        type: String,\n        value: \"\",\n      },\n      _requestInProgress: {\n        type: Boolean,\n        value: false,\n      },\n      flashMessage: {\n        type: String,\n        notify: true,\n      },\n      _error: String,\n    };\n  }\n\n  static get observers() {\n    return [\"_inputChanged(email, _password)\"];\n  }\n\n  connectedCallback() {\n    super.connectedCallback();\n    if (this.flashMessage) {\n      // Wait for DOM to be drawn\n      requestAnimationFrame(() =>\n        requestAnimationFrame(() => this.$.flashRipple.simulatedRipple())\n      );\n    }\n  }\n\n  _inputChanged() {\n    this.$.email.invalid = false;\n    this.$.password.invalid = false;\n    this._error = false;\n  }\n\n  _keyDown(ev) {\n    // validate on enter\n    if (ev.keyCode === 13) {\n      this._handleLogin();\n      ev.preventDefault();\n    }\n  }\n\n  _handleLogin() {\n    let invalid = false;\n\n    if (!this.email || !this.email.includes(\"@\")) {\n      this.$.email.invalid = true;\n      this.$.email.focus();\n      invalid = true;\n    }\n\n    if (this._password.length < 8) {\n      this.$.password.invalid = true;\n\n      if (!invalid) {\n        invalid = true;\n        this.$.password.focus();\n      }\n    }\n\n    if (invalid) return;\n\n    this._requestInProgress = true;\n\n    this.hass\n      .callApi(\"post\", \"cloud/login\", {\n        email: this.email,\n        password: this._password,\n      })\n      .then(\n        () => {\n          this.fire(\"ha-refresh-cloud-status\");\n          this.setProperties({\n            email: \"\",\n            _password: \"\",\n          });\n        },\n        (err) => {\n          // Do this before setProperties because changing it clears errors.\n          this._password = \"\";\n\n          const errCode = err && err.body && err.body.code;\n          if (errCode === \"PasswordChangeRequired\") {\n            alert(\n              \"[[localize('ui.panel.config.cloud.login.alert_password_change_required')]]\"\n            );\n            this.navigate(\"/config/cloud/forgot-password\");\n            return;\n          }\n\n          const props = {\n            _requestInProgress: false,\n            _error:\n              err && err.body && err.body.message\n                ? err.body.message\n                : \"Unknown error\",\n          };\n\n          if (errCode === \"UserNotConfirmed\") {\n            props._error =\n              \"[[localize('ui.panel.config.cloud.login.alert_email_confirm_necessary')]]\";\n          }\n\n          this.setProperties(props);\n          this.$.email.focus();\n        }\n      );\n  }\n\n  _handleRegister() {\n    this.flashMessage = \"\";\n    this.navigate(\"/config/cloud/register\");\n  }\n\n  _handleForgotPassword() {\n    this.flashMessage = \"\";\n    this.navigate(\"/config/cloud/forgot-password\");\n  }\n\n  _dismissFlash() {\n    // give some time to let the ripple finish.\n    setTimeout(() => {\n      this.flashMessage = \"\";\n    }, 200);\n  }\n}\n\ncustomElements.define(\"cloud-login\", CloudLogin);\n","import \"./account/cloud-account\";\nimport \"./login/cloud-login\";\nimport {\n  HassRouterPage,\n  RouterOptions,\n} from \"../../../layouts/hass-router-page\";\nimport { property, customElement } from \"lit-element\";\nimport { HomeAssistant, Route } from \"../../../types\";\nimport { navigate } from \"../../../common/navigate\";\nimport { CloudStatus } from \"../../../data/cloud\";\nimport { PolymerChangedEvent } from \"../../../polymer-types\";\nimport { PolymerElement } from \"@polymer/polymer\";\n\nconst LOGGED_IN_URLS = [\"account\", \"google-assistant\", \"alexa\"];\nconst NOT_LOGGED_IN_URLS = [\"login\", \"register\", \"forgot-password\"];\n\n@customElement(\"ha-config-cloud\")\nclass HaConfigCloud extends HassRouterPage {\n  @property() public hass!: HomeAssistant;\n  @property() public isWide!: boolean;\n  @property() public narrow!: boolean;\n  @property() public route!: Route;\n  @property() public cloudStatus!: CloudStatus;\n\n  protected routerOptions: RouterOptions = {\n    defaultPage: \"login\",\n    showLoading: true,\n    initialLoad: () => this._cloudStatusLoaded,\n    // Guard the different pages based on if we're logged in.\n    beforeRender: (page: string) => {\n      if (this.cloudStatus.logged_in) {\n        if (!LOGGED_IN_URLS.includes(page)) {\n          return \"account\";\n        }\n      } else {\n        if (!NOT_LOGGED_IN_URLS.includes(page)) {\n          return \"login\";\n        }\n      }\n      return undefined;\n    },\n    routes: {\n      login: {\n        tag: \"cloud-login\",\n      },\n      register: {\n        tag: \"cloud-register\",\n        load: () =>\n          import(\n            /* webpackChunkName: \"cloud-register\" */ \"./register/cloud-register\"\n          ),\n      },\n      \"forgot-password\": {\n        tag: \"cloud-forgot-password\",\n        load: () =>\n          import(\n            /* webpackChunkName: \"cloud-forgot-password\" */ \"./forgot-password/cloud-forgot-password\"\n          ),\n      },\n      account: {\n        tag: \"cloud-account\",\n      },\n      \"google-assistant\": {\n        tag: \"cloud-google-assistant\",\n        load: () =>\n          import(\n            /* webpackChunkName: \"cloud-google-assistant\" */ \"./google-assistant/cloud-google-assistant\"\n          ),\n      },\n      alexa: {\n        tag: \"cloud-alexa\",\n        load: () =>\n          import(/* webpackChunkName: \"cloud-alexa\" */ \"./alexa/cloud-alexa\"),\n      },\n    },\n  };\n\n  @property() private _flashMessage = \"\";\n  @property() private _loginEmail = \"\";\n  private _resolveCloudStatusLoaded!: () => void;\n  private _cloudStatusLoaded = new Promise((resolve) => {\n    this._resolveCloudStatusLoaded = resolve;\n  });\n\n  protected firstUpdated(changedProps) {\n    super.firstUpdated(changedProps);\n    this.addEventListener(\"cloud-done\", (ev) => {\n      this._flashMessage = (ev as any).detail.flashMessage;\n      navigate(this, \"/config/cloud/login\");\n    });\n  }\n\n  protected updated(changedProps) {\n    super.updated(changedProps);\n\n    if (changedProps.has(\"cloudStatus\")) {\n      const oldStatus = changedProps.get(\"cloudStatus\") as\n        | CloudStatus\n        | undefined;\n      if (oldStatus === undefined) {\n        this._resolveCloudStatusLoaded();\n      } else if (oldStatus.logged_in !== this.cloudStatus.logged_in) {\n        navigate(this, this.route.prefix, true);\n      }\n    }\n  }\n\n  protected createElement(tag: string) {\n    const el = super.createElement(tag);\n    el.addEventListener(\"email-changed\", (ev) => {\n      this._loginEmail = (ev as PolymerChangedEvent<string>).detail.value;\n    });\n    el.addEventListener(\"flash-message-changed\", (ev) => {\n      this._flashMessage = (ev as PolymerChangedEvent<string>).detail.value;\n    });\n    return el;\n  }\n\n  protected updatePageEl(el) {\n    // We are not going to update if the current page if we are not logged in\n    // and the current page requires being logged in. Happens when we log out.\n    if (\n      this.cloudStatus &&\n      !this.cloudStatus.logged_in &&\n      LOGGED_IN_URLS.includes(this._currentPage)\n    ) {\n      return;\n    }\n\n    if (\"setProperties\" in el) {\n      // As long as we have Polymer pages\n      (el as PolymerElement).setProperties({\n        hass: this.hass,\n        email: this._loginEmail,\n        isWide: this.isWide,\n        cloudStatus: this.cloudStatus,\n        flashMessage: this._flashMessage,\n      });\n    } else {\n      el.hass = this.hass;\n      el.email = this._loginEmail;\n      el.isWide = this.isWide;\n      el.narrow = this.narrow;\n      el.cloudStatus = this.cloudStatus;\n      el.flashMessage = this._flashMessage;\n    }\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-config-cloud\": HaConfigCloud;\n  }\n}\n"],"sourceRoot":""}