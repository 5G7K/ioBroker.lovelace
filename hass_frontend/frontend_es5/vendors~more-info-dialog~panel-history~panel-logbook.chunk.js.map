{"version":3,"sources":["webpack:///./node_modules/@polymer/paper-spinner/paper-spinner.js","webpack:///./node_modules/@vaadin/vaadin-button/src/vaadin-button.js","webpack:///./node_modules/@vaadin/vaadin-button/theme/lumo/vaadin-button-styles.js","webpack:///./node_modules/@vaadin/vaadin-button/theme/lumo/vaadin-button.js","webpack:///./node_modules/@vaadin/vaadin-control-state-mixin/vaadin-control-state-mixin.js","webpack:///./node_modules/@vaadin/vaadin-date-picker/src/vaadin-date-picker-helper.js","webpack:///./node_modules/@vaadin/vaadin-date-picker/src/vaadin-date-picker-mixin.js","webpack:///./node_modules/@vaadin/vaadin-date-picker/src/vaadin-date-picker-overlay-content.js","webpack:///./node_modules/@vaadin/vaadin-date-picker/src/vaadin-date-picker-overlay.js","webpack:///./node_modules/@vaadin/vaadin-date-picker/src/vaadin-date-picker-styles.js","webpack:///./node_modules/@vaadin/vaadin-date-picker/src/vaadin-date-picker.js","webpack:///./node_modules/@vaadin/vaadin-date-picker/src/vaadin-infinite-scroller.js","webpack:///./node_modules/@vaadin/vaadin-date-picker/src/vaadin-month-calendar.js","webpack:///./node_modules/@vaadin/vaadin-date-picker/theme/lumo/vaadin-date-picker-overlay-content-styles.js","webpack:///./node_modules/@vaadin/vaadin-date-picker/theme/lumo/vaadin-date-picker-overlay-styles.js","webpack:///./node_modules/@vaadin/vaadin-date-picker/theme/lumo/vaadin-date-picker-styles.js","webpack:///./node_modules/@vaadin/vaadin-date-picker/theme/lumo/vaadin-date-picker.js","webpack:///./node_modules/@vaadin/vaadin-date-picker/theme/lumo/vaadin-month-calendar-styles.js","webpack:///./node_modules/@vaadin/vaadin-date-picker/vaadin-date-picker.js","webpack:///./node_modules/@vaadin/vaadin-development-mode-detector/vaadin-development-mode-detector.js","webpack:///./node_modules/@vaadin/vaadin-element-mixin/vaadin-element-mixin.js","webpack:///./node_modules/@vaadin/vaadin-lumo-styles/mixins/field-button.js","webpack:///./node_modules/@vaadin/vaadin-lumo-styles/mixins/required-field.js","webpack:///./node_modules/@vaadin/vaadin-text-field/src/vaadin-text-field-mixin.js","webpack:///./node_modules/@vaadin/vaadin-text-field/src/vaadin-text-field.js","webpack:///./node_modules/@vaadin/vaadin-text-field/theme/lumo/vaadin-text-field-styles.js","webpack:///./node_modules/@vaadin/vaadin-text-field/theme/lumo/vaadin-text-field.js","webpack:///./node_modules/@vaadin/vaadin-usage-statistics/vaadin-usage-statistics.js"],"names":["template","html","setAttribute","Polymer","_template","is","behaviors","PaperSpinnerBehavior","ButtonElement","$","button","_addActiveListeners","hasAttribute","removeAttribute","addListener","disabled","addEventListener","e","indexOf","keyCode","ElementMixin","ControlStateMixin","ThemableMixin","GestureEventListeners","PolymerElement","customElements","define","$_documentContainer","document","head","appendChild","content","TabIndexMixin","superClass","properties","tabindex","type","Number","value","reflectToAttribute","observer","window","ShadyDOM","composedPath","_focus","focusElement","_setFocused","ensureEventComposed","composed","target","dispatchEvent","CustomEvent","bubbles","cancelable","shadowRoot","defaultPrevented","shiftKey","_isShiftTabbing","HTMLElement","prototype","focus","apply","setTimeout","firefox","navigator","userAgent","match","parseFloat","parentNode","nextSibling","fakeTarget","createElement","style","position","opacity","tabIndex","insertBefore","removeChild","autofocus","focused","requestAnimationFrame","_boundKeydownListener","_bodyKeydownListener","bind","_boundKeyupListener","_bodyKeyupListener","body","removeEventListener","_tabPressed","blur","_previousTabIndex","undefined","setProperties","console","warn","localName","Boolean","DatePickerHelper","date","dayOfWeek","getDay","nearestThursdayDiff","nearestThursday","Date","getTime","firstOfJanuary","setFullYear","getFullYear","timeDiff","daysSinceFirstOfJanuary","Math","round","floor","date1","date2","getMonth","getDate","min","max","dates","filter","reduce","closestDate","candidate","candidateDiff","abs","closestDateDiff","day","month","year","DatePickerMixin","subclass","_boundOnScroll","_onScroll","_boundFocus","_boundUpdateAlignmentAndPosition","_updateAlignmentAndPosition","open","_preventDefault","_onKeydown","_onUserInput","_noInput","overlay","_overlayInitialized","opened","detail","_overlayContent","_close","_focusAndSelect","_onVaadinOverlayClose","readonly","stopPropagation","close","str","parts","exec","parseInt","setMonth","setDate","fullscreen","ios","i18n","_inputElement","parseDate","pad","num","fmt","substr","length","yearSign","yearFmt","yearAbs","join","_initOverlay","selectedDate","formatDate","__userInputOccurred","__dispatchChange","inputValue","_extractDateParts","_formatISO","validate","_focusedDate","_inputValue","focusedDate","_ignoreFocusedDateChange","theme","overlayInitialized","property","oldValue","_parseDate","_dateEquals","_handleDateChange","_fullscreen","inputRect","getBoundingClientRect","bottomAlign","top","innerHeight","rightAlign","left","clientWidth","innerWidth","viewportWidth","documentElement","removeProperty","right","viewportHeight","clientHeight","bottom","getComputedStyle","getPropertyValue","_repositionYearScroller","_openedWithFocusRing","parsedInitialPosition","initialPosition","_selectedDate","_dateAllowed","_minDate","_maxDate","_getClosestDate","scrollToDate","_webkitOverflowScroll","_touchPrevented","_preventWebkitOverflowScrollingTouch","parentElement","_focusOverlayOnOpen","updateStyles","_ignoreAnnounce","element","result","webkitOverflowScrolling","oldInlineValue","push","forEach","prevented","dateObject","parsedDate","_isValidDate","_nativeInput","selectionStart","selectionEnd","invalid","checkValidity","inputValid","minMaxValid","inputValidity","contains","_setSelectionRange","a","b","setSelectionRange","preventDefault","keys","i","k","IronA11yKeysBehavior","keyboardEventMatchesKeys","d","isNaN","allowedKeys","_eventKey","focusCancel","revealDate","_userInputValueChanged","announceFocusedDate","_input","inputElement","unwrap","querySelector","String","notify","required","name","label","showWeekNumbers","_fullscreenMediaQuery","Array","Object","monthNames","weekdays","weekdaysShort","firstDayOfWeek","week","calendar","clear","today","cancel","yearStr","replace","y","text","split","formatTitle","monthName","fullYear","computed","_ios","mixinBehaviors","IronResizableBehavior","DatePickerOverlayContentElement","_stopPropagation","_onOverlayFocus","_onOverlayBlur","_closeYearScroller","_toggleAnimateClass","setTouchAction","scrollers","IronA11yAnnouncer","requestAvailability","_currentlyFocusedDate","announce","concat","_getISOWeekNumber","cancelButton","animate","_scrollToPosition","_differenceInMonths","_originDate","yearsFromNow","diff","scrolledAboveViewport","monthScroller","visibleItems","itemHeight","scrolledBelowViewport","_focused","_visibleMonthIndex","yearScroller","_doIgnoreTaps","_repositionMonthScroller","_notTapping","_ignoreTaps","_debouncer","Debouncer","debounce","timeOut","after","_scrollToCurrentMonth","scrollDelta","yearDelta","targetPosition","_targetPosition","easingFunction","t","c","duration","start","smoothScroll","timestamp","currentTime","currentPos","oldPosition","range","dx","ddy","ddx","_yearScrollerWidth","newTranslateX","_translateX","_limit","_desktopMode","state","_handleTrack","_openYearScroller","enable","classList","add","remove","_isYearScrollerVisible","x","transform","index","months","_dateAfterXMonths","overlayContent","getRootNode","host","isToday","todayButton","isCancel","isScroller","eventKey","isFullscreen","isShift","_moveFocusByDays","_onTodayTap","_moveFocusInsideMonth","_moveFocusByMonths","_cancel","dateToFocus","_focusedMonthDate","_focusDate","minDate","maxDate","days","_focusClosestDate","targetMonth","todayMidnight","ThemePropertyMixin","DatePickerOverlayElement","DisableUpgradeMixin","OverlayElement","innerHTML","DatePickerElement","afterNextRender","sourceEvent","prevent","_clear","input","toString","errorMessage","placeholder","_userInputValue","InfiniteScrollerElement","_buffers","slice","call","root","querySelectorAll","fullHeight","height","_initialScroll","tpl","_TemplateClass","templatize","forwardHostProp","prop","buffer","children","insertionPoint","_itemWrapper","instance","isFirefox","toLowerCase","scroller","active","_initialized","_createPool","_initDone","_ensureStampedInstance","translateY","_reset","up","_bufferHeight","updated","reverse","_scrollDisabled","scrollTop","_initialIndex","bufferOffset","offsetTop","upperThresholdReached","lowerThresholdReached","_translateBuffer","_updateClones","_preventScrollEvent","_mayHaveMomentum","_debouncerScrollFinish","scrollerRect","_isVisible","_debouncerUpdateClones","container","itemWrapper","contentId","_contentIndex","slotName","flush","bufferSize","_finishInit","firstElementChild","tmpInstance","set","viewPortOnly","_firstIndex","bufferIndex","firstIndex","rect","_itemHeightVal","ShadyCSS","nativeCss","getComputedStyleValue","tmpStyleProp","setProperty","itemHeightPx","MonthCalendarElement","firstDate","lastDate","delta","weekDayNames","weekDayNamesShort","_applyFirstDayOfWeek","map","weekDay","weekDayShort","_dateAdd","startMonth","acc","_getWeekNumber","arr","ignoreTaps","ariaLabel","_getDate","_isToday","_days","DEV_MODE_CODE_REGEXP","isMinified","test","uncommentAndRun","isDevelopmentMode","isForcedDevelopmentMode","isLocalhost","isFlowProductionMode","localStorage","getItem","location","hostname","Vaadin","Flow","clients","productionModeApps","key","client","productionMode","callback","args","Function","log","runIfDevelopmentMode","developmentMode","registrations","developmentModeCallback","usageStatistics","statsJob","doctype","idlePeriod","enqueueDebouncer","HOST_PROPS","accessible","PROP_TYPE","DEFAULT","ACCESSIBLE","TextFieldMixin","__preventInput","stopImmediatePropagation","preventInvalidInput","_inputDebouncer","__fromClearButton","__userInput","clearButtonVisible","hasValue","clearButton","_valueClearing","changeEvent","newVal","oldVal","slotted","_slottedTagName","_slottedInput","_validateSlottedValue","_addInputListeners","_addIEListeners","_removeInputListeners","_removeIEListeners","_propagateHostAttributes","attr","attributesValues","attributeNames","_setOrToggleAttribute","node","pattern","maxlength","minlength","_boundOnInput","_boundOnChange","_boundOnBlur","_boundOnFocus","_onInput","_onChange","_onBlur","_onFocus","defaultInput","_onSlotChange","_onClearButtonClick","_onKeyDown","uniqueId","_uniqueId","_errorId","constructor","_labelId","autoselect","select","inputEvent","Event","_shouldPreventInput","_createPropertyObserver","errorId","labelId","isSafari","WEBKIT_PROPERTY","el","autocomplete","autocorrect","autocapitalize","TextFieldElement","list","title","maybeGatherAndSendStats"],"mappings":"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","file":"vendors~more-info-dialog~panel-history~panel-logbook.chunk.js","sourcesContent":["/**\n@license\nCopyright (c) 2015 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at\nhttp://polymer.github.io/LICENSE.txt The complete set of authors may be found at\nhttp://polymer.github.io/AUTHORS.txt The complete set of contributors may be\nfound at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as\npart of the polymer project is also subject to an additional IP rights grant\nfound at http://polymer.github.io/PATENTS.txt\n*/\nimport '@polymer/polymer/polymer-legacy.js';\nimport '@polymer/paper-styles/color.js';\nimport './paper-spinner-styles.js';\n\nimport {Polymer} from '@polymer/polymer/lib/legacy/polymer-fn.js';\nimport {html} from '@polymer/polymer/lib/utils/html-tag.js';\n\nimport {PaperSpinnerBehavior} from './paper-spinner-behavior.js';\n\nconst template = html`\n  <style include=\"paper-spinner-styles\"></style>\n\n  <div id=\"spinnerContainer\" class-name=\"[[__computeContainerClasses(active, __coolingDown)]]\" on-animationend=\"__reset\" on-webkit-animation-end=\"__reset\">\n    <div class=\"spinner-layer layer-1\">\n      <div class=\"circle-clipper left\">\n        <div class=\"circle\"></div>\n      </div>\n      <div class=\"circle-clipper right\">\n        <div class=\"circle\"></div>\n      </div>\n    </div>\n\n    <div class=\"spinner-layer layer-2\">\n      <div class=\"circle-clipper left\">\n        <div class=\"circle\"></div>\n      </div>\n      <div class=\"circle-clipper right\">\n        <div class=\"circle\"></div>\n      </div>\n    </div>\n\n    <div class=\"spinner-layer layer-3\">\n      <div class=\"circle-clipper left\">\n        <div class=\"circle\"></div>\n      </div>\n      <div class=\"circle-clipper right\">\n        <div class=\"circle\"></div>\n      </div>\n    </div>\n\n    <div class=\"spinner-layer layer-4\">\n      <div class=\"circle-clipper left\">\n        <div class=\"circle\"></div>\n      </div>\n      <div class=\"circle-clipper right\">\n        <div class=\"circle\"></div>\n      </div>\n    </div>\n  </div>\n`;\ntemplate.setAttribute('strip-whitespace', '');\n\n/**\nMaterial design: [Progress &\nactivity](https://www.google.com/design/spec/components/progress-activity.html)\n\nElement providing a multiple color material design circular spinner.\n\n    <paper-spinner active></paper-spinner>\n\nThe default spinner cycles between four layers of colors; by default they are\nblue, red, yellow and green. It can be customized to cycle between four\ndifferent colors. Use <paper-spinner-lite> for single color spinners.\n\n### Accessibility\n\nAlt attribute should be set to provide adequate context for accessibility. If\nnot provided, it defaults to 'loading'. Empty alt can be provided to mark the\nelement as decorative if alternative content is provided in another form (e.g. a\ntext block following the spinner).\n\n    <paper-spinner alt=\"Loading contacts list\" active></paper-spinner>\n\n### Styling\n\nThe following custom properties and mixins are available for styling:\n\nCustom property | Description | Default\n----------------|-------------|----------\n`--paper-spinner-layer-1-color` | Color of the first spinner rotation | `--google-blue-500`\n`--paper-spinner-layer-2-color` | Color of the second spinner rotation | `--google-red-500`\n`--paper-spinner-layer-3-color` | Color of the third spinner rotation | `--google-yellow-500`\n`--paper-spinner-layer-4-color` | Color of the fourth spinner rotation | `--google-green-500`\n`--paper-spinner-stroke-width` | The width of the spinner stroke | 3px\n\n@group Paper Elements\n@element paper-spinner\n@hero hero.svg\n@demo demo/index.html\n*/\nPolymer({\n  _template: template,\n\n  is: 'paper-spinner',\n\n  behaviors: [PaperSpinnerBehavior]\n});\n","/**\n@license\nCopyright (c) 2017 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport { GestureEventListeners } from '@polymer/polymer/lib/mixins/gesture-event-listeners.js';\nimport { ThemableMixin } from '@vaadin/vaadin-themable-mixin/vaadin-themable-mixin.js';\nimport { ControlStateMixin } from '@vaadin/vaadin-control-state-mixin/vaadin-control-state-mixin.js';\nimport { ElementMixin } from '@vaadin/vaadin-element-mixin/vaadin-element-mixin.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { addListener } from '@polymer/polymer/lib/utils/gestures.js';\n/**\n * `<vaadin-button>` is a Web Component providing an accessible and customizable button.\n *\n * ```html\n * <vaadin-button>\n * </vaadin-button>\n * ```\n *\n * ```js\n * document.querySelector('vaadin-button').addEventListener('click', () => alert('Hello World!'));\n * ```\n *\n * ### Styling\n *\n * The following shadow DOM parts are exposed for styling:\n *\n * Part name | Description\n * ----------------|----------------\n * `label` | The label (text) inside the button\n * `prefix` | A slot for e.g. an icon before the label\n * `suffix` | A slot for e.g. an icon after the label\n *\n *\n * The following attributes are exposed for styling:\n *\n * Attribute | Description\n * --------- | -----------\n * `active` | Set when the button is pressed down, either with mouse, touch or the keyboard.\n * `disabled` | Set when the button is disabled.\n * `focus-ring` | Set when the button is focused using the keyboard.\n * `focused` | Set when the button is focused.\n *\n * See [ThemableMixin – how to apply styles for shadow parts](https://github.com/vaadin/vaadin-themable-mixin/wiki)\n *\n * @memberof Vaadin\n * @mixes Vaadin.ElementMixin\n * @mixes Vaadin.ControlStateMixin\n * @mixes Vaadin.ThemableMixin\n * @mixes Polymer.GestureEventListeners\n * @demo demo/index.html\n */\nclass ButtonElement extends\n  ElementMixin(\n    ControlStateMixin(\n      ThemableMixin(\n        GestureEventListeners(PolymerElement)))) {\n  static get template() {\n    return html`\n    <style>\n      :host {\n        display: inline-block;\n        position: relative;\n        outline: none;\n        white-space: nowrap;\n      }\n\n      :host([hidden]) {\n        display: none !important;\n      }\n\n      /* Ensure the button is always aligned on the baseline */\n      .vaadin-button-container::before {\n        content: \"\\\\2003\";\n        display: inline-block;\n        width: 0;\n      }\n\n      .vaadin-button-container {\n        display: inline-flex;\n        align-items: center;\n        justify-content: center;\n        text-align: center;\n        width: 100%;\n        height: 100%;\n        min-height: inherit;\n        text-shadow: inherit;\n        -webkit-user-select: none;\n        -moz-user-select: none;\n        user-select: none;\n      }\n\n      [part=\"prefix\"],\n      [part=\"suffix\"] {\n        flex: none;\n      }\n\n      [part=\"label\"] {\n        white-space: nowrap;\n        overflow: hidden;\n        text-overflow: ellipsis;\n      }\n\n      #button {\n        position: absolute;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        opacity: 0;\n        cursor: inherit;\n      }\n    </style>\n    <div class=\"vaadin-button-container\">\n      <div part=\"prefix\">\n        <slot name=\"prefix\"></slot>\n      </div>\n      <div part=\"label\">\n        <slot></slot>\n      </div>\n      <div part=\"suffix\">\n        <slot name=\"suffix\"></slot>\n      </div>\n    </div>\n    <button id=\"button\" type=\"button\"></button>\n`;\n  }\n\n  static get is() {\n    return 'vaadin-button';\n  }\n\n  static get version() {\n    return '2.2.0';\n  }\n\n  ready() {\n    super.ready();\n\n    // Leaving default role in the native button, makes navigation announcement\n    // being different when using focus navigation (tab) versus using normal\n    // navigation (arrows). The first way announces the label on a button\n    // since the focus is moved programmatically, and the second on a group.\n    this.setAttribute('role', 'button');\n    this.$.button.setAttribute('role', 'presentation');\n\n    this._addActiveListeners();\n  }\n\n  /**\n   * @protected\n   */\n  disconnectedCallback() {\n    super.disconnectedCallback();\n\n    // `active` state is preserved when the element is disconnected between keydown and keyup events.\n    // reproducible in `<vaadin-date-picker>` when closing on `Cancel` or `Today` click.\n    if (this.hasAttribute('active')) {\n      this.removeAttribute('active');\n    }\n  }\n\n  _addActiveListeners() {\n    addListener(this, 'down', () => !this.disabled && this.setAttribute('active', ''));\n    addListener(this, 'up', () => this.removeAttribute('active'));\n    this.addEventListener('keydown', e => !this.disabled && [13, 32].indexOf(e.keyCode) >= 0 && this.setAttribute('active', ''));\n    this.addEventListener('keyup', () => this.removeAttribute('active'));\n    this.addEventListener('blur', () => this.removeAttribute('active'));\n  }\n\n  /**\n   * @protected\n   */\n  get focusElement() {\n    return this.$.button;\n  }\n}\n\ncustomElements.define(ButtonElement.is, ButtonElement);\n\nexport { ButtonElement };\n","import '@vaadin/vaadin-lumo-styles/color.js';\nimport '@vaadin/vaadin-lumo-styles/sizing.js';\nimport '@vaadin/vaadin-lumo-styles/spacing.js';\nimport '@vaadin/vaadin-lumo-styles/style.js';\nimport '@vaadin/vaadin-lumo-styles/typography.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\n\nconst $_documentContainer = html`<dom-module id=\"lumo-button\" theme-for=\"vaadin-button\">\n  <template>\n    <style>\n      :host {\n        /* Sizing */\n        --lumo-button-size: var(--lumo-size-m);\n        min-width: calc(var(--lumo-button-size) * 2);\n        height: var(--lumo-button-size);\n        padding: 0 calc(var(--lumo-button-size) / 3 + var(--lumo-border-radius) / 2);\n        margin: var(--lumo-space-xs) 0;\n        box-sizing: border-box;\n        /* Style */\n        font-family: var(--lumo-font-family);\n        font-size: var(--lumo-font-size-m);\n        font-weight: 500;\n        color: var(--_lumo-button-color, var(--lumo-primary-text-color));\n        background-color: var(--_lumo-button-background-color, var(--lumo-contrast-5pct));\n        border-radius: var(--lumo-border-radius);\n        cursor: default;\n        -webkit-tap-highlight-color: transparent;\n        -webkit-font-smoothing: antialiased;\n        -moz-osx-font-smoothing: grayscale;\n      }\n\n      /* Set only for the internal parts so we don’t affect the host vertical alignment */\n      [part=\"label\"],\n      [part=\"prefix\"],\n      [part=\"suffix\"] {\n        line-height: var(--lumo-line-height-xs);\n      }\n\n      [part=\"label\"] {\n        padding: calc(var(--lumo-button-size) / 6) 0;\n      }\n\n      :host([theme~=\"small\"]) {\n        font-size: var(--lumo-font-size-s);\n        --lumo-button-size: var(--lumo-size-s);\n      }\n\n      :host([theme~=\"large\"]) {\n        font-size: var(--lumo-font-size-l);\n        --lumo-button-size: var(--lumo-size-l);\n      }\n\n      /* This needs to be the last selector for it to take priority */\n      :host([disabled][disabled]) {\n        pointer-events: none;\n        color: var(--lumo-disabled-text-color);\n        background-color: var(--lumo-contrast-5pct);\n      }\n\n      /* For interaction states */\n      :host::before,\n      :host::after {\n        content: \"\";\n        /* We rely on the host always being relative */\n        position: absolute;\n        z-index: 1;\n        top: 0;\n        right: 0;\n        bottom: 0;\n        left: 0;\n        background-color: currentColor;\n        border-radius: inherit;\n        opacity: 0;\n        transition: opacity 0.2s;\n        pointer-events: none;\n      }\n\n      /* Hover */\n\n      :host(:hover)::before {\n        opacity: 0.05;\n      }\n\n      /* Disable hover for touch devices */\n      @media (pointer: coarse) {\n        :host(:not([active]):hover)::before {\n          opacity: 0;\n        }\n      }\n\n      /* Active */\n\n      :host::after {\n        transition: opacity 1.4s, transform 0.1s;\n        filter: blur(8px);\n      }\n\n      :host([active])::before {\n        opacity: 0.1;\n        transition-duration: 0s;\n      }\n\n      :host([active])::after {\n        opacity: 0.1;\n        transition-duration: 0s, 0s;\n        transform: scale(0);\n      }\n\n      /* Keyboard focus */\n\n      :host([focus-ring]) {\n        box-shadow: 0 0 0 2px var(--lumo-primary-color-50pct);\n      }\n\n      /* Types (primary, tertiary, tertiary-inline */\n\n      :host([theme~=\"tertiary\"]),\n      :host([theme~=\"tertiary-inline\"]) {\n        background-color: transparent !important;\n        transition: opacity 0.2s;\n        min-width: 0;\n      }\n\n      :host([theme~=\"tertiary\"])::before,\n      :host([theme~=\"tertiary-inline\"])::before {\n        display: none;\n      }\n\n      :host([theme~=\"tertiary\"]) {\n        padding: 0 calc(var(--lumo-button-size) / 6);\n      }\n\n      @media (hover: hover) {\n        :host([theme*=\"tertiary\"]:not([active]):hover) {\n          opacity: 0.8;\n        }\n      }\n\n      :host([theme~=\"tertiary\"][active]),\n      :host([theme~=\"tertiary-inline\"][active]) {\n        opacity: 0.5;\n        transition-duration: 0s;\n      }\n\n      :host([theme~=\"tertiary-inline\"]) {\n        margin: 0;\n        height: auto;\n        padding: 0;\n        line-height: inherit;\n        font-size: inherit;\n      }\n\n      :host([theme~=\"tertiary-inline\"]) [part=\"label\"] {\n        padding: 0;\n        overflow: visible;\n        line-height: inherit;\n      }\n\n      :host([theme~=\"primary\"]) {\n        background-color: var(--_lumo-button-primary-background-color, var(--lumo-primary-color));\n        color: var(--_lumo-button-primary-color, var(--lumo-primary-contrast-color));\n        font-weight: 600;\n        min-width: calc(var(--lumo-button-size) * 2.5);\n      }\n\n      :host([theme~=\"primary\"][disabled]) {\n        background-color: var(--lumo-primary-color-50pct);\n        color: var(--lumo-primary-contrast-color);\n      }\n\n      :host([theme~=\"primary\"]:hover)::before {\n        opacity: 0.1;\n      }\n\n      :host([theme~=\"primary\"][active])::before {\n        background-color: var(--lumo-shade-20pct);\n      }\n\n      @media (pointer: coarse) {\n        :host([theme~=\"primary\"][active])::before {\n          background-color: var(--lumo-shade-60pct);\n        }\n\n        :host([theme~=\"primary\"]:not([active]):hover)::before {\n          opacity: 0;\n        }\n      }\n\n      :host([theme~=\"primary\"][active])::after {\n        opacity: 0.2;\n      }\n\n      /* Colors (success, error, contrast) */\n\n      :host([theme~=\"success\"]) {\n        color: var(--lumo-success-text-color);\n      }\n\n      :host([theme~=\"success\"][theme~=\"primary\"]) {\n        background-color: var(--lumo-success-color);\n        color: var(--lumo-success-contrast-color);\n      }\n\n      :host([theme~=\"success\"][theme~=\"primary\"][disabled]) {\n        background-color: var(--lumo-success-color-50pct);\n      }\n\n      :host([theme~=\"error\"]) {\n        color: var(--lumo-error-text-color);\n      }\n\n      :host([theme~=\"error\"][theme~=\"primary\"]) {\n        background-color: var(--lumo-error-color);\n        color: var(--lumo-error-contrast-color);\n      }\n\n      :host([theme~=\"error\"][theme~=\"primary\"][disabled]) {\n        background-color: var(--lumo-error-color-50pct);\n      }\n\n      :host([theme~=\"contrast\"]) {\n        color: var(--lumo-contrast);\n      }\n\n      :host([theme~=\"contrast\"][theme~=\"primary\"]) {\n        background-color: var(--lumo-contrast);\n        color: var(--lumo-base-color);\n      }\n\n      :host([theme~=\"contrast\"][theme~=\"primary\"][disabled]) {\n        background-color: var(--lumo-contrast-50pct);\n      }\n\n      /* Icons */\n\n      [part] ::slotted(iron-icon) {\n        display: inline-block;\n        width: var(--lumo-icon-size-m);\n        height: var(--lumo-icon-size-m);\n      }\n\n      /* Vaadin icons are based on a 16x16 grid (unlike Lumo and Material icons with 24x24), so they look too big by default */\n      [part] ::slotted(iron-icon[icon^=\"vaadin:\"]) {\n        padding: 0.25em;\n        box-sizing: border-box !important;\n      }\n\n      [part=\"prefix\"] {\n        margin-left: -0.25em;\n        margin-right: 0.25em;\n      }\n\n      [part=\"suffix\"] {\n        margin-left: 0.25em;\n        margin-right: -0.25em;\n      }\n\n      /* Icon-only */\n\n      :host([theme~=\"icon\"]) {\n        min-width: var(--lumo-button-size);\n        padding-left: calc(var(--lumo-button-size) / 4);\n        padding-right: calc(var(--lumo-button-size) / 4);\n      }\n\n      :host([theme~=\"icon\"]) [part=\"prefix\"],\n      :host([theme~=\"icon\"]) [part=\"suffix\"] {\n        margin-left: 0;\n        margin-right: 0;\n      }\n    </style>\n  </template>\n</dom-module>`;\n\ndocument.head.appendChild($_documentContainer.content);\n","import './vaadin-button-styles.js';\nimport '../../src/vaadin-button.js';\n","/**\n@license\nCopyright (c) 2017 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\n/**\n * A private mixin to avoid problems with dynamic properties and Polymer Analyzer.\n * No need to expose these properties in the API docs.\n * @polymerMixin\n */\nconst TabIndexMixin = superClass => class VaadinTabIndexMixin extends superClass {\n  static get properties() {\n    var properties = {\n      /**\n       * Internal property needed to listen to `tabindex` attribute changes.\n       *\n       * For changing the tabindex of this component use the native `tabIndex` property.\n       * @private\n       */\n      tabindex: {\n        type: Number,\n        value: 0,\n        reflectToAttribute: true,\n        observer: '_tabindexChanged'\n      }\n    };\n\n    if (window.ShadyDOM) {\n      // ShadyDOM browsers need the `tabIndex` in order to notify when the user changes it programmatically.\n      properties['tabIndex'] = properties.tabindex;\n    }\n\n    return properties;\n  }\n};\n\n/**\n * Polymer.IronControlState is not a proper 2.0 class, also, its tabindex\n * implementation fails in the shadow dom, so we have this for vaadin elements.\n * @polymerMixin\n */\nexport const ControlStateMixin = superClass => class VaadinControlStateMixin extends TabIndexMixin(superClass) {\n  static get properties() {\n    return {\n      /**\n       * Specify that this control should have input focus when the page loads.\n       */\n      autofocus: {\n        type: Boolean\n      },\n\n      /**\n       * Stores the previous value of tabindex attribute of the disabled element\n       */\n      _previousTabIndex: {\n        type: Number\n      },\n\n      /**\n       * If true, the user cannot interact with this element.\n       */\n      disabled: {\n        type: Boolean,\n        observer: '_disabledChanged',\n        reflectToAttribute: true\n      },\n\n      _isShiftTabbing: {\n        type: Boolean\n      }\n    };\n  }\n\n  ready() {\n    this.addEventListener('focusin', e => {\n      if (e.composedPath()[0] === this) {\n        this._focus(e);\n      } else if (e.composedPath().indexOf(this.focusElement) !== -1 && !this.disabled) {\n        this._setFocused(true);\n      }\n    });\n    this.addEventListener('focusout', e => this._setFocused(false));\n\n    // In super.ready() other 'focusin' and 'focusout' listeners might be\n    // added, so we call it after our own ones to ensure they execute first.\n    // Issue to watch out: when incorrect, <vaadin-combo-box> refocuses the\n    // input field on iOS after “Done” is pressed.\n    super.ready();\n\n    // This fixes the bug in Firefox 61 (https://bugzilla.mozilla.org/show_bug.cgi?id=1472887)\n    // where focusout event does not go out of shady DOM because composed property in the event is not true\n    const ensureEventComposed = e => {\n      if (!e.composed) {\n        e.target.dispatchEvent(new CustomEvent(e.type, {\n          bubbles: true,\n          composed: true,\n          cancelable: false\n        }));\n      }\n    };\n    this.shadowRoot.addEventListener('focusin', ensureEventComposed);\n    this.shadowRoot.addEventListener('focusout', ensureEventComposed);\n\n    this.addEventListener('keydown', e => {\n      if (!e.defaultPrevented && e.keyCode === 9) {\n        if (e.shiftKey) {\n          // Flag is checked in _focus event handler.\n          this._isShiftTabbing = true;\n          HTMLElement.prototype.focus.apply(this);\n          this._setFocused(false);\n          // Event handling in IE is asynchronous and the flag is removed asynchronously as well\n          setTimeout(() => this._isShiftTabbing = false, 0);\n        } else {\n          // Workaround for FF63-65 bug that causes the focus to get lost when\n          // blurring a slotted component with focusable shadow root content\n          // https://bugzilla.mozilla.org/show_bug.cgi?id=1528686\n          // TODO: Remove when safe\n          const firefox = window.navigator.userAgent.match(/Firefox\\/(\\d\\d\\.\\d)/);\n          if (firefox\n            && parseFloat(firefox[1]) >= 63\n            && parseFloat(firefox[1]) < 66\n            && this.parentNode\n            && this.nextSibling) {\n            const fakeTarget = document.createElement('input');\n            fakeTarget.style.position = 'absolute';\n            fakeTarget.style.opacity = 0;\n            fakeTarget.tabIndex = this.tabIndex;\n\n            this.parentNode.insertBefore(fakeTarget, this.nextSibling);\n            fakeTarget.focus();\n            fakeTarget.addEventListener('focusout', () => this.parentNode.removeChild(fakeTarget));\n          }\n        }\n\n      }\n    });\n\n    if (this.autofocus && !this.focused && !this.disabled) {\n      window.requestAnimationFrame(() => {\n        this._focus();\n        this._setFocused(true);\n        this.setAttribute('focus-ring', '');\n      });\n    }\n\n    this._boundKeydownListener = this._bodyKeydownListener.bind(this);\n    this._boundKeyupListener = this._bodyKeyupListener.bind(this);\n  }\n\n  /**\n   * @protected\n   */\n  connectedCallback() {\n    super.connectedCallback();\n\n    document.body.addEventListener('keydown', this._boundKeydownListener, true);\n    document.body.addEventListener('keyup', this._boundKeyupListener, true);\n  }\n\n  /**\n   * @protected\n   */\n  disconnectedCallback() {\n    super.disconnectedCallback();\n\n    document.body.removeEventListener('keydown', this._boundKeydownListener, true);\n    document.body.removeEventListener('keyup', this._boundKeyupListener, true);\n\n    // in non-Chrome browsers, blur does not fire on the element when it is disconnected.\n    // reproducible in `<vaadin-date-picker>` when closing on `Cancel` or `Today` click.\n    if (this.hasAttribute('focused')) {\n      this._setFocused(false);\n    }\n  }\n\n  _setFocused(focused) {\n    if (focused) {\n      this.setAttribute('focused', '');\n    } else {\n      this.removeAttribute('focused');\n    }\n\n    // focus-ring is true when the element was focused from the keyboard.\n    // Focus Ring [A11ycasts]: https://youtu.be/ilj2P5-5CjI\n    if (focused && this._tabPressed) {\n      this.setAttribute('focus-ring', '');\n    } else {\n      this.removeAttribute('focus-ring');\n    }\n  }\n\n  _bodyKeydownListener(e) {\n    this._tabPressed = e.keyCode === 9;\n  }\n\n  _bodyKeyupListener() {\n    this._tabPressed = false;\n  }\n\n  /**\n   * Any element extending this mixin is required to implement this getter.\n   * It returns the actual focusable element in the component.\n   */\n  get focusElement() {\n    window.console.warn(`Please implement the 'focusElement' property in <${this.localName}>`);\n    return this;\n  }\n\n  _focus(e) {\n    if (this._isShiftTabbing) {\n      return;\n    }\n\n    this.focusElement.focus();\n    this._setFocused(true);\n  }\n\n  /**\n   * Moving the focus from the host element causes firing of the blur event what leads to problems in IE.\n   * @private\n   */\n  focus() {\n    if (!this.focusElement || this.disabled) {\n      return;\n    }\n\n    this.focusElement.focus();\n    this._setFocused(true);\n  }\n\n  /**\n   * Native bluring in the host element does nothing because it does not have the focus.\n   * In chrome it works, but not in FF.\n   * @private\n   */\n  blur() {\n    this.focusElement.blur();\n    this._setFocused(false);\n  }\n\n  _disabledChanged(disabled) {\n    this.focusElement.disabled = disabled;\n    if (disabled) {\n      this.blur();\n      this._previousTabIndex = this.tabindex;\n      this.tabindex = -1;\n      this.setAttribute('aria-disabled', 'true');\n    } else {\n      if (typeof this._previousTabIndex !== 'undefined') {\n        this.tabindex = this._previousTabIndex;\n      }\n      this.removeAttribute('aria-disabled');\n    }\n  }\n\n  _tabindexChanged(tabindex) {\n    if (tabindex !== undefined) {\n      this.focusElement.tabIndex = tabindex;\n    }\n\n    if (this.disabled && this.tabindex) {\n      // If tabindex attribute was changed while checkbox was disabled\n      if (this.tabindex !== -1) {\n        this._previousTabIndex = this.tabindex;\n      }\n      this.tabindex = tabindex = undefined;\n    }\n\n    if (window.ShadyDOM) {\n      this.setProperties({tabIndex: tabindex, tabindex: tabindex});\n    }\n  }\n\n  /**\n   * @protected\n   */\n  click() {\n    if (!this.disabled) {\n      super.click();\n    }\n  }\n};\n","/**\n@license\nCopyright (c) 2017 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\nexport const DatePickerHelper = class VaadinDatePickerHelper {\n  /**\n   * Get ISO 8601 week number for the given date.\n   *\n   * @param {Date} Date object\n   * @return {Number} Week number\n   */\n  static _getISOWeekNumber(date) {\n    // Ported from Vaadin Framework method com.vaadin.client.DateTimeService.getISOWeekNumber(date)\n    var dayOfWeek = date.getDay(); // 0 == sunday\n\n    // ISO 8601 use weeks that start on monday so we use\n    // mon=1,tue=2,...sun=7;\n    if (dayOfWeek === 0) {\n      dayOfWeek = 7;\n    }\n    // Find nearest thursday (defines the week in ISO 8601). The week number\n    // for the nearest thursday is the same as for the target date.\n    var nearestThursdayDiff = 4 - dayOfWeek; // 4 is thursday\n    var nearestThursday = new Date(date.getTime() + nearestThursdayDiff * 24 * 3600 * 1000);\n\n    var firstOfJanuary = new Date(0, 0);\n    firstOfJanuary.setFullYear(nearestThursday.getFullYear());\n\n    var timeDiff = nearestThursday.getTime() - firstOfJanuary.getTime();\n\n    // Rounding the result, as the division doesn't result in an integer\n    // when the given date is inside daylight saving time period.\n    var daysSinceFirstOfJanuary = Math.round(timeDiff / (24 * 3600 * 1000));\n\n    return Math.floor((daysSinceFirstOfJanuary) / 7 + 1);\n  }\n\n  /**\n   * Check if two dates are equal.\n   *\n   * @param {Date} date1\n   * @param {Date} date2\n   * @return {Boolean} True if the given date objects refer to the same date\n   */\n  static _dateEquals(date1, date2) {\n    return date1 instanceof Date && date2 instanceof Date &&\n        date1.getFullYear() === date2.getFullYear() &&\n        date1.getMonth() === date2.getMonth() &&\n        date1.getDate() === date2.getDate();\n  }\n\n  /**\n   * Check if the given date is in the range of allowed dates.\n   *\n   * @param {Date} date The date to check\n   * @param {Date} min Range start\n   * @param {Date} max Range end\n   * @return {Boolean} True if the date is in the range\n   */\n  static _dateAllowed(date, min, max) {\n    return (!min || date >= min) && (!max || date <= max);\n  }\n\n  /**\n   * Get closest date from array of dates.\n   *\n   * @param {Date} date The date to compare dates with\n   * @param {Array} dates Array of date objects\n   * @return {Date} Closest date\n   */\n  static _getClosestDate(date, dates) {\n    return dates.filter(date => date !== undefined)\n      .reduce((closestDate, candidate) => {\n        if (!candidate) {\n          return closestDate;\n        }\n\n        if (!closestDate) {\n          return candidate;\n        }\n\n        var candidateDiff = Math.abs(date.getTime() - candidate.getTime());\n        var closestDateDiff = Math.abs(closestDate.getTime() - date.getTime());\n        return candidateDiff < closestDateDiff ? candidate : closestDate;\n      });\n  }\n\n  /**\n   * Extracts the basic component parts of a date (day, month and year)\n   * to the expected format.\n   */\n  static _extractDateParts(date) {\n    return {\n      day: date.getDate(),\n      month: date.getMonth(),\n      year: date.getFullYear()\n    };\n  }\n};\n","/**\n@license\nCopyright (c) 2017 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\nimport { IronA11yKeysBehavior } from '@polymer/iron-a11y-keys-behavior/iron-a11y-keys-behavior.js';\n\nimport { IronResizableBehavior } from '@polymer/iron-resizable-behavior/iron-resizable-behavior.js';\nimport { DatePickerHelper } from './vaadin-date-picker-helper.js';\nimport { addListener } from '@polymer/polymer/lib/utils/gestures.js';\nimport { mixinBehaviors } from '@polymer/polymer/lib/legacy/class.js';\n\n/**\n * @polymerMixin\n */\nexport const DatePickerMixin = subclass => class VaadinDatePickerMixin extends mixinBehaviors(\n  [IronResizableBehavior], subclass\n) {\n\n  static get properties() {\n    return {\n      /**\n       * The current selected date.\n       */\n      _selectedDate: {\n        type: Date\n      },\n\n      _focusedDate: Date,\n\n      /**\n       * The value for this element.\n       *\n       * Supported date formats:\n       * - ISO 8601 `\"YYYY-MM-DD\"` (default)\n       * - 6-digit extended ISO 8601 `\"+YYYYYY-MM-DD\"`, `\"-YYYYYY-MM-DD\"`\n       *\n       * @type {String}\n       */\n      value: {\n        type: String,\n        observer: '_valueChanged',\n        notify: true,\n        value: ''\n      },\n\n      /**\n       * Set to true to mark the input as required.\n       */\n      required: {\n        type: Boolean,\n        value: false\n      },\n\n      /**\n       * The name of this element.\n       */\n      name: {\n        type: String\n      },\n\n      /**\n       * Date which should be visible when there is no value selected.\n       *\n       * The same date formats as for the `value` property are supported.\n       */\n      initialPosition: String,\n\n      /**\n       * The label for this element.\n       */\n      label: String,\n\n      /**\n       * Set true to open the date selector overlay.\n       */\n      opened: {\n        type: Boolean,\n        reflectToAttribute: true,\n        notify: true,\n        observer: '_openedChanged'\n      },\n\n      /**\n       * Set true to display ISO-8601 week numbers in the calendar. Notice that\n       * displaying week numbers is only supported when `i18n.firstDayOfWeek`\n       * is 1 (Monday).\n       */\n      showWeekNumbers: {\n        type: Boolean\n      },\n\n      _fullscreen: {\n        value: false,\n        observer: '_fullscreenChanged'\n      },\n\n      _fullscreenMediaQuery: {\n        value: '(max-width: 420px), (max-height: 420px)'\n      },\n\n      // An array of ancestor elements whose -webkit-overflow-scrolling is forced from value\n      // 'touch' to value 'auto' in order to prevent them from clipping the dropdown. iOS only.\n      _touchPrevented: Array,\n\n      /**\n       * The object used to localize this component.\n       * To change the default localization, replace the entire\n       * _i18n_ object or just the property you want to modify.\n       *\n       * The object has the following JSON structure and default values:\n\n          {\n            // An array with the full names of months starting\n            // with January.\n            monthNames: [\n              'January', 'February', 'March', 'April', 'May',\n              'June', 'July', 'August', 'September',\n              'October', 'November', 'December'\n            ],\n\n            // An array of weekday names starting with Sunday. Used\n            // in screen reader announcements.\n            weekdays: [\n              'Sunday', 'Monday', 'Tuesday', 'Wednesday',\n              'Thursday', 'Friday', 'Saturday'\n            ],\n\n            // An array of short weekday names starting with Sunday.\n            // Displayed in the calendar.\n            weekdaysShort: [\n              'Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'\n            ],\n\n            // An integer indicating the first day of the week\n            // (0 = Sunday, 1 = Monday, etc.).\n            firstDayOfWeek: 0,\n\n            // Used in screen reader announcements along with week\n            // numbers, if they are displayed.\n            week: 'Week',\n\n            // Translation of the Calendar icon button title.\n            calendar: 'Calendar',\n\n            // Translation of the Clear icon button title.\n            clear: 'Clear',\n\n            // Translation of the Today shortcut button text.\n            today: 'Today',\n\n            // Translation of the Cancel button text.\n            cancel: 'Cancel',\n\n            // A function to format given `Object` as\n            // date string. Object is in the format `{ day: ..., month: ..., year: ... }`\n            // Note: The argument month is 0-based. This means that January = 0 and December = 11.\n            formatDate: d => {\n              // returns a string representation of the given\n              // object in 'MM/DD/YYYY' -format\n            },\n\n            // A function to parse the given text to an `Object` in the format `{ day: ..., month: ..., year: ... }`.\n            // Must properly parse (at least) text formatted by `formatDate`.\n            // Setting the property to null will disable keyboard input feature.\n            // Note: The argument month is 0-based. This means that January = 0 and December = 11.\n            parseDate: text => {\n              // Parses a string in 'MM/DD/YY', 'MM/DD' or 'DD' -format to\n              // an `Object` in the format `{ day: ..., month: ..., year: ... }`.\n            }\n\n            // A function to format given `monthName` and\n            // `fullYear` integer as calendar title string.\n            formatTitle: (monthName, fullYear) => {\n              return monthName + ' ' + fullYear;\n            }\n          }\n\n       *\n       * @default {English/US}\n       */\n      i18n: {\n        type: Object,\n        value: () => {\n          return {\n            monthNames: [\n              'January', 'February', 'March', 'April', 'May',\n              'June', 'July', 'August', 'September', 'October', 'November', 'December'\n            ],\n            weekdays: ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'],\n            weekdaysShort: ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'],\n            firstDayOfWeek: 0,\n            week: 'Week',\n            calendar: 'Calendar',\n            clear: 'Clear',\n            today: 'Today',\n            cancel: 'Cancel',\n            formatDate: d => {\n              const yearStr = String(d.year).replace(/\\d+/, y => '0000'.substr(y.length) + y);\n              return [d.month + 1, d.day, yearStr].join('/');\n            },\n            parseDate: text => {\n              const parts = text.split('/');\n              const today = new Date();\n              let date, month = today.getMonth(), year = today.getFullYear();\n\n              if (parts.length === 3) {\n                year = parseInt(parts[2]);\n                if (parts[2].length < 3 && year >= 0) {\n                  year += year < 50 ? 2000 : 1900;\n                }\n                month = parseInt(parts[0]) - 1;\n                date = parseInt(parts[1]);\n              } else if (parts.length === 2) {\n                month = parseInt(parts[0]) - 1;\n                date = parseInt(parts[1]);\n              } else if (parts.length === 1) {\n                date = parseInt(parts[0]);\n              }\n\n              if (date !== undefined) {\n                return {day: date, month, year};\n              }\n            },\n            formatTitle: (monthName, fullYear) => {\n              return monthName + ' ' + fullYear;\n            }\n          };\n        }\n      },\n\n      /**\n       * The earliest date that can be selected. All earlier dates will be disabled.\n       *\n       * Supported date formats:\n       * - ISO 8601 `\"YYYY-MM-DD\"` (default)\n       * - 6-digit extended ISO 8601 `\"+YYYYYY-MM-DD\"`, `\"-YYYYYY-MM-DD\"`\n       *\n       * @type {String}\n       */\n      min: {\n        type: String,\n        observer: '_minChanged'\n      },\n\n      /**\n       * The latest date that can be selected. All later dates will be disabled.\n       *\n       * Supported date formats:\n       * - ISO 8601 `\"YYYY-MM-DD\"` (default)\n       * - 6-digit extended ISO 8601 `\"+YYYYYY-MM-DD\"`, `\"-YYYYYY-MM-DD\"`\n       *\n       * @type {String}\n       */\n      max: {\n        type: String,\n        observer: '_maxChanged'\n      },\n\n      /**\n       * The earliest date that can be selected. All earlier dates will be disabled.\n       */\n      _minDate: {\n        type: Date,\n        // null does not work here because minimizer passes undefined to overlay (#351)\n        value: ''\n      },\n\n      /**\n       * The latest date that can be selected. All later dates will be disabled.\n       */\n      _maxDate: {\n        type: Date,\n        value: ''\n      },\n\n      _noInput: {\n        type: Boolean,\n        computed: '_isNoInput(_fullscreen, _ios, i18n, i18n.*)'\n      },\n\n      _ios: {\n        type: Boolean,\n        value: navigator.userAgent.match(/iP(?:hone|ad;(?: U;)? CPU) OS (\\d+)/)\n      },\n\n      _webkitOverflowScroll: {\n        type: Boolean,\n        value: document.createElement('div').style.webkitOverflowScrolling === ''\n      },\n\n      _ignoreAnnounce: {\n        value: true\n      },\n\n      _focusOverlayOnOpen: Boolean,\n\n      _overlayInitialized: Boolean\n    };\n  }\n\n  static get observers() {\n    return [\n      '_updateHasValue(value)',\n      '_validateInput(_selectedDate, _minDate, _maxDate)',\n      '_selectedDateChanged(_selectedDate, i18n.formatDate)',\n      '_focusedDateChanged(_focusedDate, i18n.formatDate)',\n      '_announceFocusedDate(_focusedDate, opened, _ignoreAnnounce)'\n    ];\n  }\n\n  ready() {\n    super.ready();\n    this._boundOnScroll = this._onScroll.bind(this);\n    this._boundFocus = this._focus.bind(this);\n    this._boundUpdateAlignmentAndPosition = this._updateAlignmentAndPosition.bind(this);\n    addListener(this, 'tap', this.open);\n    this.addEventListener('touchend', this._preventDefault.bind(this));\n    this.addEventListener('keydown', this._onKeydown.bind(this));\n    this.addEventListener('input', this._onUserInput.bind(this));\n    this.addEventListener('focus', e => this._noInput && e.target.blur());\n  }\n\n  _initOverlay() {\n    this.$.overlay.removeAttribute('disable-upgrade');\n    this._overlayInitialized = true;\n\n    this.$.overlay.addEventListener('opened-changed', e => this.opened = e.detail.value);\n\n    this._overlayContent.addEventListener('close', this._close.bind(this));\n    this._overlayContent.addEventListener('focus-input', this._focusAndSelect.bind(this));\n    this.$.overlay.addEventListener('vaadin-overlay-escape-press', this._boundFocus);\n\n    // Keep focus attribute in focusElement for styling\n    this._overlayContent.addEventListener('focus', () => this.focusElement._setFocused(true));\n\n    this.$.overlay.addEventListener('vaadin-overlay-close', this._onVaadinOverlayClose.bind(this));\n  }\n\n  /**\n   * @protected\n   */\n  disconnectedCallback() {\n    super.disconnectedCallback();\n\n    if (this._overlayInitialized) {\n      this.$.overlay.removeEventListener('vaadin-overlay-escape-press', this._boundFocus);\n    }\n\n    this.opened = false;\n  }\n\n  /**\n   * Opens the dropdown.\n   */\n  open() {\n    if (!this.disabled && !this.readonly) {\n      this.opened = true;\n    }\n  }\n\n  _close(e) {\n    if (e) {\n      e.stopPropagation();\n    }\n    this._focus();\n    this.close();\n  }\n\n  /**\n   * Closes the dropdown.\n   */\n  close() {\n    if (this._overlayInitialized) {\n      this.$.overlay.close();\n    }\n  }\n\n  get _inputElement() {\n    return this._input();\n  }\n\n  get _nativeInput() {\n    if (this._inputElement) {\n      // vaadin-text-field's input is focusElement\n      // iron-input's input is inputElement\n      return this._inputElement.focusElement ? this._inputElement.focusElement :\n        this._inputElement.inputElement ? this._inputElement.inputElement :\n          window.unwrap ? window.unwrap(this._inputElement) : this._inputElement;\n    }\n  }\n\n  _parseDate(str) {\n    // Parsing with RegExp to ensure correct format\n    var parts = /^([-+]\\d{1}|\\d{2,4}|[-+]\\d{6})-(\\d{1,2})-(\\d{1,2})$/.exec(str);\n    if (!parts) {\n      return;\n    }\n\n    var date = new Date(0, 0); // Wrong date (1900-01-01), but with midnight in local time\n    date.setFullYear(parseInt(parts[1], 10));\n    date.setMonth(parseInt(parts[2], 10) - 1);\n    date.setDate(parseInt(parts[3], 10));\n    return date;\n  }\n\n  _isNoInput(fullscreen, ios, i18n) {\n    return !this._inputElement || fullscreen || ios || !i18n.parseDate;\n  }\n\n  _formatISO(date) {\n    if (!(date instanceof Date)) {\n      return '';\n    }\n\n    const pad = (num, fmt = '00') => (fmt + num).substr((fmt + num).length - fmt.length);\n\n    let yearSign = '';\n    let yearFmt = '0000';\n    let yearAbs = date.getFullYear();\n    if (yearAbs < 0) {\n      yearAbs = -yearAbs;\n      yearSign = '-';\n      yearFmt = '000000';\n    } else if (date.getFullYear() >= 10000) {\n      yearSign = '+';\n      yearFmt = '000000';\n    }\n\n    const year = yearSign + pad(yearAbs, yearFmt);\n    const month = pad(date.getMonth() + 1);\n    const day = pad(date.getDate());\n    return [year, month, day].join('-');\n  }\n\n  _openedChanged(opened) {\n    if (opened && !this._overlayInitialized) {\n      this._initOverlay();\n    }\n    if (this._overlayInitialized) {\n      this.$.overlay.opened = opened;\n    }\n    if (opened) {\n      this._updateAlignmentAndPosition();\n    }\n  }\n\n  _selectedDateChanged(selectedDate, formatDate) {\n    if (selectedDate === undefined || formatDate === undefined) {\n      return;\n    }\n    if (this.__userInputOccurred) {\n      this.__dispatchChange = true;\n    }\n    const inputValue = selectedDate && formatDate(DatePickerHelper._extractDateParts(selectedDate));\n    const value = this._formatISO(selectedDate);\n    if (value !== this.value) {\n      this.validate(inputValue);\n      this.value = value;\n    }\n    this.__userInputOccurred = false;\n    this.__dispatchChange = false;\n    this._focusedDate = selectedDate;\n    this._inputValue = selectedDate ? inputValue : '';\n  }\n\n  _focusedDateChanged(focusedDate, formatDate) {\n    if (focusedDate === undefined || formatDate === undefined) {\n      return;\n    }\n    this.__userInputOccurred = true;\n    if (!this._ignoreFocusedDateChange && !this._noInput) {\n      this._inputValue = focusedDate ? formatDate(DatePickerHelper._extractDateParts(focusedDate)) : '';\n    }\n  }\n\n  _updateHasValue(value) {\n    if (value) {\n      this.setAttribute('has-value', '');\n    } else {\n      this.removeAttribute('has-value');\n    }\n  }\n\n\n  __getOverlayTheme(theme, overlayInitialized) {\n    if (overlayInitialized) {\n      return theme;\n    }\n  }\n\n  _handleDateChange(property, value, oldValue) {\n    if (!value) {\n      this[property] = '';\n      return;\n    }\n\n    var date = this._parseDate(value);\n    if (!date) {\n      this.value = oldValue;\n      return;\n    }\n    if (!DatePickerHelper._dateEquals(this[property], date)) {\n      this[property] = date;\n    }\n  }\n\n  _valueChanged(value, oldValue) {\n    if (this.__dispatchChange) {\n      this.dispatchEvent(new CustomEvent('change', {bubbles: true}));\n    }\n    this._handleDateChange('_selectedDate', value, oldValue);\n  }\n\n  _minChanged(value, oldValue) {\n    this._handleDateChange('_minDate', value, oldValue);\n  }\n\n  _maxChanged(value, oldValue) {\n    this._handleDateChange('_maxDate', value, oldValue);\n  }\n\n  _updateAlignmentAndPosition() {\n    if (!this._overlayInitialized) {\n      return;\n    }\n    if (!this._fullscreen) {\n      const inputRect = this._inputElement.getBoundingClientRect();\n\n      const bottomAlign = inputRect.top > window.innerHeight / 2;\n      const rightAlign = inputRect.left + this.clientWidth / 2 > window.innerWidth / 2;\n\n      if (rightAlign) {\n        const viewportWidth = Math.min(window.innerWidth, document.documentElement.clientWidth);\n        this.$.overlay.setAttribute('right-aligned', '');\n        this.$.overlay.style.removeProperty('left');\n        this.$.overlay.style.right = (viewportWidth - inputRect.right) + 'px';\n      } else {\n        this.$.overlay.removeAttribute('right-aligned');\n        this.$.overlay.style.removeProperty('right');\n        this.$.overlay.style.left = inputRect.left + 'px';\n      }\n\n      if (bottomAlign) {\n        const viewportHeight = Math.min(window.innerHeight, document.documentElement.clientHeight);\n        this.$.overlay.setAttribute('bottom-aligned', '');\n        this.$.overlay.style.removeProperty('top');\n        this.$.overlay.style.bottom = (viewportHeight - inputRect.top) + 'px';\n      } else {\n        this.$.overlay.removeAttribute('bottom-aligned');\n        this.$.overlay.style.removeProperty('bottom');\n        this.$.overlay.style.top = inputRect.bottom + 'px';\n      }\n    }\n\n    this.$.overlay.setAttribute('dir',\n      getComputedStyle(this._inputElement).getPropertyValue('direction')\n    );\n    this._overlayContent._repositionYearScroller();\n  }\n\n  _fullscreenChanged() {\n    if (this._overlayInitialized && this.$.overlay.opened) {\n      this._updateAlignmentAndPosition();\n    }\n  }\n\n  _onOverlayOpened() {\n    this._openedWithFocusRing = this.hasAttribute('focus-ring') || (this.focusElement && this.focusElement.hasAttribute('focus-ring'));\n\n    var parsedInitialPosition = this._parseDate(this.initialPosition);\n\n    var initialPosition = this._selectedDate || this._overlayContent.initialPosition ||\n      parsedInitialPosition || new Date();\n\n    if (parsedInitialPosition ||\n      DatePickerHelper._dateAllowed(initialPosition, this._minDate, this._maxDate)) {\n      this._overlayContent.initialPosition = initialPosition;\n    } else {\n      this._overlayContent.initialPosition =\n        DatePickerHelper._getClosestDate(initialPosition, [this._minDate, this._maxDate]);\n    }\n\n    this._overlayContent.scrollToDate(this._overlayContent.focusedDate || this._overlayContent.initialPosition);\n    // Have a default focused date\n    this._ignoreFocusedDateChange = true;\n    this._overlayContent.focusedDate = this._overlayContent.focusedDate || this._overlayContent.initialPosition;\n    this._ignoreFocusedDateChange = false;\n\n    window.addEventListener('scroll', this._boundOnScroll, true);\n    this.addEventListener('iron-resize', this._boundUpdateAlignmentAndPosition);\n\n    if (this._webkitOverflowScroll) {\n      this._touchPrevented = this._preventWebkitOverflowScrollingTouch(this.parentElement);\n    }\n\n    if (this._focusOverlayOnOpen) {\n      this._overlayContent.focus();\n      this._focusOverlayOnOpen = false;\n    } else {\n      this._focus();\n    }\n\n    if (this._noInput && this.focusElement) {\n      this.focusElement.blur();\n    }\n\n    this.updateStyles();\n\n    this._ignoreAnnounce = false;\n  }\n\n  // A hack needed for iOS to prevent dropdown from being clipped in an\n  // ancestor container with -webkit-overflow-scrolling: touch;\n  _preventWebkitOverflowScrollingTouch(element) {\n    var result = [];\n    while (element) {\n      if (window.getComputedStyle(element).webkitOverflowScrolling === 'touch') {\n        var oldInlineValue = element.style.webkitOverflowScrolling;\n        element.style.webkitOverflowScrolling = 'auto';\n        result.push({\n          element: element,\n          oldInlineValue: oldInlineValue\n        });\n      }\n      element = element.parentElement;\n    }\n    return result;\n  }\n\n  _onOverlayClosed() {\n    this._ignoreAnnounce = true;\n\n    window.removeEventListener('scroll', this._boundOnScroll, true);\n    this.removeEventListener('iron-resize', this._boundUpdateAlignmentAndPosition);\n\n    if (this._touchPrevented) {\n      this._touchPrevented.forEach(prevented =>\n        prevented.element.style.webkitOverflowScrolling = prevented.oldInlineValue);\n      this._touchPrevented = [];\n    }\n\n    this.updateStyles();\n\n    // Select the parsed input or focused date\n    this._ignoreFocusedDateChange = true;\n    if (this.i18n.parseDate) {\n      var inputValue = this._inputValue || '';\n      const dateObject = this.i18n.parseDate(inputValue);\n      const parsedDate = dateObject &&\n        this._parseDate(`${dateObject.year}-${dateObject.month + 1}-${dateObject.day}`);\n\n      if (this._isValidDate(parsedDate)) {\n        this._selectedDate = parsedDate;\n      } else {\n        this._selectedDate = null;\n        this._inputValue = inputValue;\n      }\n    } else if (this._focusedDate) {\n      this._selectedDate = this._focusedDate;\n    }\n    this._ignoreFocusedDateChange = false;\n\n    if (this._nativeInput && this._nativeInput.selectionStart) {\n      this._nativeInput.selectionStart = this._nativeInput.selectionEnd;\n    }\n    this.validate();\n  }\n\n  /**\n   * Returns true if `value` is valid, and sets the `invalid` flag appropriately.\n   *\n   * @param {string} value Value to validate. Optional, defaults to user's input value.\n   * @return {boolean} True if the value is valid and sets the `invalid` flag appropriately\n   */\n  validate(value) {\n    // reset invalid state on the underlying text field\n    this.invalid = false;\n    value = value !== undefined ? value : this._inputValue;\n    return !(this.invalid = !this.checkValidity(value));\n  }\n\n  /**\n   * Returns true if the current input value satisfies all constraints (if any)\n   *\n   * Override the `checkValidity` method for custom validations.\n   *\n   * @param {string} value Value to validate. Optional, defaults to the selected date.\n   * @return {boolean} True if the value is valid\n   */\n  checkValidity(value) {\n    var inputValid = !value ||\n      (this._selectedDate && value === this.i18n.formatDate(DatePickerHelper._extractDateParts(this._selectedDate)));\n    var minMaxValid = !this._selectedDate ||\n      DatePickerHelper._dateAllowed(this._selectedDate, this._minDate, this._maxDate);\n\n    var inputValidity = true;\n    if (this._inputElement) {\n      if (this._inputElement.checkValidity) {\n        // vaadin native input elements have the checkValidity method\n        inputValidity = this._inputElement.checkValidity(value);\n      } else if (this._inputElement.validate) {\n        // iron-form-elements have the validate API\n        inputValidity = this._inputElement.validate(value);\n      }\n    }\n\n    return inputValid && minMaxValid && inputValidity;\n  }\n\n  _onScroll(e) {\n    if (e.target === window || !this._overlayContent.contains(e.target)) {\n      this._updateAlignmentAndPosition();\n    }\n  }\n\n  _focus() {\n    if (this._noInput) {\n      this._overlayInitialized && this._overlayContent.focus();\n    } else {\n      this._inputElement.focus();\n    }\n  }\n\n  _focusAndSelect() {\n    this._focus();\n    this._setSelectionRange(0, this._inputValue.length);\n  }\n\n  _setSelectionRange(a, b) {\n    if (this._nativeInput && this._nativeInput.setSelectionRange) {\n      this._nativeInput.setSelectionRange(a, b);\n    }\n  }\n\n  _preventDefault(e) {\n    e.preventDefault();\n  }\n\n  /**\n   * Keyboard Navigation\n   */\n  _eventKey(e) {\n    var keys = ['down', 'up', 'enter', 'esc', 'tab'];\n\n    for (var i = 0; i < keys.length; i++) {\n      var k = keys[i];\n      if (IronA11yKeysBehavior.keyboardEventMatchesKeys(e, k)) {\n        return k;\n      }\n    }\n  }\n\n  _isValidDate(d) {\n    return d && !isNaN(d.getTime());\n  }\n\n  _onKeydown(e) {\n    if (this._noInput) {\n      // The input element cannot be readonly as it would conflict with\n      // the required attribute. Both are not allowed on an input element.\n      // Therefore we prevent default on most keydown events.\n      var allowedKeys = [\n        9 // tab\n      ];\n      if (allowedKeys.indexOf(e.keyCode) === -1) {\n        e.preventDefault();\n      }\n    }\n\n    switch (this._eventKey(e)) {\n      case 'down':\n      case 'up':\n        // prevent scrolling the page with arrows\n        e.preventDefault();\n\n        if (this.opened) {\n          this._overlayContent.focus();\n          this._overlayContent._onKeydown(e);\n        } else {\n          this._focusOverlayOnOpen = true;\n          this.open();\n        }\n\n        break;\n      case 'enter': {\n        const dateObject = this.i18n.parseDate(this._inputValue);\n        const parsedDate = dateObject &&\n          this._parseDate(dateObject.year + '-' + (dateObject.month + 1) + '-' + dateObject.day);\n\n        if (this._overlayContent.focusedDate && this._isValidDate(parsedDate)) {\n          this._selectedDate = this._overlayContent.focusedDate;\n        }\n        this.close();\n        break;\n      }\n      case 'esc':\n        this._focusedDate = this._selectedDate;\n        this._close();\n        break;\n      case 'tab':\n        if (this.opened) {\n          e.preventDefault();\n          // Clear the selection range (remains visible on IE)\n          this._setSelectionRange(0, 0);\n          if (e.shiftKey) {\n            this._overlayContent.focusCancel();\n          } else {\n            this._overlayContent.focus();\n            this._overlayContent.revealDate(this._focusedDate);\n          }\n\n        }\n        break;\n    }\n  }\n\n  _validateInput(date, min, max) {\n    if (date && (min || max)) {\n      this.invalid = !DatePickerHelper._dateAllowed(date, min, max);\n    }\n  }\n\n  _onUserInput(e) {\n    if (!this.opened) {\n      this.open();\n    }\n    this._userInputValueChanged();\n  }\n\n  _userInputValueChanged(value) {\n    if (this.opened && this._inputValue) {\n      const dateObject = this.i18n.parseDate && this.i18n.parseDate(this._inputValue);\n      const parsedDate = dateObject &&\n        this._parseDate(`${dateObject.year}-${dateObject.month + 1}-${dateObject.day}`);\n\n      if (this._isValidDate(parsedDate)) {\n        this._ignoreFocusedDateChange = true;\n        if (!DatePickerHelper._dateEquals(parsedDate, this._focusedDate)) {\n          this._focusedDate = parsedDate;\n        }\n        this._ignoreFocusedDateChange = false;\n      }\n    }\n  }\n\n  _announceFocusedDate(_focusedDate, opened, _ignoreAnnounce) {\n    if (opened && !_ignoreAnnounce) {\n      this._overlayContent.announceFocusedDate();\n    }\n  }\n\n  get _overlayContent() {\n    return this.$.overlay.content.querySelector('#overlay-content');\n  }\n\n  /**\n   * Fired when the user commits a value change.\n   *\n   * @event change\n   */\n};\n","/**\n@license\nCopyright (c) 2017 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport { GestureEventListeners } from '@polymer/polymer/lib/mixins/gesture-event-listeners.js';\nimport '@polymer/iron-media-query/iron-media-query.js';\nimport { IronA11yKeysBehavior } from '@polymer/iron-a11y-keys-behavior/iron-a11y-keys-behavior.js';\nimport { IronA11yAnnouncer } from '@polymer/iron-a11y-announcer/iron-a11y-announcer.js';\nimport '@vaadin/vaadin-button/src/vaadin-button.js';\nimport { ThemableMixin } from '@vaadin/vaadin-themable-mixin/vaadin-themable-mixin.js';\nimport { ThemePropertyMixin } from '@vaadin/vaadin-themable-mixin/vaadin-theme-property-mixin.js';\nimport './vaadin-month-calendar.js';\nimport './vaadin-infinite-scroller.js';\nimport { DatePickerHelper } from './vaadin-date-picker-helper.js';\nimport './vaadin-date-picker-styles.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { addListener, setTouchAction } from '@polymer/polymer/lib/utils/gestures.js';\nimport { Debouncer } from '@polymer/polymer/lib/utils/debounce.js';\nimport { timeOut } from '@polymer/polymer/lib/utils/async.js';\n/**\n * @memberof Vaadin\n * @private\n */\nclass DatePickerOverlayContentElement extends\n  ThemableMixin(\n    ThemePropertyMixin(\n      GestureEventListeners(PolymerElement))) {\n  static get template() {\n    return html`\n    <style>\n      :host {\n        display: flex;\n        flex-direction: column;\n        height: 100%;\n        width: 100%;\n        outline: none;\n        background: #fff;\n      }\n\n      [part=\"overlay-header\"] {\n        display: flex;\n        flex-shrink: 0;\n        flex-wrap: nowrap;\n        align-items: center;\n      }\n\n      :host(:not([fullscreen])) [part=\"overlay-header\"] {\n        display: none;\n      }\n\n      [part=\"label\"] {\n        flex-grow: 1;\n      }\n\n      [part=\"clear-button\"]:not([showclear]) {\n        display: none;\n      }\n\n      [part=\"years-toggle-button\"] {\n        display: flex;\n      }\n\n      [part=\"years-toggle-button\"][desktop] {\n        display: none;\n      }\n\n      :host(:not([years-visible])) [part=\"years-toggle-button\"]::before {\n        transform: rotate(180deg);\n      }\n\n      #scrollers {\n        display: flex;\n        height: 100%;\n        width: 100%;\n        position: relative;\n        overflow: hidden;\n      }\n\n      [part=\"months\"],\n      [part=\"years\"] {\n        height: 100%;\n      }\n\n      [part=\"months\"] {\n        --vaadin-infinite-scroller-item-height: 270px;\n        position: absolute;\n        top: 0;\n        left: 0;\n        right: 0;\n        bottom: 0;\n      }\n\n      #scrollers[desktop] [part=\"months\"] {\n        right: 50px;\n        transform: none !important;\n      }\n\n      [part=\"years\"] {\n        --vaadin-infinite-scroller-item-height: 80px;\n        width: 50px;\n        position: absolute;\n        right: 0;\n        transform: translateX(100%);\n        -webkit-tap-highlight-color: transparent;\n        -webkit-user-select: none;\n        -moz-user-select: none;\n        -ms-user-select: none;\n        user-select: none;\n        /* Center the year scroller position. */\n        --vaadin-infinite-scroller-buffer-offset: 50%;\n      }\n\n      #scrollers[desktop] [part=\"years\"] {\n        position: absolute;\n        transform: none !important;\n      }\n\n      [part=\"years\"]::before {\n        content: '';\n        display: block;\n        background: transparent;\n        width: 0;\n        height: 0;\n        position: absolute;\n        left: 0;\n        top: 50%;\n        transform: translateY(-50%);\n        border-width: 6px;\n        border-style: solid;\n        border-color: transparent;\n        border-left-color: #000;\n      }\n\n      :host(.animate) [part=\"months\"],\n      :host(.animate) [part=\"years\"] {\n        transition: all 200ms;\n      }\n\n      [part=\"toolbar\"] {\n        display: flex;\n        justify-content: space-between;\n        z-index: 2;\n        flex-shrink: 0;\n      }\n\n      [part~=\"overlay-header\"]:not([desktop]) {\n        padding-bottom: 40px;\n      }\n\n      [part~=\"years-toggle-button\"] {\n        position: absolute;\n        top: auto;\n        right: 8px;\n        bottom: 0;\n        z-index: 1;\n        padding: 8px;\n      }\n\n      #announcer {\n        display: inline-block;\n        position: fixed;\n        clip: rect(0, 0, 0, 0);\n        clip-path: inset(100%);\n      }\n    </style>\n\n    <div id=\"announcer\" role=\"alert\" aria-live=\"polite\">\n      [[i18n.calendar]]\n    </div>\n\n    <div part=\"overlay-header\" on-touchend=\"_preventDefault\" desktop\\$=\"[[_desktopMode]]\" aria-hidden=\"true\">\n      <div part=\"label\">[[_formatDisplayed(selectedDate, i18n.formatDate, label)]]</div>\n      <div part=\"clear-button\" on-tap=\"_clear\" showclear\\$=\"[[_showClear(selectedDate)]]\"></div>\n      <div part=\"toggle-button\" on-tap=\"_cancel\"></div>\n\n      <div part=\"years-toggle-button\" desktop\\$=\"[[_desktopMode]]\" on-tap=\"_toggleYearScroller\" aria-hidden=\"true\">\n        [[_yearAfterXMonths(_visibleMonthIndex)]]\n      </div>\n    </div>\n\n    <div id=\"scrollers\" desktop\\$=\"[[_desktopMode]]\" on-track=\"_track\">\n      <vaadin-infinite-scroller id=\"monthScroller\" on-custom-scroll=\"_onMonthScroll\" on-touchstart=\"_onMonthScrollTouchStart\" buffer-size=\"3\" active=\"[[initialPosition]]\" part=\"months\">\n        <template>\n          <vaadin-month-calendar i18n=\"[[i18n]]\" month=\"[[_dateAfterXMonths(index)]]\" selected-date=\"{{selectedDate}}\" focused-date=\"[[focusedDate]]\" ignore-taps=\"[[_ignoreTaps]]\" show-week-numbers=\"[[showWeekNumbers]]\" min-date=\"[[minDate]]\" max-date=\"[[maxDate]]\" focused\\$=\"[[_focused]]\" part=\"month\" theme\\$=\"[[theme]]\">\n          </vaadin-month-calendar>\n        </template>\n      </vaadin-infinite-scroller>\n      <vaadin-infinite-scroller id=\"yearScroller\" on-tap=\"_onYearTap\" on-custom-scroll=\"_onYearScroll\" on-touchstart=\"_onYearScrollTouchStart\" buffer-size=\"12\" active=\"[[initialPosition]]\" part=\"years\">\n        <template>\n          <div part=\"year-number\" role=\"button\" current\\$=\"[[_isCurrentYear(index)]]\" selected\\$=\"[[_isSelectedYear(index, selectedDate)]]\">\n            [[_yearAfterXYears(index)]]\n          </div>\n          <div part=\"year-separator\" aria-hidden=\"true\"></div>\n        </template>\n      </vaadin-infinite-scroller>\n    </div>\n\n    <div on-touchend=\"_preventDefault\" role=\"toolbar\" part=\"toolbar\">\n      <vaadin-button id=\"todayButton\" part=\"today-button\" disabled=\"[[!_isTodayAllowed(minDate, maxDate)]]\" on-tap=\"_onTodayTap\">\n        [[i18n.today]]\n      </vaadin-button>\n      <vaadin-button id=\"cancelButton\" part=\"cancel-button\" on-tap=\"_cancel\">\n        [[i18n.cancel]]\n      </vaadin-button>\n    </div>\n\n    <iron-media-query query=\"(min-width: 375px)\" query-matches=\"{{_desktopMode}}\"></iron-media-query>\n`;\n  }\n\n  static get is() {\n    return 'vaadin-date-picker-overlay-content';\n  }\n\n  static get properties() {\n    return {\n      /**\n       * The value for this element.\n       */\n      selectedDate: {\n        type: Date,\n        notify: true\n      },\n\n      /**\n       * Date value which is focused using keyboard.\n       */\n      focusedDate: {\n        type: Date,\n        notify: true,\n        observer: '_focusedDateChanged'\n      },\n\n      _focusedMonthDate: Number,\n\n      /**\n       * Date which should be visible when there is no value selected.\n       */\n      initialPosition: {\n        type: Date,\n        observer: '_initialPositionChanged'\n      },\n\n      _originDate: {\n        value: new Date()\n      },\n\n      _visibleMonthIndex: Number,\n\n      _desktopMode: Boolean,\n\n      _translateX: {\n        observer: '_translateXChanged'\n      },\n\n      _yearScrollerWidth: {\n        value: 50\n      },\n\n      i18n: {\n        type: Object\n      },\n\n      showWeekNumbers: {\n        type: Boolean\n      },\n\n      _ignoreTaps: Boolean,\n\n      _notTapping: Boolean,\n\n      /**\n       * The earliest date that can be selected. All earlier dates will be disabled.\n       */\n      minDate: Date,\n\n      /**\n       * The latest date that can be selected. All later dates will be disabled.\n       */\n      maxDate: Date,\n\n      _focused: Boolean,\n\n      /**\n       * Input label\n       */\n      label: String\n    };\n  }\n\n  ready() {\n    super.ready();\n    this.setAttribute('tabindex', 0);\n    this.addEventListener('keydown', this._onKeydown.bind(this));\n    addListener(this, 'tap', this._stopPropagation);\n    this.addEventListener('focus', this._onOverlayFocus.bind(this));\n    this.addEventListener('blur', this._onOverlayBlur.bind(this));\n  }\n\n  /**\n   * Fired when the scroller reaches the target scrolling position.\n   * @event scroll-animation-finished\n   * @param {Number} detail.position new position\n   * @param {Number} detail.oldPosition old position\n   */\n\n  connectedCallback() {\n    super.connectedCallback();\n    this._closeYearScroller();\n    this._toggleAnimateClass(true);\n    setTouchAction(this.$.scrollers, 'pan-y');\n    IronA11yAnnouncer.requestAvailability();\n  }\n\n  announceFocusedDate() {\n    var focusedDate = this._currentlyFocusedDate();\n    var announce = [];\n    if (DatePickerHelper._dateEquals(focusedDate, new Date())) {\n      announce.push(this.i18n.today);\n    }\n    announce = announce.concat([\n      this.i18n.weekdays[focusedDate.getDay()],\n      focusedDate.getDate(),\n      this.i18n.monthNames[focusedDate.getMonth()],\n      focusedDate.getFullYear()\n    ]);\n    if (this.showWeekNumbers && this.i18n.firstDayOfWeek === 1) {\n      announce.push(this.i18n.week);\n      announce.push(DatePickerHelper._getISOWeekNumber(focusedDate));\n    }\n    this.dispatchEvent(new CustomEvent('iron-announce', {\n      bubbles: true,\n      composed: true,\n      detail: {\n        text: announce.join(' ')\n      }\n    }));\n    return;\n  }\n\n  /**\n   * Focuses the cancel button\n   */\n  focusCancel() {\n    this.$.cancelButton.focus();\n  }\n\n  /**\n   * Scrolls the list to the given Date.\n   */\n  scrollToDate(date, animate) {\n    this._scrollToPosition(this._differenceInMonths(date, this._originDate), animate);\n  }\n\n  _focusedDateChanged(focusedDate) {\n    this.revealDate(focusedDate);\n  }\n\n  _isCurrentYear(yearsFromNow) {\n    return yearsFromNow === 0;\n  }\n\n  _isSelectedYear(yearsFromNow, selectedDate) {\n    if (selectedDate) {\n      return selectedDate.getFullYear() === this._originDate.getFullYear() + yearsFromNow;\n    }\n  }\n\n  /**\n   * Scrolls the month and year scrollers enough to reveal the given date.\n   */\n  revealDate(date) {\n    if (date) {\n      var diff = this._differenceInMonths(date, this._originDate);\n      var scrolledAboveViewport = this.$.monthScroller.position > diff;\n\n      var visibleItems = this.$.monthScroller.clientHeight / this.$.monthScroller.itemHeight;\n      var scrolledBelowViewport = this.$.monthScroller.position + visibleItems - 1 < diff;\n\n      if (scrolledAboveViewport) {\n        this._scrollToPosition(diff, true);\n      } else if (scrolledBelowViewport) {\n        this._scrollToPosition(diff - visibleItems + 1, true);\n      }\n    }\n  }\n\n  _onOverlayFocus() {\n    this._focused = true;\n  }\n\n  _onOverlayBlur() {\n    this._focused = false;\n  }\n\n  _initialPositionChanged(initialPosition) {\n    this.scrollToDate(initialPosition);\n  }\n\n  _repositionYearScroller() {\n    this._visibleMonthIndex = Math.floor(this.$.monthScroller.position);\n    this.$.yearScroller.position = (this.$.monthScroller.position + this._originDate.getMonth()) / 12;\n  }\n\n  _repositionMonthScroller() {\n    this.$.monthScroller.position = this.$.yearScroller.position * 12 - this._originDate.getMonth();\n    this._visibleMonthIndex = Math.floor(this.$.monthScroller.position);\n  }\n\n  _onMonthScroll() {\n    this._repositionYearScroller();\n    this._doIgnoreTaps();\n  }\n\n  _onYearScroll() {\n    this._repositionMonthScroller();\n    this._doIgnoreTaps();\n  }\n\n  _onYearScrollTouchStart() {\n    this._notTapping = false;\n    setTimeout(() => this._notTapping = true, 300);\n\n    this._repositionMonthScroller();\n  }\n\n  _onMonthScrollTouchStart() {\n    this._repositionYearScroller();\n  }\n\n  _doIgnoreTaps() {\n    this._ignoreTaps = true;\n    this._debouncer = Debouncer.debounce(this._debouncer,\n      timeOut.after(300), () => this._ignoreTaps = false);\n  }\n\n  _formatDisplayed(date, formatDate, label) {\n    if (date) {\n      return formatDate(DatePickerHelper._extractDateParts(date));\n    } else {\n      return label;\n    }\n  }\n\n  _onTodayTap() {\n    var today = new Date();\n\n    if (Math.abs(this.$.monthScroller.position - this._differenceInMonths(today, this._originDate)) < 0.001) {\n      // Select today only if the month scroller is positioned approximately\n      // at the beginning of the current month\n      this.selectedDate = today;\n      this._close();\n    } else {\n      this._scrollToCurrentMonth();\n    }\n  }\n\n  _scrollToCurrentMonth() {\n    if (this.focusedDate) {\n      this.focusedDate = new Date();\n    }\n\n    this.scrollToDate(new Date(), true);\n  }\n\n  _showClear(selectedDate) {\n    return !!selectedDate;\n  }\n\n  _onYearTap(e) {\n    if (!this._ignoreTaps && !this._notTapping) {\n      var scrollDelta = e.detail.y - (this.$.yearScroller.getBoundingClientRect().top + this.$.yearScroller.clientHeight / 2);\n      var yearDelta = scrollDelta / this.$.yearScroller.itemHeight;\n      this._scrollToPosition(this.$.monthScroller.position + yearDelta * 12, true);\n    }\n  }\n\n  _scrollToPosition(targetPosition, animate) {\n    if (this._targetPosition !== undefined) {\n      this._targetPosition = targetPosition;\n      return;\n    }\n\n    if (!animate) {\n      this.$.monthScroller.position = targetPosition;\n      this._targetPosition = undefined;\n      this._repositionYearScroller();\n      return;\n    }\n\n    this._targetPosition = targetPosition;\n\n    // http://gizma.com/easing/\n    var easingFunction = (t, b, c, d) => {\n      t /= d / 2;\n      if (t < 1) {\n        return c / 2 * t * t + b;\n      }\n      t--;\n      return -c / 2 * (t * (t - 2) - 1) + b;\n    };\n\n    var duration = animate ? 300 : 0;\n    var start = 0;\n    var initialPosition = this.$.monthScroller.position;\n\n    var smoothScroll = timestamp => {\n      start = start || timestamp;\n      var currentTime = timestamp - start;\n\n      if (currentTime < duration) {\n        var currentPos = easingFunction(currentTime, initialPosition, this._targetPosition - initialPosition, duration);\n        this.$.monthScroller.position = currentPos;\n        window.requestAnimationFrame(smoothScroll);\n      } else {\n        this.dispatchEvent(new CustomEvent('scroll-animation-finished', {\n          bubbles: true,\n          composed: true,\n          detail: {\n            position: this._targetPosition,\n            oldPosition: initialPosition\n          }\n        }));\n\n        this.$.monthScroller.position = this._targetPosition;\n        this._targetPosition = undefined;\n      }\n\n      setTimeout(this._repositionYearScroller.bind(this), 1);\n    };\n\n    // Start the animation.\n    window.requestAnimationFrame(smoothScroll);\n  }\n\n  _limit(value, range) {\n    return Math.min(range.max, Math.max(range.min, value));\n  }\n\n  _handleTrack(e) {\n    // Check if horizontal movement threshold (dx) not exceeded or\n    // scrolling fast vertically (ddy).\n    if (Math.abs(e.detail.dx) < 10 || Math.abs(e.detail.ddy) > 10) {\n      return;\n    }\n\n    // If we're flinging quickly -> start animating already.\n    if (Math.abs(e.detail.ddx) > this._yearScrollerWidth / 3) {\n      this._toggleAnimateClass(true);\n    }\n\n    var newTranslateX = this._translateX + e.detail.ddx;\n    this._translateX = this._limit(newTranslateX, {\n      min: 0,\n      max: this._yearScrollerWidth\n    });\n  }\n\n  _track(e) {\n    if (this._desktopMode) {\n      // No need to track for swipe gestures on desktop.\n      return;\n    }\n\n    switch (e.detail.state) {\n      case 'start':\n        this._toggleAnimateClass(false);\n        break;\n\n      case 'track':\n        this._handleTrack(e);\n        break;\n\n      case 'end':\n        this._toggleAnimateClass(true);\n        if (this._translateX >= this._yearScrollerWidth / 2) {\n          this._closeYearScroller();\n        } else {\n          this._openYearScroller();\n        }\n        break;\n    }\n  }\n\n  _toggleAnimateClass(enable) {\n    if (enable) {\n      this.classList.add('animate');\n    } else {\n      this.classList.remove('animate');\n    }\n  }\n\n  _toggleYearScroller() {\n    this._isYearScrollerVisible() ? this._closeYearScroller() : this._openYearScroller();\n  }\n\n  _openYearScroller() {\n    this._translateX = 0;\n    this.setAttribute('years-visible', '');\n  }\n\n  _closeYearScroller() {\n    this.removeAttribute('years-visible');\n    this._translateX = this._yearScrollerWidth;\n  }\n\n  _isYearScrollerVisible() {\n    return this._translateX < this._yearScrollerWidth / 2;\n  }\n\n  _translateXChanged(x) {\n    if (!this._desktopMode) {\n      this.$.monthScroller.style.transform = 'translateX(' + (x - this._yearScrollerWidth) + 'px)';\n      this.$.yearScroller.style.transform = 'translateX(' + x + 'px)';\n    }\n  }\n\n  _yearAfterXYears(index) {\n    var result = new Date(this._originDate);\n    result.setFullYear(parseInt(index) + this._originDate.getFullYear());\n    return result.getFullYear();\n  }\n\n  _yearAfterXMonths(months) {\n    return this._dateAfterXMonths(months).getFullYear();\n  }\n\n  _dateAfterXMonths(months) {\n    var result = new Date(this._originDate);\n    result.setDate(1);\n    result.setMonth(parseInt(months) + this._originDate.getMonth());\n    return result;\n  }\n\n  _differenceInMonths(date1, date2) {\n    var months = (date1.getFullYear() - date2.getFullYear()) * 12;\n    return months - date2.getMonth() + date1.getMonth();\n  }\n\n  _differenceInYears(date1, date2) {\n    return this._differenceInMonths(date1, date2) / 12;\n  }\n\n  _clear() {\n    this.selectedDate = '';\n  }\n\n  _close() {\n    const overlayContent = this.getRootNode().host;\n    const overlay = overlayContent ? overlayContent.getRootNode().host : null;\n    if (overlay) {\n      overlay.opened = false;\n    }\n\n    this.dispatchEvent(new CustomEvent('close', {bubbles: true, composed: true}));\n  }\n\n  _cancel() {\n    this.focusedDate = this.selectedDate;\n    this._close();\n  }\n\n  _preventDefault(e) {\n    e.preventDefault();\n  }\n\n  /**\n   * Keyboard Navigation\n   */\n  _eventKey(e) {\n    var keys = ['down', 'up', 'right', 'left', 'enter', 'space', 'home', 'end', 'pageup', 'pagedown', 'tab', 'esc'];\n\n    for (var i = 0; i < keys.length; i++) {\n      var k = keys[i];\n      if (IronA11yKeysBehavior.keyboardEventMatchesKeys(e, k)) {\n        return k;\n      }\n    }\n  }\n\n  _onKeydown(e) {\n    var focus = this._currentlyFocusedDate();\n\n    // Cannot use (today/cancel).focused flag because vaadin-text-field removes it\n    // previously in the keydown event.\n    const isToday = e.composedPath().indexOf(this.$.todayButton) >= 0;\n    const isCancel = e.composedPath().indexOf(this.$.cancelButton) >= 0;\n    const isScroller = !isToday && !isCancel;\n\n    var eventKey = this._eventKey(e);\n    if (eventKey === 'tab') {\n      // We handle tabs here and don't want to bubble up.\n      e.stopPropagation();\n\n      const isFullscreen = this.hasAttribute('fullscreen');\n      const isShift = e.shiftKey;\n\n      if (isFullscreen) {\n        e.preventDefault();\n      } else if (isShift && isScroller || !isShift && isCancel) {\n        // Return focus back to the input field\n        e.preventDefault();\n        this.dispatchEvent(new CustomEvent('focus-input', {bubbles: true, composed: true}));\n      } else if (isShift && isToday) {\n        // Browser returns focus back to the scrollable area. We need to set\n        // the focused flag, and move the scroll to focused date.\n        this._focused = true;\n        setTimeout(() => this.revealDate(this.focusedDate), 1);\n      } else {\n        // Browser moves the focus out of the scroller, hence focused flag must\n        // set to false.\n        this._focused = false;\n      }\n    } else if (eventKey) {\n      e.preventDefault();\n      e.stopPropagation();\n      switch (eventKey) {\n        case 'down':\n          this._moveFocusByDays(7);\n          this.focus();\n          break;\n        case 'up':\n          this._moveFocusByDays(-7);\n          this.focus();\n          break;\n        case 'right':\n          if (isScroller) {\n            this._moveFocusByDays(1);\n          }\n          break;\n        case 'left':\n          if (isScroller) {\n            this._moveFocusByDays(-1);\n          }\n          break;\n        case 'enter':\n          if (isScroller || isCancel) {\n            this._close();\n          } else if (isToday) {\n            this._onTodayTap();\n          }\n          break;\n        case 'space':\n          if (isCancel) {\n            this._close();\n          } else if (isToday) {\n            this._onTodayTap();\n          } else {\n            var focusedDate = this.focusedDate;\n            if (DatePickerHelper._dateEquals(focusedDate, this.selectedDate)) {\n              this.selectedDate = '';\n              this.focusedDate = focusedDate;\n            } else {\n              this.selectedDate = focusedDate;\n            }\n          }\n          break;\n        case 'home':\n          this._moveFocusInsideMonth(focus, 'minDate');\n          break;\n        case 'end':\n          this._moveFocusInsideMonth(focus, 'maxDate');\n          break;\n        case 'pagedown':\n          this._moveFocusByMonths(e.shiftKey ? 12 : 1);\n          break;\n        case 'pageup':\n          this._moveFocusByMonths(e.shiftKey ? -12 : -1);\n          break;\n        case 'esc':\n          this._cancel();\n          break;\n      }\n    }\n  }\n\n  _currentlyFocusedDate() {\n    return this.focusedDate || this.selectedDate || this.initialPosition || new Date();\n  }\n\n  _focusDate(dateToFocus) {\n    this.focusedDate = dateToFocus;\n    this._focusedMonthDate = dateToFocus.getDate();\n  }\n\n  _focusClosestDate(focus) {\n    this._focusDate(DatePickerHelper._getClosestDate(focus, [this.minDate, this.maxDate]));\n  }\n\n  _moveFocusByDays(days) {\n    var focus = this._currentlyFocusedDate();\n    var dateToFocus = new Date(0, 0);\n    dateToFocus.setFullYear(focus.getFullYear());\n    dateToFocus.setMonth(focus.getMonth());\n    dateToFocus.setDate(focus.getDate() + days);\n\n    if (this._dateAllowed(dateToFocus, this.minDate, this.maxDate)) {\n      this._focusDate(dateToFocus);\n    } else {\n      if (this._dateAllowed(focus, this.minDate, this.maxDate)) {\n        // Move to min or max date\n        if (days > 0) { // down or right\n          this._focusDate(this.maxDate);\n        } else { // up or left\n          this._focusDate(this.minDate);\n        }\n      } else {\n        // Move to closest allowed date\n        this._focusClosestDate(focus);\n      }\n    }\n  }\n\n  _moveFocusByMonths(months) {\n    var focus = this._currentlyFocusedDate();\n    var dateToFocus = new Date(0, 0);\n    dateToFocus.setFullYear(focus.getFullYear());\n    dateToFocus.setMonth(focus.getMonth() + months);\n\n    var targetMonth = dateToFocus.getMonth();\n\n    dateToFocus.setDate(this._focusedMonthDate || (this._focusedMonthDate = focus.getDate()));\n    if (dateToFocus.getMonth() !== targetMonth) {\n      dateToFocus.setDate(0);\n    }\n\n    if (this._dateAllowed(dateToFocus, this.minDate, this.maxDate)) {\n      this.focusedDate = dateToFocus;\n    } else {\n      if (this._dateAllowed(focus, this.minDate, this.maxDate)) {\n        // Move to min or max date\n        if (months > 0) { // pagedown\n          this._focusDate(this.maxDate);\n        } else { // pageup\n          this._focusDate(this.minDate);\n        }\n      } else {\n        // Move to closest allowed date\n        this._focusClosestDate(focus);\n      }\n    }\n  }\n\n  _moveFocusInsideMonth(focusedDate, property) {\n    var dateToFocus = new Date(0, 0);\n    dateToFocus.setFullYear(focusedDate.getFullYear());\n\n    if (property === 'minDate') {\n      dateToFocus.setMonth(focusedDate.getMonth());\n      dateToFocus.setDate(1);\n    } else {\n      dateToFocus.setMonth(focusedDate.getMonth() + 1);\n      dateToFocus.setDate(0);\n    }\n\n    if (this._dateAllowed(dateToFocus, this.minDate, this.maxDate)) {\n      this._focusDate(dateToFocus);\n    } else {\n      if (this._dateAllowed(focusedDate, this.minDate, this.maxDate)) {\n        // Move to minDate or maxDate\n        this._focusDate(this[property]);\n      } else {\n        // Move to closest allowed date\n        this._focusClosestDate(focusedDate);\n      }\n    }\n  }\n\n  _dateAllowed(date, min, max) {\n    return (!min || date >= min) && (!max || date <= max);\n  }\n\n  _isTodayAllowed(min, max) {\n    var today = new Date();\n    var todayMidnight = new Date(0, 0);\n    todayMidnight.setFullYear(today.getFullYear());\n    todayMidnight.setMonth(today.getMonth());\n    todayMidnight.setDate(today.getDate());\n    return this._dateAllowed(todayMidnight, min, max);\n  }\n\n  _stopPropagation(e) {\n    e.stopPropagation();\n  }\n}\n\ncustomElements.define(DatePickerOverlayContentElement.is, DatePickerOverlayContentElement);\n","/**\n@license\nCopyright (c) 2017 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\nimport { OverlayElement } from '@vaadin/vaadin-overlay/src/vaadin-overlay.js';\n\nimport { DisableUpgradeMixin } from '@polymer/polymer/lib/mixins/disable-upgrade-mixin.js';\n/**\n * The overlay element.\n *\n * ### Styling\n *\n * See [`<vaadin-overlay>` documentation](https://github.com/vaadin/vaadin-overlay/blob/master/src/vaadin-overlay.html)\n * for `<vaadin-date-picker-overlay>` parts.\n *\n * See [ThemableMixin – how to apply styles for shadow parts](https://github.com/vaadin/vaadin-themable-mixin/wiki)\n *\n * @extends Vaadin.OverlayElement\n * @memberof Vaadin\n * @private\n */\nclass DatePickerOverlayElement extends DisableUpgradeMixin(OverlayElement) {\n  static get is() {\n    return 'vaadin-date-picker-overlay';\n  }\n}\n\ncustomElements.define(DatePickerOverlayElement.is, DatePickerOverlayElement);\n","import '@polymer/polymer/lib/elements/custom-style.js';\nconst $_documentContainer = document.createElement('template');\n\n$_documentContainer.innerHTML = `<dom-module id=\"vaadin-date-picker-overlay-styles\" theme-for=\"vaadin-date-picker-overlay\">\n  <template>\n    <style>\n      :host {\n        align-items: flex-start;\n        justify-content: flex-start;\n      }\n\n      :host([bottom-aligned]) {\n        justify-content: flex-end;\n      }\n\n      :host([right-aligned]) {\n        align-items: flex-end;\n      }\n\n      :host([right-aligned][dir=\"rtl\"]) {\n        align-items: flex-start;\n      }\n\n      [part=\"overlay\"] {\n        display: flex;\n        flex: auto;\n      }\n\n      [part~=\"content\"] {\n        flex: auto;\n      }\n    </style>\n  </template>\n</dom-module>`;\n\ndocument.head.appendChild($_documentContainer.content);\n","/**\n@license\nCopyright (c) 2017 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport { GestureEventListeners } from '@polymer/polymer/lib/mixins/gesture-event-listeners.js';\nimport '@polymer/iron-media-query/iron-media-query.js';\nimport { ThemableMixin } from '@vaadin/vaadin-themable-mixin/vaadin-themable-mixin.js';\nimport { ThemePropertyMixin } from '@vaadin/vaadin-themable-mixin/vaadin-theme-property-mixin.js';\nimport { ControlStateMixin } from '@vaadin/vaadin-control-state-mixin/vaadin-control-state-mixin.js';\nimport './vaadin-date-picker-overlay.js';\nimport './vaadin-date-picker-overlay-content.js';\nimport { DatePickerMixin } from './vaadin-date-picker-mixin.js';\nimport '@vaadin/vaadin-text-field/src/vaadin-text-field.js';\nimport { ElementMixin } from '@vaadin/vaadin-element-mixin/vaadin-element-mixin.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { afterNextRender } from '@polymer/polymer/lib/utils/render-status.js';\nimport { prevent } from '@polymer/polymer/lib/utils/gestures.js';\n/**\n *\n * `<vaadin-date-picker>` is a date selection field which includes a scrollable\n * month calendar view.\n * ```html\n * <vaadin-date-picker label=\"Birthday\"></vaadin-date-picker>\n * ```\n * ```js\n * datePicker.value = '2016-03-02';\n * ```\n * When the selected `value` is changed, a `value-changed` event is triggered.\n *\n *\n * ### Styling\n *\n * The following shadow DOM parts are available for styling:\n *\n * Part name | Description | Theme for Element\n * ----------------|----------------|----------------\n * `text-field` | Input element | vaadin-date-picker\n * `clear-button` | Clear button | vaadin-date-picker\n * `toggle-button` | Toggle button | vaadin-date-picker\n * `overlay-content` | The overlay element | vaadin-date-picker\n * `overlay-header` | Fullscreen mode header | vaadin-date-picker-overlay-content\n * `label` | Fullscreen mode value/label | vaadin-date-picker-overlay-content\n * `clear-button` | Fullscreen mode clear button | vaadin-date-picker-overlay-content\n * `toggle-button` | Fullscreen mode toggle button | vaadin-date-picker-overlay-content\n * `years-toggle-button` | Fullscreen mode years scroller toggle | vaadin-date-picker-overlay-content\n * `months` | Months scroller | vaadin-date-picker-overlay-content\n * `years` | Years scroller | vaadin-date-picker-overlay-content\n * `toolbar` | Footer bar with buttons | vaadin-date-picker-overlay-content\n * `today-button` | Today button | vaadin-date-picker-overlay-content\n * `cancel-button` | Cancel button | vaadin-date-picker-overlay-content\n * `month` | Month calendar | vaadin-date-picker-overlay-content\n * `year-number` | Year number | vaadin-date-picker-overlay-content\n * `year-separator` | Year separator | vaadin-date-picker-overlay-content\n * `month-header` | Month title | vaadin-month-calendar\n * `weekdays` | Weekday container | vaadin-month-calendar\n * `weekday` | Weekday element | vaadin-month-calendar\n * `week-numbers` | Week numbers container | vaadin-month-calendar\n * `week-number` | Week number element | vaadin-month-calendar\n * `date` | Date element | vaadin-month-calendar\n *\n * See [ThemableMixin – how to apply styles for shadow parts](https://github.com/vaadin/vaadin-themable-mixin/wiki)\n *\n * The following state attributes are available for styling:\n *\n * Attribute    | Description | Part name\n * -------------|-------------|------------\n * `invalid` | Set when the element is invalid | :host\n * `opened` | Set when the date selector overlay is opened | :host\n * `readonly` | Set when the element is readonly | :host\n * `disabled` | Set when the element is disabled | :host\n * `today` | Set on the date corresponding to the current day | date\n * `focused` | Set on the focused date | date\n * `disabled` | Set on the date out of the allowed range | date\n * `selected` | Set on the selected date | date\n *\n * If you want to replace the default input field with a custom implementation, you should use the\n * [`<vaadin-date-picker-light>`](#vaadin-date-picker-light) element.\n *\n * In addition to `<vaadin-date-picker>` itself, the following internal\n * components are themable:\n *\n * - `<vaadin-text-field>`\n * - `<vaadin-date-picker-overlay>`\n * - `<vaadin-date-picker-overlay-content>`\n * - `<vaadin-month-calendar>`\n *\n * Note: the `theme` attribute value set on `<vaadin-date-picker>` is\n * propagated to the internal themable components listed above.\n *\n * @memberof Vaadin\n * @mixes Vaadin.ElementMixin\n * @mixes Vaadin.ControlStateMixin\n * @mixes Vaadin.ThemableMixin\n * @mixes Vaadin.ThemePropertyMixin\n * @mixes Vaadin.DatePickerMixin\n * @mixes Polymer.GestureEventListeners\n * @demo demo/index.html\n */\nclass DatePickerElement extends\n  ElementMixin(\n    ControlStateMixin(\n      ThemableMixin(\n        ThemePropertyMixin(\n          DatePickerMixin(\n            GestureEventListeners(PolymerElement)))))) {\n  static get template() {\n    return html`\n    <style>\n      :host {\n        display: inline-block;\n      }\n\n      :host([hidden]) {\n        display: none !important;\n      }\n\n      :host([opened]) {\n        pointer-events: auto;\n      }\n\n      [part=\"text-field\"] {\n        width: 100%;\n        min-width: 0;\n      }\n\n      :host([disabled]) [part=\"clear-button\"],\n      :host([readonly]) [part=\"clear-button\"],\n      :host(:not([has-value])) [part=\"clear-button\"] {\n        display: none;\n      }\n    </style>\n\n\n    <vaadin-text-field id=\"input\" role=\"application\" autocomplete=\"off\" on-focus=\"_focus\" value=\"{{_userInputValue}}\" invalid=\"[[invalid]]\" label=\"[[label]]\" name=\"[[name]]\" placeholder=\"[[placeholder]]\" required=\"[[required]]\" disabled=\"[[disabled]]\" readonly=\"[[readonly]]\" error-message=\"[[errorMessage]]\" aria-label\\$=\"[[label]]\" part=\"text-field\" theme\\$=\"[[theme]]\">\n      <slot name=\"prefix\" slot=\"prefix\"></slot>\n      <div part=\"clear-button\" slot=\"suffix\" on-touchend=\"_clearTouchend\" on-click=\"_clear\" role=\"button\" aria-label\\$=\"[[i18n.clear]]\"></div>\n      <div part=\"toggle-button\" slot=\"suffix\" on-tap=\"_toggle\" role=\"button\" aria-label\\$=\"[[i18n.calendar]]\" aria-expanded\\$=\"[[_getAriaExpanded(opened)]]\"></div>\n    </vaadin-text-field>\n\n    <vaadin-date-picker-overlay id=\"overlay\" fullscreen\\$=\"[[_fullscreen]]\" theme\\$=\"[[__getOverlayTheme(theme, _overlayInitialized)]]\" on-vaadin-overlay-open=\"_onOverlayOpened\" on-vaadin-overlay-close=\"_onOverlayClosed\" disable-upgrade=\"\">\n      <template>\n        <vaadin-date-picker-overlay-content id=\"overlay-content\" i18n=\"[[i18n]]\" fullscreen\\$=\"[[_fullscreen]]\" label=\"[[label]]\" selected-date=\"{{_selectedDate}}\" slot=\"dropdown-content\" focused-date=\"{{_focusedDate}}\" show-week-numbers=\"[[showWeekNumbers]]\" min-date=\"[[_minDate]]\" max-date=\"[[_maxDate]]\" role=\"dialog\" on-date-tap=\"_close\" part=\"overlay-content\" theme\\$=\"[[__getOverlayTheme(theme, _overlayInitialized)]]\">\n        </vaadin-date-picker-overlay-content>\n      </template>\n    </vaadin-date-picker-overlay>\n\n    <iron-media-query query=\"[[_fullscreenMediaQuery]]\" query-matches=\"{{_fullscreen}}\">\n    </iron-media-query>\n`;\n  }\n\n  static get is() {\n    return 'vaadin-date-picker';\n  }\n\n  static get version() {\n    return '3.3.4';\n  }\n\n  static get properties() {\n    return {\n      /**\n       * Set to true to disable this element.\n       */\n      disabled: {\n        type: Boolean,\n        value: false,\n        reflectToAttribute: true\n      },\n\n      /**\n       * The error message to display when the input is invalid.\n       */\n      errorMessage: String,\n\n      /**\n       * A placeholder string in addition to the label. If this is set, the label will always float.\n       */\n      placeholder: String,\n\n      /**\n       * Set to true to make this element read-only.\n       */\n      readonly: {\n        type: Boolean,\n        value: false,\n        reflectToAttribute: true\n      },\n\n      /**\n       * This property is set to true when the control value invalid.\n       */\n      invalid: {\n        type: Boolean,\n        reflectToAttribute: true,\n        notify: true,\n        value: false\n      },\n\n      _userInputValue: String\n    };\n  }\n\n  static get observers() {\n    return [\n      '_userInputValueChanged(_userInputValue)'\n    ];\n  }\n\n  ready() {\n    super.ready();\n\n    // In order to have synchronized invalid property, we need to use the same validate logic.\n    afterNextRender(this, () => this._inputElement.validate = () => {});\n  }\n\n  _onVaadinOverlayClose(e) {\n    if (this._openedWithFocusRing && this.hasAttribute('focused')) {\n      this.focusElement.setAttribute('focus-ring', '');\n    } else if (!this.hasAttribute('focused')) {\n      this.focusElement.blur();\n    }\n    if (e.detail.sourceEvent && e.detail.sourceEvent.composedPath().indexOf(this) !== -1) {\n      e.preventDefault();\n    }\n  }\n\n  _clear() {\n    this.__dispatchChange = true;\n    this.value = '';\n    this.validate();\n    this.focus();\n    prevent('tap');\n    this.__dispatchChange = false;\n  }\n\n  _clearTouchend(e) {\n    this._clear();\n    e.preventDefault();\n    prevent('tap');\n  }\n\n  _toggle(e) {\n    e.stopPropagation();\n    this[(this._overlayInitialized && this.$.overlay.opened) ? 'close' : 'open']();\n  }\n\n  _input() {\n    return this.$.input;\n  }\n\n  set _inputValue(value) {\n    this._inputElement.value = value;\n  }\n\n  get _inputValue() {\n    return this._inputElement.value;\n  }\n\n  _getAriaExpanded(opened) {\n    return Boolean(opened).toString();\n  }\n\n  /**\n   * Focussable element used by vaadin-control-state-mixin\n   */\n  get focusElement() {\n    return this._input() || this;\n  }\n}\n\ncustomElements.define(DatePickerElement.is, DatePickerElement);\n\nexport { DatePickerElement };\n","/**\n@license\nCopyright (c) 2017 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport { timeOut } from '@polymer/polymer/lib/utils/async.js';\nimport { Debouncer } from '@polymer/polymer/lib/utils/debounce.js';\nimport { flush } from '@polymer/polymer/lib/utils/flush.js';\nimport { templatize } from '@polymer/polymer/lib/utils/templatize.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { afterNextRender } from '@polymer/polymer/lib/utils/render-status.js';\n/**\n * @memberof Vaadin\n * @private\n */\nclass InfiniteScrollerElement extends PolymerElement {\n  static get template() {\n    return html`\n    <style>\n      :host {\n        display: block;\n        overflow: hidden;\n        height: 500px;\n      }\n\n      #scroller {\n        position: relative;\n        height: 100%;\n        overflow: auto;\n        outline: none;\n        margin-right: -40px;\n        -webkit-overflow-scrolling: touch;\n        -ms-overflow-style: none;\n        overflow-x: hidden;\n      }\n\n      #scroller.notouchscroll {\n        -webkit-overflow-scrolling: auto;\n      }\n\n      #scroller::-webkit-scrollbar {\n        display: none;\n      }\n\n      .buffer {\n        position: absolute;\n        width: var(--vaadin-infinite-scroller-buffer-width, 100%);\n        box-sizing: border-box;\n        padding-right: 40px;\n        top: var(--vaadin-infinite-scroller-buffer-offset, 0);\n        animation: fadein 0.2s;\n      }\n\n      @keyframes fadein {\n        from { opacity: 0; }\n        to { opacity: 1; }\n      }\n    </style>\n\n    <div id=\"scroller\" on-scroll=\"_scroll\">\n      <div class=\"buffer\"></div>\n      <div class=\"buffer\"></div>\n      <div id=\"fullHeight\"></div>\n    </div>\n`;\n  }\n\n  static get is() {\n    return 'vaadin-infinite-scroller';\n  }\n\n  static get properties() {\n    return {\n\n      /**\n       * Count of individual items in each buffer.\n       * The scroller has 2 buffers altogether so bufferSize of 20\n       * will result in 40 buffered DOM items in total.\n       * Changing after initialization not supported.\n       */\n      bufferSize: {\n        type: Number,\n        value: 20\n      },\n\n      /**\n       * The amount of initial scroll top. Needed in order for the\n       * user to be able to scroll backwards.\n       */\n      _initialScroll: {\n        value: 500000\n      },\n\n      /**\n       * The index/position mapped at _initialScroll point.\n       */\n      _initialIndex: {\n        value: 0\n      },\n\n      _buffers: Array,\n\n      _preventScrollEvent: Boolean,\n\n      _mayHaveMomentum: Boolean,\n\n      _initialized: Boolean,\n\n      active: {\n        type: Boolean,\n        observer: '_activated'\n      }\n    };\n  }\n\n  ready() {\n    super.ready();\n\n    this._buffers = Array.prototype.slice.call(this.root.querySelectorAll('.buffer'));\n\n    this.$.fullHeight.style.height = this._initialScroll * 2 + 'px';\n\n    var tpl = this.querySelector('template');\n    this._TemplateClass = templatize(tpl, this, {\n      forwardHostProp: function(prop, value) {\n        if (prop !== 'index') {\n          this._buffers.forEach(buffer => {\n            [].forEach.call(buffer.children, insertionPoint => {\n              insertionPoint._itemWrapper.instance[prop] = value;\n            });\n          });\n        }\n      }\n    });\n\n    // Firefox interprets elements with overflow:auto as focusable\n    // https://bugzilla.mozilla.org/show_bug.cgi?id=1069739\n    var isFirefox = navigator.userAgent.toLowerCase().indexOf('firefox') > -1;\n    if (isFirefox) {\n      this.$.scroller.tabIndex = -1;\n    }\n  }\n\n  _activated(active) {\n    if (active && !this._initialized) {\n      this._createPool();\n      this._initialized = true;\n    }\n  }\n\n  _finishInit() {\n    if (!this._initDone) {\n      // Once the first set of items start fading in, stamp the rest\n      this._buffers.forEach(buffer => {\n        [].forEach.call(buffer.children,\n          insertionPoint => this._ensureStampedInstance(insertionPoint._itemWrapper));\n      }, this);\n\n      if (!this._buffers[0].translateY) {\n        this._reset();\n      }\n\n      this._initDone = true;\n    }\n  }\n\n  _translateBuffer(up) {\n    var index = up ? 1 : 0;\n    this._buffers[index].translateY = this._buffers[(index ? 0 : 1)].translateY + this._bufferHeight * (index ? -1 : 1);\n    this._buffers[index].style.transform = 'translate3d(0, ' + this._buffers[index].translateY + 'px, 0)';\n    this._buffers[index].updated = false;\n    this._buffers.reverse();\n  }\n\n  _scroll() {\n    if (this._scrollDisabled) {\n      return;\n    }\n\n    var scrollTop = this.$.scroller.scrollTop;\n    if (scrollTop < this._bufferHeight || scrollTop > this._initialScroll * 2 - this._bufferHeight) {\n      // Scrolled near the end/beginning of the scrollable area -> reset.\n      this._initialIndex = ~~this.position;\n      this._reset();\n    }\n\n    // Check if we scrolled enough to translate the buffer positions.\n    var bufferOffset = this.root.querySelector('.buffer').offsetTop;\n    var upperThresholdReached = scrollTop > this._buffers[1].translateY + this.itemHeight + bufferOffset;\n    var lowerThresholdReached = scrollTop < this._buffers[0].translateY + this.itemHeight + bufferOffset;\n\n    if (upperThresholdReached || lowerThresholdReached) {\n      this._translateBuffer(lowerThresholdReached);\n      this._updateClones();\n    }\n\n    if (!this._preventScrollEvent) {\n      this.dispatchEvent(new CustomEvent('custom-scroll', {bubbles: false, composed: true}));\n      this._mayHaveMomentum = true;\n    }\n    this._preventScrollEvent = false;\n\n    this._debouncerScrollFinish = Debouncer.debounce(this._debouncerScrollFinish,\n      timeOut.after(200), () => {\n        var scrollerRect = this.$.scroller.getBoundingClientRect();\n        if (!this._isVisible(this._buffers[0], scrollerRect) && !this._isVisible(this._buffers[1], scrollerRect)) {\n          this.position = this.position;\n        }\n      });\n  }\n\n  /**\n   * Current scroller position as index. Can be a fractional number.\n   *\n   * @type {Number}\n   */\n  set position(index) {\n    this._preventScrollEvent = true;\n    if (index > this._firstIndex && index < this._firstIndex + this.bufferSize * 2) {\n      this.$.scroller.scrollTop = this.itemHeight * (index - this._firstIndex) + this._buffers[0].translateY;\n    } else {\n      this._initialIndex = ~~index;\n      this._reset();\n      this._scrollDisabled = true;\n      this.$.scroller.scrollTop += index % 1 * this.itemHeight;\n      this._scrollDisabled = false;\n    }\n\n    if (this._mayHaveMomentum) {\n      // Stop the possible iOS Safari momentum with -webkit-overflow-scrolling: auto;\n      this.$.scroller.classList.add('notouchscroll');\n      this._mayHaveMomentum = false;\n\n      setTimeout(() => {\n        // Restore -webkit-overflow-scrolling: touch; after a small delay.\n        this.$.scroller.classList.remove('notouchscroll');\n      }, 10);\n    }\n\n  }\n\n  /**\n   * @private\n   */\n  get position() {\n    return (this.$.scroller.scrollTop - this._buffers[0].translateY) / this.itemHeight + this._firstIndex;\n  }\n\n  get itemHeight() {\n    if (!this._itemHeightVal) {\n      if (!(window.ShadyCSS && window.ShadyCSS.nativeCss)) {\n        this.updateStyles();\n      }\n\n      const itemHeight = window.ShadyCSS\n        ? window.ShadyCSS.getComputedStyleValue(this, '--vaadin-infinite-scroller-item-height')\n        : getComputedStyle(this).getPropertyValue('--vaadin-infinite-scroller-item-height');\n      // Use background-position temp inline style for unit conversion\n      const tmpStyleProp = 'background-position';\n      this.$.fullHeight.style.setProperty(tmpStyleProp, itemHeight);\n      const itemHeightPx = getComputedStyle(this.$.fullHeight).getPropertyValue(tmpStyleProp);\n      this.$.fullHeight.style.removeProperty(tmpStyleProp);\n      this._itemHeightVal = parseFloat(itemHeightPx);\n    }\n\n    return this._itemHeightVal;\n  }\n\n  get _bufferHeight() {\n    return this.itemHeight * this.bufferSize;\n  }\n\n  _reset() {\n    this._scrollDisabled = true;\n    this.$.scroller.scrollTop = this._initialScroll;\n    this._buffers[0].translateY = this._initialScroll - this._bufferHeight;\n    this._buffers[1].translateY = this._initialScroll;\n    this._buffers.forEach(buffer => {\n      buffer.style.transform = 'translate3d(0, ' + buffer.translateY + 'px, 0)';\n    });\n    this._buffers[0].updated = this._buffers[1].updated = false;\n    this._updateClones(true);\n\n    this._debouncerUpdateClones = Debouncer.debounce(\n      this._debouncerUpdateClones,\n      timeOut.after(200), () => {\n        this._buffers[0].updated = this._buffers[1].updated = false;\n        this._updateClones();\n      });\n\n    this._scrollDisabled = false;\n  }\n\n  _createPool() {\n    var container = this.getBoundingClientRect();\n    this._buffers.forEach(buffer => {\n      for (var i = 0; i < this.bufferSize; i++) {\n        const itemWrapper = document.createElement('div');\n        itemWrapper.style.height = this.itemHeight + 'px';\n        itemWrapper.instance = {};\n\n        const contentId = InfiniteScrollerElement._contentIndex = InfiniteScrollerElement._contentIndex + 1 || 0;\n        const slotName = 'vaadin-infinite-scroller-item-content-' + contentId;\n\n        const insertionPoint = document.createElement('slot');\n        insertionPoint.setAttribute('name', slotName);\n        insertionPoint._itemWrapper = itemWrapper;\n        buffer.appendChild(insertionPoint);\n\n        itemWrapper.setAttribute('slot', slotName);\n        this.appendChild(itemWrapper);\n\n        // This is needed by IE\n        flush();\n\n        setTimeout(() => {\n          // Only stamp the visible instances first\n          if (this._isVisible(itemWrapper, container)) {\n            this._ensureStampedInstance(itemWrapper);\n          }\n        }, 1); // Wait for first reset\n      }\n    }, this);\n\n    setTimeout(() => {\n      afterNextRender(this, this._finishInit.bind(this));\n    }, 1);\n  }\n\n  _ensureStampedInstance(itemWrapper) {\n    if (itemWrapper.firstElementChild) {\n      return;\n    }\n\n    var tmpInstance = itemWrapper.instance;\n\n    itemWrapper.instance = new this._TemplateClass({});\n    itemWrapper.appendChild(itemWrapper.instance.root);\n\n    Object.keys(tmpInstance).forEach(prop => {\n      itemWrapper.instance.set(prop, tmpInstance[prop]);\n    });\n  }\n\n  _updateClones(viewPortOnly) {\n    this._firstIndex = ~~((this._buffers[0].translateY - this._initialScroll) / this.itemHeight) + this._initialIndex;\n\n    var scrollerRect = viewPortOnly ? this.$.scroller.getBoundingClientRect() : undefined;\n    this._buffers.forEach((buffer, bufferIndex) => {\n      if (!buffer.updated) {\n        var firstIndex = this._firstIndex + this.bufferSize * bufferIndex;\n\n        [].forEach.call(buffer.children, (insertionPoint, index) => {\n          const itemWrapper = insertionPoint._itemWrapper;\n          if (!viewPortOnly || this._isVisible(itemWrapper, scrollerRect)) {\n            itemWrapper.instance.index = firstIndex + index;\n          }\n        });\n        buffer.updated = true;\n      }\n    }, this);\n  }\n\n  _isVisible(element, container) {\n    var rect = element.getBoundingClientRect();\n    return rect.bottom > container.top && rect.top < container.bottom;\n  }\n}\n\ncustomElements.define(InfiniteScrollerElement.is, InfiniteScrollerElement);\n","/**\n@license\nCopyright (c) 2017 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport '@polymer/polymer/lib/elements/dom-repeat.js';\nimport { GestureEventListeners } from '@polymer/polymer/lib/mixins/gesture-event-listeners.js';\nimport { DatePickerHelper } from './vaadin-date-picker-helper.js';\nimport { ThemableMixin } from '@vaadin/vaadin-themable-mixin/vaadin-themable-mixin.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\n/**\n * @memberof Vaadin\n * @private\n */\nclass MonthCalendarElement extends ThemableMixin(GestureEventListeners(PolymerElement)) {\n  static get template() {\n    return html`\n    <style>\n      :host {\n        display: block;\n      }\n\n      [part=\"weekdays\"],\n      #days {\n        display: flex;\n        flex-wrap: wrap;\n        flex-grow: 1;\n      }\n\n      #days-container,\n      #weekdays-container {\n        display: flex;\n      }\n\n      [part=\"week-numbers\"] {\n        display: flex;\n        flex-direction: column;\n        justify-content: space-between;\n        flex-shrink: 0;\n      }\n\n      [part=\"week-numbers\"][hidden],\n      [part=\"weekday\"][hidden] {\n        display: none;\n      }\n\n      [part=\"weekday\"],\n      [part=\"date\"] {\n        /* Would use calc(100% / 7) but it doesn't work nice on IE */\n        width: 14.285714286%;\n      }\n\n      [part=\"weekday\"]:empty,\n      [part=\"week-numbers\"] {\n        width: 12.5%;\n        flex-shrink: 0;\n      }\n    </style>\n\n    <div part=\"month-header\" role=\"heading\">[[_getTitle(month, i18n.monthNames)]]</div>\n    <div id=\"monthGrid\" on-tap=\"_handleTap\" on-touchend=\"_preventDefault\" on-touchstart=\"_onMonthGridTouchStart\">\n      <div id=\"weekdays-container\">\n        <div hidden=\"[[!_showWeekSeparator(showWeekNumbers, i18n.firstDayOfWeek)]]\" part=\"weekday\"></div>\n        <div part=\"weekdays\">\n          <template is=\"dom-repeat\" items=\"[[_getWeekDayNames(i18n.weekdays, i18n.weekdaysShort, showWeekNumbers, i18n.firstDayOfWeek)]]\">\n            <div part=\"weekday\" role=\"heading\" aria-label\\$=\"[[item.weekDay]]\">[[item.weekDayShort]]</div>\n          </template>\n        </div>\n      </div>\n      <div id=\"days-container\">\n        <div part=\"week-numbers\" hidden=\"[[!_showWeekSeparator(showWeekNumbers, i18n.firstDayOfWeek)]]\">\n          <template is=\"dom-repeat\" items=\"[[_getWeekNumbers(_days)]]\">\n            <div part=\"week-number\" role=\"heading\" aria-label\\$=\"[[i18n.week]] [[item]]\">[[item]]</div>\n          </template>\n        </div>\n        <div id=\"days\">\n          <template is=\"dom-repeat\" items=\"[[_days]]\">\n            <div part=\"date\" today\\$=\"[[_isToday(item)]]\" selected\\$=\"[[_dateEquals(item, selectedDate)]]\" focused\\$=\"[[_dateEquals(item, focusedDate)]]\" date=\"[[item]]\" disabled\\$=\"[[!_dateAllowed(item, minDate, maxDate)]]\" role\\$=\"[[_getRole(item)]]\" aria-label\\$=\"[[_getAriaLabel(item)]]\" aria-disabled\\$=\"[[_getAriaDisabled(item, minDate, maxDate)]]\">[[_getDate(item)]]</div>\n          </template>\n        </div>\n      </div>\n    </div>\n`;\n  }\n\n  static get is() {\n    return 'vaadin-month-calendar';\n  }\n\n  static get properties() {\n    return {\n      /**\n       * A `Date` object defining the month to be displayed. Only year and\n       * month properties are actually used.\n       */\n      month: {\n        type: Date,\n        value: new Date()\n      },\n\n      /**\n       * A `Date` object for the currently selected date.\n       */\n      selectedDate: {\n        type: Date,\n        notify: true\n      },\n\n      /**\n       * A `Date` object for the currently focused date.\n       */\n      focusedDate: Date,\n\n      showWeekNumbers: {\n        type: Boolean,\n        value: false\n      },\n\n      i18n: {\n        type: Object\n      },\n\n      /**\n       * Flag stating whether taps on the component should be ignored.\n       */\n      ignoreTaps: Boolean,\n\n      _notTapping: Boolean,\n\n      /**\n       * The earliest date that can be selected. All earlier dates will be disabled.\n       */\n      minDate: {\n        type: Date,\n        value: null\n      },\n\n      /**\n       * The latest date that can be selected. All later dates will be disabled.\n       */\n      maxDate: {\n        type: Date,\n        value: null\n      },\n\n      _days: {\n        type: Array,\n        computed: '_getDays(month, i18n.firstDayOfWeek, minDate, maxDate)'\n      },\n\n      disabled: {\n        type: Boolean,\n        reflectToAttribute: true,\n        computed: '_isDisabled(month, minDate, maxDate)'\n      }\n    };\n  }\n\n  static get observers() {\n    return [\n      '_showWeekNumbersChanged(showWeekNumbers, i18n.firstDayOfWeek)'\n    ];\n  }\n\n  _dateEquals(date1, date2) {\n    return DatePickerHelper._dateEquals(date1, date2);\n  }\n\n  _dateAllowed(date, min, max) {\n    return DatePickerHelper._dateAllowed(date, min, max);\n  }\n\n  /* Returns true if all the dates in the month are out of the allowed range */\n  _isDisabled(month, minDate, maxDate) {\n    // First day of the month\n    var firstDate = new Date(0, 0);\n    firstDate.setFullYear(month.getFullYear());\n    firstDate.setMonth(month.getMonth());\n    firstDate.setDate(1);\n\n    // Last day of the month\n    var lastDate = new Date(0, 0);\n    lastDate.setFullYear(month.getFullYear());\n    lastDate.setMonth(month.getMonth() + 1);\n    lastDate.setDate(-1);\n\n    if ((minDate && maxDate)\n      && minDate.getMonth() === maxDate.getMonth()\n      && minDate.getMonth() === month.getMonth()\n      && maxDate.getDate() - minDate.getDate() >= 0) {\n      return false;\n    }\n\n    return !this._dateAllowed(firstDate, minDate, maxDate)\n      && !this._dateAllowed(lastDate, minDate, maxDate);\n  }\n\n  _getTitle(month, monthNames) {\n    if (month === undefined || monthNames === undefined) {\n      return;\n    }\n    return this.i18n.formatTitle(monthNames[month.getMonth()], month.getFullYear());\n  }\n\n  _onMonthGridTouchStart() {\n    this._notTapping = false;\n    setTimeout(() => this._notTapping = true, 300);\n  }\n\n  _dateAdd(date, delta) {\n    date.setDate(date.getDate() + delta);\n  }\n\n  _applyFirstDayOfWeek(weekDayNames, firstDayOfWeek) {\n    if (weekDayNames === undefined || firstDayOfWeek === undefined) {\n      return;\n    }\n\n    return weekDayNames.slice(firstDayOfWeek).concat(weekDayNames.slice(0, firstDayOfWeek));\n  }\n\n  _getWeekDayNames(weekDayNames, weekDayNamesShort, showWeekNumbers, firstDayOfWeek) {\n    if (weekDayNames === undefined || weekDayNamesShort === undefined ||\n      showWeekNumbers === undefined || firstDayOfWeek === undefined) {\n      return;\n    }\n    weekDayNames = this._applyFirstDayOfWeek(weekDayNames, firstDayOfWeek);\n    weekDayNamesShort = this._applyFirstDayOfWeek(weekDayNamesShort, firstDayOfWeek);\n    weekDayNames = weekDayNames.map((day, index) => {\n      return {\n        weekDay: day,\n        weekDayShort: weekDayNamesShort[index]\n      };\n    });\n\n    return weekDayNames;\n  }\n\n  _getDate(date) {\n    return date ? date.getDate() : '';\n  }\n\n  _showWeekNumbersChanged(showWeekNumbers, firstDayOfWeek) {\n    if (showWeekNumbers && firstDayOfWeek === 1) {\n      this.setAttribute('week-numbers', '');\n    } else {\n      this.removeAttribute('week-numbers');\n    }\n  }\n\n  _showWeekSeparator(showWeekNumbers, firstDayOfWeek) {\n    // Currently only supported for locales that start the week on Monday.\n    return showWeekNumbers && firstDayOfWeek === 1;\n  }\n\n  _isToday(date) {\n    return this._dateEquals(new Date(), date);\n  }\n\n  _getDays(month, firstDayOfWeek) {\n    if (month === undefined || firstDayOfWeek === undefined) {\n      return;\n    }\n    // First day of the month (at midnight).\n    var date = new Date(0, 0);\n    date.setFullYear(month.getFullYear());\n    date.setMonth(month.getMonth());\n    date.setDate(1);\n\n    // Rewind to first day of the week.\n    while (date.getDay() !== firstDayOfWeek) {\n      this._dateAdd(date, -1);\n    }\n\n    var days = [];\n    var startMonth = date.getMonth();\n    var targetMonth = month.getMonth();\n    while (date.getMonth() === targetMonth || date.getMonth() === startMonth) {\n      days.push(date.getMonth() === targetMonth ? new Date(date.getTime()) : null);\n\n      // Advance to next day.\n      this._dateAdd(date, 1);\n    }\n    return days;\n  }\n\n  _getWeekNumber(date, days) {\n    if (date === undefined || days === undefined) {\n      return;\n    }\n\n    if (!date) {\n      // Get the first non-null date from the days array.\n      date = days.reduce((acc, d) => {\n        return !acc && d ? d : acc;\n      });\n    }\n\n    return DatePickerHelper._getISOWeekNumber(date);\n  }\n\n  _getWeekNumbers(dates) {\n    return dates\n      .map(date => this._getWeekNumber(date, dates))\n      .filter((week, index, arr) => arr.indexOf(week) === index);\n  }\n\n  _handleTap(e) {\n    if (!this.ignoreTaps && !this._notTapping && e.target.date && !e.target.hasAttribute('disabled')) {\n      this.selectedDate = e.target.date;\n      this.dispatchEvent(new CustomEvent('date-tap', {bubbles: true, composed: true}));\n    }\n  }\n\n  _preventDefault(e) {\n    e.preventDefault();\n  }\n\n  _getRole(date) {\n    return date ? 'button' : 'presentation';\n  }\n\n  _getAriaLabel(date) {\n    if (!date) {\n      return '';\n    }\n\n    var ariaLabel = this._getDate(date) + ' ' +\n      this.i18n.monthNames[date.getMonth()] + ' ' +\n      date.getFullYear() + ', ' +\n      this.i18n.weekdays[date.getDay()];\n\n    if (this._isToday(date)) {\n      ariaLabel += ', ' + this.i18n.today;\n    }\n\n    return ariaLabel;\n  }\n\n  _getAriaDisabled(date, min, max) {\n    if (date === undefined || min === undefined || max === undefined) {\n      return;\n    }\n    return this._dateAllowed(date, min, max) ? 'false' : 'true';\n  }\n}\n\ncustomElements.define(MonthCalendarElement.is, MonthCalendarElement);\n","import '@vaadin/vaadin-lumo-styles/color.js';\nimport '@vaadin/vaadin-lumo-styles/sizing.js';\nimport '@vaadin/vaadin-lumo-styles/spacing.js';\nimport '@vaadin/vaadin-lumo-styles/style.js';\nimport '@vaadin/vaadin-lumo-styles/typography.js';\nimport '@vaadin/vaadin-button/theme/lumo/vaadin-button.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\n\nconst $_documentContainer = html`<dom-module id=\"lumo-date-picker-overlay-content\" theme-for=\"vaadin-date-picker-overlay-content\">\n  <template>\n    <style>\n      :host {\n        position: relative;\n        background-color: transparent;\n        /* Background for the year scroller, placed here as we are using a mask image on the actual years part */\n        background-image: linear-gradient(var(--lumo-shade-5pct), var(--lumo-shade-5pct));\n        background-size: 57px 100%;\n        background-position: top right;\n        background-repeat: no-repeat;\n        cursor: default;\n      }\n\n      /* Month scroller */\n\n      [part=\"months\"] {\n        /* Month calendar height:\n              header height + margin-bottom\n            + weekdays height + margin-bottom\n            + date cell heights\n            + small margin between month calendars\n        */\n        --vaadin-infinite-scroller-item-height:\n          calc(\n              var(--lumo-font-size-l) + var(--lumo-space-m)\n            + var(--lumo-font-size-xs) + var(--lumo-space-s)\n            + var(--lumo-size-m) * 6\n            + var(--lumo-space-s)\n          );\n        --vaadin-infinite-scroller-buffer-offset: 20%;\n        -webkit-mask-image: linear-gradient(transparent, #000 10%, #000 85%, transparent);\n        mask-image: linear-gradient(transparent, #000 10%, #000 85%, transparent);\n        position: relative;\n        margin-right: 57px;\n      }\n\n      /* Year scroller */\n\n      [part=\"years\"] {\n        /* TODO get rid of fixed magic number */\n        --vaadin-infinite-scroller-buffer-width: 97px;\n        width: 57px;\n        height: auto;\n        top: 0;\n        bottom: 0;\n        font-size: var(--lumo-font-size-s);\n        box-shadow: inset 2px 0 4px 0 var(--lumo-shade-5pct);\n        -webkit-mask-image: linear-gradient(transparent, #000 35%, #000 65%, transparent);\n        mask-image: linear-gradient(transparent, #000 35%, #000 65%, transparent);\n      }\n\n      [part=\"year-number\"],\n      [part=\"year-separator\"] {\n        opacity: 0.5;\n        transition: 0.2s opacity;\n      }\n\n      [part=\"years\"]:hover [part=\"year-number\"],\n      [part=\"years\"]:hover [part=\"year-separator\"] {\n        opacity: 1;\n      }\n\n      /* TODO unsupported selector */\n      #scrollers {\n        position: static;\n        display: block;\n      }\n\n      /* TODO unsupported selector, should fix this in vaadin-date-picker that it adapts to the\n       * width of the year scroller */\n      #scrollers[desktop] [part=\"months\"] {\n        right: auto;\n      }\n\n      /* Year scroller position indicator */\n      [part=\"years\"]::before {\n        border: none;\n        width: 1em;\n        height: 1em;\n        background-color: var(--lumo-base-color);\n        background-image: linear-gradient(var(--lumo-tint-5pct), var(--lumo-tint-5pct));\n        transform: translate(-75%, -50%) rotate(45deg);\n        border-top-right-radius: calc(var(--lumo-border-radius) / 2);\n        box-shadow: 2px -2px 6px 0 var(--lumo-shade-5pct);\n        z-index: 1;\n      }\n\n      [part=\"year-number\"],\n      [part=\"year-separator\"] {\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        height: 50%;\n        transform: translateY(-50%);\n      }\n\n      [part=\"years\"] [part=\"year-separator\"]::after {\n        color: var(--lumo-disabled-text-color);\n        content: \"•\";\n      }\n\n      /* Current year */\n\n      [part=\"years\"] [part=\"year-number\"][current] {\n        color: var(--lumo-primary-text-color);\n      }\n\n      /* Toolbar (footer) */\n\n      [part=\"toolbar\"] {\n        padding: var(--lumo-space-s);\n        box-shadow: 0 -1px 0 0 var(--lumo-contrast-10pct);\n        border-bottom-left-radius: var(--lumo-border-radius);\n        margin-right: 57px;\n      }\n\n      @supports (mask-image: linear-gradient(#000, #000)) or (-webkit-mask-image: linear-gradient(#000, #000)) {\n        [part=\"toolbar\"] {\n          box-shadow: none;\n        }\n      }\n\n      /* Today and Cancel buttons */\n\n      /* TODO: Would be great if I could apply the \"tertiary\" theme from here instead of copying those styles */\n      [part=\"toolbar\"] [part\\$=\"button\"] {\n        background-color: transparent;\n        margin: 0;\n        min-width: 0;\n        padding: 0 0.75em;\n      }\n\n      /* Narrow viewport mode (fullscreen) */\n\n      :host([fullscreen]) [part=\"toolbar\"] {\n        order: -1;\n        background-color: var(--lumo-base-color);\n      }\n\n      :host([fullscreen]) [part=\"overlay-header\"] {\n        order: -2;\n        height: var(--lumo-size-m);\n        padding: var(--lumo-space-s);\n        position: absolute;\n        left: 0;\n        right: 0;\n        justify-content: center;\n      }\n\n      :host([fullscreen]) [part=\"toggle-button\"],\n      :host([fullscreen]) [part=\"clear-button\"],\n      [part=\"overlay-header\"] [part=\"label\"] {\n        display: none;\n      }\n\n      /* Very narrow screen (year scroller initially hidden) */\n\n      [part=\"years-toggle-button\"] {\n        position: relative;\n        right: auto;\n        display: flex;\n        align-items: center;\n        height: var(--lumo-size-s);\n        padding: 0 0.5em;\n        border-radius: var(--lumo-border-radius);\n        z-index: 3;\n        color: var(--lumo-primary-text-color);\n        font-weight: 500;\n        -webkit-font-smoothing: antialiased;\n        -moz-osx-font-smoothing: grayscale;\n      }\n\n      :host([years-visible]) [part=\"years-toggle-button\"] {\n        background-color: var(--lumo-primary-color);\n        color: var(--lumo-primary-contrast-color);\n      }\n\n      [part=\"years-toggle-button\"]::before {\n        content: none;\n      }\n\n      /* TODO magic number (same as used for iron-media-query in vaadin-date-picker-overlay-content) */\n      @media screen and (max-width: 374px) {\n        :host {\n          background-image: none;\n        }\n\n        [part=\"years\"] {\n          background-color: var(--lumo-shade-5pct);\n        }\n\n        [part=\"toolbar\"],\n        [part=\"months\"] {\n          margin-right: 0;\n        }\n\n        /* TODO make date-picker adapt to the width of the years part */\n        [part=\"years\"] {\n          --vaadin-infinite-scroller-buffer-width: 90px;\n          width: 50px;\n        }\n\n        :host([years-visible]) [part=\"months\"] {\n          padding-left: 50px;\n        }\n      }\n    </style>\n  </template>\n</dom-module>`;\n\ndocument.head.appendChild($_documentContainer.content);\n","import '@vaadin/vaadin-lumo-styles/sizing.js';\nimport '@vaadin/vaadin-lumo-styles/spacing.js';\nimport '@vaadin/vaadin-lumo-styles/mixins/menu-overlay.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\n\nconst $_documentContainer = html`<dom-module id=\"lumo-date-picker-overlay\" theme-for=\"vaadin-date-picker-overlay\">\n  <template>\n    <style include=\"lumo-menu-overlay\">\n      [part=\"overlay\"] {\n        /*\n        Width:\n            date cell widths\n          + month calendar side padding\n          + year scroller width\n        */\n        width:\n          calc(\n              var(--lumo-size-m) * 7\n            + var(--lumo-space-xs) * 2\n            + 57px\n          );\n        height: 100%;\n        max-height: calc(var(--lumo-size-m) * 14);\n        overflow: hidden;\n        -webkit-tap-highlight-color: transparent;\n      }\n\n      [part=\"content\"] {\n        padding: 0;\n        height: 100%;\n        overflow: hidden;\n        -webkit-mask-image: none;\n        mask-image: none;\n      }\n\n      @media (max-width: 420px), (max-height: 420px) {\n        [part=\"overlay\"] {\n          width: 100vw;\n          height: 70vh;\n          max-height: 70vh;\n        }\n      }\n    </style>\n  </template>\n</dom-module>`;\n\ndocument.head.appendChild($_documentContainer.content);\n","import '@vaadin/vaadin-lumo-styles/font-icons.js';\nimport '@vaadin/vaadin-lumo-styles/mixins/field-button.js';\nimport '@vaadin/vaadin-text-field/theme/lumo/vaadin-text-field.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\n\nconst $_documentContainer = html`<dom-module id=\"lumo-date-picker\" theme-for=\"vaadin-date-picker\">\n  <template>\n    <style include=\"lumo-field-button\">\n      :host {\n        outline: none;\n      }\n\n      [part=\"toggle-button\"]::before {\n        content: var(--lumo-icons-calendar);\n      }\n\n      [part=\"clear-button\"]::before {\n        content: var(--lumo-icons-cross);\n      }\n    </style>\n  </template>\n</dom-module>`;\n\ndocument.head.appendChild($_documentContainer.content);\n","import './vaadin-date-picker-overlay-styles.js';\nimport './vaadin-date-picker-overlay-content-styles.js';\nimport './vaadin-month-calendar-styles.js';\nimport './vaadin-date-picker-styles.js';\nimport '../../src/vaadin-date-picker.js';\n","import '@vaadin/vaadin-lumo-styles/color.js';\nimport '@vaadin/vaadin-lumo-styles/sizing.js';\nimport '@vaadin/vaadin-lumo-styles/spacing.js';\nimport '@vaadin/vaadin-lumo-styles/style.js';\nimport '@vaadin/vaadin-lumo-styles/typography.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\n\nconst $_documentContainer = html`<dom-module id=\"lumo-month-calendar\" theme-for=\"vaadin-month-calendar\">\n  <template>\n    <style>\n      :host {\n        -moz-user-select: none;\n        -ms-user-select: none;\n        -webkit-user-select: none;\n        -webkit-tap-highlight-color: transparent;\n        user-select: none;\n        font-size: var(--lumo-font-size-m);\n        color: var(--lumo-body-text-color);\n        text-align: center;\n        padding: 0 var(--lumo-space-xs);\n      }\n\n      /* Month header */\n\n      [part=\"month-header\"] {\n        color: var(--lumo-header-text-color);\n        font-size: var(--lumo-font-size-l);\n        line-height: 1;\n        font-weight: 500;\n        margin-bottom: var(--lumo-space-m);\n      }\n\n      /* Week days and numbers */\n\n      [part=\"weekdays\"],\n      [part=\"weekday\"],\n      [part=\"week-numbers\"] {\n        font-size: var(--lumo-font-size-xs);\n        line-height: 1;\n        color: var(--lumo-tertiary-text-color);\n      }\n\n      [part=\"weekdays\"] {\n        margin-bottom: var(--lumo-space-s);\n      }\n\n      /* TODO should have part=\"week-number\" for the cell in weekdays-container */\n      [part=\"weekday\"]:empty,\n      [part=\"week-numbers\"] {\n        width: var(--lumo-size-xs);\n      }\n\n      /* Date and week number cells */\n\n      [part=\"date\"],\n      [part=\"week-number\"] {\n        box-sizing: border-box;\n        display: inline-flex;\n        align-items: center;\n        justify-content: center;\n        height: var(--lumo-size-m);\n        position: relative;\n      }\n\n      [part=\"date\"] {\n        transition: color 0.1s;\n      }\n\n      /* Today date */\n\n      [part=\"date\"][today] {\n        color: var(--lumo-primary-text-color);\n      }\n\n      /* Focused date */\n\n      [part=\"date\"]::before {\n        content: \"\";\n        position: absolute;\n        z-index: -1;\n        top: 50%;\n        left: 50%;\n        transform: translate(-50%, -50%);\n        min-width: 2em;\n        min-height: 2em;\n        width: 80%;\n        height: 80%;\n        max-height: 100%;\n        max-width: 100%;\n        border-radius: var(--lumo-border-radius);\n      }\n\n      [part=\"date\"][focused]::before {\n        box-shadow: 0 0 0 2px var(--lumo-primary-color-50pct);\n      }\n\n      :host(:not([focused])) [part=\"date\"][focused]::before {\n        animation: vaadin-date-picker-month-calendar-focus-date 1.4s infinite;\n      }\n\n      @keyframes vaadin-date-picker-month-calendar-focus-date {\n        50% {\n          box-shadow: 0 0 0 2px transparent;\n        }\n      }\n\n      /* TODO should not rely on the role attribute */\n      [part=\"date\"][role=\"button\"]:not([disabled]):not([selected]):hover::before {\n        background-color: var(--lumo-primary-color-10pct);\n      }\n\n      [part=\"date\"][selected] {\n        color: var(--lumo-primary-contrast-color);\n      }\n\n      [part=\"date\"][selected]::before {\n        background-color: var(--lumo-primary-color);\n      }\n\n      [part=\"date\"][disabled] {\n        color: var(--lumo-disabled-text-color);\n      }\n\n      @media (pointer: coarse) {\n        [part=\"date\"]:hover:not([selected])::before,\n        [part=\"date\"][focused]:not([selected])::before {\n          display: none;\n        }\n\n        [part=\"date\"][role=\"button\"]:not([disabled]):active::before {\n          display: block;\n        }\n\n        [part=\"date\"][selected]::before {\n          box-shadow: none;\n        }\n      }\n\n      /* Disabled */\n\n      :host([disabled]) * {\n        color: var(--lumo-disabled-text-color) !important;\n      }\n    </style>\n  </template>\n</dom-module><custom-style>\n  <style>\n    @keyframes vaadin-date-picker-month-calendar-focus-date {\n      50% {\n        box-shadow: 0 0 0 2px transparent;\n      }\n    }\n  </style>\n</custom-style>`;\n\ndocument.head.appendChild($_documentContainer.content);\n","import './theme/lumo/vaadin-date-picker.js';\n","const DEV_MODE_CODE_REGEXP =\n  /\\/\\*\\*\\s+vaadin-dev-mode:start([\\s\\S]*)vaadin-dev-mode:end\\s+\\*\\*\\//i;\n\nfunction isMinified() {\n  function test() {\n    /** vaadin-dev-mode:start\n    return false;\n    vaadin-dev-mode:end **/\n    return true;\n  }\n  return uncommentAndRun(test);\n}\n\nfunction isDevelopmentMode() {\n  try {\n    return isForcedDevelopmentMode() || (isLocalhost() && !isMinified() && !isFlowProductionMode());\n  } catch (e) {\n    // Some error in this code, assume production so no further actions will be taken\n    return false;\n  }\n}\n\nfunction isForcedDevelopmentMode() {\n  return localStorage.getItem(\"vaadin.developmentmode.force\");\n}\n\nfunction isLocalhost() {\n  return ([\"localhost\",\"127.0.0.1\"].indexOf(window.location.hostname) >= 0);\n}\n\nfunction isFlowProductionMode() {\n  if (window.Vaadin && window.Vaadin.Flow && window.Vaadin.Flow.clients) {\n    const productionModeApps = Object.keys(window.Vaadin.Flow.clients)\n    .map(key => window.Vaadin.Flow.clients[key])\n    .filter(client => client.productionMode);\n    if (productionModeApps.length > 0) {\n      return true;\n    }\n  }\n  return false;\n}\n\nfunction uncommentAndRun(callback, args) {\n  if (typeof callback !== 'function') {\n    return;\n  }\n\n  const match = DEV_MODE_CODE_REGEXP.exec(callback.toString());\n  if (match) {\n    try {\n      // requires CSP: script-src 'unsafe-eval'\n      callback = new Function(match[1]);\n    } catch (e) {\n      // eat the exception\n      console.log('vaadin-development-mode-detector: uncommentAndRun() failed', e)\n    }\n  }\n\n  return callback(args);\n}\n\n// A guard against polymer-modulizer removing the window.Vaadin\n// initialization above.\nwindow['Vaadin'] = window['Vaadin'] || {};\n\n/**\n * Inspects the source code of the given `callback` function for\n * specially-marked _commented_ code. If such commented code is found in the\n * callback source, uncomments and runs that code instead of the callback\n * itself. Otherwise runs the callback as is.\n *\n * The optional arguments are passed into the callback / uncommented code,\n * the result is returned.\n *\n * See the `isMinified()` function source code in this file for an example.\n *\n */\nexport const runIfDevelopmentMode = function(callback, args) {\n  if (window.Vaadin.developmentMode) {\n    return uncommentAndRun(callback, args);\n  }\n};\n\nif (window.Vaadin.developmentMode === undefined) {\n  window.Vaadin.developmentMode = isDevelopmentMode();\n}\n","import { idlePeriod } from '@polymer/polymer/lib/utils/async.js';\nimport { Debouncer } from '@polymer/polymer/lib/utils/debounce.js';\nimport { enqueueDebouncer } from '@polymer/polymer/lib/utils/flush.js';\nimport { usageStatistics } from '@vaadin/vaadin-usage-statistics/vaadin-usage-statistics.js';\nif (!window.Vaadin) {\n  window['Vaadin'] = {};\n}\n\n/**\n * Array of Vaadin custom element classes that have been finalized.\n */\nwindow['Vaadin'].registrations = window.Vaadin.registrations || [];\n\n// Use the hack to prevent polymer-modulizer from converting to exports\nwindow['Vaadin'].developmentModeCallback = window.Vaadin.developmentModeCallback || {};\nwindow['Vaadin'].developmentModeCallback['vaadin-usage-statistics'] = function() {\n  if (usageStatistics) {\n    usageStatistics();\n  }\n};\n\nlet statsJob;\n\n/**\n * @polymerMixin\n */\nexport const ElementMixin = superClass => class VaadinElementMixin extends superClass {\n  /** @protected */\n  static _finalizeClass() {\n    super._finalizeClass();\n\n    // Registers a class prototype for telemetry purposes.\n    if (this.is) {\n      window.Vaadin.registrations.push(this);\n\n      if (window.Vaadin.developmentModeCallback) {\n        statsJob = Debouncer.debounce(statsJob,\n          idlePeriod, () => {\n            window.Vaadin.developmentModeCallback['vaadin-usage-statistics']();\n          }\n        );\n        enqueueDebouncer(statsJob);\n      }\n    }\n  }\n  ready() {\n    super.ready();\n    if (document.doctype === null) {\n      console.warn(\n        'Vaadin components require the \"standards mode\" declaration. Please add <!DOCTYPE html> to the HTML document.'\n      );\n    }\n  }\n};\n","import '../color.js';\nimport '../font-icons.js';\nimport '../sizing.js';\nimport '../style.js';\nconst $_documentContainer = document.createElement('template');\n\n$_documentContainer.innerHTML = `<dom-module id=\"lumo-field-button\">\n  <template>\n    <style>\n      [part\\$=\"button\"] {\n        flex: none;\n        width: 1em;\n        height: 1em;\n        line-height: 1;\n        font-size: var(--lumo-icon-size-m);\n        text-align: center;\n        color: var(--lumo-contrast-60pct);\n        transition: 0.2s color;\n        cursor: var(--lumo-clickable-cursor);\n      }\n\n      :host(:not([readonly])) [part\\$=\"button\"]:hover {\n        color: var(--lumo-contrast-90pct);\n      }\n\n      :host([disabled]) [part\\$=\"button\"],\n      :host([readonly]) [part\\$=\"button\"] {\n        color: var(--lumo-contrast-20pct);\n      }\n\n      [part\\$=\"button\"]::before {\n        font-family: \"lumo-icons\";\n        display: block;\n      }\n    </style>\n  </template>\n</dom-module>`;\n\ndocument.head.appendChild($_documentContainer.content);\n","import '../color.js';\nimport '../spacing.js';\nimport '../style.js';\nimport '../typography.js';\nconst $_documentContainer = document.createElement('template');\n\n$_documentContainer.innerHTML = `<dom-module id=\"lumo-required-field\">\n  <template>\n    <style>\n      [part=\"label\"] {\n        align-self: flex-start;\n        color: var(--lumo-secondary-text-color);\n        font-weight: 500;\n        font-size: var(--lumo-font-size-s);\n        margin-left: calc(var(--lumo-border-radius-m) / 4);\n        transition: color 0.2s;\n        line-height: 1;\n        padding-bottom: 0.5em;\n        overflow: hidden;\n        white-space: nowrap;\n        text-overflow: ellipsis;\n        position: relative;\n        max-width: 100%;\n        box-sizing: border-box;\n      }\n\n      :host([has-label])::before {\n        margin-top: calc(var(--lumo-font-size-s) * 1.5);\n      }\n\n      :host([has-label]) {\n        padding-top: var(--lumo-space-m);\n      }\n\n      :host([required]) [part=\"label\"] {\n        padding-right: 1em;\n      }\n\n      [part=\"label\"]::after {\n        content: var(--lumo-required-field-indicator, \"•\");\n        transition: opacity 0.2s;\n        opacity: 0;\n        color: var(--lumo-primary-text-color);\n        position: absolute;\n        right: 0;\n        width: 1em;\n        text-align: center;\n      }\n\n      :host([required]:not([has-value])) [part=\"label\"]::after {\n        opacity: 1;\n      }\n\n      :host([invalid]) [part=\"label\"]::after {\n        color: var(--lumo-error-text-color);\n      }\n\n      [part=\"error-message\"] {\n        margin-left: calc(var(--lumo-border-radius-m) / 4);\n        font-size: var(--lumo-font-size-xs);\n        line-height: var(--lumo-line-height-xs);\n        color: var(--lumo-error-text-color);\n        will-change: max-height;\n        transition: 0.4s max-height;\n        max-height: 5em;\n      }\n\n      /* Margin that doesn’t reserve space when there’s no error message */\n      [part=\"error-message\"]:not(:empty)::before,\n      [part=\"error-message\"]:not(:empty)::after {\n        content: \"\";\n        display: block;\n        height: 0.4em;\n      }\n\n      :host(:not([invalid])) [part=\"error-message\"] {\n        max-height: 0;\n        overflow: hidden;\n      }\n    </style>\n  </template>\n</dom-module>`;\n\ndocument.head.appendChild($_documentContainer.content);\n","/**\n@license\nCopyright (c) 2017 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\nimport '@vaadin/vaadin-themable-mixin/vaadin-themable-mixin.js';\n\nimport { ControlStateMixin } from '@vaadin/vaadin-control-state-mixin/vaadin-control-state-mixin.js';\nimport { timeOut } from '@polymer/polymer/lib/utils/async.js';\nimport { Debouncer } from '@polymer/polymer/lib/utils/debounce.js';\nconst $_documentContainer = document.createElement('template');\n\n$_documentContainer.innerHTML = `<dom-module id=\"vaadin-text-field-shared-styles\">\n  <template>\n    <style>\n      :host {\n        display: inline-flex;\n        outline: none;\n      }\n\n      :host::before {\n        content: \"\\\\2003\";\n        width: 0;\n        display: inline-block;\n        /* Size and position this element on the same vertical position as the input-field element\n           to make vertical align for the host element work as expected */\n      }\n\n      :host([hidden]) {\n        display: none !important;\n      }\n\n      .vaadin-text-field-container,\n      .vaadin-text-area-container {\n        display: flex;\n        flex-direction: column;\n        min-width: 100%;\n        max-width: 100%;\n        width: var(--vaadin-text-field-default-width, 12em);\n      }\n\n      [part=\"label\"]:empty {\n        display: none;\n      }\n\n      [part=\"input-field\"] {\n        display: flex;\n        align-items: center;\n        flex: auto;\n      }\n\n      .vaadin-text-field-container [part=\"input-field\"] {\n        flex-grow: 0;\n      }\n\n      /* Reset the native input styles */\n      [part=\"value\"],\n      [part=\"input-field\"] ::slotted(input),\n      [part=\"input-field\"] ::slotted(textarea) {\n        -webkit-appearance: none;\n        -moz-appearance: none;\n        outline: none;\n        margin: 0;\n        padding: 0;\n        border: 0;\n        border-radius: 0;\n        min-width: 0;\n        font: inherit;\n        font-size: 1em;\n        line-height: normal;\n        color: inherit;\n        background-color: transparent;\n        /* Disable default invalid style in Firefox */\n        box-shadow: none;\n      }\n\n      [part=\"input-field\"] ::slotted(*) {\n        flex: none;\n      }\n\n      [part=\"value\"],\n      [part=\"input-field\"] ::slotted(input),\n      [part=\"input-field\"] ::slotted(textarea),\n      /* Slotted by vaadin-select-text-field */\n      [part=\"input-field\"] ::slotted([part=\"value\"]) {\n        flex: auto;\n        white-space: nowrap;\n        overflow: hidden;\n        width: 100%;\n        height: 100%;\n      }\n\n      [part=\"input-field\"] ::slotted(textarea) {\n        resize: none;\n      }\n\n      [part=\"value\"]::-ms-clear,\n      [part=\"input-field\"] ::slotted(input)::-ms-clear {\n        display: none;\n      }\n\n      [part=\"clear-button\"] {\n        cursor: default;\n      }\n\n      [part=\"clear-button\"]::before {\n        content: \"✕\";\n      }\n    </style>\n  </template>\n</dom-module>`;\n\ndocument.head.appendChild($_documentContainer.content);\n\nconst HOST_PROPS = {\n  default: ['list', 'autofocus', 'pattern', 'autocapitalize', 'autocorrect', 'maxlength',\n    'minlength', 'name', 'placeholder', 'autocomplete', 'title'],\n  accessible: ['disabled', 'readonly', 'required', 'invalid']\n};\n\nconst PROP_TYPE = {\n  DEFAULT: 'default',\n  ACCESSIBLE: 'accessible'\n};\n\n\n/**\n * @polymerMixin\n * @mixes Vaadin.ControlStateMixin\n */\nexport const TextFieldMixin = subclass => class VaadinTextFieldMixin extends ControlStateMixin(subclass) {\n  static get properties() {\n    return {\n      /**\n       * Whether the value of the control can be automatically completed by the browser.\n       * List of available options at:\n       * https://developer.mozilla.org/en/docs/Web/HTML/Element/input#attr-autocomplete\n       */\n      autocomplete: {\n        type: String\n      },\n\n      /**\n       * This is a property supported by Safari that is used to control whether\n       * autocorrection should be enabled when the user is entering/editing the text.\n       * Possible values are:\n       * on: Enable autocorrection.\n       * off: Disable autocorrection.\n       */\n      autocorrect: {\n        type: String\n      },\n\n      /**\n       * This is a property supported by Safari and Chrome that is used to control whether\n       * autocapitalization should be enabled when the user is entering/editing the text.\n       * Possible values are:\n       * characters: Characters capitalization.\n       * words: Words capitalization.\n       * sentences: Sentences capitalization.\n       * none: No capitalization.\n       */\n      autocapitalize: {\n        type: String\n      },\n\n      /**\n       * Specify that the value should be automatically selected when the field gains focus.\n       */\n      autoselect: {\n        type: Boolean,\n        value: false\n      },\n\n      /**\n       * Set to true to display the clear icon which clears the input.\n       */\n      clearButtonVisible: {\n        type: Boolean,\n        value: false\n      },\n\n      /**\n       * Error to show when the input value is invalid.\n       */\n      errorMessage: {\n        type: String,\n        value: ''\n      },\n\n      /**\n       * Object with translated strings used for localization. Has\n       * the following structure and default values:\n       *\n       * ```\n       * {\n       *   // Translation of the clear icon button accessible label\n       *   clear: 'Clear'\n       * }\n       * ```\n       */\n      i18n: {\n        type: Object,\n        value: () => {\n          return {\n            clear: 'Clear'\n          };\n        }\n      },\n\n      /**\n       * String used for the label element.\n       */\n      label: {\n        type: String,\n        value: '',\n        observer: '_labelChanged'\n      },\n\n      /**\n       * Maximum number of characters (in Unicode code points) that the user can enter.\n       */\n      maxlength: {\n        type: Number\n      },\n\n      /**\n       * Minimum number of characters (in Unicode code points) that the user can enter.\n       */\n      minlength: {\n        type: Number\n      },\n\n      /**\n       * The name of the control, which is submitted with the form data.\n       */\n      name: {\n        type: String\n      },\n\n      /**\n       * A hint to the user of what can be entered in the control.\n       */\n      placeholder: {\n        type: String\n      },\n\n      /**\n       * This attribute indicates that the user cannot modify the value of the control.\n       */\n      readonly: {\n        type: Boolean,\n        reflectToAttribute: true\n      },\n\n      /**\n       * Specifies that the user must fill in a value.\n       */\n      required: {\n        type: Boolean,\n        reflectToAttribute: true\n      },\n\n\n      /**\n       * The initial value of the control.\n       * It can be used for two-way data binding.\n       */\n      value: {\n        type: String,\n        value: '',\n        observer: '_valueChanged',\n        notify: true\n      },\n\n      /**\n       * This property is set to true when the control value is invalid.\n       */\n      invalid: {\n        type: Boolean,\n        reflectToAttribute: true,\n        notify: true,\n        value: false\n      },\n\n      /**\n       * Specifies that the text field has value.\n       */\n      hasValue: {\n        type: Boolean,\n        reflectToAttribute: true\n      },\n\n      /**\n       * When set to true, user is prevented from typing a value that\n       * conflicts with the given `pattern`.\n       */\n      preventInvalidInput: {\n        type: Boolean\n      },\n\n      _labelId: {\n        type: String\n      },\n\n      _errorId: {\n        type: String\n      }\n    };\n  }\n\n  static get observers() {\n    return ['_stateChanged(disabled, readonly, clearButtonVisible, hasValue)',\n      '_hostPropsChanged(' + HOST_PROPS.default.join(', ') + ')',\n      '_hostAccessiblePropsChanged(' + HOST_PROPS.accessible.join(', ') + ')',\n      '_getActiveErrorId(invalid, errorMessage, _errorId)',\n      '_getActiveLabelId(label, _labelId)'];\n  }\n\n  get focusElement() {\n    if (!this.shadowRoot) {\n      return;\n    }\n    const slotted = this.querySelector(`${this._slottedTagName}[slot=\"${this._slottedTagName}\"]`);\n    if (slotted) {\n      return slotted;\n    }\n    return this.shadowRoot.querySelector('[part=\"value\"]');\n  }\n\n  /**\n   * @private\n   */\n  get inputElement() {\n    return this.focusElement;\n  }\n\n  get _slottedTagName() {\n    return 'input';\n  }\n\n  _onInput(e) {\n    if (this.__preventInput) {\n      e.stopImmediatePropagation();\n      this.__preventInput = false;\n      return;\n    }\n\n    if (this.preventInvalidInput) {\n      const input = this.inputElement;\n      if (input.value.length > 0 && !this.checkValidity()) {\n        input.value = this.value || '';\n        // add input-prevented attribute for 200ms\n        this.setAttribute('input-prevented', '');\n        this._inputDebouncer = Debouncer.debounce(\n          this._inputDebouncer,\n          timeOut.after(200), () => {\n            this.removeAttribute('input-prevented');\n          });\n        return;\n      }\n    }\n\n    if (!e.__fromClearButton) {\n      this.__userInput = true;\n    }\n    this.value = e.target.value;\n  }\n\n  // NOTE(yuriy): Workaround needed for IE11 and Edge for proper displaying\n  // of the clear button instead of setting display property for it depending on state.\n  _stateChanged(disabled, readonly, clearButtonVisible, hasValue) {\n    if (!disabled &&\n        !readonly &&\n        clearButtonVisible &&\n        hasValue\n    ) {\n      this.$.clearButton.removeAttribute('hidden');\n    } else {\n      this.$.clearButton.setAttribute('hidden', true);\n    }\n  }\n\n  _onChange(e) {\n    if (this._valueClearing) {\n      return;\n    }\n\n    // In the Shadow DOM, the `change` event is not leaked into the\n    // ancestor tree, so we must do this manually.\n    const changeEvent = new CustomEvent('change', {\n      detail: {\n        sourceEvent: e\n      },\n      bubbles: e.bubbles,\n      cancelable: e.cancelable,\n    });\n    this.dispatchEvent(changeEvent);\n  }\n\n  _valueChanged(newVal, oldVal) {\n    // setting initial value to empty string, skip validation\n    if (newVal === '' && oldVal === undefined) {\n      return;\n    }\n\n    if (newVal !== '' && newVal != null) {\n      this.hasValue = true;\n    } else {\n      this.hasValue = false;\n    }\n\n    if (this.__userInput) {\n      this.__userInput = false;\n      return;\n    } else if (newVal !== undefined) {\n      this.inputElement.value = newVal;\n    } else {\n      this.value = this.inputElement.value = '';\n    }\n\n    if (this.invalid) {\n      this.validate();\n    }\n  }\n\n  _labelChanged(label) {\n    if (label !== '' && label != null) {\n      this.setAttribute('has-label', '');\n    } else {\n      this.removeAttribute('has-label');\n    }\n  }\n\n  _onSlotChange() {\n    const slotted = this.querySelector(`${this._slottedTagName}[slot=\"${this._slottedTagName}\"]`);\n\n    if (this.value) {\n      this.inputElement.value = this.value;\n      this.validate();\n    }\n\n    if (slotted && !this._slottedInput) {\n      this._validateSlottedValue(slotted);\n      this._addInputListeners(slotted);\n      this._addIEListeners(slotted);\n      this._slottedInput = slotted;\n    } else if (!slotted && this._slottedInput) {\n      this._removeInputListeners(this._slottedInput);\n      this._removeIEListeners(this._slottedInput);\n      this._slottedInput = undefined;\n    }\n\n    Object.keys(PROP_TYPE).map(key => PROP_TYPE[key]).forEach(type =>\n      this._propagateHostAttributes(HOST_PROPS[type].map(attr => this[attr]), type));\n  }\n\n  _hostPropsChanged(...attributesValues) {\n    this._propagateHostAttributes(attributesValues, PROP_TYPE.DEFAULT);\n  }\n\n  _hostAccessiblePropsChanged(...attributesValues) {\n    this._propagateHostAttributes(attributesValues, PROP_TYPE.ACCESSIBLE);\n  }\n\n  _validateSlottedValue(slotted) {\n    if (slotted.value !== this.value) {\n      console.warn('Please define value on the vaadin-text-field component!');\n      slotted.value = '';\n    }\n  }\n\n  _propagateHostAttributes(attributesValues, type) {\n    const input = this.inputElement;\n    const attributeNames = HOST_PROPS[type];\n\n    if (type === 'accessible') {\n      attributeNames.forEach((attr, index) => {\n        this._setOrToggleAttribute(attr, attributesValues[index], input);\n        this._setOrToggleAttribute(`aria-${attr}`, attributesValues[index], input);\n      });\n    } else {\n      attributeNames.forEach((attr, index) => {\n        this._setOrToggleAttribute(attr, attributesValues[index], input);\n      });\n    }\n  }\n\n  _setOrToggleAttribute(name, value, node) {\n    if (!name || !node) {\n      return;\n    }\n\n    if (value) {\n      node.setAttribute(name, (typeof value === 'boolean') ? '' : value);\n    } else {\n      node.removeAttribute(name);\n    }\n  }\n\n  /**\n   * Returns true if the current input value satisfies all constraints (if any)\n   * @returns {boolean}\n   */\n  checkValidity() {\n    if (this.required || this.pattern || this.maxlength || this.minlength) {\n      return this.inputElement.checkValidity();\n    } else {\n      return !this.invalid;\n    }\n  }\n\n  _addInputListeners(node) {\n    node.addEventListener('input', this._boundOnInput);\n    node.addEventListener('change', this._boundOnChange);\n    node.addEventListener('blur', this._boundOnBlur);\n    node.addEventListener('focus', this._boundOnFocus);\n  }\n\n  _removeInputListeners(node) {\n    node.removeEventListener('input', this._boundOnInput);\n    node.removeEventListener('change', this._boundOnChange);\n    node.removeEventListener('blur', this._boundOnBlur);\n    node.removeEventListener('focus', this._boundOnFocus);\n  }\n\n  ready() {\n    super.ready();\n\n    this._boundOnInput = this._onInput.bind(this);\n    this._boundOnChange = this._onChange.bind(this);\n    this._boundOnBlur = this._onBlur.bind(this);\n    this._boundOnFocus = this._onFocus.bind(this);\n\n    const defaultInput = this.shadowRoot.querySelector('[part=\"value\"]');\n    this._slottedInput = this.querySelector(`${this._slottedTagName}[slot=\"${this._slottedTagName}\"]`);\n    this._addInputListeners(defaultInput);\n    this._addIEListeners(defaultInput);\n    if (this._slottedInput) {\n      this._addIEListeners(this._slottedInput);\n      this._addInputListeners(this._slottedInput);\n    }\n\n    this.shadowRoot.querySelector('[name=\"input\"], [name=\"textarea\"]')\n      .addEventListener('slotchange', this._onSlotChange.bind(this));\n\n    if (!(window.ShadyCSS && window.ShadyCSS.nativeCss)) {\n      this.updateStyles();\n    }\n\n    this.$.clearButton.addEventListener('mousedown', () => this._valueClearing = true);\n    this.$.clearButton.addEventListener('mouseleave', () => this._valueClearing = false);\n    this.$.clearButton.addEventListener('click', this._onClearButtonClick.bind(this));\n    this.addEventListener('keydown', this._onKeyDown.bind(this));\n\n    var uniqueId = TextFieldMixin._uniqueId = 1 + TextFieldMixin._uniqueId || 0;\n    this._errorId = `${this.constructor.is}-error-${uniqueId}`;\n    this._labelId = `${this.constructor.is}-label-${uniqueId}`;\n  }\n\n  /**\n   * Returns true if `value` is valid.\n   * `<iron-form>` uses this to check the validity or all its elements.\n   *\n   * @return {boolean} True if the value is valid.\n   */\n  validate() {\n    return !(this.invalid = !this.checkValidity());\n  }\n\n  clear() {\n    this.value = '';\n  }\n\n  _onBlur() {\n    this.validate();\n  }\n\n  _onFocus() {\n    if (this.autoselect) {\n      this.inputElement.select();\n      // iOS 9 workaround: https://stackoverflow.com/a/7436574\n      setTimeout(() => {\n        this.inputElement.setSelectionRange(0, 9999);\n      });\n    }\n  }\n\n  _onClearButtonClick(e) {\n    e.preventDefault();\n    // NOTE(yuriy): This line won't affect focus on the host. Cannot be properly tested.\n    this.inputElement.focus();\n    this.clear();\n    this._valueClearing = false;\n    if (navigator.userAgent.match(/Trident/)) {\n      // Disable IE input\" event prevention here, we want the input event from\n      // below to propagate normally.\n      this.__preventInput = false;\n    }\n    const inputEvent = new Event('input', {bubbles: true, composed: true});\n    inputEvent.__fromClearButton = true;\n    const changeEvent = new Event('change', {bubbles: !this._slottedInput});\n    changeEvent.__fromClearButton = true;\n    this.inputElement.dispatchEvent(inputEvent);\n    this.inputElement.dispatchEvent(changeEvent);\n  }\n\n  _onKeyDown(e) {\n    if (e.keyCode === 27 && this.clearButtonVisible) {\n      this.clear();\n    }\n  }\n\n  _addIEListeners(node) {\n    /* istanbul ignore if */\n    if (navigator.userAgent.match(/Trident/)) {\n      // IE11 dispatches `input` event in following cases:\n      // - focus or blur, when placeholder attribute is set\n      // - placeholder attribute value changed\n      // https://developer.microsoft.com/en-us/microsoft-edge/platform/issues/101220/\n      this._shouldPreventInput = () => {\n        this.__preventInput = true;\n        requestAnimationFrame(() => {\n          this.__preventInput = false;\n        });\n      };\n      node.addEventListener('focusin', this._shouldPreventInput);\n      node.addEventListener('focusout', this._shouldPreventInput);\n      this._createPropertyObserver('placeholder', this._shouldPreventInput);\n    }\n  }\n\n  _removeIEListeners(node) {\n    /* istanbul ignore if */\n    if (navigator.userAgent.match(/Trident/)) {\n      node.removeEventListener('focusin', this._shouldPreventInput);\n      node.removeEventListener('focusout', this._shouldPreventInput);\n    }\n  }\n\n  _getActiveErrorId(invalid, errorMessage, errorId) {\n    this._setOrToggleAttribute('aria-describedby',\n      (errorMessage && invalid ? errorId : undefined),\n      this.inputElement);\n  }\n\n  _getActiveLabelId(label, labelId) {\n    this._setOrToggleAttribute('aria-labelledby',\n      (label ? labelId : undefined),\n      this.inputElement);\n  }\n\n  _getErrorMessageAriaHidden(invalid, errorMessage, errorId) {\n    return (!(errorMessage && invalid ? errorId : undefined)).toString();\n  }\n\n  /**\n   * @protected\n   */\n  attributeChangedCallback(prop, oldVal, newVal) {\n    super.attributeChangedCallback(prop, oldVal, newVal);\n    // Needed until Edge has CSS Custom Properties (present in Edge Preview)\n    /* istanbul ignore if */\n    if (!(window.ShadyCSS && window.ShadyCSS.nativeCss) &&\n      /^(focused|focus-ring|invalid|disabled|placeholder|has-value)$/.test(prop)) {\n      this.updateStyles();\n    }\n\n    // Safari has an issue with repainting shadow root element styles when a host attribute changes.\n    // Need this workaround (toggle any inline css property on and off) until the issue gets fixed.\n    const isSafari = /^((?!chrome|android).)*safari/i.test(navigator.userAgent);\n    /* istanbul ignore if */\n    if (isSafari && this.root) {\n      const WEBKIT_PROPERTY = '-webkit-backface-visibility';\n      this.root.querySelectorAll('*').forEach(el => {\n        el.style[WEBKIT_PROPERTY] = 'visible';\n        el.style[WEBKIT_PROPERTY] = '';\n      });\n    }\n  }\n\n  /**\n   * Fired when the user commits a value change.\n   *\n   * @event change\n   */\n\n  /**\n   * Fired when the value is changed by the user: on every typing keystroke,\n   * and the value is cleared using the clear button.\n   *\n   * @event input\n   */\n};\n","/**\n@license\nCopyright (c) 2017 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport { TextFieldMixin } from './vaadin-text-field-mixin.js';\nimport { ElementMixin } from '@vaadin/vaadin-element-mixin/vaadin-element-mixin.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { ThemableMixin } from '@vaadin/vaadin-themable-mixin/vaadin-themable-mixin.js';\n/**\n * `<vaadin-text-field>` is a Web Component for text field control in forms.\n *\n * ```html\n * <vaadin-text-field label=\"First Name\">\n * </vaadin-text-field>\n * ```\n *\n * ### Prefixes and suffixes\n *\n * These are child elements of a `<vaadin-text-field>` that are displayed\n * inline with the input, before or after.\n * In order for an element to be considered as a prefix, it must have the slot\n * attribute set to `prefix` (and similarly for `suffix`).\n *\n * ```html\n * <vaadin-text-field label=\"Email address\">\n *   <div slot=\"prefix\">Sent to:</div>\n *   <div slot=\"suffix\">@vaadin.com</div>\n * </vaadin-text-area>\n * ```\n *\n * ### Styling\n *\n * The following custom properties are available for styling:\n *\n * Custom property | Description | Default\n * ----------------|-------------|-------------\n * `--vaadin-text-field-default-width` | Set the default width of the input field | `12em`\n *\n * The following shadow DOM parts are available for styling:\n *\n * Part name | Description\n * ----------------|----------------\n * `label` | The label element\n * `input-field` | The element that wraps prefix, value and suffix\n * `value` | The text value element inside the `input-field` element\n * `error-message` | The error message element\n *\n * The following state attributes are available for styling:\n *\n * Attribute    | Description | Part name\n * -------------|-------------|------------\n * `disabled` | Set to a disabled text field | :host\n * `has-value` | Set when the element has a value | :host\n * `has-label` | Set when the element has a label | :host\n * `invalid` | Set when the element is invalid | :host\n * `input-prevented` | Temporarily set when invalid input is prevented | :host\n * `focused` | Set when the element is focused | :host\n * `focus-ring` | Set when the element is keyboard focused | :host\n * `readonly` | Set to a readonly text field | :host\n *\n * See [ThemableMixin – how to apply styles for shadow parts](https://github.com/vaadin/vaadin-themable-mixin/wiki)\n *\n * @memberof Vaadin\n * @mixes Vaadin.TextFieldMixin\n * @mixes Vaadin.ThemableMixin\n * @demo demo/index.html\n */\nclass TextFieldElement extends ElementMixin(TextFieldMixin(ThemableMixin(PolymerElement))) {\n  static get template() {\n    return html`\n    <style include=\"vaadin-text-field-shared-styles\">\n      /* polymer-cli linter breaks with empty line */\n    </style>\n\n    <div class=\"vaadin-text-field-container\">\n\n      <label part=\"label\" on-click=\"focus\" id=\"[[_labelId]]\">[[label]]</label>\n\n      <div part=\"input-field\">\n\n        <slot name=\"prefix\"></slot>\n\n        <slot name=\"input\">\n          <input part=\"value\">\n        </slot>\n\n        <div part=\"clear-button\" id=\"clearButton\" role=\"button\" aria-label\\$=\"[[i18n.clear]]\"></div>\n        <slot name=\"suffix\"></slot>\n\n      </div>\n\n      <div part=\"error-message\" id=\"[[_errorId]]\" aria-live=\"assertive\" aria-hidden\\$=\"[[_getErrorMessageAriaHidden(invalid, errorMessage, _errorId)]]\">[[errorMessage]]</div>\n\n    </div>\n`;\n  }\n\n  static get is() {\n    return 'vaadin-text-field';\n  }\n\n  static get version() {\n    return '2.4.4';\n  }\n\n  static get properties() {\n    return {\n      /**\n       * Identifies a list of pre-defined options to suggest to the user.\n       * The value must be the id of a <datalist> element in the same document.\n       */\n      list: {\n        type: String\n      },\n\n      /**\n       * A regular expression that the value is checked against.\n       * The pattern must match the entire value, not just some subset.\n       */\n      pattern: {\n        type: String\n      },\n\n      /**\n       * Message to show to the user when validation fails.\n       */\n      title: {\n        type: String\n      }\n    };\n  }\n}\n\ncustomElements.define(TextFieldElement.is, TextFieldElement);\n\nexport { TextFieldElement };\n","import '@vaadin/vaadin-lumo-styles/color.js';\nimport '@vaadin/vaadin-lumo-styles/sizing.js';\nimport '@vaadin/vaadin-lumo-styles/spacing.js';\nimport '@vaadin/vaadin-lumo-styles/style.js';\nimport '@vaadin/vaadin-lumo-styles/typography.js';\nimport '@vaadin/vaadin-lumo-styles/mixins/required-field.js';\nimport '@vaadin/vaadin-lumo-styles/font-icons.js';\nimport '@vaadin/vaadin-lumo-styles/mixins/field-button.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\n\nconst $_documentContainer = html`<dom-module id=\"lumo-text-field\" theme-for=\"vaadin-text-field\">\n  <template>\n    <style include=\"lumo-required-field lumo-field-button\">\n      :host {\n        --lumo-text-field-size: var(--lumo-size-m);\n        color: var(--lumo-body-text-color);\n        font-size: var(--lumo-font-size-m);\n        font-family: var(--lumo-font-family);\n        -webkit-font-smoothing: antialiased;\n        -moz-osx-font-smoothing: grayscale;\n        -webkit-tap-highlight-color: transparent;\n        padding: var(--lumo-space-xs) 0;\n      }\n\n      :host::before {\n        height: var(--lumo-text-field-size);\n        box-sizing: border-box;\n        display: inline-flex;\n        align-items: center;\n      }\n\n      :host([focused]:not([readonly])) [part=\"label\"] {\n        color: var(--lumo-primary-text-color);\n      }\n\n      [part=\"value\"],\n      [part=\"input-field\"] ::slotted(input),\n      [part=\"input-field\"] ::slotted(textarea),\n      /* Slotted by vaadin-select-text-field */\n      [part=\"input-field\"] ::slotted([part=\"value\"]) {\n        cursor: inherit;\n        min-height: var(--lumo-text-field-size);\n        padding: 0 0.25em;\n        --_lumo-text-field-overflow-mask-image: linear-gradient(to left, transparent, #000 1.25em);\n        -webkit-mask-image: var(--_lumo-text-field-overflow-mask-image);\n      }\n\n      [part=\"value\"]:focus,\n      [part=\"input-field\"] ::slotted(input):focus,\n      [part=\"input-field\"] ::slotted(textarea):focus {\n        -webkit-mask-image: none;\n        mask-image: none;\n      }\n\n      /*\n        TODO: CSS custom property in \\`mask-image\\` causes crash in Edge\n        see https://developer.microsoft.com/en-us/microsoft-edge/platform/issues/15415089/\n      */\n      @-moz-document url-prefix() {\n        [part=\"value\"],\n        [part=\"input-field\"] ::slotted(input),\n        [part=\"input-field\"] ::slotted(textarea),\n        [part=\"input-field\"] ::slotted([part=\"value\"]) {\n          mask-image: var(--_lumo-text-field-overflow-mask-image);\n        }\n      }\n\n      [part=\"value\"]::-webkit-input-placeholder {\n        color: inherit;\n        transition: opacity 0.175s 0.05s;\n        opacity: 0.5;\n      }\n\n      [part=\"value\"]:-ms-input-placeholder {\n        color: inherit;\n        opacity: 0.5;\n      }\n\n      [part=\"value\"]::-moz-placeholder {\n        color: inherit;\n        transition: opacity 0.175s 0.05s;\n        opacity: 0.5;\n      }\n\n      [part=\"value\"]::placeholder {\n        color: inherit;\n        transition: opacity 0.175s 0.1s;\n        opacity: 0.5;\n      }\n\n      [part=\"input-field\"] {\n        border-radius: var(--lumo-border-radius);\n        background-color: var(--lumo-contrast-10pct);\n        padding: 0 calc(0.375em + var(--lumo-border-radius) / 4 - 1px);\n        font-weight: 500;\n        line-height: 1;\n        position: relative;\n        cursor: text;\n        box-sizing: border-box;\n      }\n\n      /* Used for hover and activation effects */\n      [part=\"input-field\"]::after {\n        content: \"\";\n        position: absolute;\n        top: 0;\n        right: 0;\n        bottom: 0;\n        left: 0;\n        border-radius: inherit;\n        pointer-events: none;\n        background-color: var(--lumo-contrast-50pct);\n        opacity: 0;\n        transition: transform 0.15s, opacity 0.2s;\n        transform-origin: 100% 0;\n      }\n\n      /* Hover */\n\n      :host(:hover:not([readonly]):not([focused])) [part=\"label\"] {\n        color: var(--lumo-body-text-color);\n      }\n\n      :host(:hover:not([readonly]):not([focused])) [part=\"input-field\"]::after {\n        opacity: 0.1;\n      }\n\n      /* Touch device adjustment */\n      @media (pointer: coarse) {\n        :host(:hover:not([readonly]):not([focused])) [part=\"label\"] {\n          color: var(--lumo-secondary-text-color);\n        }\n\n        :host(:hover:not([readonly]):not([focused])) [part=\"input-field\"]::after {\n          opacity: 0;\n        }\n\n        :host(:active:not([readonly]):not([focused])) [part=\"input-field\"]::after {\n          opacity: 0.2;\n        }\n      }\n\n      /* Trigger when not focusing using the keyboard */\n      :host([focused]:not([focus-ring]):not([readonly])) [part=\"input-field\"]::after {\n        transform: scaleX(0);\n        transition-duration: 0.15s, 1s;\n      }\n\n      /* Focus-ring */\n\n      :host([focus-ring]) [part=\"input-field\"] {\n        box-shadow: 0 0 0 2px var(--lumo-primary-color-50pct);\n      }\n\n      /* Read-only and disabled */\n      :host([readonly]) [part=\"value\"]::-webkit-input-placeholder,\n      :host([disabled]) [part=\"value\"]::-webkit-input-placeholder {\n        opacity: 0;\n      }\n\n      :host([readonly]) [part=\"value\"]:-ms-input-placeholder,\n      :host([disabled]) [part=\"value\"]:-ms-input-placeholder {\n        opacity: 0;\n      }\n\n      :host([readonly]) [part=\"value\"]::-moz-placeholder,\n      :host([disabled]) [part=\"value\"]::-moz-placeholder {\n        opacity: 0;\n      }\n\n      :host([readonly]) [part=\"value\"]::placeholder,\n      :host([disabled]) [part=\"value\"]::placeholder {\n        opacity: 0;\n      }\n\n      /* Read-only */\n\n      :host([readonly]) [part=\"input-field\"] {\n        color: var(--lumo-secondary-text-color);\n        background-color: transparent;\n        cursor: default;\n      }\n\n      :host([readonly]) [part=\"input-field\"]::after {\n        background-color: transparent;\n        opacity: 1;\n        border: 1px dashed var(--lumo-contrast-30pct);\n      }\n\n      /* Disabled style */\n\n      :host([disabled]) {\n        pointer-events: none;\n      }\n\n      :host([disabled]) [part=\"input-field\"] {\n        background-color: var(--lumo-contrast-5pct);\n      }\n\n      :host([disabled]) [part=\"label\"],\n      :host([disabled]) [part=\"value\"],\n      :host([disabled]) [part=\"input-field\"] ::slotted(*) {\n        color: var(--lumo-disabled-text-color);\n        -webkit-text-fill-color: var(--lumo-disabled-text-color);\n      }\n\n      /* Invalid style */\n\n      :host([invalid]) [part=\"input-field\"] {\n        background-color: var(--lumo-error-color-10pct);\n      }\n\n      :host([invalid]) [part=\"input-field\"]::after {\n        background-color: var(--lumo-error-color-50pct);\n      }\n\n      :host([invalid][focus-ring]) [part=\"input-field\"] {\n        box-shadow: 0 0 0 2px var(--lumo-error-color-50pct);\n      }\n\n      :host([input-prevented]) [part=\"input-field\"] {\n        color: var(--lumo-error-text-color);\n      }\n\n      /* Small theme */\n\n      :host([theme~=\"small\"]) {\n        font-size: var(--lumo-font-size-s);\n        --lumo-text-field-size: var(--lumo-size-s);\n      }\n\n      :host([theme~=\"small\"][has-label]) [part=\"label\"] {\n        font-size: var(--lumo-font-size-xs);\n      }\n\n      :host([theme~=\"small\"][has-label]) [part=\"error-message\"] {\n        font-size: var(--lumo-font-size-xxs);\n      }\n\n      /* Text align */\n\n      :host([theme~=\"align-center\"]) [part=\"value\"] {\n        text-align: center;\n        --_lumo-text-field-overflow-mask-image: none;\n      }\n\n      :host([theme~=\"align-right\"]) [part=\"value\"] {\n        text-align: right;\n        --_lumo-text-field-overflow-mask-image: none;\n      }\n\n      @-moz-document url-prefix() {\n        /* Firefox is smart enough to align overflowing text to right */\n        :host([theme~=\"align-right\"]) [part=\"value\"] {\n          --_lumo-text-field-overflow-mask-image: linear-gradient(to right, transparent 0.25em, #000 1.5em);\n        }\n      }\n\n      /* Slotted content */\n\n      [part=\"input-field\"] ::slotted(:not([part]):not(iron-icon):not(input):not(textarea)) {\n        color: var(--lumo-secondary-text-color);\n        font-weight: 400;\n      }\n\n      /* Slotted icons */\n\n      [part=\"input-field\"] ::slotted(iron-icon) {\n        color: var(--lumo-contrast-60pct);\n        width: var(--lumo-icon-size-m);\n        height: var(--lumo-icon-size-m);\n      }\n\n      /* Vaadin icons are based on a 16x16 grid (unlike Lumo and Material icons with 24x24), so they look too big by default */\n      [part=\"input-field\"] ::slotted(iron-icon[icon^=\"vaadin:\"]) {\n        padding: 0.25em;\n        box-sizing: border-box !important;\n      }\n\n      [part=\"clear-button\"]::before {\n        content: var(--lumo-icons-cross);\n      }\n    </style>\n  </template>\n</dom-module>`;\n\ndocument.head.appendChild($_documentContainer.content);\n","import './vaadin-text-field-styles.js';\nimport '../../src/vaadin-text-field.js';\n","/* This file is autogenerated from src/vaadin-usage-statistics.tpl.html */\n/*\n\nThis script gathers usage statistics from the application running in development mode.\n\nStatistics gathering is automatically disabled and excluded from production builds.\n\nFor details and to opt-out, see https://github.com/vaadin/vaadin-usage-statistics.\n\n*/\n/*\n  FIXME(polymer-modulizer): the above comments were extracted\n  from HTML and may be out of place here. Review them and\n  then delete this comment!\n*/\nimport { runIfDevelopmentMode } from '@vaadin/vaadin-development-mode-detector/vaadin-development-mode-detector.js';\n\nfunction maybeGatherAndSendStats() {\n  /** vaadin-dev-mode:start\n  (function () {\n'use strict';\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) {\n  return typeof obj;\n} : function (obj) {\n  return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n};\n\nvar classCallCheck = function (instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};\n\nvar createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar getPolymerVersion = function getPolymerVersion() {\n  return window.Polymer && window.Polymer.version;\n};\n\nvar StatisticsGatherer = function () {\n  function StatisticsGatherer(logger) {\n    classCallCheck(this, StatisticsGatherer);\n\n    this.now = new Date().getTime();\n    this.logger = logger;\n  }\n\n  createClass(StatisticsGatherer, [{\n    key: 'frameworkVersionDetectors',\n    value: function frameworkVersionDetectors() {\n      return {\n        'Flow': function Flow() {\n          if (window.Vaadin && window.Vaadin.Flow && window.Vaadin.Flow.clients) {\n            var flowVersions = Object.keys(window.Vaadin.Flow.clients).map(function (key) {\n              return window.Vaadin.Flow.clients[key];\n            }).filter(function (client) {\n              return client.getVersionInfo;\n            }).map(function (client) {\n              return client.getVersionInfo().flow;\n            });\n            if (flowVersions.length > 0) {\n              return flowVersions[0];\n            }\n          }\n        },\n        'Vaadin Framework': function VaadinFramework() {\n          if (window.vaadin && window.vaadin.clients) {\n            var frameworkVersions = Object.values(window.vaadin.clients).filter(function (client) {\n              return client.getVersionInfo;\n            }).map(function (client) {\n              return client.getVersionInfo().vaadinVersion;\n            });\n            if (frameworkVersions.length > 0) {\n              return frameworkVersions[0];\n            }\n          }\n        },\n        'AngularJs': function AngularJs() {\n          if (window.angular && window.angular.version && window.angular.version) {\n            return window.angular.version.full;\n          }\n        },\n        'Angular': function Angular() {\n          if (window.ng) {\n            var tags = document.querySelectorAll(\"[ng-version]\");\n            if (tags.length > 0) {\n              return tags[0].getAttribute(\"ng-version\");\n            }\n            return \"Unknown\";\n          }\n        },\n        'Backbone.js': function BackboneJs() {\n          if (window.Backbone) {\n            return window.Backbone.VERSION;\n          }\n        },\n        'React': function React() {\n          var reactSelector = '[data-reactroot], [data-reactid]';\n          if (!!document.querySelector(reactSelector)) {\n            // React does not publish the version by default\n            return \"unknown\";\n          }\n        },\n        'Ember': function Ember() {\n          if (window.Em && window.Em.VERSION) {\n            return window.Em.VERSION;\n          } else if (window.Ember && window.Ember.VERSION) {\n            return window.Ember.VERSION;\n          }\n        },\n        'jQuery': function (_jQuery) {\n          function jQuery() {\n            return _jQuery.apply(this, arguments);\n          }\n\n          jQuery.toString = function () {\n            return _jQuery.toString();\n          };\n\n          return jQuery;\n        }(function () {\n          if (typeof jQuery === 'function' && jQuery.prototype.jquery !== undefined) {\n            return jQuery.prototype.jquery;\n          }\n        }),\n        'Polymer': function Polymer() {\n          var version = getPolymerVersion();\n          if (version) {\n            return version;\n          }\n        },\n        'LitElement': function LitElement() {\n          var version = window.litElementVersions && window.litElementVersions[0];\n          if (version) {\n            return version;\n          }\n        },\n        'LitHtml': function LitHtml() {\n          var version = window.litHtmlVersions && window.litHtmlVersions[0];\n          if (version) {\n            return version;\n          }\n        },\n        'Vue.js': function VueJs() {\n          if (window.Vue) {\n            return window.Vue.version;\n          }\n        }\n      };\n    }\n  }, {\n    key: 'getUsedVaadinElements',\n    value: function getUsedVaadinElements(elements) {\n      var version = getPolymerVersion();\n      var elementClasses = void 0;\n      if (version && version.indexOf('2') === 0) {\n        // Polymer 2: components classes are stored in window.Vaadin\n        elementClasses = Object.keys(window.Vaadin).map(function (c) {\n          return window.Vaadin[c];\n        }).filter(function (c) {\n          return c.is;\n        });\n      } else {\n        // Polymer 3: components classes are stored in window.Vaadin.registrations\n        elementClasses = window.Vaadin.registrations || [];\n      }\n      elementClasses.forEach(function (klass) {\n        var version = klass.version ? klass.version : \"0.0.0\";\n        elements[klass.is] = { version: version };\n      });\n    }\n  }, {\n    key: 'getUsedVaadinThemes',\n    value: function getUsedVaadinThemes(themes) {\n      ['Lumo', 'Material'].forEach(function (themeName) {\n        var theme;\n        var version = getPolymerVersion();\n        if (version && version.indexOf('2') === 0) {\n          // Polymer 2: themes are stored in window.Vaadin\n          theme = window.Vaadin[themeName];\n        } else {\n          // Polymer 3: themes are stored in custom element registry\n          theme = customElements.get('vaadin-' + themeName.toLowerCase() + '-styles');\n        }\n        if (theme && theme.version) {\n          themes[themeName] = { version: theme.version };\n        }\n      });\n    }\n  }, {\n    key: 'getFrameworks',\n    value: function getFrameworks(frameworks) {\n      var detectors = this.frameworkVersionDetectors();\n      Object.keys(detectors).forEach(function (framework) {\n        var detector = detectors[framework];\n        try {\n          var version = detector();\n          if (version) {\n            frameworks[framework] = { \"version\": version };\n          }\n        } catch (e) {}\n      });\n    }\n  }, {\n    key: 'gather',\n    value: function gather(storage) {\n      var storedStats = storage.read();\n      var gatheredStats = {};\n      var types = [\"elements\", \"frameworks\", \"themes\"];\n\n      types.forEach(function (type) {\n        gatheredStats[type] = {};\n        if (!storedStats[type]) {\n          storedStats[type] = {};\n        }\n      });\n\n      var previousStats = JSON.stringify(storedStats);\n\n      this.getUsedVaadinElements(gatheredStats.elements);\n      this.getFrameworks(gatheredStats.frameworks);\n      this.getUsedVaadinThemes(gatheredStats.themes);\n\n      var now = this.now;\n      types.forEach(function (type) {\n        var keys = Object.keys(gatheredStats[type]);\n        keys.forEach(function (key) {\n          if (!storedStats[type][key] || _typeof(storedStats[type][key]) != _typeof({})) {\n            storedStats[type][key] = { \"firstUsed\": now };\n          }\n          // Discards any previously logged version numebr\n          storedStats[type][key].version = gatheredStats[type][key].version;\n          storedStats[type][key].lastUsed = now;\n        });\n      });\n\n      var newStats = JSON.stringify(storedStats);\n      storage.write(newStats);\n      if (newStats != previousStats && Object.keys(storedStats).length > 0) {\n        this.logger.debug(\"New stats: \" + newStats);\n      }\n    }\n  }]);\n  return StatisticsGatherer;\n}();\n\nvar StatisticsStorage = function () {\n  function StatisticsStorage(key) {\n    classCallCheck(this, StatisticsStorage);\n\n    this.key = key;\n  }\n\n  createClass(StatisticsStorage, [{\n    key: 'read',\n    value: function read() {\n      var localStorageStatsString = localStorage.getItem(this.key);\n      try {\n        return JSON.parse(localStorageStatsString ? localStorageStatsString : '{}');\n      } catch (e) {\n        return {};\n      }\n    }\n  }, {\n    key: 'write',\n    value: function write(data) {\n      localStorage.setItem(this.key, data);\n    }\n  }, {\n    key: 'clear',\n    value: function clear() {\n      localStorage.removeItem(this.key);\n    }\n  }, {\n    key: 'isEmpty',\n    value: function isEmpty() {\n      var storedStats = this.read();\n      var empty = true;\n      Object.keys(storedStats).forEach(function (key) {\n        if (Object.keys(storedStats[key]).length > 0) {\n          empty = false;\n        }\n      });\n\n      return empty;\n    }\n  }]);\n  return StatisticsStorage;\n}();\n\nvar StatisticsSender = function () {\n  function StatisticsSender(url, logger) {\n    classCallCheck(this, StatisticsSender);\n\n    this.url = url;\n    this.logger = logger;\n  }\n\n  createClass(StatisticsSender, [{\n    key: 'send',\n    value: function send(data, errorHandler) {\n      var logger = this.logger;\n\n      if (navigator.onLine === false) {\n        logger.debug(\"Offline, can't send\");\n        errorHandler();\n        return;\n      }\n      logger.debug(\"Sending data to \" + this.url);\n\n      var req = new XMLHttpRequest();\n      req.withCredentials = true;\n      req.addEventListener(\"load\", function () {\n        // Stats sent, nothing more to do\n        logger.debug(\"Response: \" + req.responseText);\n      });\n      req.addEventListener(\"error\", function () {\n        logger.debug(\"Send failed\");\n        errorHandler();\n      });\n      req.addEventListener(\"abort\", function () {\n        logger.debug(\"Send aborted\");\n        errorHandler();\n      });\n      req.open(\"POST\", this.url);\n      req.setRequestHeader(\"Content-Type\", \"application/json\");\n      req.send(data);\n    }\n  }]);\n  return StatisticsSender;\n}();\n\nvar StatisticsLogger = function () {\n  function StatisticsLogger(id) {\n    classCallCheck(this, StatisticsLogger);\n\n    this.id = id;\n  }\n\n  createClass(StatisticsLogger, [{\n    key: '_isDebug',\n    value: function _isDebug() {\n      return localStorage.getItem(\"vaadin.\" + this.id + \".debug\");\n    }\n  }, {\n    key: 'debug',\n    value: function debug(msg) {\n      if (this._isDebug()) {\n        console.info(this.id + \": \" + msg);\n      }\n    }\n  }]);\n  return StatisticsLogger;\n}();\n\nvar UsageStatistics = function () {\n  function UsageStatistics() {\n    classCallCheck(this, UsageStatistics);\n\n    this.now = new Date();\n    this.timeNow = this.now.getTime();\n    this.gatherDelay = 10; // Delay between loading this file and gathering stats\n    this.initialDelay = 24 * 60 * 60;\n\n    this.logger = new StatisticsLogger(\"statistics\");\n    this.storage = new StatisticsStorage(\"vaadin.statistics.basket\");\n    this.gatherer = new StatisticsGatherer(this.logger);\n    this.sender = new StatisticsSender(\"https://tools.vaadin.com/usage-stats/submit\", this.logger);\n  }\n\n  createClass(UsageStatistics, [{\n    key: 'maybeGatherAndSend',\n    value: function maybeGatherAndSend() {\n      var _this = this;\n\n      if (localStorage.getItem(UsageStatistics.optOutKey)) {\n        return;\n      }\n      this.gatherer.gather(this.storage);\n      setTimeout(function () {\n        _this.maybeSend();\n      }, this.gatherDelay * 1000);\n    }\n  }, {\n    key: 'lottery',\n    value: function lottery() {\n      return Math.random() <= 0.05;\n    }\n  }, {\n    key: 'currentMonth',\n    value: function currentMonth() {\n      return this.now.getYear() * 12 + this.now.getMonth();\n    }\n  }, {\n    key: 'maybeSend',\n    value: function maybeSend() {\n      var firstUse = Number(localStorage.getItem(UsageStatistics.firstUseKey));\n      var monthProcessed = Number(localStorage.getItem(UsageStatistics.monthProcessedKey));\n\n      if (!firstUse) {\n        // Use a grace period to avoid interfering with tests, incognito mode etc\n        firstUse = this.timeNow;\n        localStorage.setItem(UsageStatistics.firstUseKey, firstUse);\n      }\n\n      if (this.timeNow < firstUse + this.initialDelay * 1000) {\n        this.logger.debug(\"No statistics will be sent until the initial delay of \" + this.initialDelay + \"s has passed\");\n        return;\n      }\n      if (this.currentMonth() <= monthProcessed) {\n        this.logger.debug(\"This month has already been processed\");\n        return;\n      }\n      localStorage.setItem(UsageStatistics.monthProcessedKey, this.currentMonth());\n      // Use random sampling\n      if (this.lottery()) {\n        this.logger.debug(\"Congratulations, we have a winner!\");\n      } else {\n        this.logger.debug(\"Sorry, no stats from you this time\");\n        return;\n      }\n\n      this.send();\n    }\n  }, {\n    key: 'send',\n    value: function send() {\n      // Ensure we have the latest data\n      this.gatherer.gather(this.storage);\n\n      // Read, send and clean up\n      var data = this.storage.read();\n      data[\"firstUse\"] = Number(localStorage.getItem(UsageStatistics.firstUseKey));\n      data[\"usageStatisticsVersion\"] = UsageStatistics.version;\n      var info = 'This request contains usage statistics gathered from the application running in development mode. \\n\\nStatistics gathering is automatically disabled and excluded from production builds.\\n\\nFor details and to opt-out, see https://github.com/vaadin/vaadin-usage-statistics.\\n\\n\\n\\n';\n      var self = this;\n      this.sender.send(info + JSON.stringify(data), function () {\n        // Revert the 'month processed' flag\n        localStorage.setItem(UsageStatistics.monthProcessedKey, self.currentMonth() - 1);\n      });\n    }\n  }], [{\n    key: 'version',\n    get: function get$1() {\n      return '2.0.1';\n    }\n  }, {\n    key: 'firstUseKey',\n    get: function get$1() {\n      return 'vaadin.statistics.firstuse';\n    }\n  }, {\n    key: 'monthProcessedKey',\n    get: function get$1() {\n      return 'vaadin.statistics.monthProcessed';\n    }\n  }, {\n    key: 'optOutKey',\n    get: function get$1() {\n      return 'vaadin.statistics.optout';\n    }\n  }]);\n  return UsageStatistics;\n}();\n\ntry {\n  window.Vaadin = window.Vaadin || {};\n  window.Vaadin.usageStatsChecker = window.Vaadin.usageStatsChecker || new UsageStatistics();\n  window.Vaadin.usageStatsChecker.maybeGatherAndSend();\n} catch (e) {\n  // Intentionally ignored as this is not a problem in the app being developed\n}\n\n}());\n\n  vaadin-dev-mode:end **/\n}\n\nexport const usageStatistics = function() {\n  if (typeof runIfDevelopmentMode === 'function') {\n    return runIfDevelopmentMode(maybeGatherAndSendStats);\n  }\n};\n"],"sourceRoot":""}