{"version":3,"sources":["webpack:///./src/panels/lovelace/components/hui-card-options.ts","webpack:///./src/panels/lovelace/editor/card-editor/show-move-card-view-dialog.ts","webpack:///./src/panels/lovelace/editor/delete-card.ts","webpack:///./src/panels/lovelace/hui-view-editable.ts"],"names":["HuiCardOptions","customElement","property","html","_editCard","hass","localize","_cardDown","lovelace","config","views","path","cards","length","_cardUp","_moveCard","_deleteCard","css","showEditCardDialog","saveConfig","swapCard","showMoveCardViewDialog","confDeleteCard","LitElement","registeredDialog","registerEditCardDialog","element","fireEvent","dialogShowEvent","dialogTag","dialogImport","moveCardViewDialogParams","confirm","deleteCard","alert","message"],"mappings":"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","file":"hui-view-editable.chunk.js","sourcesContent":["import {\n  html,\n  LitElement,\n  customElement,\n  property,\n  css,\n  CSSResult,\n  TemplateResult,\n} from \"lit-element\";\nimport \"@material/mwc-button\";\nimport \"@polymer/paper-menu-button/paper-menu-button\";\nimport \"@polymer/paper-icon-button/paper-icon-button\";\nimport \"@polymer/paper-listbox/paper-listbox\";\n\nimport { showEditCardDialog } from \"../editor/card-editor/show-edit-card-dialog\";\nimport { confDeleteCard } from \"../editor/delete-card\";\nimport { HomeAssistant } from \"../../../types\";\nimport { LovelaceCardConfig } from \"../../../data/lovelace\";\nimport { Lovelace } from \"../types\";\nimport { swapCard } from \"../editor/config-util\";\nimport { showMoveCardViewDialog } from \"../editor/card-editor/show-move-card-view-dialog\";\n\n@customElement(\"hui-card-options\")\nexport class HuiCardOptions extends LitElement {\n  public cardConfig?: LovelaceCardConfig;\n\n  @property() public hass?: HomeAssistant;\n\n  @property() public lovelace?: Lovelace;\n\n  @property() public path?: [number, number];\n\n  protected render(): TemplateResult | void {\n    return html`\n      <slot></slot>\n      <div class=\"options\">\n        <div class=\"primary-actions\">\n          <mwc-button @click=\"${this._editCard}\"\n            >${this.hass!.localize(\n              \"ui.panel.lovelace.editor.edit_card.edit\"\n            )}</mwc-button\n          >\n        </div>\n        <div class=\"secondary-actions\">\n          <paper-icon-button\n            title=\"Move card down\"\n            class=\"move-arrow\"\n            icon=\"hass:arrow-down\"\n            @click=\"${this._cardDown}\"\n            ?disabled=\"${this.lovelace!.config.views[this.path![0]].cards!\n              .length ===\n              this.path![1] + 1}\"\n          ></paper-icon-button>\n          <paper-icon-button\n            title=\"Move card up\"\n            class=\"move-arrow\"\n            icon=\"hass:arrow-up\"\n            @click=\"${this._cardUp}\"\n            ?disabled=\"${this.path![1] === 0}\"\n          ></paper-icon-button>\n          <paper-menu-button\n            horizontal-align=\"right\"\n            vertical-align=\"bottom\"\n            vertical-offset=\"40\"\n          >\n            <paper-icon-button\n              icon=\"hass:dots-vertical\"\n              slot=\"dropdown-trigger\"\n            ></paper-icon-button>\n            <paper-listbox slot=\"dropdown-content\">\n              <paper-item @click=\"${this._moveCard}\"\n                >${this.hass!.localize(\n                  \"ui.panel.lovelace.editor.edit_card.move\"\n                )}</paper-item\n              >\n              <paper-item @click=\"${this._deleteCard}\"\n                >${this.hass!.localize(\n                  \"ui.panel.lovelace.editor.edit_card.delete\"\n                )}</paper-item\n              >\n            </paper-listbox>\n          </paper-menu-button>\n        </div>\n      </div>\n    `;\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      div.options {\n        border-top: 1px solid #e8e8e8;\n        padding: 5px 8px;\n        background: var(--paper-card-background-color, white);\n        box-shadow: rgba(0, 0, 0, 0.14) 0px 2px 2px 0px,\n          rgba(0, 0, 0, 0.12) 0px 1px 5px -4px,\n          rgba(0, 0, 0, 0.2) 0px 3px 1px -2px;\n        display: flex;\n      }\n\n      div.options .primary-actions {\n        flex: 1;\n        margin: auto;\n      }\n\n      div.options .secondary-actions {\n        flex: 4;\n        text-align: right;\n      }\n\n      paper-icon-button {\n        color: var(--primary-text-color);\n      }\n\n      paper-icon-button.move-arrow[disabled] {\n        color: var(--disabled-text-color);\n      }\n\n      paper-menu-button {\n        color: var(--secondary-text-color);\n        padding: 0;\n      }\n\n      paper-item.header {\n        color: var(--primary-text-color);\n        text-transform: uppercase;\n        font-weight: 500;\n        font-size: 14px;\n      }\n\n      paper-item {\n        cursor: pointer;\n      }\n    `;\n  }\n\n  private _editCard(): void {\n    showEditCardDialog(this, {\n      lovelace: this.lovelace!,\n      path: this.path!,\n    });\n  }\n\n  private _cardUp(): void {\n    const lovelace = this.lovelace!;\n    const path = this.path!;\n    lovelace.saveConfig(\n      swapCard(lovelace.config, path, [path[0], path[1] - 1])\n    );\n  }\n\n  private _cardDown(): void {\n    const lovelace = this.lovelace!;\n    const path = this.path!;\n    lovelace.saveConfig(\n      swapCard(lovelace.config, path, [path[0], path[1] + 1])\n    );\n  }\n\n  private _moveCard(): void {\n    showMoveCardViewDialog(this, {\n      path: this.path!,\n      lovelace: this.lovelace!,\n    });\n  }\n\n  private _deleteCard(): void {\n    confDeleteCard(this.lovelace!, this.path!);\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-card-options\": HuiCardOptions;\n  }\n}\n","import { fireEvent } from \"../../../../common/dom/fire_event\";\nimport { Lovelace } from \"../../types\";\n\ndeclare global {\n  // for fire event\n  interface HASSDomEvents {\n    \"show-move-card-view\": MoveCardViewDialogParams;\n  }\n}\n\nlet registeredDialog = false;\n\nexport interface MoveCardViewDialogParams {\n  path: [number, number];\n  lovelace: Lovelace;\n}\n\nconst registerEditCardDialog = (element: HTMLElement): Event =>\n  fireEvent(element, \"register-dialog\", {\n    dialogShowEvent: \"show-move-card-view\",\n    dialogTag: \"hui-dialog-move-card-view\",\n    dialogImport: () =>\n      import(/* webpackChunkName: \"hui-dialog-move-card-view\" */ \"./hui-dialog-move-card-view\"),\n  });\n\nexport const showMoveCardViewDialog = (\n  element: HTMLElement,\n  moveCardViewDialogParams: MoveCardViewDialogParams\n): void => {\n  if (!registeredDialog) {\n    registeredDialog = true;\n    registerEditCardDialog(element);\n  }\n  fireEvent(element, \"show-move-card-view\", moveCardViewDialogParams);\n};\n","import { Lovelace } from \"../types\";\nimport { deleteCard } from \"./config-util\";\n\nexport async function confDeleteCard(\n  lovelace: Lovelace,\n  path: [number, number]\n): Promise<void> {\n  if (!confirm(\"Are you sure you want to delete this card?\")) {\n    return;\n  }\n  try {\n    await lovelace.saveConfig(deleteCard(lovelace.config, path));\n  } catch (err) {\n    alert(`Deleting failed: ${err.message}`);\n  }\n}\n","// hui-view dependencies for when in edit mode.\nimport \"@polymer/paper-fab/paper-fab\";\nimport \"./components/hui-card-options\";\n"],"sourceRoot":""}