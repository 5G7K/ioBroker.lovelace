{"version":3,"sources":["webpack:///./src/cards/ha-media_player-card.js","webpack:///./src/cards/ha-weather-card.js","webpack:///./src/common/dom/load_resource.ts","webpack:///./src/common/dom/scroll-to-target.ts","webpack:///./src/common/dom/setup-leaflet-map.ts","webpack:///./src/common/entity/extract_views.ts","webpack:///./src/common/entity/get_group_entities.ts","webpack:///./src/common/entity/get_view_entities.ts","webpack:///./src/common/entity/split_by_groups.ts","webpack:///./src/common/entity/valid_entity_id.ts","webpack:///./src/common/string/compare.ts","webpack:///./src/common/util/parse-aspect-ratio.ts","webpack:///./src/common/util/render-status.ts","webpack:///./src/common/util/subscribe-one.ts","webpack:///./src/components/buttons/ha-call-service-button.js","webpack:///./src/components/buttons/ha-progress-button.js","webpack:///./src/components/entity/ha-state-label-badge.ts","webpack:///./src/components/ha-card.ts","webpack:///./src/components/ha-date-input.ts","webpack:///./src/components/ha-label-badge.ts","webpack:///./src/components/ha-paper-icon-button-arrow-next.ts","webpack:///./src/components/ha-paper-icon-button-next.ts","webpack:///./src/components/ha-start-voice-button.js","webpack:///./src/data/alarm_control_panel.ts","webpack:///./src/data/area_registry.ts","webpack:///./src/data/device_registry.ts","webpack:///./src/data/entity.ts","webpack:///./src/data/input_datetime.ts","webpack:///./src/data/input_text.ts","webpack:///./src/data/lovelace.ts","webpack:///./src/data/media-player.ts","webpack:///./src/data/shopping-list.ts","webpack:///./src/data/ws-notifications.ts","webpack:///./src/layouts/ha-app-layout.js","webpack:///./src/panels/lovelace/cards/hui-alarm-panel-card.ts","webpack:///./src/panels/lovelace/cards/hui-conditional-card.ts","webpack:///./src/panels/lovelace/cards/hui-entities-card.ts","webpack:///./src/panels/lovelace/cards/hui-entity-button-card.ts","webpack:///./src/panels/lovelace/cards/hui-entity-filter-card.ts","webpack:///./src/panels/lovelace/cards/hui-error-card.ts","webpack:///./src/panels/lovelace/cards/hui-gauge-card.ts","webpack:///./src/panels/lovelace/cards/hui-glance-card.ts","webpack:///./src/panels/lovelace/cards/hui-history-graph-card.js","webpack:///./src/panels/lovelace/cards/hui-horizontal-stack-card.ts","webpack:///./src/panels/lovelace/cards/hui-iframe-card.ts","webpack:///./src/panels/lovelace/cards/hui-legacy-wrapper-card.js","webpack:///./src/panels/lovelace/cards/hui-light-card.ts","webpack:///./src/panels/lovelace/cards/hui-map-card.ts","webpack:///./src/panels/lovelace/cards/hui-markdown-card.ts","webpack:///./src/panels/lovelace/cards/hui-media-control-card.js","webpack:///./src/panels/lovelace/cards/hui-picture-card.ts","webpack:///./src/panels/lovelace/cards/hui-picture-elements-card.ts","webpack:///./src/panels/lovelace/cards/hui-picture-entity-card.ts","webpack:///./src/panels/lovelace/cards/hui-picture-glance-card.ts","webpack:///./src/panels/lovelace/cards/hui-plant-status-card.ts","webpack:///./src/panels/lovelace/cards/hui-sensor-card.ts","webpack:///./src/panels/lovelace/cards/hui-shopping-list-card.ts","webpack:///./src/panels/lovelace/cards/hui-stack-card.ts","webpack:///./src/panels/lovelace/cards/hui-thermostat-card.ts","webpack:///./src/panels/lovelace/cards/hui-vertical-stack-card.ts","webpack:///./src/panels/lovelace/cards/hui-weather-forecast-card.js","webpack:///./src/panels/lovelace/cards/picture-elements/create-styled-hui-element.ts","webpack:///./src/panels/lovelace/common/call-service.ts","webpack:///./src/panels/lovelace/common/compute-card-size.ts","webpack:///./src/panels/lovelace/common/compute-notifications.ts","webpack:///./src/panels/lovelace/common/compute-tooltip.ts","webpack:///./src/panels/lovelace/common/create-card-element.ts","webpack:///./src/panels/lovelace/common/create-hui-element.ts","webpack:///./src/panels/lovelace/common/create-row-element.ts","webpack:///./src/panels/lovelace/common/directives/long-press-directive.ts","webpack:///./src/panels/lovelace/common/entity/toggle-entity.ts","webpack:///./src/panels/lovelace/common/entity/turn-on-off-entities.ts","webpack:///./src/panels/lovelace/common/entity/turn-on-off-entity.ts","webpack:///./src/panels/lovelace/common/generate-lovelace-config.ts","webpack:///./src/panels/lovelace/common/handle-click.ts","webpack:///./src/panels/lovelace/common/has-changed.ts","webpack:///./src/panels/lovelace/common/process-config-entities.ts","webpack:///./src/panels/lovelace/common/validate-condition.ts","webpack:///./src/panels/lovelace/components/hui-entities-toggle.ts","webpack:///./src/panels/lovelace/components/hui-generic-entity-row.ts","webpack:///./src/panels/lovelace/components/hui-image.ts","webpack:///./src/panels/lovelace/components/hui-timestamp-display.ts","webpack:///./src/panels/lovelace/components/hui-warning-element.ts","webpack:///./src/panels/lovelace/components/hui-warning.ts","webpack:///./src/panels/lovelace/components/notifications/hui-configurator-notification-item.ts","webpack:///./src/panels/lovelace/components/notifications/hui-notification-drawer.js","webpack:///./src/panels/lovelace/components/notifications/hui-notification-item-template.ts","webpack:///./src/panels/lovelace/components/notifications/hui-notification-item.ts","webpack:///./src/panels/lovelace/components/notifications/hui-notifications-button.ts","webpack:///./src/panels/lovelace/components/notifications/hui-persistent-notification-item.ts","webpack:///./src/panels/lovelace/editor/card-editor/show-edit-card-dialog.ts","webpack:///./src/panels/lovelace/editor/config-util.ts","webpack:///./src/panels/lovelace/editor/lovelace-editor/show-edit-lovelace-dialog.ts","webpack:///./src/panels/lovelace/editor/show-save-config-dialog.ts","webpack:///./src/panels/lovelace/editor/view-editor/show-edit-view-dialog.ts","webpack:///./src/panels/lovelace/elements/hui-conditional-element.ts","webpack:///./src/panels/lovelace/elements/hui-icon-element.ts","webpack:///./src/panels/lovelace/elements/hui-image-element.ts","webpack:///./src/panels/lovelace/elements/hui-service-button-element.ts","webpack:///./src/panels/lovelace/elements/hui-state-badge-element.ts","webpack:///./src/panels/lovelace/elements/hui-state-icon-element.ts","webpack:///./src/panels/lovelace/elements/hui-state-label-element.ts","webpack:///./src/panels/lovelace/entity-rows/hui-climate-entity-row.ts","webpack:///./src/panels/lovelace/entity-rows/hui-cover-entity-row.ts","webpack:///./src/panels/lovelace/entity-rows/hui-group-entity-row.ts","webpack:///./src/panels/lovelace/entity-rows/hui-input-datetime-entity-row.ts","webpack:///./src/panels/lovelace/entity-rows/hui-input-number-entity-row.ts","webpack:///./src/panels/lovelace/entity-rows/hui-input-select-entity-row.ts","webpack:///./src/panels/lovelace/entity-rows/hui-input-text-entity-row.ts","webpack:///./src/panels/lovelace/entity-rows/hui-lock-entity-row.ts","webpack:///./src/panels/lovelace/entity-rows/hui-media-player-entity-row.ts","webpack:///./src/panels/lovelace/entity-rows/hui-scene-entity-row.ts","webpack:///./src/panels/lovelace/entity-rows/hui-script-entity-row.ts","webpack:///./src/panels/lovelace/entity-rows/hui-sensor-entity-row.ts","webpack:///./src/panels/lovelace/entity-rows/hui-text-entity-row.ts","webpack:///./src/panels/lovelace/entity-rows/hui-timer-entity-row.ts","webpack:///./src/panels/lovelace/entity-rows/hui-toggle-entity-row.ts","webpack:///./src/panels/lovelace/ha-panel-lovelace.ts","webpack:///./src/panels/lovelace/hui-root.ts","webpack:///./src/panels/lovelace/hui-view.ts","webpack:///./src/panels/lovelace/special-rows/hui-call-service-row.ts","webpack:///./src/panels/lovelace/special-rows/hui-divider-row.ts","webpack:///./src/panels/lovelace/special-rows/hui-section-row.ts","webpack:///./src/panels/lovelace/special-rows/hui-weblink-row.ts","webpack:///./src/panels/map/ha-entity-marker.js","webpack:///./src/resources/jquery.roundslider.ondemand.ts"],"names":["HaMediaPlayerCard","playerObj","oldPlayerObj","isPlaying","showProgress","_positionTracking","setInterval","updatePlaybackPosition","clearInterval","picture","stateObj","attributes","entity_picture","oldPicture","$","cover","style","backgroundImage","substr","_coverShowing","_coverLoadError","fetchMediaPlayerThumbnailWithCache","hass","entity_id","contentType","content_type","content","playbackPosition","currentProgress","coverShowing","coverLoadError","cls","isOff","isIdle","media_content_type","supportsTurnOn","supportsTurnOff","HassMediaPlayerEntity","localize","primaryTitle","state","supportsPause","hasMediaControl","isPaused","supportsPlay","computeStateName","ev","stopPropagation","nextTrack","fire","entityId","mediaPlayPause","previousTrack","togglePower","html","Object","type","computed","observer","playbackControlIcon","String","Number","Boolean","value","LocalizeMixin","EventsMixin","PolymerElement","customElements","define","HaWeatherCard","config","forecast","Array","rtl","reflectToAttribute","cardinalDirections","weatherIcons","cloudy","fog","hail","lightning","partlycloudy","pouring","rainy","snowy","sunny","windy","addEventListener","_onClick","slice","measure","lengthUnit","unit_system","length","name","condition","degree","degreenum","parseInt","isFinite","speed","getUnit","bearing","cardinalDirection","windBearingToText","toLowerCase","item","data","date","Date","toLocaleDateString","language","weekday","toLocaleTimeString","hour","computeRTL","_load","tag","url","Promise","resolve","reject","element","document","createElement","attr","parent","onload","onerror","async","rel","appendChild","loadCSS","loadJS","loadImg","loadModule","scrollToTarget","target","top","scroller","easingFn","easeOutQuad","t","b","c","d","animationId","Math","random","duration","startTime","now","currentScrollTop","scrollTop","deltaScrollTop","_currentAnimationId","updateFrame","elapsedTime","requestAnimationFrame","bind","call","setupLeafletMap","mapElement","parentNode","Error","Leaflet","Icon","Default","imagePath","map","setAttribute","setView","tileLayer","Browser","retina","attribution","subdomains","minZoom","maxZoom","addTo","extractViews","entities","views","keys","forEach","entity","view","push","sort","view1","view2","DEFAULT_VIEW_ENTITY_ID","order","getGroupEntities","group","result","getViewEntities","viewEntities","hidden","computeDomain","groupEntities","grEntityId","grEntity","splitByGroups","groups","ungrouped","validEntityId","test","compare","a","caseInsensitiveCompare","parseOrThrow","num","parsed","parseFloat","isNaN","parseAspectRatio","input","endsWith","w","h","arr","replace","split","err","afterNextRender","cb","setTimeout","subscribeOne","conn","subscribe","unsub","items","HaCallServiceButton","progress","el","eventData","domain","service","serviceData","callService","then","actionSuccess","success","actionError","HaProgressButton","className","classList","container","add","remove","buttonTapped","tempClass","disabled","HaStateLabelBadge","customElement","property","_connected","startInterval","computeStateDomain","classMap","_computeValue","_computeIcon","_computeLabel","_timerTimeRemaining","changedProperties","fireEvent","has","domainIcon","stateIcon","includes","secondsToDuration","unit_of_measurement","_updateRemaining","undefined","calculateTimerRemaining","window","timerTimeRemaining","css","LitElement","HaCard","header","HaDateInput","year","_formatYear","month","_formatMonth","day","_formatDay","yearElement","shadowRoot","getElementById","monthElement","dayElement","HaLabelBadge","big","icon","image","label","description","paperIconButtonClass","get","HaPaperIconButtonArrowNext","getComputedStyle","direction","HaPaperIconButtonNext","HaStartVoiceButton","isComponentLoaded","dialogImport","dialogTag","canListen","notify","FORMAT_TEXT","FORMAT_NUMBER","callAlarmAction","action","code","createAreaRegistryEntry","values","callWS","updateAreaRegistryEntry","areaId","updates","area_id","deleteAreaRegistryEntry","fetchAreaRegistry","sendMessagePromise","areas","ent1","ent2","subscribeAreaRegistryUpdates","store","subscribeEvents","debounce","setState","subscribeAreaRegistry","onChange","createCollection","updateDeviceRegistryEntry","deviceId","device_id","fetchDeviceRegistry","subscribeDeviceRegistryUpdates","devices","subscribeDeviceRegistry","UNAVAILABLE","ENTITY_COMPONENT_DOMAINS","setInputDateTimeValue","time","param","setValue","fetchConfig","force","saveConfig","subscribeLovelaceUpdates","SUPPORT_PAUSE","SUPPORT_NEXT_TRACK","SUPPORTS_PLAY","OFF_STATES","timeCachePromiseFunc","fetchMediaPlayerThumbnail","fetchItems","updateItem","itemId","item_id","clearItems","addItem","fetchNotifications","subscribeUpdates","ntf","subscribeNotifications","HaAppLayout","ICONS","armed_away","armed_custom_bypass","armed_home","armed_night","disarmed","pending","triggered","BUTTONS","HuiAlarmPanelCard","states","_config","code_format","defaults","_code","changedProps","oldHass","_label","_stateIconLabel","_handleActionClick","_handlePadClick","stateLabel","pop","e","val","currentTarget","HuiConditionalCard","card","conditions","isArray","validateConditionalConfig","_card","parentElement","removeChild","createCardElement","update","computeCardSize","_hass","visible","checkConditionsMet","setProperty","HTMLElement","HuiEntitiesCard","querySelectorAll","entitiesToggle","querySelector","title","processConfigEntities","theme","_configEntities","applyThemesOnElement","themes","show_header_toggle","conf","entityConf","renderEntity","createRowElement","DOMAINS_HIDE_MORE_INFO","_handleClick","HuiEntityButtonCard","tap_action","hold_action","show_icon","show_name","isValidEntityId","DOMAINS_TOGGLE","_handleTap","_handleHold","longPress","styleMap","filter","_computeBrightness","color","_computeColor","height","icon_height","brightness","hs_color","hue","sat","handleClick","EntityFilterCard","_element","getCardSize","state_filter","_baseCardConfig","lastChild","entitiesList","show_empty","display","_cardElement","tagName","setConfig","isPanel","createErrorCardElement","createErrorCardConfig","error","origConfig","HuiErrorCard","_toStr","JSON","stringify","severityMap","red","green","yellow","normal","HuiGaugeCard","min","max","_setBaseUnit","_baseUnit","transform","_translateTurn","_computeSeverity","unit","hasConfigOrEntityChanged","_updated","isConnected","baseUnit","_computeBaseUnit","numberValue","sections","severity","sectionsArray","sortable","maxTurnValue","clientWidth","HuiGlanceCard","ceil","columns","requestUpdate","show_state","computeStateDisplay","HuiHistoryGraphCard","_entities","_names","setProperties","_cacheConfig","cacheKey","join","hoursToShow","hours_to_show","refresh","refresh_interval","_stateHistory","_stateHistoryLoading","HuiHorizontalStackCard","totalSize","_cards","elementSize","HuiStackCard","HuiIframeCard","aspect_ratio","aspectRatio","LegacyWrapperCard","_tag","toUpperCase","_domain","_ensureElement","lightConfig","radius","step","circleShape","startAngle","width","sliderType","lineCap","handleSize","showTooltip","animation","HuiLightCard","renderStyle","_handleMoreInfo","loadRoundslider","loaded","_roundSliderStyle","roundSliderStyle","_jQuery","jQuery","roundSlider","change","_setBrightness","drag","_dragEvent","start","_showBrightness","stop","_hideBrightness","innerHTML","round","attrs","clearTimeout","_brightnessTimout","brightness_pct","toggleEntity","HuiMapCard","reflect","_leafletMap","invalidateSize","geo_location_sources","ratio","ar","toFixed","floor","hasUpdated","loadMap","_attachObserver","_resizeObserver","unobserve","_mapEl","removeEventListener","_debouncedResizeListener","_fitMap","root","paddingBottom","_drawEntities","zoom","default_zoom","_mapItems","LatLng","latitude","longitude","bounds","latLngBounds","getLatLng","fitBounds","pad","getZoom","setZoom","marker","mapItems","allEntities","concat","includesAll","source","passive","entityPicture","gpsAccuracy","gps_accuracy","divIcon","iconSize","interactive","circle","entityName","part","addLayer","ResizeObserver","observe","HuiMarkdownCard","HuiMediaControlCard","HuiPictureCard","clickable","HuiPictureElementsCard","camera_image","state_image","elements","camera_view","elementConfig","createStyledHuiElement","HuiPictureEntityCard","footer","STATES_OFF","Set","HuiPictureGlanceCard","_entitiesDialog","_entitiesToggle","force_dialog","dialog","_openDialog","_callService","SENSORS","moisture","temperature","conductivity","battery","HuiPlantStatusCard","computeAttributes","computeIcon","problem","indexOf","unit_of_measurement_dict","key","batLvl","sensors","midPoint","_Ax","_Ay","_Bx","_By","_Zx","_Zy","getPath","coords","next","Z","X","Y","path","last","coord","calcPoints","history","hours","detail","margin","yRatio","xRatio","getCoords","i","offset","depth","subItem","index","average","reduce","sum","entry","x","y","coordinates","apply","getTime","res","point","age","last_changed","abs","toString","HuiSensorCard","cardConfig","graph","_history","svg","_date","minute","_getHistory","endTime","setHours","getHours","fetchRecent","stateHistory","HuiShoppingListCard","_uncheckedItems","_checkedItems","_fetchData","_unsubEvents","connection","_addItem","_addKeyPress","repeat","id","complete","_completeItem","_saveEdit","_clearItems","checkedItems","uncheckedItems","checked","blur","newItem","_newItem","focus","keyCode","cards","_createCardElement","_rebuildCard","once","cardElToReplace","newCardEl","replaceChild","curCardEl","thermostatConfig","modeIcons","auto","manual","heat","cool","off","fan_only","eco","dry","idle","HuiThermostatCard","_loaded","_initialLoad","mode","operation_mode","_broadCard","current_temperature","operation_list","modeItem","_renderIcon","_genSliderValue","sliderValue","uiValue","_updateSetTemp","target_temp_step","UNIT_F","updateComplete","_sliderType","target_temp_low","target_temp_high","min_temp","max_temp","_setTemperature","_stepSize","formatTemp","handle","currentMode","_handleModeClick","temps","spaceStepSize","stepSize","HuiVerticalStackCard","HuiWeatherForecastCard","createHuiElement","prop","service_data","computeNotifications","computeTooltip","stateName","tooltip","tapTooltip","computeActionTooltip","holdTooltip","newline","isHold","navigation_path","CARD_TYPES","CUSTOM_TYPE_PREFIX","TIMEOUT","_createElement","deepClone","console","_createErrorElement","message","startsWith","timer","whenDefined","ELEMENT_TYPES","_hideErrorElement","SPECIAL_TYPES","DOMAIN_TO_ELEMENT_TYPE","alert","automation","climate","fan","input_boolean","input_number","input_select","input_text","light","lock","media_player","remote","scene","script","sensor","vacuum","water_heater","input_datetime","isTouch","navigator","maxTouchPoints","msMaxTouchPoints","LongPress","holdTime","ripple","held","cooldownStart","cooldownEnd","assign","borderRadius","position","pointerEvents","stopAnimation","event","preventDefault","cancelBubble","returnValue","clickStart","touches","pageX","pageY","startAnimation","clickEnd","dispatchEvent","Event","left","holdDown","simulatedRipple","getLongPress","body","longpress","longPressBind","directive","committer","turnOn","turnOnOffEntity","turnOnOffEntities","entityIds","domainsToCall","stateDomain","serviceDomain","DOMAINS_BADGES","HIDE_DOMAIN","subscribedRegistries","splitByAreas","registries","areasWithEntities","area","areaEntities","areaDevices","device","otherEntities","computeCards","entityCardOptions","friendly_name","unshift","computeDefaultViewStates","generateDefaultViewConfig","groupOrders","splittedByAreas","generateViewConfig","areaCards","splitted","gr1","gr2","badgeEntities","ungroupedEntitites","coll","badges","groupEntity","control","generateLovelaceConfig","viewEntity","idx","computeObjectId","location_name","subscribeEntityRegistry","all","components","__DEMO__","node","hold","actionConfig","navigate","every","state_not","HuiEntitiesToggle","_toggleEntities","some","forwardHaptic","HuiGenericEntityRow","showSecondary","secondary_info","toggleAttribute","UPDATE_INTERVAL","DEFAULT_FILTER","HuiImage","query","_attached","cameraImage","cameraView","_startUpdateCameraInterval","_stopUpdateCameraInterval","imageSrc","cameraObj","imageFallback","stateImage","_cameraImageSrc","stateFilter","_onImageError","_onImageLoad","_loadError","_lastImageHeight","_updateCameraImageSrc","_cameraUpdater","_image","offsetHeight","cameraState","fetchThumbnailUrlWithCache","FORMATS","format_date","datetime","format_date_time","format_time","INTERVAL_FORMAT","HuiTimestampDisplay","_startInterval","_clearInterval","ts","format","_format","_relative","_updateRelative","_interval","relativeTime","compareTime","includeTense","HuiWarningElement","HuiWarning","HuiConfiguratorNotificationItem","notification","HuiNotificationDrawer","open","notifications","_openTimer","narrow","HuiNotificationItemTemplate","HuiNotificationItem","HuiNotificationsButton","_clicked","opened","HuiPersistentNotificationItem","_computeTitle","created_at","_computeTooltip","_handleDismiss","notification_id","registeredDialog","dialogShowEvent","registerEditCardDialog","showEditCardDialog","editCardDialogParams","addCard","viewIndex","viewConf","replaceCard","cardIndex","origConf","ind","deleteCard","_origConf","swapCard","path1","path2","card1","card2","origView1","newView1","origCard","origView2","newView2","origView","moveCard","fromPath","toPath","fromView","toView","addView","viewConfig","replaceView","swapView","deleteView","_origView","registerEditLovelaceDialog","showEditLovelaceDialog","lovelace","showSaveDialog","saveDialogParams","registerEditViewDialog","showEditViewDialog","editViewDialogParams","HuiConditionalElement","_elements","updateElements","HuiIconElement","HuiImageElement","toggle","HuiServiceButtonElement","_service","HuiStateBadgeElement","HuiStateIconElement","HuiStateLabelElement","prefix","suffix","HuiClimateEntityRow","HuiCoverEntityRow","isTiltOnly","HuiGroupEntityRow","_computeCanToggle","HuiInputDatetimeEntityRow","has_date","_selectedValueChanged","_stopEventPropagation","has_time","_timeInputEl","trim","_dateInputEl","HuiInputNumberEntityRow","computeRTLDirection","_inputElement","HuiInputSelectEntityRow","_selectedChanged","options","option","selected","selectedItem","innerText","setInputSelectOption","HuiInputTextEntityRow","pattern","_inputEl","HuiLockEntityRow","HuiMediaPlayerEntityRow","supportsFeature","_computeControlIcon","_playPause","_nextTrack","_computeMediaTitle","media_artist","media_title","media_series_title","app_name","HuiSceneEntityRow","can_cancel","HuiScriptEntityRow","HuiSensorEntityRow","device_class","HuiTextEntityRow","HuiTimerEntityRow","_computeDisplay","oldStateObj","_calculateRemaining","_timeRemaining","HuiToggleEntityRow","editorLoaded","LovelacePanel","_closeEditor","_state","route","_columns","_forceFetchConfig","_errorMsg","_updateColumns","dockedSidebar","_fetchConfig","_lovelaceChanged","mqls","mql","matchMedia","addListener","_setLovelaceConfig","_regenerateConfig","matchColumns","cols","matches","_saving","showToast","text","dismissable","forceDiskRefresh","confMode","panel","log","editMode","enableFullEditMode","setEditMode","_updateLovelace","newConfig","previousConfig","previousMode","props","CSS_CACHE","JS_CACHE","loadedUnusedEntities","HUIRoot","_debouncedConfigChanged","_selectView","_curView","_unsubNotifications","_persistentNotifications","_routeData","_routeDataChanged","_notifications","_notificationsOpen","_handleNotificationsOpenChanged","_editMode","_editModeDisable","_editLovelace","_handleHelp","_deselect","_hideToolbar","_yamlMode","_handleRefresh","_handleUnusedEntities","_editModeEnable","_handleViewSelected","_moveViewLeft","_editView","_moveViewRight","_addView","haStyle","_viewRoot","huiView","newSelectView","selectedView","selectedViewInt","oldLovelace","_loadResources","resources","_updateNotifications","hideToolbar","location","search","persistent","configurator","oldIndex","newIndex","_layout","scrollTarget","_viewCache","unusedEntities","background","resource","importHref","warn","editCodeLoaded","getColumnIndex","columnEntityCount","size","minIndex","HUIView","_badges","renderStyles","_addCard","editModeChanged","configChanged","_createBadges","badge","_createCards","elementsToAppend","wrapper","cardSize","column","columnEl","HuiCallServiceRow","action_name","HuiDividerRow","HuiSectionRow","HuiWeblinkRow","HaEntityMarker","badgeTap"],"mappings":"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","file":"panel-lovelace.chunk.js","sourcesContent":["import \"@polymer/iron-flex-layout/iron-flex-layout-classes\";\nimport \"@polymer/paper-icon-button/paper-icon-button\";\nimport \"@polymer/paper-progress/paper-progress\";\nimport \"@polymer/paper-styles/element-styles/paper-material-styles\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport HassMediaPlayerEntity from \"../util/hass-media-player-model\";\nimport { fetchMediaPlayerThumbnailWithCache } from \"../data/media-player\";\n\nimport computeStateName from \"../common/entity/compute_state_name\";\nimport { EventsMixin } from \"../mixins/events-mixin\";\nimport LocalizeMixin from \"../mixins/localize-mixin\";\n\n/*\n * @appliesMixin LocalizeMixin\n * @appliesMixin EventsMixin\n */\nclass HaMediaPlayerCard extends LocalizeMixin(EventsMixin(PolymerElement)) {\n  static get template() {\n    return html`\n      <style\n        include=\"paper-material-styles iron-flex iron-flex-alignment iron-positioning\"\n      >\n        :host {\n          @apply --paper-material-elevation-1;\n          display: block;\n          position: relative;\n          font-size: 0px;\n          border-radius: 2px;\n        }\n\n        .banner {\n          position: relative;\n          background-color: white;\n          border-top-left-radius: 2px;\n          border-top-right-radius: 2px;\n        }\n\n        .banner:before {\n          display: block;\n          content: \"\";\n          width: 100%;\n          /* removed .25% from 16:9 ratio to fix YT black bars */\n          padding-top: 56%;\n          transition: padding-top 0.8s;\n        }\n\n        .banner.no-cover {\n          background-position: center center;\n          background-image: url(/static/images/card_media_player_bg.png);\n          background-repeat: no-repeat;\n          background-color: var(--primary-color);\n        }\n\n        .banner.content-type-music:before {\n          padding-top: 100%;\n        }\n\n        .banner.content-type-game:before {\n          padding-top: 100%;\n        }\n\n        .banner.no-cover:before {\n          padding-top: 88px;\n        }\n\n        .banner > .cover {\n          position: absolute;\n          top: 0;\n          left: 0;\n          right: 0;\n          bottom: 0;\n\n          border-top-left-radius: 2px;\n          border-top-right-radius: 2px;\n\n          background-position: center center;\n          background-size: cover;\n          transition: opacity 0.8s;\n          opacity: 1;\n        }\n\n        .banner.is-off > .cover {\n          opacity: 0;\n        }\n\n        .banner > .caption {\n          @apply --paper-font-caption;\n\n          position: absolute;\n          left: 0;\n          right: 0;\n          bottom: 0;\n\n          background-color: rgba(0, 0, 0, var(--dark-secondary-opacity));\n\n          padding: 8px 16px;\n\n          font-size: 14px;\n          font-weight: 500;\n          color: white;\n\n          transition: background-color 0.5s;\n        }\n\n        .banner.is-off > .caption {\n          background-color: initial;\n        }\n\n        .banner > .caption .title {\n          @apply --paper-font-common-nowrap;\n          font-size: 1.2em;\n          margin: 8px 0 4px;\n        }\n\n        .progress {\n          width: 100%;\n          height: var(--paper-progress-height, 4px);\n          margin-top: calc(-1 * var(--paper-progress-height, 4px));\n          --paper-progress-active-color: var(--accent-color);\n          --paper-progress-container-color: rgba(200, 200, 200, 0.5);\n        }\n\n        .controls {\n          position: relative;\n          @apply --paper-font-body1;\n          padding: 8px;\n          border-bottom-left-radius: 2px;\n          border-bottom-right-radius: 2px;\n          background-color: var(--paper-card-background-color, white);\n        }\n\n        .controls paper-icon-button {\n          width: 44px;\n          height: 44px;\n        }\n\n        .playback-controls {\n          direction: ltr;\n        }\n\n        paper-icon-button {\n          opacity: var(--dark-primary-opacity);\n        }\n\n        paper-icon-button[disabled] {\n          opacity: var(--dark-disabled-opacity);\n        }\n\n        paper-icon-button.primary {\n          width: 56px !important;\n          height: 56px !important;\n          background-color: var(--primary-color);\n          color: white;\n          border-radius: 50%;\n          padding: 8px;\n          transition: background-color 0.5s;\n        }\n\n        paper-icon-button.primary[disabled] {\n          background-color: rgba(0, 0, 0, var(--dark-disabled-opacity));\n        }\n\n        [invisible] {\n          visibility: hidden !important;\n        }\n      </style>\n\n      <div\n        class$=\"[[computeBannerClasses(playerObj, _coverShowing, _coverLoadError)]]\"\n      >\n        <div class=\"cover\" id=\"cover\"></div>\n\n        <div class=\"caption\">\n          [[_computeStateName(stateObj)]]\n          <div class=\"title\">[[computePrimaryText(localize, playerObj)]]</div>\n          [[playerObj.secondaryTitle]]<br />\n        </div>\n      </div>\n\n      <paper-progress\n        max=\"[[stateObj.attributes.media_duration]]\"\n        value=\"[[playbackPosition]]\"\n        hidden$=\"[[computeHideProgress(playerObj)]]\"\n        class=\"progress\"\n      ></paper-progress>\n\n      <div class=\"controls layout horizontal justified\">\n        <paper-icon-button\n          icon=\"hass:power\"\n          on-click=\"handleTogglePower\"\n          invisible$=\"[[computeHidePowerButton(playerObj)]]\"\n          class=\"self-center secondary\"\n        ></paper-icon-button>\n\n        <div class=\"playback-controls\">\n          <paper-icon-button\n            icon=\"hass:skip-previous\"\n            invisible$=\"[[!playerObj.supportsPreviousTrack]]\"\n            disabled=\"[[playerObj.isOff]]\"\n            on-click=\"handlePrevious\"\n          ></paper-icon-button>\n          <paper-icon-button\n            class=\"primary\"\n            icon=\"[[computePlaybackControlIcon(playerObj)]]\"\n            invisible$=\"[[!computePlaybackControlIcon(playerObj)]]\"\n            disabled=\"[[playerObj.isOff]]\"\n            on-click=\"handlePlaybackControl\"\n          ></paper-icon-button>\n          <paper-icon-button\n            icon=\"hass:skip-next\"\n            invisible$=\"[[!playerObj.supportsNextTrack]]\"\n            disabled=\"[[playerObj.isOff]]\"\n            on-click=\"handleNext\"\n          ></paper-icon-button>\n        </div>\n\n        <paper-icon-button\n          icon=\"hass:dots-vertical\"\n          on-click=\"handleOpenMoreInfo\"\n          class=\"self-center secondary\"\n        ></paper-icon-button>\n      </div>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      stateObj: Object,\n      playerObj: {\n        type: Object,\n        computed: \"computePlayerObj(hass, stateObj)\",\n        observer: \"playerObjChanged\",\n      },\n      playbackControlIcon: {\n        type: String,\n        computed: \"computePlaybackControlIcon(playerObj)\",\n      },\n      playbackPosition: Number,\n      _coverShowing: {\n        type: Boolean,\n        value: false,\n      },\n      _coverLoadError: {\n        type: Boolean,\n        value: false,\n      },\n    };\n  }\n\n  async playerObjChanged(playerObj, oldPlayerObj) {\n    if (playerObj.isPlaying && playerObj.showProgress) {\n      if (!this._positionTracking) {\n        this._positionTracking = setInterval(\n          () => this.updatePlaybackPosition(),\n          1000\n        );\n      }\n    } else if (this._positionTracking) {\n      clearInterval(this._positionTracking);\n      this._positionTracking = null;\n    }\n    if (playerObj.showProgress) {\n      this.updatePlaybackPosition();\n    }\n\n    const picture = playerObj.stateObj.attributes.entity_picture;\n    const oldPicture =\n      oldPlayerObj && oldPlayerObj.stateObj.attributes.entity_picture;\n\n    if (picture !== oldPicture && !picture) {\n      this.$.cover.style.backgroundImage = \"\";\n      return;\n    }\n    if (picture === oldPicture) {\n      return;\n    }\n\n    // We have a new picture url\n    // If entity picture is non-relative, we use that url directly.\n    if (picture.substr(0, 1) !== \"/\") {\n      this._coverShowing = true;\n      this._coverLoadError = false;\n      this.$.cover.style.backgroundImage = `url(${picture})`;\n      return;\n    }\n\n    try {\n      const {\n        content_type: contentType,\n        content,\n      } = await fetchMediaPlayerThumbnailWithCache(\n        this.hass,\n        playerObj.stateObj.entity_id\n      );\n      this._coverShowing = true;\n      this._coverLoadError = false;\n      this.$.cover.style.backgroundImage = `url(data:${contentType};base64,${content})`;\n    } catch (err) {\n      this._coverShowing = false;\n      this._coverLoadError = true;\n      this.$.cover.style.backgroundImage = \"\";\n    }\n  }\n\n  updatePlaybackPosition() {\n    this.playbackPosition = this.playerObj.currentProgress;\n  }\n\n  computeBannerClasses(playerObj, coverShowing, coverLoadError) {\n    var cls = \"banner\";\n\n    if (playerObj.isOff || playerObj.isIdle) {\n      cls += \" is-off no-cover\";\n    } else if (\n      !playerObj.stateObj.attributes.entity_picture ||\n      coverLoadError ||\n      !coverShowing\n    ) {\n      cls += \" no-cover\";\n    } else if (playerObj.stateObj.attributes.media_content_type === \"music\") {\n      cls += \" content-type-music\";\n    } else if (playerObj.stateObj.attributes.media_content_type === \"game\") {\n      cls += \" content-type-game\";\n    }\n    return cls;\n  }\n\n  computeHideProgress(playerObj) {\n    return !playerObj.showProgress;\n  }\n\n  computeHidePowerButton(playerObj) {\n    return playerObj.isOff\n      ? !playerObj.supportsTurnOn\n      : !playerObj.supportsTurnOff;\n  }\n\n  computePlayerObj(hass, stateObj) {\n    return new HassMediaPlayerEntity(hass, stateObj);\n  }\n\n  computePrimaryText(localize, playerObj) {\n    return (\n      playerObj.primaryTitle ||\n      localize(`state.media_player.${playerObj.stateObj.state}`) ||\n      localize(`state.default.${playerObj.stateObj.state}`) ||\n      playerObj.stateObj.state\n    );\n  }\n\n  computePlaybackControlIcon(playerObj) {\n    if (playerObj.isPlaying) {\n      return playerObj.supportsPause ? \"hass:pause\" : \"hass:stop\";\n    }\n    if (playerObj.hasMediaControl || playerObj.isOff || playerObj.isIdle) {\n      if (\n        playerObj.hasMediaControl &&\n        playerObj.supportsPause &&\n        !playerObj.isPaused\n      ) {\n        return \"hass:play-pause\";\n      }\n      return playerObj.supportsPlay ? \"hass:play\" : null;\n    }\n    return \"\";\n  }\n\n  _computeStateName(stateObj) {\n    return computeStateName(stateObj);\n  }\n\n  handleNext(ev) {\n    ev.stopPropagation();\n    this.playerObj.nextTrack();\n  }\n\n  handleOpenMoreInfo(ev) {\n    ev.stopPropagation();\n    this.fire(\"hass-more-info\", { entityId: this.stateObj.entity_id });\n  }\n\n  handlePlaybackControl(ev) {\n    ev.stopPropagation();\n    this.playerObj.mediaPlayPause();\n  }\n\n  handlePrevious(ev) {\n    ev.stopPropagation();\n    this.playerObj.previousTrack();\n  }\n\n  handleTogglePower(ev) {\n    ev.stopPropagation();\n    this.playerObj.togglePower();\n  }\n}\ncustomElements.define(\"ha-media_player-card\", HaMediaPlayerCard);\n","import { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport computeStateName from \"../common/entity/compute_state_name\";\n\nimport \"../components/ha-card\";\nimport \"../components/ha-icon\";\n\nimport { EventsMixin } from \"../mixins/events-mixin\";\nimport LocalizeMixin from \"../mixins/localize-mixin\";\nimport { computeRTL } from \"../common/util/compute_rtl\";\n\n/*\n * @appliesMixin LocalizeMixin\n */\nclass HaWeatherCard extends LocalizeMixin(EventsMixin(PolymerElement)) {\n  static get template() {\n    return html`\n      <style>\n        :host {\n          cursor: pointer;\n        }\n\n        .content {\n          padding: 0 20px 20px;\n        }\n\n        ha-icon {\n          color: var(--paper-item-icon-color);\n        }\n\n        .header {\n          font-family: var(--paper-font-headline_-_font-family);\n          -webkit-font-smoothing: var(\n            --paper-font-headline_-_-webkit-font-smoothing\n          );\n          font-size: var(--paper-font-headline_-_font-size);\n          font-weight: var(--paper-font-headline_-_font-weight);\n          letter-spacing: var(--paper-font-headline_-_letter-spacing);\n          line-height: var(--paper-font-headline_-_line-height);\n          text-rendering: var(\n            --paper-font-common-expensive-kerning_-_text-rendering\n          );\n          opacity: var(--dark-primary-opacity);\n          padding: 24px 16px 16px;\n          display: flex;\n          align-items: baseline;\n        }\n\n        .name {\n          margin-left: 16px;\n          font-size: 16px;\n          color: var(--secondary-text-color);\n        }\n\n        :host([rtl]) .name {\n          margin-left: 0px;\n          margin-right: 16px;\n        }\n\n        .now {\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n          flex-wrap: wrap;\n        }\n\n        .main {\n          display: flex;\n          align-items: center;\n          margin-right: 32px;\n        }\n\n        :host([rtl]) .main {\n          margin-right: 0px;\n        }\n\n        .main ha-icon {\n          --iron-icon-height: 72px;\n          --iron-icon-width: 72px;\n          margin-right: 8px;\n        }\n\n        :host([rtl]) .main ha-icon {\n          margin-right: 0px;\n        }\n\n        .main .temp {\n          font-size: 52px;\n          line-height: 1em;\n          position: relative;\n        }\n\n        :host([rtl]) .main .temp {\n          direction: ltr;\n          margin-right: 28px;\n        }\n\n        .main .temp span {\n          font-size: 24px;\n          line-height: 1em;\n          position: absolute;\n          top: 4px;\n        }\n\n        .measurand {\n          display: inline-block;\n        }\n\n        :host([rtl]) .measurand {\n          direction: ltr;\n        }\n\n        .forecast {\n          margin-top: 16px;\n          display: flex;\n          justify-content: space-between;\n        }\n\n        .forecast div {\n          flex: 0 0 auto;\n          text-align: center;\n        }\n\n        .forecast .icon {\n          margin: 4px 0;\n          text-align: center;\n        }\n\n        :host([rtl]) .forecast .temp {\n          direction: ltr;\n        }\n\n        .weekday {\n          font-weight: bold;\n        }\n\n        .attributes,\n        .templow,\n        .precipitation {\n          color: var(--secondary-text-color);\n        }\n\n        :host([rtl]) .precipitation {\n          direction: ltr;\n        }\n      </style>\n      <ha-card>\n        <div class=\"header\">\n          [[computeState(stateObj.state, localize)]]\n          <div class=\"name\">[[computeName(stateObj)]]</div>\n        </div>\n        <div class=\"content\">\n          <div class=\"now\">\n            <div class=\"main\">\n              <template is=\"dom-if\" if=\"[[showWeatherIcon(stateObj.state)]]\">\n                <ha-icon icon=\"[[getWeatherIcon(stateObj.state)]]\"></ha-icon>\n              </template>\n              <div class=\"temp\">\n                [[stateObj.attributes.temperature]]<span\n                  >[[getUnit('temperature')]]</span\n                >\n              </div>\n            </div>\n            <div class=\"attributes\">\n              <template\n                is=\"dom-if\"\n                if=\"[[_showValue(stateObj.attributes.pressure)]]\"\n              >\n                <div>\n                  [[localize('ui.card.weather.attributes.air_pressure')]]:\n                  <span class=\"measurand\">\n                    [[stateObj.attributes.pressure]] [[getUnit('air_pressure')]]\n                  </span>\n                </div>\n              </template>\n              <template\n                is=\"dom-if\"\n                if=\"[[_showValue(stateObj.attributes.humidity)]]\"\n              >\n                <div>\n                  [[localize('ui.card.weather.attributes.humidity')]]:\n                  <span class=\"measurand\"\n                    >[[stateObj.attributes.humidity]] %</span\n                  >\n                </div>\n              </template>\n              <template\n                is=\"dom-if\"\n                if=\"[[_showValue(stateObj.attributes.wind_speed)]]\"\n              >\n                <div>\n                  [[localize('ui.card.weather.attributes.wind_speed')]]:\n                  <span class=\"measurand\">\n                    [[getWindSpeed(stateObj.attributes.wind_speed)]]\n                  </span>\n                  [[getWindBearing(stateObj.attributes.wind_bearing, localize)]]\n                </div>\n              </template>\n            </div>\n          </div>\n          <template is=\"dom-if\" if=\"[[forecast]]\">\n            <div class=\"forecast\">\n              <template is=\"dom-repeat\" items=\"[[forecast]]\">\n                <div>\n                  <div class=\"weekday\">\n                    [[computeDate(item.datetime)]]<br />\n                    <template is=\"dom-if\" if=\"[[!_showValue(item.templow)]]\">\n                      [[computeTime(item.datetime)]]\n                    </template>\n                  </div>\n                  <template is=\"dom-if\" if=\"[[_showValue(item.condition)]]\">\n                    <div class=\"icon\">\n                      <ha-icon\n                        icon=\"[[getWeatherIcon(item.condition)]]\"\n                      ></ha-icon>\n                    </div>\n                  </template>\n                  <div class=\"temp\">\n                    [[item.temperature]] [[getUnit('temperature')]]\n                  </div>\n                  <template is=\"dom-if\" if=\"[[_showValue(item.templow)]]\">\n                    <div class=\"templow\">\n                      [[item.templow]] [[getUnit('temperature')]]\n                    </div>\n                  </template>\n                  <template is=\"dom-if\" if=\"[[_showValue(item.precipitation)]]\">\n                    <div class=\"precipitation\">\n                      [[item.precipitation]] [[getUnit('precipitation')]]\n                    </div>\n                  </template>\n                </div>\n              </template>\n            </div>\n          </template>\n        </div>\n      </ha-card>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      config: Object,\n      stateObj: Object,\n      forecast: {\n        type: Array,\n        computed: \"computeForecast(stateObj.attributes.forecast)\",\n      },\n      rtl: {\n        type: Boolean,\n        reflectToAttribute: true,\n        computed: \"_computeRTL(hass)\",\n      },\n    };\n  }\n\n  constructor() {\n    super();\n    this.cardinalDirections = [\n      \"N\",\n      \"NNE\",\n      \"NE\",\n      \"ENE\",\n      \"E\",\n      \"ESE\",\n      \"SE\",\n      \"SSE\",\n      \"S\",\n      \"SSW\",\n      \"SW\",\n      \"WSW\",\n      \"W\",\n      \"WNW\",\n      \"NW\",\n      \"NNW\",\n      \"N\",\n    ];\n    this.weatherIcons = {\n      \"clear-night\": \"hass:weather-night\",\n      cloudy: \"hass:weather-cloudy\",\n      fog: \"hass:weather-fog\",\n      hail: \"hass:weather-hail\",\n      lightning: \"hass:weather-lightning\",\n      \"lightning-rainy\": \"hass:weather-lightning-rainy\",\n      partlycloudy: \"hass:weather-partlycloudy\",\n      pouring: \"hass:weather-pouring\",\n      rainy: \"hass:weather-rainy\",\n      snowy: \"hass:weather-snowy\",\n      \"snowy-rainy\": \"hass:weather-snowy-rainy\",\n      sunny: \"hass:weather-sunny\",\n      windy: \"hass:weather-windy\",\n      \"windy-variant\": \"hass:weather-windy-variant\",\n    };\n  }\n\n  ready() {\n    this.addEventListener(\"click\", this._onClick);\n    super.ready();\n  }\n\n  _onClick() {\n    this.fire(\"hass-more-info\", { entityId: this.stateObj.entity_id });\n  }\n\n  computeForecast(forecast) {\n    return forecast && forecast.slice(0, 5);\n  }\n\n  getUnit(measure) {\n    const lengthUnit = this.hass.config.unit_system.length || \"\";\n    switch (measure) {\n      case \"air_pressure\":\n        return lengthUnit === \"km\" ? \"hPa\" : \"inHg\";\n      case \"length\":\n        return lengthUnit;\n      case \"precipitation\":\n        return lengthUnit === \"km\" ? \"mm\" : \"in\";\n      default:\n        return this.hass.config.unit_system[measure] || \"\";\n    }\n  }\n\n  computeState(state, localize) {\n    return localize(`state.weather.${state}`) || state;\n  }\n\n  computeName(stateObj) {\n    return (this.config && this.config.name) || computeStateName(stateObj);\n  }\n\n  showWeatherIcon(condition) {\n    return condition in this.weatherIcons;\n  }\n\n  getWeatherIcon(condition) {\n    return this.weatherIcons[condition];\n  }\n\n  windBearingToText(degree) {\n    const degreenum = parseInt(degree);\n    if (isFinite(degreenum)) {\n      return this.cardinalDirections[(((degreenum + 11.25) / 22.5) | 0) % 16];\n    }\n    return degree;\n  }\n\n  getWindSpeed(speed) {\n    return `${speed} ${this.getUnit(\"length\")}/h`;\n  }\n\n  getWindBearing(bearing, localize) {\n    if (bearing != null) {\n      const cardinalDirection = this.windBearingToText(bearing);\n      return `(${localize(\n        `ui.card.weather.cardinal_direction.${cardinalDirection.toLowerCase()}`\n      ) || cardinalDirection})`;\n    }\n    return ``;\n  }\n\n  _showValue(item) {\n    return typeof item !== \"undefined\" && item !== null;\n  }\n\n  computeDate(data) {\n    const date = new Date(data);\n    return date.toLocaleDateString(this.hass.language, { weekday: \"short\" });\n  }\n\n  computeTime(data) {\n    const date = new Date(data);\n    return date.toLocaleTimeString(this.hass.language, { hour: \"numeric\" });\n  }\n\n  _computeRTL(hass) {\n    return computeRTL(hass);\n  }\n}\ncustomElements.define(\"ha-weather-card\", HaWeatherCard);\n","// Load a resource and get a promise when loading done.\n// From: https://davidwalsh.name/javascript-loader\n\nconst _load = (\n  tag: \"link\" | \"script\" | \"img\",\n  url: string,\n  type?: \"module\"\n) => {\n  // This promise will be used by Promise.all to determine success or failure\n  return new Promise((resolve, reject) => {\n    const element = document.createElement(tag);\n    let attr = \"src\";\n    let parent = \"body\";\n\n    // Important success and error for the promise\n    element.onload = () => resolve(url);\n    element.onerror = () => reject(url);\n\n    // Need to set different attributes depending on tag type\n    switch (tag) {\n      case \"script\":\n        (element as HTMLScriptElement).async = true;\n        if (type) {\n          (element as HTMLScriptElement).type = type;\n        }\n        break;\n      case \"link\":\n        (element as HTMLLinkElement).type = \"text/css\";\n        (element as HTMLLinkElement).rel = \"stylesheet\";\n        attr = \"href\";\n        parent = \"head\";\n    }\n\n    // Inject into document to kick off loading\n    element[attr] = url;\n    document[parent].appendChild(element);\n  });\n};\n\nexport const loadCSS = (url: string) => _load(\"link\", url);\nexport const loadJS = (url: string) => _load(\"script\", url);\nexport const loadImg = (url: string) => _load(\"img\", url);\nexport const loadModule = (url: string) => _load(\"script\", url, \"module\");\n","/**\n * Scroll to a specific y coordinate.\n *\n * Copied from paper-scroll-header-panel.\n *\n * @method scroll\n * @param {number} top The coordinate to scroll to, along the y-axis.\n * @param {boolean} smooth true if the scroll position should be smoothly adjusted.\n */\nexport default function scrollToTarget(element, target) {\n  // the scroll event will trigger _updateScrollState directly,\n  // However, _updateScrollState relies on the previous `scrollTop` to update the states.\n  // Calling _updateScrollState will ensure that the states are synced correctly.\n  const top = 0;\n  const scroller = target;\n  const easingFn = function easeOutQuad(t, b, c, d) {\n    /* eslint-disable no-param-reassign, space-infix-ops, no-mixed-operators */\n    t /= d;\n    return -c * t * (t - 2) + b;\n    /* eslint-enable no-param-reassign, space-infix-ops, no-mixed-operators */\n  };\n  const animationId = Math.random();\n  const duration = 200;\n  const startTime = Date.now();\n  const currentScrollTop = scroller.scrollTop;\n  const deltaScrollTop = top - currentScrollTop;\n  element._currentAnimationId = animationId;\n  (function updateFrame() {\n    const now = Date.now();\n    const elapsedTime = now - startTime;\n    if (elapsedTime > duration) {\n      scroller.scrollTop = top;\n    } else if (element._currentAnimationId === animationId) {\n      scroller.scrollTop = easingFn(\n        elapsedTime,\n        currentScrollTop,\n        deltaScrollTop,\n        duration\n      );\n      requestAnimationFrame(updateFrame.bind(element));\n    }\n  }.call(element));\n}\n","import { Map } from \"leaflet\";\n\n// Sets up a Leaflet map on the provided DOM element\nexport type LeafletModuleType = typeof import(\"leaflet\");\n\nexport const setupLeafletMap = async (\n  mapElement: HTMLElement\n): Promise<[Map, LeafletModuleType]> => {\n  if (!mapElement.parentNode) {\n    throw new Error(\"Cannot setup Leaflet map on disconnected element\");\n  }\n  // tslint:disable-next-line\n  const Leaflet = (await import(/* webpackChunkName: \"leaflet\" */ \"leaflet\")) as LeafletModuleType;\n  Leaflet.Icon.Default.imagePath = \"/static/images/leaflet/images/\";\n\n  const map = Leaflet.map(mapElement);\n  const style = document.createElement(\"link\");\n  style.setAttribute(\"href\", \"/static/images/leaflet/leaflet.css\");\n  style.setAttribute(\"rel\", \"stylesheet\");\n  mapElement.parentNode.appendChild(style);\n  map.setView([52.3731339, 4.8903147], 13);\n  Leaflet.tileLayer(\n    `https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}${\n      Leaflet.Browser.retina ? \"@2x.png\" : \".png\"\n    }`,\n    {\n      attribution:\n        '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a>, &copy; <a href=\"https://carto.com/attributions\">CARTO</a>',\n      subdomains: \"abcd\",\n      minZoom: 0,\n      maxZoom: 20,\n    }\n  ).addTo(map);\n\n  return [map, Leaflet];\n};\n","import { HassEntities } from \"home-assistant-js-websocket\";\nimport { DEFAULT_VIEW_ENTITY_ID } from \"../const\";\nimport { GroupEntity } from \"../../types\";\n\n// Return an ordered array of available views\nexport default function extractViews(entities: HassEntities): GroupEntity[] {\n  const views: GroupEntity[] = [];\n\n  Object.keys(entities).forEach((entityId) => {\n    const entity = entities[entityId];\n    if (entity.attributes.view) {\n      views.push(entity as GroupEntity);\n    }\n  });\n\n  views.sort((view1, view2) => {\n    if (view1.entity_id === DEFAULT_VIEW_ENTITY_ID) {\n      return -1;\n    }\n    if (view2.entity_id === DEFAULT_VIEW_ENTITY_ID) {\n      return 1;\n    }\n    return view1.attributes.order - view2.attributes.order;\n  });\n\n  return views;\n}\n","import { HassEntities } from \"home-assistant-js-websocket\";\nimport { GroupEntity } from \"../../types\";\n\nexport default function getGroupEntities(\n  entities: HassEntities,\n  group: GroupEntity\n) {\n  const result = {};\n\n  group.attributes.entity_id.forEach((entityId) => {\n    const entity = entities[entityId];\n\n    if (entity) {\n      result[entity.entity_id] = entity;\n    }\n  });\n\n  return result;\n}\n","import { HassEntities } from \"home-assistant-js-websocket\";\nimport computeDomain from \"./compute_domain\";\nimport getGroupEntities from \"./get_group_entities\";\nimport { GroupEntity } from \"../../types\";\n\n// Return an object containing all entities that the view will show\n// including embedded groups.\nexport default function getViewEntities(\n  entities: HassEntities,\n  view: GroupEntity\n): HassEntities {\n  const viewEntities = {};\n\n  view.attributes.entity_id.forEach((entityId) => {\n    const entity = entities[entityId];\n\n    if (entity && !entity.attributes.hidden) {\n      viewEntities[entity.entity_id] = entity;\n\n      if (computeDomain(entity.entity_id) === \"group\") {\n        const groupEntities = getGroupEntities(entities, entity as GroupEntity);\n\n        Object.keys(groupEntities).forEach((grEntityId) => {\n          const grEntity = groupEntities[grEntityId];\n\n          if (!grEntity.attributes.hidden) {\n            viewEntities[grEntityId] = grEntity;\n          }\n        });\n      }\n    }\n  });\n\n  return viewEntities;\n}\n","import computeDomain from \"./compute_domain\";\nimport { HassEntities } from \"home-assistant-js-websocket\";\nimport { GroupEntity } from \"../../types\";\n\n// Split a collection into a list of groups and a 'rest' list of ungrouped\n// entities.\n// Returns { groups: [], ungrouped: {} }\nexport default function splitByGroups(entities: HassEntities) {\n  const groups: GroupEntity[] = [];\n  const ungrouped: HassEntities = {};\n\n  Object.keys(entities).forEach((entityId) => {\n    const entity = entities[entityId];\n\n    if (computeDomain(entityId) === \"group\") {\n      groups.push(entity as GroupEntity);\n    } else {\n      ungrouped[entityId] = entity;\n    }\n  });\n\n  groups.forEach((group) =>\n    group.attributes.entity_id.forEach((entityId) => {\n      delete ungrouped[entityId];\n    })\n  );\n\n  return { groups, ungrouped };\n}\n","const validEntityId = /^(\\w+)\\.(\\w+)$/;\nexport default (entityId: string) => validEntityId.test(entityId);\n","export const compare = (a: string, b: string) => {\n  if (a < b) {\n    return -1;\n  }\n  if (a > b) {\n    return 1;\n  }\n\n  return 0;\n};\n\nexport const caseInsensitiveCompare = (a: string, b: string) =>\n  compare(a.toLowerCase(), b.toLowerCase());\n","// Handle 16x9, 16:9, 1.78x1, 1.78:1, 1.78\n// Ignore everything else\nconst parseOrThrow = (num) => {\n  const parsed = parseFloat(num);\n  if (isNaN(parsed)) {\n    throw new Error(`${num} is not a number`);\n  }\n  return parsed;\n};\n\nexport default function parseAspectRatio(input: string) {\n  if (!input) {\n    return null;\n  }\n  try {\n    if (input.endsWith(\"%\")) {\n      return { w: 100, h: parseOrThrow(input.substr(0, input.length - 1)) };\n    }\n\n    const arr = input.replace(\":\", \"x\").split(\"x\");\n    if (arr.length === 0) {\n      return null;\n    }\n\n    return arr.length === 1\n      ? { w: parseOrThrow(arr[0]), h: 1 }\n      : { w: parseOrThrow(arr[0]), h: parseOrThrow(arr[1]) };\n  } catch (err) {\n    // Ignore the error\n  }\n  return null;\n}\n","export const afterNextRender = (cb: () => void): void => {\n  requestAnimationFrame(() => setTimeout(cb, 0));\n};\n","import { UnsubscribeFunc, Connection } from \"home-assistant-js-websocket\";\n\nexport const subscribeOne = async <T>(\n  conn: Connection,\n  subscribe: (conn: Connection, onChange: (items: T) => void) => UnsubscribeFunc\n) =>\n  new Promise<T>((resolve) => {\n    const unsub = subscribe(conn, (items) => {\n      unsub();\n      resolve(items);\n    });\n  });\n","import { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport \"./ha-progress-button\";\nimport { EventsMixin } from \"../../mixins/events-mixin\";\n\n/*\n * @appliesMixin EventsMixin\n */\nclass HaCallServiceButton extends EventsMixin(PolymerElement) {\n  static get template() {\n    return html`\n      <ha-progress-button\n        id=\"progress\"\n        progress=\"[[progress]]\"\n        on-click=\"buttonTapped\"\n        ><slot></slot\n      ></ha-progress-button>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: {\n        type: Object,\n      },\n\n      progress: {\n        type: Boolean,\n        value: false,\n      },\n\n      domain: {\n        type: String,\n      },\n\n      service: {\n        type: String,\n      },\n\n      serviceData: {\n        type: Object,\n        value: {},\n      },\n    };\n  }\n\n  buttonTapped() {\n    this.progress = true;\n    var el = this;\n    var eventData = {\n      domain: this.domain,\n      service: this.service,\n      serviceData: this.serviceData,\n    };\n\n    this.hass\n      .callService(this.domain, this.service, this.serviceData)\n      .then(\n        function() {\n          el.progress = false;\n          el.$.progress.actionSuccess();\n          eventData.success = true;\n        },\n        function() {\n          el.progress = false;\n          el.$.progress.actionError();\n          eventData.success = false;\n        }\n      )\n      .then(function() {\n        el.fire(\"hass-service-called\", eventData);\n      });\n  }\n}\n\ncustomElements.define(\"ha-call-service-button\", HaCallServiceButton);\n","import \"@material/mwc-button\";\nimport \"@polymer/paper-spinner/paper-spinner\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nclass HaProgressButton extends PolymerElement {\n  static get template() {\n    return html`\n      <style>\n        .container {\n          position: relative;\n          display: inline-block;\n        }\n\n        mwc-button {\n          transition: all 1s;\n        }\n\n        .success mwc-button {\n          --mdc-theme-primary: white;\n          background-color: var(--google-green-500);\n          transition: none;\n        }\n\n        .error mwc-button {\n          --mdc-theme-primary: white;\n          background-color: var(--google-red-500);\n          transition: none;\n        }\n\n        .progress {\n          @apply --layout;\n          @apply --layout-center-center;\n          position: absolute;\n          top: 0;\n          left: 0;\n          right: 0;\n          bottom: 0;\n        }\n      </style>\n      <div class=\"container\" id=\"container\">\n        <mwc-button\n          id=\"button\"\n          disabled=\"[[computeDisabled(disabled, progress)]]\"\n          on-click=\"buttonTapped\"\n        >\n          <slot></slot>\n        </mwc-button>\n        <template is=\"dom-if\" if=\"[[progress]]\">\n          <div class=\"progress\"><paper-spinner active=\"\"></paper-spinner></div>\n        </template>\n      </div>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: {\n        type: Object,\n      },\n\n      progress: {\n        type: Boolean,\n        value: false,\n      },\n\n      disabled: {\n        type: Boolean,\n        value: false,\n      },\n    };\n  }\n\n  tempClass(className) {\n    var classList = this.$.container.classList;\n    classList.add(className);\n    setTimeout(() => {\n      classList.remove(className);\n    }, 1000);\n  }\n\n  ready() {\n    super.ready();\n    this.addEventListener(\"click\", (ev) => this.buttonTapped(ev));\n  }\n\n  buttonTapped(ev) {\n    if (this.progress) ev.stopPropagation();\n  }\n\n  actionSuccess() {\n    this.tempClass(\"success\");\n  }\n\n  actionError() {\n    this.tempClass(\"error\");\n  }\n\n  computeDisabled(disabled, progress) {\n    return disabled || progress;\n  }\n}\n\ncustomElements.define(\"ha-progress-button\", HaProgressButton);\n","import {\n  LitElement,\n  html,\n  PropertyValues,\n  TemplateResult,\n  css,\n  CSSResult,\n  customElement,\n  property,\n} from \"lit-element\";\n\nimport { HassEntity } from \"home-assistant-js-websocket\";\nimport { classMap } from \"lit-html/directives/class-map\";\nimport { fireEvent } from \"../../common/dom/fire_event\";\nimport { HomeAssistant } from \"../../types\";\n\nimport computeStateDomain from \"../../common/entity/compute_state_domain\";\nimport computeStateName from \"../../common/entity/compute_state_name\";\nimport domainIcon from \"../../common/entity/domain_icon\";\nimport stateIcon from \"../../common/entity/state_icon\";\nimport timerTimeRemaining from \"../../common/entity/timer_time_remaining\";\nimport secondsToDuration from \"../../common/datetime/seconds_to_duration\";\n\nimport \"../ha-label-badge\";\n\n@customElement(\"ha-state-label-badge\")\nexport class HaStateLabelBadge extends LitElement {\n  @property() public hass?: HomeAssistant;\n\n  @property() public state?: HassEntity;\n\n  @property() private _timerTimeRemaining?: number;\n\n  private _connected?: boolean;\n\n  private _updateRemaining?: number;\n\n  public connectedCallback(): void {\n    super.connectedCallback();\n    this._connected = true;\n    this.startInterval(this.state);\n  }\n\n  public disconnectedCallback(): void {\n    super.disconnectedCallback();\n    this._connected = false;\n    this.clearInterval();\n  }\n\n  protected render(): TemplateResult | void {\n    const state = this.state;\n\n    if (!state) {\n      return html`\n        <ha-label-badge\n          class=\"warning\"\n          label=\"${this.hass!.localize(\"state_badge.default.error\")}\"\n          icon=\"hass:alert\"\n          description=\"${this.hass!.localize(\n            \"state_badge.default.entity_not_found\"\n          )}\"\n        ></ha-label-badge>\n      `;\n    }\n\n    const domain = computeStateDomain(state);\n\n    return html`\n      <ha-label-badge\n        class=\"${classMap({\n          [domain]: true,\n          \"has-unit_of_measurement\": \"unit_of_measurement\" in state.attributes,\n        })}\"\n        .value=\"${this._computeValue(domain, state)}\"\n        .icon=\"${this._computeIcon(domain, state)}\"\n        .image=\"${state.attributes.entity_picture}\"\n        .label=\"${this._computeLabel(domain, state, this._timerTimeRemaining)}\"\n        .description=\"${computeStateName(state)}\"\n      ></ha-label-badge>\n    `;\n  }\n\n  protected firstUpdated(changedProperties: PropertyValues): void {\n    super.firstUpdated(changedProperties);\n    this.addEventListener(\"click\", (ev) => {\n      ev.stopPropagation();\n      if (this.state) {\n        fireEvent(this, \"hass-more-info\", { entityId: this.state.entity_id });\n      }\n    });\n  }\n\n  protected updated(changedProperties: PropertyValues): void {\n    super.updated(changedProperties);\n\n    if (this._connected && changedProperties.has(\"state\")) {\n      this.startInterval(this.state);\n    }\n  }\n\n  private _computeValue(domain: string, state: HassEntity) {\n    switch (domain) {\n      case \"binary_sensor\":\n      case \"device_tracker\":\n      case \"updater\":\n      case \"sun\":\n      case \"alarm_control_panel\":\n      case \"timer\":\n        return null;\n      case \"sensor\":\n      default:\n        return state.state === \"unknown\"\n          ? \"-\"\n          : this.hass!.localize(`component.${domain}.state.${state.state}`) ||\n              state.state;\n    }\n  }\n\n  private _computeIcon(domain: string, state: HassEntity) {\n    if (state.state === \"unavailable\") {\n      return null;\n    }\n    switch (domain) {\n      case \"alarm_control_panel\":\n        if (state.state === \"pending\") {\n          return \"hass:clock-fast\";\n        }\n        if (state.state === \"armed_away\") {\n          return \"hass:nature\";\n        }\n        if (state.state === \"armed_home\") {\n          return \"hass:home-variant\";\n        }\n        if (state.state === \"armed_night\") {\n          return \"hass:weather-night\";\n        }\n        if (state.state === \"armed_custom_bypass\") {\n          return \"hass:shield-home\";\n        }\n        if (state.state === \"triggered\") {\n          return \"hass:alert-circle\";\n        }\n        // state == 'disarmed'\n        return domainIcon(domain, state.state);\n      case \"binary_sensor\":\n      case \"device_tracker\":\n      case \"updater\":\n      case \"person\":\n        return stateIcon(state);\n      case \"sun\":\n        return state.state === \"above_horizon\"\n          ? domainIcon(domain)\n          : \"hass:brightness-3\";\n      case \"timer\":\n        return state.state === \"active\" ? \"hass:timer\" : \"hass:timer-off\";\n      default:\n        return null;\n    }\n  }\n\n  private _computeLabel(domain, state, _timerTimeRemaining) {\n    if (\n      state.state === \"unavailable\" ||\n      [\"device_tracker\", \"alarm_control_panel\", \"person\"].includes(domain)\n    ) {\n      // Localize the state with a special state_badge namespace, which has variations of\n      // the state translations that are truncated to fit within the badge label. Translations\n      // are only added for device_tracker, alarm_control_panel and person.\n      return (\n        this.hass!.localize(`state_badge.${domain}.${state.state}`) ||\n        this.hass!.localize(`state_badge.default.${state.state}`) ||\n        state.state\n      );\n    }\n    if (domain === \"timer\") {\n      return secondsToDuration(_timerTimeRemaining);\n    }\n    return state.attributes.unit_of_measurement || null;\n  }\n\n  private clearInterval() {\n    if (this._updateRemaining) {\n      clearInterval(this._updateRemaining);\n      this._updateRemaining = undefined;\n    }\n  }\n\n  private startInterval(stateObj) {\n    this.clearInterval();\n    if (stateObj && computeStateDomain(stateObj) === \"timer\") {\n      this.calculateTimerRemaining(stateObj);\n\n      if (stateObj.state === \"active\") {\n        this._updateRemaining = window.setInterval(\n          () => this.calculateTimerRemaining(this.state),\n          1000\n        );\n      }\n    }\n  }\n\n  private calculateTimerRemaining(stateObj) {\n    this._timerTimeRemaining = timerTimeRemaining(stateObj);\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      :host {\n        cursor: pointer;\n      }\n\n      ha-label-badge {\n        --ha-label-badge-color: var(--label-badge-red, #df4c1e);\n      }\n      ha-label-badge.has-unit_of_measurement {\n        --ha-label-badge-label-text-transform: none;\n      }\n\n      ha-label-badge.binary_sensor,\n      ha-label-badge.updater {\n        --ha-label-badge-color: var(--label-badge-blue, #039be5);\n      }\n\n      .red {\n        --ha-label-badge-color: var(--label-badge-red, #df4c1e);\n      }\n\n      .blue {\n        --ha-label-badge-color: var(--label-badge-blue, #039be5);\n      }\n\n      .green {\n        --ha-label-badge-color: var(--label-badge-green, #0da035);\n      }\n\n      .yellow {\n        --ha-label-badge-color: var(--label-badge-yellow, #f4b400);\n      }\n\n      .grey {\n        --ha-label-badge-color: var(--label-badge-grey, var(--paper-grey-500));\n      }\n\n      .warning {\n        --ha-label-badge-color: var(--label-badge-yellow, #fce588);\n      }\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-state-label-badge\": HaStateLabelBadge;\n  }\n}\n","import {\n  css,\n  CSSResult,\n  html,\n  LitElement,\n  property,\n  TemplateResult,\n} from \"lit-element\";\n\nclass HaCard extends LitElement {\n  @property() public header?: string;\n\n  static get styles(): CSSResult {\n    return css`\n      :host {\n        background: var(\n          --ha-card-background,\n          var(--paper-card-background-color, white)\n        );\n        border-radius: var(--ha-card-border-radius, 2px);\n        box-shadow: var(\n          --ha-card-box-shadow,\n          0 2px 2px 0 rgba(0, 0, 0, 0.14),\n          0 1px 5px 0 rgba(0, 0, 0, 0.12),\n          0 3px 1px -2px rgba(0, 0, 0, 0.2)\n        );\n        color: var(--primary-text-color);\n        display: block;\n        transition: all 0.3s ease-out;\n        position: relative;\n      }\n\n      .card-header,\n      :host ::slotted(.card-header) {\n        color: var(--ha-card-header-color, --primary-text-color);\n        font-family: var(--ha-card-header-font-family, inherit);\n        font-size: var(--ha-card-header-font-size, 24px);\n        letter-spacing: -0.012em;\n        line-height: 32px;\n        padding: 24px 16px 16px;\n        display: block;\n      }\n\n      :host ::slotted(.card-content:not(:first-child)),\n      slot:not(:first-child)::slotted(.card-content) {\n        padding-top: 0px;\n        margin-top: -8px;\n      }\n\n      :host ::slotted(.card-content) {\n        padding: 16px;\n      }\n\n      :host ::slotted(.card-actions) {\n        border-top: 1px solid #e8e8e8;\n        padding: 5px 16px;\n      }\n    `;\n  }\n\n  protected render(): TemplateResult {\n    return html`\n      ${this.header\n        ? html`\n            <div class=\"card-header\">${this.header}</div>\n          `\n        : html``}\n      <slot></slot>\n    `;\n  }\n}\n\ncustomElements.define(\"ha-card\", HaCard);\n","import {\n  html,\n  css,\n  LitElement,\n  TemplateResult,\n  property,\n  customElement,\n} from \"lit-element\";\n\nimport \"@polymer/paper-input/paper-input\";\n// tslint:disable-next-line:no-duplicate-imports\nimport { PaperInputElement } from \"@polymer/paper-input/paper-input\";\n\n@customElement(\"ha-date-input\")\nexport class HaDateInput extends LitElement {\n  @property() public year?: string;\n  @property() public month?: string;\n  @property() public day?: string;\n  @property({ type: Boolean }) public disabled = false;\n\n  static get styles() {\n    return css`\n      :host {\n        display: block;\n        font-family: var(--paper-font-common-base_-_font-family);\n        -webkit-font-smoothing: var(\n          --paper-font-common-base_-_-webkit-font-smoothing\n        );\n      }\n\n      paper-input {\n        width: 30px;\n        text-align: center;\n        --paper-input-container-shared-input-style_-_-webkit-appearance: textfield;\n        --paper-input-container-input_-_-moz-appearance: textfield;\n        --paper-input-container-shared-input-style_-_appearance: textfield;\n        --paper-input-container-input-webkit-spinner_-_-webkit-appearance: none;\n        --paper-input-container-input-webkit-spinner_-_margin: 0;\n        --paper-input-container-input-webkit-spinner_-_display: none;\n      }\n\n      paper-input#year {\n        width: 50px;\n      }\n\n      .date-input-wrap {\n        display: flex;\n        flex-direction: row;\n      }\n    `;\n  }\n\n  protected render(): TemplateResult {\n    return html`\n      <div class=\"date-input-wrap\">\n        <paper-input\n          id=\"year\"\n          type=\"number\"\n          .value=${this.year}\n          @change=${this._formatYear}\n          maxlength=\"4\"\n          max=\"9999\"\n          min=\"0\"\n          .disabled=${this.disabled}\n          no-label-float\n        >\n          <span suffix=\"\" slot=\"suffix\">-</span>\n        </paper-input>\n        <paper-input\n          id=\"month\"\n          type=\"number\"\n          .value=${this.month}\n          @change=${this._formatMonth}\n          maxlength=\"2\"\n          max=\"12\"\n          min=\"1\"\n          .disabled=${this.disabled}\n          no-label-float\n        >\n          <span suffix=\"\" slot=\"suffix\">-</span>\n        </paper-input>\n        <paper-input\n          id=\"day\"\n          type=\"number\"\n          .value=${this.day}\n          @change=${this._formatDay}\n          maxlength=\"2\"\n          max=\"31\"\n          min=\"1\"\n          .disabled=${this.disabled}\n          no-label-float\n        >\n        </paper-input>\n      </div>\n    `;\n  }\n\n  private _formatYear() {\n    const yearElement = this.shadowRoot!.getElementById(\n      \"year\"\n    ) as PaperInputElement;\n    this.year = yearElement.value!;\n  }\n\n  private _formatMonth() {\n    const monthElement = this.shadowRoot!.getElementById(\n      \"month\"\n    ) as PaperInputElement;\n    this.month = (\"0\" + monthElement.value!).slice(-2);\n  }\n\n  private _formatDay() {\n    const dayElement = this.shadowRoot!.getElementById(\n      \"day\"\n    ) as PaperInputElement;\n    this.day = (\"0\" + dayElement.value!).slice(-2);\n  }\n\n  get value() {\n    return `${this.year}-${this.month}-${this.day}`;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-date-input\": HaDateInput;\n  }\n}\n","import {\n  html,\n  LitElement,\n  PropertyDeclarations,\n  PropertyValues,\n  TemplateResult,\n  CSSResult,\n  css,\n} from \"lit-element\";\nimport { classMap } from \"lit-html/directives/class-map\";\nimport \"./ha-icon\";\n\nclass HaLabelBadge extends LitElement {\n  public value?: string;\n  public icon?: string;\n  public label?: string;\n  public description?: string;\n  public image?: string;\n\n  static get properties(): PropertyDeclarations {\n    return {\n      value: {},\n      icon: {},\n      label: {},\n      description: {},\n      image: {},\n    };\n  }\n\n  protected render(): TemplateResult | void {\n    return html`\n      <div class=\"badge-container\">\n        <div class=\"label-badge\" id=\"badge\">\n          <div\n            class=\"${classMap({\n              value: true,\n              big: Boolean(this.value && this.value.length > 4),\n            })}\"\n          >\n            ${this.icon && !this.value && !this.image\n              ? html`\n                  <ha-icon .icon=\"${this.icon}\"></ha-icon>\n                `\n              : \"\"}\n            ${this.value && !this.image\n              ? html`\n                  <span>${this.value}</span>\n                `\n              : \"\"}\n          </div>\n          ${this.label\n            ? html`\n                <div\n                  class=\"${classMap({\n                    label: true,\n                    big: this.label.length > 5,\n                  })}\"\n                >\n                  <span>${this.label}</span>\n                </div>\n              `\n            : \"\"}\n        </div>\n        ${this.description\n          ? html`\n              <div class=\"title\">${this.description}</div>\n            `\n          : \"\"}\n      </div>\n    `;\n  }\n\n  static get styles(): CSSResult[] {\n    return [\n      css`\n        .badge-container {\n          display: inline-block;\n          text-align: center;\n          vertical-align: top;\n        }\n        .label-badge {\n          position: relative;\n          display: block;\n          margin: 0 auto;\n          width: var(--ha-label-badge-size, 2.5em);\n          text-align: center;\n          height: var(--ha-label-badge-size, 2.5em);\n          line-height: var(--ha-label-badge-size, 2.5em);\n          font-size: var(--ha-label-badge-font-size, 1.5em);\n          border-radius: 50%;\n          border: 0.1em solid var(--ha-label-badge-color, var(--primary-color));\n          color: var(--label-badge-text-color, rgb(76, 76, 76));\n\n          white-space: nowrap;\n          background-color: var(--label-badge-background-color, white);\n          background-size: cover;\n          transition: border 0.3s ease-in-out;\n        }\n        .label-badge .value {\n          font-size: 90%;\n          overflow: hidden;\n          text-overflow: ellipsis;\n        }\n        .label-badge .value.big {\n          font-size: 70%;\n        }\n        .label-badge .label {\n          position: absolute;\n          bottom: -1em;\n          /* Make the label as wide as container+border. (parent_borderwidth / font-size) */\n          left: -0.2em;\n          right: -0.2em;\n          line-height: 1em;\n          font-size: 0.5em;\n        }\n        .label-badge .label span {\n          box-sizing: border-box;\n          max-width: 100%;\n          display: inline-block;\n          background-color: var(--ha-label-badge-color, var(--primary-color));\n          color: var(--ha-label-badge-label-color, white);\n          border-radius: 1em;\n          padding: 9% 16% 8% 16%; /* mostly apitalized text, not much descenders => bit more top margin */\n          font-weight: 500;\n          overflow: hidden;\n          text-transform: uppercase;\n          text-overflow: ellipsis;\n          transition: background-color 0.3s ease-in-out;\n          text-transform: var(--ha-label-badge-label-text-transform, uppercase);\n        }\n        .label-badge .label.big span {\n          font-size: 90%;\n          padding: 10% 12% 7% 12%; /* push smaller text a bit down to center vertically */\n        }\n        .badge-container .title {\n          margin-top: 1em;\n          font-size: var(--ha-label-badge-title-font-size, 0.9em);\n          width: var(--ha-label-badge-title-width, 5em);\n          font-weight: var(--ha-label-badge-title-font-weight, 400);\n          overflow: hidden;\n          text-overflow: ellipsis;\n          line-height: normal;\n        }\n      `,\n    ];\n  }\n\n  protected updated(changedProperties: PropertyValues): void {\n    super.updated(changedProperties);\n    if (changedProperties.has(\"image\")) {\n      this.shadowRoot!.getElementById(\"badge\")!.style.backgroundImage = this\n        .image\n        ? `url(${this.image})`\n        : \"\";\n    }\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-label-badge\": HaLabelBadge;\n  }\n}\n\ncustomElements.define(\"ha-label-badge\", HaLabelBadge);\n","import { Constructor } from \"lit-element\";\nimport \"@polymer/paper-icon-button/paper-icon-button\";\n// Not duplicate, this is for typing.\n// tslint:disable-next-line\nimport { PaperIconButtonElement } from \"@polymer/paper-icon-button/paper-icon-button\";\n\nconst paperIconButtonClass = customElements.get(\n  \"paper-icon-button\"\n) as Constructor<PaperIconButtonElement>;\n\nexport class HaPaperIconButtonArrowNext extends paperIconButtonClass {\n  public connectedCallback() {\n    this.icon =\n      window.getComputedStyle(this).direction === \"ltr\"\n        ? \"hass:arrow-right\"\n        : \"hass:arrow-left\";\n\n    // calling super after setting icon to have it consistently show the icon (otherwise not always shown)\n    super.connectedCallback();\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-paper-icon-button-arrow-next\": HaPaperIconButtonArrowNext;\n  }\n}\n\ncustomElements.define(\n  \"ha-paper-icon-button-arrow-next\",\n  HaPaperIconButtonArrowNext\n);\n","import { Constructor } from \"lit-element\";\nimport \"@polymer/paper-icon-button/paper-icon-button\";\n// Not duplicate, this is for typing.\n// tslint:disable-next-line\nimport { PaperIconButtonElement } from \"@polymer/paper-icon-button/paper-icon-button\";\n\nconst paperIconButtonClass = customElements.get(\n  \"paper-icon-button\"\n) as Constructor<PaperIconButtonElement>;\n\nexport class HaPaperIconButtonNext extends paperIconButtonClass {\n  public connectedCallback() {\n    this.icon =\n      window.getComputedStyle(this).direction === \"ltr\"\n        ? \"hass:chevron-right\"\n        : \"hass:chevron-left\";\n\n    // calling super after setting icon to have it consistently show the icon (otherwise not always shown)\n    super.connectedCallback();\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-paper-icon-button-next\": HaPaperIconButtonNext;\n  }\n}\n\ncustomElements.define(\"ha-paper-icon-button-next\", HaPaperIconButtonNext);\n","import \"@polymer/paper-icon-button/paper-icon-button\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport { EventsMixin } from \"../mixins/events-mixin\";\n\nimport isComponentLoaded from \"../common/config/is_component_loaded\";\nimport { fireEvent } from \"../common/dom/fire_event\";\n\n/*\n * @appliesMixin EventsMixin\n */\nclass HaStartVoiceButton extends EventsMixin(PolymerElement) {\n  static get template() {\n    return html`\n      <paper-icon-button\n        icon=\"hass:microphone\"\n        hidden$=\"[[!canListen]]\"\n        on-click=\"handleListenClick\"\n      ></paper-icon-button>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: {\n        type: Object,\n        value: null,\n      },\n\n      canListen: {\n        type: Boolean,\n        computed: \"computeCanListen(hass)\",\n        notify: true,\n      },\n    };\n  }\n\n  computeCanListen(hass) {\n    return (\n      \"webkitSpeechRecognition\" in window &&\n      isComponentLoaded(hass, \"conversation\")\n    );\n  }\n\n  handleListenClick() {\n    fireEvent(this, \"show-dialog\", {\n      dialogImport: () =>\n        import(/* webpackChunkName: \"voice-command-dialog\" */ \"../dialogs/ha-voice-command-dialog\"),\n      dialogTag: \"ha-voice-command-dialog\",\n    });\n  }\n}\n\ncustomElements.define(\"ha-start-voice-button\", HaStartVoiceButton);\n","import { HomeAssistant } from \"../types\";\n\nexport const FORMAT_TEXT = \"text\";\nexport const FORMAT_NUMBER = \"number\";\n\nexport const callAlarmAction = (\n  hass: HomeAssistant,\n  entity: string,\n  action:\n    | \"arm_away\"\n    | \"arm_home\"\n    | \"arm_night\"\n    | \"arm_custom_bypass\"\n    | \"disarm\",\n  code: string\n) => {\n  hass!.callService(\"alarm_control_panel\", \"alarm_\" + action, {\n    entity_id: entity,\n    code,\n  });\n};\n","import { createCollection, Connection } from \"home-assistant-js-websocket\";\nimport { HomeAssistant } from \"../types\";\nimport { compare } from \"../common/string/compare\";\nimport { debounce } from \"../common/util/debounce\";\n\nexport interface AreaRegistryEntry {\n  area_id: string;\n  name: string;\n}\n\nexport interface AreaRegistryEntryMutableParams {\n  name: string;\n}\n\nexport const createAreaRegistryEntry = (\n  hass: HomeAssistant,\n  values: AreaRegistryEntryMutableParams\n) =>\n  hass.callWS<AreaRegistryEntry>({\n    type: \"config/area_registry/create\",\n    ...values,\n  });\n\nexport const updateAreaRegistryEntry = (\n  hass: HomeAssistant,\n  areaId: string,\n  updates: Partial<AreaRegistryEntryMutableParams>\n) =>\n  hass.callWS<AreaRegistryEntry>({\n    type: \"config/area_registry/update\",\n    area_id: areaId,\n    ...updates,\n  });\n\nexport const deleteAreaRegistryEntry = (hass: HomeAssistant, areaId: string) =>\n  hass.callWS({\n    type: \"config/area_registry/delete\",\n    area_id: areaId,\n  });\n\nconst fetchAreaRegistry = (conn) =>\n  conn\n    .sendMessagePromise({\n      type: \"config/area_registry/list\",\n    })\n    .then((areas) => areas.sort((ent1, ent2) => compare(ent1.name, ent2.name)));\n\nconst subscribeAreaRegistryUpdates = (conn, store) =>\n  conn.subscribeEvents(\n    debounce(\n      () =>\n        fetchAreaRegistry(conn).then((areas) => store.setState(areas, true)),\n      500,\n      true\n    ),\n    \"area_registry_updated\"\n  );\n\nexport const subscribeAreaRegistry = (\n  conn: Connection,\n  onChange: (areas: AreaRegistryEntry[]) => void\n) =>\n  createCollection<AreaRegistryEntry[]>(\n    \"_areaRegistry\",\n    fetchAreaRegistry,\n    subscribeAreaRegistryUpdates,\n    conn,\n    onChange\n  );\n","import { HomeAssistant } from \"../types\";\nimport { createCollection, Connection } from \"home-assistant-js-websocket\";\nimport { debounce } from \"../common/util/debounce\";\n\nexport interface DeviceRegistryEntry {\n  id: string;\n  config_entries: string[];\n  connections: Array<[string, string]>;\n  manufacturer: string;\n  model?: string;\n  name?: string;\n  sw_version?: string;\n  hub_device_id?: string;\n  area_id?: string;\n  name_by_user?: string;\n}\n\nexport interface DeviceRegistryEntryMutableParams {\n  area_id?: string | null;\n  name_by_user?: string | null;\n}\n\nexport const updateDeviceRegistryEntry = (\n  hass: HomeAssistant,\n  deviceId: string,\n  updates: Partial<DeviceRegistryEntryMutableParams>\n) =>\n  hass.callWS<DeviceRegistryEntry>({\n    type: \"config/device_registry/update\",\n    device_id: deviceId,\n    ...updates,\n  });\n\nconst fetchDeviceRegistry = (conn) =>\n  conn.sendMessagePromise({\n    type: \"config/device_registry/list\",\n  });\n\nconst subscribeDeviceRegistryUpdates = (conn, store) =>\n  conn.subscribeEvents(\n    debounce(\n      () =>\n        fetchDeviceRegistry(conn).then((devices) =>\n          store.setState(devices, true)\n        ),\n      500,\n      true\n    ),\n    \"device_registry_updated\"\n  );\n\nexport const subscribeDeviceRegistry = (\n  conn: Connection,\n  onChange: (devices: DeviceRegistryEntry[]) => void\n) =>\n  createCollection<DeviceRegistryEntry[]>(\n    \"_dr\",\n    fetchDeviceRegistry,\n    subscribeDeviceRegistryUpdates,\n    conn,\n    onChange\n  );\n","export const UNAVAILABLE = \"unavailable\";\n\nexport const ENTITY_COMPONENT_DOMAINS = [\n  \"air_quality\",\n  \"alarm_control_panel\",\n  \"automation\",\n  \"binary_sensor\",\n  \"calendar\",\n  \"counter\",\n  \"cover\",\n  \"dominos\",\n  \"fan\",\n  \"geo_location\",\n  \"group\",\n  \"history_graph\",\n  \"image_processing\",\n  \"input_boolean\",\n  \"input_datetime\",\n  \"input_number\",\n  \"input_select\",\n  \"input_text\",\n  \"light\",\n  \"lock\",\n  \"mailbox\",\n  \"media_player\",\n  \"person\",\n  \"plant\",\n  \"remember_the_milk\",\n  \"remote\",\n  \"scene\",\n  \"script\",\n  \"sensor\",\n  \"switch\",\n  \"timer\",\n  \"utility_meter\",\n  \"vacuum\",\n  \"weather\",\n  \"wink\",\n  \"zha\",\n  \"zwave\",\n];\n","import { HomeAssistant } from \"../types\";\n\nexport const setInputDateTimeValue = (\n  hass: HomeAssistant,\n  entityId: string,\n  time: string | undefined = undefined,\n  date: string | undefined = undefined\n) => {\n  const param = { entity_id: entityId, time, date };\n  hass.callService(entityId.split(\".\", 1)[0], \"set_datetime\", param);\n};\n","import { HomeAssistant } from \"../types\";\n\nexport const setValue = (hass: HomeAssistant, entity: string, value: string) =>\n  hass.callService(entity.split(\".\", 1)[0], \"set_value\", {\n    value,\n    entity_id: entity,\n  });\n","import { HomeAssistant } from \"../types\";\nimport { Connection } from \"home-assistant-js-websocket\";\n\nexport interface LovelaceConfig {\n  title?: string;\n  hideToolbar?: boolean; // IoB\n  views: LovelaceViewConfig[];\n  background?: string;\n  resources?: Array<{ type: \"css\" | \"js\" | \"module\" | \"html\"; url: string }>;\n}\n\nexport interface LovelaceViewConfig {\n  index?: number;\n  title?: string;\n  badges?: string[];\n  cards?: LovelaceCardConfig[];\n  path?: string;\n  icon?: string;\n  theme?: string;\n  panel?: boolean;\n  background?: string;\n}\n\nexport interface LovelaceCardConfig {\n  index?: number;\n  view_index?: number;\n  type: string;\n  [key: string]: any;\n}\n\nexport interface ToggleActionConfig {\n  action: \"toggle\";\n}\n\nexport interface CallServiceActionConfig {\n  action: \"call-service\";\n  service: string;\n  service_data?: {\n    entity_id?: string | [string];\n    [key: string]: any;\n  };\n}\n\nexport interface NavigateActionConfig {\n  action: \"navigate\";\n  navigation_path: string;\n}\n\nexport interface MoreInfoActionConfig {\n  action: \"more-info\";\n}\n\nexport interface NoActionConfig {\n  action: \"none\";\n}\n\nexport type ActionConfig =\n  | ToggleActionConfig\n  | CallServiceActionConfig\n  | NavigateActionConfig\n  | MoreInfoActionConfig\n  | NoActionConfig;\n\nexport const fetchConfig = (\n  hass: HomeAssistant,\n  force: boolean\n): Promise<LovelaceConfig> =>\n  hass.callWS({\n    type: \"lovelace/config\",\n    force,\n  });\n\nexport const saveConfig = (\n  hass: HomeAssistant,\n  config: LovelaceConfig\n): Promise<void> =>\n  hass.callWS({\n    type: \"lovelace/config/save\",\n    config,\n  });\n\nexport const subscribeLovelaceUpdates = (\n  conn: Connection,\n  onChange: () => void\n) => conn.subscribeEvents(onChange, \"lovelace_updated\");\n","import { HomeAssistant } from \"../types\";\n\nimport { timeCachePromiseFunc } from \"../common/util/time-cache-function-promise\";\n\nexport const SUPPORT_PAUSE = 1;\nexport const SUPPORT_NEXT_TRACK = 32;\nexport const SUPPORTS_PLAY = 16384;\nexport const OFF_STATES = [\"off\", \"idle\"];\n\nexport interface MediaPlayerThumbnail {\n  content_type: string;\n  content: string;\n}\n\nexport const fetchMediaPlayerThumbnailWithCache = (\n  hass: HomeAssistant,\n  entityId: string\n) =>\n  timeCachePromiseFunc(\n    \"_media_playerTmb\",\n    9000,\n    fetchMediaPlayerThumbnail,\n    hass,\n    entityId\n  );\n\nexport const fetchMediaPlayerThumbnail = (\n  hass: HomeAssistant,\n  entityId: string\n) => {\n  return hass.callWS<MediaPlayerThumbnail>({\n    type: \"media_player_thumbnail\",\n    entity_id: entityId,\n  });\n};\n","import { HomeAssistant } from \"../types\";\n\nexport interface ShoppingListItem {\n  id: number;\n  name: string;\n  complete: boolean;\n}\n\nexport const fetchItems = (hass: HomeAssistant): Promise<ShoppingListItem[]> =>\n  hass.callWS({\n    type: \"shopping_list/items\",\n  });\n\nexport const updateItem = (\n  hass: HomeAssistant,\n  itemId: number,\n  item: {\n    name?: string;\n    complete?: boolean;\n  }\n): Promise<ShoppingListItem> =>\n  hass.callWS({\n    type: \"shopping_list/items/update\",\n    item_id: itemId,\n    ...item,\n  });\n\nexport const clearItems = (hass: HomeAssistant): Promise<void> =>\n  hass.callWS({\n    type: \"shopping_list/items/clear\",\n  });\n\nexport const addItem = (\n  hass: HomeAssistant,\n  name: string\n): Promise<ShoppingListItem> =>\n  hass.callWS({\n    type: \"shopping_list/items/add\",\n    name,\n  });\n","import { createCollection, Connection } from \"home-assistant-js-websocket\";\n\nconst fetchNotifications = (conn) =>\n  conn.sendMessagePromise({\n    type: \"persistent_notification/get\",\n  });\n\nconst subscribeUpdates = (conn, store) =>\n  conn.subscribeEvents(\n    () => fetchNotifications(conn).then((ntf) => store.setState(ntf, true)),\n    \"persistent_notifications_updated\"\n  );\n\nexport const subscribeNotifications = (\n  conn: Connection,\n  onChange: (notifications: Notification[]) => void\n) =>\n  createCollection<Notification[]>(\n    \"_ntf\",\n    fetchNotifications,\n    subscribeUpdates,\n    conn,\n    onChange\n  );\n","/**\n@license\nCopyright (c) 2015 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n/*\nThis code is copied from app-header-layout.\n'fullbleed' support is removed as Home Assisstant doesn't use it.\ntransform: translate(0) is added.\n*/\n/*\n  FIXME(polymer-modulizer): the above comments were extracted\n  from HTML and may be out of place here. Review them and\n  then delete this comment!\n*/\nimport \"@polymer/app-layout/app-header-layout/app-header-layout\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport \"@polymer/polymer/polymer-element\";\n\nclass HaAppLayout extends customElements.get(\"app-header-layout\") {\n  static get template() {\n    return html`\n      <style>\n        :host {\n          display: block;\n          /**\n         * Force app-header-layout to have its own stacking context so that its parent can\n         * control the stacking of it relative to other elements (e.g. app-drawer-layout).\n         * This could be done using \\`isolation: isolate\\`, but that's not well supported\n         * across browsers.\n         */\n          position: relative;\n          z-index: 0;\n        }\n\n        #wrapper ::slotted([slot=\"header\"]) {\n          @apply --layout-fixed-top;\n          z-index: 1;\n        }\n\n        #wrapper.initializing ::slotted([slot=\"header\"]) {\n          position: relative;\n        }\n\n        :host([has-scrolling-region]) {\n          height: 100%;\n        }\n\n        :host([has-scrolling-region]) #wrapper ::slotted([slot=\"header\"]) {\n          position: absolute;\n        }\n\n        :host([has-scrolling-region])\n          #wrapper.initializing\n          ::slotted([slot=\"header\"]) {\n          position: relative;\n        }\n\n        :host([has-scrolling-region]) #wrapper #contentContainer {\n          @apply --layout-fit;\n          overflow-y: auto;\n          -webkit-overflow-scrolling: touch;\n        }\n\n        :host([has-scrolling-region]) #wrapper.initializing #contentContainer {\n          position: relative;\n        }\n\n        #contentContainer {\n          /* Create a stacking context here so that all children appear below the header. */\n          position: relative;\n          z-index: 0;\n          /* Using 'transform' will cause 'position: fixed' elements to behave like\n           'position: absolute' relative to this element. */\n          transform: translate(0);\n        }\n\n        @media print {\n          :host([has-scrolling-region]) #wrapper #contentContainer {\n            overflow-y: visible;\n          }\n        }\n      </style>\n\n      <div id=\"wrapper\" class=\"initializing\">\n        <slot id=\"headerSlot\" name=\"header\"></slot>\n\n        <div id=\"contentContainer\"><slot></slot></div>\n        <slot id=\"fab\" name=\"fab\"></slot>\n      </div>\n    `;\n  }\n}\ncustomElements.define(\"ha-app-layout\", HaAppLayout);\n","import {\n  html,\n  LitElement,\n  PropertyValues,\n  TemplateResult,\n  CSSResult,\n  css,\n  property,\n  customElement,\n} from \"lit-element\";\nimport { classMap } from \"lit-html/directives/class-map\";\n\nimport \"../../../components/ha-card\";\nimport \"../../../components/ha-label-badge\";\nimport \"../components/hui-warning\";\n\nimport { LovelaceCard } from \"../types\";\nimport { HomeAssistant } from \"../../../types\";\nimport {\n  callAlarmAction,\n  FORMAT_NUMBER,\n} from \"../../../data/alarm_control_panel\";\nimport { AlarmPanelCardConfig } from \"./types\";\n\nconst ICONS = {\n  armed_away: \"hass:shield-lock\",\n  armed_custom_bypass: \"hass:security\",\n  armed_home: \"hass:shield-home\",\n  armed_night: \"hass:shield-home\",\n  disarmed: \"hass:shield-check\",\n  pending: \"hass:shield-outline\",\n  triggered: \"hass:bell-ring\",\n};\n\nconst BUTTONS = [\"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\", \"\", \"0\", \"clear\"];\n\n@customElement(\"hui-alarm-panel-card\")\nclass HuiAlarmPanelCard extends LitElement implements LovelaceCard {\n  public static async getConfigElement() {\n    await import(/* webpackChunkName: \"hui-alarm-panel-card-editor\" */ \"../editor/config-elements/hui-alarm-panel-card-editor\");\n    return document.createElement(\"hui-alarm-panel-card-editor\");\n  }\n\n  public static getStubConfig() {\n    return { states: [\"arm_home\", \"arm_away\"] };\n  }\n\n  @property() public hass?: HomeAssistant;\n\n  @property() private _config?: AlarmPanelCardConfig;\n\n  @property() private _code?: string;\n\n  public getCardSize(): number {\n    if (!this._config || !this.hass) {\n      return 0;\n    }\n\n    const stateObj = this.hass.states[this._config.entity];\n\n    return !stateObj || stateObj.attributes.code_format !== FORMAT_NUMBER\n      ? 3\n      : 8;\n  }\n\n  public setConfig(config: AlarmPanelCardConfig): void {\n    if (\n      !config ||\n      !config.entity ||\n      config.entity.split(\".\")[0] !== \"alarm_control_panel\"\n    ) {\n      throw new Error(\"Invalid card configuration\");\n    }\n\n    const defaults = {\n      states: [\"arm_away\", \"arm_home\"],\n    };\n\n    this._config = { ...defaults, ...config };\n    this._code = \"\";\n  }\n\n  protected shouldUpdate(changedProps: PropertyValues): boolean {\n    if (changedProps.has(\"_config\") || changedProps.has(\"_code\")) {\n      return true;\n    }\n\n    const oldHass = changedProps.get(\"hass\") as HomeAssistant | undefined;\n    if (oldHass) {\n      return (\n        oldHass.states[this._config!.entity] !==\n        this.hass!.states[this._config!.entity]\n      );\n    }\n    return true;\n  }\n\n  protected render(): TemplateResult | void {\n    if (!this._config || !this.hass) {\n      return html``;\n    }\n    const stateObj = this.hass.states[this._config.entity];\n\n    if (!stateObj) {\n      return html`\n        <hui-warning\n          >${this.hass.localize(\n            \"ui.panel.lovelace.warning.entity_not_found\",\n            \"entity\",\n            this._config.entity\n          )}</hui-warning\n        >\n      `;\n    }\n\n    return html`\n      <ha-card .header=\"${this._config.name || this._label(stateObj.state)}\">\n        <ha-label-badge\n          class=\"${classMap({ [stateObj.state]: true })}\"\n          .icon=\"${ICONS[stateObj.state] || \"hass:shield-outline\"}\"\n          .label=\"${this._stateIconLabel(stateObj.state)}\"\n        ></ha-label-badge>\n        <div id=\"armActions\" class=\"actions\">\n          ${(stateObj.state === \"disarmed\"\n            ? this._config.states!\n            : [\"disarm\"]\n          ).map((state) => {\n            return html`\n              <mwc-button\n                .action=\"${state}\"\n                @click=\"${this._handleActionClick}\"\n                outlined\n              >\n                ${this._label(state)}\n              </mwc-button>\n            `;\n          })}\n        </div>\n        ${!stateObj.attributes.code_format\n          ? html``\n          : html`\n              <paper-input\n                label=\"Alarm Code\"\n                type=\"password\"\n                .value=\"${this._code}\"\n              ></paper-input>\n            `}\n        ${stateObj.attributes.code_format !== FORMAT_NUMBER\n          ? html``\n          : html`\n              <div id=\"keypad\">\n                ${BUTTONS.map((value) => {\n                  return value === \"\"\n                    ? html`\n                        <mwc-button disabled></mwc-button>\n                      `\n                    : html`\n                        <mwc-button\n                          .value=\"${value}\"\n                          @click=\"${this._handlePadClick}\"\n                          dense\n                        >\n                          ${value === \"clear\"\n                            ? this._label(\"clear_code\")\n                            : value}\n                        </mwc-button>\n                      `;\n                })}\n              </div>\n            `}\n      </ha-card>\n    `;\n  }\n\n  private _stateIconLabel(state: string): string {\n    const stateLabel = state.split(\"_\").pop();\n    return stateLabel === \"disarmed\" ||\n      stateLabel === \"triggered\" ||\n      !stateLabel\n      ? \"\"\n      : stateLabel;\n  }\n\n  private _label(state: string): string {\n    return (\n      this.hass!.localize(`state.alarm_control_panel.${state}`) ||\n      this.hass!.localize(`ui.card.alarm_control_panel.${state}`)\n    );\n  }\n\n  private _handlePadClick(e: MouseEvent): void {\n    const val = (e.currentTarget! as any).value;\n    this._code = val === \"clear\" ? \"\" : this._code + val;\n  }\n\n  private _handleActionClick(e: MouseEvent): void {\n    callAlarmAction(\n      this.hass!,\n      this._config!.entity,\n      (e.currentTarget! as any).action,\n      this._code!\n    );\n    this._code = \"\";\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      ha-card {\n        padding-bottom: 16px;\n        position: relative;\n        --alarm-color-disarmed: var(--label-badge-green);\n        --alarm-color-pending: var(--label-badge-yellow);\n        --alarm-color-triggered: var(--label-badge-red);\n        --alarm-color-armed: var(--label-badge-red);\n        --alarm-color-autoarm: rgba(0, 153, 255, 0.1);\n        --alarm-state-color: var(--alarm-color-armed);\n        --base-unit: 15px;\n        font-size: calc(var(--base-unit));\n      }\n\n      ha-label-badge {\n        --ha-label-badge-color: var(--alarm-state-color);\n        --label-badge-text-color: var(--alarm-state-color);\n        --label-badge-background-color: var(--paper-card-background-color);\n        color: var(--alarm-state-color);\n        position: absolute;\n        right: 12px;\n        top: 12px;\n      }\n\n      .disarmed {\n        --alarm-state-color: var(--alarm-color-disarmed);\n      }\n\n      .triggered {\n        --alarm-state-color: var(--alarm-color-triggered);\n        animation: pulse 1s infinite;\n      }\n\n      .arming {\n        --alarm-state-color: var(--alarm-color-pending);\n        animation: pulse 1s infinite;\n      }\n\n      .pending {\n        --alarm-state-color: var(--alarm-color-pending);\n        animation: pulse 1s infinite;\n      }\n\n      @keyframes pulse {\n        0% {\n          --ha-label-badge-color: var(--alarm-state-color);\n        }\n        100% {\n          --ha-label-badge-color: rgba(255, 153, 0, 0.3);\n        }\n      }\n\n      paper-input {\n        margin: 0 auto 8px;\n        max-width: 150px;\n        font-size: calc(var(--base-unit));\n        text-align: center;\n      }\n\n      .state {\n        margin-left: 16px;\n        font-size: calc(var(--base-unit) * 0.9);\n        position: relative;\n        bottom: 16px;\n        color: var(--alarm-state-color);\n        animation: none;\n      }\n\n      #keypad {\n        display: flex;\n        justify-content: center;\n        flex-wrap: wrap;\n        margin: auto;\n        width: 300px;\n      }\n\n      #keypad mwc-button {\n        margin-bottom: 5%;\n        width: 30%;\n        padding: calc(var(--base-unit));\n        font-size: calc(var(--base-unit) * 1.1);\n        box-sizing: border-box;\n      }\n\n      .actions {\n        margin: 0 8px;\n        padding-top: 20px;\n        display: flex;\n        flex-wrap: wrap;\n        justify-content: center;\n        font-size: calc(var(--base-unit) * 1);\n      }\n\n      .actions mwc-button {\n        min-width: calc(var(--base-unit) * 9);\n        margin: 0 4px 4px;\n      }\n\n      mwc-button#disarm {\n        color: var(--google-red-500);\n      }\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-alarm-panel-card\": HuiAlarmPanelCard;\n  }\n}\n","import { createCardElement } from \"../common/create-card-element\";\nimport { computeCardSize } from \"../common/compute-card-size\";\nimport {\n  checkConditionsMet,\n  validateConditionalConfig,\n} from \"../../lovelace/common/validate-condition\";\nimport { HomeAssistant } from \"../../../types\";\nimport { LovelaceCard } from \"../types\";\nimport { ConditionalCardConfig } from \"./types\";\n\nclass HuiConditionalCard extends HTMLElement implements LovelaceCard {\n  private _hass?: HomeAssistant;\n  private _config?: ConditionalCardConfig;\n  private _card?: LovelaceCard;\n\n  public setConfig(config) {\n    if (\n      !config.card ||\n      !config.conditions ||\n      !Array.isArray(config.conditions) ||\n      !validateConditionalConfig(config.conditions)\n    ) {\n      throw new Error(\"Error in card configuration.\");\n    }\n\n    if (this._card && this._card.parentElement) {\n      this.removeChild(this._card);\n    }\n\n    this._config = config;\n    this._card = createCardElement(config.card);\n\n    this.update();\n  }\n\n  set hass(hass: HomeAssistant) {\n    this._hass = hass;\n\n    this.update();\n  }\n\n  public getCardSize() {\n    return computeCardSize(this._card!);\n  }\n\n  private update() {\n    if (!this._card || !this._hass) {\n      return;\n    }\n\n    const visible =\n      this._config && checkConditionsMet(this._config.conditions, this._hass);\n\n    if (visible) {\n      this._card.hass = this._hass;\n      if (!this._card.parentElement) {\n        this.appendChild(this._card);\n      }\n    } else if (this._card.parentElement) {\n      this.removeChild(this._card);\n    }\n    // This will hide the complete card so it won't get styled by parent\n    this.style.setProperty(\"display\", visible ? \"\" : \"none\");\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-conditional-card\": HuiConditionalCard;\n  }\n}\n\ncustomElements.define(\"hui-conditional-card\", HuiConditionalCard);\n","import {\n  html,\n  LitElement,\n  PropertyValues,\n  TemplateResult,\n  customElement,\n  property,\n  css,\n  CSSResult,\n} from \"lit-element\";\n\nimport \"../../../components/ha-card\";\nimport \"../components/hui-entities-toggle\";\n\nimport { fireEvent } from \"../../../common/dom/fire_event\";\nimport { DOMAINS_HIDE_MORE_INFO } from \"../../../common/const\";\nimport { HomeAssistant } from \"../../../types\";\nimport { EntityRow } from \"../entity-rows/types\";\nimport { LovelaceCard, LovelaceCardEditor } from \"../types\";\nimport { processConfigEntities } from \"../common/process-config-entities\";\nimport { createRowElement } from \"../common/create-row-element\";\nimport { EntitiesCardConfig, EntitiesCardEntityConfig } from \"./types\";\n\nimport computeDomain from \"../../../common/entity/compute_domain\";\nimport applyThemesOnElement from \"../../../common/dom/apply_themes_on_element\";\n\n@customElement(\"hui-entities-card\")\nclass HuiEntitiesCard extends LitElement implements LovelaceCard {\n  public static async getConfigElement(): Promise<LovelaceCardEditor> {\n    await import(/* webpackChunkName: \"hui-entities-card-editor\" */ \"../editor/config-elements/hui-entities-card-editor\");\n    return document.createElement(\"hui-entities-card-editor\");\n  }\n\n  public static getStubConfig(): object {\n    return { entities: [] };\n  }\n\n  @property() protected _config?: EntitiesCardConfig;\n\n  protected _hass?: HomeAssistant;\n\n  protected _configEntities?: EntitiesCardEntityConfig[];\n\n  set hass(hass: HomeAssistant) {\n    this._hass = hass;\n    this.shadowRoot!.querySelectorAll(\"#states > div > *\").forEach(\n      (element: unknown) => {\n        (element as EntityRow).hass = hass;\n      }\n    );\n    const entitiesToggle = this.shadowRoot!.querySelector(\n      \"hui-entities-toggle\"\n    );\n    if (entitiesToggle) {\n      (entitiesToggle as any).hass = hass;\n    }\n  }\n\n  public getCardSize(): number {\n    if (!this._config) {\n      return 0;\n    }\n    // +1 for the header\n    return (this._config.title ? 1 : 0) + this._config.entities.length;\n  }\n\n  public setConfig(config: EntitiesCardConfig): void {\n    const entities = processConfigEntities(config.entities);\n\n    this._config = { theme: \"default\", ...config };\n    this._configEntities = entities;\n  }\n\n  protected updated(changedProperties: PropertyValues): void {\n    super.updated(changedProperties);\n    if (this._hass && this._config) {\n      applyThemesOnElement(this, this._hass.themes, this._config.theme);\n    }\n  }\n\n  protected render(): TemplateResult | void {\n    if (!this._config || !this._hass) {\n      return html``;\n    }\n    const { show_header_toggle, title } = this._config;\n\n    return html`\n      <ha-card>\n        ${!title && !show_header_toggle\n          ? html``\n          : html`\n              <div class=\"card-header\">\n                <div class=\"name\">${title}</div>\n                ${show_header_toggle === false\n                  ? html``\n                  : html`\n                      <hui-entities-toggle\n                        .hass=\"${this._hass}\"\n                        .entities=\"${this._configEntities!.map(\n                          (conf) => conf.entity\n                        )}\"\n                      ></hui-entities-toggle>\n                    `}\n              </div>\n            `}\n        <div id=\"states\" class=\"card-content\">\n          ${this._configEntities!.map((entityConf) =>\n            this.renderEntity(entityConf)\n          )}\n        </div>\n      </ha-card>\n    `;\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      .card-header {\n        display: flex;\n        justify-content: space-between;\n      }\n\n      .card-header .name {\n        white-space: nowrap;\n        overflow: hidden;\n        text-overflow: ellipsis;\n      }\n\n      .card-header hui-entities-toggle {\n        margin: -4px 0;\n      }\n\n      #states > * {\n        margin: 8px 0;\n      }\n\n      #states > div > * {\n        overflow: hidden;\n      }\n\n      .state-card-dialog {\n        cursor: pointer;\n      }\n    `;\n  }\n\n  private renderEntity(entityConf: EntitiesCardEntityConfig): TemplateResult {\n    const element = createRowElement(entityConf);\n    if (this._hass) {\n      element.hass = this._hass;\n    }\n    if (\n      entityConf.entity &&\n      !DOMAINS_HIDE_MORE_INFO.includes(computeDomain(entityConf.entity))\n    ) {\n      element.classList.add(\"state-card-dialog\");\n      element.addEventListener(\"click\", () => this._handleClick(entityConf));\n    }\n\n    return html`\n      <div>${element}</div>\n    `;\n  }\n\n  private _handleClick(entityConf: EntitiesCardEntityConfig): void {\n    const entityId = entityConf.entity;\n    fireEvent(this, \"hass-more-info\", { entityId });\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-entities-card\": HuiEntitiesCard;\n  }\n}\n","import {\n  html,\n  LitElement,\n  PropertyValues,\n  TemplateResult,\n  CSSResult,\n  css,\n  customElement,\n  property,\n} from \"lit-element\";\nimport { HassEntity } from \"home-assistant-js-websocket\";\nimport { styleMap } from \"lit-html/directives/style-map\";\nimport \"@material/mwc-ripple\";\n\nimport \"../../../components/ha-card\";\nimport \"../components/hui-warning\";\n\nimport isValidEntityId from \"../../../common/entity/valid_entity_id\";\nimport stateIcon from \"../../../common/entity/state_icon\";\nimport computeStateDomain from \"../../../common/entity/compute_state_domain\";\nimport computeStateName from \"../../../common/entity/compute_state_name\";\nimport applyThemesOnElement from \"../../../common/dom/apply_themes_on_element\";\nimport computeDomain from \"../../../common/entity/compute_domain\";\n\nimport { HomeAssistant, LightEntity } from \"../../../types\";\nimport { LovelaceCard, LovelaceCardEditor } from \"../types\";\nimport { longPress } from \"../common/directives/long-press-directive\";\nimport { handleClick } from \"../common/handle-click\";\nimport { DOMAINS_TOGGLE } from \"../../../common/const\";\nimport { EntityButtonCardConfig } from \"./types\";\n\n@customElement(\"hui-entity-button-card\")\nclass HuiEntityButtonCard extends LitElement implements LovelaceCard {\n  public static async getConfigElement(): Promise<LovelaceCardEditor> {\n    await import(/* webpackChunkName: \"hui-entity-button-card-editor\" */ \"../editor/config-elements/hui-entity-button-card-editor\");\n    return document.createElement(\"hui-entity-button-card-editor\");\n  }\n\n  public static getStubConfig(): object {\n    return {\n      tap_action: { action: \"toggle\" },\n      hold_action: { action: \"more-info\" },\n      show_icon: true,\n      show_name: true,\n    };\n  }\n\n  @property() public hass?: HomeAssistant;\n\n  @property() private _config?: EntityButtonCardConfig;\n\n  public getCardSize(): number {\n    return 2;\n  }\n\n  public setConfig(config: EntityButtonCardConfig): void {\n    if (!isValidEntityId(config.entity)) {\n      throw new Error(\"Invalid Entity\");\n    }\n\n    this._config = {\n      theme: \"default\",\n      hold_action: { action: \"more-info\" },\n      show_icon: true,\n      show_name: true,\n      ...config,\n    };\n\n    if (DOMAINS_TOGGLE.has(computeDomain(config.entity))) {\n      this._config = {\n        tap_action: {\n          action: \"toggle\",\n        },\n        ...this._config,\n      };\n    } else {\n      this._config = {\n        tap_action: {\n          action: \"more-info\",\n        },\n        ...this._config,\n      };\n    }\n  }\n\n  protected shouldUpdate(changedProps: PropertyValues): boolean {\n    if (changedProps.has(\"_config\")) {\n      return true;\n    }\n\n    const oldHass = changedProps.get(\"hass\") as HomeAssistant | undefined;\n    if (oldHass) {\n      return (\n        oldHass.states[this._config!.entity] !==\n        this.hass!.states[this._config!.entity]\n      );\n    }\n    return true;\n  }\n\n  protected render(): TemplateResult | void {\n    if (!this._config || !this.hass) {\n      return html``;\n    }\n    const stateObj = this.hass.states[this._config.entity];\n\n    if (!stateObj) {\n      return html`\n        <hui-warning\n          >${this.hass.localize(\n            \"ui.panel.lovelace.warning.entity_not_found\",\n            \"entity\",\n            this._config.entity\n          )}</hui-warning\n        >\n      `;\n    }\n\n    return html`\n      <ha-card\n        @ha-click=\"${this._handleTap}\"\n        @ha-hold=\"${this._handleHold}\"\n        .longPress=\"${longPress()}\"\n      >\n        ${this._config.show_icon\n          ? html`\n              <ha-icon\n                data-domain=\"${computeStateDomain(stateObj)}\"\n                data-state=\"${stateObj.state}\"\n                .icon=\"${this._config.icon || stateIcon(stateObj)}\"\n                style=\"${styleMap({\n                  filter: this._computeBrightness(stateObj),\n                  color: this._computeColor(stateObj),\n                  height: this._config.icon_height\n                    ? this._config.icon_height\n                    : \"auto\",\n                })}\"\n              ></ha-icon>\n            `\n          : \"\"}\n        ${this._config.show_name\n          ? html`\n              <span>\n                ${this._config.name || computeStateName(stateObj)}\n              </span>\n            `\n          : \"\"}\n        <mwc-ripple></mwc-ripple>\n      </ha-card>\n    `;\n  }\n\n  protected updated(changedProps: PropertyValues): void {\n    super.updated(changedProps);\n    if (!this._config || !this.hass) {\n      return;\n    }\n    const oldHass = changedProps.get(\"hass\") as HomeAssistant | undefined;\n    if (!oldHass || oldHass.themes !== this.hass.themes) {\n      applyThemesOnElement(this, this.hass.themes, this._config.theme);\n    }\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      ha-card {\n        cursor: pointer;\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n        text-align: center;\n        padding: 4% 0;\n        font-size: 1.2rem;\n      }\n\n      ha-icon {\n        width: 40%;\n        height: auto;\n        color: var(--paper-item-icon-color, #44739e);\n      }\n\n      ha-icon[data-domain=\"light\"][data-state=\"on\"],\n      ha-icon[data-domain=\"switch\"][data-state=\"on\"],\n      ha-icon[data-domain=\"binary_sensor\"][data-state=\"on\"],\n      ha-icon[data-domain=\"fan\"][data-state=\"on\"],\n      ha-icon[data-domain=\"sun\"][data-state=\"above_horizon\"] {\n        color: var(--paper-item-icon-active-color, #fdd835);\n      }\n\n      ha-icon[data-state=\"unavailable\"] {\n        color: var(--state-icon-unavailable-color);\n      }\n    `;\n  }\n\n  private _computeBrightness(stateObj: HassEntity | LightEntity): string {\n    if (!stateObj.attributes.brightness) {\n      return \"\";\n    }\n    const brightness = stateObj.attributes.brightness;\n    return `brightness(${(brightness + 245) / 5}%)`;\n  }\n\n  private _computeColor(stateObj: HassEntity | LightEntity): string {\n    if (!stateObj.attributes.hs_color) {\n      return \"\";\n    }\n    const [hue, sat] = stateObj.attributes.hs_color;\n    if (sat <= 10) {\n      return \"\";\n    }\n    return `hsl(${hue}, 100%, ${100 - sat / 2}%)`;\n  }\n\n  private _handleTap() {\n    handleClick(this, this.hass!, this._config!, false);\n  }\n\n  private _handleHold() {\n    handleClick(this, this.hass!, this._config!, true);\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-entity-button-card\": HuiEntityButtonCard;\n  }\n}\n","import { createCardElement } from \"../common/create-card-element\";\nimport { processConfigEntities } from \"../common/process-config-entities\";\nimport { LovelaceCard } from \"../types\";\nimport { LovelaceCardConfig } from \"../../../data/lovelace\";\nimport { EntityConfig } from \"../entity-rows/types\";\nimport { HomeAssistant } from \"../../../types\";\nimport { EntityFilterCardConfig } from \"./types\";\n\nclass EntityFilterCard extends HTMLElement implements LovelaceCard {\n  public isPanel?: boolean;\n  private _element?: LovelaceCard;\n  private _config?: EntityFilterCardConfig;\n  private _configEntities?: EntityConfig[];\n  private _baseCardConfig?: LovelaceCardConfig;\n\n  public getCardSize(): number {\n    return this._element ? this._element.getCardSize() : 1;\n  }\n\n  public setConfig(config: EntityFilterCardConfig): void {\n    if (!config.state_filter || !Array.isArray(config.state_filter)) {\n      throw new Error(\"Incorrect filter config.\");\n    }\n\n    this._config = config;\n    this._configEntities = undefined;\n    this._baseCardConfig = {\n      type: \"entities\",\n      entities: [],\n      ...this._config.card,\n    };\n\n    if (this.lastChild) {\n      this.removeChild(this.lastChild);\n      this._element = undefined;\n    }\n  }\n\n  set hass(hass: HomeAssistant) {\n    if (!hass || !this._config) {\n      return;\n    }\n\n    if (!this._configEntities) {\n      this._configEntities = processConfigEntities(this._config.entities);\n    }\n\n    const entitiesList = this._configEntities.filter((entityConf) => {\n      const stateObj = hass.states[entityConf.entity];\n      return stateObj && this._config!.state_filter.includes(stateObj.state);\n    });\n\n    if (entitiesList.length === 0 && this._config.show_empty === false) {\n      this.style.display = \"none\";\n      return;\n    }\n\n    const element = this._cardElement();\n\n    if (!element) {\n      return;\n    }\n\n    if (element.tagName !== \"HUI-ERROR-CARD\") {\n      element.setConfig({ ...this._baseCardConfig!, entities: entitiesList });\n      element.isPanel = this.isPanel;\n      element.hass = hass;\n    }\n\n    // Attach element if it has never been attached.\n    if (!this.lastChild) {\n      this.appendChild(element);\n    }\n\n    this.style.display = \"block\";\n  }\n\n  private _cardElement(): LovelaceCard | undefined {\n    if (!this._element && this._config) {\n      const element = createCardElement(this._baseCardConfig!);\n      this._element = element;\n    }\n\n    return this._element;\n  }\n}\ncustomElements.define(\"hui-entity-filter-card\", EntityFilterCard);\n","import {\n  html,\n  LitElement,\n  TemplateResult,\n  customElement,\n  property,\n  css,\n  CSSResult,\n} from \"lit-element\";\n\nimport { LovelaceCard } from \"../types\";\nimport { LovelaceCardConfig } from \"../../../data/lovelace\";\nimport { HomeAssistant } from \"../../../types\";\nimport { ErrorCardConfig } from \"./types\";\n\nexport const createErrorCardElement = (config) => {\n  const el = document.createElement(\"hui-error-card\");\n  el.setConfig(config);\n  return el;\n};\n\nexport const createErrorCardConfig = (error, origConfig) => ({\n  type: \"error\",\n  error,\n  origConfig,\n});\n\n@customElement(\"hui-error-card\")\nexport class HuiErrorCard extends LitElement implements LovelaceCard {\n  public hass?: HomeAssistant;\n\n  @property() private _config?: ErrorCardConfig;\n\n  public getCardSize(): number {\n    return 4;\n  }\n\n  public setConfig(config: ErrorCardConfig): void {\n    this._config = config;\n  }\n\n  protected render(): TemplateResult | void {\n    if (!this._config) {\n      return html``;\n    }\n\n    return html`\n      ${this._config.error}\n      <pre>${this._toStr(this._config.origConfig)}</pre>\n    `;\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      :host {\n        display: block;\n        background-color: #ef5350;\n        color: white;\n        padding: 8px;\n        font-weight: 500;\n      }\n    `;\n  }\n\n  private _toStr(config: LovelaceCardConfig): string {\n    return JSON.stringify(config, null, 2);\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-error-card\": HuiErrorCard;\n  }\n}\n","import {\n  html,\n  LitElement,\n  PropertyValues,\n  TemplateResult,\n  css,\n  CSSResult,\n  property,\n  customElement,\n} from \"lit-element\";\nimport { styleMap } from \"lit-html/directives/style-map\";\n\nimport \"../../../components/ha-card\";\nimport \"../components/hui-warning\";\n\nimport isValidEntityId from \"../../../common/entity/valid_entity_id\";\nimport applyThemesOnElement from \"../../../common/dom/apply_themes_on_element\";\nimport computeStateName from \"../../../common/entity/compute_state_name\";\n\nimport { HomeAssistant } from \"../../../types\";\nimport { fireEvent } from \"../../../common/dom/fire_event\";\nimport { hasConfigOrEntityChanged } from \"../common/has-changed\";\nimport { LovelaceCard, LovelaceCardEditor } from \"../types\";\nimport { GaugeCardConfig } from \"./types\";\n\nexport const severityMap = {\n  red: \"var(--label-badge-red)\",\n  green: \"var(--label-badge-green)\",\n  yellow: \"var(--label-badge-yellow)\",\n  normal: \"var(--label-badge-blue)\",\n};\n\n@customElement(\"hui-gauge-card\")\nclass HuiGaugeCard extends LitElement implements LovelaceCard {\n  public static async getConfigElement(): Promise<LovelaceCardEditor> {\n    await import(/* webpackChunkName: \"hui-gauge-card-editor\" */ \"../editor/config-elements/hui-gauge-card-editor\");\n    return document.createElement(\"hui-gauge-card-editor\");\n  }\n  public static getStubConfig(): object {\n    return {};\n  }\n\n  @property() public hass?: HomeAssistant;\n\n  @property() private _baseUnit = \"50px\";\n  @property() private _config?: GaugeCardConfig;\n\n  private _updated?: boolean;\n\n  public getCardSize(): number {\n    return 2;\n  }\n\n  public setConfig(config: GaugeCardConfig): void {\n    if (!config || !config.entity) {\n      throw new Error(\"Invalid card configuration\");\n    }\n    if (!isValidEntityId(config.entity)) {\n      throw new Error(\"Invalid Entity\");\n    }\n    this._config = { min: 0, max: 100, theme: \"default\", ...config };\n  }\n\n  public connectedCallback(): void {\n    super.connectedCallback();\n    this._setBaseUnit();\n  }\n\n  protected render(): TemplateResult | void {\n    if (!this._config || !this.hass) {\n      return html``;\n    }\n\n    const stateObj = this.hass.states[this._config.entity];\n\n    if (!stateObj) {\n      return html`\n        <hui-warning\n          >${this.hass.localize(\n            \"ui.panel.lovelace.warning.entity_not_found\",\n            \"entity\",\n            this._config.entity\n          )}</hui-warning\n        >\n      `;\n    }\n\n    const state = Number(stateObj.state);\n\n    if (isNaN(state)) {\n      return html`\n        <hui-warning\n          >${this.hass.localize(\n            \"ui.panel.lovelace.warning.entity_non_numeric\",\n            \"entity\",\n            this._config.entity\n          )}</hui-warning\n        >\n      `;\n    }\n\n    return html`\n      <ha-card\n        @click=\"${this._handleClick}\"\n        style=${styleMap({\n          \"--base-unit\": this._baseUnit,\n        })}\n      >\n        <div class=\"container\">\n          <div class=\"gauge-a\"></div>\n          <div class=\"gauge-b\"></div>\n          <div\n            class=\"gauge-c\"\n            style=${styleMap({\n              transform: `rotate(${this._translateTurn(state)}turn)`,\n              \"background-color\": this._computeSeverity(state),\n            })}\n          ></div>\n          <div class=\"gauge-data\">\n            <div id=\"percent\">\n              ${stateObj.state}\n              ${this._config.unit ||\n                stateObj.attributes.unit_of_measurement ||\n                \"\"}\n            </div>\n            <div id=\"name\">\n              ${this._config.name || computeStateName(stateObj)}\n            </div>\n          </div>\n        </div>\n      </ha-card>\n    `;\n  }\n\n  protected shouldUpdate(changedProps: PropertyValues): boolean {\n    return hasConfigOrEntityChanged(this, changedProps);\n  }\n\n  protected firstUpdated(): void {\n    this._updated = true;\n    this._setBaseUnit();\n    this.classList.add(\"init\");\n  }\n\n  protected updated(changedProps: PropertyValues): void {\n    super.updated(changedProps);\n    if (!this._config || !this.hass) {\n      return;\n    }\n\n    const oldHass = changedProps.get(\"hass\") as HomeAssistant | undefined;\n\n    if (!oldHass || oldHass.themes !== this.hass.themes) {\n      applyThemesOnElement(this, this.hass.themes, this._config.theme);\n    }\n  }\n\n  private _setBaseUnit(): void {\n    if (!this.isConnected || !this._updated) {\n      return;\n    }\n    const baseUnit = this._computeBaseUnit();\n    if (baseUnit !== \"0px\") {\n      this._baseUnit = baseUnit;\n    }\n  }\n\n  private _computeSeverity(numberValue: number): string {\n    const sections = this._config!.severity;\n\n    if (!sections) {\n      return severityMap.normal;\n    }\n\n    const sectionsArray = Object.keys(sections);\n    const sortable = sectionsArray.map((severity) => [\n      severity,\n      sections[severity],\n    ]);\n\n    for (const severity of sortable) {\n      if (severityMap[severity[0]] == null || isNaN(severity[1])) {\n        return severityMap.normal;\n      }\n    }\n    sortable.sort((a, b) => a[1] - b[1]);\n\n    if (numberValue >= sortable[0][1] && numberValue < sortable[1][1]) {\n      return severityMap[sortable[0][0]];\n    }\n    if (numberValue >= sortable[1][1] && numberValue < sortable[2][1]) {\n      return severityMap[sortable[1][0]];\n    }\n    if (numberValue >= sortable[2][1]) {\n      return severityMap[sortable[2][0]];\n    }\n    return severityMap.normal;\n  }\n\n  private _translateTurn(value: number): number {\n    const { min, max } = this._config!;\n    const maxTurnValue = Math.min(Math.max(value, min!), max!);\n    return (5 * (maxTurnValue - min!)) / (max! - min!) / 10;\n  }\n\n  private _computeBaseUnit(): string {\n    return this.clientWidth < 200 ? this.clientWidth / 5 + \"px\" : \"50px\";\n  }\n\n  private _handleClick(): void {\n    fireEvent(this, \"hass-more-info\", { entityId: this._config!.entity });\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      ha-card {\n        height: calc(var(--base-unit) * 3);\n        position: relative;\n        cursor: pointer;\n      }\n      .container {\n        width: calc(var(--base-unit) * 4);\n        height: calc(var(--base-unit) * 2);\n        position: absolute;\n        top: calc(var(--base-unit) * 1.5);\n        left: 50%;\n        overflow: hidden;\n        text-align: center;\n        transform: translate(-50%, -50%);\n      }\n      .gauge-a {\n        z-index: 1;\n        position: absolute;\n        background-color: var(--primary-background-color);\n        width: calc(var(--base-unit) * 4);\n        height: calc(var(--base-unit) * 2);\n        top: 0%;\n        border-radius: calc(var(--base-unit) * 2.5) calc(var(--base-unit) * 2.5)\n          0px 0px;\n      }\n      .gauge-b {\n        z-index: 3;\n        position: absolute;\n        background-color: var(--paper-card-background-color);\n        width: calc(var(--base-unit) * 2.5);\n        height: calc(var(--base-unit) * 1.25);\n        top: calc(var(--base-unit) * 0.75);\n        margin-left: calc(var(--base-unit) * 0.75);\n        margin-right: auto;\n        border-radius: calc(var(--base-unit) * 2.5) calc(var(--base-unit) * 2.5)\n          0px 0px;\n      }\n      .gauge-c {\n        z-index: 2;\n        position: absolute;\n        background-color: var(--label-badge-blue);\n        width: calc(var(--base-unit) * 4);\n        height: calc(var(--base-unit) * 2);\n        top: calc(var(--base-unit) * 2);\n        margin-left: auto;\n        margin-right: auto;\n        border-radius: 0px 0px calc(var(--base-unit) * 2)\n          calc(var(--base-unit) * 2);\n        transform-origin: center top;\n      }\n      .init .gauge-c {\n        transition: all 1.3s ease-in-out;\n      }\n      .gauge-data {\n        z-index: 4;\n        color: var(--primary-text-color);\n        line-height: calc(var(--base-unit) * 0.3);\n        position: absolute;\n        width: calc(var(--base-unit) * 4);\n        height: calc(var(--base-unit) * 2.1);\n        top: calc(var(--base-unit) * 1.2);\n        margin-left: auto;\n        margin-right: auto;\n      }\n      .init .gauge-data {\n        transition: all 1s ease-out;\n      }\n      .gauge-data #percent {\n        font-size: calc(var(--base-unit) * 0.55);\n      }\n      .gauge-data #name {\n        padding-top: calc(var(--base-unit) * 0.15);\n        font-size: calc(var(--base-unit) * 0.3);\n      }\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-gauge-card\": HuiGaugeCard;\n  }\n}\n","import {\n  html,\n  LitElement,\n  PropertyValues,\n  TemplateResult,\n  customElement,\n  property,\n  css,\n  CSSResult,\n} from \"lit-element\";\nimport { classMap } from \"lit-html/directives/class-map\";\n\nimport computeStateDisplay from \"../../../common/entity/compute_state_display\";\nimport computeStateName from \"../../../common/entity/compute_state_name\";\nimport applyThemesOnElement from \"../../../common/dom/apply_themes_on_element\";\n\nimport \"../../../components/entity/state-badge\";\nimport \"../../../components/ha-card\";\nimport \"../../../components/ha-icon\";\nimport \"../components/hui-warning-element\";\n\nimport { HomeAssistant } from \"../../../types\";\nimport { LovelaceCard, LovelaceCardEditor } from \"../types\";\nimport { longPress } from \"../common/directives/long-press-directive\";\nimport { processConfigEntities } from \"../common/process-config-entities\";\nimport { handleClick } from \"../common/handle-click\";\nimport { GlanceCardConfig, ConfigEntity } from \"./types\";\n\n@customElement(\"hui-glance-card\")\nexport class HuiGlanceCard extends LitElement implements LovelaceCard {\n  public static async getConfigElement(): Promise<LovelaceCardEditor> {\n    await import(/* webpackChunkName: \"hui-glance-card-editor\" */ \"../editor/config-elements/hui-glance-card-editor\");\n    return document.createElement(\"hui-glance-card-editor\");\n  }\n\n  public static getStubConfig(): object {\n    return { entities: [] };\n  }\n\n  @property() public hass?: HomeAssistant;\n\n  @property() private _config?: GlanceCardConfig;\n\n  private _configEntities?: ConfigEntity[];\n\n  public getCardSize(): number {\n    return (\n      (this._config!.title ? 1 : 0) +\n      Math.ceil(this._configEntities!.length / 5)\n    );\n  }\n\n  public setConfig(config: GlanceCardConfig): void {\n    this._config = { theme: \"default\", ...config };\n    const entities = processConfigEntities<ConfigEntity>(config.entities);\n\n    for (const entity of entities) {\n      if (\n        (entity.tap_action &&\n          entity.tap_action.action === \"call-service\" &&\n          !entity.tap_action.service) ||\n        (entity.hold_action &&\n          entity.hold_action.action === \"call-service\" &&\n          !entity.hold_action.service)\n      ) {\n        throw new Error(\n          'Missing required property \"service\" when tap_action or hold_action is call-service'\n        );\n      }\n    }\n\n    const columns = config.columns || Math.min(config.entities.length, 5);\n    this.style.setProperty(\"--glance-column-width\", `${100 / columns}%`);\n\n    this._configEntities = entities;\n\n    if (this.hass) {\n      this.requestUpdate();\n    }\n  }\n\n  protected shouldUpdate(changedProps: PropertyValues): boolean {\n    if (changedProps.has(\"_config\")) {\n      return true;\n    }\n\n    const oldHass = changedProps.get(\"hass\") as HomeAssistant | undefined;\n    if (oldHass && this._configEntities) {\n      for (const entity of this._configEntities) {\n        if (\n          oldHass.states[entity.entity] !== this.hass!.states[entity.entity]\n        ) {\n          return true;\n        }\n      }\n      return false;\n    }\n    return true;\n  }\n\n  protected render(): TemplateResult | void {\n    if (!this._config || !this.hass) {\n      return html``;\n    }\n    const { title } = this._config;\n\n    return html`\n      <ha-card .header=\"${title}\">\n        <div class=\"${classMap({ entities: true, \"no-header\": !title })}\">\n          ${this._configEntities!.map((entityConf) =>\n            this.renderEntity(entityConf)\n          )}\n        </div>\n      </ha-card>\n    `;\n  }\n\n  protected updated(changedProperties: PropertyValues): void {\n    super.updated(changedProperties);\n    if (!this._config || !this.hass) {\n      return;\n    }\n\n    const oldHass = changedProperties.get(\"hass\") as HomeAssistant | undefined;\n    if (!oldHass || oldHass.themes !== this.hass.themes) {\n      applyThemesOnElement(this, this.hass.themes, this._config.theme);\n    }\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      .entities {\n        display: flex;\n        padding: 0 16px 4px;\n        flex-wrap: wrap;\n      }\n      .entities.no-header {\n        padding-top: 16px;\n      }\n      .entity {\n        box-sizing: border-box;\n        padding: 0 4px;\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n        cursor: pointer;\n        margin-bottom: 12px;\n        width: var(--glance-column-width, 20%);\n      }\n      .entity div {\n        width: 100%;\n        text-align: center;\n        white-space: nowrap;\n        overflow: hidden;\n        text-overflow: ellipsis;\n      }\n      .name {\n        min-height: var(--paper-font-body1_-_line-height, 20px);\n      }\n      state-badge {\n        margin: 8px 0;\n      }\n    `;\n  }\n\n  private renderEntity(entityConf): TemplateResult {\n    const stateObj = this.hass!.states[entityConf.entity];\n\n    if (!stateObj) {\n      return html`\n        <hui-warning-element\n          label=${this.hass!.localize(\n            \"ui.panel.lovelace.warning.entity_not_found\",\n            \"entity\",\n            entityConf.entity\n          )}\n        ></hui-warning-element>\n      `;\n    }\n\n    return html`\n      <div\n        class=\"entity\"\n        .entityConf=\"${entityConf}\"\n        @ha-click=\"${this._handleTap}\"\n        @ha-hold=\"${this._handleHold}\"\n        .longPress=\"${longPress()}\"\n      >\n        ${this._config!.show_name !== false\n          ? html`\n              <div class=\"name\">\n                ${\"name\" in entityConf\n                  ? entityConf.name\n                  : computeStateName(stateObj)}\n              </div>\n            `\n          : \"\"}\n        ${this._config!.show_icon !== false\n          ? html`\n              <state-badge\n                .stateObj=\"${stateObj}\"\n                .overrideIcon=\"${entityConf.icon}\"\n              ></state-badge>\n            `\n          : \"\"}\n        ${this._config!.show_state !== false\n          ? html`\n              <div>\n                ${computeStateDisplay(\n                  this.hass!.localize,\n                  stateObj,\n                  this.hass!.language\n                )}\n              </div>\n            `\n          : \"\"}\n      </div>\n    `;\n  }\n\n  private _handleTap(ev: MouseEvent): void {\n    const config = (ev.currentTarget as any).entityConf as ConfigEntity;\n    handleClick(this, this.hass!, config, false);\n  }\n\n  private _handleHold(ev: MouseEvent): void {\n    const config = (ev.currentTarget as any).entityConf as ConfigEntity;\n    handleClick(this, this.hass!, config, true);\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-glance-card\": HuiGlanceCard;\n  }\n}\n","import { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport \"../../../components/ha-card\";\nimport \"../../../components/state-history-charts\";\nimport \"../../../data/ha-state-history-data\";\n\nimport { processConfigEntities } from \"../common/process-config-entities\";\n\nclass HuiHistoryGraphCard extends PolymerElement {\n  static get template() {\n    return html`\n      <style>\n        .content {\n          padding: 16px;\n        }\n        [header] .content {\n          padding-top: 0;\n        }\n      </style>\n\n      <ha-card header$=\"[[_config.title]]\">\n        <div class=\"content\">\n          <ha-state-history-data\n            hass=\"[[hass]]\"\n            filter-type=\"recent-entity\"\n            entity-id=\"[[_entities]]\"\n            data=\"{{_stateHistory}}\"\n            is-loading=\"{{_stateHistoryLoading}}\"\n            cache-config=\"[[_cacheConfig]]\"\n          ></ha-state-history-data>\n          <state-history-charts\n            hass=\"[[hass]]\"\n            history-data=\"[[_stateHistory]]\"\n            is-loading-data=\"[[_stateHistoryLoading]]\"\n            names=\"[[_names]]\"\n            up-to-now\n            no-single\n          ></state-history-charts>\n        </div>\n      </ha-card>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      _config: Object,\n      _names: Object,\n      _entities: Array,\n\n      _stateHistory: Object,\n      _stateHistoryLoading: Boolean,\n      _cacheConfig: Object,\n    };\n  }\n\n  getCardSize() {\n    return 4;\n  }\n\n  setConfig(config) {\n    const entities = processConfigEntities(config.entities);\n\n    this._config = config;\n\n    const _entities = [];\n    const _names = {};\n    for (const entity of entities) {\n      _entities.push(entity.entity);\n      if (entity.name) {\n        _names[entity.entity] = entity.name;\n      }\n    }\n\n    this.setProperties({\n      _cacheConfig: {\n        cacheKey: _entities.sort().join(),\n        hoursToShow: config.hours_to_show || 24,\n        refresh: config.refresh_interval || 0,\n      },\n      _entities,\n      _names,\n    });\n  }\n}\n\ncustomElements.define(\"hui-history-graph-card\", HuiHistoryGraphCard);\n","import { html, TemplateResult } from \"lit-element\";\n\nimport { computeCardSize } from \"../common/compute-card-size\";\nimport { HuiStackCard } from \"./hui-stack-card\";\n\nclass HuiHorizontalStackCard extends HuiStackCard {\n  public getCardSize(): number {\n    let totalSize = 0;\n\n    if (this._cards) {\n      for (const element of this._cards) {\n        const elementSize = computeCardSize(element);\n        totalSize = elementSize > totalSize ? elementSize : totalSize;\n      }\n    }\n\n    return totalSize;\n  }\n\n  protected renderStyle(): TemplateResult {\n    return html`\n      <style>\n        #root {\n          display: flex;\n        }\n        #root > * {\n          flex: 1 1 0;\n          margin: 0 4px;\n          min-width: 0;\n        }\n        #root > *:first-child {\n          margin-left: 0;\n        }\n        #root > *:last-child {\n          margin-right: 0;\n        }\n      </style>\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-horitzontal-stack-card\": HuiHorizontalStackCard;\n  }\n}\n\ncustomElements.define(\"hui-horizontal-stack-card\", HuiHorizontalStackCard);\n","import {\n  html,\n  LitElement,\n  TemplateResult,\n  customElement,\n  property,\n  css,\n  CSSResult,\n} from \"lit-element\";\n\nimport \"../../../components/ha-card\";\n\nimport { LovelaceCard, LovelaceCardEditor } from \"../types\";\nimport { styleMap } from \"lit-html/directives/style-map\";\nimport { IframeCardConfig } from \"./types\";\n\n@customElement(\"hui-iframe-card\")\nexport class HuiIframeCard extends LitElement implements LovelaceCard {\n  public static async getConfigElement(): Promise<LovelaceCardEditor> {\n    await import(/* webpackChunkName: \"hui-iframe-card-editor\" */ \"../editor/config-elements/hui-iframe-card-editor\");\n    return document.createElement(\"hui-iframe-card-editor\");\n  }\n  public static getStubConfig(): object {\n    return { url: \"https://www.home-assistant.io\", aspect_ratio: \"50%\" };\n  }\n\n  @property() protected _config?: IframeCardConfig;\n\n  public getCardSize(): number {\n    if (!this._config) {\n      return 3;\n    }\n    const aspectRatio = this._config.aspect_ratio\n      ? Number(this._config.aspect_ratio.replace(\"%\", \"\"))\n      : 50;\n    return 1 + aspectRatio / 25;\n  }\n\n  public setConfig(config: IframeCardConfig): void {\n    if (!config.url) {\n      throw new Error(\"URL required\");\n    }\n\n    this._config = config;\n  }\n\n  protected render(): TemplateResult | void {\n    if (!this._config) {\n      return html``;\n    }\n\n    const aspectRatio = this._config.aspect_ratio || \"50%\";\n\n    return html`\n      <ha-card .header=\"${this._config.title}\">\n        <div\n          id=\"root\"\n          style=\"${styleMap({\n            \"padding-top\": aspectRatio,\n          })}\"\n        >\n          <iframe src=\"${this._config.url}\"></iframe>\n        </div>\n      </ha-card>\n    `;\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      ha-card {\n        overflow: hidden;\n      }\n\n      #root {\n        width: 100%;\n        position: relative;\n      }\n\n      iframe {\n        position: absolute;\n        border: none;\n        width: 100%;\n        height: 100%;\n        top: 0;\n        left: 0;\n      }\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-iframe-card\": HuiIframeCard;\n  }\n}\n","import { createErrorCardConfig } from \"./hui-error-card\";\nimport computeDomain from \"../../../common/entity/compute_domain\";\n\nexport default class LegacyWrapperCard extends HTMLElement {\n  constructor(tag, domain) {\n    super();\n    this._tag = tag.toUpperCase();\n    this._domain = domain;\n    this._element = null;\n  }\n\n  getCardSize() {\n    return 3;\n  }\n\n  setConfig(config) {\n    if (!config.entity) {\n      throw new Error(\"No entity specified\");\n    }\n\n    if (computeDomain(config.entity) !== this._domain) {\n      throw new Error(\n        `Specified entity needs to be of domain ${this._domain}.`\n      );\n    }\n\n    this._config = config;\n  }\n\n  set hass(hass) {\n    const entityId = this._config.entity;\n\n    if (entityId in hass.states) {\n      this._ensureElement(this._tag);\n      this.lastChild.hass = hass;\n      this.lastChild.stateObj = hass.states[entityId];\n      this.lastChild.config = this._config;\n    } else {\n      this._ensureElement(\"HUI-ERROR-CARD\");\n      this.lastChild.setConfig(\n        createErrorCardConfig(\n          `No state available for ${entityId}`,\n          this._config\n        )\n      );\n    }\n  }\n\n  _ensureElement(tag) {\n    if (this.lastChild && this.lastChild.tagName === tag) return;\n\n    if (this.lastChild) {\n      this.removeChild(this.lastChild);\n    }\n\n    this.appendChild(document.createElement(tag));\n  }\n}\n","import {\n  html,\n  LitElement,\n  PropertyValues,\n  TemplateResult,\n  property,\n  customElement,\n} from \"lit-element\";\nimport \"@polymer/paper-icon-button/paper-icon-button\";\n\nimport stateIcon from \"../../../common/entity/state_icon\";\nimport computeStateName from \"../../../common/entity/compute_state_name\";\nimport applyThemesOnElement from \"../../../common/dom/apply_themes_on_element\";\n\nimport \"../../../components/ha-card\";\nimport \"../../../components/ha-icon\";\nimport \"../components/hui-warning\";\n\nimport { fireEvent } from \"../../../common/dom/fire_event\";\nimport { styleMap } from \"lit-html/directives/style-map\";\nimport { HomeAssistant, LightEntity } from \"../../../types\";\nimport { LovelaceCard, LovelaceCardEditor } from \"../types\";\nimport { hasConfigOrEntityChanged } from \"../common/has-changed\";\nimport { loadRoundslider } from \"../../../resources/jquery.roundslider.ondemand\";\nimport { toggleEntity } from \"../common/entity/toggle-entity\";\nimport { LightCardConfig } from \"./types\";\n\nconst lightConfig = {\n  radius: 80,\n  step: 1,\n  circleShape: \"pie\",\n  startAngle: 315,\n  width: 5,\n  min: 1,\n  max: 100,\n  sliderType: \"min-range\",\n  lineCap: \"round\",\n  handleSize: \"+12\",\n  showTooltip: false,\n  animation: false,\n};\n\n@customElement(\"hui-light-card\")\nexport class HuiLightCard extends LitElement implements LovelaceCard {\n  public static async getConfigElement(): Promise<LovelaceCardEditor> {\n    await import(/* webpackChunkName: \"hui-light-card-editor\" */ \"../editor/config-elements/hui-light-card-editor\");\n    return document.createElement(\"hui-light-card-editor\");\n  }\n  public static getStubConfig(): object {\n    return {};\n  }\n\n  @property() public hass?: HomeAssistant;\n\n  @property() private _config?: LightCardConfig;\n\n  @property() private _roundSliderStyle?: TemplateResult;\n\n  @property() private _jQuery?: any;\n\n  private _brightnessTimout?: number;\n\n  public getCardSize(): number {\n    return 2;\n  }\n\n  public setConfig(config: LightCardConfig): void {\n    if (!config.entity || config.entity.split(\".\")[0] !== \"light\") {\n      throw new Error(\"Specify an entity from within the light domain.\");\n    }\n\n    this._config = { theme: \"default\", ...config };\n  }\n\n  protected render(): TemplateResult | void {\n    if (!this.hass || !this._config) {\n      return html``;\n    }\n\n    const stateObj = this.hass.states[this._config!.entity] as LightEntity;\n\n    if (!stateObj) {\n      return html`\n        <hui-warning\n          >${this.hass.localize(\n            \"ui.panel.lovelace.warning.entity_not_found\",\n            \"entity\",\n            this._config.entity\n          )}</hui-warning\n        >\n      `;\n    }\n\n    return html`\n      ${this.renderStyle()}\n      <ha-card>\n        <paper-icon-button\n          icon=\"hass:dots-vertical\"\n          class=\"more-info\"\n          @click=\"${this._handleMoreInfo}\"\n        ></paper-icon-button>\n        <div id=\"light\"></div>\n        <div id=\"tooltip\">\n          <div class=\"icon-state\">\n            <ha-icon\n              class=\"light-icon\"\n              data-state=\"${stateObj.state}\"\n              .icon=\"${stateIcon(stateObj)}\"\n              style=\"${styleMap({\n                filter: this._computeBrightness(stateObj),\n                color: this._computeColor(stateObj),\n              })}\"\n              @click=\"${this._handleTap}\"\n            ></ha-icon>\n            <div class=\"brightness\" @ha-click=\"${this._handleTap}\"></div>\n            <div class=\"name\">\n              ${this._config.name || computeStateName(stateObj)}\n            </div>\n          </div>\n        </div>\n      </ha-card>\n    `;\n  }\n\n  protected shouldUpdate(changedProps: PropertyValues): boolean {\n    return hasConfigOrEntityChanged(this, changedProps);\n  }\n\n  protected async firstUpdated(): Promise<void> {\n    const loaded = await loadRoundslider();\n\n    this._roundSliderStyle = loaded.roundSliderStyle;\n    this._jQuery = loaded.jQuery;\n\n    const stateObj = this.hass!.states[this._config!.entity] as LightEntity;\n\n    if (!stateObj) {\n      // Card will require refresh to work again\n      return;\n    }\n\n    const brightness = stateObj.attributes.brightness || 0;\n\n    this._jQuery(\"#light\", this.shadowRoot).roundSlider({\n      ...lightConfig,\n      change: (value) => this._setBrightness(value),\n      drag: (value) => this._dragEvent(value),\n      start: () => this._showBrightness(),\n      stop: () => this._hideBrightness(),\n    });\n    this.shadowRoot!.querySelector(\".brightness\")!.innerHTML =\n      (Math.round((brightness / 254) * 100) || 0) + \"%\";\n  }\n\n  protected updated(changedProps: PropertyValues): void {\n    super.updated(changedProps);\n    if (!this._config || !this.hass || !this._jQuery) {\n      return;\n    }\n\n    const stateObj = this.hass!.states[this._config!.entity];\n\n    if (!stateObj) {\n      return;\n    }\n\n    const attrs = stateObj.attributes;\n\n    this._jQuery(\"#light\", this.shadowRoot).roundSlider({\n      value: Math.round((attrs.brightness / 254) * 100) || 0,\n    });\n\n    const oldHass = changedProps.get(\"hass\") as HomeAssistant | undefined;\n    if (!oldHass || oldHass.themes !== this.hass.themes) {\n      applyThemesOnElement(this, this.hass.themes, this._config.theme);\n    }\n  }\n\n  private renderStyle(): TemplateResult {\n    return html`\n      ${this._roundSliderStyle}\n      <style>\n        :host {\n          display: block;\n        }\n\n        ha-card {\n          position: relative;\n          overflow: hidden;\n          --brightness-font-color: white;\n          --brightness-font-text-shadow: -1px -1px 0 #000, 1px -1px 0 #000,\n            -1px 1px 0 #000, 1px 1px 0 #000;\n          --name-font-size: 1.2rem;\n          --brightness-font-size: 1.2rem;\n          --rail-border-color: transparent;\n        }\n\n        #tooltip {\n          position: absolute;\n          top: 0;\n          left: 0;\n          right: 0;\n          height: 100%;\n          text-align: center;\n          z-index: 15;\n        }\n\n        .icon-state {\n          display: block;\n          margin: auto;\n          width: 100%;\n          height: 100%;\n          transform: translate(0, 25%);\n        }\n\n        #light {\n          margin: 0 auto;\n          padding-top: 16px;\n          padding-bottom: 16px;\n        }\n\n        #light .rs-bar.rs-transition.rs-first,\n        .rs-bar.rs-transition.rs-second {\n          z-index: 20 !important;\n        }\n\n        #light .rs-range-color {\n          background-color: var(--primary-color);\n        }\n\n        #light .rs-path-color {\n          background-color: var(--disabled-text-color);\n        }\n\n        #light .rs-handle {\n          background-color: var(--paper-card-background-color, white);\n          padding: 7px;\n          border: 2px solid var(--disabled-text-color);\n        }\n\n        #light .rs-handle.rs-focus {\n          border-color: var(--primary-color);\n        }\n\n        #light .rs-handle:after {\n          border-color: var(--primary-color);\n          background-color: var(--primary-color);\n        }\n\n        #light .rs-border {\n          border-color: var(--rail-border-color);\n        }\n\n        #light .rs-inner.rs-bg-color.rs-border,\n        #light .rs-overlay.rs-transition.rs-bg-color {\n          background-color: var(--paper-card-background-color, white);\n        }\n\n        .light-icon {\n          margin: auto;\n          width: 76px;\n          height: 76px;\n          color: var(--paper-item-icon-color, #44739e);\n          cursor: pointer;\n        }\n\n        .light-icon[data-state=\"on\"] {\n          color: var(--paper-item-icon-active-color, #fdd835);\n        }\n\n        .light-icon[data-state=\"unavailable\"] {\n          color: var(--state-icon-unavailable-color);\n        }\n\n        .name {\n          padding-top: 40px;\n          font-size: var(--name-font-size);\n        }\n\n        .brightness {\n          font-size: var(--brightness-font-size);\n          position: absolute;\n          margin: 0 auto;\n          left: 50%;\n          top: 10%;\n          transform: translate(-50%);\n          opacity: 0;\n          transition: opacity 0.5s ease-in-out;\n          -moz-transition: opacity 0.5s ease-in-out;\n          -webkit-transition: opacity 0.5s ease-in-out;\n          cursor: pointer;\n          color: var(--brightness-font-color);\n          text-shadow: var(--brightness-font-text-shadow);\n          pointer-events: none;\n        }\n\n        .show_brightness {\n          opacity: 1;\n        }\n\n        .more-info {\n          position: absolute;\n          cursor: pointer;\n          top: 0;\n          right: 0;\n          z-index: 25;\n          color: var(--secondary-text-color);\n        }\n      </style>\n    `;\n  }\n\n  private _dragEvent(e: any): void {\n    this.shadowRoot!.querySelector(\".brightness\")!.innerHTML = e.value + \"%\";\n  }\n\n  private _showBrightness(): void {\n    clearTimeout(this._brightnessTimout);\n    this.shadowRoot!.querySelector(\".brightness\")!.classList.add(\n      \"show_brightness\"\n    );\n  }\n\n  private _hideBrightness(): void {\n    this._brightnessTimout = window.setTimeout(() => {\n      this.shadowRoot!.querySelector(\".brightness\")!.classList.remove(\n        \"show_brightness\"\n      );\n    }, 500);\n  }\n\n  private _setBrightness(e: any): void {\n    this.hass!.callService(\"light\", \"turn_on\", {\n      entity_id: this._config!.entity,\n      brightness_pct: e.value,\n    });\n  }\n\n  private _computeBrightness(stateObj: LightEntity): string {\n    if (!stateObj.attributes.brightness) {\n      return \"\";\n    }\n    const brightness = stateObj.attributes.brightness;\n    return `brightness(${(brightness + 245) / 5}%)`;\n  }\n\n  private _computeColor(stateObj: LightEntity): string {\n    if (!stateObj.attributes.hs_color) {\n      return \"\";\n    }\n    const [hue, sat] = stateObj.attributes.hs_color;\n    if (sat <= 10) {\n      return \"\";\n    }\n    return `hsl(${hue}, 100%, ${100 - sat / 2}%)`;\n  }\n\n  private _handleTap() {\n    toggleEntity(this.hass!, this._config!.entity!);\n  }\n\n  private _handleMoreInfo() {\n    fireEvent(this, \"hass-more-info\", {\n      entityId: this._config!.entity,\n    });\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-light-card\": HuiLightCard;\n  }\n}\n","import \"@polymer/paper-icon-button/paper-icon-button\";\nimport { Layer, Marker, Circle, Map } from \"leaflet\";\nimport {\n  LitElement,\n  TemplateResult,\n  css,\n  html,\n  property,\n  PropertyValues,\n  CSSResult,\n  customElement,\n} from \"lit-element\";\n\nimport \"../../map/ha-entity-marker\";\n\nimport {\n  setupLeafletMap,\n  LeafletModuleType,\n} from \"../../../common/dom/setup-leaflet-map\";\nimport computeStateDomain from \"../../../common/entity/compute_state_domain\";\nimport computeStateName from \"../../../common/entity/compute_state_name\";\nimport { debounce } from \"../../../common/util/debounce\";\nimport parseAspectRatio from \"../../../common/util/parse-aspect-ratio\";\nimport computeDomain from \"../../../common/entity/compute_domain\";\n\nimport { HomeAssistant } from \"../../../types\";\nimport { LovelaceCard } from \"../types\";\nimport { EntityConfig } from \"../entity-rows/types\";\nimport { processConfigEntities } from \"../common/process-config-entities\";\nimport { MapCardConfig } from \"./types\";\n\n@customElement(\"hui-map-card\")\nclass HuiMapCard extends LitElement implements LovelaceCard {\n  public static async getConfigElement() {\n    await import(/* webpackChunkName: \"hui-map-card-editor\" */ \"../editor/config-elements/hui-map-card-editor\");\n    return document.createElement(\"hui-map-card-editor\");\n  }\n\n  public static getStubConfig() {\n    return { entities: [] };\n  }\n\n  @property() public hass?: HomeAssistant;\n\n  @property({ type: Boolean, reflect: true })\n  public isPanel = false;\n\n  @property()\n  private _config?: MapCardConfig;\n  private _configEntities?: EntityConfig[];\n  // tslint:disable-next-line\n  private Leaflet?: LeafletModuleType;\n  private _leafletMap?: Map;\n  // @ts-ignore\n  private _resizeObserver?: ResizeObserver;\n  private _debouncedResizeListener = debounce(\n    () => {\n      if (!this._leafletMap) {\n        return;\n      }\n      this._leafletMap.invalidateSize();\n    },\n    100,\n    false\n  );\n  private _mapItems: Array<Marker | Circle> = [];\n  private _connected = false;\n\n  public setConfig(config: MapCardConfig): void {\n    if (!config) {\n      throw new Error(\"Error in card configuration.\");\n    }\n\n    if (!config.entities && !config.geo_location_sources) {\n      throw new Error(\n        \"Either entities or geo_location_sources must be defined\"\n      );\n    }\n    if (config.entities && !Array.isArray(config.entities)) {\n      throw new Error(\"Entities need to be an array\");\n    }\n    if (\n      config.geo_location_sources &&\n      !Array.isArray(config.geo_location_sources)\n    ) {\n      throw new Error(\"Geo_location_sources needs to be an array\");\n    }\n\n    this._config = config;\n    this._configEntities = config.entities\n      ? processConfigEntities(config.entities)\n      : [];\n  }\n\n  public getCardSize(): number {\n    if (!this._config) {\n      return 3;\n    }\n    const ratio = parseAspectRatio(this._config.aspect_ratio);\n    const ar =\n      ratio && ratio.w > 0 && ratio.h > 0\n        ? `${((100 * ratio.h) / ratio.w).toFixed(2)}`\n        : \"100\";\n    return 1 + Math.floor(Number(ar) / 25) || 3;\n  }\n\n  public connectedCallback(): void {\n    super.connectedCallback();\n    this._connected = true;\n    if (this.hasUpdated) {\n      this.loadMap();\n      this._attachObserver();\n    }\n  }\n\n  public disconnectedCallback(): void {\n    super.disconnectedCallback();\n    this._connected = false;\n\n    if (this._leafletMap) {\n      this._leafletMap.remove();\n      this._leafletMap = undefined;\n      this.Leaflet = undefined;\n    }\n\n    if (this._resizeObserver) {\n      this._resizeObserver.unobserve(this._mapEl);\n    } else {\n      window.removeEventListener(\"resize\", this._debouncedResizeListener);\n    }\n  }\n\n  protected render(): TemplateResult | void {\n    if (!this._config) {\n      return html``;\n    }\n    return html`\n      <ha-card id=\"card\" .header=${this._config.title}>\n        <div id=\"root\">\n          <div id=\"map\"></div>\n          <paper-icon-button\n            @click=${this._fitMap}\n            icon=\"hass:image-filter-center-focus\"\n            title=\"Reset focus\"\n          ></paper-icon-button>\n        </div>\n      </ha-card>\n    `;\n  }\n\n  protected firstUpdated(changedProps: PropertyValues): void {\n    super.firstUpdated(changedProps);\n    this.loadMap();\n    const root = this.shadowRoot!.getElementById(\"root\");\n\n    if (!this._config || this.isPanel || !root) {\n      return;\n    }\n\n    if (this._connected) {\n      this._attachObserver();\n    }\n\n    const ratio = parseAspectRatio(this._config.aspect_ratio);\n\n    root.style.paddingBottom =\n      ratio && ratio.w > 0 && ratio.h > 0\n        ? `${((100 * ratio.h) / ratio.w).toFixed(2)}%`\n        : (root.style.paddingBottom = \"100%\");\n  }\n\n  protected updated(changedProps: PropertyValues): void {\n    if (changedProps.has(\"hass\")) {\n      this._drawEntities();\n    }\n  }\n\n  private get _mapEl(): HTMLDivElement {\n    return this.shadowRoot!.getElementById(\"map\") as HTMLDivElement;\n  }\n\n  private async loadMap(): Promise<void> {\n    [this._leafletMap, this.Leaflet] = await setupLeafletMap(this._mapEl);\n    this._drawEntities();\n    this._leafletMap.invalidateSize();\n    this._fitMap();\n  }\n\n  private _fitMap(): void {\n    if (!this._leafletMap || !this.Leaflet || !this._config || !this.hass) {\n      return;\n    }\n    const zoom = this._config.default_zoom;\n    if (this._mapItems.length === 0) {\n      this._leafletMap.setView(\n        new this.Leaflet.LatLng(\n          this.hass.config.latitude,\n          this.hass.config.longitude\n        ),\n        zoom || 14\n      );\n      return;\n    }\n\n    const bounds = this.Leaflet.latLngBounds(\n      this._mapItems ? this._mapItems.map((item) => item.getLatLng()) : []\n    );\n    this._leafletMap.fitBounds(bounds.pad(0.5));\n\n    if (zoom && this._leafletMap.getZoom() > zoom) {\n      this._leafletMap.setZoom(zoom);\n    }\n  }\n\n  private _drawEntities(): void {\n    const hass = this.hass;\n    const map = this._leafletMap;\n    const config = this._config;\n    const Leaflet = this.Leaflet;\n    if (!hass || !map || !config || !Leaflet) {\n      return;\n    }\n\n    if (this._mapItems) {\n      this._mapItems.forEach((marker) => marker.remove());\n    }\n    const mapItems: Layer[] = (this._mapItems = []);\n\n    const allEntities = this._configEntities!.concat();\n\n    // Calculate visible geo location sources\n    if (config.geo_location_sources) {\n      const includesAll = config.geo_location_sources.includes(\"all\");\n      for (const entityId of Object.keys(hass.states)) {\n        const stateObj = hass.states[entityId];\n        if (\n          computeDomain(entityId) === \"geo_location\" &&\n          (includesAll ||\n            config.geo_location_sources.includes(stateObj.attributes.source))\n        ) {\n          allEntities.push({ entity: entityId });\n        }\n      }\n    }\n\n    for (const entity of allEntities) {\n      const entityId = entity.entity;\n      const stateObj = hass.states[entityId];\n      if (!stateObj) {\n        continue;\n      }\n      const title = computeStateName(stateObj);\n      const {\n        latitude,\n        longitude,\n        passive,\n        icon,\n        radius,\n        entity_picture: entityPicture,\n        gps_accuracy: gpsAccuracy,\n      } = stateObj.attributes;\n\n      if (!(latitude && longitude)) {\n        continue;\n      }\n\n      if (computeStateDomain(stateObj) === \"zone\") {\n        // DRAW ZONE\n        if (passive) {\n          continue;\n        }\n\n        // create marker with the icon\n        mapItems.push(\n          Leaflet.marker([latitude, longitude], {\n            icon: Leaflet.divIcon({\n              html: icon ? `<ha-icon icon=\"${icon}\"></ha-icon>` : title,\n              iconSize: [24, 24],\n              className: \"\",\n            }),\n            interactive: false,\n            title,\n          })\n        );\n\n        // create circle around it\n        mapItems.push(\n          Leaflet.circle([latitude, longitude], {\n            interactive: false,\n            color: \"#FF9800\",\n            radius,\n          })\n        );\n\n        continue;\n      }\n\n      // DRAW ENTITY\n      // create icon\n      const entityName = title\n        .split(\" \")\n        .map((part) => part[0])\n        .join(\"\")\n        .substr(0, 3);\n\n      // create market with the icon\n      mapItems.push(\n        Leaflet.marker([latitude, longitude], {\n          icon: Leaflet.divIcon({\n            // Leaflet clones this element before adding it to the map. This messes up\n            // our Polymer object and we can't pass data through. Thus we hack like this.\n            html: `\n              <ha-entity-marker\n                entity-id=\"${entityId}\"\n                entity-name=\"${entityName}\"\n                entity-picture=\"${entityPicture || \"\"}\"\n              ></ha-entity-marker>\n            `,\n            iconSize: [48, 48],\n            className: \"\",\n          }),\n          title: computeStateName(stateObj),\n        })\n      );\n\n      // create circle around if entity has accuracy\n      if (gpsAccuracy) {\n        mapItems.push(\n          Leaflet.circle([latitude, longitude], {\n            interactive: false,\n            color: \"#0288D1\",\n            radius: gpsAccuracy,\n          })\n        );\n      }\n    }\n\n    this._mapItems.forEach((marker) => map.addLayer(marker));\n  }\n\n  private _attachObserver(): void {\n    // Observe changes to map size and invalidate to prevent broken rendering\n    // Uses ResizeObserver in Chrome, otherwise window resize event\n\n    // @ts-ignore\n    if (typeof ResizeObserver === \"function\") {\n      // @ts-ignore\n      this._resizeObserver = new ResizeObserver(() =>\n        this._debouncedResizeListener()\n      );\n      this._resizeObserver.observe(this._mapEl);\n    } else {\n      window.addEventListener(\"resize\", this._debouncedResizeListener);\n    }\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      :host([ispanel]) ha-card {\n        left: 0;\n        top: 0;\n        width: 100%;\n        /**\n       * In panel mode we want a full height map. Since parent #view\n       * only sets min-height, we need absolute positioning here\n       */\n        height: 100%;\n        position: absolute;\n      }\n\n      ha-card {\n        overflow: hidden;\n      }\n\n      #map {\n        z-index: 0;\n        border: none;\n        position: absolute;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n      }\n\n      paper-icon-button {\n        position: absolute;\n        top: 75px;\n        left: 7px;\n      }\n\n      #root {\n        position: relative;\n      }\n\n      :host([ispanel]) #root {\n        height: 100%;\n      }\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-map-card\": HuiMapCard;\n  }\n}\n","import {\n  html,\n  LitElement,\n  TemplateResult,\n  customElement,\n  property,\n  css,\n  CSSResult,\n} from \"lit-element\";\nimport { classMap } from \"lit-html/directives/class-map\";\n\nimport \"../../../components/ha-card\";\nimport \"../../../components/ha-markdown\";\n\nimport { LovelaceCard, LovelaceCardEditor } from \"../types\";\nimport { MarkdownCardConfig } from \"./types\";\n\n@customElement(\"hui-markdown-card\")\nexport class HuiMarkdownCard extends LitElement implements LovelaceCard {\n  public static async getConfigElement(): Promise<LovelaceCardEditor> {\n    await import(/* webpackChunkName: \"hui-markdown-card-editor\" */ \"../editor/config-elements/hui-markdown-card-editor\");\n    return document.createElement(\"hui-markdown-card-editor\");\n  }\n\n  public static getStubConfig(): object {\n    return { content: \" \" };\n  }\n\n  @property() private _config?: MarkdownCardConfig;\n\n  public getCardSize(): number {\n    return this._config!.content.split(\"\\n\").length;\n  }\n\n  public setConfig(config: MarkdownCardConfig): void {\n    if (!config.content) {\n      throw new Error(\"Invalid Configuration: Content Required\");\n    }\n\n    this._config = config;\n  }\n\n  protected render(): TemplateResult | void {\n    if (!this._config) {\n      return html``;\n    }\n\n    return html`\n      <ha-card .header=\"${this._config.title}\">\n        <ha-markdown\n          class=\"markdown ${classMap({\n            \"no-header\": !this._config.title,\n          })}\"\n          .content=\"${this._config.content}\"\n        ></ha-markdown>\n      </ha-card>\n    `;\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      :host {\n        /* start paper-font-body1 style */\n        font-family: \"Roboto\", \"Noto\", sans-serif;\n        -webkit-font-smoothing: antialiased; /* OS X subpixel AA bleed bug */\n        font-size: 14px;\n        font-weight: 400;\n        line-height: 20px;\n        /* end paper-font-body1 style */\n      }\n      ha-markdown {\n        display: block;\n        padding: 0 16px 16px;\n        -ms-user-select: initial;\n        -webkit-user-select: initial;\n        -moz-user-select: initial;\n      }\n      .markdown.no-header {\n        padding-top: 16px;\n      }\n      ha-markdown > *:first-child {\n        margin-top: 0;\n      }\n      ha-markdown > *:last-child {\n        margin-bottom: 0;\n      }\n      ha-markdown a {\n        color: var(--primary-color);\n      }\n      ha-markdown img {\n        max-width: 100%;\n      }\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-markdown-card\": HuiMarkdownCard;\n  }\n}\n","import \"../../../cards/ha-media_player-card\";\n\nimport LegacyWrapperCard from \"./hui-legacy-wrapper-card\";\n\nclass HuiMediaControlCard extends LegacyWrapperCard {\n  static async getConfigElement() {\n    await import(/* webpackChunkName: \"hui-media-control-card-editor\" */ \"../editor/config-elements/hui-media-control-card-editor\");\n    return document.createElement(\"hui-media-control-card-editor\");\n  }\n\n  static getStubConfig() {\n    return {};\n  }\n\n  constructor() {\n    super(\"ha-media_player-card\", \"media_player\");\n  }\n}\n\ncustomElements.define(\"hui-media-control-card\", HuiMediaControlCard);\n","import {\n  html,\n  LitElement,\n  TemplateResult,\n  customElement,\n  property,\n  css,\n  CSSResult,\n} from \"lit-element\";\n\nimport \"../../../components/ha-card\";\n\nimport { LovelaceCard, LovelaceCardEditor } from \"../types\";\nimport { HomeAssistant } from \"../../../types\";\nimport { classMap } from \"lit-html/directives/class-map\";\nimport { handleClick } from \"../common/handle-click\";\nimport { longPress } from \"../common/directives/long-press-directive\";\nimport { PictureCardConfig } from \"./types\";\n\n@customElement(\"hui-picture-card\")\nexport class HuiPictureCard extends LitElement implements LovelaceCard {\n  public static async getConfigElement(): Promise<LovelaceCardEditor> {\n    await import(/* webpackChunkName: \"hui-picture-card-editor\" */ \"../editor/config-elements/hui-picture-card-editor\");\n    return document.createElement(\"hui-picture-card-editor\");\n  }\n  public static getStubConfig(): object {\n    return {\n      image:\n        \"https://www.home-assistant.io/images/merchandise/shirt-frontpage.png\",\n      tap_action: { action: \"none\" },\n      hold_action: { action: \"none\" },\n    };\n  }\n\n  public hass?: HomeAssistant;\n\n  @property() protected _config?: PictureCardConfig;\n\n  public getCardSize(): number {\n    return 3;\n  }\n\n  public setConfig(config: PictureCardConfig): void {\n    if (!config || !config.image) {\n      throw new Error(\"Invalid Configuration: 'image' required\");\n    }\n\n    this._config = config;\n  }\n\n  protected render(): TemplateResult | void {\n    if (!this._config || !this.hass) {\n      return html``;\n    }\n\n    return html`\n      <ha-card\n        @ha-click=\"${this._handleTap}\"\n        @ha-hold=\"${this._handleHold}\"\n        .longPress=\"${longPress()}\"\n        class=\"${classMap({\n          clickable: Boolean(\n            this._config.tap_action || this._config.hold_action\n          ),\n        })}\"\n      >\n        <img src=\"${this._config.image}\" />\n      </ha-card>\n    `;\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      ha-card {\n        overflow: hidden;\n      }\n\n      ha-card.clickable {\n        cursor: pointer;\n      }\n\n      img {\n        display: block;\n        width: 100%;\n      }\n    `;\n  }\n\n  private _handleTap() {\n    handleClick(this, this.hass!, this._config!, false);\n  }\n\n  private _handleHold() {\n    handleClick(this, this.hass!, this._config!, true);\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-picture-card\": HuiPictureCard;\n  }\n}\n","import {\n  html,\n  LitElement,\n  TemplateResult,\n  property,\n  customElement,\n  css,\n  CSSResult,\n} from \"lit-element\";\n\nimport { createStyledHuiElement } from \"./picture-elements/create-styled-hui-element\";\nimport { LovelaceCard } from \"../types\";\nimport { HomeAssistant } from \"../../../types\";\nimport { LovelaceElementConfig, LovelaceElement } from \"../elements/types\";\nimport { PictureElementsCardConfig } from \"./types\";\n\n@customElement(\"hui-picture-elements-card\")\nclass HuiPictureElementsCard extends LitElement implements LovelaceCard {\n  @property() private _config?: PictureElementsCardConfig;\n\n  private _hass?: HomeAssistant;\n\n  set hass(hass: HomeAssistant) {\n    this._hass = hass;\n    for (const el of this.shadowRoot!.querySelectorAll(\"#root > *\")) {\n      const element = el as LovelaceElement;\n      element.hass = this._hass;\n    }\n  }\n\n  public getCardSize(): number {\n    return 4;\n  }\n\n  public setConfig(config: PictureElementsCardConfig): void {\n    if (!config) {\n      throw new Error(\"Invalid Configuration\");\n    } else if (\n      !(config.image || config.camera_image || config.state_image) ||\n      (config.state_image && !config.entity)\n    ) {\n      throw new Error(\"Invalid Configuration: image required\");\n    } else if (!Array.isArray(config.elements)) {\n      throw new Error(\"Invalid Configuration: elements required\");\n    }\n\n    this._config = config;\n  }\n\n  protected render(): TemplateResult | void {\n    if (!this._config) {\n      return html``;\n    }\n\n    return html`\n      <ha-card .header=\"${this._config.title}\">\n        <div id=\"root\">\n          <hui-image\n            .hass=\"${this._hass}\"\n            .image=\"${this._config.image}\"\n            .stateImage=\"${this._config.state_image}\"\n            .cameraImage=\"${this._config.camera_image}\"\n            .cameraView=\"${this._config.camera_view}\"\n            .entity=\"${this._config.entity}\"\n            .aspectRatio=\"${this._config.aspect_ratio}\"\n          ></hui-image>\n          ${this._config.elements.map(\n            (elementConfig: LovelaceElementConfig) => {\n              const element = createStyledHuiElement(elementConfig);\n              element.hass = this._hass;\n\n              return element;\n            }\n          )}\n        </div>\n      </ha-card>\n    `;\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      #root {\n        position: relative;\n      }\n\n      .element {\n        position: absolute;\n        transform: translate(-50%, -50%);\n      }\n\n      ha-card {\n        overflow: hidden;\n      }\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-picture-elements-card\": HuiPictureElementsCard;\n  }\n}\n","import {\n  html,\n  LitElement,\n  TemplateResult,\n  customElement,\n  property,\n  css,\n  CSSResult,\n  PropertyValues,\n} from \"lit-element\";\nimport { classMap } from \"lit-html/directives/class-map\";\n\nimport \"../../../components/ha-card\";\nimport \"../components/hui-image\";\nimport \"../components/hui-warning\";\n\nimport computeDomain from \"../../../common/entity/compute_domain\";\nimport computeStateDisplay from \"../../../common/entity/compute_state_display\";\nimport computeStateName from \"../../../common/entity/compute_state_name\";\n\nimport { longPress } from \"../common/directives/long-press-directive\";\nimport { HomeAssistant } from \"../../../types\";\nimport { LovelaceCard } from \"../types\";\nimport { handleClick } from \"../common/handle-click\";\nimport { UNAVAILABLE } from \"../../../data/entity\";\nimport { hasConfigOrEntityChanged } from \"../common/has-changed\";\nimport { PictureEntityCardConfig } from \"./types\";\n\n@customElement(\"hui-picture-entity-card\")\nclass HuiPictureEntityCard extends LitElement implements LovelaceCard {\n  @property() public hass?: HomeAssistant;\n\n  @property() private _config?: PictureEntityCardConfig;\n\n  public getCardSize(): number {\n    return 3;\n  }\n\n  public setConfig(config: PictureEntityCardConfig): void {\n    if (!config || !config.entity) {\n      throw new Error(\"Invalid Configuration: 'entity' required\");\n    }\n\n    if (\n      computeDomain(config.entity) !== \"camera\" &&\n      (!config.image && !config.state_image && !config.camera_image)\n    ) {\n      throw new Error(\"No image source configured.\");\n    }\n\n    this._config = { show_name: true, show_state: true, ...config };\n  }\n\n  protected shouldUpdate(changedProps: PropertyValues): boolean {\n    return hasConfigOrEntityChanged(this, changedProps);\n  }\n\n  protected render(): TemplateResult | void {\n    if (!this._config || !this.hass) {\n      return html``;\n    }\n\n    const stateObj = this.hass.states[this._config.entity];\n\n    if (!stateObj) {\n      return html`\n        <hui-warning\n          >${this.hass.localize(\n            \"ui.panel.lovelace.warning.entity_not_found\",\n            \"entity\",\n            this._config.entity\n          )}</hui-warning\n        >\n      `;\n    }\n\n    const name = this._config.name || computeStateName(stateObj);\n    const state = computeStateDisplay(\n      this.hass!.localize,\n      stateObj,\n      this.hass.language\n    );\n\n    let footer: TemplateResult | string = \"\";\n    if (this._config.show_name && this._config.show_state) {\n      footer = html`\n        <div class=\"footer both\">\n          <div>${name}</div>\n          <div>${state}</div>\n        </div>\n      `;\n    } else if (this._config.show_name) {\n      footer = html`\n        <div class=\"footer\">${name}</div>\n      `;\n    } else if (this._config.show_state) {\n      footer = html`\n        <div class=\"footer state\">${state}</div>\n      `;\n    }\n\n    return html`\n      <ha-card>\n        <hui-image\n          .hass=\"${this.hass}\"\n          .image=\"${this._config.image}\"\n          .stateImage=\"${this._config.state_image}\"\n          .cameraImage=\"${computeDomain(this._config.entity) === \"camera\"\n            ? this._config.entity\n            : this._config.camera_image}\"\n          .cameraView=\"${this._config.camera_view}\"\n          .entity=\"${this._config.entity}\"\n          .aspectRatio=\"${this._config.aspect_ratio}\"\n          @ha-click=\"${this._handleTap}\"\n          @ha-hold=\"${this._handleHold}\"\n          .longPress=\"${longPress()}\"\n          class=\"${classMap({\n            clickable: stateObj.state !== UNAVAILABLE,\n          })}\"\n        ></hui-image>\n        ${footer}\n      </ha-card>\n    `;\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      ha-card {\n        min-height: 75px;\n        overflow: hidden;\n        position: relative;\n      }\n\n      hui-image.clickable {\n        cursor: pointer;\n      }\n\n      .footer {\n        /* start paper-font-common-nowrap style */\n        white-space: nowrap;\n        overflow: hidden;\n        text-overflow: ellipsis;\n        /* end paper-font-common-nowrap style */\n\n        position: absolute;\n        left: 0;\n        right: 0;\n        bottom: 0;\n        background-color: rgba(0, 0, 0, 0.3);\n        padding: 16px;\n        font-size: 16px;\n        line-height: 16px;\n        color: white;\n      }\n\n      .both {\n        display: flex;\n        justify-content: space-between;\n      }\n\n      .state {\n        text-align: right;\n      }\n    `;\n  }\n\n  private _handleTap() {\n    handleClick(this, this.hass!, this._config!, false);\n  }\n\n  private _handleHold() {\n    handleClick(this, this.hass!, this._config!, true);\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-picture-entity-card\": HuiPictureEntityCard;\n  }\n}\n","import {\n  html,\n  LitElement,\n  TemplateResult,\n  customElement,\n  property,\n  css,\n  CSSResult,\n  PropertyValues,\n} from \"lit-element\";\nimport { classMap } from \"lit-html/directives/class-map\";\n\nimport computeStateDisplay from \"../../../common/entity/compute_state_display\";\nimport computeStateName from \"../../../common/entity/compute_state_name\";\nimport computeDomain from \"../../../common/entity/compute_domain\";\nimport stateIcon from \"../../../common/entity/state_icon\";\n\nimport \"../../../components/ha-card\";\nimport \"../../../components/ha-icon\";\nimport \"../components/hui-image\";\nimport \"../components/hui-warning-element\";\n\nimport { DOMAINS_TOGGLE } from \"../../../common/const\";\nimport { LovelaceCard } from \"../types\";\nimport { EntityConfig } from \"../entity-rows/types\";\nimport { HomeAssistant } from \"../../../types\";\nimport { longPress } from \"../common/directives/long-press-directive\";\nimport { processConfigEntities } from \"../common/process-config-entities\";\nimport { handleClick } from \"../common/handle-click\";\nimport { fireEvent } from \"../../../common/dom/fire_event\";\nimport { toggleEntity } from \"../common/entity/toggle-entity\";\nimport { PictureGlanceCardConfig } from \"./types\";\n\nconst STATES_OFF = new Set([\"closed\", \"locked\", \"not_home\", \"off\"]);\n\n@customElement(\"hui-picture-glance-card\")\nclass HuiPictureGlanceCard extends LitElement implements LovelaceCard {\n  @property() public hass?: HomeAssistant;\n\n  @property() private _config?: PictureGlanceCardConfig;\n\n  private _entitiesDialog?: EntityConfig[];\n\n  private _entitiesToggle?: EntityConfig[];\n\n  public getCardSize(): number {\n    return 3;\n  }\n\n  public setConfig(config: PictureGlanceCardConfig): void {\n    if (\n      !config ||\n      !config.entities ||\n      !Array.isArray(config.entities) ||\n      !(config.image || config.camera_image || config.state_image) ||\n      (config.state_image && !config.entity)\n    ) {\n      throw new Error(\"Invalid card configuration\");\n    }\n\n    const entities = processConfigEntities(config.entities);\n    this._entitiesDialog = [];\n    this._entitiesToggle = [];\n\n    entities.forEach((item) => {\n      if (\n        config.force_dialog ||\n        !DOMAINS_TOGGLE.has(computeDomain(item.entity))\n      ) {\n        this._entitiesDialog!.push(item);\n      } else {\n        this._entitiesToggle!.push(item);\n      }\n    });\n\n    this._config = config;\n  }\n\n  protected shouldUpdate(changedProps: PropertyValues): boolean {\n    if (changedProps.has(\"_config\")) {\n      return true;\n    }\n\n    const oldHass = changedProps.get(\"hass\") as HomeAssistant | undefined;\n    if (!oldHass) {\n      return true;\n    }\n\n    if (this._entitiesDialog) {\n      for (const entity of this._entitiesDialog) {\n        if (\n          oldHass.states[entity.entity] !== this.hass!.states[entity.entity]\n        ) {\n          return true;\n        }\n      }\n    }\n\n    if (this._entitiesToggle) {\n      for (const entity of this._entitiesToggle) {\n        if (\n          oldHass.states[entity.entity] !== this.hass!.states[entity.entity]\n        ) {\n          return true;\n        }\n      }\n    }\n\n    return false;\n  }\n\n  protected render(): TemplateResult | void {\n    if (!this._config || !this.hass) {\n      return html``;\n    }\n\n    return html`\n      <ha-card>\n        <hui-image\n          class=\"${classMap({\n            clickable: Boolean(\n              this._config.tap_action ||\n                this._config.hold_action ||\n                this._config.camera_image\n            ),\n          })}\"\n          @ha-click=\"${this._handleTap}\"\n          @ha-hold=\"${this._handleHold}\"\n          .longPress=\"${longPress()}\"\n          .hass=\"${this.hass}\"\n          .image=\"${this._config.image}\"\n          .stateImage=\"${this._config.state_image}\"\n          .cameraImage=\"${this._config.camera_image}\"\n          .cameraView=\"${this._config.camera_view}\"\n          .entity=\"${this._config.entity}\"\n          .aspectRatio=\"${this._config.aspect_ratio}\"\n        ></hui-image>\n        <div class=\"box\">\n          ${this._config.title\n            ? html`\n                <div class=\"title\">${this._config.title}</div>\n              `\n            : \"\"}\n          <div>\n            ${this._entitiesDialog!.map((entityConf) =>\n              this.renderEntity(entityConf, true)\n            )}\n          </div>\n          <div>\n            ${this._entitiesToggle!.map((entityConf) =>\n              this.renderEntity(entityConf, false)\n            )}\n          </div>\n        </div>\n      </ha-card>\n    `;\n  }\n\n  private renderEntity(\n    entityConf: EntityConfig,\n    dialog: boolean\n  ): TemplateResult {\n    const stateObj = this.hass!.states[entityConf.entity];\n\n    if (!stateObj) {\n      return html`\n        <hui-warning-element\n          label=${this.hass!.localize(\n            \"ui.panel.lovelace.warning.entity_not_found\",\n            \"entity\",\n            entityConf.entity\n          )}\n        ></hui-warning-element>\n      `;\n    }\n\n    return html`\n      <ha-icon\n        .entity=\"${stateObj.entity_id}\"\n        @click=\"${dialog ? this._openDialog : this._callService}\"\n        class=\"${classMap({\n          \"state-on\": !STATES_OFF.has(stateObj.state),\n        })}\"\n        .icon=\"${entityConf.icon || stateIcon(stateObj)}\"\n        title=\"${`\n            ${computeStateName(stateObj)} : ${computeStateDisplay(\n          this.hass!.localize,\n          stateObj,\n          this.hass!.language\n        )}\n          `}\"\n      ></ha-icon>\n    `;\n  }\n\n  private _handleTap() {\n    handleClick(this, this.hass!, this._config!, false);\n  }\n\n  private _handleHold() {\n    handleClick(this, this.hass!, this._config!, true);\n  }\n\n  private _openDialog(ev: MouseEvent): void {\n    fireEvent(this, \"hass-more-info\", { entityId: (ev.target as any).entity });\n  }\n\n  private _callService(ev: MouseEvent): void {\n    toggleEntity(this.hass!, (ev.target as any).entity);\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      ha-card {\n        position: relative;\n        min-height: 48px;\n        overflow: hidden;\n      }\n\n      hui-image.clickable {\n        cursor: pointer;\n      }\n\n      .box {\n        /* start paper-font-common-nowrap style */\n        white-space: nowrap;\n        overflow: hidden;\n        text-overflow: ellipsis;\n        /* end paper-font-common-nowrap style */\n\n        position: absolute;\n        left: 0;\n        right: 0;\n        bottom: 0;\n        background-color: rgba(0, 0, 0, 0.3);\n        padding: 4px 8px;\n        font-size: 16px;\n        line-height: 40px;\n        color: white;\n        display: flex;\n        justify-content: space-between;\n      }\n\n      .box .title {\n        font-weight: 500;\n        margin-left: 8px;\n      }\n\n      ha-icon {\n        cursor: pointer;\n        padding: 8px;\n        color: #a9a9a9;\n      }\n\n      ha-icon.state-on {\n        color: white;\n      }\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-picture-glance-card\": HuiPictureGlanceCard;\n  }\n}\n","import {\n  html,\n  LitElement,\n  TemplateResult,\n  css,\n  CSSResult,\n  property,\n  customElement,\n  PropertyValues,\n} from \"lit-element\";\nimport { HassEntity } from \"home-assistant-js-websocket\";\n\nimport \"../../../components/ha-card\";\nimport \"../../../components/ha-icon\";\n\nimport computeStateName from \"../../../common/entity/compute_state_name\";\n\nimport { LovelaceCardEditor, LovelaceCard } from \"../types\";\nimport { HomeAssistant } from \"../../../types\";\nimport { fireEvent } from \"../../../common/dom/fire_event\";\nimport { hasConfigOrEntityChanged } from \"../common/has-changed\";\nimport { PlantStatusCardConfig, PlantAttributeTarget } from \"./types\";\n\nconst SENSORS = {\n  moisture: \"hass:water\",\n  temperature: \"hass:thermometer\",\n  brightness: \"hass:white-balance-sunny\",\n  conductivity: \"hass:emoticon-poop\",\n  battery: \"hass:battery\",\n};\n\n@customElement(\"hui-plant-status-card\")\nclass HuiPlantStatusCard extends LitElement implements LovelaceCard {\n  public static async getConfigElement(): Promise<LovelaceCardEditor> {\n    await import(/* webpackChunkName: \"hui-plant-status-card-editor\" */ \"../editor/config-elements/hui-plant-status-card-editor\");\n    return document.createElement(\"hui-plant-status-card-editor\");\n  }\n\n  public static getStubConfig(): object {\n    return {};\n  }\n\n  @property() public hass?: HomeAssistant;\n\n  @property() private _config?: PlantStatusCardConfig;\n\n  public getCardSize(): number {\n    return 3;\n  }\n\n  public setConfig(config: PlantStatusCardConfig): void {\n    if (!config.entity || config.entity.split(\".\")[0] !== \"plant\") {\n      throw new Error(\"Specify an entity from within the plant domain.\");\n    }\n\n    this._config = config;\n  }\n\n  protected shouldUpdate(changedProps: PropertyValues): boolean {\n    return hasConfigOrEntityChanged(this, changedProps);\n  }\n\n  protected render(): TemplateResult | void {\n    if (!this.hass || !this._config) {\n      return html``;\n    }\n\n    const stateObj = this.hass.states[this._config!.entity];\n\n    if (!stateObj) {\n      return html`\n        <hui-warning\n          >${this.hass.localize(\n            \"ui.panel.lovelace.warning.entity_not_found\",\n            \"entity\",\n            this._config.entity\n          )}</hui-warning\n        >\n      `;\n    }\n\n    return html`\n      <ha-card\n        class=\"${stateObj.attributes.entity_picture ? \"has-plant-image\" : \"\"}\"\n      >\n        <div\n          class=\"banner\"\n          style=\"background-image:url(${stateObj.attributes.entity_picture})\"\n        >\n          <div class=\"header\">\n            ${this._config.name || computeStateName(stateObj)}\n          </div>\n        </div>\n        <div class=\"content\">\n          ${this.computeAttributes(stateObj).map(\n            (item) => html`\n              <div\n                class=\"attributes\"\n                @click=\"${this._handleMoreInfo}\"\n                .value=\"${item}\"\n              >\n                <div>\n                  <ha-icon\n                    icon=\"${this.computeIcon(\n                      item,\n                      stateObj.attributes.battery\n                    )}\"\n                  ></ha-icon>\n                </div>\n                <div\n                  class=\"${stateObj.attributes.problem.indexOf(item) === -1\n                    ? \"\"\n                    : \"problem\"}\"\n                >\n                  ${stateObj.attributes[item]}\n                </div>\n                <div class=\"uom\">\n                  ${stateObj.attributes.unit_of_measurement_dict[item] || \"\"}\n                </div>\n              </div>\n            `\n          )}\n        </div>\n      </ha-card>\n    `;\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      .banner {\n        display: flex;\n        align-items: flex-end;\n        background-repeat: no-repeat;\n        background-size: cover;\n        background-position: center;\n        padding-top: 12px;\n      }\n\n      .has-plant-image .banner {\n        padding-top: 30%;\n      }\n\n      .header {\n        /* start paper-font-headline style */\n        font-family: \"Roboto\", \"Noto\", sans-serif;\n        -webkit-font-smoothing: antialiased; /* OS X subpixel AA bleed bug */\n        text-rendering: optimizeLegibility;\n        font-size: 24px;\n        font-weight: 400;\n        letter-spacing: -0.012em;\n        /* end paper-font-headline style */\n\n        line-height: 40px;\n        padding: 8px 16px;\n      }\n\n      .has-plant-image .header {\n        font-size: 16px;\n        font-weight: 500;\n        line-height: 16px;\n        padding: 16px;\n        color: white;\n        width: 100%;\n        background: rgba(0, 0, 0, var(--dark-secondary-opacity));\n      }\n\n      .content {\n        display: flex;\n        justify-content: space-between;\n        padding: 16px 32px 24px 32px;\n      }\n\n      .has-plant-image .content {\n        padding-bottom: 16px;\n      }\n\n      ha-icon {\n        color: var(--paper-item-icon-color);\n        margin-bottom: 8px;\n      }\n\n      .attributes {\n        cursor: pointer;\n      }\n\n      .attributes div {\n        text-align: center;\n      }\n\n      .problem {\n        color: var(--google-red-500);\n        font-weight: bold;\n      }\n\n      .uom {\n        color: var(--secondary-text-color);\n      }\n    `;\n  }\n\n  private computeAttributes(stateObj: HassEntity): string[] {\n    return Object.keys(SENSORS).filter((key) => key in stateObj.attributes);\n  }\n\n  private computeIcon(attr: string, batLvl: number): string {\n    const icon = SENSORS[attr];\n    if (attr === \"battery\") {\n      if (batLvl <= 5) {\n        return `${icon}-alert`;\n      }\n      if (batLvl < 95) {\n        return `${icon}-${Math.round(batLvl / 10 - 0.01) * 10}`;\n      }\n    }\n    return icon;\n  }\n\n  private _handleMoreInfo(ev: Event): void {\n    const target = ev.currentTarget! as PlantAttributeTarget;\n    const stateObj = this.hass!.states[this._config!.entity];\n\n    if (target.value) {\n      fireEvent(this, \"hass-more-info\", {\n        entityId: stateObj.attributes.sensors[target.value],\n      });\n    }\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-plant-status-card\": HuiPlantStatusCard;\n  }\n}\n","import {\n  html,\n  svg,\n  LitElement,\n  PropertyValues,\n  TemplateResult,\n  customElement,\n  property,\n  css,\n  CSSResult,\n} from \"lit-element\";\nimport \"@polymer/paper-spinner/paper-spinner\";\n\nimport applyThemesOnElement from \"../../../common/dom/apply_themes_on_element\";\nimport computeStateName from \"../../../common/entity/compute_state_name\";\nimport stateIcon from \"../../../common/entity/state_icon\";\n\nimport \"../../../components/ha-card\";\nimport \"../../../components/ha-icon\";\nimport \"../components/hui-warning\";\n\nimport { LovelaceCard, LovelaceCardEditor } from \"../types\";\nimport { HomeAssistant } from \"../../../types\";\nimport { fireEvent } from \"../../../common/dom/fire_event\";\nimport { fetchRecent } from \"../../../data/history\";\nimport { SensorCardConfig } from \"./types\";\nimport { hasConfigOrEntityChanged } from \"../common/has-changed\";\n\nconst midPoint = (\n  _Ax: number,\n  _Ay: number,\n  _Bx: number,\n  _By: number\n): number[] => {\n  const _Zx = (_Ax - _Bx) / 2 + _Bx;\n  const _Zy = (_Ay - _By) / 2 + _By;\n  return [_Zx, _Zy];\n};\n\nconst getPath = (coords: number[][]): string => {\n  let next;\n  let Z;\n  const X = 0;\n  const Y = 1;\n  let path = \"\";\n  let last = coords.filter(Boolean)[0];\n\n  path += `M ${last[X]},${last[Y]}`;\n\n  for (const coord of coords) {\n    next = coord;\n    Z = midPoint(last[X], last[Y], next[X], next[Y]);\n    path += ` ${Z[X]},${Z[Y]}`;\n    path += ` Q${next[X]},${next[Y]}`;\n    last = next;\n  }\n\n  path += ` ${next[X]},${next[Y]}`;\n  return path;\n};\n\nconst calcPoints = (\n  history: any,\n  hours: number,\n  width: number,\n  detail: number,\n  min: number,\n  max: number\n): number[][] => {\n  const coords = [] as number[][];\n  const margin = 5;\n  const height = 80;\n  width -= 10;\n  let yRatio = (max - min) / height;\n  yRatio = yRatio !== 0 ? yRatio : height;\n  let xRatio = width / (hours - (detail === 1 ? 1 : 0));\n  xRatio = isFinite(xRatio) ? xRatio : width;\n  const getCoords = (item, i, offset = 0, depth = 1) => {\n    if (depth > 1) {\n      return item.forEach((subItem, index) =>\n        getCoords(subItem, i, index, depth - 1)\n      );\n    }\n    const average =\n      item.reduce((sum, entry) => sum + parseFloat(entry.state), 0) /\n      item.length;\n\n    const x = xRatio * (i + offset / 6) + margin;\n    const y = height - (average - min) / yRatio + margin * 2;\n    return coords.push([x, y]);\n  };\n\n  history.forEach((item, i) => getCoords(item, i, 0, detail));\n  if (coords.length === 1) {\n    coords[1] = [width + margin, coords[0][1]];\n  }\n\n  coords.push([width + margin, coords[coords.length - 1][1]]);\n  return coords;\n};\n\nconst coordinates = (\n  history: any,\n  hours: number,\n  width: number,\n  detail: number\n): number[][] => {\n  history.forEach((item) => (item.state = Number(item.state)));\n  history = history.filter((item) => !Number.isNaN(item.state));\n\n  const min = Math.min.apply(Math, history.map((item) => item.state));\n  const max = Math.max.apply(Math, history.map((item) => item.state));\n  const now = new Date().getTime();\n\n  const reduce = (res, item, point) => {\n    const age = now - new Date(item.last_changed).getTime();\n\n    let key = Math.abs(age / (1000 * 3600) - hours);\n    if (point) {\n      key = (key - Math.floor(key)) * 60;\n      key = Number((Math.round(key / 10) * 10).toString()[0]);\n    } else {\n      key = Math.floor(key);\n    }\n    if (!res[key]) {\n      res[key] = [];\n    }\n    res[key].push(item);\n    return res;\n  };\n\n  history = history.reduce((res, item) => reduce(res, item, false), []);\n  if (detail > 1) {\n    history = history.map((entry) =>\n      entry.reduce((res, item) => reduce(res, item, true), [])\n    );\n  }\n  return calcPoints(history, hours, width, detail, min, max);\n};\n\n@customElement(\"hui-sensor-card\")\nclass HuiSensorCard extends LitElement implements LovelaceCard {\n  public static async getConfigElement(): Promise<LovelaceCardEditor> {\n    await import(/* webpackChunkName: \"hui-sensor-card-editor\" */ \"../editor/config-elements/hui-sensor-card-editor\");\n    return document.createElement(\"hui-sensor-card-editor\");\n  }\n\n  public static getStubConfig(): object {\n    return {};\n  }\n\n  @property() public hass?: HomeAssistant;\n\n  @property() private _config?: SensorCardConfig;\n\n  @property() private _history?: any;\n\n  private _date?: Date;\n\n  public setConfig(config: SensorCardConfig): void {\n    if (!config.entity || config.entity.split(\".\")[0] !== \"sensor\") {\n      throw new Error(\"Specify an entity from within the sensor domain.\");\n    }\n\n    const cardConfig = {\n      detail: 1,\n      theme: \"default\",\n      hours_to_show: 24,\n      ...config,\n    };\n\n    cardConfig.hours_to_show = Number(cardConfig.hours_to_show);\n    cardConfig.detail =\n      cardConfig.detail === 1 || cardConfig.detail === 2\n        ? cardConfig.detail\n        : 1;\n\n    this._config = cardConfig;\n  }\n\n  public getCardSize(): number {\n    return 3;\n  }\n\n  protected render(): TemplateResult | void {\n    if (!this._config || !this.hass) {\n      return html``;\n    }\n\n    const stateObj = this.hass.states[this._config.entity];\n\n    if (!stateObj) {\n      return html`\n        <hui-warning\n          >${this.hass.localize(\n            \"ui.panel.lovelace.warning.entity_not_found\",\n            \"entity\",\n            this._config.entity\n          )}</hui-warning\n        >\n      `;\n    }\n\n    let graph;\n\n    if (stateObj && this._config.graph === \"line\") {\n      if (!stateObj.attributes.unit_of_measurement) {\n        return html`\n          <hui-warning\n            >Entity: ${this._config.entity} - Has no Unit of Measurement and\n            therefore can not display a line graph.</hui-warning\n          >\n        `;\n      } else if (!this._history) {\n        graph = svg`\n          <svg width=\"100%\" height=\"100%\" viewBox=\"0 0 500 100\"></svg>\n        `;\n      } else {\n        graph = svg`\n          <svg width=\"100%\" height=\"100%\" viewBox=\"0 0 500 100\">\n            <path\n              d=\"${this._history}\"\n              fill=\"none\"\n              stroke=\"var(--accent-color)\"\n              stroke-width=\"5\"\n              stroke-linecap=\"round\"\n              stroke-linejoin=\"round\"\n            />\n          </svg>\n        `;\n      }\n    } else {\n      graph = \"\";\n    }\n    return html`\n      <ha-card @click=\"${this._handleClick}\">\n        <div class=\"flex\">\n          <div class=\"icon\">\n            <ha-icon\n              .icon=\"${this._config.icon || stateIcon(stateObj)}\"\n            ></ha-icon>\n          </div>\n          <div class=\"header\">\n            <span class=\"name\"\n              >${this._config.name || computeStateName(stateObj)}</span\n            >\n          </div>\n        </div>\n        <div class=\"flex info\">\n          <span id=\"value\">${stateObj.state}</span>\n          <span id=\"measurement\"\n            >${this._config.unit ||\n              stateObj.attributes.unit_of_measurement}</span\n          >\n        </div>\n        <div class=\"graph\"><div>${graph}</div></div>\n      </ha-card>\n    `;\n  }\n\n  protected firstUpdated(): void {\n    this._date = new Date();\n  }\n\n  protected shouldUpdate(changedProps: PropertyValues): boolean {\n    if (changedProps.has(\"_history\")) {\n      return true;\n    }\n\n    return hasConfigOrEntityChanged(this, changedProps);\n  }\n\n  protected updated(changedProps: PropertyValues) {\n    super.updated(changedProps);\n    if (!this._config || this._config.graph !== \"line\" || !this.hass) {\n      return;\n    }\n\n    const oldHass = changedProps.get(\"hass\") as HomeAssistant | undefined;\n    if (!oldHass || oldHass.themes !== this.hass.themes) {\n      applyThemesOnElement(this, this.hass.themes, this._config!.theme);\n    }\n\n    const minute = 60000;\n    if (changedProps.has(\"_config\")) {\n      this._getHistory();\n    } else if (Date.now() - this._date!.getTime() >= minute) {\n      this._getHistory();\n    }\n  }\n\n  private _handleClick(): void {\n    fireEvent(this, \"hass-more-info\", { entityId: this._config!.entity });\n  }\n\n  private async _getHistory(): Promise<void> {\n    const endTime = new Date();\n    const startTime = new Date();\n    startTime.setHours(endTime.getHours() - this._config!.hours_to_show!);\n\n    const stateHistory = await fetchRecent(\n      this.hass,\n      this._config!.entity,\n      startTime,\n      endTime\n    );\n\n    if (stateHistory.length < 1 || stateHistory[0].length < 1) {\n      return;\n    }\n\n    const coords = coordinates(\n      stateHistory[0],\n      this._config!.hours_to_show!,\n      500,\n      this._config!.detail!\n    );\n\n    this._history = getPath(coords);\n    this._date = new Date();\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      :host {\n        display: flex;\n        flex-direction: column;\n      }\n\n      ha-card {\n        display: flex;\n        flex-direction: column;\n        flex: 1;\n        padding: 16px;\n        position: relative;\n        cursor: pointer;\n      }\n\n      .flex {\n        display: flex;\n      }\n\n      .header {\n        align-items: center;\n        display: flex;\n        min-width: 0;\n        opacity: 0.8;\n        position: relative;\n      }\n\n      .name {\n        display: block;\n        display: -webkit-box;\n        font-size: 1.2rem;\n        font-weight: 500;\n        max-height: 1.4rem;\n        margin-top: 2px;\n        opacity: 0.8;\n        overflow: hidden;\n        text-overflow: ellipsis;\n        -webkit-line-clamp: 1;\n        -webkit-box-orient: vertical;\n        word-wrap: break-word;\n        word-break: break-all;\n      }\n\n      .icon {\n        color: var(--paper-item-icon-color, #44739e);\n        display: inline-block;\n        flex: 0 0 40px;\n        line-height: 40px;\n        position: relative;\n        text-align: center;\n        width: 40px;\n      }\n\n      .info {\n        flex-wrap: wrap;\n        margin: 16px 0 16px 8px;\n      }\n\n      #value {\n        display: inline-block;\n        font-size: 2rem;\n        font-weight: 400;\n        line-height: 1em;\n        margin-right: 4px;\n      }\n\n      #measurement {\n        align-self: flex-end;\n        display: inline-block;\n        font-size: 1.3rem;\n        line-height: 1.2em;\n        margin-top: 0.1em;\n        opacity: 0.6;\n        vertical-align: bottom;\n      }\n\n      .graph {\n        align-self: flex-end;\n        margin: auto;\n        margin-bottom: 0px;\n        position: relative;\n        width: 100%;\n      }\n\n      .graph > div {\n        align-self: flex-end;\n        margin: auto 8px;\n      }\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-sensor-card\": HuiSensorCard;\n  }\n}\n","import {\n  html,\n  LitElement,\n  TemplateResult,\n  css,\n  CSSResult,\n  property,\n  customElement,\n} from \"lit-element\";\nimport { repeat } from \"lit-html/directives/repeat\";\nimport { PaperInputElement } from \"@polymer/paper-input/paper-input\";\nimport \"@polymer/paper-checkbox/paper-checkbox\";\n\nimport \"../../../components/ha-card\";\nimport \"../../../components/ha-icon\";\n\nimport { HomeAssistant } from \"../../../types\";\nimport { LovelaceCard, LovelaceCardEditor } from \"../types\";\nimport {\n  fetchItems,\n  updateItem,\n  ShoppingListItem,\n  clearItems,\n  addItem,\n} from \"../../../data/shopping-list\";\nimport { ShoppingListCardConfig } from \"./types\";\n\n@customElement(\"hui-shopping-list-card\")\nclass HuiShoppingListCard extends LitElement implements LovelaceCard {\n  public static async getConfigElement(): Promise<LovelaceCardEditor> {\n    await import(/* webpackChunkName: \"hui-shopping-list-editor\" */ \"../editor/config-elements/hui-shopping-list-editor\");\n    return document.createElement(\"hui-shopping-list-card-editor\");\n  }\n\n  public static getStubConfig(): object {\n    return {};\n  }\n\n  @property() public hass?: HomeAssistant;\n\n  @property() private _config?: ShoppingListCardConfig;\n\n  @property() private _uncheckedItems?: ShoppingListItem[];\n\n  @property() private _checkedItems?: ShoppingListItem[];\n\n  private _unsubEvents?: Promise<() => Promise<void>>;\n\n  public getCardSize(): number {\n    return (this._config ? (this._config.title ? 1 : 0) : 0) + 3;\n  }\n\n  public setConfig(config: ShoppingListCardConfig): void {\n    this._config = config;\n    this._uncheckedItems = [];\n    this._checkedItems = [];\n    this._fetchData();\n  }\n\n  public connectedCallback(): void {\n    super.connectedCallback();\n\n    if (this.hass) {\n      this._unsubEvents = this.hass.connection.subscribeEvents(\n        () => this._fetchData(),\n        \"shopping_list_updated\"\n      );\n      this._fetchData();\n    }\n  }\n\n  public disconnectedCallback(): void {\n    super.disconnectedCallback();\n\n    if (this._unsubEvents) {\n      this._unsubEvents.then((unsub) => unsub());\n    }\n  }\n\n  protected render(): TemplateResult | void {\n    if (!this._config || !this.hass) {\n      return html``;\n    }\n\n    return html`\n      <ha-card .header=\"${this._config.title}\">\n        <div class=\"addRow\">\n          <ha-icon\n            class=\"addButton\"\n            @click=\"${this._addItem}\"\n            icon=\"hass:plus\"\n            .title=\"${this.hass!.localize(\n              \"ui.panel.lovelace.cards.shopping-list.add_item\"\n            )}\"\n          >\n          </ha-icon>\n          <paper-item-body>\n            <paper-input\n              no-label-float\n              class=\"addBox\"\n              placeholder=\"${this.hass!.localize(\n                \"ui.panel.lovelace.cards.shopping-list.add_item\"\n              )}\"\n              @keydown=\"${this._addKeyPress}\"\n            ></paper-input>\n          </paper-item-body>\n        </div>\n        ${repeat(\n          this._uncheckedItems!,\n          (item) => item.id,\n          (item, index) =>\n            html`\n              <div class=\"editRow\">\n                <paper-checkbox\n                  slot=\"item-icon\"\n                  id=\"${index}\"\n                  ?checked=\"${item.complete}\"\n                  .itemId=\"${item.id}\"\n                  @click=\"${this._completeItem}\"\n                  tabindex=\"0\"\n                ></paper-checkbox>\n                <paper-item-body>\n                  <paper-input\n                    no-label-float\n                    .value=\"${item.name}\"\n                    .itemId=\"${item.id}\"\n                    @change=\"${this._saveEdit}\"\n                  ></paper-input>\n                </paper-item-body>\n              </div>\n            `\n        )}\n        ${this._checkedItems!.length > 0\n          ? html`\n              <div class=\"divider\"></div>\n              <div class=\"checked\">\n                <span class=\"label\">\n                  ${this.hass!.localize(\n                    \"ui.panel.lovelace.cards.shopping-list.checked_items\"\n                  )}\n                </span>\n                <ha-icon\n                  class=\"clearall\"\n                  @click=\"${this._clearItems}\"\n                  icon=\"hass:notification-clear-all\"\n                  .title=\"${this.hass!.localize(\n                    \"ui.panel.lovelace.cards.shopping-list.clear_items\"\n                  )}\"\n                >\n                </ha-icon>\n              </div>\n              ${repeat(\n                this._checkedItems!,\n                (item) => item.id,\n                (item, index) =>\n                  html`\n                    <div class=\"editRow\">\n                      <paper-checkbox\n                        slot=\"item-icon\"\n                        id=\"${index}\"\n                        ?checked=\"${item.complete}\"\n                        .itemId=\"${item.id}\"\n                        @click=\"${this._completeItem}\"\n                        tabindex=\"0\"\n                      ></paper-checkbox>\n                      <paper-item-body>\n                        <paper-input\n                          no-label-float\n                          .value=\"${item.name}\"\n                          .itemId=\"${item.id}\"\n                          @change=\"${this._saveEdit}\"\n                        ></paper-input>\n                      </paper-item-body>\n                    </div>\n                  `\n              )}\n            `\n          : \"\"}\n      </ha-card>\n    `;\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      .editRow,\n      .addRow {\n        display: flex;\n        flex-direction: row;\n      }\n\n      .addButton {\n        padding: 9px 15px 11px 15px;\n        cursor: pointer;\n      }\n\n      paper-item-body {\n        width: 75%;\n      }\n\n      paper-checkbox {\n        padding: 11px 11px 11px 18px;\n      }\n\n      paper-input {\n        --paper-input-container-underline: {\n          display: none;\n        }\n        --paper-input-container-underline-focus: {\n          display: none;\n        }\n        --paper-input-container-underline-disabled: {\n          display: none;\n        }\n        position: relative;\n        top: 1px;\n      }\n\n      .checked {\n        margin-left: 17px;\n        margin-bottom: 11px;\n        margin-top: 11px;\n      }\n\n      .label {\n        color: var(--primary-color);\n      }\n\n      .divider {\n        height: 1px;\n        background-color: var(--divider-color);\n        margin: 10px;\n      }\n\n      .clearall {\n        cursor: pointer;\n        margin-bottom: 3px;\n        float: right;\n        padding-right: 10px;\n      }\n\n      .addRow > ha-icon {\n        color: var(--secondary-text-color);\n      }\n    `;\n  }\n\n  private async _fetchData(): Promise<void> {\n    if (this.hass) {\n      const checkedItems: ShoppingListItem[] = [];\n      const uncheckedItems: ShoppingListItem[] = [];\n      const items = await fetchItems(this.hass);\n      for (const key in items) {\n        if (items[key].complete) {\n          checkedItems.push(items[key]);\n        } else {\n          uncheckedItems.push(items[key]);\n        }\n      }\n      this._checkedItems = checkedItems;\n      this._uncheckedItems = uncheckedItems;\n    }\n  }\n\n  private _completeItem(ev): void {\n    updateItem(this.hass!, ev.target.itemId, {\n      complete: ev.target.checked,\n    }).catch(() => this._fetchData());\n  }\n\n  private _saveEdit(ev): void {\n    updateItem(this.hass!, ev.target.itemId, {\n      name: ev.target.value,\n    }).catch(() => this._fetchData());\n\n    ev.target.blur();\n  }\n\n  private _clearItems(): void {\n    if (this.hass) {\n      clearItems(this.hass).catch(() => this._fetchData());\n    }\n  }\n\n  private get _newItem(): PaperInputElement {\n    return this.shadowRoot!.querySelector(\".addBox\") as PaperInputElement;\n  }\n\n  private _addItem(ev): void {\n    const newItem = this._newItem;\n\n    if (newItem.value!.length > 0) {\n      addItem(this.hass!, newItem.value!).catch(() => this._fetchData());\n    }\n\n    newItem.value = \"\";\n    if (ev) {\n      newItem.focus();\n    }\n  }\n\n  private _addKeyPress(ev): void {\n    if (ev.keyCode === 13) {\n      this._addItem(null);\n    }\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-shopping-list-card\": HuiShoppingListCard;\n  }\n}\n","import { html, LitElement, TemplateResult } from \"lit-element\";\n\nimport { createCardElement } from \"../common/create-card-element\";\nimport { LovelaceCard } from \"../types\";\nimport { LovelaceCardConfig } from \"../../../data/lovelace\";\nimport { HomeAssistant } from \"../../../types\";\nimport { StackCardConfig } from \"./types\";\n\nexport abstract class HuiStackCard extends LitElement implements LovelaceCard {\n  static get properties() {\n    return {\n      _config: {},\n    };\n  }\n\n  set hass(hass: HomeAssistant) {\n    this._hass = hass;\n\n    if (!this._cards) {\n      return;\n    }\n\n    for (const element of this._cards) {\n      element.hass = this._hass;\n    }\n  }\n  protected _cards?: LovelaceCard[];\n  private _config?: StackCardConfig;\n  private _hass?: HomeAssistant;\n\n  public abstract getCardSize(): number;\n\n  public setConfig(config: StackCardConfig): void {\n    if (!config || !config.cards || !Array.isArray(config.cards)) {\n      throw new Error(\"Card config incorrect\");\n    }\n    this._config = config;\n    this._cards = config.cards.map((card) => {\n      const element = this._createCardElement(card) as LovelaceCard;\n      return element;\n    });\n  }\n\n  protected render(): TemplateResult | void {\n    if (!this._config) {\n      return html``;\n    }\n\n    return html`\n      ${this.renderStyle()}\n      <div id=\"root\">${this._cards}</div>\n    `;\n  }\n\n  protected abstract renderStyle(): TemplateResult;\n\n  private _createCardElement(cardConfig: LovelaceCardConfig) {\n    const element = createCardElement(cardConfig) as LovelaceCard;\n    if (this._hass) {\n      element.hass = this._hass;\n    }\n    element.addEventListener(\n      \"ll-rebuild\",\n      (ev) => {\n        ev.stopPropagation();\n        this._rebuildCard(element, cardConfig);\n      },\n      { once: true }\n    );\n    return element;\n  }\n\n  private _rebuildCard(\n    cardElToReplace: LovelaceCard,\n    config: LovelaceCardConfig\n  ): void {\n    const newCardEl = this._createCardElement(config);\n    cardElToReplace.parentElement!.replaceChild(newCardEl, cardElToReplace);\n    this._cards = this._cards!.map((curCardEl) =>\n      curCardEl === cardElToReplace ? newCardEl : curCardEl\n    );\n  }\n}\n","import {\n  html,\n  LitElement,\n  PropertyValues,\n  TemplateResult,\n  customElement,\n  property,\n} from \"lit-element\";\nimport { classMap } from \"lit-html/directives/class-map\";\nimport \"@polymer/paper-icon-button/paper-icon-button\";\n\nimport \"../../../components/ha-card\";\nimport \"../../../components/ha-icon\";\nimport \"../components/hui-warning\";\n\nimport applyThemesOnElement from \"../../../common/dom/apply_themes_on_element\";\nimport computeStateName from \"../../../common/entity/compute_state_name\";\n\nimport { hasConfigOrEntityChanged } from \"../common/has-changed\";\nimport { HomeAssistant, ClimateEntity } from \"../../../types\";\nimport { LovelaceCard, LovelaceCardEditor } from \"../types\";\nimport { loadRoundslider } from \"../../../resources/jquery.roundslider.ondemand\";\nimport { UNIT_F } from \"../../../common/const\";\nimport { fireEvent } from \"../../../common/dom/fire_event\";\nimport { ThermostatCardConfig } from \"./types\";\n\nconst thermostatConfig = {\n  radius: 150,\n  circleShape: \"pie\",\n  startAngle: 315,\n  width: 5,\n  lineCap: \"round\",\n  handleSize: \"+10\",\n  showTooltip: false,\n  animation: false,\n};\n\nconst modeIcons = {\n  auto: \"hass:autorenew\",\n  manual: \"hass:cursor-pointer\",\n  heat: \"hass:fire\",\n  cool: \"hass:snowflake\",\n  off: \"hass:power\",\n  fan_only: \"hass:fan\",\n  eco: \"hass:leaf\",\n  dry: \"hass:water-percent\",\n  idle: \"hass:power-sleep\",\n};\n\n@customElement(\"hui-thermostat-card\")\nexport class HuiThermostatCard extends LitElement implements LovelaceCard {\n  public static async getConfigElement(): Promise<LovelaceCardEditor> {\n    await import(/* webpackChunkName: \"hui-thermostat-card-editor\" */ \"../editor/config-elements/hui-thermostat-card-editor\");\n    return document.createElement(\"hui-thermostat-card-editor\");\n  }\n\n  public static getStubConfig(): object {\n    return { entity: \"\" };\n  }\n\n  @property() public hass?: HomeAssistant;\n\n  @property() private _config?: ThermostatCardConfig;\n\n  @property() private _roundSliderStyle?: TemplateResult;\n\n  @property() private _jQuery?: any;\n\n  private _broadCard?: boolean;\n\n  private _loaded?: boolean;\n\n  private _updated?: boolean;\n\n  public getCardSize(): number {\n    return 4;\n  }\n\n  public setConfig(config: ThermostatCardConfig): void {\n    if (!config.entity || config.entity.split(\".\")[0] !== \"climate\") {\n      throw new Error(\"Specify an entity from within the climate domain.\");\n    }\n\n    this._config = { theme: \"default\", ...config };\n  }\n\n  public connectedCallback(): void {\n    super.connectedCallback();\n    if (this._updated && !this._loaded) {\n      this._initialLoad();\n    }\n  }\n\n  protected render(): TemplateResult | void {\n    if (!this.hass || !this._config) {\n      return html``;\n    }\n    const stateObj = this.hass.states[this._config.entity] as ClimateEntity;\n\n    if (!stateObj) {\n      return html`\n        <hui-warning\n          >${this.hass.localize(\n            \"ui.panel.lovelace.warning.entity_not_found\",\n            \"entity\",\n            this._config.entity\n          )}</hui-warning\n        >\n      `;\n    }\n\n    const mode = modeIcons[stateObj.attributes.operation_mode || \"\"]\n      ? stateObj.attributes.operation_mode!\n      : \"unknown-mode\";\n    return html`\n      ${this.renderStyle()}\n      <ha-card\n        class=\"${classMap({\n          [mode]: true,\n          large: this._broadCard!,\n          small: !this._broadCard,\n        })}\">\n        <div id=\"root\">\n          <paper-icon-button\n            icon=\"hass:dots-vertical\"\n            class=\"more-info\"\n            @click=\"${this._handleMoreInfo}\"\n          ></paper-icon-button>\n          <div id=\"thermostat\"></div>\n          <div id=\"tooltip\">\n            <div class=\"title\">${this._config.name ||\n              computeStateName(stateObj)}</div>\n            <div class=\"current-temperature\">\n              <span class=\"current-temperature-text\">\n                ${stateObj.attributes.current_temperature}\n                ${\n                  stateObj.attributes.current_temperature\n                    ? html`\n                        <span class=\"uom\"\n                          >${this.hass.config.unit_system.temperature}</span\n                        >\n                      `\n                    : \"\"\n                }\n              </span>\n            </div>\n            <div class=\"climate-info\">\n            <div id=\"set-temperature\"></div>\n            <div class=\"current-mode\">${this.hass!.localize(\n              `state.climate.${stateObj.state}`\n            )}</div>\n            <div class=\"modes\">\n              ${(stateObj.attributes.operation_list || []).map((modeItem) =>\n                this._renderIcon(modeItem, mode)\n              )}\n            </div>\n          </div>\n        </div>\n      </ha-card>\n    `;\n  }\n\n  protected shouldUpdate(changedProps: PropertyValues): boolean {\n    return hasConfigOrEntityChanged(this, changedProps);\n  }\n\n  protected firstUpdated(): void {\n    this._updated = true;\n    if (this.isConnected && !this._loaded) {\n      this._initialLoad();\n    }\n  }\n\n  protected updated(changedProps: PropertyValues): void {\n    super.updated(changedProps);\n    if (!this._config || !this.hass || !changedProps.has(\"hass\")) {\n      return;\n    }\n\n    const oldHass = changedProps.get(\"hass\") as HomeAssistant | undefined;\n\n    if (!oldHass || oldHass.themes !== this.hass.themes) {\n      applyThemesOnElement(this, this.hass.themes, this._config.theme);\n    }\n\n    const stateObj = this.hass.states[this._config.entity] as ClimateEntity;\n\n    if (!stateObj) {\n      return;\n    }\n\n    if (\n      this._jQuery &&\n      // If jQuery changed, we just rendered in firstUpdated\n      !changedProps.has(\"_jQuery\") &&\n      (!oldHass || oldHass.states[this._config.entity] !== stateObj)\n    ) {\n      const [sliderValue, uiValue] = this._genSliderValue(stateObj);\n\n      this._jQuery(\"#thermostat\", this.shadowRoot).roundSlider({\n        value: sliderValue,\n      });\n      this._updateSetTemp(uiValue);\n    }\n  }\n\n  private get _stepSize(): number {\n    const stateObj = this.hass!.states[this._config!.entity];\n\n    if (stateObj.attributes.target_temp_step) {\n      return stateObj.attributes.target_temp_step;\n    }\n    return this.hass!.config.unit_system.temperature === UNIT_F ? 1 : 0.5;\n  }\n\n  private async _initialLoad(): Promise<void> {\n    const stateObj = this.hass!.states[this._config!.entity] as ClimateEntity;\n\n    if (!stateObj) {\n      // Card will require refresh to work again\n      return;\n    }\n\n    this._loaded = true;\n\n    await this.updateComplete;\n\n    let radius = this.clientWidth / 3.2;\n    this._broadCard = this.clientWidth > 390;\n\n    if (radius === 0) {\n      radius = 100;\n    }\n\n    (this.shadowRoot!.querySelector(\n      \"#thermostat\"\n    ) as HTMLElement)!.style.height = radius * 2 + \"px\";\n\n    const loaded = await loadRoundslider();\n\n    this._roundSliderStyle = loaded.roundSliderStyle;\n    this._jQuery = loaded.jQuery;\n\n    const _sliderType =\n      stateObj.attributes.target_temp_low &&\n      stateObj.attributes.target_temp_high\n        ? \"range\"\n        : \"min-range\";\n\n    const [sliderValue, uiValue] = this._genSliderValue(stateObj);\n\n    this._jQuery(\"#thermostat\", this.shadowRoot).roundSlider({\n      ...thermostatConfig,\n      radius,\n      min: stateObj.attributes.min_temp,\n      max: stateObj.attributes.max_temp,\n      sliderType: _sliderType,\n      change: (value) => this._setTemperature(value),\n      drag: (value) => this._dragEvent(value),\n      value: sliderValue,\n      step: this._stepSize,\n    });\n    this._updateSetTemp(uiValue);\n  }\n\n  private _genSliderValue(stateObj: ClimateEntity): [string | number, string] {\n    let sliderValue: string | number;\n    let uiValue: string;\n\n    if (\n      stateObj.attributes.target_temp_low &&\n      stateObj.attributes.target_temp_high\n    ) {\n      sliderValue = `${stateObj.attributes.target_temp_low}, ${\n        stateObj.attributes.target_temp_high\n      }`;\n      uiValue = this.formatTemp(\n        [\n          String(stateObj.attributes.target_temp_low),\n          String(stateObj.attributes.target_temp_high),\n        ],\n        false\n      );\n    } else {\n      sliderValue = stateObj.attributes.temperature;\n      uiValue =\n        stateObj.attributes.temperature !== null\n          ? String(stateObj.attributes.temperature)\n          : \"\";\n    }\n\n    return [sliderValue, uiValue];\n  }\n\n  private _updateSetTemp(value: string): void {\n    this.shadowRoot!.querySelector(\"#set-temperature\")!.innerHTML = value;\n  }\n\n  private _dragEvent(e): void {\n    this._updateSetTemp(this.formatTemp(String(e.value).split(\",\"), true));\n  }\n\n  private _setTemperature(e): void {\n    const stateObj = this.hass!.states[this._config!.entity] as ClimateEntity;\n    if (\n      stateObj.attributes.target_temp_low &&\n      stateObj.attributes.target_temp_high\n    ) {\n      if (e.handle.index === 1) {\n        this.hass!.callService(\"climate\", \"set_temperature\", {\n          entity_id: this._config!.entity,\n          target_temp_low: e.handle.value,\n          target_temp_high: stateObj.attributes.target_temp_high,\n        });\n      } else {\n        this.hass!.callService(\"climate\", \"set_temperature\", {\n          entity_id: this._config!.entity,\n          target_temp_low: stateObj.attributes.target_temp_low,\n          target_temp_high: e.handle.value,\n        });\n      }\n    } else {\n      this.hass!.callService(\"climate\", \"set_temperature\", {\n        entity_id: this._config!.entity,\n        temperature: e.value,\n      });\n    }\n  }\n\n  private _renderIcon(mode: string, currentMode: string): TemplateResult {\n    if (!modeIcons[mode]) {\n      return html``;\n    }\n    return html`\n      <ha-icon\n        class=\"${classMap({ \"selected-icon\": currentMode === mode })}\"\n        .mode=\"${mode}\"\n        .icon=\"${modeIcons[mode]}\"\n        @click=\"${this._handleModeClick}\"\n      ></ha-icon>\n    `;\n  }\n\n  private _handleMoreInfo() {\n    fireEvent(this, \"hass-more-info\", {\n      entityId: this._config!.entity,\n    });\n  }\n\n  private _handleModeClick(e: MouseEvent): void {\n    this.hass!.callService(\"climate\", \"set_operation_mode\", {\n      entity_id: this._config!.entity,\n      operation_mode: (e.currentTarget as any).mode,\n    });\n  }\n\n  private formatTemp(temps: string[], spaceStepSize: boolean): string {\n    temps = temps.filter(Boolean);\n\n    // If we are sliding the slider, append 0 to the temperatures if we're\n    // having a 0.5 step size, so that the text doesn't jump while sliding\n    if (spaceStepSize) {\n      const stepSize = this._stepSize;\n      temps = temps.map((val) =>\n        val.includes(\".\") || stepSize === 1 ? val : `${val}.0`\n      );\n    }\n\n    return temps.join(\"-\");\n  }\n\n  private renderStyle(): TemplateResult {\n    return html`\n      ${this._roundSliderStyle}\n      <style>\n        :host {\n          display: block;\n        }\n        ha-card {\n          overflow: hidden;\n          --rail-border-color: transparent;\n          --auto-color: green;\n          --eco-color: springgreen;\n          --cool-color: #2b9af9;\n          --heat-color: #ff8100;\n          --manual-color: #44739e;\n          --off-color: #8a8a8a;\n          --fan_only-color: #8a8a8a;\n          --dry-color: #efbd07;\n          --idle-color: #8a8a8a;\n          --unknown-color: #bac;\n        }\n        #root {\n          position: relative;\n          overflow: hidden;\n        }\n        .auto {\n          --mode-color: var(--auto-color);\n        }\n        .cool {\n          --mode-color: var(--cool-color);\n        }\n        .heat {\n          --mode-color: var(--heat-color);\n        }\n        .manual {\n          --mode-color: var(--manual-color);\n        }\n        .off {\n          --mode-color: var(--off-color);\n        }\n        .fan_only {\n          --mode-color: var(--fan_only-color);\n        }\n        .eco {\n          --mode-color: var(--eco-color);\n        }\n        .dry {\n          --mode-color: var(--dry-color);\n        }\n        .idle {\n          --mode-color: var(--idle-color);\n        }\n        .unknown-mode {\n          --mode-color: var(--unknown-color);\n        }\n        .no-title {\n          --title-position-top: 33% !important;\n        }\n        .large {\n          --thermostat-padding-top: 25px;\n          --thermostat-margin-bottom: 25px;\n          --title-font-size: 28px;\n          --title-position-top: 27%;\n          --climate-info-position-top: 81%;\n          --set-temperature-font-size: 25px;\n          --current-temperature-font-size: 71px;\n          --current-temperature-position-top: 10%;\n          --current-temperature-text-padding-left: 15px;\n          --uom-font-size: 20px;\n          --uom-margin-left: -18px;\n          --current-mode-font-size: 18px;\n          --set-temperature-margin-bottom: -5px;\n        }\n        .small {\n          --thermostat-padding-top: 15px;\n          --thermostat-margin-bottom: 15px;\n          --title-font-size: 18px;\n          --title-position-top: 28%;\n          --climate-info-position-top: 79%;\n          --set-temperature-font-size: 16px;\n          --current-temperature-font-size: 25px;\n          --current-temperature-position-top: 5%;\n          --current-temperature-text-padding-left: 7px;\n          --uom-font-size: 12px;\n          --uom-margin-left: -5px;\n          --current-mode-font-size: 14px;\n          --set-temperature-margin-bottom: 0px;\n        }\n        #thermostat {\n          margin: 0 auto var(--thermostat-margin-bottom);\n          padding-top: var(--thermostat-padding-top);\n        }\n        #thermostat .rs-range-color {\n          background-color: var(--mode-color, var(--disabled-text-color));\n        }\n        #thermostat .rs-path-color {\n          background-color: var(--disabled-text-color);\n        }\n        #thermostat .rs-handle {\n          background-color: var(--paper-card-background-color, white);\n          padding: 7px;\n          border: 2px solid var(--disabled-text-color);\n        }\n        #thermostat .rs-handle.rs-focus {\n          border-color: var(--mode-color, var(--disabled-text-color));\n        }\n        #thermostat .rs-handle:after {\n          border-color: var(--mode-color, var(--disabled-text-color));\n          background-color: var(--mode-color, var(--disabled-text-color));\n        }\n        #thermostat .rs-border {\n          border-color: var(--rail-border-color);\n        }\n        #thermostat .rs-bar.rs-transition.rs-first,\n        .rs-bar.rs-transition.rs-second {\n          z-index: 20 !important;\n        }\n        #thermostat .rs-inner.rs-bg-color.rs-border,\n        #thermostat .rs-overlay.rs-transition.rs-bg-color {\n          background-color: var(--paper-card-background-color, white);\n        }\n        #tooltip {\n          position: absolute;\n          top: 0;\n          left: 0;\n          right: 0;\n          height: 100%;\n          text-align: center;\n          z-index: 15;\n          color: var(--primary-text-color);\n        }\n        #set-temperature {\n          font-size: var(--set-temperature-font-size);\n          margin-bottom: var(--set-temperature-margin-bottom);\n        }\n        .title {\n          font-size: var(--title-font-size);\n          position: absolute;\n          top: var(--title-position-top);\n          left: 50%;\n          transform: translate(-50%, -50%);\n        }\n        .climate-info {\n          position: absolute;\n          top: var(--climate-info-position-top);\n          left: 50%;\n          transform: translate(-50%, -50%);\n          width: 100%;\n        }\n        .current-mode {\n          font-size: var(--current-mode-font-size);\n          color: var(--secondary-text-color);\n        }\n        .modes {\n          margin-top: 16px;\n        }\n        .modes ha-icon {\n          color: var(--disabled-text-color);\n          cursor: pointer;\n          display: inline-block;\n          margin: 0 10px;\n        }\n        .modes ha-icon.selected-icon {\n          color: var(--mode-color);\n        }\n        .current-temperature {\n          position: absolute;\n          top: 50%;\n          left: 50%;\n          transform: translate(-50%, -50%);\n          font-size: var(--current-temperature-font-size);\n        }\n        .current-temperature-text {\n          padding-left: var(--current-temperature-text-padding-left);\n        }\n        .uom {\n          font-size: var(--uom-font-size);\n          vertical-align: top;\n          margin-left: var(--uom-margin-left);\n        }\n        .more-info {\n          position: absolute;\n          cursor: pointer;\n          top: 0;\n          right: 0;\n          z-index: 25;\n          color: var(--secondary-text-color);\n        }\n      </style>\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-thermostat-card\": HuiThermostatCard;\n  }\n}\n","import { html, TemplateResult } from \"lit-element\";\n\nimport { computeCardSize } from \"../common/compute-card-size\";\nimport { HuiStackCard } from \"./hui-stack-card\";\n\nclass HuiVerticalStackCard extends HuiStackCard {\n  public getCardSize() {\n    let totalSize = 0;\n\n    if (!this._cards) {\n      return totalSize;\n    }\n\n    for (const element of this._cards) {\n      totalSize += computeCardSize(element);\n    }\n\n    return totalSize;\n  }\n\n  protected renderStyle(): TemplateResult {\n    return html`\n      <style>\n        #root {\n          display: flex;\n          flex-direction: column;\n        }\n        #root > * {\n          margin: 4px 0 4px 0;\n        }\n        #root > *:first-child {\n          margin-top: 0;\n        }\n        #root > *:last-child {\n          margin-bottom: 0;\n        }\n      </style>\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-vertical-stack-card\": HuiVerticalStackCard;\n  }\n}\n\ncustomElements.define(\"hui-vertical-stack-card\", HuiVerticalStackCard);\n","import \"../../../cards/ha-weather-card\";\n\nimport LegacyWrapperCard from \"./hui-legacy-wrapper-card\";\n\nclass HuiWeatherForecastCard extends LegacyWrapperCard {\n  static async getConfigElement() {\n    await import(/* webpackChunkName: \"hui-weather-forecast-card-editor\" */ \"../editor/config-elements/hui-weather-forecast-card-editor\");\n    return document.createElement(\"hui-weather-forecast-card-editor\");\n  }\n\n  static getStubConfig() {\n    return {};\n  }\n\n  constructor() {\n    super(\"ha-weather-card\", \"weather\");\n  }\n\n  getCardSize() {\n    return 4;\n  }\n}\n\ncustomElements.define(\"hui-weather-forecast-card\", HuiWeatherForecastCard);\n","import { LovelaceElement, LovelaceElementConfig } from \"../../elements/types\";\nimport { createHuiElement } from \"../../common/create-hui-element\";\n\nexport function createStyledHuiElement(\n  elementConfig: LovelaceElementConfig\n): LovelaceElement {\n  const element = createHuiElement(elementConfig) as LovelaceElement;\n  // keep conditional card as a transparent container so let its position remain static\n  if (element.tagName !== \"HUI-CONDITIONAL-ELEMENT\") {\n    element.classList.add(\"element\");\n  }\n\n  if (elementConfig.style) {\n    Object.keys(elementConfig.style).forEach((prop) => {\n      element.style.setProperty(prop, elementConfig.style[prop]);\n    });\n  }\n\n  return element;\n}\n","import { HomeAssistant } from \"../../../types\";\nimport { CallServiceConfig } from \"../entity-rows/types\";\n\nexport const callService = (\n  config: CallServiceConfig,\n  hass: HomeAssistant\n): void => {\n  const entityId = config.entity;\n  const [domain, service] = config.service.split(\".\", 2);\n  const serviceData = { entity_id: entityId, ...config.service_data };\n  hass.callService(domain, service, serviceData);\n};\n","import { LovelaceCard } from \"../types\";\n\nexport const computeCardSize = (card: LovelaceCard): number => {\n  return typeof card.getCardSize === \"function\" ? card.getCardSize() : 1;\n};\n","import { HassEntities, HassEntity } from \"home-assistant-js-websocket\";\n\nimport computeDomain from \"../../../common/entity/compute_domain\";\n\nexport const computeNotifications = (states: HassEntities): HassEntity[] => {\n  return Object.keys(states)\n    .filter((entityId) => computeDomain(entityId) === \"configurator\")\n    .map((entityId) => states[entityId]);\n};\n","import computeStateName from \"../../../common/entity/compute_state_name\";\nimport { HomeAssistant } from \"../../../types\";\nimport { LovelaceElementConfig } from \"../elements/types\";\nimport { ActionConfig } from \"../../../data/lovelace\";\n\ninterface Config extends LovelaceElementConfig {\n  entity?: string;\n  title?: string;\n  tap_action?: ActionConfig;\n  hold_action?: ActionConfig;\n}\n\nexport const computeTooltip = (hass: HomeAssistant, config: Config): string => {\n  if (config.title === null) {\n    return \"\";\n  }\n\n  if (config.title) {\n    return config.title;\n  }\n\n  let stateName = \"\";\n  let tooltip = \"\";\n\n  if (config.entity) {\n    stateName =\n      config.entity in hass.states\n        ? computeStateName(hass.states[config.entity])\n        : config.entity;\n  }\n\n  const tapTooltip = config.tap_action\n    ? computeActionTooltip(hass, stateName, config.tap_action, false)\n    : \"\";\n  const holdTooltip = config.hold_action\n    ? computeActionTooltip(hass, stateName, config.hold_action, true)\n    : \"\";\n\n  const newline = tapTooltip && holdTooltip ? \"\\n\" : \"\";\n\n  tooltip = tapTooltip + newline + holdTooltip;\n\n  return tooltip;\n};\n\nfunction computeActionTooltip(\n  hass: HomeAssistant,\n  state: string,\n  config: ActionConfig,\n  isHold: boolean\n) {\n  if (!config || !config.action || config.action === \"none\") {\n    return \"\";\n  }\n\n  let tooltip =\n    (isHold\n      ? hass.localize(\"ui.panel.lovelace.cards.picture-elements.hold\")\n      : hass.localize(\"ui.panel.lovelace.cards.picture-elements.tap\")) + \" \";\n\n  switch (config.action) {\n    case \"navigate\":\n      tooltip += `${hass.localize(\n        \"ui.panel.lovelace.cards.picture-elements.navigate_to\",\n        \"location\",\n        config.navigation_path\n      )}`;\n      break;\n    case \"toggle\":\n      tooltip += `${hass.localize(\n        \"ui.panel.lovelace.cards.picture-elements.toggle\",\n        \"name\",\n        state\n      )}`;\n      break;\n    case \"call-service\":\n      tooltip += `${hass.localize(\n        \"ui.panel.lovelace.cards.picture-elements.call_service\",\n        \"name\",\n        config.service\n      )}`;\n      break;\n    case \"more-info\":\n      tooltip += `${hass.localize(\n        \"ui.panel.lovelace.cards.picture-elements.more_info\",\n        \"name\",\n        state\n      )}`;\n      break;\n  }\n\n  return tooltip;\n}\n","import deepClone from \"deep-clone-simple\";\n\nimport { fireEvent } from \"../../../common/dom/fire_event\";\n\nimport \"../cards/hui-alarm-panel-card\";\nimport \"../cards/hui-conditional-card\";\nimport \"../cards/hui-entities-card\";\nimport \"../cards/hui-entity-button-card\";\nimport \"../cards/hui-entity-filter-card\";\nimport {\n  createErrorCardElement,\n  createErrorCardConfig,\n  HuiErrorCard,\n} from \"../cards/hui-error-card\";\nimport \"../cards/hui-glance-card\";\nimport \"../cards/hui-history-graph-card\";\nimport \"../cards/hui-horizontal-stack-card\";\nimport \"../cards/hui-iframe-card\";\nimport \"../cards/hui-light-card\";\nimport \"../cards/hui-map-card\";\nimport \"../cards/hui-markdown-card\";\nimport \"../cards/hui-media-control-card\";\nimport \"../cards/hui-picture-card\";\nimport \"../cards/hui-picture-elements-card\";\nimport \"../cards/hui-picture-entity-card\";\nimport \"../cards/hui-picture-glance-card\";\nimport \"../cards/hui-plant-status-card\";\nimport \"../cards/hui-sensor-card\";\nimport \"../cards/hui-vertical-stack-card\";\nimport \"../cards/hui-shopping-list-card\";\nimport \"../cards/hui-thermostat-card\";\nimport \"../cards/hui-weather-forecast-card\";\nimport \"../cards/hui-gauge-card\";\nimport { LovelaceCard } from \"../types\";\nimport { LovelaceCardConfig } from \"../../../data/lovelace\";\n\nconst CARD_TYPES = new Set([\n  \"alarm-panel\",\n  \"conditional\",\n  \"entities\",\n  \"entity-button\",\n  \"entity-filter\",\n  \"error\",\n  \"gauge\",\n  \"glance\",\n  \"history-graph\",\n  \"horizontal-stack\",\n  \"iframe\",\n  \"light\",\n  \"map\",\n  \"markdown\",\n  \"media-control\",\n  \"picture\",\n  \"picture-elements\",\n  \"picture-entity\",\n  \"picture-glance\",\n  \"plant-status\",\n  \"sensor\",\n  \"shopping-list\",\n  \"thermostat\",\n  \"vertical-stack\",\n  \"weather-forecast\",\n]);\nconst CUSTOM_TYPE_PREFIX = \"custom:\";\nconst TIMEOUT = 2000;\n\nconst _createElement = (\n  tag: string,\n  config: LovelaceCardConfig\n): LovelaceCard | HuiErrorCard => {\n  const element = document.createElement(tag) as LovelaceCard;\n  try {\n    element.setConfig(deepClone(config));\n  } catch (err) {\n    // tslint:disable-next-line\n    console.error(tag, err);\n    return _createErrorElement(err.message, config);\n  }\n  return element;\n};\n\nconst _createErrorElement = (\n  error: string,\n  config: LovelaceCardConfig\n): HuiErrorCard => createErrorCardElement(createErrorCardConfig(error, config));\n\nexport const createCardElement = (\n  config: LovelaceCardConfig\n): LovelaceCard | HuiErrorCard => {\n  if (!config || typeof config !== \"object\" || !config.type) {\n    return _createErrorElement(\"No card type configured.\", config);\n  }\n\n  if (config.type.startsWith(CUSTOM_TYPE_PREFIX)) {\n    const tag = config.type.substr(CUSTOM_TYPE_PREFIX.length);\n\n    if (customElements.get(tag)) {\n      return _createElement(tag, config);\n    }\n    const element = _createErrorElement(\n      `Custom element doesn't exist: ${tag}.`,\n      config\n    );\n    element.style.display = \"None\";\n    const timer = window.setTimeout(() => {\n      element.style.display = \"\";\n    }, TIMEOUT);\n\n    customElements.whenDefined(tag).then(() => {\n      clearTimeout(timer);\n      fireEvent(element, \"ll-rebuild\");\n    });\n\n    return element;\n  }\n\n  if (!CARD_TYPES.has(config.type)) {\n    return _createErrorElement(\n      `Unknown card type encountered: ${config.type}.`,\n      config\n    );\n  }\n\n  return _createElement(`hui-${config.type}-card`, config);\n};\n","import deepClone from \"deep-clone-simple\";\n\nimport \"../elements/hui-conditional-element\";\nimport \"../elements/hui-icon-element\";\nimport \"../elements/hui-image-element\";\nimport \"../elements/hui-service-button-element\";\nimport \"../elements/hui-state-badge-element\";\nimport \"../elements/hui-state-icon-element\";\nimport \"../elements/hui-state-label-element\";\n\nimport { fireEvent } from \"../../../common/dom/fire_event\";\nimport {\n  createErrorCardElement,\n  createErrorCardConfig,\n  HuiErrorCard,\n} from \"../cards/hui-error-card\";\nimport { LovelaceElementConfig, LovelaceElement } from \"../elements/types\";\n\nconst CUSTOM_TYPE_PREFIX = \"custom:\";\nconst ELEMENT_TYPES = new Set([\n  \"conditional\",\n  \"icon\",\n  \"image\",\n  \"service-button\",\n  \"state-badge\",\n  \"state-icon\",\n  \"state-label\",\n]);\nconst TIMEOUT = 2000;\n\nconst _createElement = (\n  tag: string,\n  config: LovelaceElementConfig\n): LovelaceElement | HuiErrorCard => {\n  const element = document.createElement(tag) as LovelaceElement;\n  try {\n    element.setConfig(deepClone(config));\n  } catch (err) {\n    // tslint:disable-next-line\n    console.error(tag, err);\n    return _createErrorElement(err.message, config);\n  }\n  return element;\n};\n\nconst _createErrorElement = (\n  error: string,\n  config: LovelaceElementConfig\n): HuiErrorCard => createErrorCardElement(createErrorCardConfig(error, config));\n\nfunction _hideErrorElement(element) {\n  element.style.display = \"None\";\n  return window.setTimeout(() => {\n    element.style.display = \"\";\n  }, TIMEOUT);\n}\n\nexport const createHuiElement = (\n  config: LovelaceElementConfig\n): LovelaceElement | HuiErrorCard => {\n  if (!config || typeof config !== \"object\" || !config.type) {\n    return _createErrorElement(\"No element type configured.\", config);\n  }\n\n  if (config.type.startsWith(CUSTOM_TYPE_PREFIX)) {\n    const tag = config.type.substr(CUSTOM_TYPE_PREFIX.length);\n\n    if (customElements.get(tag)) {\n      return _createElement(tag, config);\n    }\n    const element = _createErrorElement(\n      `Custom element doesn't exist: ${tag}.`,\n      config\n    );\n    const timer = _hideErrorElement(element);\n\n    customElements.whenDefined(tag).then(() => {\n      clearTimeout(timer);\n      fireEvent(element, \"ll-rebuild\");\n    });\n\n    return element;\n  }\n\n  if (!ELEMENT_TYPES.has(config.type)) {\n    return _createErrorElement(\n      `Unknown element type encountered: ${config.type}.`,\n      config\n    );\n  }\n\n  return _createElement(`hui-${config.type}-element`, config);\n};\n","import deepClone from \"deep-clone-simple\";\n\nimport { fireEvent } from \"../../../common/dom/fire_event\";\n\nimport {\n  createErrorCardElement,\n  createErrorCardConfig,\n  HuiErrorCard,\n} from \"../cards/hui-error-card\";\nimport \"../entity-rows/hui-climate-entity-row\";\nimport \"../entity-rows/hui-cover-entity-row\";\nimport \"../entity-rows/hui-group-entity-row\";\nimport \"../entity-rows/hui-input-datetime-entity-row\";\nimport \"../entity-rows/hui-input-number-entity-row\";\nimport \"../entity-rows/hui-input-select-entity-row\";\nimport \"../entity-rows/hui-input-text-entity-row\";\nimport \"../entity-rows/hui-lock-entity-row\";\nimport \"../entity-rows/hui-media-player-entity-row\";\nimport \"../entity-rows/hui-scene-entity-row\";\nimport \"../entity-rows/hui-script-entity-row\";\nimport \"../entity-rows/hui-sensor-entity-row\";\nimport \"../entity-rows/hui-text-entity-row\";\nimport \"../entity-rows/hui-timer-entity-row\";\nimport \"../entity-rows/hui-toggle-entity-row\";\nimport \"../special-rows/hui-call-service-row\";\nimport \"../special-rows/hui-divider-row\";\nimport \"../special-rows/hui-section-row\";\nimport \"../special-rows/hui-weblink-row\";\nimport { EntityConfig, EntityRow } from \"../entity-rows/types\";\n\nconst CUSTOM_TYPE_PREFIX = \"custom:\";\nconst SPECIAL_TYPES = new Set([\n  \"call-service\",\n  \"divider\",\n  \"section\",\n  \"weblink\",\n]);\nconst DOMAIN_TO_ELEMENT_TYPE = {\n  alert: \"toggle\",\n  automation: \"toggle\",\n  climate: \"climate\",\n  cover: \"cover\",\n  fan: \"toggle\",\n  group: \"group\",\n  input_boolean: \"toggle\",\n  input_number: \"input-number\",\n  input_select: \"input-select\",\n  input_text: \"input-text\",\n  light: \"toggle\",\n  lock: \"lock\",\n  media_player: \"media-player\",\n  remote: \"toggle\",\n  scene: \"scene\",\n  script: \"script\",\n  sensor: \"sensor\",\n  timer: \"timer\",\n  switch: \"toggle\",\n  vacuum: \"toggle\",\n  // Temporary. Once climate is rewritten,\n  // water heater should get it's own row.\n  water_heater: \"climate\",\n  input_datetime: \"input-datetime\",\n};\nconst TIMEOUT = 2000;\n\nconst _createElement = (\n  tag: string,\n  config: EntityConfig\n): EntityRow | HuiErrorCard => {\n  const element = document.createElement(tag) as EntityRow;\n  try {\n    element.setConfig(deepClone(config));\n  } catch (err) {\n    // tslint:disable-next-line\n    console.error(tag, err);\n    return _createErrorElement(err.message, config);\n  }\n\n  return element;\n};\n\nconst _createErrorElement = (\n  error: string,\n  config: EntityConfig\n): HuiErrorCard => createErrorCardElement(createErrorCardConfig(error, config));\n\nconst _hideErrorElement = (element) => {\n  element.style.display = \"None\";\n  return window.setTimeout(() => {\n    element.style.display = \"\";\n  }, TIMEOUT);\n};\n\nexport const createRowElement = (\n  config: EntityConfig\n): EntityRow | HuiErrorCard => {\n  let tag;\n\n  if (\n    !config ||\n    typeof config !== \"object\" ||\n    (!config.entity && !config.type)\n  ) {\n    return _createErrorElement(\"Invalid config given.\", config);\n  }\n\n  const type = config.type || \"default\";\n  if (SPECIAL_TYPES.has(type)) {\n    return _createElement(`hui-${type}-row`, config);\n  }\n\n  if (type.startsWith(CUSTOM_TYPE_PREFIX)) {\n    tag = type.substr(CUSTOM_TYPE_PREFIX.length);\n\n    if (customElements.get(tag)) {\n      return _createElement(tag, config);\n    }\n    const element = _createErrorElement(\n      `Custom element doesn't exist: ${tag}.`,\n      config\n    );\n    const timer = _hideErrorElement(element);\n\n    customElements.whenDefined(tag).then(() => {\n      clearTimeout(timer);\n      fireEvent(element, \"ll-rebuild\");\n    });\n\n    return element;\n  }\n\n  const domain = config.entity.split(\".\", 1)[0];\n  tag = `hui-${DOMAIN_TO_ELEMENT_TYPE[domain] || \"text\"}-entity-row`;\n\n  return _createElement(tag, config);\n};\n","import { directive, PropertyPart } from \"lit-html\";\n// See https://github.com/home-assistant/home-assistant-polymer/pull/2457\n// on how to undo mwc -> paper migration\n// import \"@material/mwc-ripple\";\nimport \"@polymer/paper-ripple\";\n\nconst isTouch =\n  \"ontouchstart\" in window ||\n  navigator.maxTouchPoints > 0 ||\n  navigator.msMaxTouchPoints > 0;\n\ninterface LongPress extends HTMLElement {\n  holdTime: number;\n  bind(element: Element): void;\n}\ninterface LongPressElement extends Element {\n  longPress?: boolean;\n}\n\nclass LongPress extends HTMLElement implements LongPress {\n  public holdTime: number;\n  protected ripple: any;\n  protected timer: number | undefined;\n  protected held: boolean;\n  protected cooldownStart: boolean;\n  protected cooldownEnd: boolean;\n\n  constructor() {\n    super();\n    this.holdTime = 500;\n    this.ripple = document.createElement(\"paper-ripple\");\n    this.timer = undefined;\n    this.held = false;\n    this.cooldownStart = false;\n    this.cooldownEnd = false;\n  }\n\n  public connectedCallback() {\n    Object.assign(this.style, {\n      borderRadius: \"50%\", // paper-ripple\n      position: \"absolute\",\n      width: isTouch ? \"100px\" : \"50px\",\n      height: isTouch ? \"100px\" : \"50px\",\n      transform: \"translate(-50%, -50%)\",\n      pointerEvents: \"none\",\n    });\n\n    this.appendChild(this.ripple);\n    this.ripple.style.color = \"#03a9f4\"; // paper-ripple\n    this.ripple.style.color = \"var(--primary-color)\"; // paper-ripple\n    // this.ripple.primary = true;\n\n    [\n      \"touchcancel\",\n      \"mouseout\",\n      \"mouseup\",\n      \"touchmove\",\n      \"mousewheel\",\n      \"wheel\",\n      \"scroll\",\n    ].forEach((ev) => {\n      document.addEventListener(\n        ev,\n        () => {\n          clearTimeout(this.timer);\n          this.stopAnimation();\n          this.timer = undefined;\n        },\n        { passive: true }\n      );\n    });\n  }\n\n  public bind(element: LongPressElement) {\n    if (element.longPress) {\n      return;\n    }\n    element.longPress = true;\n\n    element.addEventListener(\"contextmenu\", (ev: Event) => {\n      const e = ev || window.event;\n      if (e.preventDefault) {\n        e.preventDefault();\n      }\n      if (e.stopPropagation) {\n        e.stopPropagation();\n      }\n      e.cancelBubble = true;\n      e.returnValue = false;\n      return false;\n    });\n\n    const clickStart = (ev: Event) => {\n      if (this.cooldownStart) {\n        return;\n      }\n      this.held = false;\n      let x;\n      let y;\n      if ((ev as TouchEvent).touches) {\n        x = (ev as TouchEvent).touches[0].pageX;\n        y = (ev as TouchEvent).touches[0].pageY;\n      } else {\n        x = (ev as MouseEvent).pageX;\n        y = (ev as MouseEvent).pageY;\n      }\n      this.timer = window.setTimeout(() => {\n        this.startAnimation(x, y);\n        this.held = true;\n      }, this.holdTime);\n\n      this.cooldownStart = true;\n      window.setTimeout(() => (this.cooldownStart = false), 100);\n    };\n\n    const clickEnd = (ev: Event) => {\n      if (\n        this.cooldownEnd ||\n        ([\"touchend\", \"touchcancel\"].includes(ev.type) &&\n          this.timer === undefined)\n      ) {\n        return;\n      }\n      clearTimeout(this.timer);\n      this.stopAnimation();\n      this.timer = undefined;\n      if (this.held) {\n        element.dispatchEvent(new Event(\"ha-hold\"));\n      } else {\n        element.dispatchEvent(new Event(\"ha-click\"));\n      }\n      this.cooldownEnd = true;\n      window.setTimeout(() => (this.cooldownEnd = false), 100);\n    };\n\n    element.addEventListener(\"touchstart\", clickStart, { passive: true });\n    element.addEventListener(\"touchend\", clickEnd);\n    element.addEventListener(\"touchcancel\", clickEnd);\n    element.addEventListener(\"mousedown\", clickStart, { passive: true });\n    element.addEventListener(\"click\", clickEnd);\n  }\n\n  private startAnimation(x: number, y: number) {\n    Object.assign(this.style, {\n      left: `${x}px`,\n      top: `${y}px`,\n      display: null,\n    });\n    this.ripple.holdDown = true; // paper-ripple\n    this.ripple.simulatedRipple(); // paper-ripple\n    // this.ripple.disabled = false;\n    // this.ripple.active = true;\n    // this.ripple.unbounded = true;\n  }\n\n  private stopAnimation() {\n    this.ripple.holdDown = false; // paper-ripple\n    // this.ripple.active = false;\n    // this.ripple.disabled = true;\n    this.style.display = \"none\";\n  }\n}\n\ncustomElements.define(\"long-press\", LongPress);\n\nconst getLongPress = (): LongPress => {\n  const body = document.body;\n  if (body.querySelector(\"long-press\")) {\n    return body.querySelector(\"long-press\") as LongPress;\n  }\n\n  const longpress = document.createElement(\"long-press\");\n  body.appendChild(longpress);\n\n  return longpress as LongPress;\n};\n\nexport const longPressBind = (element: LongPressElement) => {\n  const longpress: LongPress = getLongPress();\n  if (!longpress) {\n    return;\n  }\n  longpress.bind(element);\n};\n\nexport const longPress = directive(() => (part: PropertyPart) => {\n  longPressBind(part.committer.element);\n});\n","import { STATES_OFF } from \"../../../../common/const\";\nimport { turnOnOffEntity } from \"./turn-on-off-entity\";\nimport { HomeAssistant } from \"../../../../types\";\nexport const toggleEntity = (\n  hass: HomeAssistant,\n  entityId: string\n): Promise<void> => {\n  const turnOn = STATES_OFF.includes(hass.states[entityId].state);\n  return turnOnOffEntity(hass, entityId, turnOn);\n};\n","import computeDomain from \"../../../../common/entity/compute_domain\";\nimport { STATES_OFF } from \"../../../../common/const\";\nimport { HomeAssistant } from \"../../../../types\";\n\nexport const turnOnOffEntities = (\n  hass: HomeAssistant,\n  entityIds: string[],\n  turnOn = true\n): void => {\n  const domainsToCall = {};\n  entityIds.forEach((entityId) => {\n    if (STATES_OFF.includes(hass.states[entityId].state) === turnOn) {\n      const stateDomain = computeDomain(entityId);\n      const serviceDomain = [\"cover\", \"lock\"].includes(stateDomain)\n        ? stateDomain\n        : \"homeassistant\";\n\n      if (!(serviceDomain in domainsToCall)) {\n        domainsToCall[serviceDomain] = [];\n      }\n      domainsToCall[serviceDomain].push(entityId);\n    }\n  });\n\n  Object.keys(domainsToCall).forEach((domain) => {\n    let service;\n    switch (domain) {\n      case \"lock\":\n        service = turnOn ? \"unlock\" : \"lock\";\n        break;\n      case \"cover\":\n        service = turnOn ? \"open_cover\" : \"close_cover\";\n        break;\n      default:\n        service = turnOn ? \"turn_on\" : \"turn_off\";\n    }\n\n    const entities = domainsToCall[domain];\n    hass.callService(domain, service, { entity_id: entities });\n  });\n};\n","import computeDomain from \"../../../../common/entity/compute_domain\";\nimport { HomeAssistant } from \"../../../../types\";\n\nexport const turnOnOffEntity = (\n  hass: HomeAssistant,\n  entityId: string,\n  turnOn = true\n): Promise<void> => {\n  const stateDomain = computeDomain(entityId);\n  const serviceDomain = stateDomain === \"group\" ? \"homeassistant\" : stateDomain;\n\n  let service;\n  switch (stateDomain) {\n    case \"lock\":\n      service = turnOn ? \"unlock\" : \"lock\";\n      break;\n    case \"cover\":\n      service = turnOn ? \"open_cover\" : \"close_cover\";\n      break;\n    default:\n      service = turnOn ? \"turn_on\" : \"turn_off\";\n  }\n\n  return hass.callService(serviceDomain, service, { entity_id: entityId });\n};\n","import { HomeAssistant, GroupEntity } from \"../../../types\";\nimport {\n  LovelaceConfig,\n  LovelaceCardConfig,\n  LovelaceViewConfig,\n} from \"../../../data/lovelace\";\nimport { HassEntity, HassEntities } from \"home-assistant-js-websocket\";\n\nimport extractViews from \"../../../common/entity/extract_views\";\nimport getViewEntities from \"../../../common/entity/get_view_entities\";\nimport computeStateName from \"../../../common/entity/compute_state_name\";\nimport splitByGroups from \"../../../common/entity/split_by_groups\";\nimport computeObjectId from \"../../../common/entity/compute_object_id\";\nimport computeStateDomain from \"../../../common/entity/compute_state_domain\";\nimport computeDomain from \"../../../common/entity/compute_domain\";\n\nimport { EntityRowConfig, WeblinkConfig } from \"../entity-rows/types\";\nimport { LocalizeFunc } from \"../../../common/translations/localize\";\nimport { EntitiesCardConfig } from \"../cards/types\";\nimport {\n  subscribeAreaRegistry,\n  AreaRegistryEntry,\n} from \"../../../data/area_registry\";\nimport { subscribeOne } from \"../../../common/util/subscribe-one\";\nimport {\n  subscribeDeviceRegistry,\n  DeviceRegistryEntry,\n} from \"../../../data/device_registry\";\nimport {\n  subscribeEntityRegistry,\n  EntityRegistryEntry,\n} from \"../../../data/entity_registry\";\n\nconst DEFAULT_VIEW_ENTITY_ID = \"group.default_view\";\nconst DOMAINS_BADGES = [\n  \"binary_sensor\",\n  \"person\",\n  \"device_tracker\",\n  \"mailbox\",\n  \"sensor\",\n  \"sun\",\n  \"timer\",\n];\nconst HIDE_DOMAIN = new Set([\n  \"persistent_notification\",\n  \"configurator\",\n  \"geo_location\",\n]);\n\ninterface Registries {\n  areas: AreaRegistryEntry[];\n  devices: DeviceRegistryEntry[];\n  entities: EntityRegistryEntry[];\n}\n\nlet subscribedRegistries = false;\n\ninterface SplittedByAreas {\n  areasWithEntities: Array<[AreaRegistryEntry, HassEntity[]]>;\n  otherEntities: HassEntities;\n}\n\nconst splitByAreas = (\n  registries: Registries,\n  entities: HassEntities\n): SplittedByAreas => {\n  const allEntities = { ...entities };\n  const areasWithEntities: SplittedByAreas[\"areasWithEntities\"] = [];\n\n  for (const area of registries.areas) {\n    const areaEntities: HassEntity[] = [];\n    const areaDevices = new Set(\n      registries.devices\n        .filter((device) => device.area_id === area.area_id)\n        .map((device) => device.id)\n    );\n    for (const entity of registries.entities) {\n      if (\n        areaDevices.has(\n          // @ts-ignore\n          entity.device_id\n        ) &&\n        entity.entity_id in allEntities\n      ) {\n        areaEntities.push(allEntities[entity.entity_id]);\n        delete allEntities[entity.entity_id];\n      }\n    }\n    if (areaEntities.length > 0) {\n      areasWithEntities.push([area, areaEntities]);\n    }\n  }\n  return {\n    areasWithEntities,\n    otherEntities: allEntities,\n  };\n};\n\nconst computeCards = (\n  states: Array<[string, HassEntity]>,\n  entityCardOptions: Partial<EntitiesCardConfig>\n): LovelaceCardConfig[] => {\n  const cards: LovelaceCardConfig[] = [];\n\n  // For entity card\n  const entities: Array<string | EntityRowConfig> = [];\n\n  for (const [entityId, stateObj] of states) {\n    const domain = computeDomain(entityId);\n\n    if (domain === \"alarm_control_panel\") {\n      cards.push({\n        type: \"alarm-panel\",\n        entity: entityId,\n      });\n    } else if (domain === \"camera\") {\n      cards.push({\n        type: \"picture-entity\",\n        entity: entityId,\n      });\n    } else if (domain === \"climate\") {\n      cards.push({\n        type: \"thermostat\",\n        entity: entityId,\n      });\n    } else if (domain === \"history_graph\" && stateObj) {\n      cards.push({\n        type: \"history-graph\",\n        entities: stateObj.attributes.entity_id,\n        hours_to_show: stateObj.attributes.hours_to_show,\n        title: stateObj.attributes.friendly_name,\n        refresh_interval: stateObj.attributes.refresh,\n      });\n    } else if (domain === \"media_player\") {\n      cards.push({\n        type: \"media-control\",\n        entity: entityId,\n      });\n    } else if (domain === \"plant\") {\n      cards.push({\n        type: \"plant-status\",\n        entity: entityId,\n      });\n    } else if (domain === \"weather\") {\n      cards.push({\n        type: \"weather-forecast\",\n        entity: entityId,\n      });\n    } else if (domain === \"weblink\" && stateObj) {\n      const conf: WeblinkConfig = {\n        type: \"weblink\",\n        url: stateObj.state,\n        name: computeStateName(stateObj),\n      };\n      if (\"icon\" in stateObj.attributes) {\n        conf.icon = stateObj.attributes.icon;\n      }\n      entities.push(conf);\n    } else {\n      entities.push(entityId);\n    }\n  }\n\n  if (entities.length > 0) {\n    cards.unshift({\n      type: \"entities\",\n      entities,\n      ...entityCardOptions,\n    });\n  }\n\n  return cards;\n};\n\nconst computeDefaultViewStates = (hass: HomeAssistant): HassEntities => {\n  const states = {};\n  Object.keys(hass.states).forEach((entityId) => {\n    const stateObj = hass.states[entityId];\n    if (\n      !stateObj.attributes.hidden &&\n      !HIDE_DOMAIN.has(computeStateDomain(stateObj))\n    ) {\n      states[entityId] = hass.states[entityId];\n    }\n  });\n  return states;\n};\n\nconst generateDefaultViewConfig = (\n  hass: HomeAssistant,\n  registries: Registries\n): LovelaceViewConfig => {\n  const states = computeDefaultViewStates(hass);\n  const path = \"default_view\";\n  const title = \"Home\";\n  const icon = undefined;\n\n  // In the case of a default view, we want to use the group order attribute\n  const groupOrders = {};\n  Object.keys(states).forEach((entityId) => {\n    const stateObj = states[entityId];\n    if (stateObj.attributes.order) {\n      groupOrders[entityId] = stateObj.attributes.order;\n    }\n  });\n\n  const splittedByAreas = splitByAreas(registries, states);\n\n  const config = generateViewConfig(\n    hass.localize,\n    path,\n    title,\n    icon,\n    splittedByAreas.otherEntities,\n    groupOrders\n  );\n\n  const areaCards: LovelaceCardConfig[] = [];\n\n  splittedByAreas.areasWithEntities.forEach(([area, entities]) => {\n    areaCards.push(\n      ...computeCards(entities.map((entity) => [entity.entity_id, entity]), {\n        title: area.name,\n        show_header_toggle: true,\n      })\n    );\n  });\n\n  config.cards!.unshift(...areaCards);\n\n  return config;\n};\n\nconst generateViewConfig = (\n  localize: LocalizeFunc,\n  path: string,\n  title: string | undefined,\n  icon: string | undefined,\n  entities: HassEntities,\n  groupOrders: { [entityId: string]: number }\n): LovelaceViewConfig => {\n  const splitted = splitByGroups(entities);\n  splitted.groups.sort(\n    (gr1, gr2) => groupOrders[gr1.entity_id] - groupOrders[gr2.entity_id]\n  );\n\n  const badgeEntities: { [domain: string]: string[] } = {};\n  const ungroupedEntitites: { [domain: string]: string[] } = {};\n\n  // Organize ungrouped entities in badges/ungrouped things\n  Object.keys(splitted.ungrouped).forEach((entityId) => {\n    const state = splitted.ungrouped[entityId];\n    const domain = computeStateDomain(state);\n\n    const coll = DOMAINS_BADGES.includes(domain)\n      ? badgeEntities\n      : ungroupedEntitites;\n\n    if (!(domain in coll)) {\n      coll[domain] = [];\n    }\n\n    coll[domain].push(state.entity_id);\n  });\n\n  let badges: string[] = [];\n  DOMAINS_BADGES.forEach((domain) => {\n    if (domain in badgeEntities) {\n      badges = badges.concat(badgeEntities[domain]);\n    }\n  });\n\n  let cards: LovelaceCardConfig[] = [];\n\n  splitted.groups.forEach((groupEntity) => {\n    cards = cards.concat(\n      computeCards(\n        groupEntity.attributes.entity_id.map(\n          (entityId): [string, HassEntity] => [entityId, entities[entityId]]\n        ),\n        {\n          title: computeStateName(groupEntity),\n          show_header_toggle: groupEntity.attributes.control !== \"hidden\",\n        }\n      )\n    );\n  });\n\n  Object.keys(ungroupedEntitites)\n    .sort()\n    .forEach((domain) => {\n      cards = cards.concat(\n        computeCards(\n          ungroupedEntitites[domain].map(\n            (entityId): [string, HassEntity] => [entityId, entities[entityId]]\n          ),\n          {\n            title: localize(`domain.${domain}`),\n          }\n        )\n      );\n    });\n\n  const view: LovelaceViewConfig = {\n    path,\n    title,\n    badges,\n    cards,\n  };\n\n  if (icon) {\n    view.icon = icon;\n  }\n\n  return view;\n};\n\nexport const generateLovelaceConfig = async (\n  hass: HomeAssistant,\n  localize: LocalizeFunc\n): Promise<LovelaceConfig> => {\n  const viewEntities = extractViews(hass.states);\n\n  const views = viewEntities.map((viewEntity: GroupEntity) => {\n    const states = getViewEntities(hass.states, viewEntity);\n\n    // In the case of a normal view, we use group order as specified in view\n    const groupOrders = {};\n    Object.keys(states).forEach((entityId, idx) => {\n      groupOrders[entityId] = idx;\n    });\n\n    return generateViewConfig(\n      localize,\n      computeObjectId(viewEntity.entity_id),\n      computeStateName(viewEntity),\n      viewEntity.attributes.icon,\n      states,\n      groupOrders\n    );\n  });\n\n  let title = hass.config.location_name;\n\n  // User can override default view. If they didn't, we will add one\n  // that contains all entities.\n  if (\n    viewEntities.length === 0 ||\n    viewEntities[0].entity_id !== DEFAULT_VIEW_ENTITY_ID\n  ) {\n    // We want to keep the registry subscriptions alive after generating the UI\n    // so that we don't serve up stale data after changing areas.\n    if (!subscribedRegistries) {\n      subscribedRegistries = true;\n      subscribeAreaRegistry(hass.connection, () => undefined);\n      subscribeDeviceRegistry(hass.connection, () => undefined);\n      subscribeEntityRegistry(hass.connection, () => undefined);\n    }\n\n    const [areas, devices, entities] = await Promise.all([\n      subscribeOne(hass.connection, subscribeAreaRegistry),\n      subscribeOne(hass.connection, subscribeDeviceRegistry),\n      subscribeOne(hass.connection, subscribeEntityRegistry),\n    ]);\n    const registries = { areas, devices, entities };\n\n    views.unshift(generateDefaultViewConfig(hass, registries));\n\n    // Add map of geo locations to default view if loaded\n    if (hass.config.components.includes(\"geo_location\")) {\n      if (views[0] && views[0].cards) {\n        views[0].cards.push({\n          type: \"map\",\n          geo_location_sources: [\"all\"],\n        });\n      }\n    }\n\n    // Make sure we don't have Home as title and first tab.\n    if (views.length > 1 && title === \"Home\") {\n      title = \"Home Assistant\";\n    }\n  }\n\n  if (__DEMO__) {\n    views[0].cards!.unshift({\n      type: \"custom:ha-demo-card\",\n    });\n  }\n\n  // User has no entities\n  if (views.length === 1 && views[0].cards!.length === 0) {\n    import(/* webpackChunkName: \"hui-empty-state-card\" */ \"../cards/hui-empty-state-card\");\n    views[0].cards!.push({\n      type: \"custom:hui-empty-state-card\",\n    });\n  }\n\n  return {\n    title,\n    views,\n  };\n};\n","import { HomeAssistant } from \"../../../types\";\nimport { fireEvent } from \"../../../common/dom/fire_event\";\nimport { navigate } from \"../../../common/navigate\";\nimport { toggleEntity } from \"../../../../src/panels/lovelace/common/entity/toggle-entity\";\nimport { ActionConfig } from \"../../../data/lovelace\";\n\nexport const handleClick = (\n  node: HTMLElement,\n  hass: HomeAssistant,\n  config: {\n    entity?: string;\n    camera_image?: string;\n    hold_action?: ActionConfig;\n    tap_action?: ActionConfig;\n  },\n  hold: boolean\n): void => {\n  let actionConfig: ActionConfig | undefined;\n\n  if (hold && config.hold_action) {\n    actionConfig = config.hold_action;\n  } else if (!hold && config.tap_action) {\n    actionConfig = config.tap_action;\n  }\n\n  if (!actionConfig) {\n    actionConfig = {\n      action: \"more-info\",\n    };\n  }\n\n  switch (actionConfig.action) {\n    case \"more-info\":\n      if (config.entity || config.camera_image) {\n        fireEvent(node, \"hass-more-info\", {\n          entityId: config.entity ? config.entity : config.camera_image!,\n        });\n      }\n      break;\n    case \"navigate\":\n      if (actionConfig.navigation_path) {\n        navigate(node, actionConfig.navigation_path);\n      }\n      break;\n    case \"toggle\":\n      if (config.entity) {\n        toggleEntity(hass, config.entity!);\n      }\n      break;\n    case \"call-service\": {\n      if (!actionConfig.service) {\n        return;\n      }\n      const [domain, service] = actionConfig.service.split(\".\", 2);\n      hass.callService(domain, service, actionConfig.service_data);\n    }\n  }\n};\n","import { HomeAssistant } from \"../../../types\";\nimport { PropertyValues } from \"lit-element\";\n\n// Check if config or Entity changed\nexport function hasConfigOrEntityChanged(\n  element: any,\n  changedProps: PropertyValues\n): boolean {\n  if (changedProps.has(\"_config\")) {\n    return true;\n  }\n\n  const oldHass = changedProps.get(\"hass\") as HomeAssistant | undefined;\n  if (oldHass) {\n    return (\n      oldHass.states[element._config!.entity] !==\n      element.hass!.states[element._config!.entity]\n    );\n  }\n\n  return true;\n}\n","// Parse array of entity objects from config\nimport isValidEntityId from \"../../../common/entity/valid_entity_id\";\nimport { EntityConfig } from \"../entity-rows/types\";\n\nexport const processConfigEntities = <T extends EntityConfig>(\n  entities: Array<T | string>\n): T[] => {\n  if (!entities || !Array.isArray(entities)) {\n    throw new Error(\"Entities need to be an array\");\n  }\n\n  return entities.map(\n    (entityConf, index): T => {\n      if (\n        typeof entityConf === \"object\" &&\n        !Array.isArray(entityConf) &&\n        entityConf.type\n      ) {\n        return entityConf;\n      }\n\n      let config: T;\n\n      if (typeof entityConf === \"string\") {\n        // tslint:disable-next-line:no-object-literal-type-assertion\n        config = { entity: entityConf } as T;\n      } else if (typeof entityConf === \"object\" && !Array.isArray(entityConf)) {\n        if (!entityConf.entity) {\n          throw new Error(\n            `Entity object at position ${index} is missing entity field.`\n          );\n        }\n        config = entityConf as T;\n      } else {\n        throw new Error(`Invalid entity specified at position ${index}.`);\n      }\n\n      if (!isValidEntityId(config.entity)) {\n        throw new Error(\n          `Invalid entity ID at position ${index}: ${config.entity}`\n        );\n      }\n\n      return config;\n    }\n  );\n};\n","import { HomeAssistant } from \"../../../types\";\n\nexport interface Condition {\n  entity: string;\n  state?: string;\n  state_not?: string;\n}\n\nexport function checkConditionsMet(\n  conditions: Condition[],\n  hass: HomeAssistant\n): boolean {\n  return conditions.every((c) => {\n    const state = hass.states[c.entity]\n      ? hass!.states[c.entity].state\n      : \"unavailable\";\n\n    return c.state ? state === c.state : state !== c.state_not;\n  });\n}\n\nexport function validateConditionalConfig(conditions: Condition[]): boolean {\n  return conditions.every(\n    (c) => ((c.entity && (c.state || c.state_not)) as unknown) as boolean\n  );\n}\n","import {\n  html,\n  LitElement,\n  PropertyValues,\n  TemplateResult,\n  customElement,\n  property,\n  css,\n  CSSResult,\n} from \"lit-element\";\nimport { PaperToggleButtonElement } from \"@polymer/paper-toggle-button/paper-toggle-button\";\n\nimport { DOMAINS_TOGGLE } from \"../../../common/const\";\nimport { turnOnOffEntities } from \"../common/entity/turn-on-off-entities\";\nimport { HomeAssistant } from \"../../../types\";\nimport { forwardHaptic } from \"../../../data/haptics\";\n\n@customElement(\"hui-entities-toggle\")\nclass HuiEntitiesToggle extends LitElement {\n  @property() public entities?: string[];\n\n  @property() protected hass?: HomeAssistant;\n\n  @property() private _toggleEntities?: string[];\n\n  public updated(changedProperties: PropertyValues): void {\n    super.updated(changedProperties);\n    if (changedProperties.has(\"entities\")) {\n      this._toggleEntities = this.entities!.filter(\n        (entityId) =>\n          entityId in this.hass!.states &&\n          DOMAINS_TOGGLE.has(entityId.split(\".\", 1)[0])\n      );\n    }\n  }\n\n  protected render(): TemplateResult | void {\n    if (!this._toggleEntities) {\n      return html``;\n    }\n\n    return html`\n      <paper-toggle-button\n        ?checked=\"${this._toggleEntities!.some((entityId) => {\n          const stateObj = this.hass!.states[entityId];\n          return stateObj && stateObj.state === \"on\";\n        })}\"\n        @change=\"${this._callService}\"\n      ></paper-toggle-button>\n    `;\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      :host {\n        width: 38px;\n        display: block;\n      }\n      paper-toggle-button {\n        cursor: pointer;\n        --paper-toggle-button-label-spacing: 0;\n        padding: 13px 5px;\n        margin: -4px -5px;\n      }\n    `;\n  }\n\n  private _callService(ev: MouseEvent): void {\n    forwardHaptic(\"light\");\n    const turnOn = (ev.target as PaperToggleButtonElement).checked;\n    turnOnOffEntities(this.hass!, this._toggleEntities!, turnOn!);\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-entities-toggle\": HuiEntitiesToggle;\n  }\n}\n","import computeStateName from \"../../../common/entity/compute_state_name\";\nimport {\n  LitElement,\n  html,\n  css,\n  CSSResult,\n  PropertyValues,\n  property,\n  TemplateResult,\n} from \"lit-element\";\n\nimport \"../../../components/entity/state-badge\";\nimport \"../../../components/ha-relative-time\";\nimport \"../../../components/ha-icon\";\nimport \"../components/hui-warning\";\n\nimport { HomeAssistant } from \"../../../types\";\nimport { computeRTL } from \"../../../common/util/compute_rtl\";\nimport { EntitiesCardEntityConfig } from \"../cards/types\";\n\nclass HuiGenericEntityRow extends LitElement {\n  @property() public hass?: HomeAssistant;\n\n  @property() public config?: EntitiesCardEntityConfig;\n\n  @property() public showSecondary: boolean = true;\n\n  protected render(): TemplateResult | void {\n    if (!this.hass || !this.config) {\n      return html``;\n    }\n    const stateObj = this.config.entity\n      ? this.hass.states[this.config.entity]\n      : undefined;\n\n    if (!stateObj) {\n      return html`\n        <hui-warning\n          >${this.hass.localize(\n            \"ui.panel.lovelace.warning.entity_not_found\",\n            \"entity\",\n            this.config.entity\n          )}</hui-warning\n        >\n      `;\n    }\n\n    return html`\n      <state-badge\n        .stateObj=\"${stateObj}\"\n        .overrideIcon=\"${this.config.icon}\"\n      ></state-badge>\n      <div class=\"flex\">\n        <div class=\"info\">\n          ${this.config.name || computeStateName(stateObj)}\n          <div class=\"secondary\">\n            ${!this.showSecondary\n              ? html`\n                  <slot name=\"secondary\"></slot>\n                `\n              : this.config.secondary_info === \"entity-id\"\n              ? stateObj.entity_id\n              : this.config.secondary_info === \"last-changed\"\n              ? html`\n                  <ha-relative-time\n                    .hass=\"${this.hass}\"\n                    .datetime=\"${stateObj.last_changed}\"\n                  ></ha-relative-time>\n                `\n              : \"\"}\n          </div>\n        </div>\n\n        <slot></slot>\n      </div>\n    `;\n  }\n\n  protected updated(changedProps: PropertyValues): void {\n    super.updated(changedProps);\n    if (changedProps.has(\"hass\")) {\n      this.toggleAttribute(\"rtl\", computeRTL(this.hass!));\n    }\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      :host {\n        display: flex;\n        align-items: center;\n      }\n      .flex {\n        flex: 1;\n        margin-left: 16px;\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n        min-width: 0;\n      }\n      .info {\n        flex: 1 0 60px;\n      }\n      .info,\n      .info > * {\n        white-space: nowrap;\n        overflow: hidden;\n        text-overflow: ellipsis;\n      }\n      .flex ::slotted(*) {\n        margin-left: 8px;\n        min-width: 0;\n      }\n      .flex ::slotted([slot=\"secondary\"]) {\n        margin-left: 0;\n      }\n      .secondary,\n      ha-relative-time {\n        display: block;\n        color: var(--secondary-text-color);\n      }\n      state-badge {\n        flex: 0 0 40px;\n      }\n      :host([rtl]) .flex {\n        margin-left: 0;\n        margin-right: 16px;\n      }\n      :host([rtl]) .flex ::slotted(*) {\n        margin-left: 0;\n        margin-right: 8px;\n      }\n    `;\n  }\n}\ncustomElements.define(\"hui-generic-entity-row\", HuiGenericEntityRow);\n","import \"@polymer/paper-toggle-button/paper-toggle-button\";\n\nimport { STATES_OFF } from \"../../../common/const\";\n\nimport parseAspectRatio from \"../../../common/util/parse-aspect-ratio\";\nimport {\n  LitElement,\n  TemplateResult,\n  html,\n  property,\n  CSSResult,\n  css,\n  PropertyValues,\n  query,\n  customElement,\n} from \"lit-element\";\nimport { HomeAssistant, CameraEntity } from \"../../../types\";\nimport { styleMap } from \"lit-html/directives/style-map\";\nimport { classMap } from \"lit-html/directives/class-map\";\nimport { fetchThumbnailUrlWithCache } from \"../../../data/camera\";\n\nconst UPDATE_INTERVAL = 10000;\nconst DEFAULT_FILTER = \"grayscale(100%)\";\n\nexport interface StateSpecificConfig {\n  [state: string]: string;\n}\n\n@customElement(\"hui-image\")\nexport class HuiImage extends LitElement {\n  @property() public hass?: HomeAssistant;\n\n  @property() public entity?: string;\n\n  @property() public image?: string;\n\n  @property() public stateImage?: StateSpecificConfig;\n\n  @property() public cameraImage?: string;\n\n  @property() public cameraView?: \"live\" | \"auto\";\n\n  @property() public aspectRatio?: string;\n\n  @property() public filter?: string;\n\n  @property() public stateFilter?: StateSpecificConfig;\n\n  @property() private _loadError?: boolean;\n\n  @property() private _cameraImageSrc?: string;\n\n  @query(\"img\") private _image!: HTMLImageElement;\n\n  private _lastImageHeight?: number;\n\n  private _cameraUpdater?: number;\n\n  private _attached?: boolean;\n\n  public connectedCallback(): void {\n    super.connectedCallback();\n    this._attached = true;\n    if (this.cameraImage && this.cameraView !== \"live\") {\n      this._startUpdateCameraInterval();\n    }\n  }\n\n  public disconnectedCallback(): void {\n    super.disconnectedCallback();\n    this._attached = false;\n    this._stopUpdateCameraInterval();\n  }\n\n  protected render(): TemplateResult | void {\n    const ratio = this.aspectRatio ? parseAspectRatio(this.aspectRatio) : null;\n    const stateObj =\n      this.hass && this.entity ? this.hass.states[this.entity] : undefined;\n    const state = stateObj ? stateObj.state : \"unavailable\";\n\n    // Figure out image source to use\n    let imageSrc: string | undefined;\n    let cameraObj: CameraEntity | undefined;\n    // Track if we are we using a fallback image, used for filter.\n    let imageFallback = !this.stateImage;\n\n    if (this.cameraImage) {\n      if (this.cameraView === \"live\") {\n        cameraObj =\n          this.hass && (this.hass.states[this.cameraImage] as CameraEntity);\n      } else {\n        imageSrc = this._cameraImageSrc;\n      }\n    } else if (this.stateImage) {\n      const stateImage = this.stateImage[state];\n\n      if (stateImage) {\n        imageSrc = stateImage;\n      } else {\n        imageSrc = this.image;\n        imageFallback = true;\n      }\n    } else {\n      imageSrc = this.image;\n    }\n\n    // Figure out filter to use\n    let filter = this.filter || \"\";\n\n    if (this.stateFilter && this.stateFilter[state]) {\n      filter = this.stateFilter[state];\n    }\n\n    if (!filter && this.entity) {\n      const isOff = !stateObj || STATES_OFF.includes(state);\n      filter = isOff && imageFallback ? DEFAULT_FILTER : \"\";\n    }\n\n    return html`\n      <div\n        style=${styleMap({\n          paddingBottom:\n            ratio && ratio.w > 0 && ratio.h > 0\n              ? `${((100 * ratio.h) / ratio.w).toFixed(2)}%`\n              : \"\",\n        })}\n        class=${classMap({\n          ratio: Boolean(ratio && ratio.w > 0 && ratio.h > 0),\n        })}\n      >\n        ${this.cameraImage && this.cameraView === \"live\"\n          ? html`\n              <ha-camera-stream\n                .hass=\"${this.hass}\"\n                .stateObj=\"${cameraObj}\"\n              ></ha-camera-stream>\n            `\n          : html`\n              <img\n                id=\"image\"\n                src=${imageSrc}\n                @error=${this._onImageError}\n                @load=${this._onImageLoad}\n                style=${styleMap({\n                  filter,\n                  display: this._loadError ? \"none\" : \"block\",\n                })}\n              />\n            `}\n        <div\n          id=\"brokenImage\"\n          style=${styleMap({\n            height: `${this._lastImageHeight || \"100\"}px`,\n            display: this._loadError ? \"block\" : \"none\",\n          })}\n        ></div>\n      </div>\n    `;\n  }\n\n  protected updated(changedProps: PropertyValues): void {\n    if (changedProps.has(\"cameraImage\") && this.cameraView !== \"live\") {\n      this._updateCameraImageSrc();\n      this._startUpdateCameraInterval();\n      return;\n    }\n  }\n\n  private _startUpdateCameraInterval(): void {\n    this._stopUpdateCameraInterval();\n    if (this.cameraImage && this._attached) {\n      this._cameraUpdater = window.setInterval(\n        () => this._updateCameraImageSrc(),\n        UPDATE_INTERVAL\n      );\n    }\n  }\n\n  private _stopUpdateCameraInterval(): void {\n    if (this._cameraUpdater) {\n      clearInterval(this._cameraUpdater);\n    }\n  }\n\n  private _onImageError(): void {\n    this._loadError = true;\n  }\n\n  private async _onImageLoad(): Promise<void> {\n    this._loadError = false;\n    await this.updateComplete;\n    this._lastImageHeight = this._image.offsetHeight;\n  }\n\n  private async _updateCameraImageSrc(): Promise<void> {\n    if (!this.hass || !this.cameraImage) {\n      return;\n    }\n\n    const cameraState = this.hass.states[this.cameraImage] as\n      | CameraEntity\n      | undefined;\n\n    if (!cameraState) {\n      this._onImageError();\n      return;\n    }\n\n    this._cameraImageSrc = await fetchThumbnailUrlWithCache(\n      this.hass,\n      this.cameraImage\n    );\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      img {\n        display: block;\n        height: auto;\n        transition: filter 0.2s linear;\n        width: 100%;\n      }\n\n      .ratio {\n        position: relative;\n        width: 100%;\n        height: 0;\n      }\n\n      .ratio img,\n      .ratio div {\n        position: absolute;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n      }\n\n      #brokenImage {\n        background: grey url(\"/static/images/image-broken.svg\") center/36px\n          no-repeat;\n      }\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-image\": HuiImage;\n  }\n}\n","import {\n  html,\n  LitElement,\n  PropertyValues,\n  TemplateResult,\n  customElement,\n  property,\n} from \"lit-element\";\n\nimport { HomeAssistant } from \"../../../types\";\nimport format_date from \"../../../common/datetime/format_date\";\nimport format_date_time from \"../../../common/datetime/format_date_time\";\nimport format_time from \"../../../common/datetime/format_time\";\nimport relativeTime from \"../../../common/datetime/relative_time\";\n\nconst FORMATS: { [key: string]: (ts: Date, lang: string) => string } = {\n  date: format_date,\n  datetime: format_date_time,\n  time: format_time,\n};\nconst INTERVAL_FORMAT = [\"relative\", \"total\"];\n\n@customElement(\"hui-timestamp-display\")\nclass HuiTimestampDisplay extends LitElement {\n  @property() public hass?: HomeAssistant;\n\n  @property() public ts?: Date;\n\n  @property() public format?:\n    | \"relative\"\n    | \"total\"\n    | \"date\"\n    | \"datetime\"\n    | \"time\";\n\n  @property() private _relative?: string;\n\n  private _connected?: boolean;\n\n  private _interval?: number;\n\n  public connectedCallback(): void {\n    super.connectedCallback();\n    this._connected = true;\n    this._startInterval();\n  }\n\n  public disconnectedCallback(): void {\n    super.disconnectedCallback();\n    this._connected = false;\n    this._clearInterval();\n  }\n\n  protected render(): TemplateResult | void {\n    if (!this.ts || !this.hass) {\n      return html``;\n    }\n\n    if (isNaN(this.ts.getTime())) {\n      return html`\n        Invalid date\n      `;\n    }\n\n    const format = this._format;\n\n    if (INTERVAL_FORMAT.includes(format)) {\n      return html`\n        ${this._relative}\n      `;\n    }\n    if (format in FORMATS) {\n      return html`\n        ${FORMATS[format](this.ts, this.hass.language)}\n      `;\n    }\n    return html`\n      Invalid format\n    `;\n  }\n\n  protected updated(changedProperties: PropertyValues): void {\n    super.updated(changedProperties);\n    if (!changedProperties.has(\"format\") || !this._connected) {\n      return;\n    }\n\n    if (INTERVAL_FORMAT.includes(\"relative\")) {\n      this._startInterval();\n    } else {\n      this._clearInterval();\n    }\n  }\n\n  private get _format(): string {\n    return this.format || \"relative\";\n  }\n\n  private _startInterval(): void {\n    this._clearInterval();\n    if (this._connected && INTERVAL_FORMAT.includes(this._format)) {\n      this._updateRelative();\n      this._interval = window.setInterval(() => this._updateRelative(), 1000);\n    }\n  }\n\n  private _clearInterval(): void {\n    if (this._interval) {\n      clearInterval(this._interval);\n      this._interval = undefined;\n    }\n  }\n\n  private _updateRelative(): void {\n    if (this.ts && this.hass!.localize) {\n      this._relative =\n        this._format === \"relative\"\n          ? relativeTime(this.ts, this.hass!.localize)\n          : (this._relative = relativeTime(new Date(), this.hass!.localize, {\n              compareTime: this.ts,\n              includeTense: false,\n            }));\n    }\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-timestamp-display\": HuiTimestampDisplay;\n  }\n}\n","import {\n  html,\n  LitElement,\n  TemplateResult,\n  CSSResult,\n  css,\n  customElement,\n  property,\n} from \"lit-element\";\n\nimport \"../../../components/ha-icon\";\n\n@customElement(\"hui-warning-element\")\nexport class HuiWarningElement extends LitElement {\n  @property() public label?: string;\n\n  protected render(): TemplateResult | void {\n    return html`\n      <ha-icon icon=\"hass:alert\" .title=\"${this.label}\"></ha-icon>\n    `;\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      ha-icon {\n        color: #fce588;\n      }\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-warning-element\": HuiWarningElement;\n  }\n}\n","import {\n  html,\n  LitElement,\n  TemplateResult,\n  CSSResult,\n  css,\n  customElement,\n} from \"lit-element\";\n\n@customElement(\"hui-warning\")\nexport class HuiWarning extends LitElement {\n  protected render(): TemplateResult | void {\n    return html`\n      <slot></slot>\n    `;\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      :host {\n        display: block;\n        color: black;\n        background-color: #fce588;\n        padding: 8px;\n      }\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-warning\": HuiWarning;\n  }\n}\n","import {\n  html,\n  LitElement,\n  TemplateResult,\n  property,\n  customElement,\n} from \"lit-element\";\nimport \"@material/mwc-button\";\n\nimport \"./hui-notification-item-template\";\n\nimport { HomeAssistant } from \"../../../../types\";\nimport { fireEvent } from \"../../../../common/dom/fire_event\";\nimport { HassNotification } from \"./types\";\n\n@customElement(\"hui-configurator-notification-item\")\nexport class HuiConfiguratorNotificationItem extends LitElement {\n  @property() public hass?: HomeAssistant;\n\n  @property() public notification?: HassNotification;\n\n  protected render(): TemplateResult | void {\n    if (!this.hass || !this.notification) {\n      return html``;\n    }\n\n    return html`\n      <hui-notification-item-template>\n        <span slot=\"header\">${this.hass.localize(\"domain.configurator\")}</span>\n\n        <div>\n          ${this.hass.localize(\n            \"ui.notification_drawer.click_to_configure\",\n            \"entity\",\n            this.notification.attributes.friendly_name\n          )}\n        </div>\n\n        <mwc-button slot=\"actions\" @click=\"${this._handleClick}\"\n          >${this.hass.localize(\n            `state.configurator.${this.notification.state}`\n          )}</mwc-button\n        >\n      </hui-notification-item-template>\n    `;\n  }\n\n  private _handleClick(): void {\n    fireEvent(this, \"hass-more-info\", {\n      entityId: this.notification!.entity_id,\n    });\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-configurator-notification-item\": HuiConfiguratorNotificationItem;\n  }\n}\n","import \"@material/mwc-button\";\nimport \"@polymer/paper-icon-button/paper-icon-button\";\nimport \"@polymer/app-layout/app-toolbar/app-toolbar\";\n\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport \"./hui-notification-item\";\nimport \"../../../../components/ha-paper-icon-button-next\";\n\nimport { EventsMixin } from \"../../../../mixins/events-mixin\";\nimport LocalizeMixin from \"../../../../mixins/localize-mixin\";\nimport { computeRTL } from \"../../../../common/util/compute_rtl\";\n\n/*\n * @appliesMixin EventsMixin\n * @appliesMixin LocalizeMixin\n */\nexport class HuiNotificationDrawer extends EventsMixin(\n  LocalizeMixin(PolymerElement)\n) {\n  static get template() {\n    return html`\n    <style include=\"paper-material-styles\">\n      :host {\n        bottom: 0;\n        left: 0;\n        position: absolute;\n        right: 0;\n        top: 0;\n      }\n\n      :host([hidden]) {\n        display: none;\n      }\n\n      .container {\n        align-items: stretch;\n        background: var(--sidebar-background-color, var(--primary-background-color));\n        bottom: 0;\n        box-shadow: var(--paper-material-elevation-1_-_box-shadow);\n        display: flex;\n        flex-direction: column;\n        overflow-y: hidden;\n        position: fixed;\n        top: 0;\n        transition: right .2s ease-in;\n        width: 500px;\n        z-index: 10;\n      }\n\n      :host([rtl]) .container {\n        transition: left .2s ease-in !important;\n      }\n\n      :host(:not(narrow)) .container {\n        right: -500px;\n      }\n\n      :host([rtl]:not(narrow)) .container {\n        left: -500px;\n      }\n\n      :host([narrow]) .container {\n        right: -100%;\n        width: 100%;\n      }\n\n      :host([rtl][narrow]) .container {\n        left: -100%;\n        width: 100%;\n      }\n\n      :host(.open) .container,\n      :host(.open[narrow]) .container {\n        right: 0;\n      }\n\n      :host([rtl].open) .container,\n      :host([rtl].open[narrow]) .container {\n        left: 0;\n      }\n\n      app-toolbar {\n        color: var(--primary-text-color);\n        border-bottom: 1px solid var(--divider-color);\n        background-color: var(--primary-background-color);\n        min-height: 64px;\n        width: calc(100% - 32px);\n        z-index: 11;\n      }\n\n      .overlay {\n        display: none;\n      }\n\n      :host(.open) .overlay {\n        bottom: 0;\n        display: block;\n        left: 0;\n        position: absolute;\n        right: 0;\n        top: 0;\n        z-index: 5;\n      }\n\n      .notifications {\n        overflow-y: auto;\n        padding-top: 16px;\n      }\n\n      .notification {\n        padding: 0 16px 16px;\n      }\n\n      .empty {\n        padding: 16px;\n        text-align: center;\n      }\n    </style>\n    <div class=\"overlay\" on-click=\"_closeDrawer\"></div>\n    <div class=\"container\">\n      <app-toolbar>\n        <div main-title>[[localize('ui.notification_drawer.title')]]</div>\n        <ha-paper-icon-button-next on-click=\"_closeDrawer\"></paper-icon-button>\n      </app-toolbar>\n      <div class=\"notifications\">\n        <template is=\"dom-if\" if=\"[[!_empty(notifications)]]\">\n          <dom-repeat items=\"[[notifications]]\">\n            <template>\n              <div class=\"notification\">\n                <hui-notification-item hass=\"[[hass]]\" notification=\"[[item]]\"></hui-notification-item>\n              </div>\n            </template>\n          </dom-repeat>\n        </template>\n        <template is=\"dom-if\" if=\"[[_empty(notifications)]]\">\n          <div class=\"empty\">[[localize('ui.notification_drawer.empty')]]<div>\n        </template>\n      </div>\n    </div>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      narrow: {\n        type: Boolean,\n        reflectToAttribute: true,\n      },\n      open: {\n        type: Boolean,\n        notify: true,\n        observer: \"_openChanged\",\n      },\n      hidden: {\n        type: Boolean,\n        value: true,\n        reflectToAttribute: true,\n      },\n      notifications: {\n        type: Array,\n        value: [],\n      },\n      rtl: {\n        type: Boolean,\n        reflectToAttribute: true,\n        computed: \"_computeRTL(hass)\",\n      },\n    };\n  }\n\n  _closeDrawer(ev) {\n    ev.stopPropagation();\n    this.open = false;\n  }\n\n  _empty(notifications) {\n    return notifications.length === 0;\n  }\n\n  _openChanged(open) {\n    clearTimeout(this._openTimer);\n    if (open) {\n      // Render closed then animate open\n      this.hidden = false;\n      this._openTimer = setTimeout(() => {\n        this.classList.add(\"open\");\n      }, 50);\n    } else {\n      // Animate closed then hide\n      this.classList.remove(\"open\");\n      this._openTimer = setTimeout(() => {\n        this.hidden = true;\n      }, 250);\n    }\n  }\n\n  _computeRTL(hass) {\n    return computeRTL(hass);\n  }\n}\ncustomElements.define(\"hui-notification-drawer\", HuiNotificationDrawer);\n","import {\n  html,\n  LitElement,\n  TemplateResult,\n  customElement,\n  css,\n  CSSResult,\n} from \"lit-element\";\n\nimport \"../../../../components/ha-card\";\n\n@customElement(\"hui-notification-item-template\")\nexport class HuiNotificationItemTemplate extends LitElement {\n  protected render(): TemplateResult | void {\n    return html`\n      <ha-card>\n        <div class=\"header\"><slot name=\"header\"></slot></div>\n        <div class=\"contents\"><slot></slot></div>\n        <div class=\"actions\"><slot name=\"actions\"></slot></div>\n      </ha-card>\n    `;\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      .contents {\n        padding: 16px;\n      }\n\n      ha-card .header {\n        /* start paper-font-headline style */\n        font-family: \"Roboto\", \"Noto\", sans-serif;\n        -webkit-font-smoothing: antialiased; /* OS X subpixel AA bleed bug */\n        text-rendering: optimizeLegibility;\n        font-size: 24px;\n        font-weight: 400;\n        letter-spacing: -0.012em;\n        line-height: 32px;\n        /* end paper-font-headline style */\n\n        color: var(--primary-text-color);\n        padding: 16px 16px 0;\n      }\n\n      .actions {\n        border-top: 1px solid #e8e8e8;\n        padding: 5px 16px;\n      }\n\n      ::slotted(.primary) {\n        color: var(--primary-color);\n      }\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-notification-item-template\": HuiNotificationItemTemplate;\n  }\n}\n","import {\n  LitElement,\n  property,\n  customElement,\n  PropertyValues,\n  TemplateResult,\n  html,\n} from \"lit-element\";\n\nimport \"./hui-configurator-notification-item\";\nimport \"./hui-persistent-notification-item\";\n\nimport { HomeAssistant } from \"../../../../types\";\nimport { HassNotification } from \"./types\";\n\n@customElement(\"hui-notification-item\")\nexport class HuiNotificationItem extends LitElement {\n  @property() public hass?: HomeAssistant;\n\n  @property() public notification?: HassNotification;\n\n  protected shouldUpdate(changedProps: PropertyValues): boolean {\n    if (!this.hass || !this.notification || changedProps.has(\"notification\")) {\n      return true;\n    }\n\n    return false;\n  }\n\n  protected render(): TemplateResult | void {\n    if (!this.hass || !this.notification) {\n      return html``;\n    }\n\n    return this.notification.entity_id\n      ? html`\n          <hui-configurator-notification-item\n            .hass=\"${this.hass}\"\n            .notification=\"${this.notification}\"\n          ></hui-configurator-notification-item>\n        `\n      : html`\n          <hui-persistent-notification-item\n            .hass=\"${this.hass}\"\n            .notification=\"${this.notification}\"\n          ></hui-persistent-notification-item>\n        `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-notification-item\": HuiNotificationItem;\n  }\n}\n","import {\n  html,\n  LitElement,\n  TemplateResult,\n  css,\n  CSSResult,\n  property,\n} from \"lit-element\";\nimport \"@polymer/paper-icon-button/paper-icon-button\";\nimport { fireEvent } from \"../../../../common/dom/fire_event\";\n\ndeclare global {\n  // tslint:disable-next-line\n  interface HASSDomEvents {\n    \"opened-changed\": { value: boolean };\n  }\n}\n\nclass HuiNotificationsButton extends LitElement {\n  @property() public notifications?: string[];\n  @property() public opened?: boolean;\n\n  protected render(): TemplateResult | void {\n    return html`\n      <paper-icon-button\n        icon=\"hass:bell\"\n        @click=\"${this._clicked}\"\n      ></paper-icon-button>\n      ${this.notifications && this.notifications.length > 0\n        ? html`\n            <span class=\"indicator\">\n              <div>${this.notifications.length}</div>\n            </span>\n          `\n        : \"\"}\n    `;\n  }\n\n  static get styles(): CSSResult[] {\n    return [\n      css`\n        :host {\n          position: relative;\n        }\n\n        .indicator {\n          position: absolute;\n          top: 0px;\n          right: -3px;\n          width: 20px;\n          height: 20px;\n          border-radius: 50%;\n          background: var(--accent-color);\n          pointer-events: none;\n          z-index: 1;\n        }\n\n        .indicator > div {\n          right: 7px;\n          top: 3px;\n          position: absolute;\n          font-size: 0.55em;\n        }\n      `,\n    ];\n  }\n\n  private _clicked() {\n    this.opened = true;\n    fireEvent(this, \"opened-changed\", { value: this.opened });\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-notifications-button\": HuiNotificationsButton;\n  }\n}\n\ncustomElements.define(\"hui-notifications-button\", HuiNotificationsButton);\n","import {\n  html,\n  LitElement,\n  TemplateResult,\n  property,\n  customElement,\n  css,\n  CSSResult,\n} from \"lit-element\";\nimport \"@material/mwc-button\";\nimport \"@polymer/paper-tooltip/paper-tooltip\";\n\nimport \"../../../../components/ha-relative-time\";\nimport \"../../../../components/ha-markdown\";\nimport \"./hui-notification-item-template\";\n\nimport { HomeAssistant } from \"../../../../types\";\nimport { HassNotification } from \"./types\";\n\n@customElement(\"hui-persistent-notification-item\")\nexport class HuiPersistentNotificationItem extends LitElement {\n  @property() public hass?: HomeAssistant;\n\n  @property() public notification?: HassNotification;\n\n  protected render(): TemplateResult | void {\n    if (!this.hass || !this.notification) {\n      return html``;\n    }\n\n    return html`\n      <hui-notification-item-template>\n        <span slot=\"header\">${this._computeTitle(this.notification)}</span>\n\n        <ha-markdown content=\"${this.notification.message}\"></ha-markdown>\n\n        <div class=\"time\">\n          <span>\n            <ha-relative-time\n              .hass=\"${this.hass}\"\n              .datetime=\"${this.notification.created_at}\"\n            ></ha-relative-time>\n            <paper-tooltip\n              >${this._computeTooltip(\n                this.hass,\n                this.notification\n              )}</paper-tooltip\n            >\n          </span>\n        </div>\n\n        <mwc-button slot=\"actions\" @click=\"${this._handleDismiss}\"\n          >${this.hass.localize(\n            \"ui.card.persistent_notification.dismiss\"\n          )}</mwc-button\n        >\n      </hui-notification-item-template>\n    `;\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      .time {\n        display: flex;\n        justify-content: flex-end;\n        margin-top: 6px;\n      }\n      ha-relative-time {\n        color: var(--secondary-text-color);\n      }\n      a {\n        color: var(--primary-color);\n      }\n    `;\n  }\n\n  private _handleDismiss(): void {\n    this.hass!.callService(\"persistent_notification\", \"dismiss\", {\n      notification_id: this.notification!.notification_id,\n    });\n  }\n\n  private _computeTitle(notification: HassNotification): string | undefined {\n    return notification.title || notification.notification_id;\n  }\n\n  private _computeTooltip(\n    hass: HomeAssistant,\n    notification: HassNotification\n  ): string | undefined {\n    if (!hass || !notification) {\n      return undefined;\n    }\n\n    const d = new Date(notification.created_at!);\n    return d.toLocaleDateString(hass.language, {\n      year: \"numeric\",\n      month: \"short\",\n      day: \"numeric\",\n      minute: \"numeric\",\n      hour: \"numeric\",\n    });\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-persistent-notification-item\": HuiPersistentNotificationItem;\n  }\n}\n","import { fireEvent } from \"../../../../common/dom/fire_event\";\nimport { Lovelace } from \"../../types\";\n\ndeclare global {\n  // for fire event\n  interface HASSDomEvents {\n    \"show-edit-card\": EditCardDialogParams;\n  }\n}\n\nlet registeredDialog = false;\nconst dialogShowEvent = \"show-edit-card\";\nconst dialogTag = \"hui-dialog-edit-card\";\n\nexport interface EditCardDialogParams {\n  lovelace: Lovelace;\n  path: [number] | [number, number];\n}\n\nconst registerEditCardDialog = (element: HTMLElement): Event =>\n  fireEvent(element, \"register-dialog\", {\n    dialogShowEvent,\n    dialogTag,\n    dialogImport: () =>\n      import(/* webpackChunkName: \"hui-dialog-edit-card\" */ \"./hui-dialog-edit-card\"),\n  });\n\nexport const showEditCardDialog = (\n  element: HTMLElement,\n  editCardDialogParams: EditCardDialogParams\n): void => {\n  if (!registeredDialog) {\n    registeredDialog = true;\n    registerEditCardDialog(element);\n  }\n  fireEvent(element, dialogShowEvent, editCardDialogParams);\n};\n","import {\n  LovelaceConfig,\n  LovelaceCardConfig,\n  LovelaceViewConfig,\n} from \"../../../data/lovelace\";\n\nexport const addCard = (\n  config: LovelaceConfig,\n  path: [number],\n  cardConfig: LovelaceCardConfig\n): LovelaceConfig => {\n  const [viewIndex] = path;\n  const views: LovelaceViewConfig[] = [];\n\n  config.views.forEach((viewConf, index) => {\n    if (index !== viewIndex) {\n      views.push(config.views[index]);\n      return;\n    }\n\n    const cards = viewConf.cards\n      ? [...viewConf.cards, cardConfig]\n      : [cardConfig];\n\n    views.push({\n      ...viewConf,\n      cards,\n    });\n  });\n\n  return {\n    ...config,\n    views,\n  };\n};\n\nexport const replaceCard = (\n  config: LovelaceConfig,\n  path: [number, number],\n  cardConfig: LovelaceCardConfig\n): LovelaceConfig => {\n  const [viewIndex, cardIndex] = path;\n  const views: LovelaceViewConfig[] = [];\n\n  config.views.forEach((viewConf, index) => {\n    if (index !== viewIndex) {\n      views.push(config.views[index]);\n      return;\n    }\n\n    views.push({\n      ...viewConf,\n      cards: (viewConf.cards || []).map((origConf, ind) =>\n        ind === cardIndex ? cardConfig : origConf\n      ),\n    });\n  });\n\n  return {\n    ...config,\n    views,\n  };\n};\n\nexport const deleteCard = (\n  config: LovelaceConfig,\n  path: [number, number]\n): LovelaceConfig => {\n  const [viewIndex, cardIndex] = path;\n  const views: LovelaceViewConfig[] = [];\n\n  config.views.forEach((viewConf, index) => {\n    if (index !== viewIndex) {\n      views.push(config.views[index]);\n      return;\n    }\n\n    views.push({\n      ...viewConf,\n      cards: (viewConf.cards || []).filter(\n        (_origConf, ind) => ind !== cardIndex\n      ),\n    });\n  });\n\n  return {\n    ...config,\n    views,\n  };\n};\n\nexport const swapCard = (\n  config: LovelaceConfig,\n  path1: [number, number],\n  path2: [number, number]\n): LovelaceConfig => {\n  const card1 = config.views[path1[0]].cards![path1[1]];\n  const card2 = config.views[path2[0]].cards![path2[1]];\n\n  const origView1 = config.views[path1[0]];\n  const newView1 = {\n    ...origView1,\n    cards: origView1.cards!.map((origCard, index) =>\n      index === path1[1] ? card2 : origCard\n    ),\n  };\n\n  const origView2 = path1[0] === path2[0] ? newView1 : config.views[path2[0]];\n  const newView2 = {\n    ...origView2,\n    cards: origView2.cards!.map((origCard, index) =>\n      index === path2[1] ? card1 : origCard\n    ),\n  };\n\n  return {\n    ...config,\n    views: config.views.map((origView, index) =>\n      index === path2[0] ? newView2 : index === path1[0] ? newView1 : origView\n    ),\n  };\n};\n\nexport const moveCard = (\n  config: LovelaceConfig,\n  fromPath: [number, number],\n  toPath: [number]\n): LovelaceConfig => {\n  if (fromPath[0] === toPath[0]) {\n    throw new Error(\"You can not move a card to the view it is in.\");\n  }\n  const fromView = config.views[fromPath[0]];\n  const card = fromView.cards![fromPath[1]];\n\n  const newView1 = {\n    ...fromView,\n    cards: (fromView.cards || []).filter(\n      (_origConf, ind) => ind !== fromPath[1]\n    ),\n  };\n\n  const toView = config.views[toPath[0]];\n  const cards = toView.cards ? [...toView.cards, card] : [card];\n\n  const newView2 = {\n    ...toView,\n    cards,\n  };\n\n  return {\n    ...config,\n    views: config.views.map((origView, index) =>\n      index === toPath[0]\n        ? newView2\n        : index === fromPath[0]\n        ? newView1\n        : origView\n    ),\n  };\n};\n\nexport const addView = (\n  config: LovelaceConfig,\n  viewConfig: LovelaceViewConfig\n): LovelaceConfig => ({\n  ...config,\n  views: config.views.concat(viewConfig),\n});\n\nexport const replaceView = (\n  config: LovelaceConfig,\n  viewIndex: number,\n  viewConfig: LovelaceViewConfig\n): LovelaceConfig => ({\n  ...config,\n  views: config.views.map((origView, index) =>\n    index === viewIndex ? viewConfig : origView\n  ),\n});\n\nexport const swapView = (\n  config: LovelaceConfig,\n  path1: number,\n  path2: number\n): LovelaceConfig => {\n  const view1 = config.views[path1];\n  const view2 = config.views[path2];\n\n  return {\n    ...config,\n    views: config.views.map((origView, index) =>\n      index === path2 ? view1 : index === path1 ? view2 : origView\n    ),\n  };\n};\n\nexport const deleteView = (\n  config: LovelaceConfig,\n  viewIndex: number\n): LovelaceConfig => ({\n  ...config,\n  views: config.views.filter((_origView, index) => index !== viewIndex),\n});\n","import { fireEvent } from \"../../../../common/dom/fire_event\";\nimport { Lovelace } from \"../../types\";\n\ndeclare global {\n  // for fire event\n  interface HASSDomEvents {\n    \"show-edit-lovelace\": Lovelace;\n  }\n}\n\nlet registeredDialog = false;\nconst dialogShowEvent = \"show-edit-lovelace\";\nconst dialogTag = \"hui-dialog-edit-lovelace\";\n\nconst registerEditLovelaceDialog = (element: HTMLElement): Event =>\n  fireEvent(element, \"register-dialog\", {\n    dialogShowEvent,\n    dialogTag,\n    dialogImport: () =>\n      import(/* webpackChunkName: \"hui-dialog-edit-lovelace\" */ \"./hui-dialog-edit-lovelace\"),\n  });\n\nexport const showEditLovelaceDialog = (\n  element: HTMLElement,\n  lovelace: Lovelace\n): void => {\n  if (!registeredDialog) {\n    registeredDialog = true;\n    registerEditLovelaceDialog(element);\n  }\n  fireEvent(element, dialogShowEvent, lovelace);\n};\n","import { fireEvent } from \"../../../common/dom/fire_event\";\nimport { Lovelace } from \"../types\";\n\ndeclare global {\n  // for fire event\n  interface HASSDomEvents {\n    \"show-save-config\": SaveDialogParams;\n  }\n}\n\nconst dialogShowEvent = \"show-save-config\";\nconst dialogTag = \"hui-dialog-save-config\";\n\nexport interface SaveDialogParams {\n  lovelace: Lovelace;\n}\n\nlet registeredDialog = false;\n\nexport const showSaveDialog = (\n  element: HTMLElement,\n  saveDialogParams: SaveDialogParams\n) => {\n  if (!registeredDialog) {\n    registeredDialog = true;\n    fireEvent(element, \"register-dialog\", {\n      dialogShowEvent,\n      dialogTag,\n      dialogImport: () =>\n        import(/* webpackChunkName: \"hui-dialog-save-config\" */ \"./hui-dialog-save-config\"),\n    });\n  }\n  fireEvent(element, dialogShowEvent, saveDialogParams);\n};\n","import { HASSDomEvent, fireEvent } from \"../../../../common/dom/fire_event\";\nimport { Lovelace } from \"../../types\";\n\ndeclare global {\n  // for fire event\n  interface HASSDomEvents {\n    \"reload-lovelace\": undefined;\n    \"show-edit-view\": EditViewDialogParams;\n  }\n  // for add event listener\n  interface HTMLElementEventMap {\n    \"reload-lovelace\": HASSDomEvent<undefined>;\n  }\n}\n\nlet registeredDialog = false;\nconst dialogShowEvent = \"show-edit-view\";\nconst dialogTag = \"hui-dialog-edit-view\";\n\nexport interface EditViewDialogParams {\n  lovelace: Lovelace;\n  viewIndex?: number;\n}\n\nconst registerEditViewDialog = (element: HTMLElement): Event =>\n  fireEvent(element, \"register-dialog\", {\n    dialogShowEvent,\n    dialogTag,\n    dialogImport: () =>\n      import(/* webpackChunkName: \"hui-dialog-edit-view\" */ \"./hui-dialog-edit-view\"),\n  });\n\nexport const showEditViewDialog = (\n  element: HTMLElement,\n  editViewDialogParams: EditViewDialogParams\n): void => {\n  if (!registeredDialog) {\n    registeredDialog = true;\n    registerEditViewDialog(element);\n  }\n  fireEvent(element, dialogShowEvent, editViewDialogParams);\n};\n","import {\n  checkConditionsMet,\n  validateConditionalConfig,\n} from \"../../lovelace/common/validate-condition\";\nimport { createStyledHuiElement } from \"../cards/picture-elements/create-styled-hui-element\";\nimport {\n  LovelaceElement,\n  LovelaceElementConfig,\n  ConditionalElementConfig,\n} from \"./types\";\nimport { HomeAssistant } from \"../../../types\";\n\nclass HuiConditionalElement extends HTMLElement implements LovelaceElement {\n  public _hass?: HomeAssistant;\n  private _config?: ConditionalElementConfig;\n  private _elements: LovelaceElement[] = [];\n\n  public setConfig(config: ConditionalElementConfig): void {\n    if (\n      !config.conditions ||\n      !Array.isArray(config.conditions) ||\n      !config.elements ||\n      !Array.isArray(config.elements) ||\n      !validateConditionalConfig(config.conditions)\n    ) {\n      throw new Error(\"Error in card configuration.\");\n    }\n\n    if (this._elements.length > 0) {\n      this._elements.map((el: LovelaceElement) => {\n        if (el.parentElement) {\n          el.parentElement.removeChild(el);\n        }\n      });\n\n      this._elements = [];\n    }\n\n    this._config = config;\n\n    this._config.elements.map((elementConfig: LovelaceElementConfig) => {\n      this._elements.push(createStyledHuiElement(elementConfig));\n    });\n\n    this.updateElements();\n  }\n\n  set hass(hass: HomeAssistant) {\n    this._hass = hass;\n\n    this.updateElements();\n  }\n\n  private updateElements() {\n    if (!this._hass || !this._config) {\n      return;\n    }\n\n    const visible = checkConditionsMet(this._config.conditions, this._hass);\n\n    this._elements.map((el: LovelaceElement) => {\n      if (visible) {\n        el.hass = this._hass;\n        if (!el.parentElement) {\n          this.appendChild(el);\n        }\n      } else if (el.parentElement) {\n        el.parentElement.removeChild(el);\n      }\n    });\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-conditional-element\": HuiConditionalElement;\n  }\n}\n\ncustomElements.define(\"hui-conditional-element\", HuiConditionalElement);\n","import {\n  html,\n  LitElement,\n  TemplateResult,\n  property,\n  css,\n  CSSResult,\n  customElement,\n} from \"lit-element\";\n\nimport \"../../../components/ha-icon\";\n\nimport { computeTooltip } from \"../common/compute-tooltip\";\nimport { handleClick } from \"../common/handle-click\";\nimport { longPress } from \"../common/directives/long-press-directive\";\nimport { LovelaceElement, IconElementConfig } from \"./types\";\nimport { HomeAssistant } from \"../../../types\";\n\n@customElement(\"hui-icon-element\")\nexport class HuiIconElement extends LitElement implements LovelaceElement {\n  public hass?: HomeAssistant;\n  @property() private _config?: IconElementConfig;\n\n  public setConfig(config: IconElementConfig): void {\n    if (!config.icon) {\n      throw Error(\"Invalid Configuration: 'icon' required\");\n    }\n\n    this._config = config;\n  }\n\n  protected render(): TemplateResult | void {\n    if (!this._config || !this.hass) {\n      return html``;\n    }\n\n    return html`\n      <ha-icon\n        .icon=\"${this._config.icon}\"\n        .title=\"${computeTooltip(this.hass, this._config)}\"\n        @ha-click=\"${this._handleTap}\"\n        @ha-hold=\"${this._handleHold}\"\n        .longPress=\"${longPress()}\"\n      ></ha-icon>\n    `;\n  }\n\n  private _handleTap(): void {\n    handleClick(this, this.hass!, this._config!, false);\n  }\n\n  private _handleHold(): void {\n    handleClick(this, this.hass!, this._config!, true);\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      :host {\n        cursor: pointer;\n      }\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-icon-element\": HuiIconElement;\n  }\n}\n","import {\n  html,\n  LitElement,\n  TemplateResult,\n  property,\n  customElement,\n  css,\n  CSSResult,\n} from \"lit-element\";\n\nimport \"../components/hui-image\";\n\nimport { computeTooltip } from \"../common/compute-tooltip\";\nimport { handleClick } from \"../common/handle-click\";\nimport { longPress } from \"../common/directives/long-press-directive\";\nimport { LovelaceElement, ImageElementConfig } from \"./types\";\nimport { HomeAssistant } from \"../../../types\";\n\n@customElement(\"hui-image-element\")\nexport class HuiImageElement extends LitElement implements LovelaceElement {\n  @property() public hass?: HomeAssistant;\n  @property() private _config?: ImageElementConfig;\n\n  public setConfig(config: ImageElementConfig): void {\n    if (!config) {\n      throw Error(\"Error in element configuration\");\n    }\n\n    this.classList.toggle(\n      \"clickable\",\n      config.tap_action && config.tap_action.action !== \"none\"\n    );\n    this._config = config;\n  }\n\n  protected render(): TemplateResult | void {\n    if (!this._config || !this.hass) {\n      return html``;\n    }\n\n    return html`\n      <hui-image\n        .hass=\"${this.hass}\"\n        .entity=\"${this._config.entity}\"\n        .image=\"${this._config.image}\"\n        .stateImage=\"${this._config.state_image}\"\n        .cameraImage=\"${this._config.camera_image}\"\n        .filter=\"${this._config.filter}\"\n        .stateFilter=\"${this._config.state_filter}\"\n        .title=\"${computeTooltip(this.hass, this._config)}\"\n        .aspectRatio=\"${this._config.aspect_ratio}\"\n        @ha-click=\"${this._handleTap}\"\n        @ha-hold=\"${this._handleHold}\"\n        .longPress=\"${longPress()}\"\n      ></hui-image>\n    `;\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      :host(.clickable) {\n        cursor: pointer;\n        overflow: hidden;\n        -webkit-touch-callout: none !important;\n      }\n      hui-image {\n        -webkit-user-select: none !important;\n      }\n    `;\n  }\n\n  private _handleTap(): void {\n    handleClick(this, this.hass!, this._config!, false);\n  }\n\n  private _handleHold(): void {\n    handleClick(this, this.hass!, this._config!, true);\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-image-element\": HuiImageElement;\n  }\n}\n","import {\n  html,\n  LitElement,\n  TemplateResult,\n  property,\n  customElement,\n  CSSResult,\n  css,\n} from \"lit-element\";\n\nimport \"../../../components/buttons/ha-call-service-button\";\n\nimport { LovelaceElement, ServiceButtonElementConfig } from \"./types\";\nimport { HomeAssistant } from \"../../../types\";\n\n@customElement(\"hui-service-button-element\")\nexport class HuiServiceButtonElement extends LitElement\n  implements LovelaceElement {\n  public hass?: HomeAssistant;\n  @property() private _config?: ServiceButtonElementConfig;\n  private _domain?: string;\n  private _service?: string;\n\n  static get properties() {\n    return { _config: {} };\n  }\n\n  public setConfig(config: ServiceButtonElementConfig): void {\n    if (!config || !config.service) {\n      throw Error(\"Invalid Configuration: 'service' required\");\n    }\n\n    [this._domain, this._service] = config.service.split(\".\", 2);\n\n    if (!this._domain) {\n      throw Error(\"Invalid Configuration: 'service' does not have a domain\");\n    }\n\n    if (!this._service) {\n      throw Error(\n        \"Invalid Configuration: 'service' does not have a service name\"\n      );\n    }\n\n    this._config = config;\n  }\n\n  protected render(): TemplateResult | void {\n    if (!this._config || !this.hass) {\n      return html``;\n    }\n\n    return html`\n      <ha-call-service-button\n        .hass=\"${this.hass}\"\n        .domain=\"${this._domain}\"\n        .service=\"${this._service}\"\n        .serviceData=\"${this._config.service_data}\"\n        >${this._config.title}</ha-call-service-button\n      >\n    `;\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      ha-call-service-button {\n        color: var(--primary-color);\n        white-space: nowrap;\n      }\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-service-button-element\": HuiServiceButtonElement;\n  }\n}\n","import {\n  html,\n  LitElement,\n  TemplateResult,\n  customElement,\n  property,\n  PropertyValues,\n} from \"lit-element\";\n\nimport \"../../../components/entity/ha-state-label-badge\";\nimport \"../components/hui-warning-element\";\n\nimport computeStateName from \"../../../common/entity/compute_state_name\";\nimport { LovelaceElement, StateBadgeElementConfig } from \"./types\";\nimport { HomeAssistant } from \"../../../types\";\nimport { hasConfigOrEntityChanged } from \"../common/has-changed\";\n\n@customElement(\"hui-state-badge-element\")\nexport class HuiStateBadgeElement extends LitElement\n  implements LovelaceElement {\n  @property() public hass?: HomeAssistant;\n  @property() private _config?: StateBadgeElementConfig;\n\n  public setConfig(config: StateBadgeElementConfig): void {\n    if (!config.entity) {\n      throw Error(\"Invalid Configuration: 'entity' required\");\n    }\n\n    this._config = config;\n  }\n\n  protected shouldUpdate(changedProps: PropertyValues): boolean {\n    return hasConfigOrEntityChanged(this, changedProps);\n  }\n\n  protected render(): TemplateResult | void {\n    if (!this._config || !this.hass) {\n      return html``;\n    }\n\n    const stateObj = this.hass.states[this._config.entity!];\n\n    if (!stateObj) {\n      return html`\n        <hui-warning-element\n          label=\"${this.hass.localize(\n            \"ui.panel.lovelace.warning.entity_not_found\",\n            \"entity\",\n            this._config.entity\n          )}\"\n        ></hui-warning-element>\n      `;\n    }\n\n    return html`\n      <ha-state-label-badge\n        .hass=\"${this.hass}\"\n        .state=\"${stateObj}\"\n        .title=\"${this._config.title === undefined\n          ? computeStateName(stateObj)\n          : this._config.title === null\n          ? \"\"\n          : this._config.title}\"\n      ></ha-state-label-badge>\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-state-badge-element\": HuiStateBadgeElement;\n  }\n}\n","import {\n  html,\n  LitElement,\n  TemplateResult,\n  customElement,\n  property,\n  css,\n  CSSResult,\n  PropertyValues,\n} from \"lit-element\";\n\nimport \"../../../components/entity/state-badge\";\nimport \"../components/hui-warning-element\";\n\nimport { computeTooltip } from \"../common/compute-tooltip\";\nimport { handleClick } from \"../common/handle-click\";\nimport { longPress } from \"../common/directives/long-press-directive\";\nimport { LovelaceElement, StateIconElementConfig } from \"./types\";\nimport { HomeAssistant } from \"../../../types\";\nimport { hasConfigOrEntityChanged } from \"../common/has-changed\";\n\n@customElement(\"hui-state-icon-element\")\nexport class HuiStateIconElement extends LitElement implements LovelaceElement {\n  @property() public hass?: HomeAssistant;\n  @property() private _config?: StateIconElementConfig;\n\n  public setConfig(config: StateIconElementConfig): void {\n    if (!config.entity) {\n      throw Error(\"Invalid Configuration: 'entity' required\");\n    }\n\n    this._config = config;\n  }\n\n  protected shouldUpdate(changedProps: PropertyValues): boolean {\n    return hasConfigOrEntityChanged(this, changedProps);\n  }\n\n  protected render(): TemplateResult | void {\n    if (!this._config || !this.hass) {\n      return html``;\n    }\n\n    const stateObj = this.hass.states[this._config.entity!];\n\n    if (!stateObj) {\n      return html`\n        <hui-warning-element\n          label=${this.hass.localize(\n            \"ui.panel.lovelace.warning.entity_not_found\",\n            \"entity\",\n            this._config.entity\n          )}\n        ></hui-warning-element>\n      `;\n    }\n\n    return html`\n      <state-badge\n        .stateObj=\"${stateObj}\"\n        .title=\"${computeTooltip(this.hass, this._config)}\"\n        @ha-click=\"${this._handleClick}\"\n        @ha-hold=\"${this._handleHold}\"\n        .longPress=\"${longPress()}\"\n        .overrideIcon=${this._config.icon}\n      ></state-badge>\n    `;\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      :host {\n        cursor: pointer;\n      }\n    `;\n  }\n\n  private _handleClick(): void {\n    handleClick(this, this.hass!, this._config!, false);\n  }\n\n  private _handleHold(): void {\n    handleClick(this, this.hass!, this._config!, true);\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-state-icon-element\": HuiStateIconElement;\n  }\n}\n","import {\n  html,\n  LitElement,\n  TemplateResult,\n  customElement,\n  property,\n  css,\n  CSSResult,\n  PropertyValues,\n} from \"lit-element\";\n\nimport \"../../../components/entity/ha-state-label-badge\";\nimport \"../components/hui-warning-element\";\n\nimport computeStateDisplay from \"../../../common/entity/compute_state_display\";\nimport { computeTooltip } from \"../common/compute-tooltip\";\nimport { handleClick } from \"../common/handle-click\";\nimport { longPress } from \"../common/directives/long-press-directive\";\nimport { LovelaceElement, StateLabelElementConfig } from \"./types\";\nimport { HomeAssistant } from \"../../../types\";\nimport { hasConfigOrEntityChanged } from \"../common/has-changed\";\n\n@customElement(\"hui-state-label-element\")\nclass HuiStateLabelElement extends LitElement implements LovelaceElement {\n  @property() public hass?: HomeAssistant;\n  @property() private _config?: StateLabelElementConfig;\n\n  public setConfig(config: StateLabelElementConfig): void {\n    if (!config.entity) {\n      throw Error(\"Invalid Configuration: 'entity' required\");\n    }\n\n    this._config = config;\n  }\n\n  protected shouldUpdate(changedProps: PropertyValues): boolean {\n    return hasConfigOrEntityChanged(this, changedProps);\n  }\n\n  protected render(): TemplateResult | void {\n    if (!this._config || !this.hass) {\n      return html``;\n    }\n\n    const stateObj = this.hass.states[this._config.entity!];\n\n    if (!stateObj) {\n      return html`\n        <hui-warning-element\n          label=${this.hass.localize(\n            \"ui.panel.lovelace.warning.entity_not_found\",\n            \"entity\",\n            this._config.entity\n          )}\n        ></hui-warning-element>\n      `;\n    }\n\n    return html`\n      <div\n        .title=\"${computeTooltip(this.hass, this._config)}\"\n        @ha-click=\"${this._handleTap}\"\n        @ha-hold=\"${this._handleHold}\"\n        .longPress=\"${longPress()}\"\n      >\n        ${this._config.prefix}${stateObj\n          ? computeStateDisplay(\n              this.hass.localize,\n              stateObj,\n              this.hass.language\n            )\n          : \"-\"}${this._config.suffix}\n      </div>\n    `;\n  }\n\n  private _handleTap(): void {\n    handleClick(this, this.hass!, this._config!, false);\n  }\n\n  private _handleHold(): void {\n    handleClick(this, this.hass!, this._config!, true);\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      :host {\n        cursor: pointer;\n      }\n      div {\n        padding: 8px;\n        white-space: nowrap;\n      }\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-state-label-element\": HuiStateLabelElement;\n  }\n}\n","import {\n  html,\n  LitElement,\n  TemplateResult,\n  property,\n  css,\n  CSSResult,\n  customElement,\n  PropertyValues,\n} from \"lit-element\";\n\nimport \"../../../components/ha-climate-state\";\nimport \"../components/hui-generic-entity-row\";\nimport \"../components/hui-warning\";\n\nimport { HomeAssistant } from \"../../../types\";\nimport { EntityRow, EntityConfig } from \"./types\";\nimport { hasConfigOrEntityChanged } from \"../common/has-changed\";\n\n@customElement(\"hui-climate-entity-row\")\nclass HuiClimateEntityRow extends LitElement implements EntityRow {\n  @property() public hass?: HomeAssistant;\n\n  @property() private _config?: EntityConfig;\n\n  public setConfig(config: EntityConfig): void {\n    if (!config || !config.entity) {\n      throw new Error(\"Invalid Configuration: 'entity' required\");\n    }\n\n    this._config = config;\n  }\n\n  protected shouldUpdate(changedProps: PropertyValues): boolean {\n    return hasConfigOrEntityChanged(this, changedProps);\n  }\n\n  protected render(): TemplateResult | void {\n    if (!this.hass || !this._config) {\n      return html``;\n    }\n\n    const stateObj = this.hass.states[this._config.entity];\n\n    if (!stateObj) {\n      return html`\n        <hui-warning\n          >${this.hass.localize(\n            \"ui.panel.lovelace.warning.entity_not_found\",\n            \"entity\",\n            this._config.entity\n          )}</hui-warning\n        >\n      `;\n    }\n\n    return html`\n      <hui-generic-entity-row .hass=\"${this.hass}\" .config=\"${this._config}\">\n        <ha-climate-state\n          .hass=\"${this.hass}\"\n          .stateObj=\"${stateObj}\"\n        ></ha-climate-state>\n      </hui-generic-entity-row>\n    `;\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      ha-climate-state {\n        text-align: right;\n      }\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-climate-entity-row\": HuiClimateEntityRow;\n  }\n}\n","import {\n  html,\n  LitElement,\n  TemplateResult,\n  property,\n  css,\n  CSSResult,\n  customElement,\n  PropertyValues,\n} from \"lit-element\";\n\nimport \"../components/hui-generic-entity-row\";\nimport \"../../../components/ha-cover-controls\";\nimport \"../../../components/ha-cover-tilt-controls\";\nimport \"../components/hui-warning\";\n\nimport { isTiltOnly } from \"../../../util/cover-model\";\nimport { HomeAssistant } from \"../../../types\";\nimport { EntityRow, EntityConfig } from \"./types\";\nimport { hasConfigOrEntityChanged } from \"../common/has-changed\";\n\n@customElement(\"hui-cover-entity-row\")\nclass HuiCoverEntityRow extends LitElement implements EntityRow {\n  @property() public hass?: HomeAssistant;\n\n  @property() private _config?: EntityConfig;\n\n  public setConfig(config: EntityConfig): void {\n    if (!config) {\n      throw new Error(\"Configuration error\");\n    }\n    this._config = config;\n  }\n\n  protected shouldUpdate(changedProps: PropertyValues): boolean {\n    return hasConfigOrEntityChanged(this, changedProps);\n  }\n\n  protected render(): TemplateResult | void {\n    if (!this._config || !this.hass) {\n      return html``;\n    }\n\n    const stateObj = this.hass.states[this._config.entity];\n\n    if (!stateObj) {\n      return html`\n        <hui-warning\n          >${this.hass.localize(\n            \"ui.panel.lovelace.warning.entity_not_found\",\n            \"entity\",\n            this._config.entity\n          )}</hui-warning\n        >\n      `;\n    }\n\n    return html`\n      <hui-generic-entity-row .hass=\"${this.hass}\" .config=\"${this._config}\">\n        ${isTiltOnly(stateObj)\n          ? html`\n              <ha-cover-tilt-controls\n                .hass=\"${this.hass}\"\n                .stateObj=\"${stateObj}\"\n              ></ha-cover-tilt-controls>\n            `\n          : html`\n              <ha-cover-controls\n                .hass=\"${this.hass}\"\n                .stateObj=\"${stateObj}\"\n              ></ha-cover-controls>\n            `}\n      </hui-generic-entity-row>\n    `;\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      ha-cover-controls,\n      ha-cover-tilt-controls {\n        margin-right: -0.57em;\n      }\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-cover-entity-row\": HuiCoverEntityRow;\n  }\n}\n","import {\n  html,\n  LitElement,\n  TemplateResult,\n  property,\n  customElement,\n  PropertyValues,\n} from \"lit-element\";\n\nimport \"../components/hui-generic-entity-row\";\nimport \"../../../components/entity/ha-entity-toggle\";\nimport \"../components/hui-warning\";\n\nimport computeStateDisplay from \"../../../common/entity/compute_state_display\";\n\nimport { DOMAINS_TOGGLE } from \"../../../common/const\";\nimport { HomeAssistant } from \"../../../types\";\nimport { EntityRow, EntityConfig } from \"./types\";\nimport { hasConfigOrEntityChanged } from \"../common/has-changed\";\n\n@customElement(\"hui-group-entity-row\")\nclass HuiGroupEntityRow extends LitElement implements EntityRow {\n  @property() public hass?: HomeAssistant;\n\n  @property() private _config?: EntityConfig;\n\n  public setConfig(config: EntityConfig): void {\n    if (!config) {\n      throw new Error(\"Configuration error\");\n    }\n    this._config = config;\n  }\n\n  protected shouldUpdate(changedProps: PropertyValues): boolean {\n    return hasConfigOrEntityChanged(this, changedProps);\n  }\n\n  protected render(): TemplateResult | void {\n    if (!this._config || !this.hass) {\n      return html``;\n    }\n\n    const stateObj = this.hass.states[this._config.entity];\n\n    if (!stateObj) {\n      return html`\n        <hui-warning\n          >${this.hass.localize(\n            \"ui.panel.lovelace.warning.entity_not_found\",\n            \"entity\",\n            this._config.entity\n          )}</hui-warning\n        >\n      `;\n    }\n\n    return html`\n      <hui-generic-entity-row .hass=\"${this.hass}\" .config=\"${this._config}\">\n        ${this._computeCanToggle(stateObj.attributes.entity_id)\n          ? html`\n              <ha-entity-toggle\n                .hass=\"${this.hass}\"\n                .stateObj=\"${stateObj}\"\n              ></ha-entity-toggle>\n            `\n          : html`\n              <div>\n                ${computeStateDisplay(\n                  this.hass!.localize,\n                  stateObj,\n                  this.hass.language\n                )}\n              </div>\n            `}\n      </hui-generic-entity-row>\n    `;\n  }\n\n  private _computeCanToggle(entityIds): boolean {\n    return entityIds.some((entityId) =>\n      DOMAINS_TOGGLE.has(entityId.split(\".\", 1)[0])\n    );\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-group-entity-row\": HuiGroupEntityRow;\n  }\n}\n","import {\n  html,\n  LitElement,\n  TemplateResult,\n  property,\n  PropertyValues,\n  customElement,\n} from \"lit-element\";\n\nimport \"../components/hui-generic-entity-row\";\nimport \"../../../components/paper-time-input.js\";\n// tslint:disable-next-line:no-duplicate-imports\nimport { PaperTimeInput } from \"../../../components/paper-time-input.js\";\nimport \"../../../components/ha-date-input\";\n// tslint:disable-next-line:no-duplicate-imports\nimport { HaDateInput } from \"../../../components/ha-date-input\";\n\nimport { HomeAssistant } from \"../../../types\";\nimport { EntityRow, EntityConfig } from \"./types\";\nimport { setInputDateTimeValue } from \"../../../data/input_datetime\";\nimport { hasConfigOrEntityChanged } from \"../common/has-changed\";\n\n@customElement(\"hui-input-datetime-entity-row\")\nclass HuiInputDatetimeEntityRow extends LitElement implements EntityRow {\n  @property() public hass?: HomeAssistant;\n  @property() private _config?: EntityConfig;\n\n  public setConfig(config: EntityConfig): void {\n    if (!config) {\n      throw new Error(\"Configuration error\");\n    }\n    this._config = config;\n  }\n\n  protected shouldUpdate(changedProps: PropertyValues): boolean {\n    return hasConfigOrEntityChanged(this, changedProps);\n  }\n\n  protected render(): TemplateResult | void {\n    if (!this._config || !this.hass) {\n      return html``;\n    }\n\n    const stateObj = this.hass.states[this._config.entity];\n\n    if (!stateObj) {\n      return html`\n        <hui-warning\n          >${this.hass.localize(\n            \"ui.panel.lovelace.warning.entity_not_found\",\n            \"entity\",\n            this._config.entity\n          )}</hui-warning\n        >\n      `;\n    }\n\n    return html`\n      <hui-generic-entity-row .hass=\"${this.hass}\" .config=\"${this._config}\">\n        ${stateObj.attributes.has_date\n          ? html`\n              <ha-date-input\n                .year=${stateObj.attributes.year}\n                .month=${(\"0\" + stateObj.attributes.month).slice(-2)}\n                .day=${(\"0\" + stateObj.attributes.day).slice(-2)}\n                @change=${this._selectedValueChanged}\n                @click=${this._stopEventPropagation}\n              ></ha-date-input>\n              ${stateObj.attributes.has_time ? \",\" : \"\"}\n            `\n          : ``}\n        ${stateObj.attributes.has_time\n          ? html`\n              <paper-time-input\n                .hour=${stateObj.state === \"unknown\"\n                  ? \"\"\n                  : (\"0\" + stateObj.attributes.hour).slice(-2)}\n                .min=${stateObj.state === \"unknown\"\n                  ? \"\"\n                  : (\"0\" + stateObj.attributes.minute).slice(-2)}\n                .amPm=${false}\n                @change=${this._selectedValueChanged}\n                @click=${this._stopEventPropagation}\n                hide-label\n                format=\"24\"\n              ></paper-time-input>\n            `\n          : ``}\n      </hui-generic-entity-row>\n    `;\n  }\n\n  private _stopEventPropagation(ev: Event): void {\n    ev.stopPropagation();\n  }\n\n  private get _timeInputEl(): PaperTimeInput {\n    return this.shadowRoot!.querySelector(\"paper-time-input\")!;\n  }\n\n  private get _dateInputEl(): HaDateInput {\n    return this.shadowRoot!.querySelector(\"ha-date-input\")!;\n  }\n\n  private _selectedValueChanged(ev): void {\n    const stateObj = this.hass!.states[this._config!.entity];\n\n    const time =\n      this._timeInputEl !== null\n        ? this._timeInputEl.value.trim() + \":00\"\n        : undefined;\n\n    const date =\n      this._dateInputEl !== null ? this._dateInputEl.value : undefined;\n\n    if (time !== stateObj.state) {\n      setInputDateTimeValue(this.hass!, stateObj.entity_id, time, date);\n    }\n\n    ev.target.blur();\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-input-datetime-entity-row\": HuiInputDatetimeEntityRow;\n  }\n}\n","import {\n  html,\n  LitElement,\n  TemplateResult,\n  property,\n  customElement,\n  css,\n  CSSResult,\n  PropertyValues,\n} from \"lit-element\";\n\nimport \"../components/hui-generic-entity-row\";\nimport \"../../../components/ha-slider\";\nimport \"../components/hui-warning\";\n\nimport { computeRTLDirection } from \"../../../common/util/compute_rtl\";\nimport { EntityRow, EntityConfig } from \"./types\";\nimport { HomeAssistant } from \"../../../types\";\nimport { setValue } from \"../../../data/input_text\";\nimport { hasConfigOrEntityChanged } from \"../common/has-changed\";\n\n@customElement(\"hui-input-number-entity-row\")\nclass HuiInputNumberEntityRow extends LitElement implements EntityRow {\n  @property() public hass?: HomeAssistant;\n\n  @property() private _config?: EntityConfig;\n\n  private _loaded?: boolean;\n\n  private _updated?: boolean;\n\n  public setConfig(config: EntityConfig): void {\n    if (!config) {\n      throw new Error(\"Configuration error\");\n    }\n    this._config = config;\n  }\n\n  public connectedCallback(): void {\n    super.connectedCallback();\n    if (this._updated && !this._loaded) {\n      this._initialLoad();\n    }\n  }\n\n  protected firstUpdated(): void {\n    this._updated = true;\n    if (this.isConnected && !this._loaded) {\n      this._initialLoad();\n    }\n  }\n\n  protected shouldUpdate(changedProps: PropertyValues): boolean {\n    return hasConfigOrEntityChanged(this, changedProps);\n  }\n\n  protected render(): TemplateResult | void {\n    if (!this._config || !this.hass) {\n      return html``;\n    }\n\n    const stateObj = this.hass.states[this._config.entity];\n\n    if (!stateObj) {\n      return html`\n        <hui-warning\n          >${this.hass.localize(\n            \"ui.panel.lovelace.warning.entity_not_found\",\n            \"entity\",\n            this._config.entity\n          )}</hui-warning\n        >\n      `;\n    }\n\n    return html`\n      <hui-generic-entity-row .hass=\"${this.hass}\" .config=\"${this._config}\">\n        <div>\n          ${stateObj.attributes.mode === \"slider\"\n            ? html`\n                <div class=\"flex\">\n                  <ha-slider\n                    .dir=\"${computeRTLDirection(this.hass!)}\"\n                    .step=\"${Number(stateObj.attributes.step)}\"\n                    .min=\"${Number(stateObj.attributes.min)}\"\n                    .max=\"${Number(stateObj.attributes.max)}\"\n                    .value=\"${Number(stateObj.state)}\"\n                    pin\n                    @change=\"${this._selectedValueChanged}\"\n                    ignore-bar-touch\n                    id=\"input\"\n                  ></ha-slider>\n                  <span class=\"state\">\n                    ${Number(stateObj.state)}\n                    ${stateObj.attributes.unit_of_measurement}\n                  </span>\n                </div>\n              `\n            : html`\n                <paper-input\n                  no-label-float\n                  auto-validate\n                  .pattern=\"[0-9]+([\\\\.][0-9]+)?\"\n                  .step=\"${Number(stateObj.attributes.step)}\"\n                  .min=\"${Number(stateObj.attributes.min)}\"\n                  .max=\"${Number(stateObj.attributes.max)}\"\n                  .value=\"${Number(stateObj.state)}\"\n                  type=\"number\"\n                  @change=\"${this._selectedValueChanged}\"\n                  id=\"input\"\n                ></paper-input>\n              `}\n        </div>\n      </hui-generic-entity-row>\n    `;\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      .flex {\n        display: flex;\n        align-items: center;\n      }\n      .state {\n        min-width: 45px;\n        text-align: end;\n      }\n      paper-input {\n        text-align: end;\n      }\n    `;\n  }\n\n  private async _initialLoad(): Promise<void> {\n    this._loaded = true;\n    await this.updateComplete;\n    const element = this.shadowRoot!.querySelector(\".state\") as HTMLElement;\n\n    if (!element || !this.parentElement) {\n      return;\n    }\n\n    element.hidden = this.parentElement.clientWidth <= 350;\n  }\n\n  private get _inputElement(): { value: string } {\n    // linter recommended the following syntax\n    return (this.shadowRoot!.getElementById(\"input\") as unknown) as {\n      value: string;\n    };\n  }\n\n  private _selectedValueChanged(): void {\n    const element = this._inputElement;\n    const stateObj = this.hass!.states[this._config!.entity];\n\n    if (element.value !== stateObj.state) {\n      setValue(this.hass!, stateObj.entity_id, element.value!);\n    }\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-input-number-entity-row\": HuiInputNumberEntityRow;\n  }\n}\n","import {\n  html,\n  LitElement,\n  TemplateResult,\n  property,\n  css,\n  CSSResult,\n  customElement,\n  PropertyValues,\n} from \"lit-element\";\nimport \"@polymer/paper-item/paper-item\";\nimport \"@polymer/paper-listbox/paper-listbox\";\n\nimport \"../../../components/ha-paper-dropdown-menu\";\nimport \"../../../components/entity/state-badge\";\nimport \"../components/hui-warning\";\n\nimport computeStateName from \"../../../common/entity/compute_state_name\";\n\nimport { HomeAssistant, InputSelectEntity } from \"../../../types\";\nimport { EntityRow, EntityConfig } from \"./types\";\nimport { setInputSelectOption } from \"../../../data/input-select\";\nimport { hasConfigOrEntityChanged } from \"../common/has-changed\";\nimport { forwardHaptic } from \"../../../data/haptics\";\nimport { stopPropagation } from \"../../../common/dom/stop_propagation\";\n\n@customElement(\"hui-input-select-entity-row\")\nclass HuiInputSelectEntityRow extends LitElement implements EntityRow {\n  @property() public hass?: HomeAssistant;\n\n  @property() private _config?: EntityConfig;\n\n  public setConfig(config: EntityConfig): void {\n    if (!config || !config.entity) {\n      throw new Error(\"Invalid Configuration: 'entity' required\");\n    }\n\n    this._config = config;\n  }\n\n  protected shouldUpdate(changedProps: PropertyValues): boolean {\n    return hasConfigOrEntityChanged(this, changedProps);\n  }\n\n  protected render(): TemplateResult | void {\n    if (!this.hass || !this._config) {\n      return html``;\n    }\n\n    const stateObj = this.hass.states[this._config.entity] as\n      | InputSelectEntity\n      | undefined;\n\n    if (!stateObj) {\n      return html`\n        <hui-warning\n          >${this.hass.localize(\n            \"ui.panel.lovelace.warning.entity_not_found\",\n            \"entity\",\n            this._config.entity\n          )}</hui-warning\n        >\n      `;\n    }\n\n    return html`\n      <state-badge .stateObj=\"${stateObj}\"></state-badge>\n      <ha-paper-dropdown-menu\n        .label=${this._config.name || computeStateName(stateObj)}\n        .value=${stateObj.state}\n        @iron-select=${this._selectedChanged}\n        @click=${stopPropagation}\n      >\n        <paper-listbox slot=\"dropdown-content\">\n          ${stateObj.attributes.options.map(\n            (option) => html`\n              <paper-item>${option}</paper-item>\n            `\n          )}\n        </paper-listbox>\n      </ha-paper-dropdown-menu>\n    `;\n  }\n\n  protected updated(changedProps: PropertyValues) {\n    super.updated(changedProps);\n\n    if (!this.hass || !this._config) {\n      return;\n    }\n\n    const stateObj = this.hass.states[this._config.entity] as\n      | InputSelectEntity\n      | undefined;\n\n    if (!stateObj) {\n      return;\n    }\n\n    // Update selected after rendering the items or else it won't work in Firefox\n    this.shadowRoot!.querySelector(\n      \"paper-listbox\"\n    )!.selected = stateObj.attributes.options.indexOf(stateObj.state);\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      :host {\n        display: flex;\n        align-items: center;\n      }\n      ha-paper-dropdown-menu {\n        margin-left: 16px;\n        flex: 1;\n      }\n\n      paper-item {\n        cursor: pointer;\n        min-width: 200px;\n      }\n    `;\n  }\n\n  private _selectedChanged(ev): void {\n    const stateObj = this.hass!.states[this._config!.entity];\n    const option = ev.target.selectedItem.innerText.trim();\n    if (option === stateObj.state) {\n      return;\n    }\n\n    forwardHaptic(\"light\");\n\n    setInputSelectOption(this.hass!, stateObj.entity_id, option);\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-input-select-entity-row\": HuiInputSelectEntityRow;\n  }\n}\n","import {\n  html,\n  LitElement,\n  TemplateResult,\n  property,\n  customElement,\n  PropertyValues,\n} from \"lit-element\";\nimport { PaperInputElement } from \"@polymer/paper-input/paper-input\";\n\nimport \"../components/hui-generic-entity-row\";\nimport \"../components/hui-warning\";\n\nimport { HomeAssistant } from \"../../../types\";\nimport { EntityRow, EntityConfig } from \"./types\";\nimport { setValue } from \"../../../data/input_text\";\nimport { hasConfigOrEntityChanged } from \"../common/has-changed\";\n\n@customElement(\"hui-input-text-entity-row\")\nclass HuiInputTextEntityRow extends LitElement implements EntityRow {\n  @property() public hass?: HomeAssistant;\n\n  @property() private _config?: EntityConfig;\n\n  public setConfig(config: EntityConfig): void {\n    if (!config) {\n      throw new Error(\"Configuration error\");\n    }\n    this._config = config;\n  }\n\n  protected shouldUpdate(changedProps: PropertyValues): boolean {\n    return hasConfigOrEntityChanged(this, changedProps);\n  }\n\n  protected render(): TemplateResult | void {\n    if (!this._config || !this.hass) {\n      return html``;\n    }\n\n    const stateObj = this.hass.states[this._config.entity];\n\n    if (!stateObj) {\n      return html`\n        <hui-warning\n          >${this.hass.localize(\n            \"ui.panel.lovelace.warning.entity_not_found\",\n            \"entity\",\n            this._config.entity\n          )}</hui-warning\n        >\n      `;\n    }\n\n    return html`\n      <hui-generic-entity-row .hass=\"${this.hass}\" .config=\"${this._config}\">\n        <paper-input\n          no-label-float\n          .value=\"${stateObj.state}\"\n          .minlength=\"${stateObj.attributes.min}\"\n          .maxlength=\"${stateObj.attributes.max}\"\n          .autoValidate=\"${stateObj.attributes.pattern}\"\n          .pattern=\"${stateObj.attributes.pattern}\"\n          .type=\"${stateObj.attributes.mode}\"\n          @change=\"${this._selectedValueChanged}\"\n          placeholder=\"(empty value)\"\n        ></paper-input>\n      </hui-generic-entity-row>\n    `;\n  }\n\n  private get _inputEl(): PaperInputElement {\n    return this.shadowRoot!.querySelector(\"paper-input\") as PaperInputElement;\n  }\n\n  private _selectedValueChanged(ev): void {\n    const element = this._inputEl;\n    const stateObj = this.hass!.states[this._config!.entity];\n\n    if (element.value !== stateObj.state) {\n      setValue(this.hass!, stateObj.entity_id, element.value!);\n    }\n\n    ev.target.blur();\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-input-text-entity-row\": HuiInputTextEntityRow;\n  }\n}\n","import {\n  html,\n  LitElement,\n  TemplateResult,\n  property,\n  css,\n  CSSResult,\n  customElement,\n  PropertyValues,\n} from \"lit-element\";\n\nimport \"../components/hui-generic-entity-row\";\nimport \"../components/hui-warning\";\n\nimport { HomeAssistant } from \"../../../types\";\nimport { EntityRow, EntityConfig } from \"./types\";\nimport { hasConfigOrEntityChanged } from \"../common/has-changed\";\n\n@customElement(\"hui-lock-entity-row\")\nclass HuiLockEntityRow extends LitElement implements EntityRow {\n  @property() public hass?: HomeAssistant;\n\n  @property() private _config?: EntityConfig;\n\n  public setConfig(config: EntityConfig): void {\n    if (!config) {\n      throw new Error(\"Configuration error\");\n    }\n    this._config = config;\n  }\n\n  protected shouldUpdate(changedProps: PropertyValues): boolean {\n    return hasConfigOrEntityChanged(this, changedProps);\n  }\n\n  protected render(): TemplateResult | void {\n    if (!this._config || !this.hass) {\n      return html``;\n    }\n\n    const stateObj = this.hass.states[this._config.entity];\n\n    if (!stateObj) {\n      return html`\n        <hui-warning\n          >${this.hass.localize(\n            \"ui.panel.lovelace.warning.entity_not_found\",\n            \"entity\",\n            this._config.entity\n          )}</hui-warning\n        >\n      `;\n    }\n\n    return html`\n      <hui-generic-entity-row .hass=\"${this.hass}\" .config=\"${this._config}\">\n        <mwc-button @click=\"${this._callService}\">\n          ${stateObj.state === \"locked\"\n            ? this.hass!.localize(\"ui.card.lock.unlock\")\n            : this.hass!.localize(\"ui.card.lock.lock\")}\n        </mwc-button>\n      </hui-generic-entity-row>\n    `;\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      mwc-button {\n        margin-right: -0.57em;\n      }\n    `;\n  }\n\n  private _callService(ev): void {\n    ev.stopPropagation();\n    const stateObj = this.hass!.states[this._config!.entity];\n    this.hass!.callService(\n      \"lock\",\n      stateObj.state === \"locked\" ? \"unlock\" : \"lock\",\n      { entity_id: stateObj.entity_id }\n    );\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-lock-entity-row\": HuiLockEntityRow;\n  }\n}\n","import {\n  html,\n  LitElement,\n  TemplateResult,\n  css,\n  CSSResult,\n  property,\n  customElement,\n  PropertyValues,\n} from \"lit-element\";\nimport \"@polymer/paper-icon-button/paper-icon-button\";\n\nimport \"../components/hui-generic-entity-row\";\nimport \"../components/hui-warning\";\n\nimport { EntityRow, EntityConfig } from \"./types\";\nimport { HomeAssistant } from \"../../../types\";\nimport { HassEntity } from \"home-assistant-js-websocket\";\nimport { supportsFeature } from \"../../../common/entity/supports-feature\";\nimport {\n  SUPPORTS_PLAY,\n  SUPPORT_NEXT_TRACK,\n  OFF_STATES,\n  SUPPORT_PAUSE,\n} from \"../../../data/media-player\";\nimport { hasConfigOrEntityChanged } from \"../common/has-changed\";\n\n@customElement(\"hui-media-player-entity-row\")\nclass HuiMediaPlayerEntityRow extends LitElement implements EntityRow {\n  @property() public hass?: HomeAssistant;\n\n  @property() private _config?: EntityConfig;\n\n  public setConfig(config: EntityConfig): void {\n    if (!config || !config.entity) {\n      throw new Error(\"Invalid Configuration: 'entity' required\");\n    }\n\n    this._config = config;\n  }\n\n  protected shouldUpdate(changedProps: PropertyValues): boolean {\n    return hasConfigOrEntityChanged(this, changedProps);\n  }\n\n  protected render(): TemplateResult | void {\n    if (!this.hass || !this._config) {\n      return html``;\n    }\n\n    const stateObj = this.hass.states[this._config.entity];\n\n    if (!stateObj) {\n      return html`\n        <hui-warning\n          >${this.hass.localize(\n            \"ui.panel.lovelace.warning.entity_not_found\",\n            \"entity\",\n            this._config.entity\n          )}</hui-warning\n        >\n      `;\n    }\n\n    return html`\n      <hui-generic-entity-row\n        .hass=\"${this.hass}\"\n        .config=\"${this._config}\"\n        .showSecondary=\"false\"\n      >\n        ${OFF_STATES.includes(stateObj.state)\n          ? html`\n              <div>\n                ${this.hass!.localize(`state.media_player.${stateObj.state}`) ||\n                  this.hass!.localize(`state.default.${stateObj.state}`) ||\n                  stateObj.state}\n              </div>\n            `\n          : html`\n              <div class=\"controls\">\n                ${stateObj.state !== \"playing\" &&\n                !supportsFeature(stateObj, SUPPORTS_PLAY)\n                  ? \"\"\n                  : html`\n                      <paper-icon-button\n                        icon=\"${this._computeControlIcon(stateObj)}\"\n                        @click=\"${this._playPause}\"\n                      ></paper-icon-button>\n                    `}\n                ${supportsFeature(stateObj, SUPPORT_NEXT_TRACK)\n                  ? html`\n                      <paper-icon-button\n                        icon=\"hass:skip-next\"\n                        @click=\"${this._nextTrack}\"\n                      ></paper-icon-button>\n                    `\n                  : \"\"}\n              </div>\n              <div slot=\"secondary\">${this._computeMediaTitle(stateObj)}</div>\n            `}\n      </hui-generic-entity-row>\n    `;\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      .controls {\n        white-space: nowrap;\n      }\n    `;\n  }\n\n  private _computeControlIcon(stateObj: HassEntity): string {\n    if (stateObj.state !== \"playing\") {\n      return \"hass:play\";\n    }\n\n    // tslint:disable-next-line:no-bitwise\n    return supportsFeature(stateObj, SUPPORT_PAUSE)\n      ? \"hass:pause\"\n      : \"hass:stop\";\n  }\n\n  private _computeMediaTitle(stateObj: HassEntity): string {\n    let prefix;\n    let suffix;\n\n    switch (stateObj.attributes.media_content_type) {\n      case \"music\":\n        prefix = stateObj.attributes.media_artist;\n        suffix = stateObj.attributes.media_title;\n        break;\n      case \"tvshow\":\n        prefix = stateObj.attributes.media_series_title;\n        suffix = stateObj.attributes.media_title;\n        break;\n      default:\n        prefix =\n          stateObj.attributes.media_title ||\n          stateObj.attributes.app_name ||\n          stateObj.state;\n        suffix = \"\";\n    }\n\n    return prefix && suffix ? `${prefix}: ${suffix}` : prefix || suffix || \"\";\n  }\n\n  private _playPause(ev: MouseEvent): void {\n    ev.stopPropagation();\n    this.hass!.callService(\"media_player\", \"media_play_pause\", {\n      entity_id: this._config!.entity,\n    });\n  }\n\n  private _nextTrack(ev: MouseEvent): void {\n    ev.stopPropagation();\n    this.hass!.callService(\"media_player\", \"media_next_track\", {\n      entity_id: this._config!.entity,\n    });\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-media-player-entity-row\": HuiMediaPlayerEntityRow;\n  }\n}\n","import {\n  html,\n  LitElement,\n  TemplateResult,\n  CSSResult,\n  css,\n  property,\n  customElement,\n  PropertyValues,\n} from \"lit-element\";\n\nimport \"../components/hui-generic-entity-row\";\nimport \"../../../components/entity/ha-entity-toggle\";\nimport \"../components/hui-warning\";\n\nimport { HomeAssistant } from \"../../../types\";\nimport { EntityRow, EntityConfig } from \"./types\";\nimport { hasConfigOrEntityChanged } from \"../common/has-changed\";\n\n@customElement(\"hui-scene-entity-row\")\nclass HuiSceneEntityRow extends LitElement implements EntityRow {\n  @property() public hass?: HomeAssistant;\n\n  @property() private _config?: EntityConfig;\n\n  public setConfig(config: EntityConfig): void {\n    if (!config) {\n      throw new Error(\"Configuration error\");\n    }\n    this._config = config;\n  }\n\n  protected shouldUpdate(changedProps: PropertyValues): boolean {\n    return hasConfigOrEntityChanged(this, changedProps);\n  }\n\n  protected render(): TemplateResult | void {\n    if (!this._config || !this.hass) {\n      return html``;\n    }\n\n    const stateObj = this.hass.states[this._config.entity];\n\n    if (!stateObj) {\n      return html`\n        <hui-warning\n          >${this.hass.localize(\n            \"ui.panel.lovelace.warning.entity_not_found\",\n            \"entity\",\n            this._config.entity\n          )}</hui-warning\n        >\n      `;\n    }\n\n    return html`\n      <hui-generic-entity-row .hass=\"${this.hass}\" .config=\"${this._config}\">\n        ${stateObj.attributes.can_cancel\n          ? html`\n              <ha-entity-toggle\n                .hass=\"${this.hass}\"\n                .stateObj=\"${stateObj}\"\n              ></ha-entity-toggle>\n            `\n          : html`\n              <mwc-button @click=\"${this._callService}\">\n                ${this.hass!.localize(\"ui.card.scene.activate\")}\n              </mwc-button>\n            `}\n      </hui-generic-entity-row>\n    `;\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      mwc-button {\n        margin-right: -0.57em;\n      }\n    `;\n  }\n\n  private _callService(ev): void {\n    ev.stopPropagation();\n    this.hass!.callService(\"scene\", \"turn_on\", {\n      entity_id: this._config!.entity,\n    });\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-scene-entity-row\": HuiSceneEntityRow;\n  }\n}\n","import {\n  html,\n  LitElement,\n  TemplateResult,\n  property,\n  CSSResult,\n  css,\n  customElement,\n  PropertyValues,\n} from \"lit-element\";\n\nimport \"../components/hui-generic-entity-row\";\nimport \"../../../components/entity/ha-entity-toggle\";\nimport \"../components/hui-warning\";\n\nimport { HomeAssistant } from \"../../../types\";\nimport { EntityRow, EntityConfig } from \"./types\";\nimport { hasConfigOrEntityChanged } from \"../common/has-changed\";\n\n@customElement(\"hui-script-entity-row\")\nclass HuiScriptEntityRow extends LitElement implements EntityRow {\n  public hass?: HomeAssistant;\n\n  @property() private _config?: EntityConfig;\n\n  public setConfig(config: EntityConfig): void {\n    if (!config) {\n      throw new Error(\"Configuration error\");\n    }\n    this._config = config;\n  }\n\n  protected shouldUpdate(changedProps: PropertyValues): boolean {\n    return hasConfigOrEntityChanged(this, changedProps);\n  }\n\n  protected render(): TemplateResult | void {\n    if (!this._config || !this.hass) {\n      return html``;\n    }\n\n    const stateObj = this.hass.states[this._config.entity];\n\n    if (!stateObj) {\n      return html`\n        <hui-warning\n          >${this.hass.localize(\n            \"ui.panel.lovelace.warning.entity_not_found\",\n            \"entity\",\n            this._config.entity\n          )}</hui-warning\n        >\n      `;\n    }\n\n    return html`\n      <hui-generic-entity-row .hass=\"${this.hass}\" .config=\"${this._config}\">\n        ${stateObj.attributes.can_cancel\n          ? html`\n              <ha-entity-toggle\n                .hass=\"${this.hass}\"\n                .stateObj=\"${stateObj}\"\n              ></ha-entity-toggle>\n            `\n          : html`\n              <mwc-button @click=\"${this._callService}\">\n                ${this.hass!.localize(\"ui.card.script.execute\")}\n              </mwc-button>\n            `}\n      </hui-generic-entity-row>\n    `;\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      mwc-button {\n        margin-right: -0.57em;\n      }\n    `;\n  }\n\n  private _callService(ev): void {\n    ev.stopPropagation();\n    this.hass!.callService(\"script\", \"turn_on\", {\n      entity_id: this._config!.entity,\n    });\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-script-entity-row\": HuiScriptEntityRow;\n  }\n}\n","import {\n  html,\n  LitElement,\n  TemplateResult,\n  property,\n  CSSResult,\n  css,\n  customElement,\n  PropertyValues,\n} from \"lit-element\";\n\nimport \"../components/hui-generic-entity-row\";\nimport \"../components/hui-timestamp-display\";\nimport \"../components/hui-warning\";\n\nimport { HomeAssistant } from \"../../../types\";\nimport { EntityRow, EntityConfig } from \"./types\";\nimport { hasConfigOrEntityChanged } from \"../common/has-changed\";\n\nimport computeStateDisplay from \"../../../common/entity/compute_state_display\";\n\ninterface SensorEntityConfig extends EntityConfig {\n  format?: \"relative\" | \"date\" | \"time\" | \"datetime\";\n}\n\n@customElement(\"hui-sensor-entity-row\")\nclass HuiSensorEntityRow extends LitElement implements EntityRow {\n  @property() public hass?: HomeAssistant;\n\n  @property() private _config?: SensorEntityConfig;\n\n  public setConfig(config: SensorEntityConfig): void {\n    if (!config) {\n      throw new Error(\"Configuration error\");\n    }\n    this._config = config;\n  }\n\n  protected shouldUpdate(changedProps: PropertyValues): boolean {\n    return hasConfigOrEntityChanged(this, changedProps);\n  }\n\n  protected render(): TemplateResult | void {\n    if (!this._config || !this.hass) {\n      return html``;\n    }\n\n    const stateObj = this.hass.states[this._config.entity];\n\n    if (!stateObj) {\n      return html`\n        <hui-warning\n          >${this.hass.localize(\n            \"ui.panel.lovelace.warning.entity_not_found\",\n            \"entity\",\n            this._config.entity\n          )}</hui-warning\n        >\n      `;\n    }\n\n    return html`\n      <hui-generic-entity-row .hass=\"${this.hass}\" .config=\"${this._config}\">\n        <div>\n          ${stateObj.attributes.device_class === \"timestamp\"\n            ? html`\n                <hui-timestamp-display\n                  .hass=\"${this.hass}\"\n                  .ts=\"${new Date(stateObj.state)}\"\n                  .format=\"${this._config.format}\"\n                ></hui-timestamp-display>\n              `\n            : computeStateDisplay(\n                this.hass!.localize,\n                stateObj,\n                this.hass.language\n              )}\n        </div>\n      </hui-generic-entity-row>\n    `;\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      div {\n        text-align: right;\n      }\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-sensor-entity-row\": HuiSensorEntityRow;\n  }\n}\n","import {\n  html,\n  LitElement,\n  TemplateResult,\n  property,\n  CSSResult,\n  css,\n  customElement,\n  PropertyValues,\n} from \"lit-element\";\n\nimport \"../components/hui-generic-entity-row\";\nimport \"../components/hui-warning\";\n\nimport computeStateDisplay from \"../../../common/entity/compute_state_display\";\n\nimport { HomeAssistant } from \"../../../types\";\nimport { EntityRow, EntityConfig } from \"./types\";\nimport { hasConfigOrEntityChanged } from \"../common/has-changed\";\n\n@customElement(\"hui-text-entity-row\")\nclass HuiTextEntityRow extends LitElement implements EntityRow {\n  @property() public hass?: HomeAssistant;\n\n  @property() private _config?: EntityConfig;\n\n  public setConfig(config: EntityConfig): void {\n    if (!config) {\n      throw new Error(\"Configuration error\");\n    }\n    this._config = config;\n  }\n\n  protected shouldUpdate(changedProps: PropertyValues): boolean {\n    return hasConfigOrEntityChanged(this, changedProps);\n  }\n\n  protected render(): TemplateResult | void {\n    if (!this._config || !this.hass) {\n      return html``;\n    }\n\n    const stateObj = this.hass.states[this._config.entity];\n\n    if (!stateObj) {\n      return html`\n        <hui-warning\n          >${this.hass.localize(\n            \"ui.panel.lovelace.warning.entity_not_found\",\n            \"entity\",\n            this._config.entity\n          )}</hui-warning\n        >\n      `;\n    }\n\n    return html`\n      <hui-generic-entity-row .hass=\"${this.hass}\" .config=\"${this._config}\">\n        <div>\n          ${computeStateDisplay(\n            this.hass!.localize,\n            stateObj,\n            this.hass.language\n          )}\n        </div>\n      </hui-generic-entity-row>\n    `;\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      div {\n        text-align: right;\n      }\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-text-entity-row\": HuiTextEntityRow;\n  }\n}\n","import {\n  html,\n  LitElement,\n  TemplateResult,\n  property,\n  PropertyValues,\n  customElement,\n} from \"lit-element\";\n\nimport \"../components/hui-generic-entity-row\";\nimport \"../components/hui-warning\";\n\nimport timerTimeRemaining from \"../../../common/entity/timer_time_remaining\";\nimport secondsToDuration from \"../../../common/datetime/seconds_to_duration\";\n\nimport { HomeAssistant } from \"../../../types\";\nimport { EntityConfig } from \"./types\";\nimport { HassEntity } from \"home-assistant-js-websocket\";\nimport { hasConfigOrEntityChanged } from \"../common/has-changed\";\n\n@customElement(\"hui-timer-entity-row\")\nclass HuiTimerEntityRow extends LitElement {\n  @property() public hass?: HomeAssistant;\n\n  @property() private _config?: EntityConfig;\n\n  @property() private _timeRemaining?: number;\n\n  private _interval?: number;\n\n  public setConfig(config: EntityConfig): void {\n    if (!config) {\n      throw new Error(\"Configuration error\");\n    }\n    this._config = config;\n  }\n\n  public disconnectedCallback(): void {\n    super.disconnectedCallback();\n    this._clearInterval();\n  }\n\n  protected render(): TemplateResult | void {\n    if (!this._config || !this.hass) {\n      return html``;\n    }\n\n    const stateObj = this.hass.states[this._config.entity];\n\n    if (!stateObj) {\n      return html`\n        <hui-warning\n          >${this.hass.localize(\n            \"ui.panel.lovelace.warning.entity_not_found\",\n            \"entity\",\n            this._config.entity\n          )}</hui-warning\n        >\n      `;\n    }\n\n    return html`\n      <hui-generic-entity-row .hass=\"${this.hass}\" .config=\"${this._config}\">\n        <div>${this._computeDisplay(stateObj)}</div>\n      </hui-generic-entity-row>\n    `;\n  }\n\n  protected shouldUpdate(changedProps: PropertyValues): boolean {\n    if (changedProps.has(\"_timeRemaining\")) {\n      return true;\n    }\n\n    return hasConfigOrEntityChanged(this, changedProps);\n  }\n\n  protected updated(changedProps: PropertyValues) {\n    super.updated(changedProps);\n\n    if (changedProps.has(\"hass\")) {\n      const stateObj = this.hass!.states[this._config!.entity];\n      const oldHass = changedProps.get(\"hass\") as this[\"hass\"];\n      const oldStateObj = oldHass\n        ? oldHass.states[this._config!.entity]\n        : undefined;\n\n      if (oldStateObj !== stateObj) {\n        this._startInterval(stateObj);\n      } else if (!stateObj) {\n        this._clearInterval();\n      }\n    }\n  }\n\n  private _clearInterval(): void {\n    if (this._interval) {\n      window.clearInterval(this._interval);\n      this._interval = undefined;\n    }\n  }\n\n  private _startInterval(stateObj: HassEntity): void {\n    this._clearInterval();\n    this._calculateRemaining(stateObj);\n\n    if (stateObj.state === \"active\") {\n      this._interval = window.setInterval(\n        () => this._calculateRemaining(stateObj),\n        1000\n      );\n    }\n  }\n\n  private _calculateRemaining(stateObj: HassEntity): void {\n    this._timeRemaining = timerTimeRemaining(stateObj);\n  }\n\n  private _computeDisplay(stateObj: HassEntity): string | null {\n    if (!stateObj) {\n      return null;\n    }\n\n    if (stateObj.state === \"idle\" || this._timeRemaining === 0) {\n      return this.hass!.localize(\"state.timer.\" + stateObj.state);\n    }\n\n    let display = secondsToDuration(this._timeRemaining || 0);\n\n    if (stateObj.state === \"paused\") {\n      display += ` (${this.hass!.localize(\"state.timer.paused\")})`;\n    }\n\n    return display;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-timer-entity-row\": HuiTimerEntityRow;\n  }\n}\n","import {\n  html,\n  LitElement,\n  TemplateResult,\n  customElement,\n  property,\n  PropertyValues,\n} from \"lit-element\";\n\nimport \"../components/hui-generic-entity-row\";\nimport \"../../../components/entity/ha-entity-toggle\";\nimport \"../components/hui-warning\";\n\nimport computeStateDisplay from \"../../../common/entity/compute_state_display\";\n\nimport { HomeAssistant } from \"../../../types\";\nimport { EntityRow, EntityConfig } from \"./types\";\nimport { hasConfigOrEntityChanged } from \"../common/has-changed\";\n\n@customElement(\"hui-toggle-entity-row\")\nclass HuiToggleEntityRow extends LitElement implements EntityRow {\n  @property() public hass?: HomeAssistant;\n\n  @property() private _config?: EntityConfig;\n\n  public setConfig(config: EntityConfig): void {\n    if (!config) {\n      throw new Error(\"Configuration error\");\n    }\n    this._config = config;\n  }\n\n  protected shouldUpdate(changedProps: PropertyValues): boolean {\n    return hasConfigOrEntityChanged(this, changedProps);\n  }\n\n  protected render(): TemplateResult | void {\n    if (!this._config || !this.hass) {\n      return html``;\n    }\n\n    const stateObj = this.hass.states[this._config.entity];\n\n    if (!stateObj) {\n      return html`\n        <hui-warning\n          >${this.hass.localize(\n            \"ui.panel.lovelace.warning.entity_not_found\",\n            \"entity\",\n            this._config.entity\n          )}</hui-warning\n        >\n      `;\n    }\n\n    return html`\n      <hui-generic-entity-row .hass=\"${this.hass}\" .config=\"${this._config}\">\n        ${stateObj.state === \"on\" || stateObj.state === \"off\"\n          ? html`\n              <ha-entity-toggle\n                .hass=\"${this.hass}\"\n                .stateObj=\"${stateObj}\"\n              ></ha-entity-toggle>\n            `\n          : html`\n              <div>\n                ${computeStateDisplay(\n                  this.hass!.localize,\n                  stateObj,\n                  this.hass!.language\n                )}\n              </div>\n            `}\n      </hui-generic-entity-row>\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-toggle-entity-row\": HuiToggleEntityRow;\n  }\n}\n","import \"@material/mwc-button\";\n\nimport {\n  fetchConfig,\n  LovelaceConfig,\n  saveConfig,\n  subscribeLovelaceUpdates,\n} from \"../../data/lovelace\";\nimport \"../../layouts/hass-loading-screen\";\nimport \"../../layouts/hass-error-screen\";\nimport \"./hui-root\";\nimport { HomeAssistant, PanelInfo, Route } from \"../../types\";\nimport { Lovelace } from \"./types\";\nimport {\n  LitElement,\n  html,\n  PropertyValues,\n  TemplateResult,\n  property,\n} from \"lit-element\";\nimport { showSaveDialog } from \"./editor/show-save-config-dialog\";\nimport { generateLovelaceConfig } from \"./common/generate-lovelace-config\";\nimport { showToast } from \"../../util/toast\";\n\ninterface LovelacePanelConfig {\n  mode: \"yaml\" | \"storage\";\n}\n\nlet editorLoaded = false;\n\nclass LovelacePanel extends LitElement {\n  @property() public panel?: PanelInfo<LovelacePanelConfig>;\n\n  @property() public hass?: HomeAssistant;\n\n  @property() public narrow?: boolean;\n\n  @property() public route?: Route;\n\n  @property() private _columns?: number;\n\n  @property()\n  private _state?: \"loading\" | \"loaded\" | \"error\" | \"yaml-editor\" = \"loading\";\n\n  @property() private _errorMsg?: string;\n\n  @property() private lovelace?: Lovelace;\n\n  private mqls?: MediaQueryList[];\n\n  private _saving: boolean = false;\n\n  constructor() {\n    super();\n    this._closeEditor = this._closeEditor.bind(this);\n  }\n\n  public render(): TemplateResult | void {\n    const state = this._state!;\n\n    if (state === \"loaded\") {\n      return html`\n        <hui-root\n          .hass=\"${this.hass}\"\n          .lovelace=\"${this.lovelace}\"\n          .route=\"${this.route}\"\n          .columns=\"${this._columns}\"\n          .narrow=${this.narrow}\n          @config-refresh=\"${this._forceFetchConfig}\"\n        ></hui-root>\n      `;\n    }\n\n    if (state === \"error\") {\n      return html`\n        <hass-error-screen title=\"Lovelace\" .error=\"${this._errorMsg}\">\n          <mwc-button on-click=\"_forceFetchConfig\"\n            >${this.hass!.localize(\n              \"ui.panel.lovelace.reload_lovelace\"\n            )}</mwc-button\n          >\n        </hass-error-screen>\n      `;\n    }\n\n    if (state === \"yaml-editor\") {\n      return html`\n        <hui-editor\n          .hass=\"${this.hass}\"\n          .lovelace=\"${this.lovelace}\"\n          .closeEditor=\"${this._closeEditor}\"\n        ></hui-editor>\n      `;\n    }\n\n    return html`\n      <hass-loading-screen rootnav></hass-loading-screen>\n    `;\n  }\n\n  public updated(changedProps: PropertyValues): void {\n    super.updated(changedProps);\n\n    if (changedProps.has(\"narrow\")) {\n      this._updateColumns();\n      return;\n    }\n\n    if (!changedProps.has(\"hass\")) {\n      return;\n    }\n\n    const oldHass = changedProps.get(\"hass\") as this[\"hass\"];\n\n    if (oldHass && this.hass!.dockedSidebar !== oldHass.dockedSidebar) {\n      this._updateColumns();\n    }\n  }\n\n  public firstUpdated() {\n    this._fetchConfig(false);\n    // we don't want to unsub as we want to stay informed of updates\n    subscribeLovelaceUpdates(this.hass!.connection, () =>\n      this._lovelaceChanged()\n    );\n    // reload lovelace on reconnect so we are sure we have the latest config\n    window.addEventListener(\"connection-status\", (ev) => {\n      if (ev.detail === \"connected\") {\n        this._fetchConfig(false);\n      }\n    });\n    this._updateColumns = this._updateColumns.bind(this);\n    this.mqls = [300, 600, 900, 1200].map((width) => {\n      const mql = matchMedia(`(min-width: ${width}px)`);\n      mql.addListener(this._updateColumns);\n      return mql;\n    });\n    this._updateColumns();\n  }\n\n  public connectedCallback(): void {\n    super.connectedCallback();\n    if (\n      this.lovelace &&\n      this.hass &&\n      this.lovelace.language !== this.hass.language\n    ) {\n      // language has been changed, rebuild UI\n      this._setLovelaceConfig(this.lovelace.config, this.lovelace.mode);\n    } else if (this.lovelace && this.lovelace.mode === \"generated\") {\n      // When lovelace is generated, we re-generate each time a user goes\n      // to the states panel to make sure new entities are shown.\n      this._state = \"loading\";\n      this._regenerateConfig();\n    }\n  }\n\n  private async _regenerateConfig() {\n    const conf = await generateLovelaceConfig(this.hass!, this.hass!.localize);\n    this._setLovelaceConfig(conf, \"generated\");\n    this._state = \"loaded\";\n  }\n\n  private _closeEditor() {\n    this._state = \"loaded\";\n  }\n\n  private _updateColumns() {\n    const matchColumns = this.mqls!.reduce(\n      (cols, mql) => cols + Number(mql.matches),\n      0\n    );\n    // Do -1 column if the menu is docked and open\n    this._columns = Math.max(\n      1,\n      matchColumns - Number(!this.narrow && this.hass!.dockedSidebar)\n    );\n  }\n\n  private _lovelaceChanged() {\n    if (this._saving) {\n      this._saving = false;\n    } else {\n      showToast(this, {\n        message: this.hass!.localize(\"ui.panel.lovelace.changed_toast.message\"),\n        action: {\n          action: () => this._fetchConfig(false),\n          text: this.hass!.localize(\"ui.panel.lovelace.changed_toast.refresh\"),\n        },\n        duration: 0,\n        dismissable: false,\n      });\n    }\n  }\n\n  private _forceFetchConfig() {\n    this._fetchConfig(true);\n  }\n\n  private async _fetchConfig(forceDiskRefresh) {\n    let conf: LovelaceConfig;\n    let confMode: Lovelace[\"mode\"] = this.panel!.config.mode;\n\n    try {\n      conf = await fetchConfig(this.hass!, forceDiskRefresh);\n    } catch (err) {\n      if (err.code !== \"config_not_found\") {\n        // tslint:disable-next-line\n        console.log(err);\n        this._state = \"error\";\n        this._errorMsg = err.message;\n        return;\n      }\n      conf = await generateLovelaceConfig(this.hass!, this.hass!.localize);\n      confMode = \"generated\";\n    }\n\n    this._state = \"loaded\";\n    this._setLovelaceConfig(conf, confMode);\n  }\n\n  private _setLovelaceConfig(config: LovelaceConfig, mode: Lovelace[\"mode\"]) {\n    this.lovelace = {\n      config,\n      mode,\n      editMode: this.lovelace ? this.lovelace.editMode : false,\n      language: this.hass!.language,\n      enableFullEditMode: () => {\n        if (!editorLoaded) {\n          editorLoaded = true;\n          import(/* webpackChunkName: \"lovelace-yaml-editor\" */ \"./hui-editor\");\n        }\n        this._state = \"yaml-editor\";\n      },\n      setEditMode: (editMode: boolean) => {\n        if (!editMode || this.lovelace!.mode !== \"generated\") {\n          this._updateLovelace({ editMode });\n          return;\n        }\n        showSaveDialog(this, {\n          lovelace: this.lovelace!,\n        });\n      },\n      saveConfig: async (newConfig: LovelaceConfig): Promise<void> => {\n        const { config: previousConfig, mode: previousMode } = this.lovelace!;\n        try {\n          // Optimistic update\n          this._updateLovelace({\n            config: newConfig,\n            mode: \"storage\",\n          });\n          this._saving = true;\n          await saveConfig(this.hass!, newConfig);\n        } catch (err) {\n          // tslint:disable-next-line\n          console.error(err);\n          // Rollback the optimistic update\n          this._updateLovelace({\n            config: previousConfig,\n            mode: previousMode,\n          });\n          throw err;\n        }\n      },\n    };\n  }\n\n  private _updateLovelace(props: Partial<Lovelace>) {\n    this.lovelace = {\n      ...this.lovelace!,\n      ...props,\n    };\n  }\n}\n\ncustomElements.define(\"ha-panel-lovelace\", LovelacePanel);\n","import {\n  html,\n  LitElement,\n  PropertyValues,\n  TemplateResult,\n  CSSResult,\n  css,\n  property,\n} from \"lit-element\";\nimport { classMap } from \"lit-html/directives/class-map\";\nimport \"@polymer/app-layout/app-header-layout/app-header-layout\";\nimport \"@polymer/app-layout/app-header/app-header\";\nimport \"@polymer/app-layout/app-scroll-effects/effects/waterfall\";\nimport \"@polymer/app-layout/app-toolbar/app-toolbar\";\nimport \"@polymer/app-route/app-route\";\nimport \"@polymer/paper-icon-button/paper-icon-button\";\nimport \"@material/mwc-button\";\nimport \"@polymer/paper-item/paper-item\";\nimport \"@polymer/paper-listbox/paper-listbox\";\nimport \"@polymer/paper-menu-button/paper-menu-button\";\nimport \"@polymer/paper-tabs/paper-tab\";\nimport \"@polymer/paper-tabs/paper-tabs\";\nimport { HassEntities } from \"home-assistant-js-websocket\";\n\nimport scrollToTarget from \"../../common/dom/scroll-to-target\";\n\nimport \"../../layouts/ha-app-layout\";\nimport \"../../components/ha-start-voice-button\";\nimport \"../../components/ha-paper-icon-button-arrow-next\";\nimport \"../../components/ha-paper-icon-button-arrow-prev\";\nimport \"../../components/ha-icon\";\nimport { loadModule, loadCSS, loadJS } from \"../../common/dom/load_resource\";\nimport { subscribeNotifications } from \"../../data/ws-notifications\";\nimport { debounce } from \"../../common/util/debounce\";\nimport { HomeAssistant } from \"../../types\";\nimport { LovelaceConfig } from \"../../data/lovelace\";\nimport { navigate } from \"../../common/navigate\";\nimport { fireEvent } from \"../../common/dom/fire_event\";\nimport { computeNotifications } from \"./common/compute-notifications\";\nimport { swapView } from \"./editor/config-util\";\n\nimport \"./components/notifications/hui-notification-drawer\";\nimport \"./components/notifications/hui-notifications-button\";\nimport \"./hui-view\";\n// Not a duplicate import, this one is for type\n// tslint:disable-next-line\nimport { HUIView } from \"./hui-view\";\nimport { createCardElement } from \"./common/create-card-element\";\nimport { showEditViewDialog } from \"./editor/view-editor/show-edit-view-dialog\";\nimport { showEditLovelaceDialog } from \"./editor/lovelace-editor/show-edit-lovelace-dialog\";\nimport { Lovelace } from \"./types\";\nimport { afterNextRender } from \"../../common/util/render-status\";\nimport { haStyle } from \"../../resources/styles\";\nimport { computeRTLDirection } from \"../../common/util/compute_rtl\";\n\n// CSS and JS should only be imported once. Modules and HTML are safe.\nconst CSS_CACHE = {};\nconst JS_CACHE = {};\n\nlet loadedUnusedEntities = false;\n\nclass HUIRoot extends LitElement {\n  @property() public hass?: HomeAssistant;\n  @property() public lovelace?: Lovelace;\n  @property() public columns?: number;\n  @property() public narrow?: boolean;\n  @property() public route?: { path: string; prefix: string };\n  @property() private _routeData?: { view: string };\n  @property() private _curView?: number | \"hass-unused-entities\";\n  @property() private _notificationsOpen = false;\n  @property() private _persistentNotifications?: Notification[];\n  private _viewCache?: { [viewId: string]: HUIView };\n\n  private _debouncedConfigChanged: () => void;\n  private _unsubNotifications?: () => void;\n\n  constructor() {\n    super();\n    // The view can trigger a re-render when it knows that certain\n    // web components have been loaded.\n    this._debouncedConfigChanged = debounce(\n      () => this._selectView(this._curView, true),\n      100,\n      false\n    );\n  }\n\n  public connectedCallback(): void {\n    super.connectedCallback();\n    this._unsubNotifications = subscribeNotifications(\n      this.hass!.connection,\n      (notifications) => {\n        this._persistentNotifications = notifications;\n      }\n    );\n  }\n\n  public disconnectedCallback(): void {\n    super.disconnectedCallback();\n    if (this._unsubNotifications) {\n      this._unsubNotifications();\n    }\n  }\n\n  protected render(): TemplateResult | void {\n    return html`\n    <app-route .route=\"${this.route}\" pattern=\"/:view\" data=\"${\n      this._routeData\n    }\" @data-changed=\"${this._routeDataChanged}\"></app-route>\n    <hui-notification-drawer\n      .hass=\"${this.hass}\"\n      .notifications=\"${this._notifications}\"\n      .open=\"${this._notificationsOpen}\"\n      @open-changed=\"${this._handleNotificationsOpenChanged}\"\n      .narrow=\"${this.narrow}\"\n    ></hui-notification-drawer>\n    <ha-app-layout id=\"layout\">\n      <app-header slot=\"header\" effects=\"waterfall\" class=\"${classMap({\n        \"edit-mode\": this._editMode,\n      })}\" fixed condenses>\n        ${\n          this._editMode\n            ? html`\n                <app-toolbar class=\"edit-mode\">\n                  <paper-icon-button\n                    icon=\"hass:close\"\n                    @click=\"${this._editModeDisable}\"\n                  ></paper-icon-button>\n                  <div main-title>\n                    ${this.config.title ||\n                      this.hass!.localize(\"ui.panel.lovelace.editor.header\")}\n                    <paper-icon-button\n                      icon=\"hass:pencil\"\n                      class=\"edit-icon\"\n                      @click=\"${this._editLovelace}\"\n                    ></paper-icon-button>\n                  </div>\n                  <paper-icon-button\n                    icon=\"hass:help-circle\"\n                    title=\"Help\"\n                    @click=\"${this._handleHelp}\"\n                  ></paper-icon-button>\n                  <paper-menu-button\n                    no-animations\n                    horizontal-align=\"right\"\n                    horizontal-offset=\"-5\"\n                  >\n                    <paper-icon-button\n                      icon=\"hass:dots-vertical\"\n                      slot=\"dropdown-trigger\"\n                    ></paper-icon-button>\n                    <paper-listbox\n                      @iron-select=\"${this._deselect}\"\n                      slot=\"dropdown-content\"\n                    >\n                      <paper-item @click=\"${this.lovelace!.enableFullEditMode}\"\n                        >${this.hass!.localize(\n                          \"ui.panel.lovelace.editor.menu.raw_editor\"\n                        )}</paper-item\n                      >\n                    </paper-listbox>\n                  </paper-menu-button>\n                </app-toolbar>\n              `\n            : /* IoB */ this._hideToolbar ? \"\" : html`\n                <app-toolbar>\n                  <!-- Disabled for IoB -->\n                  <!--ha-menu-button></ha-menu-button-->\n                  <div main-title>${this.config.title || \"Home Assistant\"}</div>\n                  <hui-notifications-button\n                    .hass=\"${this.hass}\"\n                    .opened=\"${this._notificationsOpen}\"\n                    @opened-changed=\"${this._handleNotificationsOpenChanged}\"\n                    .notifications=\"${this._notifications}\"\n                  ></hui-notifications-button>\n                  <ha-start-voice-button\n                    .hass=\"${this.hass}\"\n                  ></ha-start-voice-button>\n                  <paper-menu-button\n                    no-animations\n                    horizontal-align=\"right\"\n                    horizontal-offset=\"-5\"\n                  >\n                    <paper-icon-button\n                      icon=\"hass:dots-vertical\"\n                      slot=\"dropdown-trigger\"\n                    ></paper-icon-button>\n                    <paper-listbox\n                      @iron-select=\"${this._deselect}\"\n                      slot=\"dropdown-content\"\n                    >\n                      ${this._yamlMode\n                        ? html`\n                            <paper-item @click=\"${this._handleRefresh}\"\n                              >${this.hass!.localize(\n                                \"ui.panel.lovelace.menu.refresh\"\n                              )}</paper-item\n                            >\n                          `\n                        : \"\"}\n                      <paper-item @click=\"${this._handleUnusedEntities}\"\n                        >${this.hass!.localize(\n                          \"ui.panel.lovelace.menu.unused_entities\"\n                        )}</paper-item\n                      >\n                      <paper-item @click=\"${this._editModeEnable}\"\n                        >${this.hass!.localize(\n                          \"ui.panel.lovelace.menu.configure_ui\"\n                        )}</paper-item\n                      >\n                      <paper-item @click=\"${this._handleHelp}\"\n                        >${this.hass!.localize(\n                          \"ui.panel.lovelace.menu.help\"\n                        )}</paper-item\n                      >\n                    </paper-listbox>\n                  </paper-menu-button>\n                </app-toolbar>\n              `\n        }\n\n        ${\n          this.lovelace!.config.views.length > 1 || this._editMode\n            ? html`\n                <div sticky>\n                  <paper-tabs\n                    scrollable\n                    .selected=\"${this._curView}\"\n                    @iron-activate=\"${this._handleViewSelected}\"\n                    dir=\"${computeRTLDirection(this.hass!)}\"\n                  >\n                    ${this.lovelace!.config.views.map(\n                      (view) => html`\n                        <paper-tab>\n                          ${this._editMode\n                            ? html`\n                                <ha-paper-icon-button-arrow-prev\n                                  title=\"Move view left\"\n                                  class=\"edit-icon view\"\n                                  @click=\"${this._moveViewLeft}\"\n                                  ?disabled=\"${this._curView === 0}\"\n                                ></ha-paper-icon-button-arrow-prev>\n                              `\n                            : \"\"}\n                          ${view.icon\n                            ? html`\n                                <ha-icon\n                                  title=\"${view.title}\"\n                                  .icon=\"${view.icon}\"\n                                ></ha-icon>\n                              `\n                            : view.title || \"Unnamed view\"}\n                          ${this._editMode\n                            ? html`\n                                <ha-icon\n                                  title=\"Edit view\"\n                                  class=\"edit-icon view\"\n                                  icon=\"hass:pencil\"\n                                  @click=\"${this._editView}\"\n                                ></ha-icon>\n                                <ha-paper-icon-button-arrow-next\n                                  title=\"Move view right\"\n                                  class=\"edit-icon view\"\n                                  @click=\"${this._moveViewRight}\"\n                                  ?disabled=\"${(this._curView! as number) +\n                                    1 ===\n                                    this.lovelace!.config.views.length}\"\n                                ></ha-paper-icon-button-arrow-next>\n                              `\n                            : \"\"}\n                        </paper-tab>\n                      `\n                    )}\n                    ${this._editMode\n                      ? html`\n                          <paper-icon-button\n                            id=\"add-view\"\n                            @click=\"${this._addView}\"\n                            title=\"${this.hass!.localize(\n                              \"ui.panel.lovelace.editor.edit_view.add\"\n                            )}\"\n                            icon=\"hass:plus\"\n                          ></paper-icon-button>\n                        `\n                      : \"\"}\n                  </paper-tabs>\n                </div>\n              `\n            : \"\"\n        }\n      </app-header>\n      <div id='view' class=\"${classMap({\n        \"tabs-hidden\": this.lovelace!.config.views.length < 2,\n      })}\" @ll-rebuild='${this._debouncedConfigChanged}'></div>\n    </app-header-layout>\n    `;\n  }\n\n  static get styles(): CSSResult[] {\n    return [\n      haStyle,\n      css`\n        :host {\n          -ms-user-select: none;\n          -webkit-user-select: none;\n          -moz-user-select: none;\n          --dark-color: #455a64;\n          --text-dark-color: #fff;\n        }\n\n        ha-app-layout {\n          min-height: 100%;\n        }\n        paper-menu-button {\n          padding: 0;\n        }\n        paper-tabs {\n          margin-left: 12px;\n          --paper-tabs-selection-bar-color: var(--text-primary-color, #fff);\n          text-transform: uppercase;\n        }\n        .edit-mode {\n          background-color: var(--dark-color, #455a64);\n          color: var(--text-dark-color);\n        }\n        .edit-mode div[main-title] {\n          pointer-events: auto;\n        }\n        paper-tab.iron-selected .edit-icon {\n          display: inline-flex;\n        }\n        .edit-icon {\n          color: var(--accent-color);\n          padding-left: 8px;\n        }\n        .edit-icon[disabled] {\n          color: var(--disabled-text-color);\n        }\n        .edit-icon.view {\n          display: none;\n        }\n        #add-view {\n          position: absolute;\n          height: 44px;\n        }\n        #add-view ha-icon {\n          background-color: var(--accent-color);\n          border-radius: 5px;\n          margin-top: 4px;\n        }\n        app-toolbar a {\n          color: var(--text-primary-color, white);\n        }\n        mwc-button.warning:not([disabled]) {\n          color: var(--google-red-500);\n        }\n        #view {\n          min-height: calc(100vh - 112px);\n          /**\n         * Since we only set min-height, if child nodes need percentage\n         * heights they must use absolute positioning so we need relative\n         * positioning here.\n         *\n         * https://www.w3.org/TR/CSS2/visudet.html#the-height-property\n         */\n          position: relative;\n        }\n        #view.tabs-hidden {\n          min-height: calc(100vh - 64px);\n        }\n        paper-item {\n          cursor: pointer;\n        }\n      `,\n    ];\n  }\n\n  protected updated(changedProperties: PropertyValues): void {\n    super.updated(changedProperties);\n\n    const view = this._viewRoot;\n    const huiView = view.lastChild as HUIView;\n\n    if (changedProperties.has(\"columns\") && huiView) {\n      huiView.columns = this.columns;\n    }\n\n    if (changedProperties.has(\"hass\") && huiView) {\n      huiView.hass = this.hass;\n    }\n\n    let newSelectView;\n    let force = false;\n\n    if (changedProperties.has(\"route\")) {\n      const views = this.config && this.config.views;\n      if (\n        this.route!.path === \"\" &&\n        this.route!.prefix === \"/lovelace\" &&\n        views\n      ) {\n        navigate(this, `/lovelace/${views[0].path || 0}`, true);\n        newSelectView = 0;\n      } else if (this._routeData!.view === \"hass-unused-entities\") {\n        newSelectView = \"hass-unused-entities\";\n      } else if (this._routeData!.view) {\n        const selectedView = this._routeData!.view;\n        const selectedViewInt = parseInt(selectedView, 10);\n        let index = 0;\n        for (let i = 0; i < views.length; i++) {\n          if (views[i].path === selectedView || i === selectedViewInt) {\n            index = i;\n            break;\n          }\n        }\n        newSelectView = index;\n      }\n    }\n\n    if (changedProperties.has(\"lovelace\")) {\n      const oldLovelace = changedProperties.get(\"lovelace\") as\n        | Lovelace\n        | undefined;\n\n      if (!oldLovelace || oldLovelace.config !== this.lovelace!.config) {\n        this._loadResources(this.lovelace!.config.resources || []);\n        // On config change, recreate the current view from scratch.\n        force = true;\n        // Recalculate to see if we need to adjust content area for tab bar\n        fireEvent(this, \"iron-resize\");\n      }\n\n      if (!oldLovelace || oldLovelace.editMode !== this.lovelace!.editMode) {\n        // On edit mode change, recreate the current view from scratch\n        force = true;\n        // Recalculate to see if we need to adjust content area for tab bar\n        fireEvent(this, \"iron-resize\");\n      }\n    }\n\n    if (newSelectView !== undefined || force) {\n      if (force && newSelectView === undefined) {\n        newSelectView = this._curView;\n      }\n      this._selectView(newSelectView, force);\n    }\n  }\n\n  private get _notifications() {\n    return this._updateNotifications(\n      this.hass!.states,\n      this._persistentNotifications! || []\n    );\n  }\n  private get _hideToolbar(): boolean {\n    return (\n      this.config.hideToolbar === true &&\n      window.location.search.indexOf(\"toolbar\") === -1\n    );\n  }\n\n  private get config(): LovelaceConfig {\n    return this.lovelace!.config;\n  }\n\n  private get _yamlMode(): boolean {\n    return this.lovelace!.mode === \"yaml\";\n  }\n\n  private get _editMode() {\n    return this.lovelace!.editMode;\n  }\n\n  private get _layout(): any {\n    return this.shadowRoot!.getElementById(\"layout\");\n  }\n\n  private get _viewRoot(): HTMLDivElement {\n    return this.shadowRoot!.getElementById(\"view\") as HTMLDivElement;\n  }\n\n  private _routeDataChanged(ev): void {\n    this._routeData = ev.detail.value;\n  }\n\n  private _handleNotificationsOpenChanged(ev): void {\n    this._notificationsOpen = ev.detail.value;\n  }\n\n  private _updateNotifications(\n    states: HassEntities,\n    persistent: unknown[]\n  ): unknown[] {\n    const configurator = computeNotifications(states);\n    return persistent.concat(configurator);\n  }\n\n  private _handleRefresh(): void {\n    fireEvent(this, \"config-refresh\");\n  }\n\n  private _handleUnusedEntities(): void {\n    navigate(this, `/lovelace/hass-unused-entities`);\n  }\n\n  private _deselect(ev): void {\n    ev.target.selected = null;\n  }\n\n  private _handleHelp(): void {\n    // window.open(\"https://www.home-assistant.io/lovelace/\", \"_blank\");\n    // IoB\n    window.open(\"https://www.iobroker.net/#en/adapters/adapterref/iobroker.lovelace/README.md\", \"_blank\");\n  }\n\n  private _editModeEnable(): void {\n    if (this._yamlMode) {\n      window.alert(\"The edit UI is not available when in YAML mode.\");\n      return;\n    }\n    this.lovelace!.setEditMode(true);\n    if (this.config.views.length < 2) {\n      fireEvent(this, \"iron-resize\");\n    }\n  }\n\n  private _editModeDisable(): void {\n    this.lovelace!.setEditMode(false);\n    if (this.config.views.length < 2) {\n      fireEvent(this, \"iron-resize\");\n    }\n  }\n\n  private _editLovelace() {\n    showEditLovelaceDialog(this, this.lovelace!);\n  }\n\n  private _editView() {\n    showEditViewDialog(this, {\n      lovelace: this.lovelace!,\n      viewIndex: this._curView as number,\n    });\n  }\n\n  private _moveViewLeft() {\n    const lovelace = this.lovelace!;\n    const oldIndex = this._curView as number;\n    const newIndex = (this._curView as number) - 1;\n    this._curView = newIndex;\n    lovelace.saveConfig(swapView(lovelace.config, oldIndex, newIndex));\n  }\n\n  private _moveViewRight() {\n    const lovelace = this.lovelace!;\n    const oldIndex = this._curView as number;\n    const newIndex = (this._curView as number) + 1;\n    this._curView = newIndex;\n    lovelace.saveConfig(swapView(lovelace.config, oldIndex, newIndex));\n  }\n\n  private _addView() {\n    showEditViewDialog(this, {\n      lovelace: this.lovelace!,\n    });\n  }\n\n  private _handleViewSelected(ev) {\n    const viewIndex = ev.detail.selected as number;\n\n    if (viewIndex !== this._curView) {\n      const path = this.config.views[viewIndex].path || viewIndex;\n      navigate(this, `/lovelace/${path}`);\n    }\n    scrollToTarget(this, this._layout.header.scrollTarget);\n  }\n\n  private async _selectView(\n    viewIndex: HUIRoot[\"_curView\"],\n    force: boolean\n  ): Promise<void> {\n    if (!force && this._curView === viewIndex) {\n      return;\n    }\n\n    viewIndex = viewIndex === undefined ? 0 : viewIndex;\n\n    this._curView = viewIndex;\n\n    if (force) {\n      this._viewCache = {};\n    }\n\n    // Recreate a new element to clear the applied themes.\n    const root = this._viewRoot;\n\n    if (root.lastChild) {\n      root.removeChild(root.lastChild);\n    }\n\n    if (viewIndex === \"hass-unused-entities\") {\n      if (!loadedUnusedEntities) {\n        loadedUnusedEntities = true;\n        await import(/* webpackChunkName: \"hui-unused-entities\" */ \"./hui-unused-entities\");\n      }\n      const unusedEntities = document.createElement(\"hui-unused-entities\");\n      unusedEntities.setConfig(this.config);\n      unusedEntities.hass = this.hass!;\n      root.style.background = this.config.background || \"\";\n      root.appendChild(unusedEntities);\n      return;\n    }\n\n    let view;\n    const viewConfig = this.config.views[viewIndex];\n\n    if (!viewConfig) {\n      this._editModeEnable();\n      return;\n    }\n\n    if (!force && this._viewCache![viewIndex]) {\n      view = this._viewCache![viewIndex];\n    } else {\n      await new Promise((resolve) => afterNextRender(resolve));\n\n      if (viewConfig.panel && viewConfig.cards && viewConfig.cards.length > 0) {\n        view = createCardElement(viewConfig.cards[0]);\n        view.isPanel = true;\n      } else {\n        view = document.createElement(\"hui-view\");\n        view.lovelace = this.lovelace;\n        view.columns = this.columns;\n        view.index = viewIndex;\n      }\n      this._viewCache![viewIndex] = view;\n    }\n\n    view.hass = this.hass;\n    root.style.background =\n      viewConfig.background || this.config.background || \"\";\n    root.appendChild(view);\n  }\n\n  private _loadResources(resources) {\n    resources.forEach((resource) => {\n      switch (resource.type) {\n        case \"css\":\n          if (resource.url in CSS_CACHE) {\n            break;\n          }\n          CSS_CACHE[resource.url] = loadCSS(resource.url);\n          break;\n\n        case \"js\":\n          if (resource.url in JS_CACHE) {\n            break;\n          }\n          JS_CACHE[resource.url] = loadJS(resource.url);\n          break;\n\n        case \"module\":\n          loadModule(resource.url);\n          break;\n\n        case \"html\":\n          import(/* webpackChunkName: \"import-href-polyfill\" */ \"../../resources/html-import/import-href\").then(\n            ({ importHref }) => importHref(resource.url)\n          );\n          break;\n\n        default:\n          // tslint:disable-next-line\n          console.warn(`Unknown resource type specified: ${resource.type}`);\n      }\n    });\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-root\": HUIRoot;\n  }\n}\n\ncustomElements.define(\"hui-root\", HUIRoot);\n","import {\n  html,\n  LitElement,\n  PropertyValues,\n  property,\n  PropertyDeclarations,\n  TemplateResult,\n} from \"lit-element\";\n\nimport \"../../components/entity/ha-state-label-badge\";\n// This one is for types\n// tslint:disable-next-line\nimport { HaStateLabelBadge } from \"../../components/entity/ha-state-label-badge\";\n\nimport applyThemesOnElement from \"../../common/dom/apply_themes_on_element\";\n\nimport { LovelaceViewConfig, LovelaceCardConfig } from \"../../data/lovelace\";\nimport { HomeAssistant } from \"../../types\";\nimport { classMap } from \"lit-html/directives/class-map\";\n\nimport { Lovelace, LovelaceCard } from \"./types\";\nimport { createCardElement } from \"./common/create-card-element\";\nimport { computeCardSize } from \"./common/compute-card-size\";\nimport { showEditCardDialog } from \"./editor/card-editor/show-edit-card-dialog\";\nimport { HuiErrorCard } from \"./cards/hui-error-card\";\n\nimport { computeRTL } from \"../../common/util/compute_rtl\";\n\nlet editCodeLoaded = false;\n\n// Find column with < 5 entities, else column with lowest count\nconst getColumnIndex = (columnEntityCount: number[], size: number) => {\n  let minIndex = 0;\n  for (let i = 0; i < columnEntityCount.length; i++) {\n    if (columnEntityCount[i] < 5) {\n      minIndex = i;\n      break;\n    }\n    if (columnEntityCount[i] < columnEntityCount[minIndex]) {\n      minIndex = i;\n    }\n  }\n\n  columnEntityCount[minIndex] += size;\n\n  return minIndex;\n};\n\nexport class HUIView extends LitElement {\n  @property() public hass?: HomeAssistant;\n  @property() public lovelace?: Lovelace;\n  @property() public columns?: number;\n  @property() public index?: number;\n  private _cards: Array<LovelaceCard | HuiErrorCard>;\n  private _badges: Array<{ element: HaStateLabelBadge; entityId: string }>;\n\n  static get properties(): PropertyDeclarations {\n    return {\n      hass: {},\n      lovelace: {},\n      columns: {},\n      index: {},\n      _cards: {},\n      _badges: {},\n    };\n  }\n\n  constructor() {\n    super();\n    this._cards = [];\n    this._badges = [];\n  }\n\n  // Public to make demo happy\n  public createCardElement(cardConfig: LovelaceCardConfig) {\n    const element = createCardElement(cardConfig) as LovelaceCard;\n    element.hass = this.hass;\n    element.addEventListener(\n      \"ll-rebuild\",\n      (ev) => {\n        // In edit mode let it go to hui-root and rebuild whole view.\n        if (!this.lovelace!.editMode) {\n          ev.stopPropagation();\n          this._rebuildCard(element, cardConfig);\n        }\n      },\n      { once: true }\n    );\n    return element;\n  }\n\n  protected render(): TemplateResult | void {\n    return html`\n      ${this.renderStyles()}\n      <div id=\"badges\"></div>\n      <div id=\"columns\"></div>\n      ${this.lovelace!.editMode\n        ? html`\n            <paper-fab\n              elevated=\"2\"\n              icon=\"hass:plus\"\n              title=\"${this.hass!.localize(\n                \"ui.panel.lovelace.editor.edit_card.add\"\n              )}\"\n              @click=\"${this._addCard}\"\n              class=\"${classMap({\n                rtl: computeRTL(this.hass!),\n              })}\"\n            ></paper-fab>\n          `\n        : \"\"}\n    `;\n  }\n\n  protected renderStyles(): TemplateResult {\n    return html`\n      <style>\n        :host {\n          display: block;\n          padding: 4px 4px 0;\n          transform: translateZ(0);\n          position: relative;\n          min-height: calc(100vh - 155px);\n        }\n\n        #badges {\n          margin: 8px 16px;\n          font-size: 85%;\n          text-align: center;\n        }\n\n        #columns {\n          display: flex;\n          flex-direction: row;\n          justify-content: center;\n        }\n\n        .column {\n          flex-basis: 0;\n          flex-grow: 1;\n          max-width: 500px;\n          overflow-x: hidden;\n        }\n\n        .column > * {\n          display: block;\n          margin: 4px 4px 8px;\n        }\n\n        paper-fab {\n          position: sticky;\n          float: right;\n          bottom: 16px;\n          right: 16px;\n          z-index: 1;\n        }\n\n        paper-fab.rtl {\n          float: left;\n          right: auto;\n          left: 16px;\n        }\n\n        @media (max-width: 500px) {\n          :host {\n            padding-left: 0;\n            padding-right: 0;\n          }\n\n          .column > * {\n            margin-left: 0;\n            margin-right: 0;\n          }\n        }\n\n        @media (max-width: 599px) {\n          .column {\n            max-width: 600px;\n          }\n        }\n      </style>\n    `;\n  }\n\n  protected updated(changedProperties: PropertyValues): void {\n    super.updated(changedProperties);\n\n    const lovelace = this.lovelace!;\n\n    if (lovelace.editMode && !editCodeLoaded) {\n      editCodeLoaded = true;\n      import(/* webpackChunkName: \"hui-view-editable\" */ \"./hui-view-editable\");\n    }\n\n    let editModeChanged = false;\n    let configChanged = false;\n\n    if (changedProperties.has(\"lovelace\")) {\n      const oldLovelace = changedProperties.get(\"lovelace\") as Lovelace;\n      editModeChanged =\n        !oldLovelace || lovelace.editMode !== oldLovelace.editMode;\n      configChanged = !oldLovelace || lovelace.config !== oldLovelace.config;\n    }\n\n    if (configChanged) {\n      this._createBadges(lovelace.config.views[this.index!]);\n    } else if (changedProperties.has(\"hass\")) {\n      this._badges.forEach((badge) => {\n        const { element, entityId } = badge;\n        element.hass = this.hass!;\n        element.state = this.hass!.states[entityId];\n      });\n    }\n\n    if (configChanged || editModeChanged || changedProperties.has(\"columns\")) {\n      this._createCards(lovelace.config.views[this.index!]);\n    } else if (changedProperties.has(\"hass\")) {\n      this._cards.forEach((element) => {\n        element.hass = this.hass;\n      });\n    }\n  }\n\n  private _addCard(): void {\n    showEditCardDialog(this, {\n      lovelace: this.lovelace!,\n      path: [this.index!],\n    });\n  }\n\n  private _createBadges(config: LovelaceViewConfig): void {\n    const root = this.shadowRoot!.getElementById(\"badges\")!;\n\n    while (root.lastChild) {\n      root.removeChild(root.lastChild);\n    }\n\n    if (!config || !config.badges || !Array.isArray(config.badges)) {\n      root.style.display = \"none\";\n      this._badges = [];\n      return;\n    }\n\n    const elements: HUIView[\"_badges\"] = [];\n    for (const entityId of config.badges) {\n      const element = document.createElement(\"ha-state-label-badge\");\n      element.hass = this.hass;\n      element.state = this.hass!.states[entityId];\n      elements.push({ element, entityId });\n      root.appendChild(element);\n    }\n    this._badges = elements;\n    root.style.display = elements.length > 0 ? \"block\" : \"none\";\n  }\n\n  private _createCards(config: LovelaceViewConfig): void {\n    const root = this.shadowRoot!.getElementById(\"columns\")!;\n\n    while (root.lastChild) {\n      root.removeChild(root.lastChild);\n    }\n\n    if (!config || !config.cards || !Array.isArray(config.cards)) {\n      this._cards = [];\n      return;\n    }\n\n    const elements: LovelaceCard[] = [];\n    const elementsToAppend: HTMLElement[] = [];\n    config.cards.forEach((cardConfig, cardIndex) => {\n      const element = this.createCardElement(cardConfig);\n      elements.push(element);\n\n      if (!this.lovelace!.editMode) {\n        elementsToAppend.push(element);\n        return;\n      }\n\n      const wrapper = document.createElement(\"hui-card-options\");\n      wrapper.hass = this.hass;\n      wrapper.lovelace = this.lovelace;\n      wrapper.path = [this.index!, cardIndex];\n      wrapper.appendChild(element);\n      elementsToAppend.push(wrapper);\n    });\n\n    let columns: HTMLElement[][] = [];\n    const columnEntityCount: number[] = [];\n    for (let i = 0; i < this.columns!; i++) {\n      columns.push([]);\n      columnEntityCount.push(0);\n    }\n\n    elements.forEach((el, index) => {\n      const cardSize = computeCardSize(el);\n      // Element to append might be the wrapped card when we're editing.\n      columns[getColumnIndex(columnEntityCount, cardSize)].push(\n        elementsToAppend[index]\n      );\n    });\n\n    // Remove empty columns\n    columns = columns.filter((val) => val.length > 0);\n\n    columns.forEach((column) => {\n      const columnEl = document.createElement(\"div\");\n      columnEl.classList.add(\"column\");\n      column.forEach((el) => columnEl.appendChild(el));\n      root.appendChild(columnEl);\n    });\n\n    this._cards = elements;\n\n    if (\"theme\" in config) {\n      applyThemesOnElement(root, this.hass!.themes, config.theme);\n    }\n  }\n\n  private _rebuildCard(\n    cardElToReplace: LovelaceCard,\n    config: LovelaceCardConfig\n  ): void {\n    const newCardEl = this.createCardElement(config);\n    cardElToReplace.parentElement!.replaceChild(newCardEl, cardElToReplace);\n    this._cards = this._cards!.map((curCardEl) =>\n      curCardEl === cardElToReplace ? newCardEl : curCardEl\n    );\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-view\": HUIView;\n  }\n}\n\ncustomElements.define(\"hui-view\", HUIView);\n","import {\n  html,\n  LitElement,\n  TemplateResult,\n  customElement,\n  property,\n  css,\n  CSSResult,\n} from \"lit-element\";\nimport \"@material/mwc-button\";\n\nimport \"../../../components/ha-icon\";\n\nimport { callService } from \"../common/call-service\";\nimport { EntityRow, CallServiceConfig } from \"../entity-rows/types\";\nimport { HomeAssistant } from \"../../../types\";\n\n@customElement(\"hui-call-service-row\")\nclass HuiCallServiceRow extends LitElement implements EntityRow {\n  public hass?: HomeAssistant;\n\n  @property() private _config?: CallServiceConfig;\n\n  public setConfig(config: CallServiceConfig): void {\n    if (!config || !config.name || !config.service) {\n      throw new Error(\"Error in card configuration.\");\n    }\n\n    this._config = { icon: \"hass:remote\", action_name: \"Run\", ...config };\n  }\n\n  protected render(): TemplateResult | void {\n    if (!this._config) {\n      return html``;\n    }\n\n    return html`\n      <ha-icon .icon=\"${this._config.icon}\"></ha-icon>\n      <div class=\"flex\">\n        <div>${this._config.name}</div>\n        <mwc-button @click=\"${this._callService}\"\n          >${this._config.action_name}</mwc-button\n        >\n      </div>\n    `;\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      :host {\n        display: flex;\n        align-items: center;\n      }\n      ha-icon {\n        padding: 8px;\n        color: var(--paper-item-icon-color);\n      }\n      .flex {\n        flex: 1;\n        overflow: hidden;\n        margin-left: 16px;\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n      }\n      .flex div {\n        white-space: nowrap;\n        overflow: hidden;\n        text-overflow: ellipsis;\n      }\n      mwc-button {\n        margin-right: -0.57em;\n      }\n    `;\n  }\n\n  private _callService() {\n    callService(this._config!, this.hass!);\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-call-service-row\": HuiCallServiceRow;\n  }\n}\n","import {\n  html,\n  LitElement,\n  TemplateResult,\n  customElement,\n  property,\n} from \"lit-element\";\n\nimport { EntityRow, DividerConfig } from \"../entity-rows/types\";\nimport { HomeAssistant } from \"../../../types\";\n\n@customElement(\"hui-divider-row\")\nclass HuiDividerRow extends LitElement implements EntityRow {\n  public hass?: HomeAssistant;\n\n  @property() private _config?: DividerConfig;\n\n  public setConfig(config): void {\n    if (!config) {\n      throw new Error(\"Error in card configuration.\");\n    }\n\n    this._config = {\n      style: {\n        height: \"1px\",\n        \"background-color\": \"var(--secondary-text-color)\",\n      },\n      ...config,\n    };\n  }\n\n  protected render(): TemplateResult | void {\n    if (!this._config) {\n      return html``;\n    }\n\n    const el = document.createElement(\"div\");\n\n    Object.keys(this._config.style).forEach((prop) => {\n      el.style.setProperty(prop, this._config!.style[prop]);\n    });\n\n    return html`\n      ${el}\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-divider-row\": HuiDividerRow;\n  }\n}\n","import {\n  html,\n  LitElement,\n  TemplateResult,\n  customElement,\n  property,\n  css,\n  CSSResult,\n} from \"lit-element\";\n\nimport { EntityRow, SectionConfig } from \"../entity-rows/types\";\nimport { HomeAssistant } from \"../../../types\";\n\nimport \"../../../components/ha-icon\";\n\n@customElement(\"hui-section-row\")\nclass HuiSectionRow extends LitElement implements EntityRow {\n  public hass?: HomeAssistant;\n\n  @property() private _config?: SectionConfig;\n\n  public setConfig(config: SectionConfig): void {\n    if (!config) {\n      throw new Error(\"Error in card configuration.\");\n    }\n\n    this._config = config;\n  }\n\n  protected render(): TemplateResult | void {\n    if (!this._config) {\n      return html``;\n    }\n\n    return html`\n      <div class=\"divider\"></div>\n      ${this._config.label\n        ? html`\n            <div class=\"label\">${this._config.label}</div>\n          `\n        : html``}\n    `;\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      .label {\n        color: var(--primary-color);\n        margin-left: 8px;\n        margin-bottom: 16px;\n        margin-top: 16px;\n      }\n      .divider {\n        height: 1px;\n        background-color: var(--secondary-text-color);\n        opacity: 0.25;\n        margin-left: -16px;\n        margin-right: -16px;\n        margin-top: 8px;\n      }\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-section-row\": HuiSectionRow;\n  }\n}\n","import {\n  html,\n  LitElement,\n  TemplateResult,\n  customElement,\n  property,\n  css,\n  CSSResult,\n} from \"lit-element\";\n\nimport { EntityRow, WeblinkConfig } from \"../entity-rows/types\";\nimport { HomeAssistant } from \"../../../types\";\n\nimport \"../../../components/ha-icon\";\n\n@customElement(\"hui-weblink-row\")\nclass HuiWeblinkRow extends LitElement implements EntityRow {\n  public hass?: HomeAssistant;\n\n  @property() private _config?: WeblinkConfig;\n\n  public setConfig(config: WeblinkConfig): void {\n    if (!config || !config.url) {\n      throw new Error(\"Invalid Configuration: 'url' required\");\n    }\n\n    this._config = {\n      icon: \"hass:link\",\n      name: config.url,\n      ...config,\n    };\n  }\n\n  protected render(): TemplateResult | void {\n    if (!this._config) {\n      return html``;\n    }\n\n    return html`\n      <a href=\"${this._config.url}\" target=\"_blank\">\n        <ha-icon .icon=\"${this._config.icon}\"></ha-icon>\n        <div>${this._config.name}</div>\n      </a>\n    `;\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      a {\n        display: flex;\n        align-items: center;\n        color: var(--primary-color);\n      }\n      ha-icon {\n        padding: 8px;\n        color: var(--paper-item-icon-color);\n      }\n      div {\n        flex: 1;\n        white-space: nowrap;\n        overflow: hidden;\n        text-overflow: ellipsis;\n        margin-left: 16px;\n      }\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-weblink-row\": HuiWeblinkRow;\n  }\n}\n","import \"@polymer/iron-image/iron-image\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport { EventsMixin } from \"../../mixins/events-mixin\";\n\n/*\n * @appliesMixin EventsMixin\n */\nclass HaEntityMarker extends EventsMixin(PolymerElement) {\n  static get template() {\n    return html`\n      <style include=\"iron-positioning\"></style>\n      <style>\n        .marker {\n          vertical-align: top;\n          position: relative;\n          display: block;\n          margin: 0 auto;\n          width: 2.5em;\n          text-align: center;\n          height: 2.5em;\n          line-height: 2.5em;\n          font-size: 1.5em;\n          border-radius: 50%;\n          border: 0.1em solid\n            var(--ha-marker-color, var(--default-primary-color));\n          color: rgb(76, 76, 76);\n          background-color: white;\n        }\n        iron-image {\n          border-radius: 50%;\n        }\n      </style>\n\n      <div class=\"marker\">\n        <template is=\"dom-if\" if=\"[[entityName]]\"\n          >[[entityName]]</template\n        >\n        <template is=\"dom-if\" if=\"[[entityPicture]]\">\n          <iron-image\n            sizing=\"cover\"\n            class=\"fit\"\n            src=\"[[entityPicture]]\"\n          ></iron-image>\n        </template>\n      </div>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: {\n        type: Object,\n      },\n\n      entityId: {\n        type: String,\n        value: \"\",\n      },\n\n      entityName: {\n        type: String,\n        value: null,\n      },\n\n      entityPicture: {\n        type: String,\n        value: null,\n      },\n    };\n  }\n\n  ready() {\n    super.ready();\n    this.addEventListener(\"click\", (ev) => this.badgeTap(ev));\n  }\n\n  badgeTap(ev) {\n    ev.stopPropagation();\n    if (this.entityId) {\n      this.fire(\"hass-more-info\", { entityId: this.entityId });\n    }\n  }\n}\n\ncustomElements.define(\"ha-entity-marker\", HaEntityMarker);\n","import { TemplateResult } from \"lit-element\";\n\ntype LoadedRoundSlider = Promise<{\n  roundSliderStyle: TemplateResult;\n  jQuery: any;\n}>;\n\nlet loaded: LoadedRoundSlider;\n\nexport const loadRoundslider = async (): LoadedRoundSlider => {\n  if (!loaded) {\n    loaded = import(/* webpackChunkName: \"jquery-roundslider\" */ \"./jquery.roundslider\");\n  }\n  return loaded;\n};\n"],"sourceRoot":""}