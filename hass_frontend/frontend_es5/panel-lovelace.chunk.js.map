{"version":3,"sources":["webpack:///./src/common/dom/load_resource.ts","webpack:///./src/common/dom/scroll-to-target.ts","webpack:///./src/common/dom/setup-leaflet-map.ts","webpack:///./src/common/entity/valid_entity_id.ts","webpack:///./src/common/string/compare.ts","webpack:///./src/common/util/parse-aspect-ratio.ts","webpack:///./src/common/util/render-status.ts","webpack:///./src/common/util/subscribe-one.ts","webpack:///./src/components/buttons/ha-call-service-button.js","webpack:///./src/components/ha-date-input.ts","webpack:///./src/components/ha-paper-icon-button-arrow-next.ts","webpack:///./src/components/ha-paper-icon-button-next.ts","webpack:///./src/data/alarm_control_panel.ts","webpack:///./src/data/area_registry.ts","webpack:///./src/data/device_registry.ts","webpack:///./src/data/entity.ts","webpack:///./src/data/input_datetime.ts","webpack:///./src/data/input_text.ts","webpack:///./src/data/lovelace.ts","webpack:///./src/data/shopping-list.ts","webpack:///./src/data/ws-notifications.ts","webpack:///./src/panels/lovelace/cards/hui-alarm-panel-card.ts","webpack:///./src/panels/lovelace/cards/hui-conditional-card.ts","webpack:///./src/panels/lovelace/cards/hui-entities-card.ts","webpack:///./src/panels/lovelace/cards/hui-entity-button-card.ts","webpack:///./src/panels/lovelace/cards/hui-entity-filter-card.ts","webpack:///./src/panels/lovelace/cards/hui-error-card.ts","webpack:///./src/panels/lovelace/cards/hui-gauge-card.ts","webpack:///./src/panels/lovelace/cards/hui-glance-card.ts","webpack:///./src/panels/lovelace/cards/hui-history-graph-card.js","webpack:///./src/panels/lovelace/cards/hui-horizontal-stack-card.ts","webpack:///./src/panels/lovelace/cards/hui-iframe-card.ts","webpack:///./src/panels/lovelace/cards/hui-legacy-wrapper-card.js","webpack:///./src/panels/lovelace/cards/hui-light-card.ts","webpack:///./src/panels/lovelace/cards/hui-map-card.ts","webpack:///./src/panels/lovelace/cards/hui-markdown-card.ts","webpack:///./src/panels/lovelace/cards/hui-media-control-card.js","webpack:///./src/panels/lovelace/cards/hui-picture-card.ts","webpack:///./src/panels/lovelace/cards/hui-picture-elements-card.ts","webpack:///./src/panels/lovelace/cards/hui-picture-entity-card.ts","webpack:///./src/panels/lovelace/cards/hui-picture-glance-card.ts","webpack:///./src/panels/lovelace/cards/hui-plant-status-card.ts","webpack:///./src/panels/lovelace/cards/hui-sensor-card.ts","webpack:///./src/panels/lovelace/cards/hui-shopping-list-card.ts","webpack:///./src/panels/lovelace/cards/hui-stack-card.ts","webpack:///./src/panels/lovelace/cards/hui-thermostat-card.ts","webpack:///./src/panels/lovelace/cards/hui-vertical-stack-card.ts","webpack:///./src/panels/lovelace/cards/hui-weather-forecast-card.js","webpack:///./src/panels/lovelace/cards/picture-elements/create-styled-hui-element.ts","webpack:///./src/panels/lovelace/common/call-service.ts","webpack:///./src/panels/lovelace/common/compute-card-size.ts","webpack:///./src/panels/lovelace/common/compute-notifications.ts","webpack:///./src/panels/lovelace/common/compute-tooltip.ts","webpack:///./src/panels/lovelace/common/create-card-element.ts","webpack:///./src/panels/lovelace/common/create-hui-element.ts","webpack:///./src/panels/lovelace/common/create-row-element.ts","webpack:///./src/panels/lovelace/common/directives/long-press-directive.ts","webpack:///./src/panels/lovelace/common/entity/toggle-entity.ts","webpack:///./src/panels/lovelace/common/entity/turn-on-off-entities.ts","webpack:///./src/panels/lovelace/common/entity/turn-on-off-entity.ts","webpack:///./src/panels/lovelace/common/generate-lovelace-config.ts","webpack:///./src/panels/lovelace/common/handle-click.ts","webpack:///./src/panels/lovelace/common/has-changed.ts","webpack:///./src/panels/lovelace/common/process-config-entities.ts","webpack:///./src/panels/lovelace/common/validate-condition.ts","webpack:///./src/panels/lovelace/components/hui-entities-toggle.ts","webpack:///./src/panels/lovelace/components/hui-generic-entity-row.ts","webpack:///./src/panels/lovelace/components/hui-image.ts","webpack:///./src/panels/lovelace/components/hui-timestamp-display.ts","webpack:///./src/panels/lovelace/components/hui-warning-element.ts","webpack:///./src/panels/lovelace/components/hui-warning.ts","webpack:///./src/panels/lovelace/components/notifications/hui-configurator-notification-item.ts","webpack:///./src/panels/lovelace/components/notifications/hui-notification-drawer.js","webpack:///./src/panels/lovelace/components/notifications/hui-notification-item-template.ts","webpack:///./src/panels/lovelace/components/notifications/hui-notification-item.ts","webpack:///./src/panels/lovelace/components/notifications/hui-notifications-button.ts","webpack:///./src/panels/lovelace/components/notifications/hui-persistent-notification-item.ts","webpack:///./src/panels/lovelace/editor/card-editor/show-edit-card-dialog.ts","webpack:///./src/panels/lovelace/editor/config-util.ts","webpack:///./src/panels/lovelace/editor/lovelace-editor/show-edit-lovelace-dialog.ts","webpack:///./src/panels/lovelace/editor/show-save-config-dialog.ts","webpack:///./src/panels/lovelace/editor/view-editor/show-edit-view-dialog.ts","webpack:///./src/panels/lovelace/elements/hui-conditional-element.ts","webpack:///./src/panels/lovelace/elements/hui-icon-element.ts","webpack:///./src/panels/lovelace/elements/hui-image-element.ts","webpack:///./src/panels/lovelace/elements/hui-service-button-element.ts","webpack:///./src/panels/lovelace/elements/hui-state-badge-element.ts","webpack:///./src/panels/lovelace/elements/hui-state-icon-element.ts","webpack:///./src/panels/lovelace/elements/hui-state-label-element.ts","webpack:///./src/panels/lovelace/entity-rows/hui-climate-entity-row.ts","webpack:///./src/panels/lovelace/entity-rows/hui-cover-entity-row.ts","webpack:///./src/panels/lovelace/entity-rows/hui-group-entity-row.ts","webpack:///./src/panels/lovelace/entity-rows/hui-input-datetime-entity-row.ts","webpack:///./src/panels/lovelace/entity-rows/hui-input-number-entity-row.ts","webpack:///./src/panels/lovelace/entity-rows/hui-input-select-entity-row.ts","webpack:///./src/panels/lovelace/entity-rows/hui-input-text-entity-row.ts","webpack:///./src/panels/lovelace/entity-rows/hui-lock-entity-row.ts","webpack:///./src/panels/lovelace/entity-rows/hui-media-player-entity-row.ts","webpack:///./src/panels/lovelace/entity-rows/hui-scene-entity-row.ts","webpack:///./src/panels/lovelace/entity-rows/hui-script-entity-row.ts","webpack:///./src/panels/lovelace/entity-rows/hui-sensor-entity-row.ts","webpack:///./src/panels/lovelace/entity-rows/hui-text-entity-row.ts","webpack:///./src/panels/lovelace/entity-rows/hui-timer-entity-row.ts","webpack:///./src/panels/lovelace/entity-rows/hui-toggle-entity-row.ts","webpack:///./src/panels/lovelace/ha-panel-lovelace.ts","webpack:///./src/panels/lovelace/hui-root.ts","webpack:///./src/panels/lovelace/hui-view.ts","webpack:///./src/panels/lovelace/special-rows/hui-call-service-row.ts","webpack:///./src/panels/lovelace/special-rows/hui-divider-row.ts","webpack:///./src/panels/lovelace/special-rows/hui-section-row.ts","webpack:///./src/panels/lovelace/special-rows/hui-weblink-row.ts","webpack:///./src/panels/map/ha-entity-marker.js","webpack:///./src/resources/jquery.roundslider.ondemand.ts"],"names":["_load","tag","url","type","Promise","resolve","reject","element","document","createElement","attr","parent","onload","onerror","async","rel","appendChild","loadCSS","loadJS","loadImg","loadModule","scrollToTarget","target","top","scroller","easingFn","easeOutQuad","t","b","c","d","animationId","Math","random","duration","startTime","Date","now","currentScrollTop","scrollTop","deltaScrollTop","_currentAnimationId","updateFrame","elapsedTime","requestAnimationFrame","bind","call","setupLeafletMap","mapElement","parentNode","Error","Leaflet","Icon","Default","imagePath","map","style","setAttribute","setView","tileLayer","Browser","retina","attribution","subdomains","minZoom","maxZoom","addTo","validEntityId","entityId","test","compare","a","caseInsensitiveCompare","toLowerCase","parseOrThrow","num","parsed","parseFloat","isNaN","parseAspectRatio","input","endsWith","w","h","substr","length","arr","replace","split","err","afterNextRender","cb","setTimeout","subscribeOne","conn","subscribe","unsub","items","HaCallServiceButton","progress","el","eventData","domain","service","serviceData","hass","callService","then","$","actionSuccess","success","actionError","fire","html","Object","Boolean","value","String","EventsMixin","PolymerElement","customElements","define","HaDateInput","customElement","property","css","year","_formatYear","disabled","month","_formatMonth","day","_formatDay","yearElement","shadowRoot","getElementById","monthElement","slice","dayElement","LitElement","paperIconButtonClass","get","HaPaperIconButtonArrowNext","icon","window","getComputedStyle","direction","HaPaperIconButtonNext","FORMAT_TEXT","FORMAT_NUMBER","callAlarmAction","entity","action","code","entity_id","createAreaRegistryEntry","values","callWS","updateAreaRegistryEntry","areaId","updates","area_id","deleteAreaRegistryEntry","fetchAreaRegistry","sendMessagePromise","areas","sort","ent1","ent2","name","subscribeAreaRegistryUpdates","store","subscribeEvents","debounce","setState","subscribeAreaRegistry","onChange","createCollection","updateDeviceRegistryEntry","deviceId","device_id","fetchDeviceRegistry","subscribeDeviceRegistryUpdates","devices","subscribeDeviceRegistry","UNAVAILABLE","ENTITY_COMPONENT_DOMAINS","setInputDateTimeValue","time","undefined","date","param","setValue","fetchConfig","force","saveConfig","config","subscribeLovelaceUpdates","fetchItems","updateItem","itemId","item","item_id","clearItems","addItem","fetchNotifications","subscribeUpdates","ntf","subscribeNotifications","ICONS","armed_away","armed_custom_bypass","armed_home","armed_night","disarmed","pending","triggered","BUTTONS","HuiAlarmPanelCard","states","_config","stateObj","attributes","code_format","defaults","_code","changedProps","has","oldHass","localize","_label","state","classMap","_stateIconLabel","_handleActionClick","_handlePadClick","stateLabel","pop","e","val","currentTarget","HuiConditionalCard","card","conditions","Array","isArray","validateConditionalConfig","_card","parentElement","removeChild","createCardElement","update","computeCardSize","_hass","visible","checkConditionsMet","setProperty","HTMLElement","HuiEntitiesCard","entities","querySelectorAll","forEach","entitiesToggle","querySelector","title","processConfigEntities","theme","_configEntities","changedProperties","applyThemesOnElement","themes","show_header_toggle","conf","entityConf","renderEntity","createRowElement","DOMAINS_HIDE_MORE_INFO","includes","computeDomain","classList","add","addEventListener","_handleClick","fireEvent","HuiEntityButtonCard","tap_action","hold_action","show_icon","show_name","isValidEntityId","DOMAINS_TOGGLE","_handleTap","_handleHold","longPress","computeStateDomain","stateIcon","styleMap","filter","_computeBrightness","color","_computeColor","height","icon_height","computeStateName","brightness","hs_color","hue","sat","handleClick","EntityFilterCard","_element","getCardSize","state_filter","_baseCardConfig","lastChild","entitiesList","show_empty","display","_cardElement","tagName","setConfig","isPanel","createErrorCardElement","createErrorCardConfig","error","origConfig","HuiErrorCard","_toStr","JSON","stringify","severityMap","red","green","yellow","normal","HuiGaugeCard","min","max","_setBaseUnit","Number","_baseUnit","transform","_translateTurn","_computeSeverity","unit","unit_of_measurement","hasConfigOrEntityChanged","_updated","isConnected","baseUnit","_computeBaseUnit","numberValue","sections","severity","sectionsArray","keys","sortable","maxTurnValue","clientWidth","HuiGlanceCard","ceil","columns","requestUpdate","show_state","computeStateDisplay","language","ev","HuiHistoryGraphCard","_entities","_names","push","setProperties","_cacheConfig","cacheKey","join","hoursToShow","hours_to_show","refresh","refresh_interval","_stateHistory","_stateHistoryLoading","HuiHorizontalStackCard","totalSize","_cards","elementSize","HuiStackCard","HuiIframeCard","aspect_ratio","aspectRatio","LegacyWrapperCard","_tag","toUpperCase","_domain","_ensureElement","lightConfig","radius","step","circleShape","startAngle","width","sliderType","lineCap","handleSize","showTooltip","animation","HuiLightCard","renderStyle","_handleMoreInfo","loadRoundslider","loaded","_roundSliderStyle","roundSliderStyle","_jQuery","jQuery","roundSlider","change","_setBrightness","drag","_dragEvent","start","_showBrightness","stop","_hideBrightness","innerHTML","round","attrs","clearTimeout","_brightnessTimout","remove","brightness_pct","toggleEntity","HuiMapCard","reflect","_leafletMap","invalidateSize","geo_location_sources","ratio","ar","toFixed","floor","_connected","hasUpdated","loadMap","_attachObserver","_resizeObserver","unobserve","_mapEl","removeEventListener","_debouncedResizeListener","_fitMap","root","paddingBottom","_drawEntities","zoom","default_zoom","_mapItems","LatLng","latitude","longitude","bounds","latLngBounds","getLatLng","fitBounds","pad","getZoom","setZoom","marker","mapItems","allEntities","concat","includesAll","source","passive","entityPicture","entity_picture","gpsAccuracy","gps_accuracy","divIcon","iconSize","className","interactive","circle","entityName","part","addLayer","ResizeObserver","observe","HuiMarkdownCard","content","HuiMediaControlCard","HuiPictureCard","image","clickable","HuiPictureElementsCard","camera_image","state_image","elements","camera_view","elementConfig","createStyledHuiElement","HuiPictureEntityCard","footer","STATES_OFF","Set","HuiPictureGlanceCard","_entitiesDialog","_entitiesToggle","force_dialog","dialog","_openDialog","_callService","SENSORS","moisture","temperature","conductivity","battery","HuiPlantStatusCard","computeAttributes","computeIcon","problem","indexOf","unit_of_measurement_dict","key","batLvl","sensors","midPoint","_Ax","_Ay","_Bx","_By","_Zx","_Zy","getPath","coords","next","Z","X","Y","path","last","coord","calcPoints","history","hours","detail","margin","yRatio","xRatio","isFinite","getCoords","i","offset","depth","subItem","index","average","reduce","sum","entry","x","y","coordinates","apply","getTime","res","point","age","last_changed","abs","toString","HuiSensorCard","cardConfig","graph","_history","svg","_date","minute","_getHistory","endTime","setHours","getHours","fetchRecent","stateHistory","HuiShoppingListCard","_uncheckedItems","_checkedItems","_fetchData","_unsubEvents","connection","_addItem","_addKeyPress","repeat","id","complete","_completeItem","_saveEdit","_clearItems","checkedItems","uncheckedItems","checked","blur","newItem","_newItem","focus","keyCode","cards","_createCardElement","stopPropagation","_rebuildCard","once","cardElToReplace","newCardEl","replaceChild","curCardEl","thermostatConfig","modeIcons","auto","manual","heat","cool","off","fan_only","eco","dry","idle","HuiThermostatCard","_loaded","_initialLoad","mode","operation_mode","_broadCard","current_temperature","unit_system","operation_list","modeItem","_renderIcon","_genSliderValue","sliderValue","uiValue","_updateSetTemp","target_temp_step","UNIT_F","updateComplete","_sliderType","target_temp_low","target_temp_high","min_temp","max_temp","_setTemperature","_stepSize","formatTemp","handle","currentMode","_handleModeClick","temps","spaceStepSize","stepSize","HuiVerticalStackCard","HuiWeatherForecastCard","createHuiElement","prop","service_data","computeNotifications","computeTooltip","stateName","tooltip","tapTooltip","computeActionTooltip","holdTooltip","newline","isHold","navigation_path","CARD_TYPES","CUSTOM_TYPE_PREFIX","TIMEOUT","_createElement","deepClone","console","_createErrorElement","message","startsWith","timer","whenDefined","ELEMENT_TYPES","_hideErrorElement","SPECIAL_TYPES","DOMAIN_TO_ELEMENT_TYPE","alert","automation","climate","cover","fan","group","input_boolean","input_number","input_select","input_text","light","lock","media_player","remote","scene","script","sensor","vacuum","water_heater","input_datetime","isTouch","navigator","maxTouchPoints","msMaxTouchPoints","LongPress","holdTime","ripple","held","cooldownStart","cooldownEnd","assign","borderRadius","position","pointerEvents","stopAnimation","event","preventDefault","cancelBubble","returnValue","clickStart","touches","pageX","pageY","startAnimation","clickEnd","dispatchEvent","Event","left","holdDown","simulatedRipple","getLongPress","body","longpress","longPressBind","directive","committer","turnOn","turnOnOffEntity","turnOnOffEntities","entityIds","domainsToCall","stateDomain","serviceDomain","DEFAULT_VIEW_ENTITY_ID","DOMAINS_BADGES","HIDE_DOMAIN","subscribedRegistries","splitByAreas","registries","areasWithEntities","area","areaEntities","areaDevices","device","otherEntities","computeCards","entityCardOptions","friendly_name","unshift","computeDefaultViewStates","hidden","generateDefaultViewConfig","groupOrders","order","splittedByAreas","generateViewConfig","areaCards","splitted","splitByGroups","groups","gr1","gr2","badgeEntities","ungroupedEntitites","ungrouped","coll","badges","groupEntity","control","view","generateLovelaceConfig","viewEntities","extractViews","views","viewEntity","getViewEntities","idx","computeObjectId","location_name","subscribeEntityRegistry","all","components","__DEMO__","node","hold","actionConfig","navigate","every","state_not","HuiEntitiesToggle","_toggleEntities","some","forwardHaptic","HuiGenericEntityRow","showSecondary","secondary_info","toggleAttribute","computeRTL","UPDATE_INTERVAL","DEFAULT_FILTER","HuiImage","query","_attached","cameraImage","cameraView","_startUpdateCameraInterval","_stopUpdateCameraInterval","imageSrc","cameraObj","imageFallback","stateImage","_cameraImageSrc","stateFilter","isOff","_onImageError","_onImageLoad","_loadError","_lastImageHeight","_updateCameraImageSrc","_cameraUpdater","setInterval","clearInterval","_image","offsetHeight","cameraState","fetchThumbnailUrlWithCache","FORMATS","format_date","datetime","format_date_time","format_time","INTERVAL_FORMAT","HuiTimestampDisplay","_startInterval","_clearInterval","ts","format","_format","_relative","_updateRelative","_interval","relativeTime","compareTime","includeTense","HuiWarningElement","label","HuiWarning","HuiConfiguratorNotificationItem","notification","HuiNotificationDrawer","open","notifications","_openTimer","narrow","reflectToAttribute","notify","observer","rtl","computed","LocalizeMixin","HuiNotificationItemTemplate","HuiNotificationItem","HuiNotificationsButton","_clicked","opened","HuiPersistentNotificationItem","_computeTitle","created_at","_computeTooltip","_handleDismiss","notification_id","toLocaleDateString","hour","registeredDialog","dialogShowEvent","dialogTag","registerEditCardDialog","dialogImport","showEditCardDialog","editCardDialogParams","addCard","viewIndex","viewConf","replaceCard","cardIndex","origConf","ind","deleteCard","_origConf","swapCard","path1","path2","card1","card2","origView1","newView1","origCard","origView2","newView2","origView","moveCard","fromPath","toPath","fromView","toView","addView","viewConfig","replaceView","swapView","view1","view2","deleteView","_origView","registerEditLovelaceDialog","showEditLovelaceDialog","lovelace","showSaveDialog","saveDialogParams","registerEditViewDialog","showEditViewDialog","editViewDialogParams","HuiConditionalElement","_elements","updateElements","HuiIconElement","HuiImageElement","toggle","HuiServiceButtonElement","_service","HuiStateBadgeElement","HuiStateIconElement","HuiStateLabelElement","prefix","suffix","HuiClimateEntityRow","HuiCoverEntityRow","isTiltOnly","HuiGroupEntityRow","_computeCanToggle","HuiInputDatetimeEntityRow","has_date","_selectedValueChanged","_stopEventPropagation","has_time","_timeInputEl","trim","_dateInputEl","HuiInputNumberEntityRow","computeRTLDirection","_inputElement","HuiInputSelectEntityRow","_selectedChanged","options","option","selected","selectedItem","innerText","setInputSelectOption","HuiInputTextEntityRow","pattern","_inputEl","HuiLockEntityRow","HuiMediaPlayerEntityRow","OFF_STATES","supportsFeature","SUPPORTS_PLAY","_computeControlIcon","_playPause","SUPPORT_NEXT_TRACK","_nextTrack","_computeMediaTitle","SUPPORT_PAUSE","media_content_type","media_artist","media_title","media_series_title","app_name","HuiSceneEntityRow","can_cancel","HuiScriptEntityRow","HuiSensorEntityRow","device_class","HuiTextEntityRow","HuiTimerEntityRow","_computeDisplay","oldStateObj","_calculateRemaining","_timeRemaining","timerTimeRemaining","secondsToDuration","HuiToggleEntityRow","editorLoaded","LovelacePanel","_closeEditor","_state","route","_columns","_forceFetchConfig","_errorMsg","_updateColumns","dockedSidebar","_fetchConfig","_lovelaceChanged","mqls","mql","matchMedia","addListener","_setLovelaceConfig","_regenerateConfig","matchColumns","cols","matches","_saving","showToast","text","dismissable","forceDiskRefresh","confMode","panel","log","editMode","enableFullEditMode","setEditMode","_updateLovelace","newConfig","previousConfig","previousMode","props","CSS_CACHE","JS_CACHE","loadedUnusedEntities","HUIRoot","_debouncedConfigChanged","_selectView","_curView","_unsubNotifications","_persistentNotifications","_routeData","_routeDataChanged","_notifications","_notificationsOpen","_handleNotificationsOpenChanged","_editMode","_editModeDisable","_editLovelace","_handleHelp","_deselect","_yamlMode","_handleRefresh","_handleUnusedEntities","_editModeEnable","_handleViewSelected","_moveViewLeft","_editView","_moveViewRight","_addView","haStyle","_viewRoot","huiView","newSelectView","selectedView","selectedViewInt","parseInt","oldLovelace","_loadResources","resources","_updateNotifications","persistent","configurator","oldIndex","newIndex","_layout","header","scrollTarget","_viewCache","unusedEntities","background","resource","importHref","warn","editCodeLoaded","getColumnIndex","columnEntityCount","size","minIndex","HUIView","_badges","renderStyles","_addCard","editModeChanged","configChanged","_createBadges","badge","_createCards","elementsToAppend","wrapper","cardSize","column","columnEl","HuiCallServiceRow","action_name","HuiDividerRow","HuiSectionRow","HuiWeblinkRow","HaEntityMarker","badgeTap"],"mappings":"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","file":"panel-lovelace.chunk.js","sourcesContent":["// Load a resource and get a promise when loading done.\n// From: https://davidwalsh.name/javascript-loader\n\nconst _load = (\n  tag: \"link\" | \"script\" | \"img\",\n  url: string,\n  type?: \"module\"\n) => {\n  // This promise will be used by Promise.all to determine success or failure\n  return new Promise((resolve, reject) => {\n    const element = document.createElement(tag);\n    let attr = \"src\";\n    let parent = \"body\";\n\n    // Important success and error for the promise\n    element.onload = () => resolve(url);\n    element.onerror = () => reject(url);\n\n    // Need to set different attributes depending on tag type\n    switch (tag) {\n      case \"script\":\n        (element as HTMLScriptElement).async = true;\n        if (type) {\n          (element as HTMLScriptElement).type = type;\n        }\n        break;\n      case \"link\":\n        (element as HTMLLinkElement).type = \"text/css\";\n        (element as HTMLLinkElement).rel = \"stylesheet\";\n        attr = \"href\";\n        parent = \"head\";\n    }\n\n    // Inject into document to kick off loading\n    element[attr] = url;\n    document[parent].appendChild(element);\n  });\n};\n\nexport const loadCSS = (url: string) => _load(\"link\", url);\nexport const loadJS = (url: string) => _load(\"script\", url);\nexport const loadImg = (url: string) => _load(\"img\", url);\nexport const loadModule = (url: string) => _load(\"script\", url, \"module\");\n","/**\n * Scroll to a specific y coordinate.\n *\n * Copied from paper-scroll-header-panel.\n *\n * @method scroll\n * @param {number} top The coordinate to scroll to, along the y-axis.\n * @param {boolean} smooth true if the scroll position should be smoothly adjusted.\n */\nexport default function scrollToTarget(element, target) {\n  // the scroll event will trigger _updateScrollState directly,\n  // However, _updateScrollState relies on the previous `scrollTop` to update the states.\n  // Calling _updateScrollState will ensure that the states are synced correctly.\n  const top = 0;\n  const scroller = target;\n  const easingFn = function easeOutQuad(t, b, c, d) {\n    /* eslint-disable no-param-reassign, space-infix-ops, no-mixed-operators */\n    t /= d;\n    return -c * t * (t - 2) + b;\n    /* eslint-enable no-param-reassign, space-infix-ops, no-mixed-operators */\n  };\n  const animationId = Math.random();\n  const duration = 200;\n  const startTime = Date.now();\n  const currentScrollTop = scroller.scrollTop;\n  const deltaScrollTop = top - currentScrollTop;\n  element._currentAnimationId = animationId;\n  (function updateFrame() {\n    const now = Date.now();\n    const elapsedTime = now - startTime;\n    if (elapsedTime > duration) {\n      scroller.scrollTop = top;\n    } else if (element._currentAnimationId === animationId) {\n      scroller.scrollTop = easingFn(\n        elapsedTime,\n        currentScrollTop,\n        deltaScrollTop,\n        duration\n      );\n      requestAnimationFrame(updateFrame.bind(element));\n    }\n  }.call(element));\n}\n","import { Map } from \"leaflet\";\n\n// Sets up a Leaflet map on the provided DOM element\nexport type LeafletModuleType = typeof import(\"leaflet\");\n\nexport const setupLeafletMap = async (\n  mapElement: HTMLElement\n): Promise<[Map, LeafletModuleType]> => {\n  if (!mapElement.parentNode) {\n    throw new Error(\"Cannot setup Leaflet map on disconnected element\");\n  }\n  // tslint:disable-next-line\n  const Leaflet = (await import(/* webpackChunkName: \"leaflet\" */ \"leaflet\")) as LeafletModuleType;\n  Leaflet.Icon.Default.imagePath = \"/static/images/leaflet/images/\";\n\n  const map = Leaflet.map(mapElement);\n  const style = document.createElement(\"link\");\n  style.setAttribute(\"href\", \"/static/images/leaflet/leaflet.css\");\n  style.setAttribute(\"rel\", \"stylesheet\");\n  mapElement.parentNode.appendChild(style);\n  map.setView([52.3731339, 4.8903147], 13);\n  Leaflet.tileLayer(\n    `https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}${\n      Leaflet.Browser.retina ? \"@2x.png\" : \".png\"\n    }`,\n    {\n      attribution:\n        '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a>, &copy; <a href=\"https://carto.com/attributions\">CARTO</a>',\n      subdomains: \"abcd\",\n      minZoom: 0,\n      maxZoom: 20,\n    }\n  ).addTo(map);\n\n  return [map, Leaflet];\n};\n","const validEntityId = /^(\\w+)\\.(\\w+)$/;\nexport default (entityId: string) => validEntityId.test(entityId);\n","export const compare = (a: string, b: string) => {\n  if (a < b) {\n    return -1;\n  }\n  if (a > b) {\n    return 1;\n  }\n\n  return 0;\n};\n\nexport const caseInsensitiveCompare = (a: string, b: string) =>\n  compare(a.toLowerCase(), b.toLowerCase());\n","// Handle 16x9, 16:9, 1.78x1, 1.78:1, 1.78\n// Ignore everything else\nconst parseOrThrow = (num) => {\n  const parsed = parseFloat(num);\n  if (isNaN(parsed)) {\n    throw new Error(`${num} is not a number`);\n  }\n  return parsed;\n};\n\nexport default function parseAspectRatio(input: string) {\n  if (!input) {\n    return null;\n  }\n  try {\n    if (input.endsWith(\"%\")) {\n      return { w: 100, h: parseOrThrow(input.substr(0, input.length - 1)) };\n    }\n\n    const arr = input.replace(\":\", \"x\").split(\"x\");\n    if (arr.length === 0) {\n      return null;\n    }\n\n    return arr.length === 1\n      ? { w: parseOrThrow(arr[0]), h: 1 }\n      : { w: parseOrThrow(arr[0]), h: parseOrThrow(arr[1]) };\n  } catch (err) {\n    // Ignore the error\n  }\n  return null;\n}\n","export const afterNextRender = (cb: () => void): void => {\n  requestAnimationFrame(() => setTimeout(cb, 0));\n};\n","import { UnsubscribeFunc, Connection } from \"home-assistant-js-websocket\";\n\nexport const subscribeOne = async <T>(\n  conn: Connection,\n  subscribe: (conn: Connection, onChange: (items: T) => void) => UnsubscribeFunc\n) =>\n  new Promise<T>((resolve) => {\n    const unsub = subscribe(conn, (items) => {\n      unsub();\n      resolve(items);\n    });\n  });\n","import { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport \"./ha-progress-button\";\nimport { EventsMixin } from \"../../mixins/events-mixin\";\n\n/*\n * @appliesMixin EventsMixin\n */\nclass HaCallServiceButton extends EventsMixin(PolymerElement) {\n  static get template() {\n    return html`\n      <ha-progress-button\n        id=\"progress\"\n        progress=\"[[progress]]\"\n        on-click=\"buttonTapped\"\n        ><slot></slot\n      ></ha-progress-button>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: {\n        type: Object,\n      },\n\n      progress: {\n        type: Boolean,\n        value: false,\n      },\n\n      domain: {\n        type: String,\n      },\n\n      service: {\n        type: String,\n      },\n\n      serviceData: {\n        type: Object,\n        value: {},\n      },\n    };\n  }\n\n  buttonTapped() {\n    this.progress = true;\n    var el = this;\n    var eventData = {\n      domain: this.domain,\n      service: this.service,\n      serviceData: this.serviceData,\n    };\n\n    this.hass\n      .callService(this.domain, this.service, this.serviceData)\n      .then(\n        function() {\n          el.progress = false;\n          el.$.progress.actionSuccess();\n          eventData.success = true;\n        },\n        function() {\n          el.progress = false;\n          el.$.progress.actionError();\n          eventData.success = false;\n        }\n      )\n      .then(function() {\n        el.fire(\"hass-service-called\", eventData);\n      });\n  }\n}\n\ncustomElements.define(\"ha-call-service-button\", HaCallServiceButton);\n","import {\n  html,\n  css,\n  LitElement,\n  TemplateResult,\n  property,\n  customElement,\n} from \"lit-element\";\n\nimport \"@polymer/paper-input/paper-input\";\n// tslint:disable-next-line:no-duplicate-imports\nimport { PaperInputElement } from \"@polymer/paper-input/paper-input\";\n\n@customElement(\"ha-date-input\")\nexport class HaDateInput extends LitElement {\n  @property() public year?: string;\n  @property() public month?: string;\n  @property() public day?: string;\n  @property({ type: Boolean }) public disabled = false;\n\n  static get styles() {\n    return css`\n      :host {\n        display: block;\n        font-family: var(--paper-font-common-base_-_font-family);\n        -webkit-font-smoothing: var(\n          --paper-font-common-base_-_-webkit-font-smoothing\n        );\n      }\n\n      paper-input {\n        width: 30px;\n        text-align: center;\n        --paper-input-container-shared-input-style_-_-webkit-appearance: textfield;\n        --paper-input-container-input_-_-moz-appearance: textfield;\n        --paper-input-container-shared-input-style_-_appearance: textfield;\n        --paper-input-container-input-webkit-spinner_-_-webkit-appearance: none;\n        --paper-input-container-input-webkit-spinner_-_margin: 0;\n        --paper-input-container-input-webkit-spinner_-_display: none;\n      }\n\n      paper-input#year {\n        width: 50px;\n      }\n\n      .date-input-wrap {\n        display: flex;\n        flex-direction: row;\n      }\n    `;\n  }\n\n  protected render(): TemplateResult {\n    return html`\n      <div class=\"date-input-wrap\">\n        <paper-input\n          id=\"year\"\n          type=\"number\"\n          .value=${this.year}\n          @change=${this._formatYear}\n          maxlength=\"4\"\n          max=\"9999\"\n          min=\"0\"\n          .disabled=${this.disabled}\n          no-label-float\n        >\n          <span suffix=\"\" slot=\"suffix\">-</span>\n        </paper-input>\n        <paper-input\n          id=\"month\"\n          type=\"number\"\n          .value=${this.month}\n          @change=${this._formatMonth}\n          maxlength=\"2\"\n          max=\"12\"\n          min=\"1\"\n          .disabled=${this.disabled}\n          no-label-float\n        >\n          <span suffix=\"\" slot=\"suffix\">-</span>\n        </paper-input>\n        <paper-input\n          id=\"day\"\n          type=\"number\"\n          .value=${this.day}\n          @change=${this._formatDay}\n          maxlength=\"2\"\n          max=\"31\"\n          min=\"1\"\n          .disabled=${this.disabled}\n          no-label-float\n        >\n        </paper-input>\n      </div>\n    `;\n  }\n\n  private _formatYear() {\n    const yearElement = this.shadowRoot!.getElementById(\n      \"year\"\n    ) as PaperInputElement;\n    this.year = yearElement.value!;\n  }\n\n  private _formatMonth() {\n    const monthElement = this.shadowRoot!.getElementById(\n      \"month\"\n    ) as PaperInputElement;\n    this.month = (\"0\" + monthElement.value!).slice(-2);\n  }\n\n  private _formatDay() {\n    const dayElement = this.shadowRoot!.getElementById(\n      \"day\"\n    ) as PaperInputElement;\n    this.day = (\"0\" + dayElement.value!).slice(-2);\n  }\n\n  get value() {\n    return `${this.year}-${this.month}-${this.day}`;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-date-input\": HaDateInput;\n  }\n}\n","import { Constructor } from \"lit-element\";\nimport \"@polymer/paper-icon-button/paper-icon-button\";\n// Not duplicate, this is for typing.\n// tslint:disable-next-line\nimport { PaperIconButtonElement } from \"@polymer/paper-icon-button/paper-icon-button\";\n\nconst paperIconButtonClass = customElements.get(\n  \"paper-icon-button\"\n) as Constructor<PaperIconButtonElement>;\n\nexport class HaPaperIconButtonArrowNext extends paperIconButtonClass {\n  public connectedCallback() {\n    this.icon =\n      window.getComputedStyle(this).direction === \"ltr\"\n        ? \"hass:arrow-right\"\n        : \"hass:arrow-left\";\n\n    // calling super after setting icon to have it consistently show the icon (otherwise not always shown)\n    super.connectedCallback();\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-paper-icon-button-arrow-next\": HaPaperIconButtonArrowNext;\n  }\n}\n\ncustomElements.define(\n  \"ha-paper-icon-button-arrow-next\",\n  HaPaperIconButtonArrowNext\n);\n","import { Constructor } from \"lit-element\";\nimport \"@polymer/paper-icon-button/paper-icon-button\";\n// Not duplicate, this is for typing.\n// tslint:disable-next-line\nimport { PaperIconButtonElement } from \"@polymer/paper-icon-button/paper-icon-button\";\n\nconst paperIconButtonClass = customElements.get(\n  \"paper-icon-button\"\n) as Constructor<PaperIconButtonElement>;\n\nexport class HaPaperIconButtonNext extends paperIconButtonClass {\n  public connectedCallback() {\n    this.icon =\n      window.getComputedStyle(this).direction === \"ltr\"\n        ? \"hass:chevron-right\"\n        : \"hass:chevron-left\";\n\n    // calling super after setting icon to have it consistently show the icon (otherwise not always shown)\n    super.connectedCallback();\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-paper-icon-button-next\": HaPaperIconButtonNext;\n  }\n}\n\ncustomElements.define(\"ha-paper-icon-button-next\", HaPaperIconButtonNext);\n","import { HomeAssistant } from \"../types\";\n\nexport const FORMAT_TEXT = \"text\";\nexport const FORMAT_NUMBER = \"number\";\n\nexport const callAlarmAction = (\n  hass: HomeAssistant,\n  entity: string,\n  action:\n    | \"arm_away\"\n    | \"arm_home\"\n    | \"arm_night\"\n    | \"arm_custom_bypass\"\n    | \"disarm\",\n  code: string\n) => {\n  hass!.callService(\"alarm_control_panel\", \"alarm_\" + action, {\n    entity_id: entity,\n    code,\n  });\n};\n","import { createCollection, Connection } from \"home-assistant-js-websocket\";\nimport { HomeAssistant } from \"../types\";\nimport { compare } from \"../common/string/compare\";\nimport { debounce } from \"../common/util/debounce\";\n\nexport interface AreaRegistryEntry {\n  area_id: string;\n  name: string;\n}\n\nexport interface AreaRegistryEntryMutableParams {\n  name: string;\n}\n\nexport const createAreaRegistryEntry = (\n  hass: HomeAssistant,\n  values: AreaRegistryEntryMutableParams\n) =>\n  hass.callWS<AreaRegistryEntry>({\n    type: \"config/area_registry/create\",\n    ...values,\n  });\n\nexport const updateAreaRegistryEntry = (\n  hass: HomeAssistant,\n  areaId: string,\n  updates: Partial<AreaRegistryEntryMutableParams>\n) =>\n  hass.callWS<AreaRegistryEntry>({\n    type: \"config/area_registry/update\",\n    area_id: areaId,\n    ...updates,\n  });\n\nexport const deleteAreaRegistryEntry = (hass: HomeAssistant, areaId: string) =>\n  hass.callWS({\n    type: \"config/area_registry/delete\",\n    area_id: areaId,\n  });\n\nconst fetchAreaRegistry = (conn) =>\n  conn\n    .sendMessagePromise({\n      type: \"config/area_registry/list\",\n    })\n    .then((areas) => areas.sort((ent1, ent2) => compare(ent1.name, ent2.name)));\n\nconst subscribeAreaRegistryUpdates = (conn, store) =>\n  conn.subscribeEvents(\n    debounce(\n      () =>\n        fetchAreaRegistry(conn).then((areas) => store.setState(areas, true)),\n      500,\n      true\n    ),\n    \"area_registry_updated\"\n  );\n\nexport const subscribeAreaRegistry = (\n  conn: Connection,\n  onChange: (areas: AreaRegistryEntry[]) => void\n) =>\n  createCollection<AreaRegistryEntry[]>(\n    \"_areaRegistry\",\n    fetchAreaRegistry,\n    subscribeAreaRegistryUpdates,\n    conn,\n    onChange\n  );\n","import { HomeAssistant } from \"../types\";\nimport { createCollection, Connection } from \"home-assistant-js-websocket\";\nimport { debounce } from \"../common/util/debounce\";\n\nexport interface DeviceRegistryEntry {\n  id: string;\n  config_entries: string[];\n  connections: Array<[string, string]>;\n  manufacturer: string;\n  model?: string;\n  name?: string;\n  sw_version?: string;\n  hub_device_id?: string;\n  area_id?: string;\n  name_by_user?: string;\n}\n\nexport interface DeviceRegistryEntryMutableParams {\n  area_id?: string | null;\n  name_by_user?: string | null;\n}\n\nexport const updateDeviceRegistryEntry = (\n  hass: HomeAssistant,\n  deviceId: string,\n  updates: Partial<DeviceRegistryEntryMutableParams>\n) =>\n  hass.callWS<DeviceRegistryEntry>({\n    type: \"config/device_registry/update\",\n    device_id: deviceId,\n    ...updates,\n  });\n\nconst fetchDeviceRegistry = (conn) =>\n  conn.sendMessagePromise({\n    type: \"config/device_registry/list\",\n  });\n\nconst subscribeDeviceRegistryUpdates = (conn, store) =>\n  conn.subscribeEvents(\n    debounce(\n      () =>\n        fetchDeviceRegistry(conn).then((devices) =>\n          store.setState(devices, true)\n        ),\n      500,\n      true\n    ),\n    \"device_registry_updated\"\n  );\n\nexport const subscribeDeviceRegistry = (\n  conn: Connection,\n  onChange: (devices: DeviceRegistryEntry[]) => void\n) =>\n  createCollection<DeviceRegistryEntry[]>(\n    \"_dr\",\n    fetchDeviceRegistry,\n    subscribeDeviceRegistryUpdates,\n    conn,\n    onChange\n  );\n","export const UNAVAILABLE = \"unavailable\";\n\nexport const ENTITY_COMPONENT_DOMAINS = [\n  \"air_quality\",\n  \"alarm_control_panel\",\n  \"automation\",\n  \"binary_sensor\",\n  \"calendar\",\n  \"counter\",\n  \"cover\",\n  \"dominos\",\n  \"fan\",\n  \"geo_location\",\n  \"group\",\n  \"history_graph\",\n  \"image_processing\",\n  \"input_boolean\",\n  \"input_datetime\",\n  \"input_number\",\n  \"input_select\",\n  \"input_text\",\n  \"light\",\n  \"lock\",\n  \"mailbox\",\n  \"media_player\",\n  \"person\",\n  \"plant\",\n  \"remember_the_milk\",\n  \"remote\",\n  \"scene\",\n  \"script\",\n  \"sensor\",\n  \"switch\",\n  \"timer\",\n  \"utility_meter\",\n  \"vacuum\",\n  \"weather\",\n  \"wink\",\n  \"zha\",\n  \"zwave\",\n];\n","import { HomeAssistant } from \"../types\";\n\nexport const setInputDateTimeValue = (\n  hass: HomeAssistant,\n  entityId: string,\n  time: string | undefined = undefined,\n  date: string | undefined = undefined\n) => {\n  const param = { entity_id: entityId, time, date };\n  hass.callService(entityId.split(\".\", 1)[0], \"set_datetime\", param);\n};\n","import { HomeAssistant } from \"../types\";\n\nexport const setValue = (hass: HomeAssistant, entity: string, value: string) =>\n  hass.callService(entity.split(\".\", 1)[0], \"set_value\", {\n    value,\n    entity_id: entity,\n  });\n","import { HomeAssistant } from \"../types\";\nimport { Connection } from \"home-assistant-js-websocket\";\n\nexport interface LovelaceConfig {\n  title?: string;\n  views: LovelaceViewConfig[];\n  background?: string;\n  resources?: Array<{ type: \"css\" | \"js\" | \"module\" | \"html\"; url: string }>;\n}\n\nexport interface LovelaceViewConfig {\n  index?: number;\n  title?: string;\n  badges?: string[];\n  cards?: LovelaceCardConfig[];\n  path?: string;\n  icon?: string;\n  theme?: string;\n  panel?: boolean;\n  background?: string;\n}\n\nexport interface LovelaceCardConfig {\n  index?: number;\n  view_index?: number;\n  type: string;\n  [key: string]: any;\n}\n\nexport interface ToggleActionConfig {\n  action: \"toggle\";\n}\n\nexport interface CallServiceActionConfig {\n  action: \"call-service\";\n  service: string;\n  service_data?: {\n    entity_id?: string | [string];\n    [key: string]: any;\n  };\n}\n\nexport interface NavigateActionConfig {\n  action: \"navigate\";\n  navigation_path: string;\n}\n\nexport interface MoreInfoActionConfig {\n  action: \"more-info\";\n}\n\nexport interface NoActionConfig {\n  action: \"none\";\n}\n\nexport type ActionConfig =\n  | ToggleActionConfig\n  | CallServiceActionConfig\n  | NavigateActionConfig\n  | MoreInfoActionConfig\n  | NoActionConfig;\n\nexport const fetchConfig = (\n  hass: HomeAssistant,\n  force: boolean\n): Promise<LovelaceConfig> =>\n  hass.callWS({\n    type: \"lovelace/config\",\n    force,\n  });\n\nexport const saveConfig = (\n  hass: HomeAssistant,\n  config: LovelaceConfig\n): Promise<void> =>\n  hass.callWS({\n    type: \"lovelace/config/save\",\n    config,\n  });\n\nexport const subscribeLovelaceUpdates = (\n  conn: Connection,\n  onChange: () => void\n) => conn.subscribeEvents(onChange, \"lovelace_updated\");\n","import { HomeAssistant } from \"../types\";\n\nexport interface ShoppingListItem {\n  id: number;\n  name: string;\n  complete: boolean;\n}\n\nexport const fetchItems = (hass: HomeAssistant): Promise<ShoppingListItem[]> =>\n  hass.callWS({\n    type: \"shopping_list/items\",\n  });\n\nexport const updateItem = (\n  hass: HomeAssistant,\n  itemId: number,\n  item: {\n    name?: string;\n    complete?: boolean;\n  }\n): Promise<ShoppingListItem> =>\n  hass.callWS({\n    type: \"shopping_list/items/update\",\n    item_id: itemId,\n    ...item,\n  });\n\nexport const clearItems = (hass: HomeAssistant): Promise<void> =>\n  hass.callWS({\n    type: \"shopping_list/items/clear\",\n  });\n\nexport const addItem = (\n  hass: HomeAssistant,\n  name: string\n): Promise<ShoppingListItem> =>\n  hass.callWS({\n    type: \"shopping_list/items/add\",\n    name,\n  });\n","import { createCollection, Connection } from \"home-assistant-js-websocket\";\n\nconst fetchNotifications = (conn) =>\n  conn.sendMessagePromise({\n    type: \"persistent_notification/get\",\n  });\n\nconst subscribeUpdates = (conn, store) =>\n  conn.subscribeEvents(\n    () => fetchNotifications(conn).then((ntf) => store.setState(ntf, true)),\n    \"persistent_notifications_updated\"\n  );\n\nexport const subscribeNotifications = (\n  conn: Connection,\n  onChange: (notifications: Notification[]) => void\n) =>\n  createCollection<Notification[]>(\n    \"_ntf\",\n    fetchNotifications,\n    subscribeUpdates,\n    conn,\n    onChange\n  );\n","import {\n  html,\n  LitElement,\n  PropertyValues,\n  TemplateResult,\n  CSSResult,\n  css,\n  property,\n  customElement,\n} from \"lit-element\";\nimport { classMap } from \"lit-html/directives/class-map\";\n\nimport \"../../../components/ha-card\";\nimport \"../../../components/ha-label-badge\";\nimport \"../components/hui-warning\";\n\nimport { LovelaceCard } from \"../types\";\nimport { HomeAssistant } from \"../../../types\";\nimport {\n  callAlarmAction,\n  FORMAT_NUMBER,\n} from \"../../../data/alarm_control_panel\";\nimport { AlarmPanelCardConfig } from \"./types\";\n\nconst ICONS = {\n  armed_away: \"hass:shield-lock\",\n  armed_custom_bypass: \"hass:security\",\n  armed_home: \"hass:shield-home\",\n  armed_night: \"hass:shield-home\",\n  disarmed: \"hass:shield-check\",\n  pending: \"hass:shield-outline\",\n  triggered: \"hass:bell-ring\",\n};\n\nconst BUTTONS = [\"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\", \"\", \"0\", \"clear\"];\n\n@customElement(\"hui-alarm-panel-card\")\nclass HuiAlarmPanelCard extends LitElement implements LovelaceCard {\n  public static async getConfigElement() {\n    await import(/* webpackChunkName: \"hui-alarm-panel-card-editor\" */ \"../editor/config-elements/hui-alarm-panel-card-editor\");\n    return document.createElement(\"hui-alarm-panel-card-editor\");\n  }\n\n  public static getStubConfig() {\n    return { states: [\"arm_home\", \"arm_away\"] };\n  }\n\n  @property() public hass?: HomeAssistant;\n\n  @property() private _config?: AlarmPanelCardConfig;\n\n  @property() private _code?: string;\n\n  public getCardSize(): number {\n    if (!this._config || !this.hass) {\n      return 0;\n    }\n\n    const stateObj = this.hass.states[this._config.entity];\n\n    return !stateObj || stateObj.attributes.code_format !== FORMAT_NUMBER\n      ? 3\n      : 8;\n  }\n\n  public setConfig(config: AlarmPanelCardConfig): void {\n    if (\n      !config ||\n      !config.entity ||\n      config.entity.split(\".\")[0] !== \"alarm_control_panel\"\n    ) {\n      throw new Error(\"Invalid card configuration\");\n    }\n\n    const defaults = {\n      states: [\"arm_away\", \"arm_home\"],\n    };\n\n    this._config = { ...defaults, ...config };\n    this._code = \"\";\n  }\n\n  protected shouldUpdate(changedProps: PropertyValues): boolean {\n    if (changedProps.has(\"_config\") || changedProps.has(\"_code\")) {\n      return true;\n    }\n\n    const oldHass = changedProps.get(\"hass\") as HomeAssistant | undefined;\n    if (oldHass) {\n      return (\n        oldHass.states[this._config!.entity] !==\n        this.hass!.states[this._config!.entity]\n      );\n    }\n    return true;\n  }\n\n  protected render(): TemplateResult | void {\n    if (!this._config || !this.hass) {\n      return html``;\n    }\n    const stateObj = this.hass.states[this._config.entity];\n\n    if (!stateObj) {\n      return html`\n        <hui-warning\n          >${this.hass.localize(\n            \"ui.panel.lovelace.warning.entity_not_found\",\n            \"entity\",\n            this._config.entity\n          )}</hui-warning\n        >\n      `;\n    }\n\n    return html`\n      <ha-card .header=\"${this._config.name || this._label(stateObj.state)}\">\n        <ha-label-badge\n          class=\"${classMap({ [stateObj.state]: true })}\"\n          .icon=\"${ICONS[stateObj.state] || \"hass:shield-outline\"}\"\n          .label=\"${this._stateIconLabel(stateObj.state)}\"\n        ></ha-label-badge>\n        <div id=\"armActions\" class=\"actions\">\n          ${(stateObj.state === \"disarmed\"\n            ? this._config.states!\n            : [\"disarm\"]\n          ).map((state) => {\n            return html`\n              <mwc-button\n                .action=\"${state}\"\n                @click=\"${this._handleActionClick}\"\n                outlined\n              >\n                ${this._label(state)}\n              </mwc-button>\n            `;\n          })}\n        </div>\n        ${!stateObj.attributes.code_format\n          ? html``\n          : html`\n              <paper-input\n                label=\"Alarm Code\"\n                type=\"password\"\n                .value=\"${this._code}\"\n              ></paper-input>\n            `}\n        ${stateObj.attributes.code_format !== FORMAT_NUMBER\n          ? html``\n          : html`\n              <div id=\"keypad\">\n                ${BUTTONS.map((value) => {\n                  return value === \"\"\n                    ? html`\n                        <mwc-button disabled></mwc-button>\n                      `\n                    : html`\n                        <mwc-button\n                          .value=\"${value}\"\n                          @click=\"${this._handlePadClick}\"\n                          dense\n                        >\n                          ${value === \"clear\"\n                            ? this._label(\"clear_code\")\n                            : value}\n                        </mwc-button>\n                      `;\n                })}\n              </div>\n            `}\n      </ha-card>\n    `;\n  }\n\n  private _stateIconLabel(state: string): string {\n    const stateLabel = state.split(\"_\").pop();\n    return stateLabel === \"disarmed\" ||\n      stateLabel === \"triggered\" ||\n      !stateLabel\n      ? \"\"\n      : stateLabel;\n  }\n\n  private _label(state: string): string {\n    return (\n      this.hass!.localize(`state.alarm_control_panel.${state}`) ||\n      this.hass!.localize(`ui.card.alarm_control_panel.${state}`)\n    );\n  }\n\n  private _handlePadClick(e: MouseEvent): void {\n    const val = (e.currentTarget! as any).value;\n    this._code = val === \"clear\" ? \"\" : this._code + val;\n  }\n\n  private _handleActionClick(e: MouseEvent): void {\n    callAlarmAction(\n      this.hass!,\n      this._config!.entity,\n      (e.currentTarget! as any).action,\n      this._code!\n    );\n    this._code = \"\";\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      ha-card {\n        padding-bottom: 16px;\n        position: relative;\n        --alarm-color-disarmed: var(--label-badge-green);\n        --alarm-color-pending: var(--label-badge-yellow);\n        --alarm-color-triggered: var(--label-badge-red);\n        --alarm-color-armed: var(--label-badge-red);\n        --alarm-color-autoarm: rgba(0, 153, 255, 0.1);\n        --alarm-state-color: var(--alarm-color-armed);\n        --base-unit: 15px;\n        font-size: calc(var(--base-unit));\n      }\n\n      ha-label-badge {\n        --ha-label-badge-color: var(--alarm-state-color);\n        --label-badge-text-color: var(--alarm-state-color);\n        --label-badge-background-color: var(--paper-card-background-color);\n        color: var(--alarm-state-color);\n        position: absolute;\n        right: 12px;\n        top: 12px;\n      }\n\n      .disarmed {\n        --alarm-state-color: var(--alarm-color-disarmed);\n      }\n\n      .triggered {\n        --alarm-state-color: var(--alarm-color-triggered);\n        animation: pulse 1s infinite;\n      }\n\n      .arming {\n        --alarm-state-color: var(--alarm-color-pending);\n        animation: pulse 1s infinite;\n      }\n\n      .pending {\n        --alarm-state-color: var(--alarm-color-pending);\n        animation: pulse 1s infinite;\n      }\n\n      @keyframes pulse {\n        0% {\n          --ha-label-badge-color: var(--alarm-state-color);\n        }\n        100% {\n          --ha-label-badge-color: rgba(255, 153, 0, 0.3);\n        }\n      }\n\n      paper-input {\n        margin: 0 auto 8px;\n        max-width: 150px;\n        font-size: calc(var(--base-unit));\n        text-align: center;\n      }\n\n      .state {\n        margin-left: 16px;\n        font-size: calc(var(--base-unit) * 0.9);\n        position: relative;\n        bottom: 16px;\n        color: var(--alarm-state-color);\n        animation: none;\n      }\n\n      #keypad {\n        display: flex;\n        justify-content: center;\n        flex-wrap: wrap;\n        margin: auto;\n        width: 300px;\n      }\n\n      #keypad mwc-button {\n        margin-bottom: 5%;\n        width: 30%;\n        padding: calc(var(--base-unit));\n        font-size: calc(var(--base-unit) * 1.1);\n        box-sizing: border-box;\n      }\n\n      .actions {\n        margin: 0 8px;\n        padding-top: 20px;\n        display: flex;\n        flex-wrap: wrap;\n        justify-content: center;\n        font-size: calc(var(--base-unit) * 1);\n      }\n\n      .actions mwc-button {\n        min-width: calc(var(--base-unit) * 9);\n        margin: 0 4px 4px;\n      }\n\n      mwc-button#disarm {\n        color: var(--google-red-500);\n      }\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-alarm-panel-card\": HuiAlarmPanelCard;\n  }\n}\n","import { createCardElement } from \"../common/create-card-element\";\nimport { computeCardSize } from \"../common/compute-card-size\";\nimport {\n  checkConditionsMet,\n  validateConditionalConfig,\n} from \"../../lovelace/common/validate-condition\";\nimport { HomeAssistant } from \"../../../types\";\nimport { LovelaceCard } from \"../types\";\nimport { ConditionalCardConfig } from \"./types\";\n\nclass HuiConditionalCard extends HTMLElement implements LovelaceCard {\n  private _hass?: HomeAssistant;\n  private _config?: ConditionalCardConfig;\n  private _card?: LovelaceCard;\n\n  public setConfig(config) {\n    if (\n      !config.card ||\n      !config.conditions ||\n      !Array.isArray(config.conditions) ||\n      !validateConditionalConfig(config.conditions)\n    ) {\n      throw new Error(\"Error in card configuration.\");\n    }\n\n    if (this._card && this._card.parentElement) {\n      this.removeChild(this._card);\n    }\n\n    this._config = config;\n    this._card = createCardElement(config.card);\n\n    this.update();\n  }\n\n  set hass(hass: HomeAssistant) {\n    this._hass = hass;\n\n    this.update();\n  }\n\n  public getCardSize() {\n    return computeCardSize(this._card!);\n  }\n\n  private update() {\n    if (!this._card || !this._hass) {\n      return;\n    }\n\n    const visible =\n      this._config && checkConditionsMet(this._config.conditions, this._hass);\n\n    if (visible) {\n      this._card.hass = this._hass;\n      if (!this._card.parentElement) {\n        this.appendChild(this._card);\n      }\n    } else if (this._card.parentElement) {\n      this.removeChild(this._card);\n    }\n    // This will hide the complete card so it won't get styled by parent\n    this.style.setProperty(\"display\", visible ? \"\" : \"none\");\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-conditional-card\": HuiConditionalCard;\n  }\n}\n\ncustomElements.define(\"hui-conditional-card\", HuiConditionalCard);\n","import {\n  html,\n  LitElement,\n  PropertyValues,\n  TemplateResult,\n  customElement,\n  property,\n  css,\n  CSSResult,\n} from \"lit-element\";\n\nimport \"../../../components/ha-card\";\nimport \"../components/hui-entities-toggle\";\n\nimport { fireEvent } from \"../../../common/dom/fire_event\";\nimport { DOMAINS_HIDE_MORE_INFO } from \"../../../common/const\";\nimport { HomeAssistant } from \"../../../types\";\nimport { EntityRow } from \"../entity-rows/types\";\nimport { LovelaceCard, LovelaceCardEditor } from \"../types\";\nimport { processConfigEntities } from \"../common/process-config-entities\";\nimport { createRowElement } from \"../common/create-row-element\";\nimport { EntitiesCardConfig, EntitiesCardEntityConfig } from \"./types\";\n\nimport computeDomain from \"../../../common/entity/compute_domain\";\nimport applyThemesOnElement from \"../../../common/dom/apply_themes_on_element\";\n\n@customElement(\"hui-entities-card\")\nclass HuiEntitiesCard extends LitElement implements LovelaceCard {\n  public static async getConfigElement(): Promise<LovelaceCardEditor> {\n    await import(/* webpackChunkName: \"hui-entities-card-editor\" */ \"../editor/config-elements/hui-entities-card-editor\");\n    return document.createElement(\"hui-entities-card-editor\");\n  }\n\n  public static getStubConfig(): object {\n    return { entities: [] };\n  }\n\n  @property() protected _config?: EntitiesCardConfig;\n\n  protected _hass?: HomeAssistant;\n\n  protected _configEntities?: EntitiesCardEntityConfig[];\n\n  set hass(hass: HomeAssistant) {\n    this._hass = hass;\n    this.shadowRoot!.querySelectorAll(\"#states > div > *\").forEach(\n      (element: unknown) => {\n        (element as EntityRow).hass = hass;\n      }\n    );\n    const entitiesToggle = this.shadowRoot!.querySelector(\n      \"hui-entities-toggle\"\n    );\n    if (entitiesToggle) {\n      (entitiesToggle as any).hass = hass;\n    }\n  }\n\n  public getCardSize(): number {\n    if (!this._config) {\n      return 0;\n    }\n    // +1 for the header\n    return (this._config.title ? 1 : 0) + this._config.entities.length;\n  }\n\n  public setConfig(config: EntitiesCardConfig): void {\n    const entities = processConfigEntities(config.entities);\n\n    this._config = { theme: \"default\", ...config };\n    this._configEntities = entities;\n  }\n\n  protected updated(changedProperties: PropertyValues): void {\n    super.updated(changedProperties);\n    if (this._hass && this._config) {\n      applyThemesOnElement(this, this._hass.themes, this._config.theme);\n    }\n  }\n\n  protected render(): TemplateResult | void {\n    if (!this._config || !this._hass) {\n      return html``;\n    }\n    const { show_header_toggle, title } = this._config;\n\n    return html`\n      <ha-card>\n        ${!title && !show_header_toggle\n          ? html``\n          : html`\n              <div class=\"card-header\">\n                <div class=\"name\">${title}</div>\n                ${show_header_toggle === false\n                  ? html``\n                  : html`\n                      <hui-entities-toggle\n                        .hass=\"${this._hass}\"\n                        .entities=\"${this._configEntities!.map(\n                          (conf) => conf.entity\n                        )}\"\n                      ></hui-entities-toggle>\n                    `}\n              </div>\n            `}\n        <div id=\"states\" class=\"card-content\">\n          ${this._configEntities!.map((entityConf) =>\n            this.renderEntity(entityConf)\n          )}\n        </div>\n      </ha-card>\n    `;\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      .card-header {\n        display: flex;\n        justify-content: space-between;\n      }\n\n      .card-header .name {\n        white-space: nowrap;\n        overflow: hidden;\n        text-overflow: ellipsis;\n      }\n\n      .card-header hui-entities-toggle {\n        margin: -4px 0;\n      }\n\n      #states > * {\n        margin: 8px 0;\n      }\n\n      #states > div > * {\n        overflow: hidden;\n      }\n\n      .state-card-dialog {\n        cursor: pointer;\n      }\n    `;\n  }\n\n  private renderEntity(entityConf: EntitiesCardEntityConfig): TemplateResult {\n    const element = createRowElement(entityConf);\n    if (this._hass) {\n      element.hass = this._hass;\n    }\n    if (\n      entityConf.entity &&\n      !DOMAINS_HIDE_MORE_INFO.includes(computeDomain(entityConf.entity))\n    ) {\n      element.classList.add(\"state-card-dialog\");\n      element.addEventListener(\"click\", () => this._handleClick(entityConf));\n    }\n\n    return html`\n      <div>${element}</div>\n    `;\n  }\n\n  private _handleClick(entityConf: EntitiesCardEntityConfig): void {\n    const entityId = entityConf.entity;\n    fireEvent(this, \"hass-more-info\", { entityId });\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-entities-card\": HuiEntitiesCard;\n  }\n}\n","import {\n  html,\n  LitElement,\n  PropertyValues,\n  TemplateResult,\n  CSSResult,\n  css,\n  customElement,\n  property,\n} from \"lit-element\";\nimport { HassEntity } from \"home-assistant-js-websocket\";\nimport { styleMap } from \"lit-html/directives/style-map\";\nimport \"@material/mwc-ripple\";\n\nimport \"../../../components/ha-card\";\nimport \"../components/hui-warning\";\n\nimport isValidEntityId from \"../../../common/entity/valid_entity_id\";\nimport stateIcon from \"../../../common/entity/state_icon\";\nimport computeStateDomain from \"../../../common/entity/compute_state_domain\";\nimport computeStateName from \"../../../common/entity/compute_state_name\";\nimport applyThemesOnElement from \"../../../common/dom/apply_themes_on_element\";\nimport computeDomain from \"../../../common/entity/compute_domain\";\n\nimport { HomeAssistant, LightEntity } from \"../../../types\";\nimport { LovelaceCard, LovelaceCardEditor } from \"../types\";\nimport { longPress } from \"../common/directives/long-press-directive\";\nimport { handleClick } from \"../common/handle-click\";\nimport { DOMAINS_TOGGLE } from \"../../../common/const\";\nimport { EntityButtonCardConfig } from \"./types\";\n\n@customElement(\"hui-entity-button-card\")\nclass HuiEntityButtonCard extends LitElement implements LovelaceCard {\n  public static async getConfigElement(): Promise<LovelaceCardEditor> {\n    await import(/* webpackChunkName: \"hui-entity-button-card-editor\" */ \"../editor/config-elements/hui-entity-button-card-editor\");\n    return document.createElement(\"hui-entity-button-card-editor\");\n  }\n\n  public static getStubConfig(): object {\n    return {\n      tap_action: { action: \"toggle\" },\n      hold_action: { action: \"more-info\" },\n      show_icon: true,\n      show_name: true,\n    };\n  }\n\n  @property() public hass?: HomeAssistant;\n\n  @property() private _config?: EntityButtonCardConfig;\n\n  public getCardSize(): number {\n    return 2;\n  }\n\n  public setConfig(config: EntityButtonCardConfig): void {\n    if (!isValidEntityId(config.entity)) {\n      throw new Error(\"Invalid Entity\");\n    }\n\n    this._config = {\n      theme: \"default\",\n      hold_action: { action: \"more-info\" },\n      show_icon: true,\n      show_name: true,\n      ...config,\n    };\n\n    if (DOMAINS_TOGGLE.has(computeDomain(config.entity))) {\n      this._config = {\n        tap_action: {\n          action: \"toggle\",\n        },\n        ...this._config,\n      };\n    } else {\n      this._config = {\n        tap_action: {\n          action: \"more-info\",\n        },\n        ...this._config,\n      };\n    }\n  }\n\n  protected shouldUpdate(changedProps: PropertyValues): boolean {\n    if (changedProps.has(\"_config\")) {\n      return true;\n    }\n\n    const oldHass = changedProps.get(\"hass\") as HomeAssistant | undefined;\n    if (oldHass) {\n      return (\n        oldHass.states[this._config!.entity] !==\n        this.hass!.states[this._config!.entity]\n      );\n    }\n    return true;\n  }\n\n  protected render(): TemplateResult | void {\n    if (!this._config || !this.hass) {\n      return html``;\n    }\n    const stateObj = this.hass.states[this._config.entity];\n\n    if (!stateObj) {\n      return html`\n        <hui-warning\n          >${this.hass.localize(\n            \"ui.panel.lovelace.warning.entity_not_found\",\n            \"entity\",\n            this._config.entity\n          )}</hui-warning\n        >\n      `;\n    }\n\n    return html`\n      <ha-card\n        @ha-click=\"${this._handleTap}\"\n        @ha-hold=\"${this._handleHold}\"\n        .longPress=\"${longPress()}\"\n      >\n        ${this._config.show_icon\n          ? html`\n              <ha-icon\n                data-domain=\"${computeStateDomain(stateObj)}\"\n                data-state=\"${stateObj.state}\"\n                .icon=\"${this._config.icon || stateIcon(stateObj)}\"\n                style=\"${styleMap({\n                  filter: this._computeBrightness(stateObj),\n                  color: this._computeColor(stateObj),\n                  height: this._config.icon_height\n                    ? this._config.icon_height\n                    : \"auto\",\n                })}\"\n              ></ha-icon>\n            `\n          : \"\"}\n        ${this._config.show_name\n          ? html`\n              <span>\n                ${this._config.name || computeStateName(stateObj)}\n              </span>\n            `\n          : \"\"}\n        <mwc-ripple></mwc-ripple>\n      </ha-card>\n    `;\n  }\n\n  protected updated(changedProps: PropertyValues): void {\n    super.updated(changedProps);\n    if (!this._config || !this.hass) {\n      return;\n    }\n    const oldHass = changedProps.get(\"hass\") as HomeAssistant | undefined;\n    if (!oldHass || oldHass.themes !== this.hass.themes) {\n      applyThemesOnElement(this, this.hass.themes, this._config.theme);\n    }\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      ha-card {\n        cursor: pointer;\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n        text-align: center;\n        padding: 4% 0;\n        font-size: 1.2rem;\n      }\n\n      ha-icon {\n        width: 40%;\n        height: auto;\n        color: var(--paper-item-icon-color, #44739e);\n      }\n\n      ha-icon[data-domain=\"light\"][data-state=\"on\"],\n      ha-icon[data-domain=\"switch\"][data-state=\"on\"],\n      ha-icon[data-domain=\"binary_sensor\"][data-state=\"on\"],\n      ha-icon[data-domain=\"fan\"][data-state=\"on\"],\n      ha-icon[data-domain=\"sun\"][data-state=\"above_horizon\"] {\n        color: var(--paper-item-icon-active-color, #fdd835);\n      }\n\n      ha-icon[data-state=\"unavailable\"] {\n        color: var(--state-icon-unavailable-color);\n      }\n    `;\n  }\n\n  private _computeBrightness(stateObj: HassEntity | LightEntity): string {\n    if (!stateObj.attributes.brightness) {\n      return \"\";\n    }\n    const brightness = stateObj.attributes.brightness;\n    return `brightness(${(brightness + 245) / 5}%)`;\n  }\n\n  private _computeColor(stateObj: HassEntity | LightEntity): string {\n    if (!stateObj.attributes.hs_color) {\n      return \"\";\n    }\n    const [hue, sat] = stateObj.attributes.hs_color;\n    if (sat <= 10) {\n      return \"\";\n    }\n    return `hsl(${hue}, 100%, ${100 - sat / 2}%)`;\n  }\n\n  private _handleTap() {\n    handleClick(this, this.hass!, this._config!, false);\n  }\n\n  private _handleHold() {\n    handleClick(this, this.hass!, this._config!, true);\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-entity-button-card\": HuiEntityButtonCard;\n  }\n}\n","import { createCardElement } from \"../common/create-card-element\";\nimport { processConfigEntities } from \"../common/process-config-entities\";\nimport { LovelaceCard } from \"../types\";\nimport { LovelaceCardConfig } from \"../../../data/lovelace\";\nimport { EntityConfig } from \"../entity-rows/types\";\nimport { HomeAssistant } from \"../../../types\";\nimport { EntityFilterCardConfig } from \"./types\";\n\nclass EntityFilterCard extends HTMLElement implements LovelaceCard {\n  public isPanel?: boolean;\n  private _element?: LovelaceCard;\n  private _config?: EntityFilterCardConfig;\n  private _configEntities?: EntityConfig[];\n  private _baseCardConfig?: LovelaceCardConfig;\n\n  public getCardSize(): number {\n    return this._element ? this._element.getCardSize() : 1;\n  }\n\n  public setConfig(config: EntityFilterCardConfig): void {\n    if (!config.state_filter || !Array.isArray(config.state_filter)) {\n      throw new Error(\"Incorrect filter config.\");\n    }\n\n    this._config = config;\n    this._configEntities = undefined;\n    this._baseCardConfig = {\n      type: \"entities\",\n      entities: [],\n      ...this._config.card,\n    };\n\n    if (this.lastChild) {\n      this.removeChild(this.lastChild);\n      this._element = undefined;\n    }\n  }\n\n  set hass(hass: HomeAssistant) {\n    if (!hass || !this._config) {\n      return;\n    }\n\n    if (!this._configEntities) {\n      this._configEntities = processConfigEntities(this._config.entities);\n    }\n\n    const entitiesList = this._configEntities.filter((entityConf) => {\n      const stateObj = hass.states[entityConf.entity];\n      return stateObj && this._config!.state_filter.includes(stateObj.state);\n    });\n\n    if (entitiesList.length === 0 && this._config.show_empty === false) {\n      this.style.display = \"none\";\n      return;\n    }\n\n    const element = this._cardElement();\n\n    if (!element) {\n      return;\n    }\n\n    if (element.tagName !== \"HUI-ERROR-CARD\") {\n      element.setConfig({ ...this._baseCardConfig!, entities: entitiesList });\n      element.isPanel = this.isPanel;\n      element.hass = hass;\n    }\n\n    // Attach element if it has never been attached.\n    if (!this.lastChild) {\n      this.appendChild(element);\n    }\n\n    this.style.display = \"block\";\n  }\n\n  private _cardElement(): LovelaceCard | undefined {\n    if (!this._element && this._config) {\n      const element = createCardElement(this._baseCardConfig!);\n      this._element = element;\n    }\n\n    return this._element;\n  }\n}\ncustomElements.define(\"hui-entity-filter-card\", EntityFilterCard);\n","import {\n  html,\n  LitElement,\n  TemplateResult,\n  customElement,\n  property,\n  css,\n  CSSResult,\n} from \"lit-element\";\n\nimport { LovelaceCard } from \"../types\";\nimport { LovelaceCardConfig } from \"../../../data/lovelace\";\nimport { HomeAssistant } from \"../../../types\";\nimport { ErrorCardConfig } from \"./types\";\n\nexport const createErrorCardElement = (config) => {\n  const el = document.createElement(\"hui-error-card\");\n  el.setConfig(config);\n  return el;\n};\n\nexport const createErrorCardConfig = (error, origConfig) => ({\n  type: \"error\",\n  error,\n  origConfig,\n});\n\n@customElement(\"hui-error-card\")\nexport class HuiErrorCard extends LitElement implements LovelaceCard {\n  public hass?: HomeAssistant;\n\n  @property() private _config?: ErrorCardConfig;\n\n  public getCardSize(): number {\n    return 4;\n  }\n\n  public setConfig(config: ErrorCardConfig): void {\n    this._config = config;\n  }\n\n  protected render(): TemplateResult | void {\n    if (!this._config) {\n      return html``;\n    }\n\n    return html`\n      ${this._config.error}\n      <pre>${this._toStr(this._config.origConfig)}</pre>\n    `;\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      :host {\n        display: block;\n        background-color: #ef5350;\n        color: white;\n        padding: 8px;\n        font-weight: 500;\n      }\n    `;\n  }\n\n  private _toStr(config: LovelaceCardConfig): string {\n    return JSON.stringify(config, null, 2);\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-error-card\": HuiErrorCard;\n  }\n}\n","import {\n  html,\n  LitElement,\n  PropertyValues,\n  TemplateResult,\n  css,\n  CSSResult,\n  property,\n  customElement,\n} from \"lit-element\";\nimport { styleMap } from \"lit-html/directives/style-map\";\n\nimport \"../../../components/ha-card\";\nimport \"../components/hui-warning\";\n\nimport isValidEntityId from \"../../../common/entity/valid_entity_id\";\nimport applyThemesOnElement from \"../../../common/dom/apply_themes_on_element\";\nimport computeStateName from \"../../../common/entity/compute_state_name\";\n\nimport { HomeAssistant } from \"../../../types\";\nimport { fireEvent } from \"../../../common/dom/fire_event\";\nimport { hasConfigOrEntityChanged } from \"../common/has-changed\";\nimport { LovelaceCard, LovelaceCardEditor } from \"../types\";\nimport { GaugeCardConfig } from \"./types\";\n\nexport const severityMap = {\n  red: \"var(--label-badge-red)\",\n  green: \"var(--label-badge-green)\",\n  yellow: \"var(--label-badge-yellow)\",\n  normal: \"var(--label-badge-blue)\",\n};\n\n@customElement(\"hui-gauge-card\")\nclass HuiGaugeCard extends LitElement implements LovelaceCard {\n  public static async getConfigElement(): Promise<LovelaceCardEditor> {\n    await import(/* webpackChunkName: \"hui-gauge-card-editor\" */ \"../editor/config-elements/hui-gauge-card-editor\");\n    return document.createElement(\"hui-gauge-card-editor\");\n  }\n  public static getStubConfig(): object {\n    return {};\n  }\n\n  @property() public hass?: HomeAssistant;\n\n  @property() private _baseUnit = \"50px\";\n  @property() private _config?: GaugeCardConfig;\n\n  private _updated?: boolean;\n\n  public getCardSize(): number {\n    return 2;\n  }\n\n  public setConfig(config: GaugeCardConfig): void {\n    if (!config || !config.entity) {\n      throw new Error(\"Invalid card configuration\");\n    }\n    if (!isValidEntityId(config.entity)) {\n      throw new Error(\"Invalid Entity\");\n    }\n    this._config = { min: 0, max: 100, theme: \"default\", ...config };\n  }\n\n  public connectedCallback(): void {\n    super.connectedCallback();\n    this._setBaseUnit();\n  }\n\n  protected render(): TemplateResult | void {\n    if (!this._config || !this.hass) {\n      return html``;\n    }\n\n    const stateObj = this.hass.states[this._config.entity];\n\n    if (!stateObj) {\n      return html`\n        <hui-warning\n          >${this.hass.localize(\n            \"ui.panel.lovelace.warning.entity_not_found\",\n            \"entity\",\n            this._config.entity\n          )}</hui-warning\n        >\n      `;\n    }\n\n    const state = Number(stateObj.state);\n\n    if (isNaN(state)) {\n      return html`\n        <hui-warning\n          >${this.hass.localize(\n            \"ui.panel.lovelace.warning.entity_non_numeric\",\n            \"entity\",\n            this._config.entity\n          )}</hui-warning\n        >\n      `;\n    }\n\n    return html`\n      <ha-card\n        @click=\"${this._handleClick}\"\n        style=${styleMap({\n          \"--base-unit\": this._baseUnit,\n        })}\n      >\n        <div class=\"container\">\n          <div class=\"gauge-a\"></div>\n          <div class=\"gauge-b\"></div>\n          <div\n            class=\"gauge-c\"\n            style=${styleMap({\n              transform: `rotate(${this._translateTurn(state)}turn)`,\n              \"background-color\": this._computeSeverity(state),\n            })}\n          ></div>\n          <div class=\"gauge-data\">\n            <div id=\"percent\">\n              ${stateObj.state}\n              ${this._config.unit ||\n                stateObj.attributes.unit_of_measurement ||\n                \"\"}\n            </div>\n            <div id=\"name\">\n              ${this._config.name || computeStateName(stateObj)}\n            </div>\n          </div>\n        </div>\n      </ha-card>\n    `;\n  }\n\n  protected shouldUpdate(changedProps: PropertyValues): boolean {\n    return hasConfigOrEntityChanged(this, changedProps);\n  }\n\n  protected firstUpdated(): void {\n    this._updated = true;\n    this._setBaseUnit();\n    this.classList.add(\"init\");\n  }\n\n  protected updated(changedProps: PropertyValues): void {\n    super.updated(changedProps);\n    if (!this._config || !this.hass) {\n      return;\n    }\n\n    const oldHass = changedProps.get(\"hass\") as HomeAssistant | undefined;\n\n    if (!oldHass || oldHass.themes !== this.hass.themes) {\n      applyThemesOnElement(this, this.hass.themes, this._config.theme);\n    }\n  }\n\n  private _setBaseUnit(): void {\n    if (!this.isConnected || !this._updated) {\n      return;\n    }\n    const baseUnit = this._computeBaseUnit();\n    if (baseUnit !== \"0px\") {\n      this._baseUnit = baseUnit;\n    }\n  }\n\n  private _computeSeverity(numberValue: number): string {\n    const sections = this._config!.severity;\n\n    if (!sections) {\n      return severityMap.normal;\n    }\n\n    const sectionsArray = Object.keys(sections);\n    const sortable = sectionsArray.map((severity) => [\n      severity,\n      sections[severity],\n    ]);\n\n    for (const severity of sortable) {\n      if (severityMap[severity[0]] == null || isNaN(severity[1])) {\n        return severityMap.normal;\n      }\n    }\n    sortable.sort((a, b) => a[1] - b[1]);\n\n    if (numberValue >= sortable[0][1] && numberValue < sortable[1][1]) {\n      return severityMap[sortable[0][0]];\n    }\n    if (numberValue >= sortable[1][1] && numberValue < sortable[2][1]) {\n      return severityMap[sortable[1][0]];\n    }\n    if (numberValue >= sortable[2][1]) {\n      return severityMap[sortable[2][0]];\n    }\n    return severityMap.normal;\n  }\n\n  private _translateTurn(value: number): number {\n    const { min, max } = this._config!;\n    const maxTurnValue = Math.min(Math.max(value, min!), max!);\n    return (5 * (maxTurnValue - min!)) / (max! - min!) / 10;\n  }\n\n  private _computeBaseUnit(): string {\n    return this.clientWidth < 200 ? this.clientWidth / 5 + \"px\" : \"50px\";\n  }\n\n  private _handleClick(): void {\n    fireEvent(this, \"hass-more-info\", { entityId: this._config!.entity });\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      ha-card {\n        height: calc(var(--base-unit) * 3);\n        position: relative;\n        cursor: pointer;\n      }\n      .container {\n        width: calc(var(--base-unit) * 4);\n        height: calc(var(--base-unit) * 2);\n        position: absolute;\n        top: calc(var(--base-unit) * 1.5);\n        left: 50%;\n        overflow: hidden;\n        text-align: center;\n        transform: translate(-50%, -50%);\n      }\n      .gauge-a {\n        z-index: 1;\n        position: absolute;\n        background-color: var(--primary-background-color);\n        width: calc(var(--base-unit) * 4);\n        height: calc(var(--base-unit) * 2);\n        top: 0%;\n        border-radius: calc(var(--base-unit) * 2.5) calc(var(--base-unit) * 2.5)\n          0px 0px;\n      }\n      .gauge-b {\n        z-index: 3;\n        position: absolute;\n        background-color: var(--paper-card-background-color);\n        width: calc(var(--base-unit) * 2.5);\n        height: calc(var(--base-unit) * 1.25);\n        top: calc(var(--base-unit) * 0.75);\n        margin-left: calc(var(--base-unit) * 0.75);\n        margin-right: auto;\n        border-radius: calc(var(--base-unit) * 2.5) calc(var(--base-unit) * 2.5)\n          0px 0px;\n      }\n      .gauge-c {\n        z-index: 2;\n        position: absolute;\n        background-color: var(--label-badge-blue);\n        width: calc(var(--base-unit) * 4);\n        height: calc(var(--base-unit) * 2);\n        top: calc(var(--base-unit) * 2);\n        margin-left: auto;\n        margin-right: auto;\n        border-radius: 0px 0px calc(var(--base-unit) * 2)\n          calc(var(--base-unit) * 2);\n        transform-origin: center top;\n      }\n      .init .gauge-c {\n        transition: all 1.3s ease-in-out;\n      }\n      .gauge-data {\n        z-index: 4;\n        color: var(--primary-text-color);\n        line-height: calc(var(--base-unit) * 0.3);\n        position: absolute;\n        width: calc(var(--base-unit) * 4);\n        height: calc(var(--base-unit) * 2.1);\n        top: calc(var(--base-unit) * 1.2);\n        margin-left: auto;\n        margin-right: auto;\n      }\n      .init .gauge-data {\n        transition: all 1s ease-out;\n      }\n      .gauge-data #percent {\n        font-size: calc(var(--base-unit) * 0.55);\n      }\n      .gauge-data #name {\n        padding-top: calc(var(--base-unit) * 0.15);\n        font-size: calc(var(--base-unit) * 0.3);\n      }\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-gauge-card\": HuiGaugeCard;\n  }\n}\n","import {\n  html,\n  LitElement,\n  PropertyValues,\n  TemplateResult,\n  customElement,\n  property,\n  css,\n  CSSResult,\n} from \"lit-element\";\nimport { classMap } from \"lit-html/directives/class-map\";\n\nimport computeStateDisplay from \"../../../common/entity/compute_state_display\";\nimport computeStateName from \"../../../common/entity/compute_state_name\";\nimport applyThemesOnElement from \"../../../common/dom/apply_themes_on_element\";\n\nimport \"../../../components/entity/state-badge\";\nimport \"../../../components/ha-card\";\nimport \"../../../components/ha-icon\";\nimport \"../components/hui-warning-element\";\n\nimport { HomeAssistant } from \"../../../types\";\nimport { LovelaceCard, LovelaceCardEditor } from \"../types\";\nimport { longPress } from \"../common/directives/long-press-directive\";\nimport { processConfigEntities } from \"../common/process-config-entities\";\nimport { handleClick } from \"../common/handle-click\";\nimport { GlanceCardConfig, ConfigEntity } from \"./types\";\n\n@customElement(\"hui-glance-card\")\nexport class HuiGlanceCard extends LitElement implements LovelaceCard {\n  public static async getConfigElement(): Promise<LovelaceCardEditor> {\n    await import(/* webpackChunkName: \"hui-glance-card-editor\" */ \"../editor/config-elements/hui-glance-card-editor\");\n    return document.createElement(\"hui-glance-card-editor\");\n  }\n\n  public static getStubConfig(): object {\n    return { entities: [] };\n  }\n\n  @property() public hass?: HomeAssistant;\n\n  @property() private _config?: GlanceCardConfig;\n\n  private _configEntities?: ConfigEntity[];\n\n  public getCardSize(): number {\n    return (\n      (this._config!.title ? 1 : 0) +\n      Math.ceil(this._configEntities!.length / 5)\n    );\n  }\n\n  public setConfig(config: GlanceCardConfig): void {\n    this._config = { theme: \"default\", ...config };\n    const entities = processConfigEntities<ConfigEntity>(config.entities);\n\n    for (const entity of entities) {\n      if (\n        (entity.tap_action &&\n          entity.tap_action.action === \"call-service\" &&\n          !entity.tap_action.service) ||\n        (entity.hold_action &&\n          entity.hold_action.action === \"call-service\" &&\n          !entity.hold_action.service)\n      ) {\n        throw new Error(\n          'Missing required property \"service\" when tap_action or hold_action is call-service'\n        );\n      }\n    }\n\n    const columns = config.columns || Math.min(config.entities.length, 5);\n    this.style.setProperty(\"--glance-column-width\", `${100 / columns}%`);\n\n    this._configEntities = entities;\n\n    if (this.hass) {\n      this.requestUpdate();\n    }\n  }\n\n  protected shouldUpdate(changedProps: PropertyValues): boolean {\n    if (changedProps.has(\"_config\")) {\n      return true;\n    }\n\n    const oldHass = changedProps.get(\"hass\") as HomeAssistant | undefined;\n    if (oldHass && this._configEntities) {\n      for (const entity of this._configEntities) {\n        if (\n          oldHass.states[entity.entity] !== this.hass!.states[entity.entity]\n        ) {\n          return true;\n        }\n      }\n      return false;\n    }\n    return true;\n  }\n\n  protected render(): TemplateResult | void {\n    if (!this._config || !this.hass) {\n      return html``;\n    }\n    const { title } = this._config;\n\n    return html`\n      <ha-card .header=\"${title}\">\n        <div class=\"${classMap({ entities: true, \"no-header\": !title })}\">\n          ${this._configEntities!.map((entityConf) =>\n            this.renderEntity(entityConf)\n          )}\n        </div>\n      </ha-card>\n    `;\n  }\n\n  protected updated(changedProperties: PropertyValues): void {\n    super.updated(changedProperties);\n    if (!this._config || !this.hass) {\n      return;\n    }\n\n    const oldHass = changedProperties.get(\"hass\") as HomeAssistant | undefined;\n    if (!oldHass || oldHass.themes !== this.hass.themes) {\n      applyThemesOnElement(this, this.hass.themes, this._config.theme);\n    }\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      .entities {\n        display: flex;\n        padding: 0 16px 4px;\n        flex-wrap: wrap;\n      }\n      .entities.no-header {\n        padding-top: 16px;\n      }\n      .entity {\n        box-sizing: border-box;\n        padding: 0 4px;\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n        cursor: pointer;\n        margin-bottom: 12px;\n        width: var(--glance-column-width, 20%);\n      }\n      .entity div {\n        width: 100%;\n        text-align: center;\n        white-space: nowrap;\n        overflow: hidden;\n        text-overflow: ellipsis;\n      }\n      .name {\n        min-height: var(--paper-font-body1_-_line-height, 20px);\n      }\n      state-badge {\n        margin: 8px 0;\n      }\n    `;\n  }\n\n  private renderEntity(entityConf): TemplateResult {\n    const stateObj = this.hass!.states[entityConf.entity];\n\n    if (!stateObj) {\n      return html`\n        <hui-warning-element\n          label=${this.hass!.localize(\n            \"ui.panel.lovelace.warning.entity_not_found\",\n            \"entity\",\n            entityConf.entity\n          )}\n        ></hui-warning-element>\n      `;\n    }\n\n    return html`\n      <div\n        class=\"entity\"\n        .entityConf=\"${entityConf}\"\n        @ha-click=\"${this._handleTap}\"\n        @ha-hold=\"${this._handleHold}\"\n        .longPress=\"${longPress()}\"\n      >\n        ${this._config!.show_name !== false\n          ? html`\n              <div class=\"name\">\n                ${\"name\" in entityConf\n                  ? entityConf.name\n                  : computeStateName(stateObj)}\n              </div>\n            `\n          : \"\"}\n        ${this._config!.show_icon !== false\n          ? html`\n              <state-badge\n                .stateObj=\"${stateObj}\"\n                .overrideIcon=\"${entityConf.icon}\"\n              ></state-badge>\n            `\n          : \"\"}\n        ${this._config!.show_state !== false\n          ? html`\n              <div>\n                ${computeStateDisplay(\n                  this.hass!.localize,\n                  stateObj,\n                  this.hass!.language\n                )}\n              </div>\n            `\n          : \"\"}\n      </div>\n    `;\n  }\n\n  private _handleTap(ev: MouseEvent): void {\n    const config = (ev.currentTarget as any).entityConf as ConfigEntity;\n    handleClick(this, this.hass!, config, false);\n  }\n\n  private _handleHold(ev: MouseEvent): void {\n    const config = (ev.currentTarget as any).entityConf as ConfigEntity;\n    handleClick(this, this.hass!, config, true);\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-glance-card\": HuiGlanceCard;\n  }\n}\n","import { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport \"../../../components/ha-card\";\nimport \"../../../components/state-history-charts\";\nimport \"../../../data/ha-state-history-data\";\n\nimport { processConfigEntities } from \"../common/process-config-entities\";\n\nclass HuiHistoryGraphCard extends PolymerElement {\n  static get template() {\n    return html`\n      <style>\n        .content {\n          padding: 16px;\n        }\n        [header] .content {\n          padding-top: 0;\n        }\n      </style>\n\n      <ha-card header$=\"[[_config.title]]\">\n        <div class=\"content\">\n          <ha-state-history-data\n            hass=\"[[hass]]\"\n            filter-type=\"recent-entity\"\n            entity-id=\"[[_entities]]\"\n            data=\"{{_stateHistory}}\"\n            is-loading=\"{{_stateHistoryLoading}}\"\n            cache-config=\"[[_cacheConfig]]\"\n          ></ha-state-history-data>\n          <state-history-charts\n            hass=\"[[hass]]\"\n            history-data=\"[[_stateHistory]]\"\n            is-loading-data=\"[[_stateHistoryLoading]]\"\n            names=\"[[_names]]\"\n            up-to-now\n            no-single\n          ></state-history-charts>\n        </div>\n      </ha-card>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      _config: Object,\n      _names: Object,\n      _entities: Array,\n\n      _stateHistory: Object,\n      _stateHistoryLoading: Boolean,\n      _cacheConfig: Object,\n    };\n  }\n\n  getCardSize() {\n    return 4;\n  }\n\n  setConfig(config) {\n    const entities = processConfigEntities(config.entities);\n\n    this._config = config;\n\n    const _entities = [];\n    const _names = {};\n    for (const entity of entities) {\n      _entities.push(entity.entity);\n      if (entity.name) {\n        _names[entity.entity] = entity.name;\n      }\n    }\n\n    this.setProperties({\n      _cacheConfig: {\n        cacheKey: _entities.sort().join(),\n        hoursToShow: config.hours_to_show || 24,\n        refresh: config.refresh_interval || 0,\n      },\n      _entities,\n      _names,\n    });\n  }\n}\n\ncustomElements.define(\"hui-history-graph-card\", HuiHistoryGraphCard);\n","import { html, TemplateResult } from \"lit-element\";\n\nimport { computeCardSize } from \"../common/compute-card-size\";\nimport { HuiStackCard } from \"./hui-stack-card\";\n\nclass HuiHorizontalStackCard extends HuiStackCard {\n  public getCardSize(): number {\n    let totalSize = 0;\n\n    if (this._cards) {\n      for (const element of this._cards) {\n        const elementSize = computeCardSize(element);\n        totalSize = elementSize > totalSize ? elementSize : totalSize;\n      }\n    }\n\n    return totalSize;\n  }\n\n  protected renderStyle(): TemplateResult {\n    return html`\n      <style>\n        #root {\n          display: flex;\n        }\n        #root > * {\n          flex: 1 1 0;\n          margin: 0 4px;\n          min-width: 0;\n        }\n        #root > *:first-child {\n          margin-left: 0;\n        }\n        #root > *:last-child {\n          margin-right: 0;\n        }\n      </style>\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-horitzontal-stack-card\": HuiHorizontalStackCard;\n  }\n}\n\ncustomElements.define(\"hui-horizontal-stack-card\", HuiHorizontalStackCard);\n","import {\n  html,\n  LitElement,\n  TemplateResult,\n  customElement,\n  property,\n  css,\n  CSSResult,\n} from \"lit-element\";\n\nimport \"../../../components/ha-card\";\n\nimport { LovelaceCard, LovelaceCardEditor } from \"../types\";\nimport { styleMap } from \"lit-html/directives/style-map\";\nimport { IframeCardConfig } from \"./types\";\n\n@customElement(\"hui-iframe-card\")\nexport class HuiIframeCard extends LitElement implements LovelaceCard {\n  public static async getConfigElement(): Promise<LovelaceCardEditor> {\n    await import(/* webpackChunkName: \"hui-iframe-card-editor\" */ \"../editor/config-elements/hui-iframe-card-editor\");\n    return document.createElement(\"hui-iframe-card-editor\");\n  }\n  public static getStubConfig(): object {\n    return { url: \"https://www.home-assistant.io\", aspect_ratio: \"50%\" };\n  }\n\n  @property() protected _config?: IframeCardConfig;\n\n  public getCardSize(): number {\n    if (!this._config) {\n      return 3;\n    }\n    const aspectRatio = this._config.aspect_ratio\n      ? Number(this._config.aspect_ratio.replace(\"%\", \"\"))\n      : 50;\n    return 1 + aspectRatio / 25;\n  }\n\n  public setConfig(config: IframeCardConfig): void {\n    if (!config.url) {\n      throw new Error(\"URL required\");\n    }\n\n    this._config = config;\n  }\n\n  protected render(): TemplateResult | void {\n    if (!this._config) {\n      return html``;\n    }\n\n    const aspectRatio = this._config.aspect_ratio || \"50%\";\n\n    return html`\n      <ha-card .header=\"${this._config.title}\">\n        <div\n          id=\"root\"\n          style=\"${styleMap({\n            \"padding-top\": aspectRatio,\n          })}\"\n        >\n          <iframe src=\"${this._config.url}\"></iframe>\n        </div>\n      </ha-card>\n    `;\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      ha-card {\n        overflow: hidden;\n      }\n\n      #root {\n        width: 100%;\n        position: relative;\n      }\n\n      iframe {\n        position: absolute;\n        border: none;\n        width: 100%;\n        height: 100%;\n        top: 0;\n        left: 0;\n      }\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-iframe-card\": HuiIframeCard;\n  }\n}\n","import { createErrorCardConfig } from \"./hui-error-card\";\nimport computeDomain from \"../../../common/entity/compute_domain\";\n\nexport default class LegacyWrapperCard extends HTMLElement {\n  constructor(tag, domain) {\n    super();\n    this._tag = tag.toUpperCase();\n    this._domain = domain;\n    this._element = null;\n  }\n\n  getCardSize() {\n    return 3;\n  }\n\n  setConfig(config) {\n    if (!config.entity) {\n      throw new Error(\"No entity specified\");\n    }\n\n    if (computeDomain(config.entity) !== this._domain) {\n      throw new Error(\n        `Specified entity needs to be of domain ${this._domain}.`\n      );\n    }\n\n    this._config = config;\n  }\n\n  set hass(hass) {\n    const entityId = this._config.entity;\n\n    if (entityId in hass.states) {\n      this._ensureElement(this._tag);\n      this.lastChild.hass = hass;\n      this.lastChild.stateObj = hass.states[entityId];\n      this.lastChild.config = this._config;\n    } else {\n      this._ensureElement(\"HUI-ERROR-CARD\");\n      this.lastChild.setConfig(\n        createErrorCardConfig(\n          `No state available for ${entityId}`,\n          this._config\n        )\n      );\n    }\n  }\n\n  _ensureElement(tag) {\n    if (this.lastChild && this.lastChild.tagName === tag) return;\n\n    if (this.lastChild) {\n      this.removeChild(this.lastChild);\n    }\n\n    this.appendChild(document.createElement(tag));\n  }\n}\n","import {\n  html,\n  LitElement,\n  PropertyValues,\n  TemplateResult,\n  property,\n  customElement,\n} from \"lit-element\";\nimport \"@polymer/paper-icon-button/paper-icon-button\";\n\nimport stateIcon from \"../../../common/entity/state_icon\";\nimport computeStateName from \"../../../common/entity/compute_state_name\";\nimport applyThemesOnElement from \"../../../common/dom/apply_themes_on_element\";\n\nimport \"../../../components/ha-card\";\nimport \"../../../components/ha-icon\";\nimport \"../components/hui-warning\";\n\nimport { fireEvent } from \"../../../common/dom/fire_event\";\nimport { styleMap } from \"lit-html/directives/style-map\";\nimport { HomeAssistant, LightEntity } from \"../../../types\";\nimport { LovelaceCard, LovelaceCardEditor } from \"../types\";\nimport { hasConfigOrEntityChanged } from \"../common/has-changed\";\nimport { loadRoundslider } from \"../../../resources/jquery.roundslider.ondemand\";\nimport { toggleEntity } from \"../common/entity/toggle-entity\";\nimport { LightCardConfig } from \"./types\";\n\nconst lightConfig = {\n  radius: 80,\n  step: 1,\n  circleShape: \"pie\",\n  startAngle: 315,\n  width: 5,\n  min: 1,\n  max: 100,\n  sliderType: \"min-range\",\n  lineCap: \"round\",\n  handleSize: \"+12\",\n  showTooltip: false,\n  animation: false,\n};\n\n@customElement(\"hui-light-card\")\nexport class HuiLightCard extends LitElement implements LovelaceCard {\n  public static async getConfigElement(): Promise<LovelaceCardEditor> {\n    await import(/* webpackChunkName: \"hui-light-card-editor\" */ \"../editor/config-elements/hui-light-card-editor\");\n    return document.createElement(\"hui-light-card-editor\");\n  }\n  public static getStubConfig(): object {\n    return {};\n  }\n\n  @property() public hass?: HomeAssistant;\n\n  @property() private _config?: LightCardConfig;\n\n  @property() private _roundSliderStyle?: TemplateResult;\n\n  @property() private _jQuery?: any;\n\n  private _brightnessTimout?: number;\n\n  public getCardSize(): number {\n    return 2;\n  }\n\n  public setConfig(config: LightCardConfig): void {\n    if (!config.entity || config.entity.split(\".\")[0] !== \"light\") {\n      throw new Error(\"Specify an entity from within the light domain.\");\n    }\n\n    this._config = { theme: \"default\", ...config };\n  }\n\n  protected render(): TemplateResult | void {\n    if (!this.hass || !this._config) {\n      return html``;\n    }\n\n    const stateObj = this.hass.states[this._config!.entity] as LightEntity;\n\n    if (!stateObj) {\n      return html`\n        <hui-warning\n          >${this.hass.localize(\n            \"ui.panel.lovelace.warning.entity_not_found\",\n            \"entity\",\n            this._config.entity\n          )}</hui-warning\n        >\n      `;\n    }\n\n    return html`\n      ${this.renderStyle()}\n      <ha-card>\n        <paper-icon-button\n          icon=\"hass:dots-vertical\"\n          class=\"more-info\"\n          @click=\"${this._handleMoreInfo}\"\n        ></paper-icon-button>\n        <div id=\"light\"></div>\n        <div id=\"tooltip\">\n          <div class=\"icon-state\">\n            <ha-icon\n              class=\"light-icon\"\n              data-state=\"${stateObj.state}\"\n              .icon=\"${stateIcon(stateObj)}\"\n              style=\"${styleMap({\n                filter: this._computeBrightness(stateObj),\n                color: this._computeColor(stateObj),\n              })}\"\n              @click=\"${this._handleTap}\"\n            ></ha-icon>\n            <div class=\"brightness\" @ha-click=\"${this._handleTap}\"></div>\n            <div class=\"name\">\n              ${this._config.name || computeStateName(stateObj)}\n            </div>\n          </div>\n        </div>\n      </ha-card>\n    `;\n  }\n\n  protected shouldUpdate(changedProps: PropertyValues): boolean {\n    return hasConfigOrEntityChanged(this, changedProps);\n  }\n\n  protected async firstUpdated(): Promise<void> {\n    const loaded = await loadRoundslider();\n\n    this._roundSliderStyle = loaded.roundSliderStyle;\n    this._jQuery = loaded.jQuery;\n\n    const stateObj = this.hass!.states[this._config!.entity] as LightEntity;\n\n    if (!stateObj) {\n      // Card will require refresh to work again\n      return;\n    }\n\n    const brightness = stateObj.attributes.brightness || 0;\n\n    this._jQuery(\"#light\", this.shadowRoot).roundSlider({\n      ...lightConfig,\n      change: (value) => this._setBrightness(value),\n      drag: (value) => this._dragEvent(value),\n      start: () => this._showBrightness(),\n      stop: () => this._hideBrightness(),\n    });\n    this.shadowRoot!.querySelector(\".brightness\")!.innerHTML =\n      (Math.round((brightness / 254) * 100) || 0) + \"%\";\n  }\n\n  protected updated(changedProps: PropertyValues): void {\n    super.updated(changedProps);\n    if (!this._config || !this.hass || !this._jQuery) {\n      return;\n    }\n\n    const stateObj = this.hass!.states[this._config!.entity];\n\n    if (!stateObj) {\n      return;\n    }\n\n    const attrs = stateObj.attributes;\n\n    this._jQuery(\"#light\", this.shadowRoot).roundSlider({\n      value: Math.round((attrs.brightness / 254) * 100) || 0,\n    });\n\n    const oldHass = changedProps.get(\"hass\") as HomeAssistant | undefined;\n    if (!oldHass || oldHass.themes !== this.hass.themes) {\n      applyThemesOnElement(this, this.hass.themes, this._config.theme);\n    }\n  }\n\n  private renderStyle(): TemplateResult {\n    return html`\n      ${this._roundSliderStyle}\n      <style>\n        :host {\n          display: block;\n        }\n\n        ha-card {\n          position: relative;\n          overflow: hidden;\n          --brightness-font-color: white;\n          --brightness-font-text-shadow: -1px -1px 0 #000, 1px -1px 0 #000,\n            -1px 1px 0 #000, 1px 1px 0 #000;\n          --name-font-size: 1.2rem;\n          --brightness-font-size: 1.2rem;\n          --rail-border-color: transparent;\n        }\n\n        #tooltip {\n          position: absolute;\n          top: 0;\n          left: 0;\n          right: 0;\n          height: 100%;\n          text-align: center;\n          z-index: 15;\n        }\n\n        .icon-state {\n          display: block;\n          margin: auto;\n          width: 100%;\n          height: 100%;\n          transform: translate(0, 25%);\n        }\n\n        #light {\n          margin: 0 auto;\n          padding-top: 16px;\n          padding-bottom: 16px;\n        }\n\n        #light .rs-bar.rs-transition.rs-first,\n        .rs-bar.rs-transition.rs-second {\n          z-index: 20 !important;\n        }\n\n        #light .rs-range-color {\n          background-color: var(--primary-color);\n        }\n\n        #light .rs-path-color {\n          background-color: var(--disabled-text-color);\n        }\n\n        #light .rs-handle {\n          background-color: var(--paper-card-background-color, white);\n          padding: 7px;\n          border: 2px solid var(--disabled-text-color);\n        }\n\n        #light .rs-handle.rs-focus {\n          border-color: var(--primary-color);\n        }\n\n        #light .rs-handle:after {\n          border-color: var(--primary-color);\n          background-color: var(--primary-color);\n        }\n\n        #light .rs-border {\n          border-color: var(--rail-border-color);\n        }\n\n        #light .rs-inner.rs-bg-color.rs-border,\n        #light .rs-overlay.rs-transition.rs-bg-color {\n          background-color: var(--paper-card-background-color, white);\n        }\n\n        .light-icon {\n          margin: auto;\n          width: 76px;\n          height: 76px;\n          color: var(--paper-item-icon-color, #44739e);\n          cursor: pointer;\n        }\n\n        .light-icon[data-state=\"on\"] {\n          color: var(--paper-item-icon-active-color, #fdd835);\n        }\n\n        .light-icon[data-state=\"unavailable\"] {\n          color: var(--state-icon-unavailable-color);\n        }\n\n        .name {\n          padding-top: 40px;\n          font-size: var(--name-font-size);\n        }\n\n        .brightness {\n          font-size: var(--brightness-font-size);\n          position: absolute;\n          margin: 0 auto;\n          left: 50%;\n          top: 10%;\n          transform: translate(-50%);\n          opacity: 0;\n          transition: opacity 0.5s ease-in-out;\n          -moz-transition: opacity 0.5s ease-in-out;\n          -webkit-transition: opacity 0.5s ease-in-out;\n          cursor: pointer;\n          color: var(--brightness-font-color);\n          text-shadow: var(--brightness-font-text-shadow);\n          pointer-events: none;\n        }\n\n        .show_brightness {\n          opacity: 1;\n        }\n\n        .more-info {\n          position: absolute;\n          cursor: pointer;\n          top: 0;\n          right: 0;\n          z-index: 25;\n          color: var(--secondary-text-color);\n        }\n      </style>\n    `;\n  }\n\n  private _dragEvent(e: any): void {\n    this.shadowRoot!.querySelector(\".brightness\")!.innerHTML = e.value + \"%\";\n  }\n\n  private _showBrightness(): void {\n    clearTimeout(this._brightnessTimout);\n    this.shadowRoot!.querySelector(\".brightness\")!.classList.add(\n      \"show_brightness\"\n    );\n  }\n\n  private _hideBrightness(): void {\n    this._brightnessTimout = window.setTimeout(() => {\n      this.shadowRoot!.querySelector(\".brightness\")!.classList.remove(\n        \"show_brightness\"\n      );\n    }, 500);\n  }\n\n  private _setBrightness(e: any): void {\n    this.hass!.callService(\"light\", \"turn_on\", {\n      entity_id: this._config!.entity,\n      brightness_pct: e.value,\n    });\n  }\n\n  private _computeBrightness(stateObj: LightEntity): string {\n    if (!stateObj.attributes.brightness) {\n      return \"\";\n    }\n    const brightness = stateObj.attributes.brightness;\n    return `brightness(${(brightness + 245) / 5}%)`;\n  }\n\n  private _computeColor(stateObj: LightEntity): string {\n    if (!stateObj.attributes.hs_color) {\n      return \"\";\n    }\n    const [hue, sat] = stateObj.attributes.hs_color;\n    if (sat <= 10) {\n      return \"\";\n    }\n    return `hsl(${hue}, 100%, ${100 - sat / 2}%)`;\n  }\n\n  private _handleTap() {\n    toggleEntity(this.hass!, this._config!.entity!);\n  }\n\n  private _handleMoreInfo() {\n    fireEvent(this, \"hass-more-info\", {\n      entityId: this._config!.entity,\n    });\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-light-card\": HuiLightCard;\n  }\n}\n","import \"@polymer/paper-icon-button/paper-icon-button\";\nimport { Layer, Marker, Circle, Map } from \"leaflet\";\nimport {\n  LitElement,\n  TemplateResult,\n  css,\n  html,\n  property,\n  PropertyValues,\n  CSSResult,\n  customElement,\n} from \"lit-element\";\n\nimport \"../../map/ha-entity-marker\";\n\nimport {\n  setupLeafletMap,\n  LeafletModuleType,\n} from \"../../../common/dom/setup-leaflet-map\";\nimport computeStateDomain from \"../../../common/entity/compute_state_domain\";\nimport computeStateName from \"../../../common/entity/compute_state_name\";\nimport { debounce } from \"../../../common/util/debounce\";\nimport parseAspectRatio from \"../../../common/util/parse-aspect-ratio\";\nimport computeDomain from \"../../../common/entity/compute_domain\";\n\nimport { HomeAssistant } from \"../../../types\";\nimport { LovelaceCard } from \"../types\";\nimport { EntityConfig } from \"../entity-rows/types\";\nimport { processConfigEntities } from \"../common/process-config-entities\";\nimport { MapCardConfig } from \"./types\";\n\n@customElement(\"hui-map-card\")\nclass HuiMapCard extends LitElement implements LovelaceCard {\n  public static async getConfigElement() {\n    await import(/* webpackChunkName: \"hui-map-card-editor\" */ \"../editor/config-elements/hui-map-card-editor\");\n    return document.createElement(\"hui-map-card-editor\");\n  }\n\n  public static getStubConfig() {\n    return { entities: [] };\n  }\n\n  @property() public hass?: HomeAssistant;\n\n  @property({ type: Boolean, reflect: true })\n  public isPanel = false;\n\n  @property()\n  private _config?: MapCardConfig;\n  private _configEntities?: EntityConfig[];\n  // tslint:disable-next-line\n  private Leaflet?: LeafletModuleType;\n  private _leafletMap?: Map;\n  // @ts-ignore\n  private _resizeObserver?: ResizeObserver;\n  private _debouncedResizeListener = debounce(\n    () => {\n      if (!this._leafletMap) {\n        return;\n      }\n      this._leafletMap.invalidateSize();\n    },\n    100,\n    false\n  );\n  private _mapItems: Array<Marker | Circle> = [];\n  private _connected = false;\n\n  public setConfig(config: MapCardConfig): void {\n    if (!config) {\n      throw new Error(\"Error in card configuration.\");\n    }\n\n    if (!config.entities && !config.geo_location_sources) {\n      throw new Error(\n        \"Either entities or geo_location_sources must be defined\"\n      );\n    }\n    if (config.entities && !Array.isArray(config.entities)) {\n      throw new Error(\"Entities need to be an array\");\n    }\n    if (\n      config.geo_location_sources &&\n      !Array.isArray(config.geo_location_sources)\n    ) {\n      throw new Error(\"Geo_location_sources needs to be an array\");\n    }\n\n    this._config = config;\n    this._configEntities = config.entities\n      ? processConfigEntities(config.entities)\n      : [];\n  }\n\n  public getCardSize(): number {\n    if (!this._config) {\n      return 3;\n    }\n    const ratio = parseAspectRatio(this._config.aspect_ratio);\n    const ar =\n      ratio && ratio.w > 0 && ratio.h > 0\n        ? `${((100 * ratio.h) / ratio.w).toFixed(2)}`\n        : \"100\";\n    return 1 + Math.floor(Number(ar) / 25) || 3;\n  }\n\n  public connectedCallback(): void {\n    super.connectedCallback();\n    this._connected = true;\n    if (this.hasUpdated) {\n      this.loadMap();\n      this._attachObserver();\n    }\n  }\n\n  public disconnectedCallback(): void {\n    super.disconnectedCallback();\n    this._connected = false;\n\n    if (this._leafletMap) {\n      this._leafletMap.remove();\n      this._leafletMap = undefined;\n      this.Leaflet = undefined;\n    }\n\n    if (this._resizeObserver) {\n      this._resizeObserver.unobserve(this._mapEl);\n    } else {\n      window.removeEventListener(\"resize\", this._debouncedResizeListener);\n    }\n  }\n\n  protected render(): TemplateResult | void {\n    if (!this._config) {\n      return html``;\n    }\n    return html`\n      <ha-card id=\"card\" .header=${this._config.title}>\n        <div id=\"root\">\n          <div id=\"map\"></div>\n          <paper-icon-button\n            @click=${this._fitMap}\n            icon=\"hass:image-filter-center-focus\"\n            title=\"Reset focus\"\n          ></paper-icon-button>\n        </div>\n      </ha-card>\n    `;\n  }\n\n  protected firstUpdated(changedProps: PropertyValues): void {\n    super.firstUpdated(changedProps);\n    this.loadMap();\n    const root = this.shadowRoot!.getElementById(\"root\");\n\n    if (!this._config || this.isPanel || !root) {\n      return;\n    }\n\n    if (this._connected) {\n      this._attachObserver();\n    }\n\n    const ratio = parseAspectRatio(this._config.aspect_ratio);\n\n    root.style.paddingBottom =\n      ratio && ratio.w > 0 && ratio.h > 0\n        ? `${((100 * ratio.h) / ratio.w).toFixed(2)}%`\n        : (root.style.paddingBottom = \"100%\");\n  }\n\n  protected updated(changedProps: PropertyValues): void {\n    if (changedProps.has(\"hass\")) {\n      this._drawEntities();\n    }\n  }\n\n  private get _mapEl(): HTMLDivElement {\n    return this.shadowRoot!.getElementById(\"map\") as HTMLDivElement;\n  }\n\n  private async loadMap(): Promise<void> {\n    [this._leafletMap, this.Leaflet] = await setupLeafletMap(this._mapEl);\n    this._drawEntities();\n    this._leafletMap.invalidateSize();\n    this._fitMap();\n  }\n\n  private _fitMap(): void {\n    if (!this._leafletMap || !this.Leaflet || !this._config || !this.hass) {\n      return;\n    }\n    const zoom = this._config.default_zoom;\n    if (this._mapItems.length === 0) {\n      this._leafletMap.setView(\n        new this.Leaflet.LatLng(\n          this.hass.config.latitude,\n          this.hass.config.longitude\n        ),\n        zoom || 14\n      );\n      return;\n    }\n\n    const bounds = this.Leaflet.latLngBounds(\n      this._mapItems ? this._mapItems.map((item) => item.getLatLng()) : []\n    );\n    this._leafletMap.fitBounds(bounds.pad(0.5));\n\n    if (zoom && this._leafletMap.getZoom() > zoom) {\n      this._leafletMap.setZoom(zoom);\n    }\n  }\n\n  private _drawEntities(): void {\n    const hass = this.hass;\n    const map = this._leafletMap;\n    const config = this._config;\n    const Leaflet = this.Leaflet;\n    if (!hass || !map || !config || !Leaflet) {\n      return;\n    }\n\n    if (this._mapItems) {\n      this._mapItems.forEach((marker) => marker.remove());\n    }\n    const mapItems: Layer[] = (this._mapItems = []);\n\n    const allEntities = this._configEntities!.concat();\n\n    // Calculate visible geo location sources\n    if (config.geo_location_sources) {\n      const includesAll = config.geo_location_sources.includes(\"all\");\n      for (const entityId of Object.keys(hass.states)) {\n        const stateObj = hass.states[entityId];\n        if (\n          computeDomain(entityId) === \"geo_location\" &&\n          (includesAll ||\n            config.geo_location_sources.includes(stateObj.attributes.source))\n        ) {\n          allEntities.push({ entity: entityId });\n        }\n      }\n    }\n\n    for (const entity of allEntities) {\n      const entityId = entity.entity;\n      const stateObj = hass.states[entityId];\n      if (!stateObj) {\n        continue;\n      }\n      const title = computeStateName(stateObj);\n      const {\n        latitude,\n        longitude,\n        passive,\n        icon,\n        radius,\n        entity_picture: entityPicture,\n        gps_accuracy: gpsAccuracy,\n      } = stateObj.attributes;\n\n      if (!(latitude && longitude)) {\n        continue;\n      }\n\n      if (computeStateDomain(stateObj) === \"zone\") {\n        // DRAW ZONE\n        if (passive) {\n          continue;\n        }\n\n        // create marker with the icon\n        mapItems.push(\n          Leaflet.marker([latitude, longitude], {\n            icon: Leaflet.divIcon({\n              html: icon ? `<ha-icon icon=\"${icon}\"></ha-icon>` : title,\n              iconSize: [24, 24],\n              className: \"\",\n            }),\n            interactive: false,\n            title,\n          })\n        );\n\n        // create circle around it\n        mapItems.push(\n          Leaflet.circle([latitude, longitude], {\n            interactive: false,\n            color: \"#FF9800\",\n            radius,\n          })\n        );\n\n        continue;\n      }\n\n      // DRAW ENTITY\n      // create icon\n      const entityName = title\n        .split(\" \")\n        .map((part) => part[0])\n        .join(\"\")\n        .substr(0, 3);\n\n      // create market with the icon\n      mapItems.push(\n        Leaflet.marker([latitude, longitude], {\n          icon: Leaflet.divIcon({\n            // Leaflet clones this element before adding it to the map. This messes up\n            // our Polymer object and we can't pass data through. Thus we hack like this.\n            html: `\n              <ha-entity-marker\n                entity-id=\"${entityId}\"\n                entity-name=\"${entityName}\"\n                entity-picture=\"${entityPicture || \"\"}\"\n              ></ha-entity-marker>\n            `,\n            iconSize: [48, 48],\n            className: \"\",\n          }),\n          title: computeStateName(stateObj),\n        })\n      );\n\n      // create circle around if entity has accuracy\n      if (gpsAccuracy) {\n        mapItems.push(\n          Leaflet.circle([latitude, longitude], {\n            interactive: false,\n            color: \"#0288D1\",\n            radius: gpsAccuracy,\n          })\n        );\n      }\n    }\n\n    this._mapItems.forEach((marker) => map.addLayer(marker));\n  }\n\n  private _attachObserver(): void {\n    // Observe changes to map size and invalidate to prevent broken rendering\n    // Uses ResizeObserver in Chrome, otherwise window resize event\n\n    // @ts-ignore\n    if (typeof ResizeObserver === \"function\") {\n      // @ts-ignore\n      this._resizeObserver = new ResizeObserver(() =>\n        this._debouncedResizeListener()\n      );\n      this._resizeObserver.observe(this._mapEl);\n    } else {\n      window.addEventListener(\"resize\", this._debouncedResizeListener);\n    }\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      :host([ispanel]) ha-card {\n        left: 0;\n        top: 0;\n        width: 100%;\n        /**\n       * In panel mode we want a full height map. Since parent #view\n       * only sets min-height, we need absolute positioning here\n       */\n        height: 100%;\n        position: absolute;\n      }\n\n      ha-card {\n        overflow: hidden;\n      }\n\n      #map {\n        z-index: 0;\n        border: none;\n        position: absolute;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n      }\n\n      paper-icon-button {\n        position: absolute;\n        top: 75px;\n        left: 7px;\n      }\n\n      #root {\n        position: relative;\n      }\n\n      :host([ispanel]) #root {\n        height: 100%;\n      }\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-map-card\": HuiMapCard;\n  }\n}\n","import {\n  html,\n  LitElement,\n  TemplateResult,\n  customElement,\n  property,\n  css,\n  CSSResult,\n} from \"lit-element\";\nimport { classMap } from \"lit-html/directives/class-map\";\n\nimport \"../../../components/ha-card\";\nimport \"../../../components/ha-markdown\";\n\nimport { LovelaceCard, LovelaceCardEditor } from \"../types\";\nimport { MarkdownCardConfig } from \"./types\";\n\n@customElement(\"hui-markdown-card\")\nexport class HuiMarkdownCard extends LitElement implements LovelaceCard {\n  public static async getConfigElement(): Promise<LovelaceCardEditor> {\n    await import(/* webpackChunkName: \"hui-markdown-card-editor\" */ \"../editor/config-elements/hui-markdown-card-editor\");\n    return document.createElement(\"hui-markdown-card-editor\");\n  }\n\n  public static getStubConfig(): object {\n    return { content: \" \" };\n  }\n\n  @property() private _config?: MarkdownCardConfig;\n\n  public getCardSize(): number {\n    return this._config!.content.split(\"\\n\").length;\n  }\n\n  public setConfig(config: MarkdownCardConfig): void {\n    if (!config.content) {\n      throw new Error(\"Invalid Configuration: Content Required\");\n    }\n\n    this._config = config;\n  }\n\n  protected render(): TemplateResult | void {\n    if (!this._config) {\n      return html``;\n    }\n\n    return html`\n      <ha-card .header=\"${this._config.title}\">\n        <ha-markdown\n          class=\"markdown ${classMap({\n            \"no-header\": !this._config.title,\n          })}\"\n          .content=\"${this._config.content}\"\n        ></ha-markdown>\n      </ha-card>\n    `;\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      :host {\n        /* start paper-font-body1 style */\n        font-family: \"Roboto\", \"Noto\", sans-serif;\n        -webkit-font-smoothing: antialiased; /* OS X subpixel AA bleed bug */\n        font-size: 14px;\n        font-weight: 400;\n        line-height: 20px;\n        /* end paper-font-body1 style */\n      }\n      ha-markdown {\n        display: block;\n        padding: 0 16px 16px;\n        -ms-user-select: initial;\n        -webkit-user-select: initial;\n        -moz-user-select: initial;\n      }\n      .markdown.no-header {\n        padding-top: 16px;\n      }\n      ha-markdown > *:first-child {\n        margin-top: 0;\n      }\n      ha-markdown > *:last-child {\n        margin-bottom: 0;\n      }\n      ha-markdown a {\n        color: var(--primary-color);\n      }\n      ha-markdown img {\n        max-width: 100%;\n      }\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-markdown-card\": HuiMarkdownCard;\n  }\n}\n","import \"../../../cards/ha-media_player-card\";\n\nimport LegacyWrapperCard from \"./hui-legacy-wrapper-card\";\n\nclass HuiMediaControlCard extends LegacyWrapperCard {\n  static async getConfigElement() {\n    await import(/* webpackChunkName: \"hui-media-control-card-editor\" */ \"../editor/config-elements/hui-media-control-card-editor\");\n    return document.createElement(\"hui-media-control-card-editor\");\n  }\n\n  static getStubConfig() {\n    return {};\n  }\n\n  constructor() {\n    super(\"ha-media_player-card\", \"media_player\");\n  }\n}\n\ncustomElements.define(\"hui-media-control-card\", HuiMediaControlCard);\n","import {\n  html,\n  LitElement,\n  TemplateResult,\n  customElement,\n  property,\n  css,\n  CSSResult,\n} from \"lit-element\";\n\nimport \"../../../components/ha-card\";\n\nimport { LovelaceCard, LovelaceCardEditor } from \"../types\";\nimport { HomeAssistant } from \"../../../types\";\nimport { classMap } from \"lit-html/directives/class-map\";\nimport { handleClick } from \"../common/handle-click\";\nimport { longPress } from \"../common/directives/long-press-directive\";\nimport { PictureCardConfig } from \"./types\";\n\n@customElement(\"hui-picture-card\")\nexport class HuiPictureCard extends LitElement implements LovelaceCard {\n  public static async getConfigElement(): Promise<LovelaceCardEditor> {\n    await import(/* webpackChunkName: \"hui-picture-card-editor\" */ \"../editor/config-elements/hui-picture-card-editor\");\n    return document.createElement(\"hui-picture-card-editor\");\n  }\n  public static getStubConfig(): object {\n    return {\n      image:\n        \"https://www.home-assistant.io/images/merchandise/shirt-frontpage.png\",\n      tap_action: { action: \"none\" },\n      hold_action: { action: \"none\" },\n    };\n  }\n\n  public hass?: HomeAssistant;\n\n  @property() protected _config?: PictureCardConfig;\n\n  public getCardSize(): number {\n    return 3;\n  }\n\n  public setConfig(config: PictureCardConfig): void {\n    if (!config || !config.image) {\n      throw new Error(\"Invalid Configuration: 'image' required\");\n    }\n\n    this._config = config;\n  }\n\n  protected render(): TemplateResult | void {\n    if (!this._config || !this.hass) {\n      return html``;\n    }\n\n    return html`\n      <ha-card\n        @ha-click=\"${this._handleTap}\"\n        @ha-hold=\"${this._handleHold}\"\n        .longPress=\"${longPress()}\"\n        class=\"${classMap({\n          clickable: Boolean(\n            this._config.tap_action || this._config.hold_action\n          ),\n        })}\"\n      >\n        <img src=\"${this._config.image}\" />\n      </ha-card>\n    `;\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      ha-card {\n        overflow: hidden;\n      }\n\n      ha-card.clickable {\n        cursor: pointer;\n      }\n\n      img {\n        display: block;\n        width: 100%;\n      }\n    `;\n  }\n\n  private _handleTap() {\n    handleClick(this, this.hass!, this._config!, false);\n  }\n\n  private _handleHold() {\n    handleClick(this, this.hass!, this._config!, true);\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-picture-card\": HuiPictureCard;\n  }\n}\n","import {\n  html,\n  LitElement,\n  TemplateResult,\n  property,\n  customElement,\n  css,\n  CSSResult,\n} from \"lit-element\";\n\nimport { createStyledHuiElement } from \"./picture-elements/create-styled-hui-element\";\nimport { LovelaceCard } from \"../types\";\nimport { HomeAssistant } from \"../../../types\";\nimport { LovelaceElementConfig, LovelaceElement } from \"../elements/types\";\nimport { PictureElementsCardConfig } from \"./types\";\n\n@customElement(\"hui-picture-elements-card\")\nclass HuiPictureElementsCard extends LitElement implements LovelaceCard {\n  @property() private _config?: PictureElementsCardConfig;\n\n  private _hass?: HomeAssistant;\n\n  set hass(hass: HomeAssistant) {\n    this._hass = hass;\n    for (const el of this.shadowRoot!.querySelectorAll(\"#root > *\")) {\n      const element = el as LovelaceElement;\n      element.hass = this._hass;\n    }\n  }\n\n  public getCardSize(): number {\n    return 4;\n  }\n\n  public setConfig(config: PictureElementsCardConfig): void {\n    if (!config) {\n      throw new Error(\"Invalid Configuration\");\n    } else if (\n      !(config.image || config.camera_image || config.state_image) ||\n      (config.state_image && !config.entity)\n    ) {\n      throw new Error(\"Invalid Configuration: image required\");\n    } else if (!Array.isArray(config.elements)) {\n      throw new Error(\"Invalid Configuration: elements required\");\n    }\n\n    this._config = config;\n  }\n\n  protected render(): TemplateResult | void {\n    if (!this._config) {\n      return html``;\n    }\n\n    return html`\n      <ha-card .header=\"${this._config.title}\">\n        <div id=\"root\">\n          <hui-image\n            .hass=\"${this._hass}\"\n            .image=\"${this._config.image}\"\n            .stateImage=\"${this._config.state_image}\"\n            .cameraImage=\"${this._config.camera_image}\"\n            .cameraView=\"${this._config.camera_view}\"\n            .entity=\"${this._config.entity}\"\n            .aspectRatio=\"${this._config.aspect_ratio}\"\n          ></hui-image>\n          ${this._config.elements.map(\n            (elementConfig: LovelaceElementConfig) => {\n              const element = createStyledHuiElement(elementConfig);\n              element.hass = this._hass;\n\n              return element;\n            }\n          )}\n        </div>\n      </ha-card>\n    `;\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      #root {\n        position: relative;\n      }\n\n      .element {\n        position: absolute;\n        transform: translate(-50%, -50%);\n      }\n\n      ha-card {\n        overflow: hidden;\n      }\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-picture-elements-card\": HuiPictureElementsCard;\n  }\n}\n","import {\n  html,\n  LitElement,\n  TemplateResult,\n  customElement,\n  property,\n  css,\n  CSSResult,\n  PropertyValues,\n} from \"lit-element\";\nimport { classMap } from \"lit-html/directives/class-map\";\n\nimport \"../../../components/ha-card\";\nimport \"../components/hui-image\";\nimport \"../components/hui-warning\";\n\nimport computeDomain from \"../../../common/entity/compute_domain\";\nimport computeStateDisplay from \"../../../common/entity/compute_state_display\";\nimport computeStateName from \"../../../common/entity/compute_state_name\";\n\nimport { longPress } from \"../common/directives/long-press-directive\";\nimport { HomeAssistant } from \"../../../types\";\nimport { LovelaceCard } from \"../types\";\nimport { handleClick } from \"../common/handle-click\";\nimport { UNAVAILABLE } from \"../../../data/entity\";\nimport { hasConfigOrEntityChanged } from \"../common/has-changed\";\nimport { PictureEntityCardConfig } from \"./types\";\n\n@customElement(\"hui-picture-entity-card\")\nclass HuiPictureEntityCard extends LitElement implements LovelaceCard {\n  @property() public hass?: HomeAssistant;\n\n  @property() private _config?: PictureEntityCardConfig;\n\n  public getCardSize(): number {\n    return 3;\n  }\n\n  public setConfig(config: PictureEntityCardConfig): void {\n    if (!config || !config.entity) {\n      throw new Error(\"Invalid Configuration: 'entity' required\");\n    }\n\n    if (\n      computeDomain(config.entity) !== \"camera\" &&\n      (!config.image && !config.state_image && !config.camera_image)\n    ) {\n      throw new Error(\"No image source configured.\");\n    }\n\n    this._config = { show_name: true, show_state: true, ...config };\n  }\n\n  protected shouldUpdate(changedProps: PropertyValues): boolean {\n    return hasConfigOrEntityChanged(this, changedProps);\n  }\n\n  protected render(): TemplateResult | void {\n    if (!this._config || !this.hass) {\n      return html``;\n    }\n\n    const stateObj = this.hass.states[this._config.entity];\n\n    if (!stateObj) {\n      return html`\n        <hui-warning\n          >${this.hass.localize(\n            \"ui.panel.lovelace.warning.entity_not_found\",\n            \"entity\",\n            this._config.entity\n          )}</hui-warning\n        >\n      `;\n    }\n\n    const name = this._config.name || computeStateName(stateObj);\n    const state = computeStateDisplay(\n      this.hass!.localize,\n      stateObj,\n      this.hass.language\n    );\n\n    let footer: TemplateResult | string = \"\";\n    if (this._config.show_name && this._config.show_state) {\n      footer = html`\n        <div class=\"footer both\">\n          <div>${name}</div>\n          <div>${state}</div>\n        </div>\n      `;\n    } else if (this._config.show_name) {\n      footer = html`\n        <div class=\"footer\">${name}</div>\n      `;\n    } else if (this._config.show_state) {\n      footer = html`\n        <div class=\"footer state\">${state}</div>\n      `;\n    }\n\n    return html`\n      <ha-card>\n        <hui-image\n          .hass=\"${this.hass}\"\n          .image=\"${this._config.image}\"\n          .stateImage=\"${this._config.state_image}\"\n          .cameraImage=\"${computeDomain(this._config.entity) === \"camera\"\n            ? this._config.entity\n            : this._config.camera_image}\"\n          .cameraView=\"${this._config.camera_view}\"\n          .entity=\"${this._config.entity}\"\n          .aspectRatio=\"${this._config.aspect_ratio}\"\n          @ha-click=\"${this._handleTap}\"\n          @ha-hold=\"${this._handleHold}\"\n          .longPress=\"${longPress()}\"\n          class=\"${classMap({\n            clickable: stateObj.state !== UNAVAILABLE,\n          })}\"\n        ></hui-image>\n        ${footer}\n      </ha-card>\n    `;\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      ha-card {\n        min-height: 75px;\n        overflow: hidden;\n        position: relative;\n      }\n\n      hui-image.clickable {\n        cursor: pointer;\n      }\n\n      .footer {\n        /* start paper-font-common-nowrap style */\n        white-space: nowrap;\n        overflow: hidden;\n        text-overflow: ellipsis;\n        /* end paper-font-common-nowrap style */\n\n        position: absolute;\n        left: 0;\n        right: 0;\n        bottom: 0;\n        background-color: rgba(0, 0, 0, 0.3);\n        padding: 16px;\n        font-size: 16px;\n        line-height: 16px;\n        color: white;\n      }\n\n      .both {\n        display: flex;\n        justify-content: space-between;\n      }\n\n      .state {\n        text-align: right;\n      }\n    `;\n  }\n\n  private _handleTap() {\n    handleClick(this, this.hass!, this._config!, false);\n  }\n\n  private _handleHold() {\n    handleClick(this, this.hass!, this._config!, true);\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-picture-entity-card\": HuiPictureEntityCard;\n  }\n}\n","import {\n  html,\n  LitElement,\n  TemplateResult,\n  customElement,\n  property,\n  css,\n  CSSResult,\n  PropertyValues,\n} from \"lit-element\";\nimport { classMap } from \"lit-html/directives/class-map\";\n\nimport computeStateDisplay from \"../../../common/entity/compute_state_display\";\nimport computeStateName from \"../../../common/entity/compute_state_name\";\nimport computeDomain from \"../../../common/entity/compute_domain\";\nimport stateIcon from \"../../../common/entity/state_icon\";\n\nimport \"../../../components/ha-card\";\nimport \"../../../components/ha-icon\";\nimport \"../components/hui-image\";\nimport \"../components/hui-warning-element\";\n\nimport { DOMAINS_TOGGLE } from \"../../../common/const\";\nimport { LovelaceCard } from \"../types\";\nimport { EntityConfig } from \"../entity-rows/types\";\nimport { HomeAssistant } from \"../../../types\";\nimport { longPress } from \"../common/directives/long-press-directive\";\nimport { processConfigEntities } from \"../common/process-config-entities\";\nimport { handleClick } from \"../common/handle-click\";\nimport { fireEvent } from \"../../../common/dom/fire_event\";\nimport { toggleEntity } from \"../common/entity/toggle-entity\";\nimport { PictureGlanceCardConfig } from \"./types\";\n\nconst STATES_OFF = new Set([\"closed\", \"locked\", \"not_home\", \"off\"]);\n\n@customElement(\"hui-picture-glance-card\")\nclass HuiPictureGlanceCard extends LitElement implements LovelaceCard {\n  @property() public hass?: HomeAssistant;\n\n  @property() private _config?: PictureGlanceCardConfig;\n\n  private _entitiesDialog?: EntityConfig[];\n\n  private _entitiesToggle?: EntityConfig[];\n\n  public getCardSize(): number {\n    return 3;\n  }\n\n  public setConfig(config: PictureGlanceCardConfig): void {\n    if (\n      !config ||\n      !config.entities ||\n      !Array.isArray(config.entities) ||\n      !(config.image || config.camera_image || config.state_image) ||\n      (config.state_image && !config.entity)\n    ) {\n      throw new Error(\"Invalid card configuration\");\n    }\n\n    const entities = processConfigEntities(config.entities);\n    this._entitiesDialog = [];\n    this._entitiesToggle = [];\n\n    entities.forEach((item) => {\n      if (\n        config.force_dialog ||\n        !DOMAINS_TOGGLE.has(computeDomain(item.entity))\n      ) {\n        this._entitiesDialog!.push(item);\n      } else {\n        this._entitiesToggle!.push(item);\n      }\n    });\n\n    this._config = config;\n  }\n\n  protected shouldUpdate(changedProps: PropertyValues): boolean {\n    if (changedProps.has(\"_config\")) {\n      return true;\n    }\n\n    const oldHass = changedProps.get(\"hass\") as HomeAssistant | undefined;\n    if (!oldHass) {\n      return true;\n    }\n\n    if (this._entitiesDialog) {\n      for (const entity of this._entitiesDialog) {\n        if (\n          oldHass.states[entity.entity] !== this.hass!.states[entity.entity]\n        ) {\n          return true;\n        }\n      }\n    }\n\n    if (this._entitiesToggle) {\n      for (const entity of this._entitiesToggle) {\n        if (\n          oldHass.states[entity.entity] !== this.hass!.states[entity.entity]\n        ) {\n          return true;\n        }\n      }\n    }\n\n    return false;\n  }\n\n  protected render(): TemplateResult | void {\n    if (!this._config || !this.hass) {\n      return html``;\n    }\n\n    return html`\n      <ha-card>\n        <hui-image\n          class=\"${classMap({\n            clickable: Boolean(\n              this._config.tap_action ||\n                this._config.hold_action ||\n                this._config.camera_image\n            ),\n          })}\"\n          @ha-click=\"${this._handleTap}\"\n          @ha-hold=\"${this._handleHold}\"\n          .longPress=\"${longPress()}\"\n          .hass=\"${this.hass}\"\n          .image=\"${this._config.image}\"\n          .stateImage=\"${this._config.state_image}\"\n          .cameraImage=\"${this._config.camera_image}\"\n          .cameraView=\"${this._config.camera_view}\"\n          .entity=\"${this._config.entity}\"\n          .aspectRatio=\"${this._config.aspect_ratio}\"\n        ></hui-image>\n        <div class=\"box\">\n          ${this._config.title\n            ? html`\n                <div class=\"title\">${this._config.title}</div>\n              `\n            : \"\"}\n          <div>\n            ${this._entitiesDialog!.map((entityConf) =>\n              this.renderEntity(entityConf, true)\n            )}\n          </div>\n          <div>\n            ${this._entitiesToggle!.map((entityConf) =>\n              this.renderEntity(entityConf, false)\n            )}\n          </div>\n        </div>\n      </ha-card>\n    `;\n  }\n\n  private renderEntity(\n    entityConf: EntityConfig,\n    dialog: boolean\n  ): TemplateResult {\n    const stateObj = this.hass!.states[entityConf.entity];\n\n    if (!stateObj) {\n      return html`\n        <hui-warning-element\n          label=${this.hass!.localize(\n            \"ui.panel.lovelace.warning.entity_not_found\",\n            \"entity\",\n            entityConf.entity\n          )}\n        ></hui-warning-element>\n      `;\n    }\n\n    return html`\n      <ha-icon\n        .entity=\"${stateObj.entity_id}\"\n        @click=\"${dialog ? this._openDialog : this._callService}\"\n        class=\"${classMap({\n          \"state-on\": !STATES_OFF.has(stateObj.state),\n        })}\"\n        .icon=\"${entityConf.icon || stateIcon(stateObj)}\"\n        title=\"${`\n            ${computeStateName(stateObj)} : ${computeStateDisplay(\n          this.hass!.localize,\n          stateObj,\n          this.hass!.language\n        )}\n          `}\"\n      ></ha-icon>\n    `;\n  }\n\n  private _handleTap() {\n    handleClick(this, this.hass!, this._config!, false);\n  }\n\n  private _handleHold() {\n    handleClick(this, this.hass!, this._config!, true);\n  }\n\n  private _openDialog(ev: MouseEvent): void {\n    fireEvent(this, \"hass-more-info\", { entityId: (ev.target as any).entity });\n  }\n\n  private _callService(ev: MouseEvent): void {\n    toggleEntity(this.hass!, (ev.target as any).entity);\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      ha-card {\n        position: relative;\n        min-height: 48px;\n        overflow: hidden;\n      }\n\n      hui-image.clickable {\n        cursor: pointer;\n      }\n\n      .box {\n        /* start paper-font-common-nowrap style */\n        white-space: nowrap;\n        overflow: hidden;\n        text-overflow: ellipsis;\n        /* end paper-font-common-nowrap style */\n\n        position: absolute;\n        left: 0;\n        right: 0;\n        bottom: 0;\n        background-color: rgba(0, 0, 0, 0.3);\n        padding: 4px 8px;\n        font-size: 16px;\n        line-height: 40px;\n        color: white;\n        display: flex;\n        justify-content: space-between;\n      }\n\n      .box .title {\n        font-weight: 500;\n        margin-left: 8px;\n      }\n\n      ha-icon {\n        cursor: pointer;\n        padding: 8px;\n        color: #a9a9a9;\n      }\n\n      ha-icon.state-on {\n        color: white;\n      }\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-picture-glance-card\": HuiPictureGlanceCard;\n  }\n}\n","import {\n  html,\n  LitElement,\n  TemplateResult,\n  css,\n  CSSResult,\n  property,\n  customElement,\n  PropertyValues,\n} from \"lit-element\";\nimport { HassEntity } from \"home-assistant-js-websocket\";\n\nimport \"../../../components/ha-card\";\nimport \"../../../components/ha-icon\";\n\nimport computeStateName from \"../../../common/entity/compute_state_name\";\n\nimport { LovelaceCardEditor, LovelaceCard } from \"../types\";\nimport { HomeAssistant } from \"../../../types\";\nimport { fireEvent } from \"../../../common/dom/fire_event\";\nimport { hasConfigOrEntityChanged } from \"../common/has-changed\";\nimport { PlantStatusCardConfig, PlantAttributeTarget } from \"./types\";\n\nconst SENSORS = {\n  moisture: \"hass:water\",\n  temperature: \"hass:thermometer\",\n  brightness: \"hass:white-balance-sunny\",\n  conductivity: \"hass:emoticon-poop\",\n  battery: \"hass:battery\",\n};\n\n@customElement(\"hui-plant-status-card\")\nclass HuiPlantStatusCard extends LitElement implements LovelaceCard {\n  public static async getConfigElement(): Promise<LovelaceCardEditor> {\n    await import(/* webpackChunkName: \"hui-plant-status-card-editor\" */ \"../editor/config-elements/hui-plant-status-card-editor\");\n    return document.createElement(\"hui-plant-status-card-editor\");\n  }\n\n  public static getStubConfig(): object {\n    return {};\n  }\n\n  @property() public hass?: HomeAssistant;\n\n  @property() private _config?: PlantStatusCardConfig;\n\n  public getCardSize(): number {\n    return 3;\n  }\n\n  public setConfig(config: PlantStatusCardConfig): void {\n    if (!config.entity || config.entity.split(\".\")[0] !== \"plant\") {\n      throw new Error(\"Specify an entity from within the plant domain.\");\n    }\n\n    this._config = config;\n  }\n\n  protected shouldUpdate(changedProps: PropertyValues): boolean {\n    return hasConfigOrEntityChanged(this, changedProps);\n  }\n\n  protected render(): TemplateResult | void {\n    if (!this.hass || !this._config) {\n      return html``;\n    }\n\n    const stateObj = this.hass.states[this._config!.entity];\n\n    if (!stateObj) {\n      return html`\n        <hui-warning\n          >${this.hass.localize(\n            \"ui.panel.lovelace.warning.entity_not_found\",\n            \"entity\",\n            this._config.entity\n          )}</hui-warning\n        >\n      `;\n    }\n\n    return html`\n      <ha-card\n        class=\"${stateObj.attributes.entity_picture ? \"has-plant-image\" : \"\"}\"\n      >\n        <div\n          class=\"banner\"\n          style=\"background-image:url(${stateObj.attributes.entity_picture})\"\n        >\n          <div class=\"header\">\n            ${this._config.name || computeStateName(stateObj)}\n          </div>\n        </div>\n        <div class=\"content\">\n          ${this.computeAttributes(stateObj).map(\n            (item) => html`\n              <div\n                class=\"attributes\"\n                @click=\"${this._handleMoreInfo}\"\n                .value=\"${item}\"\n              >\n                <div>\n                  <ha-icon\n                    icon=\"${this.computeIcon(\n                      item,\n                      stateObj.attributes.battery\n                    )}\"\n                  ></ha-icon>\n                </div>\n                <div\n                  class=\"${stateObj.attributes.problem.indexOf(item) === -1\n                    ? \"\"\n                    : \"problem\"}\"\n                >\n                  ${stateObj.attributes[item]}\n                </div>\n                <div class=\"uom\">\n                  ${stateObj.attributes.unit_of_measurement_dict[item] || \"\"}\n                </div>\n              </div>\n            `\n          )}\n        </div>\n      </ha-card>\n    `;\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      .banner {\n        display: flex;\n        align-items: flex-end;\n        background-repeat: no-repeat;\n        background-size: cover;\n        background-position: center;\n        padding-top: 12px;\n      }\n\n      .has-plant-image .banner {\n        padding-top: 30%;\n      }\n\n      .header {\n        /* start paper-font-headline style */\n        font-family: \"Roboto\", \"Noto\", sans-serif;\n        -webkit-font-smoothing: antialiased; /* OS X subpixel AA bleed bug */\n        text-rendering: optimizeLegibility;\n        font-size: 24px;\n        font-weight: 400;\n        letter-spacing: -0.012em;\n        /* end paper-font-headline style */\n\n        line-height: 40px;\n        padding: 8px 16px;\n      }\n\n      .has-plant-image .header {\n        font-size: 16px;\n        font-weight: 500;\n        line-height: 16px;\n        padding: 16px;\n        color: white;\n        width: 100%;\n        background: rgba(0, 0, 0, var(--dark-secondary-opacity));\n      }\n\n      .content {\n        display: flex;\n        justify-content: space-between;\n        padding: 16px 32px 24px 32px;\n      }\n\n      .has-plant-image .content {\n        padding-bottom: 16px;\n      }\n\n      ha-icon {\n        color: var(--paper-item-icon-color);\n        margin-bottom: 8px;\n      }\n\n      .attributes {\n        cursor: pointer;\n      }\n\n      .attributes div {\n        text-align: center;\n      }\n\n      .problem {\n        color: var(--google-red-500);\n        font-weight: bold;\n      }\n\n      .uom {\n        color: var(--secondary-text-color);\n      }\n    `;\n  }\n\n  private computeAttributes(stateObj: HassEntity): string[] {\n    return Object.keys(SENSORS).filter((key) => key in stateObj.attributes);\n  }\n\n  private computeIcon(attr: string, batLvl: number): string {\n    const icon = SENSORS[attr];\n    if (attr === \"battery\") {\n      if (batLvl <= 5) {\n        return `${icon}-alert`;\n      }\n      if (batLvl < 95) {\n        return `${icon}-${Math.round(batLvl / 10 - 0.01) * 10}`;\n      }\n    }\n    return icon;\n  }\n\n  private _handleMoreInfo(ev: Event): void {\n    const target = ev.currentTarget! as PlantAttributeTarget;\n    const stateObj = this.hass!.states[this._config!.entity];\n\n    if (target.value) {\n      fireEvent(this, \"hass-more-info\", {\n        entityId: stateObj.attributes.sensors[target.value],\n      });\n    }\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-plant-status-card\": HuiPlantStatusCard;\n  }\n}\n","import {\n  html,\n  svg,\n  LitElement,\n  PropertyValues,\n  TemplateResult,\n  customElement,\n  property,\n  css,\n  CSSResult,\n} from \"lit-element\";\nimport \"@polymer/paper-spinner/paper-spinner\";\n\nimport applyThemesOnElement from \"../../../common/dom/apply_themes_on_element\";\nimport computeStateName from \"../../../common/entity/compute_state_name\";\nimport stateIcon from \"../../../common/entity/state_icon\";\n\nimport \"../../../components/ha-card\";\nimport \"../../../components/ha-icon\";\nimport \"../components/hui-warning\";\n\nimport { LovelaceCard, LovelaceCardEditor } from \"../types\";\nimport { HomeAssistant } from \"../../../types\";\nimport { fireEvent } from \"../../../common/dom/fire_event\";\nimport { fetchRecent } from \"../../../data/history\";\nimport { SensorCardConfig } from \"./types\";\nimport { hasConfigOrEntityChanged } from \"../common/has-changed\";\n\nconst midPoint = (\n  _Ax: number,\n  _Ay: number,\n  _Bx: number,\n  _By: number\n): number[] => {\n  const _Zx = (_Ax - _Bx) / 2 + _Bx;\n  const _Zy = (_Ay - _By) / 2 + _By;\n  return [_Zx, _Zy];\n};\n\nconst getPath = (coords: number[][]): string => {\n  let next;\n  let Z;\n  const X = 0;\n  const Y = 1;\n  let path = \"\";\n  let last = coords.filter(Boolean)[0];\n\n  path += `M ${last[X]},${last[Y]}`;\n\n  for (const coord of coords) {\n    next = coord;\n    Z = midPoint(last[X], last[Y], next[X], next[Y]);\n    path += ` ${Z[X]},${Z[Y]}`;\n    path += ` Q${next[X]},${next[Y]}`;\n    last = next;\n  }\n\n  path += ` ${next[X]},${next[Y]}`;\n  return path;\n};\n\nconst calcPoints = (\n  history: any,\n  hours: number,\n  width: number,\n  detail: number,\n  min: number,\n  max: number\n): number[][] => {\n  const coords = [] as number[][];\n  const margin = 5;\n  const height = 80;\n  width -= 10;\n  let yRatio = (max - min) / height;\n  yRatio = yRatio !== 0 ? yRatio : height;\n  let xRatio = width / (hours - (detail === 1 ? 1 : 0));\n  xRatio = isFinite(xRatio) ? xRatio : width;\n  const getCoords = (item, i, offset = 0, depth = 1) => {\n    if (depth > 1) {\n      return item.forEach((subItem, index) =>\n        getCoords(subItem, i, index, depth - 1)\n      );\n    }\n    const average =\n      item.reduce((sum, entry) => sum + parseFloat(entry.state), 0) /\n      item.length;\n\n    const x = xRatio * (i + offset / 6) + margin;\n    const y = height - (average - min) / yRatio + margin * 2;\n    return coords.push([x, y]);\n  };\n\n  history.forEach((item, i) => getCoords(item, i, 0, detail));\n  if (coords.length === 1) {\n    coords[1] = [width + margin, coords[0][1]];\n  }\n\n  coords.push([width + margin, coords[coords.length - 1][1]]);\n  return coords;\n};\n\nconst coordinates = (\n  history: any,\n  hours: number,\n  width: number,\n  detail: number\n): number[][] => {\n  history.forEach((item) => (item.state = Number(item.state)));\n  history = history.filter((item) => !Number.isNaN(item.state));\n\n  const min = Math.min.apply(Math, history.map((item) => item.state));\n  const max = Math.max.apply(Math, history.map((item) => item.state));\n  const now = new Date().getTime();\n\n  const reduce = (res, item, point) => {\n    const age = now - new Date(item.last_changed).getTime();\n\n    let key = Math.abs(age / (1000 * 3600) - hours);\n    if (point) {\n      key = (key - Math.floor(key)) * 60;\n      key = Number((Math.round(key / 10) * 10).toString()[0]);\n    } else {\n      key = Math.floor(key);\n    }\n    if (!res[key]) {\n      res[key] = [];\n    }\n    res[key].push(item);\n    return res;\n  };\n\n  history = history.reduce((res, item) => reduce(res, item, false), []);\n  if (detail > 1) {\n    history = history.map((entry) =>\n      entry.reduce((res, item) => reduce(res, item, true), [])\n    );\n  }\n  return calcPoints(history, hours, width, detail, min, max);\n};\n\n@customElement(\"hui-sensor-card\")\nclass HuiSensorCard extends LitElement implements LovelaceCard {\n  public static async getConfigElement(): Promise<LovelaceCardEditor> {\n    await import(/* webpackChunkName: \"hui-sensor-card-editor\" */ \"../editor/config-elements/hui-sensor-card-editor\");\n    return document.createElement(\"hui-sensor-card-editor\");\n  }\n\n  public static getStubConfig(): object {\n    return {};\n  }\n\n  @property() public hass?: HomeAssistant;\n\n  @property() private _config?: SensorCardConfig;\n\n  @property() private _history?: any;\n\n  private _date?: Date;\n\n  public setConfig(config: SensorCardConfig): void {\n    if (!config.entity || config.entity.split(\".\")[0] !== \"sensor\") {\n      throw new Error(\"Specify an entity from within the sensor domain.\");\n    }\n\n    const cardConfig = {\n      detail: 1,\n      theme: \"default\",\n      hours_to_show: 24,\n      ...config,\n    };\n\n    cardConfig.hours_to_show = Number(cardConfig.hours_to_show);\n    cardConfig.detail =\n      cardConfig.detail === 1 || cardConfig.detail === 2\n        ? cardConfig.detail\n        : 1;\n\n    this._config = cardConfig;\n  }\n\n  public getCardSize(): number {\n    return 3;\n  }\n\n  protected render(): TemplateResult | void {\n    if (!this._config || !this.hass) {\n      return html``;\n    }\n\n    const stateObj = this.hass.states[this._config.entity];\n\n    if (!stateObj) {\n      return html`\n        <hui-warning\n          >${this.hass.localize(\n            \"ui.panel.lovelace.warning.entity_not_found\",\n            \"entity\",\n            this._config.entity\n          )}</hui-warning\n        >\n      `;\n    }\n\n    let graph;\n\n    if (stateObj && this._config.graph === \"line\") {\n      if (!stateObj.attributes.unit_of_measurement) {\n        return html`\n          <hui-warning\n            >Entity: ${this._config.entity} - Has no Unit of Measurement and\n            therefore can not display a line graph.</hui-warning\n          >\n        `;\n      } else if (!this._history) {\n        graph = svg`\n          <svg width=\"100%\" height=\"100%\" viewBox=\"0 0 500 100\"></svg>\n        `;\n      } else {\n        graph = svg`\n          <svg width=\"100%\" height=\"100%\" viewBox=\"0 0 500 100\">\n            <path\n              d=\"${this._history}\"\n              fill=\"none\"\n              stroke=\"var(--accent-color)\"\n              stroke-width=\"5\"\n              stroke-linecap=\"round\"\n              stroke-linejoin=\"round\"\n            />\n          </svg>\n        `;\n      }\n    } else {\n      graph = \"\";\n    }\n    return html`\n      <ha-card @click=\"${this._handleClick}\">\n        <div class=\"flex\">\n          <div class=\"icon\">\n            <ha-icon\n              .icon=\"${this._config.icon || stateIcon(stateObj)}\"\n            ></ha-icon>\n          </div>\n          <div class=\"header\">\n            <span class=\"name\"\n              >${this._config.name || computeStateName(stateObj)}</span\n            >\n          </div>\n        </div>\n        <div class=\"flex info\">\n          <span id=\"value\">${stateObj.state}</span>\n          <span id=\"measurement\"\n            >${this._config.unit ||\n              stateObj.attributes.unit_of_measurement}</span\n          >\n        </div>\n        <div class=\"graph\"><div>${graph}</div></div>\n      </ha-card>\n    `;\n  }\n\n  protected firstUpdated(): void {\n    this._date = new Date();\n  }\n\n  protected shouldUpdate(changedProps: PropertyValues): boolean {\n    if (changedProps.has(\"_history\")) {\n      return true;\n    }\n\n    return hasConfigOrEntityChanged(this, changedProps);\n  }\n\n  protected updated(changedProps: PropertyValues) {\n    super.updated(changedProps);\n    if (!this._config || this._config.graph !== \"line\" || !this.hass) {\n      return;\n    }\n\n    const oldHass = changedProps.get(\"hass\") as HomeAssistant | undefined;\n    if (!oldHass || oldHass.themes !== this.hass.themes) {\n      applyThemesOnElement(this, this.hass.themes, this._config!.theme);\n    }\n\n    const minute = 60000;\n    if (changedProps.has(\"_config\")) {\n      this._getHistory();\n    } else if (Date.now() - this._date!.getTime() >= minute) {\n      this._getHistory();\n    }\n  }\n\n  private _handleClick(): void {\n    fireEvent(this, \"hass-more-info\", { entityId: this._config!.entity });\n  }\n\n  private async _getHistory(): Promise<void> {\n    const endTime = new Date();\n    const startTime = new Date();\n    startTime.setHours(endTime.getHours() - this._config!.hours_to_show!);\n\n    const stateHistory = await fetchRecent(\n      this.hass,\n      this._config!.entity,\n      startTime,\n      endTime\n    );\n\n    if (stateHistory.length < 1 || stateHistory[0].length < 1) {\n      return;\n    }\n\n    const coords = coordinates(\n      stateHistory[0],\n      this._config!.hours_to_show!,\n      500,\n      this._config!.detail!\n    );\n\n    this._history = getPath(coords);\n    this._date = new Date();\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      :host {\n        display: flex;\n        flex-direction: column;\n      }\n\n      ha-card {\n        display: flex;\n        flex-direction: column;\n        flex: 1;\n        padding: 16px;\n        position: relative;\n        cursor: pointer;\n      }\n\n      .flex {\n        display: flex;\n      }\n\n      .header {\n        align-items: center;\n        display: flex;\n        min-width: 0;\n        opacity: 0.8;\n        position: relative;\n      }\n\n      .name {\n        display: block;\n        display: -webkit-box;\n        font-size: 1.2rem;\n        font-weight: 500;\n        max-height: 1.4rem;\n        margin-top: 2px;\n        opacity: 0.8;\n        overflow: hidden;\n        text-overflow: ellipsis;\n        -webkit-line-clamp: 1;\n        -webkit-box-orient: vertical;\n        word-wrap: break-word;\n        word-break: break-all;\n      }\n\n      .icon {\n        color: var(--paper-item-icon-color, #44739e);\n        display: inline-block;\n        flex: 0 0 40px;\n        line-height: 40px;\n        position: relative;\n        text-align: center;\n        width: 40px;\n      }\n\n      .info {\n        flex-wrap: wrap;\n        margin: 16px 0 16px 8px;\n      }\n\n      #value {\n        display: inline-block;\n        font-size: 2rem;\n        font-weight: 400;\n        line-height: 1em;\n        margin-right: 4px;\n      }\n\n      #measurement {\n        align-self: flex-end;\n        display: inline-block;\n        font-size: 1.3rem;\n        line-height: 1.2em;\n        margin-top: 0.1em;\n        opacity: 0.6;\n        vertical-align: bottom;\n      }\n\n      .graph {\n        align-self: flex-end;\n        margin: auto;\n        margin-bottom: 0px;\n        position: relative;\n        width: 100%;\n      }\n\n      .graph > div {\n        align-self: flex-end;\n        margin: auto 8px;\n      }\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-sensor-card\": HuiSensorCard;\n  }\n}\n","import {\n  html,\n  LitElement,\n  TemplateResult,\n  css,\n  CSSResult,\n  property,\n  customElement,\n} from \"lit-element\";\nimport { repeat } from \"lit-html/directives/repeat\";\nimport { PaperInputElement } from \"@polymer/paper-input/paper-input\";\nimport \"@polymer/paper-checkbox/paper-checkbox\";\n\nimport \"../../../components/ha-card\";\nimport \"../../../components/ha-icon\";\n\nimport { HomeAssistant } from \"../../../types\";\nimport { LovelaceCard, LovelaceCardEditor } from \"../types\";\nimport {\n  fetchItems,\n  updateItem,\n  ShoppingListItem,\n  clearItems,\n  addItem,\n} from \"../../../data/shopping-list\";\nimport { ShoppingListCardConfig } from \"./types\";\n\n@customElement(\"hui-shopping-list-card\")\nclass HuiShoppingListCard extends LitElement implements LovelaceCard {\n  public static async getConfigElement(): Promise<LovelaceCardEditor> {\n    await import(/* webpackChunkName: \"hui-shopping-list-editor\" */ \"../editor/config-elements/hui-shopping-list-editor\");\n    return document.createElement(\"hui-shopping-list-card-editor\");\n  }\n\n  public static getStubConfig(): object {\n    return {};\n  }\n\n  @property() public hass?: HomeAssistant;\n\n  @property() private _config?: ShoppingListCardConfig;\n\n  @property() private _uncheckedItems?: ShoppingListItem[];\n\n  @property() private _checkedItems?: ShoppingListItem[];\n\n  private _unsubEvents?: Promise<() => Promise<void>>;\n\n  public getCardSize(): number {\n    return (this._config ? (this._config.title ? 1 : 0) : 0) + 3;\n  }\n\n  public setConfig(config: ShoppingListCardConfig): void {\n    this._config = config;\n    this._uncheckedItems = [];\n    this._checkedItems = [];\n    this._fetchData();\n  }\n\n  public connectedCallback(): void {\n    super.connectedCallback();\n\n    if (this.hass) {\n      this._unsubEvents = this.hass.connection.subscribeEvents(\n        () => this._fetchData(),\n        \"shopping_list_updated\"\n      );\n      this._fetchData();\n    }\n  }\n\n  public disconnectedCallback(): void {\n    super.disconnectedCallback();\n\n    if (this._unsubEvents) {\n      this._unsubEvents.then((unsub) => unsub());\n    }\n  }\n\n  protected render(): TemplateResult | void {\n    if (!this._config || !this.hass) {\n      return html``;\n    }\n\n    return html`\n      <ha-card .header=\"${this._config.title}\">\n        <div class=\"addRow\">\n          <ha-icon\n            class=\"addButton\"\n            @click=\"${this._addItem}\"\n            icon=\"hass:plus\"\n            .title=\"${this.hass!.localize(\n              \"ui.panel.lovelace.cards.shopping-list.add_item\"\n            )}\"\n          >\n          </ha-icon>\n          <paper-item-body>\n            <paper-input\n              no-label-float\n              class=\"addBox\"\n              placeholder=\"${this.hass!.localize(\n                \"ui.panel.lovelace.cards.shopping-list.add_item\"\n              )}\"\n              @keydown=\"${this._addKeyPress}\"\n            ></paper-input>\n          </paper-item-body>\n        </div>\n        ${repeat(\n          this._uncheckedItems!,\n          (item) => item.id,\n          (item, index) =>\n            html`\n              <div class=\"editRow\">\n                <paper-checkbox\n                  slot=\"item-icon\"\n                  id=\"${index}\"\n                  ?checked=\"${item.complete}\"\n                  .itemId=\"${item.id}\"\n                  @click=\"${this._completeItem}\"\n                  tabindex=\"0\"\n                ></paper-checkbox>\n                <paper-item-body>\n                  <paper-input\n                    no-label-float\n                    .value=\"${item.name}\"\n                    .itemId=\"${item.id}\"\n                    @change=\"${this._saveEdit}\"\n                  ></paper-input>\n                </paper-item-body>\n              </div>\n            `\n        )}\n        ${this._checkedItems!.length > 0\n          ? html`\n              <div class=\"divider\"></div>\n              <div class=\"checked\">\n                <span class=\"label\">\n                  ${this.hass!.localize(\n                    \"ui.panel.lovelace.cards.shopping-list.checked_items\"\n                  )}\n                </span>\n                <ha-icon\n                  class=\"clearall\"\n                  @click=\"${this._clearItems}\"\n                  icon=\"hass:notification-clear-all\"\n                  .title=\"${this.hass!.localize(\n                    \"ui.panel.lovelace.cards.shopping-list.clear_items\"\n                  )}\"\n                >\n                </ha-icon>\n              </div>\n              ${repeat(\n                this._checkedItems!,\n                (item) => item.id,\n                (item, index) =>\n                  html`\n                    <div class=\"editRow\">\n                      <paper-checkbox\n                        slot=\"item-icon\"\n                        id=\"${index}\"\n                        ?checked=\"${item.complete}\"\n                        .itemId=\"${item.id}\"\n                        @click=\"${this._completeItem}\"\n                        tabindex=\"0\"\n                      ></paper-checkbox>\n                      <paper-item-body>\n                        <paper-input\n                          no-label-float\n                          .value=\"${item.name}\"\n                          .itemId=\"${item.id}\"\n                          @change=\"${this._saveEdit}\"\n                        ></paper-input>\n                      </paper-item-body>\n                    </div>\n                  `\n              )}\n            `\n          : \"\"}\n      </ha-card>\n    `;\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      .editRow,\n      .addRow {\n        display: flex;\n        flex-direction: row;\n      }\n\n      .addButton {\n        padding: 9px 15px 11px 15px;\n        cursor: pointer;\n      }\n\n      paper-item-body {\n        width: 75%;\n      }\n\n      paper-checkbox {\n        padding: 11px 11px 11px 18px;\n      }\n\n      paper-input {\n        --paper-input-container-underline: {\n          display: none;\n        }\n        --paper-input-container-underline-focus: {\n          display: none;\n        }\n        --paper-input-container-underline-disabled: {\n          display: none;\n        }\n        position: relative;\n        top: 1px;\n      }\n\n      .checked {\n        margin-left: 17px;\n        margin-bottom: 11px;\n        margin-top: 11px;\n      }\n\n      .label {\n        color: var(--primary-color);\n      }\n\n      .divider {\n        height: 1px;\n        background-color: var(--divider-color);\n        margin: 10px;\n      }\n\n      .clearall {\n        cursor: pointer;\n        margin-bottom: 3px;\n        float: right;\n        padding-right: 10px;\n      }\n\n      .addRow > ha-icon {\n        color: var(--secondary-text-color);\n      }\n    `;\n  }\n\n  private async _fetchData(): Promise<void> {\n    if (this.hass) {\n      const checkedItems: ShoppingListItem[] = [];\n      const uncheckedItems: ShoppingListItem[] = [];\n      const items = await fetchItems(this.hass);\n      for (const key in items) {\n        if (items[key].complete) {\n          checkedItems.push(items[key]);\n        } else {\n          uncheckedItems.push(items[key]);\n        }\n      }\n      this._checkedItems = checkedItems;\n      this._uncheckedItems = uncheckedItems;\n    }\n  }\n\n  private _completeItem(ev): void {\n    updateItem(this.hass!, ev.target.itemId, {\n      complete: ev.target.checked,\n    }).catch(() => this._fetchData());\n  }\n\n  private _saveEdit(ev): void {\n    updateItem(this.hass!, ev.target.itemId, {\n      name: ev.target.value,\n    }).catch(() => this._fetchData());\n\n    ev.target.blur();\n  }\n\n  private _clearItems(): void {\n    if (this.hass) {\n      clearItems(this.hass).catch(() => this._fetchData());\n    }\n  }\n\n  private get _newItem(): PaperInputElement {\n    return this.shadowRoot!.querySelector(\".addBox\") as PaperInputElement;\n  }\n\n  private _addItem(ev): void {\n    const newItem = this._newItem;\n\n    if (newItem.value!.length > 0) {\n      addItem(this.hass!, newItem.value!).catch(() => this._fetchData());\n    }\n\n    newItem.value = \"\";\n    if (ev) {\n      newItem.focus();\n    }\n  }\n\n  private _addKeyPress(ev): void {\n    if (ev.keyCode === 13) {\n      this._addItem(null);\n    }\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-shopping-list-card\": HuiShoppingListCard;\n  }\n}\n","import { html, LitElement, TemplateResult } from \"lit-element\";\n\nimport { createCardElement } from \"../common/create-card-element\";\nimport { LovelaceCard } from \"../types\";\nimport { LovelaceCardConfig } from \"../../../data/lovelace\";\nimport { HomeAssistant } from \"../../../types\";\nimport { StackCardConfig } from \"./types\";\n\nexport abstract class HuiStackCard extends LitElement implements LovelaceCard {\n  static get properties() {\n    return {\n      _config: {},\n    };\n  }\n\n  set hass(hass: HomeAssistant) {\n    this._hass = hass;\n\n    if (!this._cards) {\n      return;\n    }\n\n    for (const element of this._cards) {\n      element.hass = this._hass;\n    }\n  }\n  protected _cards?: LovelaceCard[];\n  private _config?: StackCardConfig;\n  private _hass?: HomeAssistant;\n\n  public abstract getCardSize(): number;\n\n  public setConfig(config: StackCardConfig): void {\n    if (!config || !config.cards || !Array.isArray(config.cards)) {\n      throw new Error(\"Card config incorrect\");\n    }\n    this._config = config;\n    this._cards = config.cards.map((card) => {\n      const element = this._createCardElement(card) as LovelaceCard;\n      return element;\n    });\n  }\n\n  protected render(): TemplateResult | void {\n    if (!this._config) {\n      return html``;\n    }\n\n    return html`\n      ${this.renderStyle()}\n      <div id=\"root\">${this._cards}</div>\n    `;\n  }\n\n  protected abstract renderStyle(): TemplateResult;\n\n  private _createCardElement(cardConfig: LovelaceCardConfig) {\n    const element = createCardElement(cardConfig) as LovelaceCard;\n    if (this._hass) {\n      element.hass = this._hass;\n    }\n    element.addEventListener(\n      \"ll-rebuild\",\n      (ev) => {\n        ev.stopPropagation();\n        this._rebuildCard(element, cardConfig);\n      },\n      { once: true }\n    );\n    return element;\n  }\n\n  private _rebuildCard(\n    cardElToReplace: LovelaceCard,\n    config: LovelaceCardConfig\n  ): void {\n    const newCardEl = this._createCardElement(config);\n    cardElToReplace.parentElement!.replaceChild(newCardEl, cardElToReplace);\n    this._cards = this._cards!.map((curCardEl) =>\n      curCardEl === cardElToReplace ? newCardEl : curCardEl\n    );\n  }\n}\n","import {\n  html,\n  LitElement,\n  PropertyValues,\n  TemplateResult,\n  customElement,\n  property,\n} from \"lit-element\";\nimport { classMap } from \"lit-html/directives/class-map\";\nimport \"@polymer/paper-icon-button/paper-icon-button\";\n\nimport \"../../../components/ha-card\";\nimport \"../../../components/ha-icon\";\nimport \"../components/hui-warning\";\n\nimport applyThemesOnElement from \"../../../common/dom/apply_themes_on_element\";\nimport computeStateName from \"../../../common/entity/compute_state_name\";\n\nimport { hasConfigOrEntityChanged } from \"../common/has-changed\";\nimport { HomeAssistant, ClimateEntity } from \"../../../types\";\nimport { LovelaceCard, LovelaceCardEditor } from \"../types\";\nimport { loadRoundslider } from \"../../../resources/jquery.roundslider.ondemand\";\nimport { UNIT_F } from \"../../../common/const\";\nimport { fireEvent } from \"../../../common/dom/fire_event\";\nimport { ThermostatCardConfig } from \"./types\";\n\nconst thermostatConfig = {\n  radius: 150,\n  circleShape: \"pie\",\n  startAngle: 315,\n  width: 5,\n  lineCap: \"round\",\n  handleSize: \"+10\",\n  showTooltip: false,\n  animation: false,\n};\n\nconst modeIcons = {\n  auto: \"hass:autorenew\",\n  manual: \"hass:cursor-pointer\",\n  heat: \"hass:fire\",\n  cool: \"hass:snowflake\",\n  off: \"hass:power\",\n  fan_only: \"hass:fan\",\n  eco: \"hass:leaf\",\n  dry: \"hass:water-percent\",\n  idle: \"hass:power-sleep\",\n};\n\n@customElement(\"hui-thermostat-card\")\nexport class HuiThermostatCard extends LitElement implements LovelaceCard {\n  public static async getConfigElement(): Promise<LovelaceCardEditor> {\n    await import(/* webpackChunkName: \"hui-thermostat-card-editor\" */ \"../editor/config-elements/hui-thermostat-card-editor\");\n    return document.createElement(\"hui-thermostat-card-editor\");\n  }\n\n  public static getStubConfig(): object {\n    return { entity: \"\" };\n  }\n\n  @property() public hass?: HomeAssistant;\n\n  @property() private _config?: ThermostatCardConfig;\n\n  @property() private _roundSliderStyle?: TemplateResult;\n\n  @property() private _jQuery?: any;\n\n  private _broadCard?: boolean;\n\n  private _loaded?: boolean;\n\n  private _updated?: boolean;\n\n  public getCardSize(): number {\n    return 4;\n  }\n\n  public setConfig(config: ThermostatCardConfig): void {\n    if (!config.entity || config.entity.split(\".\")[0] !== \"climate\") {\n      throw new Error(\"Specify an entity from within the climate domain.\");\n    }\n\n    this._config = { theme: \"default\", ...config };\n  }\n\n  public connectedCallback(): void {\n    super.connectedCallback();\n    if (this._updated && !this._loaded) {\n      this._initialLoad();\n    }\n  }\n\n  protected render(): TemplateResult | void {\n    if (!this.hass || !this._config) {\n      return html``;\n    }\n    const stateObj = this.hass.states[this._config.entity] as ClimateEntity;\n\n    if (!stateObj) {\n      return html`\n        <hui-warning\n          >${this.hass.localize(\n            \"ui.panel.lovelace.warning.entity_not_found\",\n            \"entity\",\n            this._config.entity\n          )}</hui-warning\n        >\n      `;\n    }\n\n    const mode = modeIcons[stateObj.attributes.operation_mode || \"\"]\n      ? stateObj.attributes.operation_mode!\n      : \"unknown-mode\";\n    return html`\n      ${this.renderStyle()}\n      <ha-card\n        class=\"${classMap({\n          [mode]: true,\n          large: this._broadCard!,\n          small: !this._broadCard,\n        })}\">\n        <div id=\"root\">\n          <paper-icon-button\n            icon=\"hass:dots-vertical\"\n            class=\"more-info\"\n            @click=\"${this._handleMoreInfo}\"\n          ></paper-icon-button>\n          <div id=\"thermostat\"></div>\n          <div id=\"tooltip\">\n            <div class=\"title\">${this._config.name ||\n              computeStateName(stateObj)}</div>\n            <div class=\"current-temperature\">\n              <span class=\"current-temperature-text\">\n                ${stateObj.attributes.current_temperature}\n                ${\n                  stateObj.attributes.current_temperature\n                    ? html`\n                        <span class=\"uom\"\n                          >${this.hass.config.unit_system.temperature}</span\n                        >\n                      `\n                    : \"\"\n                }\n              </span>\n            </div>\n            <div class=\"climate-info\">\n            <div id=\"set-temperature\"></div>\n            <div class=\"current-mode\">${this.hass!.localize(\n              `state.climate.${stateObj.state}`\n            )}</div>\n            <div class=\"modes\">\n              ${(stateObj.attributes.operation_list || []).map((modeItem) =>\n                this._renderIcon(modeItem, mode)\n              )}\n            </div>\n          </div>\n        </div>\n      </ha-card>\n    `;\n  }\n\n  protected shouldUpdate(changedProps: PropertyValues): boolean {\n    return hasConfigOrEntityChanged(this, changedProps);\n  }\n\n  protected firstUpdated(): void {\n    this._updated = true;\n    if (this.isConnected && !this._loaded) {\n      this._initialLoad();\n    }\n  }\n\n  protected updated(changedProps: PropertyValues): void {\n    super.updated(changedProps);\n    if (!this._config || !this.hass || !changedProps.has(\"hass\")) {\n      return;\n    }\n\n    const oldHass = changedProps.get(\"hass\") as HomeAssistant | undefined;\n\n    if (!oldHass || oldHass.themes !== this.hass.themes) {\n      applyThemesOnElement(this, this.hass.themes, this._config.theme);\n    }\n\n    const stateObj = this.hass.states[this._config.entity] as ClimateEntity;\n\n    if (!stateObj) {\n      return;\n    }\n\n    if (\n      this._jQuery &&\n      // If jQuery changed, we just rendered in firstUpdated\n      !changedProps.has(\"_jQuery\") &&\n      (!oldHass || oldHass.states[this._config.entity] !== stateObj)\n    ) {\n      const [sliderValue, uiValue] = this._genSliderValue(stateObj);\n\n      this._jQuery(\"#thermostat\", this.shadowRoot).roundSlider({\n        value: sliderValue,\n      });\n      this._updateSetTemp(uiValue);\n    }\n  }\n\n  private get _stepSize(): number {\n    const stateObj = this.hass!.states[this._config!.entity];\n\n    if (stateObj.attributes.target_temp_step) {\n      return stateObj.attributes.target_temp_step;\n    }\n    return this.hass!.config.unit_system.temperature === UNIT_F ? 1 : 0.5;\n  }\n\n  private async _initialLoad(): Promise<void> {\n    const stateObj = this.hass!.states[this._config!.entity] as ClimateEntity;\n\n    if (!stateObj) {\n      // Card will require refresh to work again\n      return;\n    }\n\n    this._loaded = true;\n\n    await this.updateComplete;\n\n    let radius = this.clientWidth / 3.2;\n    this._broadCard = this.clientWidth > 390;\n\n    if (radius === 0) {\n      radius = 100;\n    }\n\n    (this.shadowRoot!.querySelector(\n      \"#thermostat\"\n    ) as HTMLElement)!.style.height = radius * 2 + \"px\";\n\n    const loaded = await loadRoundslider();\n\n    this._roundSliderStyle = loaded.roundSliderStyle;\n    this._jQuery = loaded.jQuery;\n\n    const _sliderType =\n      stateObj.attributes.target_temp_low &&\n      stateObj.attributes.target_temp_high\n        ? \"range\"\n        : \"min-range\";\n\n    const [sliderValue, uiValue] = this._genSliderValue(stateObj);\n\n    this._jQuery(\"#thermostat\", this.shadowRoot).roundSlider({\n      ...thermostatConfig,\n      radius,\n      min: stateObj.attributes.min_temp,\n      max: stateObj.attributes.max_temp,\n      sliderType: _sliderType,\n      change: (value) => this._setTemperature(value),\n      drag: (value) => this._dragEvent(value),\n      value: sliderValue,\n      step: this._stepSize,\n    });\n    this._updateSetTemp(uiValue);\n  }\n\n  private _genSliderValue(stateObj: ClimateEntity): [string | number, string] {\n    let sliderValue: string | number;\n    let uiValue: string;\n\n    if (\n      stateObj.attributes.target_temp_low &&\n      stateObj.attributes.target_temp_high\n    ) {\n      sliderValue = `${stateObj.attributes.target_temp_low}, ${\n        stateObj.attributes.target_temp_high\n      }`;\n      uiValue = this.formatTemp(\n        [\n          String(stateObj.attributes.target_temp_low),\n          String(stateObj.attributes.target_temp_high),\n        ],\n        false\n      );\n    } else {\n      sliderValue = stateObj.attributes.temperature;\n      uiValue =\n        stateObj.attributes.temperature !== null\n          ? String(stateObj.attributes.temperature)\n          : \"\";\n    }\n\n    return [sliderValue, uiValue];\n  }\n\n  private _updateSetTemp(value: string): void {\n    this.shadowRoot!.querySelector(\"#set-temperature\")!.innerHTML = value;\n  }\n\n  private _dragEvent(e): void {\n    this._updateSetTemp(this.formatTemp(String(e.value).split(\",\"), true));\n  }\n\n  private _setTemperature(e): void {\n    const stateObj = this.hass!.states[this._config!.entity] as ClimateEntity;\n    if (\n      stateObj.attributes.target_temp_low &&\n      stateObj.attributes.target_temp_high\n    ) {\n      if (e.handle.index === 1) {\n        this.hass!.callService(\"climate\", \"set_temperature\", {\n          entity_id: this._config!.entity,\n          target_temp_low: e.handle.value,\n          target_temp_high: stateObj.attributes.target_temp_high,\n        });\n      } else {\n        this.hass!.callService(\"climate\", \"set_temperature\", {\n          entity_id: this._config!.entity,\n          target_temp_low: stateObj.attributes.target_temp_low,\n          target_temp_high: e.handle.value,\n        });\n      }\n    } else {\n      this.hass!.callService(\"climate\", \"set_temperature\", {\n        entity_id: this._config!.entity,\n        temperature: e.value,\n      });\n    }\n  }\n\n  private _renderIcon(mode: string, currentMode: string): TemplateResult {\n    if (!modeIcons[mode]) {\n      return html``;\n    }\n    return html`\n      <ha-icon\n        class=\"${classMap({ \"selected-icon\": currentMode === mode })}\"\n        .mode=\"${mode}\"\n        .icon=\"${modeIcons[mode]}\"\n        @click=\"${this._handleModeClick}\"\n      ></ha-icon>\n    `;\n  }\n\n  private _handleMoreInfo() {\n    fireEvent(this, \"hass-more-info\", {\n      entityId: this._config!.entity,\n    });\n  }\n\n  private _handleModeClick(e: MouseEvent): void {\n    this.hass!.callService(\"climate\", \"set_operation_mode\", {\n      entity_id: this._config!.entity,\n      operation_mode: (e.currentTarget as any).mode,\n    });\n  }\n\n  private formatTemp(temps: string[], spaceStepSize: boolean): string {\n    temps = temps.filter(Boolean);\n\n    // If we are sliding the slider, append 0 to the temperatures if we're\n    // having a 0.5 step size, so that the text doesn't jump while sliding\n    if (spaceStepSize) {\n      const stepSize = this._stepSize;\n      temps = temps.map((val) =>\n        val.includes(\".\") || stepSize === 1 ? val : `${val}.0`\n      );\n    }\n\n    return temps.join(\"-\");\n  }\n\n  private renderStyle(): TemplateResult {\n    return html`\n      ${this._roundSliderStyle}\n      <style>\n        :host {\n          display: block;\n        }\n        ha-card {\n          overflow: hidden;\n          --rail-border-color: transparent;\n          --auto-color: green;\n          --eco-color: springgreen;\n          --cool-color: #2b9af9;\n          --heat-color: #ff8100;\n          --manual-color: #44739e;\n          --off-color: #8a8a8a;\n          --fan_only-color: #8a8a8a;\n          --dry-color: #efbd07;\n          --idle-color: #8a8a8a;\n          --unknown-color: #bac;\n        }\n        #root {\n          position: relative;\n          overflow: hidden;\n        }\n        .auto {\n          --mode-color: var(--auto-color);\n        }\n        .cool {\n          --mode-color: var(--cool-color);\n        }\n        .heat {\n          --mode-color: var(--heat-color);\n        }\n        .manual {\n          --mode-color: var(--manual-color);\n        }\n        .off {\n          --mode-color: var(--off-color);\n        }\n        .fan_only {\n          --mode-color: var(--fan_only-color);\n        }\n        .eco {\n          --mode-color: var(--eco-color);\n        }\n        .dry {\n          --mode-color: var(--dry-color);\n        }\n        .idle {\n          --mode-color: var(--idle-color);\n        }\n        .unknown-mode {\n          --mode-color: var(--unknown-color);\n        }\n        .no-title {\n          --title-position-top: 33% !important;\n        }\n        .large {\n          --thermostat-padding-top: 25px;\n          --thermostat-margin-bottom: 25px;\n          --title-font-size: 28px;\n          --title-position-top: 27%;\n          --climate-info-position-top: 81%;\n          --set-temperature-font-size: 25px;\n          --current-temperature-font-size: 71px;\n          --current-temperature-position-top: 10%;\n          --current-temperature-text-padding-left: 15px;\n          --uom-font-size: 20px;\n          --uom-margin-left: -18px;\n          --current-mode-font-size: 18px;\n          --set-temperature-margin-bottom: -5px;\n        }\n        .small {\n          --thermostat-padding-top: 15px;\n          --thermostat-margin-bottom: 15px;\n          --title-font-size: 18px;\n          --title-position-top: 28%;\n          --climate-info-position-top: 79%;\n          --set-temperature-font-size: 16px;\n          --current-temperature-font-size: 25px;\n          --current-temperature-position-top: 5%;\n          --current-temperature-text-padding-left: 7px;\n          --uom-font-size: 12px;\n          --uom-margin-left: -5px;\n          --current-mode-font-size: 14px;\n          --set-temperature-margin-bottom: 0px;\n        }\n        #thermostat {\n          margin: 0 auto var(--thermostat-margin-bottom);\n          padding-top: var(--thermostat-padding-top);\n        }\n        #thermostat .rs-range-color {\n          background-color: var(--mode-color, var(--disabled-text-color));\n        }\n        #thermostat .rs-path-color {\n          background-color: var(--disabled-text-color);\n        }\n        #thermostat .rs-handle {\n          background-color: var(--paper-card-background-color, white);\n          padding: 7px;\n          border: 2px solid var(--disabled-text-color);\n        }\n        #thermostat .rs-handle.rs-focus {\n          border-color: var(--mode-color, var(--disabled-text-color));\n        }\n        #thermostat .rs-handle:after {\n          border-color: var(--mode-color, var(--disabled-text-color));\n          background-color: var(--mode-color, var(--disabled-text-color));\n        }\n        #thermostat .rs-border {\n          border-color: var(--rail-border-color);\n        }\n        #thermostat .rs-bar.rs-transition.rs-first,\n        .rs-bar.rs-transition.rs-second {\n          z-index: 20 !important;\n        }\n        #thermostat .rs-inner.rs-bg-color.rs-border,\n        #thermostat .rs-overlay.rs-transition.rs-bg-color {\n          background-color: var(--paper-card-background-color, white);\n        }\n        #tooltip {\n          position: absolute;\n          top: 0;\n          left: 0;\n          right: 0;\n          height: 100%;\n          text-align: center;\n          z-index: 15;\n          color: var(--primary-text-color);\n        }\n        #set-temperature {\n          font-size: var(--set-temperature-font-size);\n          margin-bottom: var(--set-temperature-margin-bottom);\n        }\n        .title {\n          font-size: var(--title-font-size);\n          position: absolute;\n          top: var(--title-position-top);\n          left: 50%;\n          transform: translate(-50%, -50%);\n        }\n        .climate-info {\n          position: absolute;\n          top: var(--climate-info-position-top);\n          left: 50%;\n          transform: translate(-50%, -50%);\n          width: 100%;\n        }\n        .current-mode {\n          font-size: var(--current-mode-font-size);\n          color: var(--secondary-text-color);\n        }\n        .modes {\n          margin-top: 16px;\n        }\n        .modes ha-icon {\n          color: var(--disabled-text-color);\n          cursor: pointer;\n          display: inline-block;\n          margin: 0 10px;\n        }\n        .modes ha-icon.selected-icon {\n          color: var(--mode-color);\n        }\n        .current-temperature {\n          position: absolute;\n          top: 50%;\n          left: 50%;\n          transform: translate(-50%, -50%);\n          font-size: var(--current-temperature-font-size);\n        }\n        .current-temperature-text {\n          padding-left: var(--current-temperature-text-padding-left);\n        }\n        .uom {\n          font-size: var(--uom-font-size);\n          vertical-align: top;\n          margin-left: var(--uom-margin-left);\n        }\n        .more-info {\n          position: absolute;\n          cursor: pointer;\n          top: 0;\n          right: 0;\n          z-index: 25;\n          color: var(--secondary-text-color);\n        }\n      </style>\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-thermostat-card\": HuiThermostatCard;\n  }\n}\n","import { html, TemplateResult } from \"lit-element\";\n\nimport { computeCardSize } from \"../common/compute-card-size\";\nimport { HuiStackCard } from \"./hui-stack-card\";\n\nclass HuiVerticalStackCard extends HuiStackCard {\n  public getCardSize() {\n    let totalSize = 0;\n\n    if (!this._cards) {\n      return totalSize;\n    }\n\n    for (const element of this._cards) {\n      totalSize += computeCardSize(element);\n    }\n\n    return totalSize;\n  }\n\n  protected renderStyle(): TemplateResult {\n    return html`\n      <style>\n        #root {\n          display: flex;\n          flex-direction: column;\n        }\n        #root > * {\n          margin: 4px 0 4px 0;\n        }\n        #root > *:first-child {\n          margin-top: 0;\n        }\n        #root > *:last-child {\n          margin-bottom: 0;\n        }\n      </style>\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-vertical-stack-card\": HuiVerticalStackCard;\n  }\n}\n\ncustomElements.define(\"hui-vertical-stack-card\", HuiVerticalStackCard);\n","import \"../../../cards/ha-weather-card\";\n\nimport LegacyWrapperCard from \"./hui-legacy-wrapper-card\";\n\nclass HuiWeatherForecastCard extends LegacyWrapperCard {\n  static async getConfigElement() {\n    await import(/* webpackChunkName: \"hui-weather-forecast-card-editor\" */ \"../editor/config-elements/hui-weather-forecast-card-editor\");\n    return document.createElement(\"hui-weather-forecast-card-editor\");\n  }\n\n  static getStubConfig() {\n    return {};\n  }\n\n  constructor() {\n    super(\"ha-weather-card\", \"weather\");\n  }\n\n  getCardSize() {\n    return 4;\n  }\n}\n\ncustomElements.define(\"hui-weather-forecast-card\", HuiWeatherForecastCard);\n","import { LovelaceElement, LovelaceElementConfig } from \"../../elements/types\";\nimport { createHuiElement } from \"../../common/create-hui-element\";\n\nexport function createStyledHuiElement(\n  elementConfig: LovelaceElementConfig\n): LovelaceElement {\n  const element = createHuiElement(elementConfig) as LovelaceElement;\n  // keep conditional card as a transparent container so let its position remain static\n  if (element.tagName !== \"HUI-CONDITIONAL-ELEMENT\") {\n    element.classList.add(\"element\");\n  }\n\n  if (elementConfig.style) {\n    Object.keys(elementConfig.style).forEach((prop) => {\n      element.style.setProperty(prop, elementConfig.style[prop]);\n    });\n  }\n\n  return element;\n}\n","import { HomeAssistant } from \"../../../types\";\nimport { CallServiceConfig } from \"../entity-rows/types\";\n\nexport const callService = (\n  config: CallServiceConfig,\n  hass: HomeAssistant\n): void => {\n  const entityId = config.entity;\n  const [domain, service] = config.service.split(\".\", 2);\n  const serviceData = { entity_id: entityId, ...config.service_data };\n  hass.callService(domain, service, serviceData);\n};\n","import { LovelaceCard } from \"../types\";\n\nexport const computeCardSize = (card: LovelaceCard): number => {\n  return typeof card.getCardSize === \"function\" ? card.getCardSize() : 1;\n};\n","import { HassEntities, HassEntity } from \"home-assistant-js-websocket\";\n\nimport computeDomain from \"../../../common/entity/compute_domain\";\n\nexport const computeNotifications = (states: HassEntities): HassEntity[] => {\n  return Object.keys(states)\n    .filter((entityId) => computeDomain(entityId) === \"configurator\")\n    .map((entityId) => states[entityId]);\n};\n","import computeStateName from \"../../../common/entity/compute_state_name\";\nimport { HomeAssistant } from \"../../../types\";\nimport { LovelaceElementConfig } from \"../elements/types\";\nimport { ActionConfig } from \"../../../data/lovelace\";\n\ninterface Config extends LovelaceElementConfig {\n  entity?: string;\n  title?: string;\n  tap_action?: ActionConfig;\n  hold_action?: ActionConfig;\n}\n\nexport const computeTooltip = (hass: HomeAssistant, config: Config): string => {\n  if (config.title === null) {\n    return \"\";\n  }\n\n  if (config.title) {\n    return config.title;\n  }\n\n  let stateName = \"\";\n  let tooltip = \"\";\n\n  if (config.entity) {\n    stateName =\n      config.entity in hass.states\n        ? computeStateName(hass.states[config.entity])\n        : config.entity;\n  }\n\n  const tapTooltip = config.tap_action\n    ? computeActionTooltip(hass, stateName, config.tap_action, false)\n    : \"\";\n  const holdTooltip = config.hold_action\n    ? computeActionTooltip(hass, stateName, config.hold_action, true)\n    : \"\";\n\n  const newline = tapTooltip && holdTooltip ? \"\\n\" : \"\";\n\n  tooltip = tapTooltip + newline + holdTooltip;\n\n  return tooltip;\n};\n\nfunction computeActionTooltip(\n  hass: HomeAssistant,\n  state: string,\n  config: ActionConfig,\n  isHold: boolean\n) {\n  if (!config || !config.action || config.action === \"none\") {\n    return \"\";\n  }\n\n  let tooltip =\n    (isHold\n      ? hass.localize(\"ui.panel.lovelace.cards.picture-elements.hold\")\n      : hass.localize(\"ui.panel.lovelace.cards.picture-elements.tap\")) + \" \";\n\n  switch (config.action) {\n    case \"navigate\":\n      tooltip += `${hass.localize(\n        \"ui.panel.lovelace.cards.picture-elements.navigate_to\",\n        \"location\",\n        config.navigation_path\n      )}`;\n      break;\n    case \"toggle\":\n      tooltip += `${hass.localize(\n        \"ui.panel.lovelace.cards.picture-elements.toggle\",\n        \"name\",\n        state\n      )}`;\n      break;\n    case \"call-service\":\n      tooltip += `${hass.localize(\n        \"ui.panel.lovelace.cards.picture-elements.call_service\",\n        \"name\",\n        config.service\n      )}`;\n      break;\n    case \"more-info\":\n      tooltip += `${hass.localize(\n        \"ui.panel.lovelace.cards.picture-elements.more_info\",\n        \"name\",\n        state\n      )}`;\n      break;\n  }\n\n  return tooltip;\n}\n","import deepClone from \"deep-clone-simple\";\n\nimport { fireEvent } from \"../../../common/dom/fire_event\";\n\nimport \"../cards/hui-alarm-panel-card\";\nimport \"../cards/hui-conditional-card\";\nimport \"../cards/hui-entities-card\";\nimport \"../cards/hui-entity-button-card\";\nimport \"../cards/hui-entity-filter-card\";\nimport {\n  createErrorCardElement,\n  createErrorCardConfig,\n  HuiErrorCard,\n} from \"../cards/hui-error-card\";\nimport \"../cards/hui-glance-card\";\nimport \"../cards/hui-history-graph-card\";\nimport \"../cards/hui-horizontal-stack-card\";\nimport \"../cards/hui-iframe-card\";\nimport \"../cards/hui-light-card\";\nimport \"../cards/hui-map-card\";\nimport \"../cards/hui-markdown-card\";\nimport \"../cards/hui-media-control-card\";\nimport \"../cards/hui-picture-card\";\nimport \"../cards/hui-picture-elements-card\";\nimport \"../cards/hui-picture-entity-card\";\nimport \"../cards/hui-picture-glance-card\";\nimport \"../cards/hui-plant-status-card\";\nimport \"../cards/hui-sensor-card\";\nimport \"../cards/hui-vertical-stack-card\";\nimport \"../cards/hui-shopping-list-card\";\nimport \"../cards/hui-thermostat-card\";\nimport \"../cards/hui-weather-forecast-card\";\nimport \"../cards/hui-gauge-card\";\nimport { LovelaceCard } from \"../types\";\nimport { LovelaceCardConfig } from \"../../../data/lovelace\";\n\nconst CARD_TYPES = new Set([\n  \"alarm-panel\",\n  \"conditional\",\n  \"entities\",\n  \"entity-button\",\n  \"entity-filter\",\n  \"error\",\n  \"gauge\",\n  \"glance\",\n  \"history-graph\",\n  \"horizontal-stack\",\n  \"iframe\",\n  \"light\",\n  \"map\",\n  \"markdown\",\n  \"media-control\",\n  \"picture\",\n  \"picture-elements\",\n  \"picture-entity\",\n  \"picture-glance\",\n  \"plant-status\",\n  \"sensor\",\n  \"shopping-list\",\n  \"thermostat\",\n  \"vertical-stack\",\n  \"weather-forecast\",\n]);\nconst CUSTOM_TYPE_PREFIX = \"custom:\";\nconst TIMEOUT = 2000;\n\nconst _createElement = (\n  tag: string,\n  config: LovelaceCardConfig\n): LovelaceCard | HuiErrorCard => {\n  const element = document.createElement(tag) as LovelaceCard;\n  try {\n    element.setConfig(deepClone(config));\n  } catch (err) {\n    // tslint:disable-next-line\n    console.error(tag, err);\n    return _createErrorElement(err.message, config);\n  }\n  return element;\n};\n\nconst _createErrorElement = (\n  error: string,\n  config: LovelaceCardConfig\n): HuiErrorCard => createErrorCardElement(createErrorCardConfig(error, config));\n\nexport const createCardElement = (\n  config: LovelaceCardConfig\n): LovelaceCard | HuiErrorCard => {\n  if (!config || typeof config !== \"object\" || !config.type) {\n    return _createErrorElement(\"No card type configured.\", config);\n  }\n\n  if (config.type.startsWith(CUSTOM_TYPE_PREFIX)) {\n    const tag = config.type.substr(CUSTOM_TYPE_PREFIX.length);\n\n    if (customElements.get(tag)) {\n      return _createElement(tag, config);\n    }\n    const element = _createErrorElement(\n      `Custom element doesn't exist: ${tag}.`,\n      config\n    );\n    element.style.display = \"None\";\n    const timer = window.setTimeout(() => {\n      element.style.display = \"\";\n    }, TIMEOUT);\n\n    customElements.whenDefined(tag).then(() => {\n      clearTimeout(timer);\n      fireEvent(element, \"ll-rebuild\");\n    });\n\n    return element;\n  }\n\n  if (!CARD_TYPES.has(config.type)) {\n    return _createErrorElement(\n      `Unknown card type encountered: ${config.type}.`,\n      config\n    );\n  }\n\n  return _createElement(`hui-${config.type}-card`, config);\n};\n","import deepClone from \"deep-clone-simple\";\n\nimport \"../elements/hui-conditional-element\";\nimport \"../elements/hui-icon-element\";\nimport \"../elements/hui-image-element\";\nimport \"../elements/hui-service-button-element\";\nimport \"../elements/hui-state-badge-element\";\nimport \"../elements/hui-state-icon-element\";\nimport \"../elements/hui-state-label-element\";\n\nimport { fireEvent } from \"../../../common/dom/fire_event\";\nimport {\n  createErrorCardElement,\n  createErrorCardConfig,\n  HuiErrorCard,\n} from \"../cards/hui-error-card\";\nimport { LovelaceElementConfig, LovelaceElement } from \"../elements/types\";\n\nconst CUSTOM_TYPE_PREFIX = \"custom:\";\nconst ELEMENT_TYPES = new Set([\n  \"conditional\",\n  \"icon\",\n  \"image\",\n  \"service-button\",\n  \"state-badge\",\n  \"state-icon\",\n  \"state-label\",\n]);\nconst TIMEOUT = 2000;\n\nconst _createElement = (\n  tag: string,\n  config: LovelaceElementConfig\n): LovelaceElement | HuiErrorCard => {\n  const element = document.createElement(tag) as LovelaceElement;\n  try {\n    element.setConfig(deepClone(config));\n  } catch (err) {\n    // tslint:disable-next-line\n    console.error(tag, err);\n    return _createErrorElement(err.message, config);\n  }\n  return element;\n};\n\nconst _createErrorElement = (\n  error: string,\n  config: LovelaceElementConfig\n): HuiErrorCard => createErrorCardElement(createErrorCardConfig(error, config));\n\nfunction _hideErrorElement(element) {\n  element.style.display = \"None\";\n  return window.setTimeout(() => {\n    element.style.display = \"\";\n  }, TIMEOUT);\n}\n\nexport const createHuiElement = (\n  config: LovelaceElementConfig\n): LovelaceElement | HuiErrorCard => {\n  if (!config || typeof config !== \"object\" || !config.type) {\n    return _createErrorElement(\"No element type configured.\", config);\n  }\n\n  if (config.type.startsWith(CUSTOM_TYPE_PREFIX)) {\n    const tag = config.type.substr(CUSTOM_TYPE_PREFIX.length);\n\n    if (customElements.get(tag)) {\n      return _createElement(tag, config);\n    }\n    const element = _createErrorElement(\n      `Custom element doesn't exist: ${tag}.`,\n      config\n    );\n    const timer = _hideErrorElement(element);\n\n    customElements.whenDefined(tag).then(() => {\n      clearTimeout(timer);\n      fireEvent(element, \"ll-rebuild\");\n    });\n\n    return element;\n  }\n\n  if (!ELEMENT_TYPES.has(config.type)) {\n    return _createErrorElement(\n      `Unknown element type encountered: ${config.type}.`,\n      config\n    );\n  }\n\n  return _createElement(`hui-${config.type}-element`, config);\n};\n","import deepClone from \"deep-clone-simple\";\n\nimport { fireEvent } from \"../../../common/dom/fire_event\";\n\nimport {\n  createErrorCardElement,\n  createErrorCardConfig,\n  HuiErrorCard,\n} from \"../cards/hui-error-card\";\nimport \"../entity-rows/hui-climate-entity-row\";\nimport \"../entity-rows/hui-cover-entity-row\";\nimport \"../entity-rows/hui-group-entity-row\";\nimport \"../entity-rows/hui-input-datetime-entity-row\";\nimport \"../entity-rows/hui-input-number-entity-row\";\nimport \"../entity-rows/hui-input-select-entity-row\";\nimport \"../entity-rows/hui-input-text-entity-row\";\nimport \"../entity-rows/hui-lock-entity-row\";\nimport \"../entity-rows/hui-media-player-entity-row\";\nimport \"../entity-rows/hui-scene-entity-row\";\nimport \"../entity-rows/hui-script-entity-row\";\nimport \"../entity-rows/hui-sensor-entity-row\";\nimport \"../entity-rows/hui-text-entity-row\";\nimport \"../entity-rows/hui-timer-entity-row\";\nimport \"../entity-rows/hui-toggle-entity-row\";\nimport \"../special-rows/hui-call-service-row\";\nimport \"../special-rows/hui-divider-row\";\nimport \"../special-rows/hui-section-row\";\nimport \"../special-rows/hui-weblink-row\";\nimport { EntityConfig, EntityRow } from \"../entity-rows/types\";\n\nconst CUSTOM_TYPE_PREFIX = \"custom:\";\nconst SPECIAL_TYPES = new Set([\n  \"call-service\",\n  \"divider\",\n  \"section\",\n  \"weblink\",\n]);\nconst DOMAIN_TO_ELEMENT_TYPE = {\n  alert: \"toggle\",\n  automation: \"toggle\",\n  climate: \"climate\",\n  cover: \"cover\",\n  fan: \"toggle\",\n  group: \"group\",\n  input_boolean: \"toggle\",\n  input_number: \"input-number\",\n  input_select: \"input-select\",\n  input_text: \"input-text\",\n  light: \"toggle\",\n  lock: \"lock\",\n  media_player: \"media-player\",\n  remote: \"toggle\",\n  scene: \"scene\",\n  script: \"script\",\n  sensor: \"sensor\",\n  timer: \"timer\",\n  switch: \"toggle\",\n  vacuum: \"toggle\",\n  // Temporary. Once climate is rewritten,\n  // water heater should get it's own row.\n  water_heater: \"climate\",\n  input_datetime: \"input-datetime\",\n};\nconst TIMEOUT = 2000;\n\nconst _createElement = (\n  tag: string,\n  config: EntityConfig\n): EntityRow | HuiErrorCard => {\n  const element = document.createElement(tag) as EntityRow;\n  try {\n    element.setConfig(deepClone(config));\n  } catch (err) {\n    // tslint:disable-next-line\n    console.error(tag, err);\n    return _createErrorElement(err.message, config);\n  }\n\n  return element;\n};\n\nconst _createErrorElement = (\n  error: string,\n  config: EntityConfig\n): HuiErrorCard => createErrorCardElement(createErrorCardConfig(error, config));\n\nconst _hideErrorElement = (element) => {\n  element.style.display = \"None\";\n  return window.setTimeout(() => {\n    element.style.display = \"\";\n  }, TIMEOUT);\n};\n\nexport const createRowElement = (\n  config: EntityConfig\n): EntityRow | HuiErrorCard => {\n  let tag;\n\n  if (\n    !config ||\n    typeof config !== \"object\" ||\n    (!config.entity && !config.type)\n  ) {\n    return _createErrorElement(\"Invalid config given.\", config);\n  }\n\n  const type = config.type || \"default\";\n  if (SPECIAL_TYPES.has(type)) {\n    return _createElement(`hui-${type}-row`, config);\n  }\n\n  if (type.startsWith(CUSTOM_TYPE_PREFIX)) {\n    tag = type.substr(CUSTOM_TYPE_PREFIX.length);\n\n    if (customElements.get(tag)) {\n      return _createElement(tag, config);\n    }\n    const element = _createErrorElement(\n      `Custom element doesn't exist: ${tag}.`,\n      config\n    );\n    const timer = _hideErrorElement(element);\n\n    customElements.whenDefined(tag).then(() => {\n      clearTimeout(timer);\n      fireEvent(element, \"ll-rebuild\");\n    });\n\n    return element;\n  }\n\n  const domain = config.entity.split(\".\", 1)[0];\n  tag = `hui-${DOMAIN_TO_ELEMENT_TYPE[domain] || \"text\"}-entity-row`;\n\n  return _createElement(tag, config);\n};\n","import { directive, PropertyPart } from \"lit-html\";\n// See https://github.com/home-assistant/home-assistant-polymer/pull/2457\n// on how to undo mwc -> paper migration\n// import \"@material/mwc-ripple\";\nimport \"@polymer/paper-ripple\";\n\nconst isTouch =\n  \"ontouchstart\" in window ||\n  navigator.maxTouchPoints > 0 ||\n  navigator.msMaxTouchPoints > 0;\n\ninterface LongPress extends HTMLElement {\n  holdTime: number;\n  bind(element: Element): void;\n}\ninterface LongPressElement extends Element {\n  longPress?: boolean;\n}\n\nclass LongPress extends HTMLElement implements LongPress {\n  public holdTime: number;\n  protected ripple: any;\n  protected timer: number | undefined;\n  protected held: boolean;\n  protected cooldownStart: boolean;\n  protected cooldownEnd: boolean;\n\n  constructor() {\n    super();\n    this.holdTime = 500;\n    this.ripple = document.createElement(\"paper-ripple\");\n    this.timer = undefined;\n    this.held = false;\n    this.cooldownStart = false;\n    this.cooldownEnd = false;\n  }\n\n  public connectedCallback() {\n    Object.assign(this.style, {\n      borderRadius: \"50%\", // paper-ripple\n      position: \"absolute\",\n      width: isTouch ? \"100px\" : \"50px\",\n      height: isTouch ? \"100px\" : \"50px\",\n      transform: \"translate(-50%, -50%)\",\n      pointerEvents: \"none\",\n    });\n\n    this.appendChild(this.ripple);\n    this.ripple.style.color = \"#03a9f4\"; // paper-ripple\n    this.ripple.style.color = \"var(--primary-color)\"; // paper-ripple\n    // this.ripple.primary = true;\n\n    [\n      \"touchcancel\",\n      \"mouseout\",\n      \"mouseup\",\n      \"touchmove\",\n      \"mousewheel\",\n      \"wheel\",\n      \"scroll\",\n    ].forEach((ev) => {\n      document.addEventListener(\n        ev,\n        () => {\n          clearTimeout(this.timer);\n          this.stopAnimation();\n          this.timer = undefined;\n        },\n        { passive: true }\n      );\n    });\n  }\n\n  public bind(element: LongPressElement) {\n    if (element.longPress) {\n      return;\n    }\n    element.longPress = true;\n\n    element.addEventListener(\"contextmenu\", (ev: Event) => {\n      const e = ev || window.event;\n      if (e.preventDefault) {\n        e.preventDefault();\n      }\n      if (e.stopPropagation) {\n        e.stopPropagation();\n      }\n      e.cancelBubble = true;\n      e.returnValue = false;\n      return false;\n    });\n\n    const clickStart = (ev: Event) => {\n      if (this.cooldownStart) {\n        return;\n      }\n      this.held = false;\n      let x;\n      let y;\n      if ((ev as TouchEvent).touches) {\n        x = (ev as TouchEvent).touches[0].pageX;\n        y = (ev as TouchEvent).touches[0].pageY;\n      } else {\n        x = (ev as MouseEvent).pageX;\n        y = (ev as MouseEvent).pageY;\n      }\n      this.timer = window.setTimeout(() => {\n        this.startAnimation(x, y);\n        this.held = true;\n      }, this.holdTime);\n\n      this.cooldownStart = true;\n      window.setTimeout(() => (this.cooldownStart = false), 100);\n    };\n\n    const clickEnd = (ev: Event) => {\n      if (\n        this.cooldownEnd ||\n        ([\"touchend\", \"touchcancel\"].includes(ev.type) &&\n          this.timer === undefined)\n      ) {\n        return;\n      }\n      clearTimeout(this.timer);\n      this.stopAnimation();\n      this.timer = undefined;\n      if (this.held) {\n        element.dispatchEvent(new Event(\"ha-hold\"));\n      } else {\n        element.dispatchEvent(new Event(\"ha-click\"));\n      }\n      this.cooldownEnd = true;\n      window.setTimeout(() => (this.cooldownEnd = false), 100);\n    };\n\n    element.addEventListener(\"touchstart\", clickStart, { passive: true });\n    element.addEventListener(\"touchend\", clickEnd);\n    element.addEventListener(\"touchcancel\", clickEnd);\n    element.addEventListener(\"mousedown\", clickStart, { passive: true });\n    element.addEventListener(\"click\", clickEnd);\n  }\n\n  private startAnimation(x: number, y: number) {\n    Object.assign(this.style, {\n      left: `${x}px`,\n      top: `${y}px`,\n      display: null,\n    });\n    this.ripple.holdDown = true; // paper-ripple\n    this.ripple.simulatedRipple(); // paper-ripple\n    // this.ripple.disabled = false;\n    // this.ripple.active = true;\n    // this.ripple.unbounded = true;\n  }\n\n  private stopAnimation() {\n    this.ripple.holdDown = false; // paper-ripple\n    // this.ripple.active = false;\n    // this.ripple.disabled = true;\n    this.style.display = \"none\";\n  }\n}\n\ncustomElements.define(\"long-press\", LongPress);\n\nconst getLongPress = (): LongPress => {\n  const body = document.body;\n  if (body.querySelector(\"long-press\")) {\n    return body.querySelector(\"long-press\") as LongPress;\n  }\n\n  const longpress = document.createElement(\"long-press\");\n  body.appendChild(longpress);\n\n  return longpress as LongPress;\n};\n\nexport const longPressBind = (element: LongPressElement) => {\n  const longpress: LongPress = getLongPress();\n  if (!longpress) {\n    return;\n  }\n  longpress.bind(element);\n};\n\nexport const longPress = directive(() => (part: PropertyPart) => {\n  longPressBind(part.committer.element);\n});\n","import { STATES_OFF } from \"../../../../common/const\";\nimport { turnOnOffEntity } from \"./turn-on-off-entity\";\nimport { HomeAssistant } from \"../../../../types\";\nexport const toggleEntity = (\n  hass: HomeAssistant,\n  entityId: string\n): Promise<void> => {\n  const turnOn = STATES_OFF.includes(hass.states[entityId].state);\n  return turnOnOffEntity(hass, entityId, turnOn);\n};\n","import computeDomain from \"../../../../common/entity/compute_domain\";\nimport { STATES_OFF } from \"../../../../common/const\";\nimport { HomeAssistant } from \"../../../../types\";\n\nexport const turnOnOffEntities = (\n  hass: HomeAssistant,\n  entityIds: string[],\n  turnOn = true\n): void => {\n  const domainsToCall = {};\n  entityIds.forEach((entityId) => {\n    if (STATES_OFF.includes(hass.states[entityId].state) === turnOn) {\n      const stateDomain = computeDomain(entityId);\n      const serviceDomain = [\"cover\", \"lock\"].includes(stateDomain)\n        ? stateDomain\n        : \"homeassistant\";\n\n      if (!(serviceDomain in domainsToCall)) {\n        domainsToCall[serviceDomain] = [];\n      }\n      domainsToCall[serviceDomain].push(entityId);\n    }\n  });\n\n  Object.keys(domainsToCall).forEach((domain) => {\n    let service;\n    switch (domain) {\n      case \"lock\":\n        service = turnOn ? \"unlock\" : \"lock\";\n        break;\n      case \"cover\":\n        service = turnOn ? \"open_cover\" : \"close_cover\";\n        break;\n      default:\n        service = turnOn ? \"turn_on\" : \"turn_off\";\n    }\n\n    const entities = domainsToCall[domain];\n    hass.callService(domain, service, { entity_id: entities });\n  });\n};\n","import computeDomain from \"../../../../common/entity/compute_domain\";\nimport { HomeAssistant } from \"../../../../types\";\n\nexport const turnOnOffEntity = (\n  hass: HomeAssistant,\n  entityId: string,\n  turnOn = true\n): Promise<void> => {\n  const stateDomain = computeDomain(entityId);\n  const serviceDomain = stateDomain === \"group\" ? \"homeassistant\" : stateDomain;\n\n  let service;\n  switch (stateDomain) {\n    case \"lock\":\n      service = turnOn ? \"unlock\" : \"lock\";\n      break;\n    case \"cover\":\n      service = turnOn ? \"open_cover\" : \"close_cover\";\n      break;\n    default:\n      service = turnOn ? \"turn_on\" : \"turn_off\";\n  }\n\n  return hass.callService(serviceDomain, service, { entity_id: entityId });\n};\n","import { HomeAssistant, GroupEntity } from \"../../../types\";\nimport {\n  LovelaceConfig,\n  LovelaceCardConfig,\n  LovelaceViewConfig,\n} from \"../../../data/lovelace\";\nimport { HassEntity, HassEntities } from \"home-assistant-js-websocket\";\n\nimport extractViews from \"../../../common/entity/extract_views\";\nimport getViewEntities from \"../../../common/entity/get_view_entities\";\nimport computeStateName from \"../../../common/entity/compute_state_name\";\nimport splitByGroups from \"../../../common/entity/split_by_groups\";\nimport computeObjectId from \"../../../common/entity/compute_object_id\";\nimport computeStateDomain from \"../../../common/entity/compute_state_domain\";\nimport computeDomain from \"../../../common/entity/compute_domain\";\n\nimport { EntityRowConfig, WeblinkConfig } from \"../entity-rows/types\";\nimport { LocalizeFunc } from \"../../../common/translations/localize\";\nimport { EntitiesCardConfig } from \"../cards/types\";\nimport {\n  subscribeAreaRegistry,\n  AreaRegistryEntry,\n} from \"../../../data/area_registry\";\nimport { subscribeOne } from \"../../../common/util/subscribe-one\";\nimport {\n  subscribeDeviceRegistry,\n  DeviceRegistryEntry,\n} from \"../../../data/device_registry\";\nimport {\n  subscribeEntityRegistry,\n  EntityRegistryEntry,\n} from \"../../../data/entity_registry\";\n\nconst DEFAULT_VIEW_ENTITY_ID = \"group.default_view\";\nconst DOMAINS_BADGES = [\n  \"binary_sensor\",\n  \"person\",\n  \"device_tracker\",\n  \"mailbox\",\n  \"sensor\",\n  \"sun\",\n  \"timer\",\n];\nconst HIDE_DOMAIN = new Set([\n  \"persistent_notification\",\n  \"configurator\",\n  \"geo_location\",\n]);\n\ninterface Registries {\n  areas: AreaRegistryEntry[];\n  devices: DeviceRegistryEntry[];\n  entities: EntityRegistryEntry[];\n}\n\nlet subscribedRegistries = false;\n\ninterface SplittedByAreas {\n  areasWithEntities: Array<[AreaRegistryEntry, HassEntity[]]>;\n  otherEntities: HassEntities;\n}\n\nconst splitByAreas = (\n  registries: Registries,\n  entities: HassEntities\n): SplittedByAreas => {\n  const allEntities = { ...entities };\n  const areasWithEntities: SplittedByAreas[\"areasWithEntities\"] = [];\n\n  for (const area of registries.areas) {\n    const areaEntities: HassEntity[] = [];\n    const areaDevices = new Set(\n      registries.devices\n        .filter((device) => device.area_id === area.area_id)\n        .map((device) => device.id)\n    );\n    for (const entity of registries.entities) {\n      if (\n        areaDevices.has(\n          // @ts-ignore\n          entity.device_id\n        ) &&\n        entity.entity_id in allEntities\n      ) {\n        areaEntities.push(allEntities[entity.entity_id]);\n        delete allEntities[entity.entity_id];\n      }\n    }\n    if (areaEntities.length > 0) {\n      areasWithEntities.push([area, areaEntities]);\n    }\n  }\n  return {\n    areasWithEntities,\n    otherEntities: allEntities,\n  };\n};\n\nconst computeCards = (\n  states: Array<[string, HassEntity]>,\n  entityCardOptions: Partial<EntitiesCardConfig>\n): LovelaceCardConfig[] => {\n  const cards: LovelaceCardConfig[] = [];\n\n  // For entity card\n  const entities: Array<string | EntityRowConfig> = [];\n\n  for (const [entityId, stateObj] of states) {\n    const domain = computeDomain(entityId);\n\n    if (domain === \"alarm_control_panel\") {\n      cards.push({\n        type: \"alarm-panel\",\n        entity: entityId,\n      });\n    } else if (domain === \"camera\") {\n      cards.push({\n        type: \"picture-entity\",\n        entity: entityId,\n      });\n    } else if (domain === \"climate\") {\n      cards.push({\n        type: \"thermostat\",\n        entity: entityId,\n      });\n    } else if (domain === \"history_graph\" && stateObj) {\n      cards.push({\n        type: \"history-graph\",\n        entities: stateObj.attributes.entity_id,\n        hours_to_show: stateObj.attributes.hours_to_show,\n        title: stateObj.attributes.friendly_name,\n        refresh_interval: stateObj.attributes.refresh,\n      });\n    } else if (domain === \"media_player\") {\n      cards.push({\n        type: \"media-control\",\n        entity: entityId,\n      });\n    } else if (domain === \"plant\") {\n      cards.push({\n        type: \"plant-status\",\n        entity: entityId,\n      });\n    } else if (domain === \"weather\") {\n      cards.push({\n        type: \"weather-forecast\",\n        entity: entityId,\n      });\n    } else if (domain === \"weblink\" && stateObj) {\n      const conf: WeblinkConfig = {\n        type: \"weblink\",\n        url: stateObj.state,\n        name: computeStateName(stateObj),\n      };\n      if (\"icon\" in stateObj.attributes) {\n        conf.icon = stateObj.attributes.icon;\n      }\n      entities.push(conf);\n    } else {\n      entities.push(entityId);\n    }\n  }\n\n  if (entities.length > 0) {\n    cards.unshift({\n      type: \"entities\",\n      entities,\n      ...entityCardOptions,\n    });\n  }\n\n  return cards;\n};\n\nconst computeDefaultViewStates = (hass: HomeAssistant): HassEntities => {\n  const states = {};\n  Object.keys(hass.states).forEach((entityId) => {\n    const stateObj = hass.states[entityId];\n    if (\n      !stateObj.attributes.hidden &&\n      !HIDE_DOMAIN.has(computeStateDomain(stateObj))\n    ) {\n      states[entityId] = hass.states[entityId];\n    }\n  });\n  return states;\n};\n\nconst generateDefaultViewConfig = (\n  hass: HomeAssistant,\n  registries: Registries\n): LovelaceViewConfig => {\n  const states = computeDefaultViewStates(hass);\n  const path = \"default_view\";\n  const title = \"Home\";\n  const icon = undefined;\n\n  // In the case of a default view, we want to use the group order attribute\n  const groupOrders = {};\n  Object.keys(states).forEach((entityId) => {\n    const stateObj = states[entityId];\n    if (stateObj.attributes.order) {\n      groupOrders[entityId] = stateObj.attributes.order;\n    }\n  });\n\n  const splittedByAreas = splitByAreas(registries, states);\n\n  const config = generateViewConfig(\n    hass.localize,\n    path,\n    title,\n    icon,\n    splittedByAreas.otherEntities,\n    groupOrders\n  );\n\n  const areaCards: LovelaceCardConfig[] = [];\n\n  splittedByAreas.areasWithEntities.forEach(([area, entities]) => {\n    areaCards.push(\n      ...computeCards(entities.map((entity) => [entity.entity_id, entity]), {\n        title: area.name,\n        show_header_toggle: true,\n      })\n    );\n  });\n\n  config.cards!.unshift(...areaCards);\n\n  return config;\n};\n\nconst generateViewConfig = (\n  localize: LocalizeFunc,\n  path: string,\n  title: string | undefined,\n  icon: string | undefined,\n  entities: HassEntities,\n  groupOrders: { [entityId: string]: number }\n): LovelaceViewConfig => {\n  const splitted = splitByGroups(entities);\n  splitted.groups.sort(\n    (gr1, gr2) => groupOrders[gr1.entity_id] - groupOrders[gr2.entity_id]\n  );\n\n  const badgeEntities: { [domain: string]: string[] } = {};\n  const ungroupedEntitites: { [domain: string]: string[] } = {};\n\n  // Organize ungrouped entities in badges/ungrouped things\n  Object.keys(splitted.ungrouped).forEach((entityId) => {\n    const state = splitted.ungrouped[entityId];\n    const domain = computeStateDomain(state);\n\n    const coll = DOMAINS_BADGES.includes(domain)\n      ? badgeEntities\n      : ungroupedEntitites;\n\n    if (!(domain in coll)) {\n      coll[domain] = [];\n    }\n\n    coll[domain].push(state.entity_id);\n  });\n\n  let badges: string[] = [];\n  DOMAINS_BADGES.forEach((domain) => {\n    if (domain in badgeEntities) {\n      badges = badges.concat(badgeEntities[domain]);\n    }\n  });\n\n  let cards: LovelaceCardConfig[] = [];\n\n  splitted.groups.forEach((groupEntity) => {\n    cards = cards.concat(\n      computeCards(\n        groupEntity.attributes.entity_id.map(\n          (entityId): [string, HassEntity] => [entityId, entities[entityId]]\n        ),\n        {\n          title: computeStateName(groupEntity),\n          show_header_toggle: groupEntity.attributes.control !== \"hidden\",\n        }\n      )\n    );\n  });\n\n  Object.keys(ungroupedEntitites)\n    .sort()\n    .forEach((domain) => {\n      cards = cards.concat(\n        computeCards(\n          ungroupedEntitites[domain].map(\n            (entityId): [string, HassEntity] => [entityId, entities[entityId]]\n          ),\n          {\n            title: localize(`domain.${domain}`),\n          }\n        )\n      );\n    });\n\n  const view: LovelaceViewConfig = {\n    path,\n    title,\n    badges,\n    cards,\n  };\n\n  if (icon) {\n    view.icon = icon;\n  }\n\n  return view;\n};\n\nexport const generateLovelaceConfig = async (\n  hass: HomeAssistant,\n  localize: LocalizeFunc\n): Promise<LovelaceConfig> => {\n  const viewEntities = extractViews(hass.states);\n\n  const views = viewEntities.map((viewEntity: GroupEntity) => {\n    const states = getViewEntities(hass.states, viewEntity);\n\n    // In the case of a normal view, we use group order as specified in view\n    const groupOrders = {};\n    Object.keys(states).forEach((entityId, idx) => {\n      groupOrders[entityId] = idx;\n    });\n\n    return generateViewConfig(\n      localize,\n      computeObjectId(viewEntity.entity_id),\n      computeStateName(viewEntity),\n      viewEntity.attributes.icon,\n      states,\n      groupOrders\n    );\n  });\n\n  let title = hass.config.location_name;\n\n  // User can override default view. If they didn't, we will add one\n  // that contains all entities.\n  if (\n    viewEntities.length === 0 ||\n    viewEntities[0].entity_id !== DEFAULT_VIEW_ENTITY_ID\n  ) {\n    // We want to keep the registry subscriptions alive after generating the UI\n    // so that we don't serve up stale data after changing areas.\n    if (!subscribedRegistries) {\n      subscribedRegistries = true;\n      subscribeAreaRegistry(hass.connection, () => undefined);\n      subscribeDeviceRegistry(hass.connection, () => undefined);\n      subscribeEntityRegistry(hass.connection, () => undefined);\n    }\n\n    const [areas, devices, entities] = await Promise.all([\n      subscribeOne(hass.connection, subscribeAreaRegistry),\n      subscribeOne(hass.connection, subscribeDeviceRegistry),\n      subscribeOne(hass.connection, subscribeEntityRegistry),\n    ]);\n    const registries = { areas, devices, entities };\n\n    views.unshift(generateDefaultViewConfig(hass, registries));\n\n    // Add map of geo locations to default view if loaded\n    if (hass.config.components.includes(\"geo_location\")) {\n      if (views[0] && views[0].cards) {\n        views[0].cards.push({\n          type: \"map\",\n          geo_location_sources: [\"all\"],\n        });\n      }\n    }\n\n    // Make sure we don't have Home as title and first tab.\n    if (views.length > 1 && title === \"Home\") {\n      title = \"Home Assistant\";\n    }\n  }\n\n  if (__DEMO__) {\n    views[0].cards!.unshift({\n      type: \"custom:ha-demo-card\",\n    });\n  }\n\n  // User has no entities\n  if (views.length === 1 && views[0].cards!.length === 0) {\n    import(/* webpackChunkName: \"hui-empty-state-card\" */ \"../cards/hui-empty-state-card\");\n    views[0].cards!.push({\n      type: \"custom:hui-empty-state-card\",\n    });\n  }\n\n  return {\n    title,\n    views,\n  };\n};\n","import { HomeAssistant } from \"../../../types\";\nimport { fireEvent } from \"../../../common/dom/fire_event\";\nimport { navigate } from \"../../../common/navigate\";\nimport { toggleEntity } from \"../../../../src/panels/lovelace/common/entity/toggle-entity\";\nimport { ActionConfig } from \"../../../data/lovelace\";\n\nexport const handleClick = (\n  node: HTMLElement,\n  hass: HomeAssistant,\n  config: {\n    entity?: string;\n    camera_image?: string;\n    hold_action?: ActionConfig;\n    tap_action?: ActionConfig;\n  },\n  hold: boolean\n): void => {\n  let actionConfig: ActionConfig | undefined;\n\n  if (hold && config.hold_action) {\n    actionConfig = config.hold_action;\n  } else if (!hold && config.tap_action) {\n    actionConfig = config.tap_action;\n  }\n\n  if (!actionConfig) {\n    actionConfig = {\n      action: \"more-info\",\n    };\n  }\n\n  switch (actionConfig.action) {\n    case \"more-info\":\n      if (config.entity || config.camera_image) {\n        fireEvent(node, \"hass-more-info\", {\n          entityId: config.entity ? config.entity : config.camera_image!,\n        });\n      }\n      break;\n    case \"navigate\":\n      if (actionConfig.navigation_path) {\n        navigate(node, actionConfig.navigation_path);\n      }\n      break;\n    case \"toggle\":\n      if (config.entity) {\n        toggleEntity(hass, config.entity!);\n      }\n      break;\n    case \"call-service\": {\n      if (!actionConfig.service) {\n        return;\n      }\n      const [domain, service] = actionConfig.service.split(\".\", 2);\n      hass.callService(domain, service, actionConfig.service_data);\n    }\n  }\n};\n","import { HomeAssistant } from \"../../../types\";\nimport { PropertyValues } from \"lit-element\";\n\n// Check if config or Entity changed\nexport function hasConfigOrEntityChanged(\n  element: any,\n  changedProps: PropertyValues\n): boolean {\n  if (changedProps.has(\"_config\")) {\n    return true;\n  }\n\n  const oldHass = changedProps.get(\"hass\") as HomeAssistant | undefined;\n  if (oldHass) {\n    return (\n      oldHass.states[element._config!.entity] !==\n      element.hass!.states[element._config!.entity]\n    );\n  }\n\n  return true;\n}\n","// Parse array of entity objects from config\nimport isValidEntityId from \"../../../common/entity/valid_entity_id\";\nimport { EntityConfig } from \"../entity-rows/types\";\n\nexport const processConfigEntities = <T extends EntityConfig>(\n  entities: Array<T | string>\n): T[] => {\n  if (!entities || !Array.isArray(entities)) {\n    throw new Error(\"Entities need to be an array\");\n  }\n\n  return entities.map(\n    (entityConf, index): T => {\n      if (\n        typeof entityConf === \"object\" &&\n        !Array.isArray(entityConf) &&\n        entityConf.type\n      ) {\n        return entityConf;\n      }\n\n      let config: T;\n\n      if (typeof entityConf === \"string\") {\n        // tslint:disable-next-line:no-object-literal-type-assertion\n        config = { entity: entityConf } as T;\n      } else if (typeof entityConf === \"object\" && !Array.isArray(entityConf)) {\n        if (!entityConf.entity) {\n          throw new Error(\n            `Entity object at position ${index} is missing entity field.`\n          );\n        }\n        config = entityConf as T;\n      } else {\n        throw new Error(`Invalid entity specified at position ${index}.`);\n      }\n\n      if (!isValidEntityId(config.entity)) {\n        throw new Error(\n          `Invalid entity ID at position ${index}: ${config.entity}`\n        );\n      }\n\n      return config;\n    }\n  );\n};\n","import { HomeAssistant } from \"../../../types\";\n\nexport interface Condition {\n  entity: string;\n  state?: string;\n  state_not?: string;\n}\n\nexport function checkConditionsMet(\n  conditions: Condition[],\n  hass: HomeAssistant\n): boolean {\n  return conditions.every((c) => {\n    const state = hass.states[c.entity]\n      ? hass!.states[c.entity].state\n      : \"unavailable\";\n\n    return c.state ? state === c.state : state !== c.state_not;\n  });\n}\n\nexport function validateConditionalConfig(conditions: Condition[]): boolean {\n  return conditions.every(\n    (c) => ((c.entity && (c.state || c.state_not)) as unknown) as boolean\n  );\n}\n","import {\n  html,\n  LitElement,\n  PropertyValues,\n  TemplateResult,\n  customElement,\n  property,\n  css,\n  CSSResult,\n} from \"lit-element\";\nimport { PaperToggleButtonElement } from \"@polymer/paper-toggle-button/paper-toggle-button\";\n\nimport { DOMAINS_TOGGLE } from \"../../../common/const\";\nimport { turnOnOffEntities } from \"../common/entity/turn-on-off-entities\";\nimport { HomeAssistant } from \"../../../types\";\nimport { forwardHaptic } from \"../../../data/haptics\";\n\n@customElement(\"hui-entities-toggle\")\nclass HuiEntitiesToggle extends LitElement {\n  @property() public entities?: string[];\n\n  @property() protected hass?: HomeAssistant;\n\n  @property() private _toggleEntities?: string[];\n\n  public updated(changedProperties: PropertyValues): void {\n    super.updated(changedProperties);\n    if (changedProperties.has(\"entities\")) {\n      this._toggleEntities = this.entities!.filter(\n        (entityId) =>\n          entityId in this.hass!.states &&\n          DOMAINS_TOGGLE.has(entityId.split(\".\", 1)[0])\n      );\n    }\n  }\n\n  protected render(): TemplateResult | void {\n    if (!this._toggleEntities) {\n      return html``;\n    }\n\n    return html`\n      <paper-toggle-button\n        ?checked=\"${this._toggleEntities!.some((entityId) => {\n          const stateObj = this.hass!.states[entityId];\n          return stateObj && stateObj.state === \"on\";\n        })}\"\n        @change=\"${this._callService}\"\n      ></paper-toggle-button>\n    `;\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      :host {\n        width: 38px;\n        display: block;\n      }\n      paper-toggle-button {\n        cursor: pointer;\n        --paper-toggle-button-label-spacing: 0;\n        padding: 13px 5px;\n        margin: -4px -5px;\n      }\n    `;\n  }\n\n  private _callService(ev: MouseEvent): void {\n    forwardHaptic(\"light\");\n    const turnOn = (ev.target as PaperToggleButtonElement).checked;\n    turnOnOffEntities(this.hass!, this._toggleEntities!, turnOn!);\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-entities-toggle\": HuiEntitiesToggle;\n  }\n}\n","import computeStateName from \"../../../common/entity/compute_state_name\";\nimport {\n  LitElement,\n  html,\n  css,\n  CSSResult,\n  PropertyValues,\n  property,\n  TemplateResult,\n} from \"lit-element\";\n\nimport \"../../../components/entity/state-badge\";\nimport \"../../../components/ha-relative-time\";\nimport \"../../../components/ha-icon\";\nimport \"../components/hui-warning\";\n\nimport { HomeAssistant } from \"../../../types\";\nimport { computeRTL } from \"../../../common/util/compute_rtl\";\nimport { EntitiesCardEntityConfig } from \"../cards/types\";\n\nclass HuiGenericEntityRow extends LitElement {\n  @property() public hass?: HomeAssistant;\n\n  @property() public config?: EntitiesCardEntityConfig;\n\n  @property() public showSecondary: boolean = true;\n\n  protected render(): TemplateResult | void {\n    if (!this.hass || !this.config) {\n      return html``;\n    }\n    const stateObj = this.config.entity\n      ? this.hass.states[this.config.entity]\n      : undefined;\n\n    if (!stateObj) {\n      return html`\n        <hui-warning\n          >${this.hass.localize(\n            \"ui.panel.lovelace.warning.entity_not_found\",\n            \"entity\",\n            this.config.entity\n          )}</hui-warning\n        >\n      `;\n    }\n\n    return html`\n      <state-badge\n        .stateObj=\"${stateObj}\"\n        .overrideIcon=\"${this.config.icon}\"\n      ></state-badge>\n      <div class=\"flex\">\n        <div class=\"info\">\n          ${this.config.name || computeStateName(stateObj)}\n          <div class=\"secondary\">\n            ${!this.showSecondary\n              ? html`\n                  <slot name=\"secondary\"></slot>\n                `\n              : this.config.secondary_info === \"entity-id\"\n              ? stateObj.entity_id\n              : this.config.secondary_info === \"last-changed\"\n              ? html`\n                  <ha-relative-time\n                    .hass=\"${this.hass}\"\n                    .datetime=\"${stateObj.last_changed}\"\n                  ></ha-relative-time>\n                `\n              : \"\"}\n          </div>\n        </div>\n\n        <slot></slot>\n      </div>\n    `;\n  }\n\n  protected updated(changedProps: PropertyValues): void {\n    super.updated(changedProps);\n    if (changedProps.has(\"hass\")) {\n      this.toggleAttribute(\"rtl\", computeRTL(this.hass!));\n    }\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      :host {\n        display: flex;\n        align-items: center;\n      }\n      .flex {\n        flex: 1;\n        margin-left: 16px;\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n        min-width: 0;\n      }\n      .info {\n        flex: 1 0 60px;\n      }\n      .info,\n      .info > * {\n        white-space: nowrap;\n        overflow: hidden;\n        text-overflow: ellipsis;\n      }\n      .flex ::slotted(*) {\n        margin-left: 8px;\n        min-width: 0;\n      }\n      .flex ::slotted([slot=\"secondary\"]) {\n        margin-left: 0;\n      }\n      .secondary,\n      ha-relative-time {\n        display: block;\n        color: var(--secondary-text-color);\n      }\n      state-badge {\n        flex: 0 0 40px;\n      }\n      :host([rtl]) .flex {\n        margin-left: 0;\n        margin-right: 16px;\n      }\n      :host([rtl]) .flex ::slotted(*) {\n        margin-left: 0;\n        margin-right: 8px;\n      }\n    `;\n  }\n}\ncustomElements.define(\"hui-generic-entity-row\", HuiGenericEntityRow);\n","import \"@polymer/paper-toggle-button/paper-toggle-button\";\n\nimport { STATES_OFF } from \"../../../common/const\";\n\nimport parseAspectRatio from \"../../../common/util/parse-aspect-ratio\";\nimport {\n  LitElement,\n  TemplateResult,\n  html,\n  property,\n  CSSResult,\n  css,\n  PropertyValues,\n  query,\n  customElement,\n} from \"lit-element\";\nimport { HomeAssistant, CameraEntity } from \"../../../types\";\nimport { styleMap } from \"lit-html/directives/style-map\";\nimport { classMap } from \"lit-html/directives/class-map\";\nimport { fetchThumbnailUrlWithCache } from \"../../../data/camera\";\n\nconst UPDATE_INTERVAL = 10000;\nconst DEFAULT_FILTER = \"grayscale(100%)\";\n\nexport interface StateSpecificConfig {\n  [state: string]: string;\n}\n\n@customElement(\"hui-image\")\nexport class HuiImage extends LitElement {\n  @property() public hass?: HomeAssistant;\n\n  @property() public entity?: string;\n\n  @property() public image?: string;\n\n  @property() public stateImage?: StateSpecificConfig;\n\n  @property() public cameraImage?: string;\n\n  @property() public cameraView?: \"live\" | \"auto\";\n\n  @property() public aspectRatio?: string;\n\n  @property() public filter?: string;\n\n  @property() public stateFilter?: StateSpecificConfig;\n\n  @property() private _loadError?: boolean;\n\n  @property() private _cameraImageSrc?: string;\n\n  @query(\"img\") private _image!: HTMLImageElement;\n\n  private _lastImageHeight?: number;\n\n  private _cameraUpdater?: number;\n\n  private _attached?: boolean;\n\n  public connectedCallback(): void {\n    super.connectedCallback();\n    this._attached = true;\n    if (this.cameraImage && this.cameraView !== \"live\") {\n      this._startUpdateCameraInterval();\n    }\n  }\n\n  public disconnectedCallback(): void {\n    super.disconnectedCallback();\n    this._attached = false;\n    this._stopUpdateCameraInterval();\n  }\n\n  protected render(): TemplateResult | void {\n    const ratio = this.aspectRatio ? parseAspectRatio(this.aspectRatio) : null;\n    const stateObj =\n      this.hass && this.entity ? this.hass.states[this.entity] : undefined;\n    const state = stateObj ? stateObj.state : \"unavailable\";\n\n    // Figure out image source to use\n    let imageSrc: string | undefined;\n    let cameraObj: CameraEntity | undefined;\n    // Track if we are we using a fallback image, used for filter.\n    let imageFallback = !this.stateImage;\n\n    if (this.cameraImage) {\n      if (this.cameraView === \"live\") {\n        cameraObj =\n          this.hass && (this.hass.states[this.cameraImage] as CameraEntity);\n      } else {\n        imageSrc = this._cameraImageSrc;\n      }\n    } else if (this.stateImage) {\n      const stateImage = this.stateImage[state];\n\n      if (stateImage) {\n        imageSrc = stateImage;\n      } else {\n        imageSrc = this.image;\n        imageFallback = true;\n      }\n    } else {\n      imageSrc = this.image;\n    }\n\n    // Figure out filter to use\n    let filter = this.filter || \"\";\n\n    if (this.stateFilter && this.stateFilter[state]) {\n      filter = this.stateFilter[state];\n    }\n\n    if (!filter && this.entity) {\n      const isOff = !stateObj || STATES_OFF.includes(state);\n      filter = isOff && imageFallback ? DEFAULT_FILTER : \"\";\n    }\n\n    return html`\n      <div\n        style=${styleMap({\n          paddingBottom:\n            ratio && ratio.w > 0 && ratio.h > 0\n              ? `${((100 * ratio.h) / ratio.w).toFixed(2)}%`\n              : \"\",\n        })}\n        class=${classMap({\n          ratio: Boolean(ratio && ratio.w > 0 && ratio.h > 0),\n        })}\n      >\n        ${this.cameraImage && this.cameraView === \"live\"\n          ? html`\n              <ha-camera-stream\n                .hass=\"${this.hass}\"\n                .stateObj=\"${cameraObj}\"\n              ></ha-camera-stream>\n            `\n          : html`\n              <img\n                id=\"image\"\n                src=${imageSrc}\n                @error=${this._onImageError}\n                @load=${this._onImageLoad}\n                style=${styleMap({\n                  filter,\n                  display: this._loadError ? \"none\" : \"block\",\n                })}\n              />\n            `}\n        <div\n          id=\"brokenImage\"\n          style=${styleMap({\n            height: `${this._lastImageHeight || \"100\"}px`,\n            display: this._loadError ? \"block\" : \"none\",\n          })}\n        ></div>\n      </div>\n    `;\n  }\n\n  protected updated(changedProps: PropertyValues): void {\n    if (changedProps.has(\"cameraImage\") && this.cameraView !== \"live\") {\n      this._updateCameraImageSrc();\n      this._startUpdateCameraInterval();\n      return;\n    }\n  }\n\n  private _startUpdateCameraInterval(): void {\n    this._stopUpdateCameraInterval();\n    if (this.cameraImage && this._attached) {\n      this._cameraUpdater = window.setInterval(\n        () => this._updateCameraImageSrc(),\n        UPDATE_INTERVAL\n      );\n    }\n  }\n\n  private _stopUpdateCameraInterval(): void {\n    if (this._cameraUpdater) {\n      clearInterval(this._cameraUpdater);\n    }\n  }\n\n  private _onImageError(): void {\n    this._loadError = true;\n  }\n\n  private async _onImageLoad(): Promise<void> {\n    this._loadError = false;\n    await this.updateComplete;\n    this._lastImageHeight = this._image.offsetHeight;\n  }\n\n  private async _updateCameraImageSrc(): Promise<void> {\n    if (!this.hass || !this.cameraImage) {\n      return;\n    }\n\n    const cameraState = this.hass.states[this.cameraImage] as\n      | CameraEntity\n      | undefined;\n\n    if (!cameraState) {\n      this._onImageError();\n      return;\n    }\n\n    this._cameraImageSrc = await fetchThumbnailUrlWithCache(\n      this.hass,\n      this.cameraImage\n    );\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      img {\n        display: block;\n        height: auto;\n        transition: filter 0.2s linear;\n        width: 100%;\n      }\n\n      .ratio {\n        position: relative;\n        width: 100%;\n        height: 0;\n      }\n\n      .ratio img,\n      .ratio div {\n        position: absolute;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n      }\n\n      #brokenImage {\n        background: grey url(\"/static/images/image-broken.svg\") center/36px\n          no-repeat;\n      }\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-image\": HuiImage;\n  }\n}\n","import {\n  html,\n  LitElement,\n  PropertyValues,\n  TemplateResult,\n  customElement,\n  property,\n} from \"lit-element\";\n\nimport { HomeAssistant } from \"../../../types\";\nimport format_date from \"../../../common/datetime/format_date\";\nimport format_date_time from \"../../../common/datetime/format_date_time\";\nimport format_time from \"../../../common/datetime/format_time\";\nimport relativeTime from \"../../../common/datetime/relative_time\";\n\nconst FORMATS: { [key: string]: (ts: Date, lang: string) => string } = {\n  date: format_date,\n  datetime: format_date_time,\n  time: format_time,\n};\nconst INTERVAL_FORMAT = [\"relative\", \"total\"];\n\n@customElement(\"hui-timestamp-display\")\nclass HuiTimestampDisplay extends LitElement {\n  @property() public hass?: HomeAssistant;\n\n  @property() public ts?: Date;\n\n  @property() public format?:\n    | \"relative\"\n    | \"total\"\n    | \"date\"\n    | \"datetime\"\n    | \"time\";\n\n  @property() private _relative?: string;\n\n  private _connected?: boolean;\n\n  private _interval?: number;\n\n  public connectedCallback(): void {\n    super.connectedCallback();\n    this._connected = true;\n    this._startInterval();\n  }\n\n  public disconnectedCallback(): void {\n    super.disconnectedCallback();\n    this._connected = false;\n    this._clearInterval();\n  }\n\n  protected render(): TemplateResult | void {\n    if (!this.ts || !this.hass) {\n      return html``;\n    }\n\n    if (isNaN(this.ts.getTime())) {\n      return html`\n        Invalid date\n      `;\n    }\n\n    const format = this._format;\n\n    if (INTERVAL_FORMAT.includes(format)) {\n      return html`\n        ${this._relative}\n      `;\n    }\n    if (format in FORMATS) {\n      return html`\n        ${FORMATS[format](this.ts, this.hass.language)}\n      `;\n    }\n    return html`\n      Invalid format\n    `;\n  }\n\n  protected updated(changedProperties: PropertyValues): void {\n    super.updated(changedProperties);\n    if (!changedProperties.has(\"format\") || !this._connected) {\n      return;\n    }\n\n    if (INTERVAL_FORMAT.includes(\"relative\")) {\n      this._startInterval();\n    } else {\n      this._clearInterval();\n    }\n  }\n\n  private get _format(): string {\n    return this.format || \"relative\";\n  }\n\n  private _startInterval(): void {\n    this._clearInterval();\n    if (this._connected && INTERVAL_FORMAT.includes(this._format)) {\n      this._updateRelative();\n      this._interval = window.setInterval(() => this._updateRelative(), 1000);\n    }\n  }\n\n  private _clearInterval(): void {\n    if (this._interval) {\n      clearInterval(this._interval);\n      this._interval = undefined;\n    }\n  }\n\n  private _updateRelative(): void {\n    if (this.ts && this.hass!.localize) {\n      this._relative =\n        this._format === \"relative\"\n          ? relativeTime(this.ts, this.hass!.localize)\n          : (this._relative = relativeTime(new Date(), this.hass!.localize, {\n              compareTime: this.ts,\n              includeTense: false,\n            }));\n    }\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-timestamp-display\": HuiTimestampDisplay;\n  }\n}\n","import {\n  html,\n  LitElement,\n  TemplateResult,\n  CSSResult,\n  css,\n  customElement,\n  property,\n} from \"lit-element\";\n\nimport \"../../../components/ha-icon\";\n\n@customElement(\"hui-warning-element\")\nexport class HuiWarningElement extends LitElement {\n  @property() public label?: string;\n\n  protected render(): TemplateResult | void {\n    return html`\n      <ha-icon icon=\"hass:alert\" .title=\"${this.label}\"></ha-icon>\n    `;\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      ha-icon {\n        color: #fce588;\n      }\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-warning-element\": HuiWarningElement;\n  }\n}\n","import {\n  html,\n  LitElement,\n  TemplateResult,\n  CSSResult,\n  css,\n  customElement,\n} from \"lit-element\";\n\n@customElement(\"hui-warning\")\nexport class HuiWarning extends LitElement {\n  protected render(): TemplateResult | void {\n    return html`\n      <slot></slot>\n    `;\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      :host {\n        display: block;\n        color: black;\n        background-color: #fce588;\n        padding: 8px;\n      }\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-warning\": HuiWarning;\n  }\n}\n","import {\n  html,\n  LitElement,\n  TemplateResult,\n  property,\n  customElement,\n} from \"lit-element\";\nimport \"@material/mwc-button\";\n\nimport \"./hui-notification-item-template\";\n\nimport { HomeAssistant } from \"../../../../types\";\nimport { fireEvent } from \"../../../../common/dom/fire_event\";\nimport { HassNotification } from \"./types\";\n\n@customElement(\"hui-configurator-notification-item\")\nexport class HuiConfiguratorNotificationItem extends LitElement {\n  @property() public hass?: HomeAssistant;\n\n  @property() public notification?: HassNotification;\n\n  protected render(): TemplateResult | void {\n    if (!this.hass || !this.notification) {\n      return html``;\n    }\n\n    return html`\n      <hui-notification-item-template>\n        <span slot=\"header\">${this.hass.localize(\"domain.configurator\")}</span>\n\n        <div>\n          ${this.hass.localize(\n            \"ui.notification_drawer.click_to_configure\",\n            \"entity\",\n            this.notification.attributes.friendly_name\n          )}\n        </div>\n\n        <mwc-button slot=\"actions\" @click=\"${this._handleClick}\"\n          >${this.hass.localize(\n            `state.configurator.${this.notification.state}`\n          )}</mwc-button\n        >\n      </hui-notification-item-template>\n    `;\n  }\n\n  private _handleClick(): void {\n    fireEvent(this, \"hass-more-info\", {\n      entityId: this.notification!.entity_id,\n    });\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-configurator-notification-item\": HuiConfiguratorNotificationItem;\n  }\n}\n","import \"@material/mwc-button\";\nimport \"@polymer/paper-icon-button/paper-icon-button\";\nimport \"@polymer/app-layout/app-toolbar/app-toolbar\";\n\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport \"./hui-notification-item\";\nimport \"../../../../components/ha-paper-icon-button-next\";\n\nimport { EventsMixin } from \"../../../../mixins/events-mixin\";\nimport LocalizeMixin from \"../../../../mixins/localize-mixin\";\nimport { computeRTL } from \"../../../../common/util/compute_rtl\";\n\n/*\n * @appliesMixin EventsMixin\n * @appliesMixin LocalizeMixin\n */\nexport class HuiNotificationDrawer extends EventsMixin(\n  LocalizeMixin(PolymerElement)\n) {\n  static get template() {\n    return html`\n    <style include=\"paper-material-styles\">\n      :host {\n        bottom: 0;\n        left: 0;\n        position: absolute;\n        right: 0;\n        top: 0;\n      }\n\n      :host([hidden]) {\n        display: none;\n      }\n\n      .container {\n        align-items: stretch;\n        background: var(--sidebar-background-color, var(--primary-background-color));\n        bottom: 0;\n        box-shadow: var(--paper-material-elevation-1_-_box-shadow);\n        display: flex;\n        flex-direction: column;\n        overflow-y: hidden;\n        position: fixed;\n        top: 0;\n        transition: right .2s ease-in;\n        width: 500px;\n        z-index: 10;\n      }\n\n      :host([rtl]) .container {\n        transition: left .2s ease-in !important;\n      }\n\n      :host(:not(narrow)) .container {\n        right: -500px;\n      }\n\n      :host([rtl]:not(narrow)) .container {\n        left: -500px;\n      }\n\n      :host([narrow]) .container {\n        right: -100%;\n        width: 100%;\n      }\n\n      :host([rtl][narrow]) .container {\n        left: -100%;\n        width: 100%;\n      }\n\n      :host(.open) .container,\n      :host(.open[narrow]) .container {\n        right: 0;\n      }\n\n      :host([rtl].open) .container,\n      :host([rtl].open[narrow]) .container {\n        left: 0;\n      }\n\n      app-toolbar {\n        color: var(--primary-text-color);\n        border-bottom: 1px solid var(--divider-color);\n        background-color: var(--primary-background-color);\n        min-height: 64px;\n        width: calc(100% - 32px);\n        z-index: 11;\n      }\n\n      .overlay {\n        display: none;\n      }\n\n      :host(.open) .overlay {\n        bottom: 0;\n        display: block;\n        left: 0;\n        position: absolute;\n        right: 0;\n        top: 0;\n        z-index: 5;\n      }\n\n      .notifications {\n        overflow-y: auto;\n        padding-top: 16px;\n      }\n\n      .notification {\n        padding: 0 16px 16px;\n      }\n\n      .empty {\n        padding: 16px;\n        text-align: center;\n      }\n    </style>\n    <div class=\"overlay\" on-click=\"_closeDrawer\"></div>\n    <div class=\"container\">\n      <app-toolbar>\n        <div main-title>[[localize('ui.notification_drawer.title')]]</div>\n        <ha-paper-icon-button-next on-click=\"_closeDrawer\"></paper-icon-button>\n      </app-toolbar>\n      <div class=\"notifications\">\n        <template is=\"dom-if\" if=\"[[!_empty(notifications)]]\">\n          <dom-repeat items=\"[[notifications]]\">\n            <template>\n              <div class=\"notification\">\n                <hui-notification-item hass=\"[[hass]]\" notification=\"[[item]]\"></hui-notification-item>\n              </div>\n            </template>\n          </dom-repeat>\n        </template>\n        <template is=\"dom-if\" if=\"[[_empty(notifications)]]\">\n          <div class=\"empty\">[[localize('ui.notification_drawer.empty')]]<div>\n        </template>\n      </div>\n    </div>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      narrow: {\n        type: Boolean,\n        reflectToAttribute: true,\n      },\n      open: {\n        type: Boolean,\n        notify: true,\n        observer: \"_openChanged\",\n      },\n      hidden: {\n        type: Boolean,\n        value: true,\n        reflectToAttribute: true,\n      },\n      notifications: {\n        type: Array,\n        value: [],\n      },\n      rtl: {\n        type: Boolean,\n        reflectToAttribute: true,\n        computed: \"_computeRTL(hass)\",\n      },\n    };\n  }\n\n  _closeDrawer(ev) {\n    ev.stopPropagation();\n    this.open = false;\n  }\n\n  _empty(notifications) {\n    return notifications.length === 0;\n  }\n\n  _openChanged(open) {\n    clearTimeout(this._openTimer);\n    if (open) {\n      // Render closed then animate open\n      this.hidden = false;\n      this._openTimer = setTimeout(() => {\n        this.classList.add(\"open\");\n      }, 50);\n    } else {\n      // Animate closed then hide\n      this.classList.remove(\"open\");\n      this._openTimer = setTimeout(() => {\n        this.hidden = true;\n      }, 250);\n    }\n  }\n\n  _computeRTL(hass) {\n    return computeRTL(hass);\n  }\n}\ncustomElements.define(\"hui-notification-drawer\", HuiNotificationDrawer);\n","import {\n  html,\n  LitElement,\n  TemplateResult,\n  customElement,\n  css,\n  CSSResult,\n} from \"lit-element\";\n\nimport \"../../../../components/ha-card\";\n\n@customElement(\"hui-notification-item-template\")\nexport class HuiNotificationItemTemplate extends LitElement {\n  protected render(): TemplateResult | void {\n    return html`\n      <ha-card>\n        <div class=\"header\"><slot name=\"header\"></slot></div>\n        <div class=\"contents\"><slot></slot></div>\n        <div class=\"actions\"><slot name=\"actions\"></slot></div>\n      </ha-card>\n    `;\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      .contents {\n        padding: 16px;\n      }\n\n      ha-card .header {\n        /* start paper-font-headline style */\n        font-family: \"Roboto\", \"Noto\", sans-serif;\n        -webkit-font-smoothing: antialiased; /* OS X subpixel AA bleed bug */\n        text-rendering: optimizeLegibility;\n        font-size: 24px;\n        font-weight: 400;\n        letter-spacing: -0.012em;\n        line-height: 32px;\n        /* end paper-font-headline style */\n\n        color: var(--primary-text-color);\n        padding: 16px 16px 0;\n      }\n\n      .actions {\n        border-top: 1px solid #e8e8e8;\n        padding: 5px 16px;\n      }\n\n      ::slotted(.primary) {\n        color: var(--primary-color);\n      }\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-notification-item-template\": HuiNotificationItemTemplate;\n  }\n}\n","import {\n  LitElement,\n  property,\n  customElement,\n  PropertyValues,\n  TemplateResult,\n  html,\n} from \"lit-element\";\n\nimport \"./hui-configurator-notification-item\";\nimport \"./hui-persistent-notification-item\";\n\nimport { HomeAssistant } from \"../../../../types\";\nimport { HassNotification } from \"./types\";\n\n@customElement(\"hui-notification-item\")\nexport class HuiNotificationItem extends LitElement {\n  @property() public hass?: HomeAssistant;\n\n  @property() public notification?: HassNotification;\n\n  protected shouldUpdate(changedProps: PropertyValues): boolean {\n    if (!this.hass || !this.notification || changedProps.has(\"notification\")) {\n      return true;\n    }\n\n    return false;\n  }\n\n  protected render(): TemplateResult | void {\n    if (!this.hass || !this.notification) {\n      return html``;\n    }\n\n    return this.notification.entity_id\n      ? html`\n          <hui-configurator-notification-item\n            .hass=\"${this.hass}\"\n            .notification=\"${this.notification}\"\n          ></hui-configurator-notification-item>\n        `\n      : html`\n          <hui-persistent-notification-item\n            .hass=\"${this.hass}\"\n            .notification=\"${this.notification}\"\n          ></hui-persistent-notification-item>\n        `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-notification-item\": HuiNotificationItem;\n  }\n}\n","import {\n  html,\n  LitElement,\n  TemplateResult,\n  css,\n  CSSResult,\n  property,\n} from \"lit-element\";\nimport \"@polymer/paper-icon-button/paper-icon-button\";\nimport { fireEvent } from \"../../../../common/dom/fire_event\";\n\ndeclare global {\n  // tslint:disable-next-line\n  interface HASSDomEvents {\n    \"opened-changed\": { value: boolean };\n  }\n}\n\nclass HuiNotificationsButton extends LitElement {\n  @property() public notifications?: string[];\n  @property() public opened?: boolean;\n\n  protected render(): TemplateResult | void {\n    return html`\n      <paper-icon-button\n        icon=\"hass:bell\"\n        @click=\"${this._clicked}\"\n      ></paper-icon-button>\n      ${this.notifications && this.notifications.length > 0\n        ? html`\n            <span class=\"indicator\">\n              <div>${this.notifications.length}</div>\n            </span>\n          `\n        : \"\"}\n    `;\n  }\n\n  static get styles(): CSSResult[] {\n    return [\n      css`\n        :host {\n          position: relative;\n        }\n\n        .indicator {\n          position: absolute;\n          top: 0px;\n          right: -3px;\n          width: 20px;\n          height: 20px;\n          border-radius: 50%;\n          background: var(--accent-color);\n          pointer-events: none;\n          z-index: 1;\n        }\n\n        .indicator > div {\n          right: 7px;\n          top: 3px;\n          position: absolute;\n          font-size: 0.55em;\n        }\n      `,\n    ];\n  }\n\n  private _clicked() {\n    this.opened = true;\n    fireEvent(this, \"opened-changed\", { value: this.opened });\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-notifications-button\": HuiNotificationsButton;\n  }\n}\n\ncustomElements.define(\"hui-notifications-button\", HuiNotificationsButton);\n","import {\n  html,\n  LitElement,\n  TemplateResult,\n  property,\n  customElement,\n  css,\n  CSSResult,\n} from \"lit-element\";\nimport \"@material/mwc-button\";\nimport \"@polymer/paper-tooltip/paper-tooltip\";\n\nimport \"../../../../components/ha-relative-time\";\nimport \"../../../../components/ha-markdown\";\nimport \"./hui-notification-item-template\";\n\nimport { HomeAssistant } from \"../../../../types\";\nimport { HassNotification } from \"./types\";\n\n@customElement(\"hui-persistent-notification-item\")\nexport class HuiPersistentNotificationItem extends LitElement {\n  @property() public hass?: HomeAssistant;\n\n  @property() public notification?: HassNotification;\n\n  protected render(): TemplateResult | void {\n    if (!this.hass || !this.notification) {\n      return html``;\n    }\n\n    return html`\n      <hui-notification-item-template>\n        <span slot=\"header\">${this._computeTitle(this.notification)}</span>\n\n        <ha-markdown content=\"${this.notification.message}\"></ha-markdown>\n\n        <div class=\"time\">\n          <span>\n            <ha-relative-time\n              .hass=\"${this.hass}\"\n              .datetime=\"${this.notification.created_at}\"\n            ></ha-relative-time>\n            <paper-tooltip\n              >${this._computeTooltip(\n                this.hass,\n                this.notification\n              )}</paper-tooltip\n            >\n          </span>\n        </div>\n\n        <mwc-button slot=\"actions\" @click=\"${this._handleDismiss}\"\n          >${this.hass.localize(\n            \"ui.card.persistent_notification.dismiss\"\n          )}</mwc-button\n        >\n      </hui-notification-item-template>\n    `;\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      .time {\n        display: flex;\n        justify-content: flex-end;\n        margin-top: 6px;\n      }\n      ha-relative-time {\n        color: var(--secondary-text-color);\n      }\n      a {\n        color: var(--primary-color);\n      }\n    `;\n  }\n\n  private _handleDismiss(): void {\n    this.hass!.callService(\"persistent_notification\", \"dismiss\", {\n      notification_id: this.notification!.notification_id,\n    });\n  }\n\n  private _computeTitle(notification: HassNotification): string | undefined {\n    return notification.title || notification.notification_id;\n  }\n\n  private _computeTooltip(\n    hass: HomeAssistant,\n    notification: HassNotification\n  ): string | undefined {\n    if (!hass || !notification) {\n      return undefined;\n    }\n\n    const d = new Date(notification.created_at!);\n    return d.toLocaleDateString(hass.language, {\n      year: \"numeric\",\n      month: \"short\",\n      day: \"numeric\",\n      minute: \"numeric\",\n      hour: \"numeric\",\n    });\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-persistent-notification-item\": HuiPersistentNotificationItem;\n  }\n}\n","import { fireEvent } from \"../../../../common/dom/fire_event\";\nimport { Lovelace } from \"../../types\";\n\ndeclare global {\n  // for fire event\n  interface HASSDomEvents {\n    \"show-edit-card\": EditCardDialogParams;\n  }\n}\n\nlet registeredDialog = false;\nconst dialogShowEvent = \"show-edit-card\";\nconst dialogTag = \"hui-dialog-edit-card\";\n\nexport interface EditCardDialogParams {\n  lovelace: Lovelace;\n  path: [number] | [number, number];\n}\n\nconst registerEditCardDialog = (element: HTMLElement): Event =>\n  fireEvent(element, \"register-dialog\", {\n    dialogShowEvent,\n    dialogTag,\n    dialogImport: () =>\n      import(/* webpackChunkName: \"hui-dialog-edit-card\" */ \"./hui-dialog-edit-card\"),\n  });\n\nexport const showEditCardDialog = (\n  element: HTMLElement,\n  editCardDialogParams: EditCardDialogParams\n): void => {\n  if (!registeredDialog) {\n    registeredDialog = true;\n    registerEditCardDialog(element);\n  }\n  fireEvent(element, dialogShowEvent, editCardDialogParams);\n};\n","import {\n  LovelaceConfig,\n  LovelaceCardConfig,\n  LovelaceViewConfig,\n} from \"../../../data/lovelace\";\n\nexport const addCard = (\n  config: LovelaceConfig,\n  path: [number],\n  cardConfig: LovelaceCardConfig\n): LovelaceConfig => {\n  const [viewIndex] = path;\n  const views: LovelaceViewConfig[] = [];\n\n  config.views.forEach((viewConf, index) => {\n    if (index !== viewIndex) {\n      views.push(config.views[index]);\n      return;\n    }\n\n    const cards = viewConf.cards\n      ? [...viewConf.cards, cardConfig]\n      : [cardConfig];\n\n    views.push({\n      ...viewConf,\n      cards,\n    });\n  });\n\n  return {\n    ...config,\n    views,\n  };\n};\n\nexport const replaceCard = (\n  config: LovelaceConfig,\n  path: [number, number],\n  cardConfig: LovelaceCardConfig\n): LovelaceConfig => {\n  const [viewIndex, cardIndex] = path;\n  const views: LovelaceViewConfig[] = [];\n\n  config.views.forEach((viewConf, index) => {\n    if (index !== viewIndex) {\n      views.push(config.views[index]);\n      return;\n    }\n\n    views.push({\n      ...viewConf,\n      cards: (viewConf.cards || []).map((origConf, ind) =>\n        ind === cardIndex ? cardConfig : origConf\n      ),\n    });\n  });\n\n  return {\n    ...config,\n    views,\n  };\n};\n\nexport const deleteCard = (\n  config: LovelaceConfig,\n  path: [number, number]\n): LovelaceConfig => {\n  const [viewIndex, cardIndex] = path;\n  const views: LovelaceViewConfig[] = [];\n\n  config.views.forEach((viewConf, index) => {\n    if (index !== viewIndex) {\n      views.push(config.views[index]);\n      return;\n    }\n\n    views.push({\n      ...viewConf,\n      cards: (viewConf.cards || []).filter(\n        (_origConf, ind) => ind !== cardIndex\n      ),\n    });\n  });\n\n  return {\n    ...config,\n    views,\n  };\n};\n\nexport const swapCard = (\n  config: LovelaceConfig,\n  path1: [number, number],\n  path2: [number, number]\n): LovelaceConfig => {\n  const card1 = config.views[path1[0]].cards![path1[1]];\n  const card2 = config.views[path2[0]].cards![path2[1]];\n\n  const origView1 = config.views[path1[0]];\n  const newView1 = {\n    ...origView1,\n    cards: origView1.cards!.map((origCard, index) =>\n      index === path1[1] ? card2 : origCard\n    ),\n  };\n\n  const origView2 = path1[0] === path2[0] ? newView1 : config.views[path2[0]];\n  const newView2 = {\n    ...origView2,\n    cards: origView2.cards!.map((origCard, index) =>\n      index === path2[1] ? card1 : origCard\n    ),\n  };\n\n  return {\n    ...config,\n    views: config.views.map((origView, index) =>\n      index === path2[0] ? newView2 : index === path1[0] ? newView1 : origView\n    ),\n  };\n};\n\nexport const moveCard = (\n  config: LovelaceConfig,\n  fromPath: [number, number],\n  toPath: [number]\n): LovelaceConfig => {\n  if (fromPath[0] === toPath[0]) {\n    throw new Error(\"You can not move a card to the view it is in.\");\n  }\n  const fromView = config.views[fromPath[0]];\n  const card = fromView.cards![fromPath[1]];\n\n  const newView1 = {\n    ...fromView,\n    cards: (fromView.cards || []).filter(\n      (_origConf, ind) => ind !== fromPath[1]\n    ),\n  };\n\n  const toView = config.views[toPath[0]];\n  const cards = toView.cards ? [...toView.cards, card] : [card];\n\n  const newView2 = {\n    ...toView,\n    cards,\n  };\n\n  return {\n    ...config,\n    views: config.views.map((origView, index) =>\n      index === toPath[0]\n        ? newView2\n        : index === fromPath[0]\n        ? newView1\n        : origView\n    ),\n  };\n};\n\nexport const addView = (\n  config: LovelaceConfig,\n  viewConfig: LovelaceViewConfig\n): LovelaceConfig => ({\n  ...config,\n  views: config.views.concat(viewConfig),\n});\n\nexport const replaceView = (\n  config: LovelaceConfig,\n  viewIndex: number,\n  viewConfig: LovelaceViewConfig\n): LovelaceConfig => ({\n  ...config,\n  views: config.views.map((origView, index) =>\n    index === viewIndex ? viewConfig : origView\n  ),\n});\n\nexport const swapView = (\n  config: LovelaceConfig,\n  path1: number,\n  path2: number\n): LovelaceConfig => {\n  const view1 = config.views[path1];\n  const view2 = config.views[path2];\n\n  return {\n    ...config,\n    views: config.views.map((origView, index) =>\n      index === path2 ? view1 : index === path1 ? view2 : origView\n    ),\n  };\n};\n\nexport const deleteView = (\n  config: LovelaceConfig,\n  viewIndex: number\n): LovelaceConfig => ({\n  ...config,\n  views: config.views.filter((_origView, index) => index !== viewIndex),\n});\n","import { fireEvent } from \"../../../../common/dom/fire_event\";\nimport { Lovelace } from \"../../types\";\n\ndeclare global {\n  // for fire event\n  interface HASSDomEvents {\n    \"show-edit-lovelace\": Lovelace;\n  }\n}\n\nlet registeredDialog = false;\nconst dialogShowEvent = \"show-edit-lovelace\";\nconst dialogTag = \"hui-dialog-edit-lovelace\";\n\nconst registerEditLovelaceDialog = (element: HTMLElement): Event =>\n  fireEvent(element, \"register-dialog\", {\n    dialogShowEvent,\n    dialogTag,\n    dialogImport: () =>\n      import(/* webpackChunkName: \"hui-dialog-edit-lovelace\" */ \"./hui-dialog-edit-lovelace\"),\n  });\n\nexport const showEditLovelaceDialog = (\n  element: HTMLElement,\n  lovelace: Lovelace\n): void => {\n  if (!registeredDialog) {\n    registeredDialog = true;\n    registerEditLovelaceDialog(element);\n  }\n  fireEvent(element, dialogShowEvent, lovelace);\n};\n","import { fireEvent } from \"../../../common/dom/fire_event\";\nimport { Lovelace } from \"../types\";\n\ndeclare global {\n  // for fire event\n  interface HASSDomEvents {\n    \"show-save-config\": SaveDialogParams;\n  }\n}\n\nconst dialogShowEvent = \"show-save-config\";\nconst dialogTag = \"hui-dialog-save-config\";\n\nexport interface SaveDialogParams {\n  lovelace: Lovelace;\n}\n\nlet registeredDialog = false;\n\nexport const showSaveDialog = (\n  element: HTMLElement,\n  saveDialogParams: SaveDialogParams\n) => {\n  if (!registeredDialog) {\n    registeredDialog = true;\n    fireEvent(element, \"register-dialog\", {\n      dialogShowEvent,\n      dialogTag,\n      dialogImport: () =>\n        import(/* webpackChunkName: \"hui-dialog-save-config\" */ \"./hui-dialog-save-config\"),\n    });\n  }\n  fireEvent(element, dialogShowEvent, saveDialogParams);\n};\n","import { HASSDomEvent, fireEvent } from \"../../../../common/dom/fire_event\";\nimport { Lovelace } from \"../../types\";\n\ndeclare global {\n  // for fire event\n  interface HASSDomEvents {\n    \"reload-lovelace\": undefined;\n    \"show-edit-view\": EditViewDialogParams;\n  }\n  // for add event listener\n  interface HTMLElementEventMap {\n    \"reload-lovelace\": HASSDomEvent<undefined>;\n  }\n}\n\nlet registeredDialog = false;\nconst dialogShowEvent = \"show-edit-view\";\nconst dialogTag = \"hui-dialog-edit-view\";\n\nexport interface EditViewDialogParams {\n  lovelace: Lovelace;\n  viewIndex?: number;\n}\n\nconst registerEditViewDialog = (element: HTMLElement): Event =>\n  fireEvent(element, \"register-dialog\", {\n    dialogShowEvent,\n    dialogTag,\n    dialogImport: () =>\n      import(/* webpackChunkName: \"hui-dialog-edit-view\" */ \"./hui-dialog-edit-view\"),\n  });\n\nexport const showEditViewDialog = (\n  element: HTMLElement,\n  editViewDialogParams: EditViewDialogParams\n): void => {\n  if (!registeredDialog) {\n    registeredDialog = true;\n    registerEditViewDialog(element);\n  }\n  fireEvent(element, dialogShowEvent, editViewDialogParams);\n};\n","import {\n  checkConditionsMet,\n  validateConditionalConfig,\n} from \"../../lovelace/common/validate-condition\";\nimport { createStyledHuiElement } from \"../cards/picture-elements/create-styled-hui-element\";\nimport {\n  LovelaceElement,\n  LovelaceElementConfig,\n  ConditionalElementConfig,\n} from \"./types\";\nimport { HomeAssistant } from \"../../../types\";\n\nclass HuiConditionalElement extends HTMLElement implements LovelaceElement {\n  public _hass?: HomeAssistant;\n  private _config?: ConditionalElementConfig;\n  private _elements: LovelaceElement[] = [];\n\n  public setConfig(config: ConditionalElementConfig): void {\n    if (\n      !config.conditions ||\n      !Array.isArray(config.conditions) ||\n      !config.elements ||\n      !Array.isArray(config.elements) ||\n      !validateConditionalConfig(config.conditions)\n    ) {\n      throw new Error(\"Error in card configuration.\");\n    }\n\n    if (this._elements.length > 0) {\n      this._elements.map((el: LovelaceElement) => {\n        if (el.parentElement) {\n          el.parentElement.removeChild(el);\n        }\n      });\n\n      this._elements = [];\n    }\n\n    this._config = config;\n\n    this._config.elements.map((elementConfig: LovelaceElementConfig) => {\n      this._elements.push(createStyledHuiElement(elementConfig));\n    });\n\n    this.updateElements();\n  }\n\n  set hass(hass: HomeAssistant) {\n    this._hass = hass;\n\n    this.updateElements();\n  }\n\n  private updateElements() {\n    if (!this._hass || !this._config) {\n      return;\n    }\n\n    const visible = checkConditionsMet(this._config.conditions, this._hass);\n\n    this._elements.map((el: LovelaceElement) => {\n      if (visible) {\n        el.hass = this._hass;\n        if (!el.parentElement) {\n          this.appendChild(el);\n        }\n      } else if (el.parentElement) {\n        el.parentElement.removeChild(el);\n      }\n    });\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-conditional-element\": HuiConditionalElement;\n  }\n}\n\ncustomElements.define(\"hui-conditional-element\", HuiConditionalElement);\n","import {\n  html,\n  LitElement,\n  TemplateResult,\n  property,\n  css,\n  CSSResult,\n  customElement,\n} from \"lit-element\";\n\nimport \"../../../components/ha-icon\";\n\nimport { computeTooltip } from \"../common/compute-tooltip\";\nimport { handleClick } from \"../common/handle-click\";\nimport { longPress } from \"../common/directives/long-press-directive\";\nimport { LovelaceElement, IconElementConfig } from \"./types\";\nimport { HomeAssistant } from \"../../../types\";\n\n@customElement(\"hui-icon-element\")\nexport class HuiIconElement extends LitElement implements LovelaceElement {\n  public hass?: HomeAssistant;\n  @property() private _config?: IconElementConfig;\n\n  public setConfig(config: IconElementConfig): void {\n    if (!config.icon) {\n      throw Error(\"Invalid Configuration: 'icon' required\");\n    }\n\n    this._config = config;\n  }\n\n  protected render(): TemplateResult | void {\n    if (!this._config || !this.hass) {\n      return html``;\n    }\n\n    return html`\n      <ha-icon\n        .icon=\"${this._config.icon}\"\n        .title=\"${computeTooltip(this.hass, this._config)}\"\n        @ha-click=\"${this._handleTap}\"\n        @ha-hold=\"${this._handleHold}\"\n        .longPress=\"${longPress()}\"\n      ></ha-icon>\n    `;\n  }\n\n  private _handleTap(): void {\n    handleClick(this, this.hass!, this._config!, false);\n  }\n\n  private _handleHold(): void {\n    handleClick(this, this.hass!, this._config!, true);\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      :host {\n        cursor: pointer;\n      }\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-icon-element\": HuiIconElement;\n  }\n}\n","import {\n  html,\n  LitElement,\n  TemplateResult,\n  property,\n  customElement,\n  css,\n  CSSResult,\n} from \"lit-element\";\n\nimport \"../components/hui-image\";\n\nimport { computeTooltip } from \"../common/compute-tooltip\";\nimport { handleClick } from \"../common/handle-click\";\nimport { longPress } from \"../common/directives/long-press-directive\";\nimport { LovelaceElement, ImageElementConfig } from \"./types\";\nimport { HomeAssistant } from \"../../../types\";\n\n@customElement(\"hui-image-element\")\nexport class HuiImageElement extends LitElement implements LovelaceElement {\n  @property() public hass?: HomeAssistant;\n  @property() private _config?: ImageElementConfig;\n\n  public setConfig(config: ImageElementConfig): void {\n    if (!config) {\n      throw Error(\"Error in element configuration\");\n    }\n\n    this.classList.toggle(\n      \"clickable\",\n      config.tap_action && config.tap_action.action !== \"none\"\n    );\n    this._config = config;\n  }\n\n  protected render(): TemplateResult | void {\n    if (!this._config || !this.hass) {\n      return html``;\n    }\n\n    return html`\n      <hui-image\n        .hass=\"${this.hass}\"\n        .entity=\"${this._config.entity}\"\n        .image=\"${this._config.image}\"\n        .stateImage=\"${this._config.state_image}\"\n        .cameraImage=\"${this._config.camera_image}\"\n        .filter=\"${this._config.filter}\"\n        .stateFilter=\"${this._config.state_filter}\"\n        .title=\"${computeTooltip(this.hass, this._config)}\"\n        .aspectRatio=\"${this._config.aspect_ratio}\"\n        @ha-click=\"${this._handleTap}\"\n        @ha-hold=\"${this._handleHold}\"\n        .longPress=\"${longPress()}\"\n      ></hui-image>\n    `;\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      :host(.clickable) {\n        cursor: pointer;\n        overflow: hidden;\n        -webkit-touch-callout: none !important;\n      }\n      hui-image {\n        -webkit-user-select: none !important;\n      }\n    `;\n  }\n\n  private _handleTap(): void {\n    handleClick(this, this.hass!, this._config!, false);\n  }\n\n  private _handleHold(): void {\n    handleClick(this, this.hass!, this._config!, true);\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-image-element\": HuiImageElement;\n  }\n}\n","import {\n  html,\n  LitElement,\n  TemplateResult,\n  property,\n  customElement,\n  CSSResult,\n  css,\n} from \"lit-element\";\n\nimport \"../../../components/buttons/ha-call-service-button\";\n\nimport { LovelaceElement, ServiceButtonElementConfig } from \"./types\";\nimport { HomeAssistant } from \"../../../types\";\n\n@customElement(\"hui-service-button-element\")\nexport class HuiServiceButtonElement extends LitElement\n  implements LovelaceElement {\n  public hass?: HomeAssistant;\n  @property() private _config?: ServiceButtonElementConfig;\n  private _domain?: string;\n  private _service?: string;\n\n  static get properties() {\n    return { _config: {} };\n  }\n\n  public setConfig(config: ServiceButtonElementConfig): void {\n    if (!config || !config.service) {\n      throw Error(\"Invalid Configuration: 'service' required\");\n    }\n\n    [this._domain, this._service] = config.service.split(\".\", 2);\n\n    if (!this._domain) {\n      throw Error(\"Invalid Configuration: 'service' does not have a domain\");\n    }\n\n    if (!this._service) {\n      throw Error(\n        \"Invalid Configuration: 'service' does not have a service name\"\n      );\n    }\n\n    this._config = config;\n  }\n\n  protected render(): TemplateResult | void {\n    if (!this._config || !this.hass) {\n      return html``;\n    }\n\n    return html`\n      <ha-call-service-button\n        .hass=\"${this.hass}\"\n        .domain=\"${this._domain}\"\n        .service=\"${this._service}\"\n        .serviceData=\"${this._config.service_data}\"\n        >${this._config.title}</ha-call-service-button\n      >\n    `;\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      ha-call-service-button {\n        color: var(--primary-color);\n        white-space: nowrap;\n      }\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-service-button-element\": HuiServiceButtonElement;\n  }\n}\n","import {\n  html,\n  LitElement,\n  TemplateResult,\n  customElement,\n  property,\n  PropertyValues,\n} from \"lit-element\";\n\nimport \"../../../components/entity/ha-state-label-badge\";\nimport \"../components/hui-warning-element\";\n\nimport computeStateName from \"../../../common/entity/compute_state_name\";\nimport { LovelaceElement, StateBadgeElementConfig } from \"./types\";\nimport { HomeAssistant } from \"../../../types\";\nimport { hasConfigOrEntityChanged } from \"../common/has-changed\";\n\n@customElement(\"hui-state-badge-element\")\nexport class HuiStateBadgeElement extends LitElement\n  implements LovelaceElement {\n  @property() public hass?: HomeAssistant;\n  @property() private _config?: StateBadgeElementConfig;\n\n  public setConfig(config: StateBadgeElementConfig): void {\n    if (!config.entity) {\n      throw Error(\"Invalid Configuration: 'entity' required\");\n    }\n\n    this._config = config;\n  }\n\n  protected shouldUpdate(changedProps: PropertyValues): boolean {\n    return hasConfigOrEntityChanged(this, changedProps);\n  }\n\n  protected render(): TemplateResult | void {\n    if (!this._config || !this.hass) {\n      return html``;\n    }\n\n    const stateObj = this.hass.states[this._config.entity!];\n\n    if (!stateObj) {\n      return html`\n        <hui-warning-element\n          label=\"${this.hass.localize(\n            \"ui.panel.lovelace.warning.entity_not_found\",\n            \"entity\",\n            this._config.entity\n          )}\"\n        ></hui-warning-element>\n      `;\n    }\n\n    return html`\n      <ha-state-label-badge\n        .hass=\"${this.hass}\"\n        .state=\"${stateObj}\"\n        .title=\"${this._config.title === undefined\n          ? computeStateName(stateObj)\n          : this._config.title === null\n          ? \"\"\n          : this._config.title}\"\n      ></ha-state-label-badge>\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-state-badge-element\": HuiStateBadgeElement;\n  }\n}\n","import {\n  html,\n  LitElement,\n  TemplateResult,\n  customElement,\n  property,\n  css,\n  CSSResult,\n  PropertyValues,\n} from \"lit-element\";\n\nimport \"../../../components/entity/state-badge\";\nimport \"../components/hui-warning-element\";\n\nimport { computeTooltip } from \"../common/compute-tooltip\";\nimport { handleClick } from \"../common/handle-click\";\nimport { longPress } from \"../common/directives/long-press-directive\";\nimport { LovelaceElement, StateIconElementConfig } from \"./types\";\nimport { HomeAssistant } from \"../../../types\";\nimport { hasConfigOrEntityChanged } from \"../common/has-changed\";\n\n@customElement(\"hui-state-icon-element\")\nexport class HuiStateIconElement extends LitElement implements LovelaceElement {\n  @property() public hass?: HomeAssistant;\n  @property() private _config?: StateIconElementConfig;\n\n  public setConfig(config: StateIconElementConfig): void {\n    if (!config.entity) {\n      throw Error(\"Invalid Configuration: 'entity' required\");\n    }\n\n    this._config = config;\n  }\n\n  protected shouldUpdate(changedProps: PropertyValues): boolean {\n    return hasConfigOrEntityChanged(this, changedProps);\n  }\n\n  protected render(): TemplateResult | void {\n    if (!this._config || !this.hass) {\n      return html``;\n    }\n\n    const stateObj = this.hass.states[this._config.entity!];\n\n    if (!stateObj) {\n      return html`\n        <hui-warning-element\n          label=${this.hass.localize(\n            \"ui.panel.lovelace.warning.entity_not_found\",\n            \"entity\",\n            this._config.entity\n          )}\n        ></hui-warning-element>\n      `;\n    }\n\n    return html`\n      <state-badge\n        .stateObj=\"${stateObj}\"\n        .title=\"${computeTooltip(this.hass, this._config)}\"\n        @ha-click=\"${this._handleClick}\"\n        @ha-hold=\"${this._handleHold}\"\n        .longPress=\"${longPress()}\"\n        .overrideIcon=${this._config.icon}\n      ></state-badge>\n    `;\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      :host {\n        cursor: pointer;\n      }\n    `;\n  }\n\n  private _handleClick(): void {\n    handleClick(this, this.hass!, this._config!, false);\n  }\n\n  private _handleHold(): void {\n    handleClick(this, this.hass!, this._config!, true);\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-state-icon-element\": HuiStateIconElement;\n  }\n}\n","import {\n  html,\n  LitElement,\n  TemplateResult,\n  customElement,\n  property,\n  css,\n  CSSResult,\n  PropertyValues,\n} from \"lit-element\";\n\nimport \"../../../components/entity/ha-state-label-badge\";\nimport \"../components/hui-warning-element\";\n\nimport computeStateDisplay from \"../../../common/entity/compute_state_display\";\nimport { computeTooltip } from \"../common/compute-tooltip\";\nimport { handleClick } from \"../common/handle-click\";\nimport { longPress } from \"../common/directives/long-press-directive\";\nimport { LovelaceElement, StateLabelElementConfig } from \"./types\";\nimport { HomeAssistant } from \"../../../types\";\nimport { hasConfigOrEntityChanged } from \"../common/has-changed\";\n\n@customElement(\"hui-state-label-element\")\nclass HuiStateLabelElement extends LitElement implements LovelaceElement {\n  @property() public hass?: HomeAssistant;\n  @property() private _config?: StateLabelElementConfig;\n\n  public setConfig(config: StateLabelElementConfig): void {\n    if (!config.entity) {\n      throw Error(\"Invalid Configuration: 'entity' required\");\n    }\n\n    this._config = config;\n  }\n\n  protected shouldUpdate(changedProps: PropertyValues): boolean {\n    return hasConfigOrEntityChanged(this, changedProps);\n  }\n\n  protected render(): TemplateResult | void {\n    if (!this._config || !this.hass) {\n      return html``;\n    }\n\n    const stateObj = this.hass.states[this._config.entity!];\n\n    if (!stateObj) {\n      return html`\n        <hui-warning-element\n          label=${this.hass.localize(\n            \"ui.panel.lovelace.warning.entity_not_found\",\n            \"entity\",\n            this._config.entity\n          )}\n        ></hui-warning-element>\n      `;\n    }\n\n    return html`\n      <div\n        .title=\"${computeTooltip(this.hass, this._config)}\"\n        @ha-click=\"${this._handleTap}\"\n        @ha-hold=\"${this._handleHold}\"\n        .longPress=\"${longPress()}\"\n      >\n        ${this._config.prefix}${stateObj\n          ? computeStateDisplay(\n              this.hass.localize,\n              stateObj,\n              this.hass.language\n            )\n          : \"-\"}${this._config.suffix}\n      </div>\n    `;\n  }\n\n  private _handleTap(): void {\n    handleClick(this, this.hass!, this._config!, false);\n  }\n\n  private _handleHold(): void {\n    handleClick(this, this.hass!, this._config!, true);\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      :host {\n        cursor: pointer;\n      }\n      div {\n        padding: 8px;\n        white-space: nowrap;\n      }\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-state-label-element\": HuiStateLabelElement;\n  }\n}\n","import {\n  html,\n  LitElement,\n  TemplateResult,\n  property,\n  css,\n  CSSResult,\n  customElement,\n  PropertyValues,\n} from \"lit-element\";\n\nimport \"../../../components/ha-climate-state\";\nimport \"../components/hui-generic-entity-row\";\nimport \"../components/hui-warning\";\n\nimport { HomeAssistant } from \"../../../types\";\nimport { EntityRow, EntityConfig } from \"./types\";\nimport { hasConfigOrEntityChanged } from \"../common/has-changed\";\n\n@customElement(\"hui-climate-entity-row\")\nclass HuiClimateEntityRow extends LitElement implements EntityRow {\n  @property() public hass?: HomeAssistant;\n\n  @property() private _config?: EntityConfig;\n\n  public setConfig(config: EntityConfig): void {\n    if (!config || !config.entity) {\n      throw new Error(\"Invalid Configuration: 'entity' required\");\n    }\n\n    this._config = config;\n  }\n\n  protected shouldUpdate(changedProps: PropertyValues): boolean {\n    return hasConfigOrEntityChanged(this, changedProps);\n  }\n\n  protected render(): TemplateResult | void {\n    if (!this.hass || !this._config) {\n      return html``;\n    }\n\n    const stateObj = this.hass.states[this._config.entity];\n\n    if (!stateObj) {\n      return html`\n        <hui-warning\n          >${this.hass.localize(\n            \"ui.panel.lovelace.warning.entity_not_found\",\n            \"entity\",\n            this._config.entity\n          )}</hui-warning\n        >\n      `;\n    }\n\n    return html`\n      <hui-generic-entity-row .hass=\"${this.hass}\" .config=\"${this._config}\">\n        <ha-climate-state\n          .hass=\"${this.hass}\"\n          .stateObj=\"${stateObj}\"\n        ></ha-climate-state>\n      </hui-generic-entity-row>\n    `;\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      ha-climate-state {\n        text-align: right;\n      }\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-climate-entity-row\": HuiClimateEntityRow;\n  }\n}\n","import {\n  html,\n  LitElement,\n  TemplateResult,\n  property,\n  css,\n  CSSResult,\n  customElement,\n  PropertyValues,\n} from \"lit-element\";\n\nimport \"../components/hui-generic-entity-row\";\nimport \"../../../components/ha-cover-controls\";\nimport \"../../../components/ha-cover-tilt-controls\";\nimport \"../components/hui-warning\";\n\nimport { isTiltOnly } from \"../../../util/cover-model\";\nimport { HomeAssistant } from \"../../../types\";\nimport { EntityRow, EntityConfig } from \"./types\";\nimport { hasConfigOrEntityChanged } from \"../common/has-changed\";\n\n@customElement(\"hui-cover-entity-row\")\nclass HuiCoverEntityRow extends LitElement implements EntityRow {\n  @property() public hass?: HomeAssistant;\n\n  @property() private _config?: EntityConfig;\n\n  public setConfig(config: EntityConfig): void {\n    if (!config) {\n      throw new Error(\"Configuration error\");\n    }\n    this._config = config;\n  }\n\n  protected shouldUpdate(changedProps: PropertyValues): boolean {\n    return hasConfigOrEntityChanged(this, changedProps);\n  }\n\n  protected render(): TemplateResult | void {\n    if (!this._config || !this.hass) {\n      return html``;\n    }\n\n    const stateObj = this.hass.states[this._config.entity];\n\n    if (!stateObj) {\n      return html`\n        <hui-warning\n          >${this.hass.localize(\n            \"ui.panel.lovelace.warning.entity_not_found\",\n            \"entity\",\n            this._config.entity\n          )}</hui-warning\n        >\n      `;\n    }\n\n    return html`\n      <hui-generic-entity-row .hass=\"${this.hass}\" .config=\"${this._config}\">\n        ${isTiltOnly(stateObj)\n          ? html`\n              <ha-cover-tilt-controls\n                .hass=\"${this.hass}\"\n                .stateObj=\"${stateObj}\"\n              ></ha-cover-tilt-controls>\n            `\n          : html`\n              <ha-cover-controls\n                .hass=\"${this.hass}\"\n                .stateObj=\"${stateObj}\"\n              ></ha-cover-controls>\n            `}\n      </hui-generic-entity-row>\n    `;\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      ha-cover-controls,\n      ha-cover-tilt-controls {\n        margin-right: -0.57em;\n      }\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-cover-entity-row\": HuiCoverEntityRow;\n  }\n}\n","import {\n  html,\n  LitElement,\n  TemplateResult,\n  property,\n  customElement,\n  PropertyValues,\n} from \"lit-element\";\n\nimport \"../components/hui-generic-entity-row\";\nimport \"../../../components/entity/ha-entity-toggle\";\nimport \"../components/hui-warning\";\n\nimport computeStateDisplay from \"../../../common/entity/compute_state_display\";\n\nimport { DOMAINS_TOGGLE } from \"../../../common/const\";\nimport { HomeAssistant } from \"../../../types\";\nimport { EntityRow, EntityConfig } from \"./types\";\nimport { hasConfigOrEntityChanged } from \"../common/has-changed\";\n\n@customElement(\"hui-group-entity-row\")\nclass HuiGroupEntityRow extends LitElement implements EntityRow {\n  @property() public hass?: HomeAssistant;\n\n  @property() private _config?: EntityConfig;\n\n  public setConfig(config: EntityConfig): void {\n    if (!config) {\n      throw new Error(\"Configuration error\");\n    }\n    this._config = config;\n  }\n\n  protected shouldUpdate(changedProps: PropertyValues): boolean {\n    return hasConfigOrEntityChanged(this, changedProps);\n  }\n\n  protected render(): TemplateResult | void {\n    if (!this._config || !this.hass) {\n      return html``;\n    }\n\n    const stateObj = this.hass.states[this._config.entity];\n\n    if (!stateObj) {\n      return html`\n        <hui-warning\n          >${this.hass.localize(\n            \"ui.panel.lovelace.warning.entity_not_found\",\n            \"entity\",\n            this._config.entity\n          )}</hui-warning\n        >\n      `;\n    }\n\n    return html`\n      <hui-generic-entity-row .hass=\"${this.hass}\" .config=\"${this._config}\">\n        ${this._computeCanToggle(stateObj.attributes.entity_id)\n          ? html`\n              <ha-entity-toggle\n                .hass=\"${this.hass}\"\n                .stateObj=\"${stateObj}\"\n              ></ha-entity-toggle>\n            `\n          : html`\n              <div>\n                ${computeStateDisplay(\n                  this.hass!.localize,\n                  stateObj,\n                  this.hass.language\n                )}\n              </div>\n            `}\n      </hui-generic-entity-row>\n    `;\n  }\n\n  private _computeCanToggle(entityIds): boolean {\n    return entityIds.some((entityId) =>\n      DOMAINS_TOGGLE.has(entityId.split(\".\", 1)[0])\n    );\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-group-entity-row\": HuiGroupEntityRow;\n  }\n}\n","import {\n  html,\n  LitElement,\n  TemplateResult,\n  property,\n  PropertyValues,\n  customElement,\n} from \"lit-element\";\n\nimport \"../components/hui-generic-entity-row\";\nimport \"../../../components/paper-time-input.js\";\n// tslint:disable-next-line:no-duplicate-imports\nimport { PaperTimeInput } from \"../../../components/paper-time-input.js\";\nimport \"../../../components/ha-date-input\";\n// tslint:disable-next-line:no-duplicate-imports\nimport { HaDateInput } from \"../../../components/ha-date-input\";\n\nimport { HomeAssistant } from \"../../../types\";\nimport { EntityRow, EntityConfig } from \"./types\";\nimport { setInputDateTimeValue } from \"../../../data/input_datetime\";\nimport { hasConfigOrEntityChanged } from \"../common/has-changed\";\n\n@customElement(\"hui-input-datetime-entity-row\")\nclass HuiInputDatetimeEntityRow extends LitElement implements EntityRow {\n  @property() public hass?: HomeAssistant;\n  @property() private _config?: EntityConfig;\n\n  public setConfig(config: EntityConfig): void {\n    if (!config) {\n      throw new Error(\"Configuration error\");\n    }\n    this._config = config;\n  }\n\n  protected shouldUpdate(changedProps: PropertyValues): boolean {\n    return hasConfigOrEntityChanged(this, changedProps);\n  }\n\n  protected render(): TemplateResult | void {\n    if (!this._config || !this.hass) {\n      return html``;\n    }\n\n    const stateObj = this.hass.states[this._config.entity];\n\n    if (!stateObj) {\n      return html`\n        <hui-warning\n          >${this.hass.localize(\n            \"ui.panel.lovelace.warning.entity_not_found\",\n            \"entity\",\n            this._config.entity\n          )}</hui-warning\n        >\n      `;\n    }\n\n    return html`\n      <hui-generic-entity-row .hass=\"${this.hass}\" .config=\"${this._config}\">\n        ${stateObj.attributes.has_date\n          ? html`\n              <ha-date-input\n                .year=${stateObj.attributes.year}\n                .month=${(\"0\" + stateObj.attributes.month).slice(-2)}\n                .day=${(\"0\" + stateObj.attributes.day).slice(-2)}\n                @change=${this._selectedValueChanged}\n                @click=${this._stopEventPropagation}\n              ></ha-date-input>\n              ${stateObj.attributes.has_time ? \",\" : \"\"}\n            `\n          : ``}\n        ${stateObj.attributes.has_time\n          ? html`\n              <paper-time-input\n                .hour=${stateObj.state === \"unknown\"\n                  ? \"\"\n                  : (\"0\" + stateObj.attributes.hour).slice(-2)}\n                .min=${stateObj.state === \"unknown\"\n                  ? \"\"\n                  : (\"0\" + stateObj.attributes.minute).slice(-2)}\n                .amPm=${false}\n                @change=${this._selectedValueChanged}\n                @click=${this._stopEventPropagation}\n                hide-label\n                format=\"24\"\n              ></paper-time-input>\n            `\n          : ``}\n      </hui-generic-entity-row>\n    `;\n  }\n\n  private _stopEventPropagation(ev: Event): void {\n    ev.stopPropagation();\n  }\n\n  private get _timeInputEl(): PaperTimeInput {\n    return this.shadowRoot!.querySelector(\"paper-time-input\")!;\n  }\n\n  private get _dateInputEl(): HaDateInput {\n    return this.shadowRoot!.querySelector(\"ha-date-input\")!;\n  }\n\n  private _selectedValueChanged(ev): void {\n    const stateObj = this.hass!.states[this._config!.entity];\n\n    const time =\n      this._timeInputEl !== null\n        ? this._timeInputEl.value.trim() + \":00\"\n        : undefined;\n\n    const date =\n      this._dateInputEl !== null ? this._dateInputEl.value : undefined;\n\n    if (time !== stateObj.state) {\n      setInputDateTimeValue(this.hass!, stateObj.entity_id, time, date);\n    }\n\n    ev.target.blur();\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-input-datetime-entity-row\": HuiInputDatetimeEntityRow;\n  }\n}\n","import {\n  html,\n  LitElement,\n  TemplateResult,\n  property,\n  customElement,\n  css,\n  CSSResult,\n  PropertyValues,\n} from \"lit-element\";\n\nimport \"../components/hui-generic-entity-row\";\nimport \"../../../components/ha-slider\";\nimport \"../components/hui-warning\";\n\nimport { computeRTLDirection } from \"../../../common/util/compute_rtl\";\nimport { EntityRow, EntityConfig } from \"./types\";\nimport { HomeAssistant } from \"../../../types\";\nimport { setValue } from \"../../../data/input_text\";\nimport { hasConfigOrEntityChanged } from \"../common/has-changed\";\n\n@customElement(\"hui-input-number-entity-row\")\nclass HuiInputNumberEntityRow extends LitElement implements EntityRow {\n  @property() public hass?: HomeAssistant;\n\n  @property() private _config?: EntityConfig;\n\n  private _loaded?: boolean;\n\n  private _updated?: boolean;\n\n  public setConfig(config: EntityConfig): void {\n    if (!config) {\n      throw new Error(\"Configuration error\");\n    }\n    this._config = config;\n  }\n\n  public connectedCallback(): void {\n    super.connectedCallback();\n    if (this._updated && !this._loaded) {\n      this._initialLoad();\n    }\n  }\n\n  protected firstUpdated(): void {\n    this._updated = true;\n    if (this.isConnected && !this._loaded) {\n      this._initialLoad();\n    }\n  }\n\n  protected shouldUpdate(changedProps: PropertyValues): boolean {\n    return hasConfigOrEntityChanged(this, changedProps);\n  }\n\n  protected render(): TemplateResult | void {\n    if (!this._config || !this.hass) {\n      return html``;\n    }\n\n    const stateObj = this.hass.states[this._config.entity];\n\n    if (!stateObj) {\n      return html`\n        <hui-warning\n          >${this.hass.localize(\n            \"ui.panel.lovelace.warning.entity_not_found\",\n            \"entity\",\n            this._config.entity\n          )}</hui-warning\n        >\n      `;\n    }\n\n    return html`\n      <hui-generic-entity-row .hass=\"${this.hass}\" .config=\"${this._config}\">\n        <div>\n          ${stateObj.attributes.mode === \"slider\"\n            ? html`\n                <div class=\"flex\">\n                  <ha-slider\n                    .dir=\"${computeRTLDirection(this.hass!)}\"\n                    .step=\"${Number(stateObj.attributes.step)}\"\n                    .min=\"${Number(stateObj.attributes.min)}\"\n                    .max=\"${Number(stateObj.attributes.max)}\"\n                    .value=\"${Number(stateObj.state)}\"\n                    pin\n                    @change=\"${this._selectedValueChanged}\"\n                    ignore-bar-touch\n                    id=\"input\"\n                  ></ha-slider>\n                  <span class=\"state\">\n                    ${Number(stateObj.state)}\n                    ${stateObj.attributes.unit_of_measurement}\n                  </span>\n                </div>\n              `\n            : html`\n                <paper-input\n                  no-label-float\n                  auto-validate\n                  .pattern=\"[0-9]+([\\\\.][0-9]+)?\"\n                  .step=\"${Number(stateObj.attributes.step)}\"\n                  .min=\"${Number(stateObj.attributes.min)}\"\n                  .max=\"${Number(stateObj.attributes.max)}\"\n                  .value=\"${Number(stateObj.state)}\"\n                  type=\"number\"\n                  @change=\"${this._selectedValueChanged}\"\n                  id=\"input\"\n                ></paper-input>\n              `}\n        </div>\n      </hui-generic-entity-row>\n    `;\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      .flex {\n        display: flex;\n        align-items: center;\n      }\n      .state {\n        min-width: 45px;\n        text-align: end;\n      }\n      paper-input {\n        text-align: end;\n      }\n    `;\n  }\n\n  private async _initialLoad(): Promise<void> {\n    this._loaded = true;\n    await this.updateComplete;\n    const element = this.shadowRoot!.querySelector(\".state\") as HTMLElement;\n\n    if (!element || !this.parentElement) {\n      return;\n    }\n\n    element.hidden = this.parentElement.clientWidth <= 350;\n  }\n\n  private get _inputElement(): { value: string } {\n    // linter recommended the following syntax\n    return (this.shadowRoot!.getElementById(\"input\") as unknown) as {\n      value: string;\n    };\n  }\n\n  private _selectedValueChanged(): void {\n    const element = this._inputElement;\n    const stateObj = this.hass!.states[this._config!.entity];\n\n    if (element.value !== stateObj.state) {\n      setValue(this.hass!, stateObj.entity_id, element.value!);\n    }\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-input-number-entity-row\": HuiInputNumberEntityRow;\n  }\n}\n","import {\n  html,\n  LitElement,\n  TemplateResult,\n  property,\n  css,\n  CSSResult,\n  customElement,\n  PropertyValues,\n} from \"lit-element\";\nimport \"@polymer/paper-item/paper-item\";\nimport \"@polymer/paper-listbox/paper-listbox\";\n\nimport \"../../../components/ha-paper-dropdown-menu\";\nimport \"../../../components/entity/state-badge\";\nimport \"../components/hui-warning\";\n\nimport computeStateName from \"../../../common/entity/compute_state_name\";\n\nimport { HomeAssistant, InputSelectEntity } from \"../../../types\";\nimport { EntityRow, EntityConfig } from \"./types\";\nimport { setInputSelectOption } from \"../../../data/input-select\";\nimport { hasConfigOrEntityChanged } from \"../common/has-changed\";\nimport { forwardHaptic } from \"../../../data/haptics\";\nimport { stopPropagation } from \"../../../common/dom/stop_propagation\";\n\n@customElement(\"hui-input-select-entity-row\")\nclass HuiInputSelectEntityRow extends LitElement implements EntityRow {\n  @property() public hass?: HomeAssistant;\n\n  @property() private _config?: EntityConfig;\n\n  public setConfig(config: EntityConfig): void {\n    if (!config || !config.entity) {\n      throw new Error(\"Invalid Configuration: 'entity' required\");\n    }\n\n    this._config = config;\n  }\n\n  protected shouldUpdate(changedProps: PropertyValues): boolean {\n    return hasConfigOrEntityChanged(this, changedProps);\n  }\n\n  protected render(): TemplateResult | void {\n    if (!this.hass || !this._config) {\n      return html``;\n    }\n\n    const stateObj = this.hass.states[this._config.entity] as\n      | InputSelectEntity\n      | undefined;\n\n    if (!stateObj) {\n      return html`\n        <hui-warning\n          >${this.hass.localize(\n            \"ui.panel.lovelace.warning.entity_not_found\",\n            \"entity\",\n            this._config.entity\n          )}</hui-warning\n        >\n      `;\n    }\n\n    return html`\n      <state-badge .stateObj=\"${stateObj}\"></state-badge>\n      <ha-paper-dropdown-menu\n        .label=${this._config.name || computeStateName(stateObj)}\n        .value=${stateObj.state}\n        @iron-select=${this._selectedChanged}\n        @click=${stopPropagation}\n      >\n        <paper-listbox slot=\"dropdown-content\">\n          ${stateObj.attributes.options.map(\n            (option) => html`\n              <paper-item>${option}</paper-item>\n            `\n          )}\n        </paper-listbox>\n      </ha-paper-dropdown-menu>\n    `;\n  }\n\n  protected updated(changedProps: PropertyValues) {\n    super.updated(changedProps);\n\n    if (!this.hass || !this._config) {\n      return;\n    }\n\n    const stateObj = this.hass.states[this._config.entity] as\n      | InputSelectEntity\n      | undefined;\n\n    if (!stateObj) {\n      return;\n    }\n\n    // Update selected after rendering the items or else it won't work in Firefox\n    this.shadowRoot!.querySelector(\n      \"paper-listbox\"\n    )!.selected = stateObj.attributes.options.indexOf(stateObj.state);\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      :host {\n        display: flex;\n        align-items: center;\n      }\n      ha-paper-dropdown-menu {\n        margin-left: 16px;\n        flex: 1;\n      }\n\n      paper-item {\n        cursor: pointer;\n        min-width: 200px;\n      }\n    `;\n  }\n\n  private _selectedChanged(ev): void {\n    const stateObj = this.hass!.states[this._config!.entity];\n    const option = ev.target.selectedItem.innerText.trim();\n    if (option === stateObj.state) {\n      return;\n    }\n\n    forwardHaptic(\"light\");\n\n    setInputSelectOption(this.hass!, stateObj.entity_id, option);\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-input-select-entity-row\": HuiInputSelectEntityRow;\n  }\n}\n","import {\n  html,\n  LitElement,\n  TemplateResult,\n  property,\n  customElement,\n  PropertyValues,\n} from \"lit-element\";\nimport { PaperInputElement } from \"@polymer/paper-input/paper-input\";\n\nimport \"../components/hui-generic-entity-row\";\nimport \"../components/hui-warning\";\n\nimport { HomeAssistant } from \"../../../types\";\nimport { EntityRow, EntityConfig } from \"./types\";\nimport { setValue } from \"../../../data/input_text\";\nimport { hasConfigOrEntityChanged } from \"../common/has-changed\";\n\n@customElement(\"hui-input-text-entity-row\")\nclass HuiInputTextEntityRow extends LitElement implements EntityRow {\n  @property() public hass?: HomeAssistant;\n\n  @property() private _config?: EntityConfig;\n\n  public setConfig(config: EntityConfig): void {\n    if (!config) {\n      throw new Error(\"Configuration error\");\n    }\n    this._config = config;\n  }\n\n  protected shouldUpdate(changedProps: PropertyValues): boolean {\n    return hasConfigOrEntityChanged(this, changedProps);\n  }\n\n  protected render(): TemplateResult | void {\n    if (!this._config || !this.hass) {\n      return html``;\n    }\n\n    const stateObj = this.hass.states[this._config.entity];\n\n    if (!stateObj) {\n      return html`\n        <hui-warning\n          >${this.hass.localize(\n            \"ui.panel.lovelace.warning.entity_not_found\",\n            \"entity\",\n            this._config.entity\n          )}</hui-warning\n        >\n      `;\n    }\n\n    return html`\n      <hui-generic-entity-row .hass=\"${this.hass}\" .config=\"${this._config}\">\n        <paper-input\n          no-label-float\n          .value=\"${stateObj.state}\"\n          .minlength=\"${stateObj.attributes.min}\"\n          .maxlength=\"${stateObj.attributes.max}\"\n          .autoValidate=\"${stateObj.attributes.pattern}\"\n          .pattern=\"${stateObj.attributes.pattern}\"\n          .type=\"${stateObj.attributes.mode}\"\n          @change=\"${this._selectedValueChanged}\"\n          placeholder=\"(empty value)\"\n        ></paper-input>\n      </hui-generic-entity-row>\n    `;\n  }\n\n  private get _inputEl(): PaperInputElement {\n    return this.shadowRoot!.querySelector(\"paper-input\") as PaperInputElement;\n  }\n\n  private _selectedValueChanged(ev): void {\n    const element = this._inputEl;\n    const stateObj = this.hass!.states[this._config!.entity];\n\n    if (element.value !== stateObj.state) {\n      setValue(this.hass!, stateObj.entity_id, element.value!);\n    }\n\n    ev.target.blur();\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-input-text-entity-row\": HuiInputTextEntityRow;\n  }\n}\n","import {\n  html,\n  LitElement,\n  TemplateResult,\n  property,\n  css,\n  CSSResult,\n  customElement,\n  PropertyValues,\n} from \"lit-element\";\n\nimport \"../components/hui-generic-entity-row\";\nimport \"../components/hui-warning\";\n\nimport { HomeAssistant } from \"../../../types\";\nimport { EntityRow, EntityConfig } from \"./types\";\nimport { hasConfigOrEntityChanged } from \"../common/has-changed\";\n\n@customElement(\"hui-lock-entity-row\")\nclass HuiLockEntityRow extends LitElement implements EntityRow {\n  @property() public hass?: HomeAssistant;\n\n  @property() private _config?: EntityConfig;\n\n  public setConfig(config: EntityConfig): void {\n    if (!config) {\n      throw new Error(\"Configuration error\");\n    }\n    this._config = config;\n  }\n\n  protected shouldUpdate(changedProps: PropertyValues): boolean {\n    return hasConfigOrEntityChanged(this, changedProps);\n  }\n\n  protected render(): TemplateResult | void {\n    if (!this._config || !this.hass) {\n      return html``;\n    }\n\n    const stateObj = this.hass.states[this._config.entity];\n\n    if (!stateObj) {\n      return html`\n        <hui-warning\n          >${this.hass.localize(\n            \"ui.panel.lovelace.warning.entity_not_found\",\n            \"entity\",\n            this._config.entity\n          )}</hui-warning\n        >\n      `;\n    }\n\n    return html`\n      <hui-generic-entity-row .hass=\"${this.hass}\" .config=\"${this._config}\">\n        <mwc-button @click=\"${this._callService}\">\n          ${stateObj.state === \"locked\"\n            ? this.hass!.localize(\"ui.card.lock.unlock\")\n            : this.hass!.localize(\"ui.card.lock.lock\")}\n        </mwc-button>\n      </hui-generic-entity-row>\n    `;\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      mwc-button {\n        margin-right: -0.57em;\n      }\n    `;\n  }\n\n  private _callService(ev): void {\n    ev.stopPropagation();\n    const stateObj = this.hass!.states[this._config!.entity];\n    this.hass!.callService(\n      \"lock\",\n      stateObj.state === \"locked\" ? \"unlock\" : \"lock\",\n      { entity_id: stateObj.entity_id }\n    );\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-lock-entity-row\": HuiLockEntityRow;\n  }\n}\n","import {\n  html,\n  LitElement,\n  TemplateResult,\n  css,\n  CSSResult,\n  property,\n  customElement,\n  PropertyValues,\n} from \"lit-element\";\nimport \"@polymer/paper-icon-button/paper-icon-button\";\n\nimport \"../components/hui-generic-entity-row\";\nimport \"../components/hui-warning\";\n\nimport { EntityRow, EntityConfig } from \"./types\";\nimport { HomeAssistant } from \"../../../types\";\nimport { HassEntity } from \"home-assistant-js-websocket\";\nimport { supportsFeature } from \"../../../common/entity/supports-feature\";\nimport {\n  SUPPORTS_PLAY,\n  SUPPORT_NEXT_TRACK,\n  OFF_STATES,\n  SUPPORT_PAUSE,\n} from \"../../../data/media-player\";\nimport { hasConfigOrEntityChanged } from \"../common/has-changed\";\n\n@customElement(\"hui-media-player-entity-row\")\nclass HuiMediaPlayerEntityRow extends LitElement implements EntityRow {\n  @property() public hass?: HomeAssistant;\n\n  @property() private _config?: EntityConfig;\n\n  public setConfig(config: EntityConfig): void {\n    if (!config || !config.entity) {\n      throw new Error(\"Invalid Configuration: 'entity' required\");\n    }\n\n    this._config = config;\n  }\n\n  protected shouldUpdate(changedProps: PropertyValues): boolean {\n    return hasConfigOrEntityChanged(this, changedProps);\n  }\n\n  protected render(): TemplateResult | void {\n    if (!this.hass || !this._config) {\n      return html``;\n    }\n\n    const stateObj = this.hass.states[this._config.entity];\n\n    if (!stateObj) {\n      return html`\n        <hui-warning\n          >${this.hass.localize(\n            \"ui.panel.lovelace.warning.entity_not_found\",\n            \"entity\",\n            this._config.entity\n          )}</hui-warning\n        >\n      `;\n    }\n\n    return html`\n      <hui-generic-entity-row\n        .hass=\"${this.hass}\"\n        .config=\"${this._config}\"\n        .showSecondary=\"false\"\n      >\n        ${OFF_STATES.includes(stateObj.state)\n          ? html`\n              <div>\n                ${this.hass!.localize(`state.media_player.${stateObj.state}`) ||\n                  this.hass!.localize(`state.default.${stateObj.state}`) ||\n                  stateObj.state}\n              </div>\n            `\n          : html`\n              <div class=\"controls\">\n                ${stateObj.state !== \"playing\" &&\n                !supportsFeature(stateObj, SUPPORTS_PLAY)\n                  ? \"\"\n                  : html`\n                      <paper-icon-button\n                        icon=\"${this._computeControlIcon(stateObj)}\"\n                        @click=\"${this._playPause}\"\n                      ></paper-icon-button>\n                    `}\n                ${supportsFeature(stateObj, SUPPORT_NEXT_TRACK)\n                  ? html`\n                      <paper-icon-button\n                        icon=\"hass:skip-next\"\n                        @click=\"${this._nextTrack}\"\n                      ></paper-icon-button>\n                    `\n                  : \"\"}\n              </div>\n              <div slot=\"secondary\">${this._computeMediaTitle(stateObj)}</div>\n            `}\n      </hui-generic-entity-row>\n    `;\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      .controls {\n        white-space: nowrap;\n      }\n    `;\n  }\n\n  private _computeControlIcon(stateObj: HassEntity): string {\n    if (stateObj.state !== \"playing\") {\n      return \"hass:play\";\n    }\n\n    // tslint:disable-next-line:no-bitwise\n    return supportsFeature(stateObj, SUPPORT_PAUSE)\n      ? \"hass:pause\"\n      : \"hass:stop\";\n  }\n\n  private _computeMediaTitle(stateObj: HassEntity): string {\n    let prefix;\n    let suffix;\n\n    switch (stateObj.attributes.media_content_type) {\n      case \"music\":\n        prefix = stateObj.attributes.media_artist;\n        suffix = stateObj.attributes.media_title;\n        break;\n      case \"tvshow\":\n        prefix = stateObj.attributes.media_series_title;\n        suffix = stateObj.attributes.media_title;\n        break;\n      default:\n        prefix =\n          stateObj.attributes.media_title ||\n          stateObj.attributes.app_name ||\n          stateObj.state;\n        suffix = \"\";\n    }\n\n    return prefix && suffix ? `${prefix}: ${suffix}` : prefix || suffix || \"\";\n  }\n\n  private _playPause(ev: MouseEvent): void {\n    ev.stopPropagation();\n    this.hass!.callService(\"media_player\", \"media_play_pause\", {\n      entity_id: this._config!.entity,\n    });\n  }\n\n  private _nextTrack(ev: MouseEvent): void {\n    ev.stopPropagation();\n    this.hass!.callService(\"media_player\", \"media_next_track\", {\n      entity_id: this._config!.entity,\n    });\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-media-player-entity-row\": HuiMediaPlayerEntityRow;\n  }\n}\n","import {\n  html,\n  LitElement,\n  TemplateResult,\n  CSSResult,\n  css,\n  property,\n  customElement,\n  PropertyValues,\n} from \"lit-element\";\n\nimport \"../components/hui-generic-entity-row\";\nimport \"../../../components/entity/ha-entity-toggle\";\nimport \"../components/hui-warning\";\n\nimport { HomeAssistant } from \"../../../types\";\nimport { EntityRow, EntityConfig } from \"./types\";\nimport { hasConfigOrEntityChanged } from \"../common/has-changed\";\n\n@customElement(\"hui-scene-entity-row\")\nclass HuiSceneEntityRow extends LitElement implements EntityRow {\n  @property() public hass?: HomeAssistant;\n\n  @property() private _config?: EntityConfig;\n\n  public setConfig(config: EntityConfig): void {\n    if (!config) {\n      throw new Error(\"Configuration error\");\n    }\n    this._config = config;\n  }\n\n  protected shouldUpdate(changedProps: PropertyValues): boolean {\n    return hasConfigOrEntityChanged(this, changedProps);\n  }\n\n  protected render(): TemplateResult | void {\n    if (!this._config || !this.hass) {\n      return html``;\n    }\n\n    const stateObj = this.hass.states[this._config.entity];\n\n    if (!stateObj) {\n      return html`\n        <hui-warning\n          >${this.hass.localize(\n            \"ui.panel.lovelace.warning.entity_not_found\",\n            \"entity\",\n            this._config.entity\n          )}</hui-warning\n        >\n      `;\n    }\n\n    return html`\n      <hui-generic-entity-row .hass=\"${this.hass}\" .config=\"${this._config}\">\n        ${stateObj.attributes.can_cancel\n          ? html`\n              <ha-entity-toggle\n                .hass=\"${this.hass}\"\n                .stateObj=\"${stateObj}\"\n              ></ha-entity-toggle>\n            `\n          : html`\n              <mwc-button @click=\"${this._callService}\">\n                ${this.hass!.localize(\"ui.card.scene.activate\")}\n              </mwc-button>\n            `}\n      </hui-generic-entity-row>\n    `;\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      mwc-button {\n        margin-right: -0.57em;\n      }\n    `;\n  }\n\n  private _callService(ev): void {\n    ev.stopPropagation();\n    this.hass!.callService(\"scene\", \"turn_on\", {\n      entity_id: this._config!.entity,\n    });\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-scene-entity-row\": HuiSceneEntityRow;\n  }\n}\n","import {\n  html,\n  LitElement,\n  TemplateResult,\n  property,\n  CSSResult,\n  css,\n  customElement,\n  PropertyValues,\n} from \"lit-element\";\n\nimport \"../components/hui-generic-entity-row\";\nimport \"../../../components/entity/ha-entity-toggle\";\nimport \"../components/hui-warning\";\n\nimport { HomeAssistant } from \"../../../types\";\nimport { EntityRow, EntityConfig } from \"./types\";\nimport { hasConfigOrEntityChanged } from \"../common/has-changed\";\n\n@customElement(\"hui-script-entity-row\")\nclass HuiScriptEntityRow extends LitElement implements EntityRow {\n  public hass?: HomeAssistant;\n\n  @property() private _config?: EntityConfig;\n\n  public setConfig(config: EntityConfig): void {\n    if (!config) {\n      throw new Error(\"Configuration error\");\n    }\n    this._config = config;\n  }\n\n  protected shouldUpdate(changedProps: PropertyValues): boolean {\n    return hasConfigOrEntityChanged(this, changedProps);\n  }\n\n  protected render(): TemplateResult | void {\n    if (!this._config || !this.hass) {\n      return html``;\n    }\n\n    const stateObj = this.hass.states[this._config.entity];\n\n    if (!stateObj) {\n      return html`\n        <hui-warning\n          >${this.hass.localize(\n            \"ui.panel.lovelace.warning.entity_not_found\",\n            \"entity\",\n            this._config.entity\n          )}</hui-warning\n        >\n      `;\n    }\n\n    return html`\n      <hui-generic-entity-row .hass=\"${this.hass}\" .config=\"${this._config}\">\n        ${stateObj.attributes.can_cancel\n          ? html`\n              <ha-entity-toggle\n                .hass=\"${this.hass}\"\n                .stateObj=\"${stateObj}\"\n              ></ha-entity-toggle>\n            `\n          : html`\n              <mwc-button @click=\"${this._callService}\">\n                ${this.hass!.localize(\"ui.card.script.execute\")}\n              </mwc-button>\n            `}\n      </hui-generic-entity-row>\n    `;\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      mwc-button {\n        margin-right: -0.57em;\n      }\n    `;\n  }\n\n  private _callService(ev): void {\n    ev.stopPropagation();\n    this.hass!.callService(\"script\", \"turn_on\", {\n      entity_id: this._config!.entity,\n    });\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-script-entity-row\": HuiScriptEntityRow;\n  }\n}\n","import {\n  html,\n  LitElement,\n  TemplateResult,\n  property,\n  CSSResult,\n  css,\n  customElement,\n  PropertyValues,\n} from \"lit-element\";\n\nimport \"../components/hui-generic-entity-row\";\nimport \"../components/hui-timestamp-display\";\nimport \"../components/hui-warning\";\n\nimport { HomeAssistant } from \"../../../types\";\nimport { EntityRow, EntityConfig } from \"./types\";\nimport { hasConfigOrEntityChanged } from \"../common/has-changed\";\n\nimport computeStateDisplay from \"../../../common/entity/compute_state_display\";\n\ninterface SensorEntityConfig extends EntityConfig {\n  format?: \"relative\" | \"date\" | \"time\" | \"datetime\";\n}\n\n@customElement(\"hui-sensor-entity-row\")\nclass HuiSensorEntityRow extends LitElement implements EntityRow {\n  @property() public hass?: HomeAssistant;\n\n  @property() private _config?: SensorEntityConfig;\n\n  public setConfig(config: SensorEntityConfig): void {\n    if (!config) {\n      throw new Error(\"Configuration error\");\n    }\n    this._config = config;\n  }\n\n  protected shouldUpdate(changedProps: PropertyValues): boolean {\n    return hasConfigOrEntityChanged(this, changedProps);\n  }\n\n  protected render(): TemplateResult | void {\n    if (!this._config || !this.hass) {\n      return html``;\n    }\n\n    const stateObj = this.hass.states[this._config.entity];\n\n    if (!stateObj) {\n      return html`\n        <hui-warning\n          >${this.hass.localize(\n            \"ui.panel.lovelace.warning.entity_not_found\",\n            \"entity\",\n            this._config.entity\n          )}</hui-warning\n        >\n      `;\n    }\n\n    return html`\n      <hui-generic-entity-row .hass=\"${this.hass}\" .config=\"${this._config}\">\n        <div>\n          ${stateObj.attributes.device_class === \"timestamp\"\n            ? html`\n                <hui-timestamp-display\n                  .hass=\"${this.hass}\"\n                  .ts=\"${new Date(stateObj.state)}\"\n                  .format=\"${this._config.format}\"\n                ></hui-timestamp-display>\n              `\n            : computeStateDisplay(\n                this.hass!.localize,\n                stateObj,\n                this.hass.language\n              )}\n        </div>\n      </hui-generic-entity-row>\n    `;\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      div {\n        text-align: right;\n      }\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-sensor-entity-row\": HuiSensorEntityRow;\n  }\n}\n","import {\n  html,\n  LitElement,\n  TemplateResult,\n  property,\n  CSSResult,\n  css,\n  customElement,\n  PropertyValues,\n} from \"lit-element\";\n\nimport \"../components/hui-generic-entity-row\";\nimport \"../components/hui-warning\";\n\nimport computeStateDisplay from \"../../../common/entity/compute_state_display\";\n\nimport { HomeAssistant } from \"../../../types\";\nimport { EntityRow, EntityConfig } from \"./types\";\nimport { hasConfigOrEntityChanged } from \"../common/has-changed\";\n\n@customElement(\"hui-text-entity-row\")\nclass HuiTextEntityRow extends LitElement implements EntityRow {\n  @property() public hass?: HomeAssistant;\n\n  @property() private _config?: EntityConfig;\n\n  public setConfig(config: EntityConfig): void {\n    if (!config) {\n      throw new Error(\"Configuration error\");\n    }\n    this._config = config;\n  }\n\n  protected shouldUpdate(changedProps: PropertyValues): boolean {\n    return hasConfigOrEntityChanged(this, changedProps);\n  }\n\n  protected render(): TemplateResult | void {\n    if (!this._config || !this.hass) {\n      return html``;\n    }\n\n    const stateObj = this.hass.states[this._config.entity];\n\n    if (!stateObj) {\n      return html`\n        <hui-warning\n          >${this.hass.localize(\n            \"ui.panel.lovelace.warning.entity_not_found\",\n            \"entity\",\n            this._config.entity\n          )}</hui-warning\n        >\n      `;\n    }\n\n    return html`\n      <hui-generic-entity-row .hass=\"${this.hass}\" .config=\"${this._config}\">\n        <div>\n          ${computeStateDisplay(\n            this.hass!.localize,\n            stateObj,\n            this.hass.language\n          )}\n        </div>\n      </hui-generic-entity-row>\n    `;\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      div {\n        text-align: right;\n      }\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-text-entity-row\": HuiTextEntityRow;\n  }\n}\n","import {\n  html,\n  LitElement,\n  TemplateResult,\n  property,\n  PropertyValues,\n  customElement,\n} from \"lit-element\";\n\nimport \"../components/hui-generic-entity-row\";\nimport \"../components/hui-warning\";\n\nimport timerTimeRemaining from \"../../../common/entity/timer_time_remaining\";\nimport secondsToDuration from \"../../../common/datetime/seconds_to_duration\";\n\nimport { HomeAssistant } from \"../../../types\";\nimport { EntityConfig } from \"./types\";\nimport { HassEntity } from \"home-assistant-js-websocket\";\nimport { hasConfigOrEntityChanged } from \"../common/has-changed\";\n\n@customElement(\"hui-timer-entity-row\")\nclass HuiTimerEntityRow extends LitElement {\n  @property() public hass?: HomeAssistant;\n\n  @property() private _config?: EntityConfig;\n\n  @property() private _timeRemaining?: number;\n\n  private _interval?: number;\n\n  public setConfig(config: EntityConfig): void {\n    if (!config) {\n      throw new Error(\"Configuration error\");\n    }\n    this._config = config;\n  }\n\n  public disconnectedCallback(): void {\n    super.disconnectedCallback();\n    this._clearInterval();\n  }\n\n  protected render(): TemplateResult | void {\n    if (!this._config || !this.hass) {\n      return html``;\n    }\n\n    const stateObj = this.hass.states[this._config.entity];\n\n    if (!stateObj) {\n      return html`\n        <hui-warning\n          >${this.hass.localize(\n            \"ui.panel.lovelace.warning.entity_not_found\",\n            \"entity\",\n            this._config.entity\n          )}</hui-warning\n        >\n      `;\n    }\n\n    return html`\n      <hui-generic-entity-row .hass=\"${this.hass}\" .config=\"${this._config}\">\n        <div>${this._computeDisplay(stateObj)}</div>\n      </hui-generic-entity-row>\n    `;\n  }\n\n  protected shouldUpdate(changedProps: PropertyValues): boolean {\n    if (changedProps.has(\"_timeRemaining\")) {\n      return true;\n    }\n\n    return hasConfigOrEntityChanged(this, changedProps);\n  }\n\n  protected updated(changedProps: PropertyValues) {\n    super.updated(changedProps);\n\n    if (changedProps.has(\"hass\")) {\n      const stateObj = this.hass!.states[this._config!.entity];\n      const oldHass = changedProps.get(\"hass\") as this[\"hass\"];\n      const oldStateObj = oldHass\n        ? oldHass.states[this._config!.entity]\n        : undefined;\n\n      if (oldStateObj !== stateObj) {\n        this._startInterval(stateObj);\n      } else if (!stateObj) {\n        this._clearInterval();\n      }\n    }\n  }\n\n  private _clearInterval(): void {\n    if (this._interval) {\n      window.clearInterval(this._interval);\n      this._interval = undefined;\n    }\n  }\n\n  private _startInterval(stateObj: HassEntity): void {\n    this._clearInterval();\n    this._calculateRemaining(stateObj);\n\n    if (stateObj.state === \"active\") {\n      this._interval = window.setInterval(\n        () => this._calculateRemaining(stateObj),\n        1000\n      );\n    }\n  }\n\n  private _calculateRemaining(stateObj: HassEntity): void {\n    this._timeRemaining = timerTimeRemaining(stateObj);\n  }\n\n  private _computeDisplay(stateObj: HassEntity): string | null {\n    if (!stateObj) {\n      return null;\n    }\n\n    if (stateObj.state === \"idle\" || this._timeRemaining === 0) {\n      return this.hass!.localize(\"state.timer.\" + stateObj.state);\n    }\n\n    let display = secondsToDuration(this._timeRemaining || 0);\n\n    if (stateObj.state === \"paused\") {\n      display += ` (${this.hass!.localize(\"state.timer.paused\")})`;\n    }\n\n    return display;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-timer-entity-row\": HuiTimerEntityRow;\n  }\n}\n","import {\n  html,\n  LitElement,\n  TemplateResult,\n  customElement,\n  property,\n  PropertyValues,\n} from \"lit-element\";\n\nimport \"../components/hui-generic-entity-row\";\nimport \"../../../components/entity/ha-entity-toggle\";\nimport \"../components/hui-warning\";\n\nimport computeStateDisplay from \"../../../common/entity/compute_state_display\";\n\nimport { HomeAssistant } from \"../../../types\";\nimport { EntityRow, EntityConfig } from \"./types\";\nimport { hasConfigOrEntityChanged } from \"../common/has-changed\";\n\n@customElement(\"hui-toggle-entity-row\")\nclass HuiToggleEntityRow extends LitElement implements EntityRow {\n  @property() public hass?: HomeAssistant;\n\n  @property() private _config?: EntityConfig;\n\n  public setConfig(config: EntityConfig): void {\n    if (!config) {\n      throw new Error(\"Configuration error\");\n    }\n    this._config = config;\n  }\n\n  protected shouldUpdate(changedProps: PropertyValues): boolean {\n    return hasConfigOrEntityChanged(this, changedProps);\n  }\n\n  protected render(): TemplateResult | void {\n    if (!this._config || !this.hass) {\n      return html``;\n    }\n\n    const stateObj = this.hass.states[this._config.entity];\n\n    if (!stateObj) {\n      return html`\n        <hui-warning\n          >${this.hass.localize(\n            \"ui.panel.lovelace.warning.entity_not_found\",\n            \"entity\",\n            this._config.entity\n          )}</hui-warning\n        >\n      `;\n    }\n\n    return html`\n      <hui-generic-entity-row .hass=\"${this.hass}\" .config=\"${this._config}\">\n        ${stateObj.state === \"on\" || stateObj.state === \"off\"\n          ? html`\n              <ha-entity-toggle\n                .hass=\"${this.hass}\"\n                .stateObj=\"${stateObj}\"\n              ></ha-entity-toggle>\n            `\n          : html`\n              <div>\n                ${computeStateDisplay(\n                  this.hass!.localize,\n                  stateObj,\n                  this.hass!.language\n                )}\n              </div>\n            `}\n      </hui-generic-entity-row>\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-toggle-entity-row\": HuiToggleEntityRow;\n  }\n}\n","import \"@material/mwc-button\";\n\nimport {\n  fetchConfig,\n  LovelaceConfig,\n  saveConfig,\n  subscribeLovelaceUpdates,\n} from \"../../data/lovelace\";\nimport \"../../layouts/hass-loading-screen\";\nimport \"../../layouts/hass-error-screen\";\nimport \"./hui-root\";\nimport { HomeAssistant, PanelInfo, Route } from \"../../types\";\nimport { Lovelace } from \"./types\";\nimport {\n  LitElement,\n  html,\n  PropertyValues,\n  TemplateResult,\n  property,\n} from \"lit-element\";\nimport { showSaveDialog } from \"./editor/show-save-config-dialog\";\nimport { generateLovelaceConfig } from \"./common/generate-lovelace-config\";\nimport { showToast } from \"../../util/toast\";\n\ninterface LovelacePanelConfig {\n  mode: \"yaml\" | \"storage\";\n}\n\nlet editorLoaded = false;\n\nclass LovelacePanel extends LitElement {\n  @property() public panel?: PanelInfo<LovelacePanelConfig>;\n\n  @property() public hass?: HomeAssistant;\n\n  @property() public narrow?: boolean;\n\n  @property() public route?: Route;\n\n  @property() private _columns?: number;\n\n  @property()\n  private _state?: \"loading\" | \"loaded\" | \"error\" | \"yaml-editor\" = \"loading\";\n\n  @property() private _errorMsg?: string;\n\n  @property() private lovelace?: Lovelace;\n\n  private mqls?: MediaQueryList[];\n\n  private _saving: boolean = false;\n\n  constructor() {\n    super();\n    this._closeEditor = this._closeEditor.bind(this);\n  }\n\n  public render(): TemplateResult | void {\n    const state = this._state!;\n\n    if (state === \"loaded\") {\n      return html`\n        <hui-root\n          .hass=\"${this.hass}\"\n          .lovelace=\"${this.lovelace}\"\n          .route=\"${this.route}\"\n          .columns=\"${this._columns}\"\n          .narrow=${this.narrow}\n          @config-refresh=\"${this._forceFetchConfig}\"\n        ></hui-root>\n      `;\n    }\n\n    if (state === \"error\") {\n      return html`\n        <hass-error-screen title=\"Lovelace\" .error=\"${this._errorMsg}\">\n          <mwc-button on-click=\"_forceFetchConfig\"\n            >${this.hass!.localize(\n              \"ui.panel.lovelace.reload_lovelace\"\n            )}</mwc-button\n          >\n        </hass-error-screen>\n      `;\n    }\n\n    if (state === \"yaml-editor\") {\n      return html`\n        <hui-editor\n          .hass=\"${this.hass}\"\n          .lovelace=\"${this.lovelace}\"\n          .closeEditor=\"${this._closeEditor}\"\n        ></hui-editor>\n      `;\n    }\n\n    return html`\n      <hass-loading-screen rootnav></hass-loading-screen>\n    `;\n  }\n\n  public updated(changedProps: PropertyValues): void {\n    super.updated(changedProps);\n\n    if (changedProps.has(\"narrow\")) {\n      this._updateColumns();\n      return;\n    }\n\n    if (!changedProps.has(\"hass\")) {\n      return;\n    }\n\n    const oldHass = changedProps.get(\"hass\") as this[\"hass\"];\n\n    if (oldHass && this.hass!.dockedSidebar !== oldHass.dockedSidebar) {\n      this._updateColumns();\n    }\n  }\n\n  public firstUpdated() {\n    this._fetchConfig(false);\n    // we don't want to unsub as we want to stay informed of updates\n    subscribeLovelaceUpdates(this.hass!.connection, () =>\n      this._lovelaceChanged()\n    );\n    // reload lovelace on reconnect so we are sure we have the latest config\n    window.addEventListener(\"connection-status\", (ev) => {\n      if (ev.detail === \"connected\") {\n        this._fetchConfig(false);\n      }\n    });\n    this._updateColumns = this._updateColumns.bind(this);\n    this.mqls = [300, 600, 900, 1200].map((width) => {\n      const mql = matchMedia(`(min-width: ${width}px)`);\n      mql.addListener(this._updateColumns);\n      return mql;\n    });\n    this._updateColumns();\n  }\n\n  public connectedCallback(): void {\n    super.connectedCallback();\n    if (\n      this.lovelace &&\n      this.hass &&\n      this.lovelace.language !== this.hass.language\n    ) {\n      // language has been changed, rebuild UI\n      this._setLovelaceConfig(this.lovelace.config, this.lovelace.mode);\n    } else if (this.lovelace && this.lovelace.mode === \"generated\") {\n      // When lovelace is generated, we re-generate each time a user goes\n      // to the states panel to make sure new entities are shown.\n      this._state = \"loading\";\n      this._regenerateConfig();\n    }\n  }\n\n  private async _regenerateConfig() {\n    const conf = await generateLovelaceConfig(this.hass!, this.hass!.localize);\n    this._setLovelaceConfig(conf, \"generated\");\n    this._state = \"loaded\";\n  }\n\n  private _closeEditor() {\n    this._state = \"loaded\";\n  }\n\n  private _updateColumns() {\n    const matchColumns = this.mqls!.reduce(\n      (cols, mql) => cols + Number(mql.matches),\n      0\n    );\n    // Do -1 column if the menu is docked and open\n    this._columns = Math.max(\n      1,\n      matchColumns - Number(!this.narrow && this.hass!.dockedSidebar)\n    );\n  }\n\n  private _lovelaceChanged() {\n    if (this._saving) {\n      this._saving = false;\n    } else {\n      showToast(this, {\n        message: this.hass!.localize(\"ui.panel.lovelace.changed_toast.message\"),\n        action: {\n          action: () => this._fetchConfig(false),\n          text: this.hass!.localize(\"ui.panel.lovelace.changed_toast.refresh\"),\n        },\n        duration: 0,\n        dismissable: false,\n      });\n    }\n  }\n\n  private _forceFetchConfig() {\n    this._fetchConfig(true);\n  }\n\n  private async _fetchConfig(forceDiskRefresh) {\n    let conf: LovelaceConfig;\n    let confMode: Lovelace[\"mode\"] = this.panel!.config.mode;\n\n    try {\n      conf = await fetchConfig(this.hass!, forceDiskRefresh);\n    } catch (err) {\n      if (err.code !== \"config_not_found\") {\n        // tslint:disable-next-line\n        console.log(err);\n        this._state = \"error\";\n        this._errorMsg = err.message;\n        return;\n      }\n      conf = await generateLovelaceConfig(this.hass!, this.hass!.localize);\n      confMode = \"generated\";\n    }\n\n    this._state = \"loaded\";\n    this._setLovelaceConfig(conf, confMode);\n  }\n\n  private _setLovelaceConfig(config: LovelaceConfig, mode: Lovelace[\"mode\"]) {\n    this.lovelace = {\n      config,\n      mode,\n      editMode: this.lovelace ? this.lovelace.editMode : false,\n      language: this.hass!.language,\n      enableFullEditMode: () => {\n        if (!editorLoaded) {\n          editorLoaded = true;\n          import(/* webpackChunkName: \"lovelace-yaml-editor\" */ \"./hui-editor\");\n        }\n        this._state = \"yaml-editor\";\n      },\n      setEditMode: (editMode: boolean) => {\n        if (!editMode || this.lovelace!.mode !== \"generated\") {\n          this._updateLovelace({ editMode });\n          return;\n        }\n        showSaveDialog(this, {\n          lovelace: this.lovelace!,\n        });\n      },\n      saveConfig: async (newConfig: LovelaceConfig): Promise<void> => {\n        const { config: previousConfig, mode: previousMode } = this.lovelace!;\n        try {\n          // Optimistic update\n          this._updateLovelace({\n            config: newConfig,\n            mode: \"storage\",\n          });\n          this._saving = true;\n          await saveConfig(this.hass!, newConfig);\n        } catch (err) {\n          // tslint:disable-next-line\n          console.error(err);\n          // Rollback the optimistic update\n          this._updateLovelace({\n            config: previousConfig,\n            mode: previousMode,\n          });\n          throw err;\n        }\n      },\n    };\n  }\n\n  private _updateLovelace(props: Partial<Lovelace>) {\n    this.lovelace = {\n      ...this.lovelace!,\n      ...props,\n    };\n  }\n}\n\ncustomElements.define(\"ha-panel-lovelace\", LovelacePanel);\n","import {\n  html,\n  LitElement,\n  PropertyValues,\n  TemplateResult,\n  CSSResult,\n  css,\n  property,\n} from \"lit-element\";\nimport { classMap } from \"lit-html/directives/class-map\";\nimport \"@polymer/app-layout/app-header-layout/app-header-layout\";\nimport \"@polymer/app-layout/app-header/app-header\";\nimport \"@polymer/app-layout/app-scroll-effects/effects/waterfall\";\nimport \"@polymer/app-layout/app-toolbar/app-toolbar\";\nimport \"@polymer/app-route/app-route\";\nimport \"@polymer/paper-icon-button/paper-icon-button\";\nimport \"@material/mwc-button\";\nimport \"@polymer/paper-item/paper-item\";\nimport \"@polymer/paper-listbox/paper-listbox\";\nimport \"@polymer/paper-menu-button/paper-menu-button\";\nimport \"@polymer/paper-tabs/paper-tab\";\nimport \"@polymer/paper-tabs/paper-tabs\";\nimport { HassEntities } from \"home-assistant-js-websocket\";\n\nimport scrollToTarget from \"../../common/dom/scroll-to-target\";\n\nimport \"../../layouts/ha-app-layout\";\nimport \"../../components/ha-start-voice-button\";\nimport \"../../components/ha-paper-icon-button-arrow-next\";\nimport \"../../components/ha-paper-icon-button-arrow-prev\";\nimport \"../../components/ha-icon\";\nimport { loadModule, loadCSS, loadJS } from \"../../common/dom/load_resource\";\nimport { subscribeNotifications } from \"../../data/ws-notifications\";\nimport { debounce } from \"../../common/util/debounce\";\nimport { HomeAssistant } from \"../../types\";\nimport { LovelaceConfig } from \"../../data/lovelace\";\nimport { navigate } from \"../../common/navigate\";\nimport { fireEvent } from \"../../common/dom/fire_event\";\nimport { computeNotifications } from \"./common/compute-notifications\";\nimport { swapView } from \"./editor/config-util\";\n\nimport \"./components/notifications/hui-notification-drawer\";\nimport \"./components/notifications/hui-notifications-button\";\nimport \"./hui-view\";\n// Not a duplicate import, this one is for type\n// tslint:disable-next-line\nimport { HUIView } from \"./hui-view\";\nimport { createCardElement } from \"./common/create-card-element\";\nimport { showEditViewDialog } from \"./editor/view-editor/show-edit-view-dialog\";\nimport { showEditLovelaceDialog } from \"./editor/lovelace-editor/show-edit-lovelace-dialog\";\nimport { Lovelace } from \"./types\";\nimport { afterNextRender } from \"../../common/util/render-status\";\nimport { haStyle } from \"../../resources/styles\";\nimport { computeRTLDirection } from \"../../common/util/compute_rtl\";\n\n// CSS and JS should only be imported once. Modules and HTML are safe.\nconst CSS_CACHE = {};\nconst JS_CACHE = {};\n\nlet loadedUnusedEntities = false;\n\nclass HUIRoot extends LitElement {\n  @property() public hass?: HomeAssistant;\n  @property() public lovelace?: Lovelace;\n  @property() public columns?: number;\n  @property() public narrow?: boolean;\n  @property() public route?: { path: string; prefix: string };\n  @property() private _routeData?: { view: string };\n  @property() private _curView?: number | \"hass-unused-entities\";\n  @property() private _notificationsOpen = false;\n  @property() private _persistentNotifications?: Notification[];\n  private _viewCache?: { [viewId: string]: HUIView };\n\n  private _debouncedConfigChanged: () => void;\n  private _unsubNotifications?: () => void;\n\n  constructor() {\n    super();\n    // The view can trigger a re-render when it knows that certain\n    // web components have been loaded.\n    this._debouncedConfigChanged = debounce(\n      () => this._selectView(this._curView, true),\n      100,\n      false\n    );\n  }\n\n  public connectedCallback(): void {\n    super.connectedCallback();\n    this._unsubNotifications = subscribeNotifications(\n      this.hass!.connection,\n      (notifications) => {\n        this._persistentNotifications = notifications;\n      }\n    );\n  }\n\n  public disconnectedCallback(): void {\n    super.disconnectedCallback();\n    if (this._unsubNotifications) {\n      this._unsubNotifications();\n    }\n  }\n\n  protected render(): TemplateResult | void {\n    return html`\n    <app-route .route=\"${this.route}\" pattern=\"/:view\" data=\"${\n      this._routeData\n    }\" @data-changed=\"${this._routeDataChanged}\"></app-route>\n    <hui-notification-drawer\n      .hass=\"${this.hass}\"\n      .notifications=\"${this._notifications}\"\n      .open=\"${this._notificationsOpen}\"\n      @open-changed=\"${this._handleNotificationsOpenChanged}\"\n      .narrow=\"${this.narrow}\"\n    ></hui-notification-drawer>\n    <ha-app-layout id=\"layout\">\n      <app-header slot=\"header\" effects=\"waterfall\" class=\"${classMap({\n        \"edit-mode\": this._editMode,\n      })}\" fixed condenses>\n        ${\n          this._editMode\n            ? html`\n                <app-toolbar class=\"edit-mode\">\n                  <paper-icon-button\n                    icon=\"hass:close\"\n                    @click=\"${this._editModeDisable}\"\n                  ></paper-icon-button>\n                  <div main-title>\n                    ${this.config.title ||\n                      this.hass!.localize(\"ui.panel.lovelace.editor.header\")}\n                    <paper-icon-button\n                      icon=\"hass:pencil\"\n                      class=\"edit-icon\"\n                      @click=\"${this._editLovelace}\"\n                    ></paper-icon-button>\n                  </div>\n                  <paper-icon-button\n                    icon=\"hass:help-circle\"\n                    title=\"Help\"\n                    @click=\"${this._handleHelp}\"\n                  ></paper-icon-button>\n                  <paper-menu-button\n                    no-animations\n                    horizontal-align=\"right\"\n                    horizontal-offset=\"-5\"\n                  >\n                    <paper-icon-button\n                      icon=\"hass:dots-vertical\"\n                      slot=\"dropdown-trigger\"\n                    ></paper-icon-button>\n                    <paper-listbox\n                      @iron-select=\"${this._deselect}\"\n                      slot=\"dropdown-content\"\n                    >\n                      <paper-item @click=\"${this.lovelace!.enableFullEditMode}\"\n                        >${this.hass!.localize(\n                          \"ui.panel.lovelace.editor.menu.raw_editor\"\n                        )}</paper-item\n                      >\n                    </paper-listbox>\n                  </paper-menu-button>\n                </app-toolbar>\n              `\n            : html`\n                <app-toolbar>\n                  <ha-menu-button></ha-menu-button>\n                  <div main-title>${this.config.title || \"Home Assistant\"}</div>\n                  <hui-notifications-button\n                    .hass=\"${this.hass}\"\n                    .opened=\"${this._notificationsOpen}\"\n                    @opened-changed=\"${this._handleNotificationsOpenChanged}\"\n                    .notifications=\"${this._notifications}\"\n                  ></hui-notifications-button>\n                  <ha-start-voice-button\n                    .hass=\"${this.hass}\"\n                  ></ha-start-voice-button>\n                  <paper-menu-button\n                    no-animations\n                    horizontal-align=\"right\"\n                    horizontal-offset=\"-5\"\n                  >\n                    <paper-icon-button\n                      icon=\"hass:dots-vertical\"\n                      slot=\"dropdown-trigger\"\n                    ></paper-icon-button>\n                    <paper-listbox\n                      @iron-select=\"${this._deselect}\"\n                      slot=\"dropdown-content\"\n                    >\n                      ${this._yamlMode\n                        ? html`\n                            <paper-item @click=\"${this._handleRefresh}\"\n                              >${this.hass!.localize(\n                                \"ui.panel.lovelace.menu.refresh\"\n                              )}</paper-item\n                            >\n                          `\n                        : \"\"}\n                      <paper-item @click=\"${this._handleUnusedEntities}\"\n                        >${this.hass!.localize(\n                          \"ui.panel.lovelace.menu.unused_entities\"\n                        )}</paper-item\n                      >\n                      <paper-item @click=\"${this._editModeEnable}\"\n                        >${this.hass!.localize(\n                          \"ui.panel.lovelace.menu.configure_ui\"\n                        )}</paper-item\n                      >\n                      <paper-item @click=\"${this._handleHelp}\"\n                        >${this.hass!.localize(\n                          \"ui.panel.lovelace.menu.help\"\n                        )}</paper-item\n                      >\n                    </paper-listbox>\n                  </paper-menu-button>\n                </app-toolbar>\n              `\n        }\n\n        ${\n          this.lovelace!.config.views.length > 1 || this._editMode\n            ? html`\n                <div sticky>\n                  <paper-tabs\n                    scrollable\n                    .selected=\"${this._curView}\"\n                    @iron-activate=\"${this._handleViewSelected}\"\n                    dir=\"${computeRTLDirection(this.hass!)}\"\n                  >\n                    ${this.lovelace!.config.views.map(\n                      (view) => html`\n                        <paper-tab>\n                          ${this._editMode\n                            ? html`\n                                <ha-paper-icon-button-arrow-prev\n                                  title=\"Move view left\"\n                                  class=\"edit-icon view\"\n                                  @click=\"${this._moveViewLeft}\"\n                                  ?disabled=\"${this._curView === 0}\"\n                                ></ha-paper-icon-button-arrow-prev>\n                              `\n                            : \"\"}\n                          ${view.icon\n                            ? html`\n                                <ha-icon\n                                  title=\"${view.title}\"\n                                  .icon=\"${view.icon}\"\n                                ></ha-icon>\n                              `\n                            : view.title || \"Unnamed view\"}\n                          ${this._editMode\n                            ? html`\n                                <ha-icon\n                                  title=\"Edit view\"\n                                  class=\"edit-icon view\"\n                                  icon=\"hass:pencil\"\n                                  @click=\"${this._editView}\"\n                                ></ha-icon>\n                                <ha-paper-icon-button-arrow-next\n                                  title=\"Move view right\"\n                                  class=\"edit-icon view\"\n                                  @click=\"${this._moveViewRight}\"\n                                  ?disabled=\"${(this._curView! as number) +\n                                    1 ===\n                                    this.lovelace!.config.views.length}\"\n                                ></ha-paper-icon-button-arrow-next>\n                              `\n                            : \"\"}\n                        </paper-tab>\n                      `\n                    )}\n                    ${this._editMode\n                      ? html`\n                          <paper-icon-button\n                            id=\"add-view\"\n                            @click=\"${this._addView}\"\n                            title=\"${this.hass!.localize(\n                              \"ui.panel.lovelace.editor.edit_view.add\"\n                            )}\"\n                            icon=\"hass:plus\"\n                          ></paper-icon-button>\n                        `\n                      : \"\"}\n                  </paper-tabs>\n                </div>\n              `\n            : \"\"\n        }\n      </app-header>\n      <div id='view' class=\"${classMap({\n        \"tabs-hidden\": this.lovelace!.config.views.length < 2,\n      })}\" @ll-rebuild='${this._debouncedConfigChanged}'></div>\n    </app-header-layout>\n    `;\n  }\n\n  static get styles(): CSSResult[] {\n    return [\n      haStyle,\n      css`\n        :host {\n          -ms-user-select: none;\n          -webkit-user-select: none;\n          -moz-user-select: none;\n          --dark-color: #455a64;\n          --text-dark-color: #fff;\n        }\n\n        ha-app-layout {\n          min-height: 100%;\n        }\n        paper-menu-button {\n          padding: 0;\n        }\n        paper-tabs {\n          margin-left: 12px;\n          --paper-tabs-selection-bar-color: var(--text-primary-color, #fff);\n          text-transform: uppercase;\n        }\n        .edit-mode {\n          background-color: var(--dark-color, #455a64);\n          color: var(--text-dark-color);\n        }\n        .edit-mode div[main-title] {\n          pointer-events: auto;\n        }\n        paper-tab.iron-selected .edit-icon {\n          display: inline-flex;\n        }\n        .edit-icon {\n          color: var(--accent-color);\n          padding-left: 8px;\n        }\n        .edit-icon[disabled] {\n          color: var(--disabled-text-color);\n        }\n        .edit-icon.view {\n          display: none;\n        }\n        #add-view {\n          position: absolute;\n          height: 44px;\n        }\n        #add-view ha-icon {\n          background-color: var(--accent-color);\n          border-radius: 5px;\n          margin-top: 4px;\n        }\n        app-toolbar a {\n          color: var(--text-primary-color, white);\n        }\n        mwc-button.warning:not([disabled]) {\n          color: var(--google-red-500);\n        }\n        #view {\n          min-height: calc(100vh - 112px);\n          /**\n         * Since we only set min-height, if child nodes need percentage\n         * heights they must use absolute positioning so we need relative\n         * positioning here.\n         *\n         * https://www.w3.org/TR/CSS2/visudet.html#the-height-property\n         */\n          position: relative;\n        }\n        #view.tabs-hidden {\n          min-height: calc(100vh - 64px);\n        }\n        paper-item {\n          cursor: pointer;\n        }\n      `,\n    ];\n  }\n\n  protected updated(changedProperties: PropertyValues): void {\n    super.updated(changedProperties);\n\n    const view = this._viewRoot;\n    const huiView = view.lastChild as HUIView;\n\n    if (changedProperties.has(\"columns\") && huiView) {\n      huiView.columns = this.columns;\n    }\n\n    if (changedProperties.has(\"hass\") && huiView) {\n      huiView.hass = this.hass;\n    }\n\n    let newSelectView;\n    let force = false;\n\n    if (changedProperties.has(\"route\")) {\n      const views = this.config && this.config.views;\n      if (\n        this.route!.path === \"\" &&\n        this.route!.prefix === \"/lovelace\" &&\n        views\n      ) {\n        navigate(this, `/lovelace/${views[0].path || 0}`, true);\n        newSelectView = 0;\n      } else if (this._routeData!.view === \"hass-unused-entities\") {\n        newSelectView = \"hass-unused-entities\";\n      } else if (this._routeData!.view) {\n        const selectedView = this._routeData!.view;\n        const selectedViewInt = parseInt(selectedView, 10);\n        let index = 0;\n        for (let i = 0; i < views.length; i++) {\n          if (views[i].path === selectedView || i === selectedViewInt) {\n            index = i;\n            break;\n          }\n        }\n        newSelectView = index;\n      }\n    }\n\n    if (changedProperties.has(\"lovelace\")) {\n      const oldLovelace = changedProperties.get(\"lovelace\") as\n        | Lovelace\n        | undefined;\n\n      if (!oldLovelace || oldLovelace.config !== this.lovelace!.config) {\n        this._loadResources(this.lovelace!.config.resources || []);\n        // On config change, recreate the current view from scratch.\n        force = true;\n        // Recalculate to see if we need to adjust content area for tab bar\n        fireEvent(this, \"iron-resize\");\n      }\n\n      if (!oldLovelace || oldLovelace.editMode !== this.lovelace!.editMode) {\n        // On edit mode change, recreate the current view from scratch\n        force = true;\n        // Recalculate to see if we need to adjust content area for tab bar\n        fireEvent(this, \"iron-resize\");\n      }\n    }\n\n    if (newSelectView !== undefined || force) {\n      if (force && newSelectView === undefined) {\n        newSelectView = this._curView;\n      }\n      this._selectView(newSelectView, force);\n    }\n  }\n\n  private get _notifications() {\n    return this._updateNotifications(\n      this.hass!.states,\n      this._persistentNotifications! || []\n    );\n  }\n\n  private get config(): LovelaceConfig {\n    return this.lovelace!.config;\n  }\n\n  private get _yamlMode(): boolean {\n    return this.lovelace!.mode === \"yaml\";\n  }\n\n  private get _editMode() {\n    return this.lovelace!.editMode;\n  }\n\n  private get _layout(): any {\n    return this.shadowRoot!.getElementById(\"layout\");\n  }\n\n  private get _viewRoot(): HTMLDivElement {\n    return this.shadowRoot!.getElementById(\"view\") as HTMLDivElement;\n  }\n\n  private _routeDataChanged(ev): void {\n    this._routeData = ev.detail.value;\n  }\n\n  private _handleNotificationsOpenChanged(ev): void {\n    this._notificationsOpen = ev.detail.value;\n  }\n\n  private _updateNotifications(\n    states: HassEntities,\n    persistent: unknown[]\n  ): unknown[] {\n    const configurator = computeNotifications(states);\n    return persistent.concat(configurator);\n  }\n\n  private _handleRefresh(): void {\n    fireEvent(this, \"config-refresh\");\n  }\n\n  private _handleUnusedEntities(): void {\n    navigate(this, `/lovelace/hass-unused-entities`);\n  }\n\n  private _deselect(ev): void {\n    ev.target.selected = null;\n  }\n\n  private _handleHelp(): void {\n    window.open(\"https://www.home-assistant.io/lovelace/\", \"_blank\");\n  }\n\n  private _editModeEnable(): void {\n    if (this._yamlMode) {\n      window.alert(\"The edit UI is not available when in YAML mode.\");\n      return;\n    }\n    this.lovelace!.setEditMode(true);\n    if (this.config.views.length < 2) {\n      fireEvent(this, \"iron-resize\");\n    }\n  }\n\n  private _editModeDisable(): void {\n    this.lovelace!.setEditMode(false);\n    if (this.config.views.length < 2) {\n      fireEvent(this, \"iron-resize\");\n    }\n  }\n\n  private _editLovelace() {\n    showEditLovelaceDialog(this, this.lovelace!);\n  }\n\n  private _editView() {\n    showEditViewDialog(this, {\n      lovelace: this.lovelace!,\n      viewIndex: this._curView as number,\n    });\n  }\n\n  private _moveViewLeft() {\n    const lovelace = this.lovelace!;\n    const oldIndex = this._curView as number;\n    const newIndex = (this._curView as number) - 1;\n    this._curView = newIndex;\n    lovelace.saveConfig(swapView(lovelace.config, oldIndex, newIndex));\n  }\n\n  private _moveViewRight() {\n    const lovelace = this.lovelace!;\n    const oldIndex = this._curView as number;\n    const newIndex = (this._curView as number) + 1;\n    this._curView = newIndex;\n    lovelace.saveConfig(swapView(lovelace.config, oldIndex, newIndex));\n  }\n\n  private _addView() {\n    showEditViewDialog(this, {\n      lovelace: this.lovelace!,\n    });\n  }\n\n  private _handleViewSelected(ev) {\n    const viewIndex = ev.detail.selected as number;\n\n    if (viewIndex !== this._curView) {\n      const path = this.config.views[viewIndex].path || viewIndex;\n      navigate(this, `/lovelace/${path}`);\n    }\n    scrollToTarget(this, this._layout.header.scrollTarget);\n  }\n\n  private async _selectView(\n    viewIndex: HUIRoot[\"_curView\"],\n    force: boolean\n  ): Promise<void> {\n    if (!force && this._curView === viewIndex) {\n      return;\n    }\n\n    viewIndex = viewIndex === undefined ? 0 : viewIndex;\n\n    this._curView = viewIndex;\n\n    if (force) {\n      this._viewCache = {};\n    }\n\n    // Recreate a new element to clear the applied themes.\n    const root = this._viewRoot;\n\n    if (root.lastChild) {\n      root.removeChild(root.lastChild);\n    }\n\n    if (viewIndex === \"hass-unused-entities\") {\n      if (!loadedUnusedEntities) {\n        loadedUnusedEntities = true;\n        await import(/* webpackChunkName: \"hui-unused-entities\" */ \"./hui-unused-entities\");\n      }\n      const unusedEntities = document.createElement(\"hui-unused-entities\");\n      unusedEntities.setConfig(this.config);\n      unusedEntities.hass = this.hass!;\n      root.style.background = this.config.background || \"\";\n      root.appendChild(unusedEntities);\n      return;\n    }\n\n    let view;\n    const viewConfig = this.config.views[viewIndex];\n\n    if (!viewConfig) {\n      this._editModeEnable();\n      return;\n    }\n\n    if (!force && this._viewCache![viewIndex]) {\n      view = this._viewCache![viewIndex];\n    } else {\n      await new Promise((resolve) => afterNextRender(resolve));\n\n      if (viewConfig.panel && viewConfig.cards && viewConfig.cards.length > 0) {\n        view = createCardElement(viewConfig.cards[0]);\n        view.isPanel = true;\n      } else {\n        view = document.createElement(\"hui-view\");\n        view.lovelace = this.lovelace;\n        view.columns = this.columns;\n        view.index = viewIndex;\n      }\n      this._viewCache![viewIndex] = view;\n    }\n\n    view.hass = this.hass;\n    root.style.background =\n      viewConfig.background || this.config.background || \"\";\n    root.appendChild(view);\n  }\n\n  private _loadResources(resources) {\n    resources.forEach((resource) => {\n      switch (resource.type) {\n        case \"css\":\n          if (resource.url in CSS_CACHE) {\n            break;\n          }\n          CSS_CACHE[resource.url] = loadCSS(resource.url);\n          break;\n\n        case \"js\":\n          if (resource.url in JS_CACHE) {\n            break;\n          }\n          JS_CACHE[resource.url] = loadJS(resource.url);\n          break;\n\n        case \"module\":\n          loadModule(resource.url);\n          break;\n\n        case \"html\":\n          import(/* webpackChunkName: \"import-href-polyfill\" */ \"../../resources/html-import/import-href\").then(\n            ({ importHref }) => importHref(resource.url)\n          );\n          break;\n\n        default:\n          // tslint:disable-next-line\n          console.warn(`Unknown resource type specified: ${resource.type}`);\n      }\n    });\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-root\": HUIRoot;\n  }\n}\n\ncustomElements.define(\"hui-root\", HUIRoot);\n","import {\n  html,\n  LitElement,\n  PropertyValues,\n  property,\n  PropertyDeclarations,\n  TemplateResult,\n} from \"lit-element\";\n\nimport \"../../components/entity/ha-state-label-badge\";\n// This one is for types\n// tslint:disable-next-line\nimport { HaStateLabelBadge } from \"../../components/entity/ha-state-label-badge\";\n\nimport applyThemesOnElement from \"../../common/dom/apply_themes_on_element\";\n\nimport { LovelaceViewConfig, LovelaceCardConfig } from \"../../data/lovelace\";\nimport { HomeAssistant } from \"../../types\";\nimport { classMap } from \"lit-html/directives/class-map\";\n\nimport { Lovelace, LovelaceCard } from \"./types\";\nimport { createCardElement } from \"./common/create-card-element\";\nimport { computeCardSize } from \"./common/compute-card-size\";\nimport { showEditCardDialog } from \"./editor/card-editor/show-edit-card-dialog\";\nimport { HuiErrorCard } from \"./cards/hui-error-card\";\n\nimport { computeRTL } from \"../../common/util/compute_rtl\";\n\nlet editCodeLoaded = false;\n\n// Find column with < 5 entities, else column with lowest count\nconst getColumnIndex = (columnEntityCount: number[], size: number) => {\n  let minIndex = 0;\n  for (let i = 0; i < columnEntityCount.length; i++) {\n    if (columnEntityCount[i] < 5) {\n      minIndex = i;\n      break;\n    }\n    if (columnEntityCount[i] < columnEntityCount[minIndex]) {\n      minIndex = i;\n    }\n  }\n\n  columnEntityCount[minIndex] += size;\n\n  return minIndex;\n};\n\nexport class HUIView extends LitElement {\n  @property() public hass?: HomeAssistant;\n  @property() public lovelace?: Lovelace;\n  @property() public columns?: number;\n  @property() public index?: number;\n  private _cards: Array<LovelaceCard | HuiErrorCard>;\n  private _badges: Array<{ element: HaStateLabelBadge; entityId: string }>;\n\n  static get properties(): PropertyDeclarations {\n    return {\n      hass: {},\n      lovelace: {},\n      columns: {},\n      index: {},\n      _cards: {},\n      _badges: {},\n    };\n  }\n\n  constructor() {\n    super();\n    this._cards = [];\n    this._badges = [];\n  }\n\n  // Public to make demo happy\n  public createCardElement(cardConfig: LovelaceCardConfig) {\n    const element = createCardElement(cardConfig) as LovelaceCard;\n    element.hass = this.hass;\n    element.addEventListener(\n      \"ll-rebuild\",\n      (ev) => {\n        // In edit mode let it go to hui-root and rebuild whole view.\n        if (!this.lovelace!.editMode) {\n          ev.stopPropagation();\n          this._rebuildCard(element, cardConfig);\n        }\n      },\n      { once: true }\n    );\n    return element;\n  }\n\n  protected render(): TemplateResult | void {\n    return html`\n      ${this.renderStyles()}\n      <div id=\"badges\"></div>\n      <div id=\"columns\"></div>\n      ${this.lovelace!.editMode\n        ? html`\n            <paper-fab\n              elevated=\"2\"\n              icon=\"hass:plus\"\n              title=\"${this.hass!.localize(\n                \"ui.panel.lovelace.editor.edit_card.add\"\n              )}\"\n              @click=\"${this._addCard}\"\n              class=\"${classMap({\n                rtl: computeRTL(this.hass!),\n              })}\"\n            ></paper-fab>\n          `\n        : \"\"}\n    `;\n  }\n\n  protected renderStyles(): TemplateResult {\n    return html`\n      <style>\n        :host {\n          display: block;\n          padding: 4px 4px 0;\n          transform: translateZ(0);\n          position: relative;\n          min-height: calc(100vh - 155px);\n        }\n\n        #badges {\n          margin: 8px 16px;\n          font-size: 85%;\n          text-align: center;\n        }\n\n        #columns {\n          display: flex;\n          flex-direction: row;\n          justify-content: center;\n        }\n\n        .column {\n          flex-basis: 0;\n          flex-grow: 1;\n          max-width: 500px;\n          overflow-x: hidden;\n        }\n\n        .column > * {\n          display: block;\n          margin: 4px 4px 8px;\n        }\n\n        paper-fab {\n          position: sticky;\n          float: right;\n          bottom: 16px;\n          right: 16px;\n          z-index: 1;\n        }\n\n        paper-fab.rtl {\n          float: left;\n          right: auto;\n          left: 16px;\n        }\n\n        @media (max-width: 500px) {\n          :host {\n            padding-left: 0;\n            padding-right: 0;\n          }\n\n          .column > * {\n            margin-left: 0;\n            margin-right: 0;\n          }\n        }\n\n        @media (max-width: 599px) {\n          .column {\n            max-width: 600px;\n          }\n        }\n      </style>\n    `;\n  }\n\n  protected updated(changedProperties: PropertyValues): void {\n    super.updated(changedProperties);\n\n    const lovelace = this.lovelace!;\n\n    if (lovelace.editMode && !editCodeLoaded) {\n      editCodeLoaded = true;\n      import(/* webpackChunkName: \"hui-view-editable\" */ \"./hui-view-editable\");\n    }\n\n    let editModeChanged = false;\n    let configChanged = false;\n\n    if (changedProperties.has(\"lovelace\")) {\n      const oldLovelace = changedProperties.get(\"lovelace\") as Lovelace;\n      editModeChanged =\n        !oldLovelace || lovelace.editMode !== oldLovelace.editMode;\n      configChanged = !oldLovelace || lovelace.config !== oldLovelace.config;\n    }\n\n    if (configChanged) {\n      this._createBadges(lovelace.config.views[this.index!]);\n    } else if (changedProperties.has(\"hass\")) {\n      this._badges.forEach((badge) => {\n        const { element, entityId } = badge;\n        element.hass = this.hass!;\n        element.state = this.hass!.states[entityId];\n      });\n    }\n\n    if (configChanged || editModeChanged || changedProperties.has(\"columns\")) {\n      this._createCards(lovelace.config.views[this.index!]);\n    } else if (changedProperties.has(\"hass\")) {\n      this._cards.forEach((element) => {\n        element.hass = this.hass;\n      });\n    }\n  }\n\n  private _addCard(): void {\n    showEditCardDialog(this, {\n      lovelace: this.lovelace!,\n      path: [this.index!],\n    });\n  }\n\n  private _createBadges(config: LovelaceViewConfig): void {\n    const root = this.shadowRoot!.getElementById(\"badges\")!;\n\n    while (root.lastChild) {\n      root.removeChild(root.lastChild);\n    }\n\n    if (!config || !config.badges || !Array.isArray(config.badges)) {\n      root.style.display = \"none\";\n      this._badges = [];\n      return;\n    }\n\n    const elements: HUIView[\"_badges\"] = [];\n    for (const entityId of config.badges) {\n      const element = document.createElement(\"ha-state-label-badge\");\n      element.hass = this.hass;\n      element.state = this.hass!.states[entityId];\n      elements.push({ element, entityId });\n      root.appendChild(element);\n    }\n    this._badges = elements;\n    root.style.display = elements.length > 0 ? \"block\" : \"none\";\n  }\n\n  private _createCards(config: LovelaceViewConfig): void {\n    const root = this.shadowRoot!.getElementById(\"columns\")!;\n\n    while (root.lastChild) {\n      root.removeChild(root.lastChild);\n    }\n\n    if (!config || !config.cards || !Array.isArray(config.cards)) {\n      this._cards = [];\n      return;\n    }\n\n    const elements: LovelaceCard[] = [];\n    const elementsToAppend: HTMLElement[] = [];\n    config.cards.forEach((cardConfig, cardIndex) => {\n      const element = this.createCardElement(cardConfig);\n      elements.push(element);\n\n      if (!this.lovelace!.editMode) {\n        elementsToAppend.push(element);\n        return;\n      }\n\n      const wrapper = document.createElement(\"hui-card-options\");\n      wrapper.hass = this.hass;\n      wrapper.lovelace = this.lovelace;\n      wrapper.path = [this.index!, cardIndex];\n      wrapper.appendChild(element);\n      elementsToAppend.push(wrapper);\n    });\n\n    let columns: HTMLElement[][] = [];\n    const columnEntityCount: number[] = [];\n    for (let i = 0; i < this.columns!; i++) {\n      columns.push([]);\n      columnEntityCount.push(0);\n    }\n\n    elements.forEach((el, index) => {\n      const cardSize = computeCardSize(el);\n      // Element to append might be the wrapped card when we're editing.\n      columns[getColumnIndex(columnEntityCount, cardSize)].push(\n        elementsToAppend[index]\n      );\n    });\n\n    // Remove empty columns\n    columns = columns.filter((val) => val.length > 0);\n\n    columns.forEach((column) => {\n      const columnEl = document.createElement(\"div\");\n      columnEl.classList.add(\"column\");\n      column.forEach((el) => columnEl.appendChild(el));\n      root.appendChild(columnEl);\n    });\n\n    this._cards = elements;\n\n    if (\"theme\" in config) {\n      applyThemesOnElement(root, this.hass!.themes, config.theme);\n    }\n  }\n\n  private _rebuildCard(\n    cardElToReplace: LovelaceCard,\n    config: LovelaceCardConfig\n  ): void {\n    const newCardEl = this.createCardElement(config);\n    cardElToReplace.parentElement!.replaceChild(newCardEl, cardElToReplace);\n    this._cards = this._cards!.map((curCardEl) =>\n      curCardEl === cardElToReplace ? newCardEl : curCardEl\n    );\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-view\": HUIView;\n  }\n}\n\ncustomElements.define(\"hui-view\", HUIView);\n","import {\n  html,\n  LitElement,\n  TemplateResult,\n  customElement,\n  property,\n  css,\n  CSSResult,\n} from \"lit-element\";\nimport \"@material/mwc-button\";\n\nimport \"../../../components/ha-icon\";\n\nimport { callService } from \"../common/call-service\";\nimport { EntityRow, CallServiceConfig } from \"../entity-rows/types\";\nimport { HomeAssistant } from \"../../../types\";\n\n@customElement(\"hui-call-service-row\")\nclass HuiCallServiceRow extends LitElement implements EntityRow {\n  public hass?: HomeAssistant;\n\n  @property() private _config?: CallServiceConfig;\n\n  public setConfig(config: CallServiceConfig): void {\n    if (!config || !config.name || !config.service) {\n      throw new Error(\"Error in card configuration.\");\n    }\n\n    this._config = { icon: \"hass:remote\", action_name: \"Run\", ...config };\n  }\n\n  protected render(): TemplateResult | void {\n    if (!this._config) {\n      return html``;\n    }\n\n    return html`\n      <ha-icon .icon=\"${this._config.icon}\"></ha-icon>\n      <div class=\"flex\">\n        <div>${this._config.name}</div>\n        <mwc-button @click=\"${this._callService}\"\n          >${this._config.action_name}</mwc-button\n        >\n      </div>\n    `;\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      :host {\n        display: flex;\n        align-items: center;\n      }\n      ha-icon {\n        padding: 8px;\n        color: var(--paper-item-icon-color);\n      }\n      .flex {\n        flex: 1;\n        overflow: hidden;\n        margin-left: 16px;\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n      }\n      .flex div {\n        white-space: nowrap;\n        overflow: hidden;\n        text-overflow: ellipsis;\n      }\n      mwc-button {\n        margin-right: -0.57em;\n      }\n    `;\n  }\n\n  private _callService() {\n    callService(this._config!, this.hass!);\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-call-service-row\": HuiCallServiceRow;\n  }\n}\n","import {\n  html,\n  LitElement,\n  TemplateResult,\n  customElement,\n  property,\n} from \"lit-element\";\n\nimport { EntityRow, DividerConfig } from \"../entity-rows/types\";\nimport { HomeAssistant } from \"../../../types\";\n\n@customElement(\"hui-divider-row\")\nclass HuiDividerRow extends LitElement implements EntityRow {\n  public hass?: HomeAssistant;\n\n  @property() private _config?: DividerConfig;\n\n  public setConfig(config): void {\n    if (!config) {\n      throw new Error(\"Error in card configuration.\");\n    }\n\n    this._config = {\n      style: {\n        height: \"1px\",\n        \"background-color\": \"var(--secondary-text-color)\",\n      },\n      ...config,\n    };\n  }\n\n  protected render(): TemplateResult | void {\n    if (!this._config) {\n      return html``;\n    }\n\n    const el = document.createElement(\"div\");\n\n    Object.keys(this._config.style).forEach((prop) => {\n      el.style.setProperty(prop, this._config!.style[prop]);\n    });\n\n    return html`\n      ${el}\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-divider-row\": HuiDividerRow;\n  }\n}\n","import {\n  html,\n  LitElement,\n  TemplateResult,\n  customElement,\n  property,\n  css,\n  CSSResult,\n} from \"lit-element\";\n\nimport { EntityRow, SectionConfig } from \"../entity-rows/types\";\nimport { HomeAssistant } from \"../../../types\";\n\nimport \"../../../components/ha-icon\";\n\n@customElement(\"hui-section-row\")\nclass HuiSectionRow extends LitElement implements EntityRow {\n  public hass?: HomeAssistant;\n\n  @property() private _config?: SectionConfig;\n\n  public setConfig(config: SectionConfig): void {\n    if (!config) {\n      throw new Error(\"Error in card configuration.\");\n    }\n\n    this._config = config;\n  }\n\n  protected render(): TemplateResult | void {\n    if (!this._config) {\n      return html``;\n    }\n\n    return html`\n      <div class=\"divider\"></div>\n      ${this._config.label\n        ? html`\n            <div class=\"label\">${this._config.label}</div>\n          `\n        : html``}\n    `;\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      .label {\n        color: var(--primary-color);\n        margin-left: 8px;\n        margin-bottom: 16px;\n        margin-top: 16px;\n      }\n      .divider {\n        height: 1px;\n        background-color: var(--secondary-text-color);\n        opacity: 0.25;\n        margin-left: -16px;\n        margin-right: -16px;\n        margin-top: 8px;\n      }\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-section-row\": HuiSectionRow;\n  }\n}\n","import {\n  html,\n  LitElement,\n  TemplateResult,\n  customElement,\n  property,\n  css,\n  CSSResult,\n} from \"lit-element\";\n\nimport { EntityRow, WeblinkConfig } from \"../entity-rows/types\";\nimport { HomeAssistant } from \"../../../types\";\n\nimport \"../../../components/ha-icon\";\n\n@customElement(\"hui-weblink-row\")\nclass HuiWeblinkRow extends LitElement implements EntityRow {\n  public hass?: HomeAssistant;\n\n  @property() private _config?: WeblinkConfig;\n\n  public setConfig(config: WeblinkConfig): void {\n    if (!config || !config.url) {\n      throw new Error(\"Invalid Configuration: 'url' required\");\n    }\n\n    this._config = {\n      icon: \"hass:link\",\n      name: config.url,\n      ...config,\n    };\n  }\n\n  protected render(): TemplateResult | void {\n    if (!this._config) {\n      return html``;\n    }\n\n    return html`\n      <a href=\"${this._config.url}\" target=\"_blank\">\n        <ha-icon .icon=\"${this._config.icon}\"></ha-icon>\n        <div>${this._config.name}</div>\n      </a>\n    `;\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      a {\n        display: flex;\n        align-items: center;\n        color: var(--primary-color);\n      }\n      ha-icon {\n        padding: 8px;\n        color: var(--paper-item-icon-color);\n      }\n      div {\n        flex: 1;\n        white-space: nowrap;\n        overflow: hidden;\n        text-overflow: ellipsis;\n        margin-left: 16px;\n      }\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-weblink-row\": HuiWeblinkRow;\n  }\n}\n","import \"@polymer/iron-image/iron-image\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport { EventsMixin } from \"../../mixins/events-mixin\";\n\n/*\n * @appliesMixin EventsMixin\n */\nclass HaEntityMarker extends EventsMixin(PolymerElement) {\n  static get template() {\n    return html`\n      <style include=\"iron-positioning\"></style>\n      <style>\n        .marker {\n          vertical-align: top;\n          position: relative;\n          display: block;\n          margin: 0 auto;\n          width: 2.5em;\n          text-align: center;\n          height: 2.5em;\n          line-height: 2.5em;\n          font-size: 1.5em;\n          border-radius: 50%;\n          border: 0.1em solid\n            var(--ha-marker-color, var(--default-primary-color));\n          color: rgb(76, 76, 76);\n          background-color: white;\n        }\n        iron-image {\n          border-radius: 50%;\n        }\n      </style>\n\n      <div class=\"marker\">\n        <template is=\"dom-if\" if=\"[[entityName]]\"\n          >[[entityName]]</template\n        >\n        <template is=\"dom-if\" if=\"[[entityPicture]]\">\n          <iron-image\n            sizing=\"cover\"\n            class=\"fit\"\n            src=\"[[entityPicture]]\"\n          ></iron-image>\n        </template>\n      </div>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: {\n        type: Object,\n      },\n\n      entityId: {\n        type: String,\n        value: \"\",\n      },\n\n      entityName: {\n        type: String,\n        value: null,\n      },\n\n      entityPicture: {\n        type: String,\n        value: null,\n      },\n    };\n  }\n\n  ready() {\n    super.ready();\n    this.addEventListener(\"click\", (ev) => this.badgeTap(ev));\n  }\n\n  badgeTap(ev) {\n    ev.stopPropagation();\n    if (this.entityId) {\n      this.fire(\"hass-more-info\", { entityId: this.entityId });\n    }\n  }\n}\n\ncustomElements.define(\"ha-entity-marker\", HaEntityMarker);\n","import { TemplateResult } from \"lit-element\";\n\ntype LoadedRoundSlider = Promise<{\n  roundSliderStyle: TemplateResult;\n  jQuery: any;\n}>;\n\nlet loaded: LoadedRoundSlider;\n\nexport const loadRoundslider = async (): LoadedRoundSlider => {\n  if (!loaded) {\n    loaded = import(/* webpackChunkName: \"jquery-roundslider\" */ \"./jquery.roundslider\");\n  }\n  return loaded;\n};\n"],"sourceRoot":""}