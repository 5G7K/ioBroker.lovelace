{"version":3,"sources":["webpack:///./src/common/config/is_component_loaded.ts","webpack:///./src/common/datetime/format_date_time.ts","webpack:///./src/components/ha-paper-dropdown-menu.ts","webpack:///./src/components/ha-push-notifications-toggle.js","webpack:///./src/data/notify_html5.ts","webpack:///./src/mixins/events-mixin.js","webpack:///./src/mixins/localize-mixin.js","webpack:///./src/panels/profile/ha-change-password-card.js","webpack:///./src/panels/profile/ha-long-lived-access-tokens-card.js","webpack:///./src/panels/profile/ha-mfa-modules-card.js","webpack:///./src/panels/profile/ha-panel-profile.js","webpack:///./src/panels/profile/ha-pick-language-row.js","webpack:///./src/panels/profile/ha-pick-theme-row.js","webpack:///./src/panels/profile/ha-push-notifications-row.js","webpack:///./src/panels/profile/ha-refresh-tokens-card.js","webpack:///./src/panels/profile/ha-settings-row.js"],"names":["isComponentLoaded","hass","component","config","components","indexOf","toLocaleStringSupportsOptions","Date","toLocaleString","e","name","dateObj","locales","year","month","day","hour","minute","fecha","format","paperDropdownClass","customElements","get","HaPaperDropdownClass","setTimeout","window","getComputedStyle","direction","style","textAlign","define","pushSupported","navigator","document","location","protocol","hostname","HaPushNotificationsToggle","serviceWorker","ready","reg","pushManager","getSubscription","then","subscription","loading","pushChecked","event","target","checked","subscribePushNotifications","unsubscribePushNotifications","userAgent","toLowerCase","browserName","prompt","getAppKey","applicationServerKey","subscribe","userVisibleOnly","sub","callApi","browser","message","unsubscribe","console","error","fire","disabled","html","type","Object","value","Boolean","Notification","permission","EventsMixin","PolymerElement","urlBase64ToUint8Array","base64String","padding","repeat","length","base64","replace","rawData","atob","outputArray","Uint8Array","i","charCodeAt","callWS","res","dedupingMixin","superClass","detail","options","fireEvent","node","localize","Function","computed","HaChangePasswordCard","addEventListener","ev","_statusMsg","keyCode","_changePassword","_currentPassword","_password1","_password2","_errorMsg","_loading","current_password","new_password","setProperties","String","LocalizeMixin","HaLongLivedTokens","refreshTokens","filter","tkn","reverse","created","formatDateTime","language","lifespan","client_name","token","alert","confirm","model","item","refresh_token_id","id","Array","_tokens","registeredDialog","HaMfaModulesCard","dialogShowEvent","dialogTag","dialogImport","mfaModuleId","module","dialogClosedCallback","_refreshCurrentUser","mfa_module_id","mfaModules","HaPanelProfile","_refreshRefreshTokens","_refreshTokens","user","credentials","some","cred","auth_provider_type","narrow","HaPickLanguageRow","translationMetadata","translations","keys","map","key","languageSelection","newVal","setLanguageSelection","observer","languages","HaPickThemeRow","themes","selectedTheme","concat","sort","selection","_hasThemes","Number","HaPushNotificationsRow","platformLoaded","pushSupported_","_platformLoaded","_pushSupported","_error","HaRefreshTokens","clientId","last_used_at","last_used_ip","client_id","HaSettingsRow","reflectToAttribute","threeLine"],"mappings":"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","file":"panel-profile.chunk.js","sourcesContent":["import { HomeAssistant } from \"../../types\";\n\n/** Return if a component is loaded. */\nexport default function isComponentLoaded(\n  hass: HomeAssistant,\n  component: string\n): boolean {\n  return hass && hass.config.components.indexOf(component) !== -1;\n}\n","import fecha from \"fecha\";\n\n// Check for support of native locale string options\nfunction toLocaleStringSupportsOptions() {\n  try {\n    new Date().toLocaleString(\"i\");\n  } catch (e) {\n    return e.name === \"RangeError\";\n  }\n  return false;\n}\n\nexport default (toLocaleStringSupportsOptions()\n  ? (dateObj: Date, locales: string) =>\n      dateObj.toLocaleString(locales, {\n        year: \"numeric\",\n        month: \"long\",\n        day: \"numeric\",\n        hour: \"numeric\",\n        minute: \"2-digit\",\n      })\n  : (dateObj: Date) => fecha.format(dateObj, \"haDateTime\"));\n","import \"@polymer/paper-dropdown-menu/paper-dropdown-menu\";\nimport { Constructor } from \"lit-element\";\nimport { PolymerElement } from \"@polymer/polymer\";\n\nconst paperDropdownClass = customElements.get(\n  \"paper-dropdown-menu\"\n) as Constructor<PolymerElement>;\n\n// patches paper drop down to properly support RTL - https://github.com/PolymerElements/paper-dropdown-menu/issues/183\nexport class HaPaperDropdownClass extends paperDropdownClass {\n  public ready() {\n    super.ready();\n    // wait to check for direction since otherwise direction is wrong even though top level is RTL\n    setTimeout(() => {\n      if (window.getComputedStyle(this).direction === \"rtl\") {\n        this.style.textAlign = \"right\";\n      }\n    }, 100);\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-paper-dropdown-menu\": HaPaperDropdownClass;\n  }\n}\n\ncustomElements.define(\"ha-paper-dropdown-menu\", HaPaperDropdownClass);\n","import \"@polymer/paper-toggle-button/paper-toggle-button\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport { getAppKey } from \"../data/notify_html5\";\n\nimport { EventsMixin } from \"../mixins/events-mixin\";\n\nexport const pushSupported =\n  \"serviceWorker\" in navigator &&\n  \"PushManager\" in window &&\n  (document.location.protocol === \"https:\" ||\n    document.location.hostname === \"localhost\" ||\n    document.location.hostname === \"127.0.0.1\");\n\n/*\n * @appliesMixin EventsMixin\n */\nclass HaPushNotificationsToggle extends EventsMixin(PolymerElement) {\n  static get template() {\n    return html`\n      <paper-toggle-button\n        disabled=\"[[_compDisabled(disabled, loading)]]\"\n        checked=\"{{pushChecked}}\"\n        on-change=\"handlePushChange\"\n      ></paper-toggle-button>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: { type: Object, value: null },\n      disabled: {\n        type: Boolean,\n        value: false,\n      },\n      pushChecked: {\n        type: Boolean,\n        value:\n          \"Notification\" in window && Notification.permission === \"granted\",\n      },\n      loading: {\n        type: Boolean,\n        value: true,\n      },\n    };\n  }\n\n  async connectedCallback() {\n    super.connectedCallback();\n\n    if (!pushSupported) return;\n\n    try {\n      const reg = await navigator.serviceWorker.ready;\n      if (!reg.pushManager) {\n        return;\n      }\n      reg.pushManager.getSubscription().then((subscription) => {\n        this.loading = false;\n        this.pushChecked = !!subscription;\n      });\n    } catch (err) {\n      // We don't set loading to `false` so we remain disabled\n    }\n  }\n\n  handlePushChange(event) {\n    // Somehow this is triggered on Safari on page load causing\n    // it to get into a loop and crash the page.\n    if (!pushSupported) return;\n\n    if (event.target.checked) {\n      this.subscribePushNotifications();\n    } else {\n      this.unsubscribePushNotifications();\n    }\n  }\n\n  async subscribePushNotifications() {\n    const reg = await navigator.serviceWorker.ready;\n    let sub;\n\n    try {\n      let browserName;\n      if (navigator.userAgent.toLowerCase().indexOf(\"firefox\") > -1) {\n        browserName = \"firefox\";\n      } else {\n        browserName = \"chrome\";\n      }\n\n      const name = prompt(\"What should this device be called ?\");\n      if (name == null) {\n        this.pushChecked = false;\n        return;\n      }\n\n      let applicationServerKey;\n      try {\n        applicationServerKey = await getAppKey(this.hass);\n      } catch (ex) {\n        applicationServerKey = null;\n      }\n\n      if (applicationServerKey) {\n        sub = await reg.pushManager.subscribe({\n          userVisibleOnly: true,\n          applicationServerKey,\n        });\n      } else {\n        sub = await reg.pushManager.subscribe({ userVisibleOnly: true });\n      }\n\n      await this.hass.callApi(\"POST\", \"notify.html5\", {\n        subscription: sub,\n        browser: browserName,\n        name,\n      });\n    } catch (err) {\n      const message = err.message || \"Notification registration failed.\";\n      if (sub) {\n        await sub.unsubscribe();\n      }\n\n      // eslint-disable-next-line\n      console.error(err);\n\n      this.fire(\"hass-notification\", { message });\n      this.pushChecked = false;\n    }\n  }\n\n  async unsubscribePushNotifications() {\n    const reg = await navigator.serviceWorker.ready;\n\n    try {\n      const sub = await reg.pushManager.getSubscription();\n\n      if (!sub) return;\n\n      await this.hass.callApi(\"DELETE\", \"notify.html5\", { subscription: sub });\n      await sub.unsubscribe();\n    } catch (err) {\n      const message =\n        err.message || \"Failed unsubscribing for push notifications.\";\n\n      // eslint-disable-next-line\n      console.error(\"Error in unsub push\", err);\n\n      this.fire(\"hass-notification\", { message });\n      this.pushChecked = true;\n    }\n  }\n\n  _compDisabled(disabled, loading) {\n    return disabled || loading;\n  }\n}\n\ncustomElements.define(\n  \"ha-push-notifications-toggle\",\n  HaPushNotificationsToggle\n);\n","import { HomeAssistant } from \"../types\";\n\nfunction urlBase64ToUint8Array(base64String) {\n  const padding = \"=\".repeat((4 - (base64String.length % 4)) % 4);\n  const base64 = (base64String + padding).replace(/-/g, \"+\").replace(/_/g, \"/\");\n\n  const rawData = window.atob(base64);\n  const outputArray = new Uint8Array(rawData.length);\n\n  for (let i = 0; i < rawData.length; ++i) {\n    outputArray[i] = rawData.charCodeAt(i);\n  }\n  return outputArray;\n}\n\nexport const getAppKey = async (hass: HomeAssistant) => {\n  const res = await hass.callWS<string>({\n    type: \"notify/html5/appkey\",\n  });\n  return res ? urlBase64ToUint8Array(res) : null;\n};\n","import { dedupingMixin } from \"@polymer/polymer/lib/utils/mixin\";\n\nimport { fireEvent } from \"../common/dom/fire_event\";\n\n// Polymer legacy event helpers used courtesy of the Polymer project.\n//\n// Copyright (c) 2017 The Polymer Authors. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without\n// modification, are permitted provided that the following conditions are\n// met:\n//\n//    * Redistributions of source code must retain the above copyright\n// notice, this list of conditions and the following disclaimer.\n//    * Redistributions in binary form must reproduce the above\n// copyright notice, this list of conditions and the following disclaimer\n// in the documentation and/or other materials provided with the\n// distribution.\n//    * Neither the name of Google Inc. nor the names of its\n// contributors may be used to endorse or promote products derived from\n// this software without specific prior written permission.\n//\n// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n// \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n// LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n// A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n// OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n// SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n// LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n// DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n// THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n// (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n// OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n\n/* @polymerMixin */\nexport const EventsMixin = dedupingMixin(\n  (superClass) =>\n    class extends superClass {\n      /**\n   * Dispatches a custom event with an optional detail value.\n   *\n   * @param {string} type Name of event type.\n   * @param {*=} detail Detail value containing event-specific\n   *   payload.\n   * @param {{ bubbles: (boolean|undefined),\n               cancelable: (boolean|undefined),\n                composed: (boolean|undefined) }=}\n    *  options Object specifying options.  These may include:\n    *  `bubbles` (boolean, defaults to `true`),\n    *  `cancelable` (boolean, defaults to false), and\n    *  `node` on which to fire the event (HTMLElement, defaults to `this`).\n    * @return {Event} The new event that was fired.\n    */\n      fire(type, detail, options) {\n        options = options || {};\n        return fireEvent(options.node || this, type, detail, options);\n      }\n    }\n);\n","import { dedupingMixin } from \"@polymer/polymer/lib/utils/mixin\";\n/**\n * Polymer Mixin to enable a localize function powered by language/resources from hass object.\n *\n * @polymerMixin\n */\nexport default dedupingMixin(\n  (superClass) =>\n    class extends superClass {\n      static get properties() {\n        return {\n          hass: Object,\n\n          /**\n           * Translates a string to the current `language`. Any parameters to the\n           * string should be passed in order, as follows:\n           * `localize(stringKey, param1Name, param1Value, param2Name, param2Value)`\n           */\n          localize: {\n            type: Function,\n            computed: \"__computeLocalize(hass.localize)\",\n          },\n        };\n      }\n\n      __computeLocalize(localize) {\n        return localize;\n      }\n    }\n);\n","import \"@material/mwc-button\";\nimport \"@polymer/paper-dialog/paper-dialog\";\nimport \"@polymer/paper-spinner/paper-spinner\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\nimport \"../../components/ha-card\";\n\nimport LocalizeMixin from \"../../mixins/localize-mixin\";\n\nimport \"../../resources/ha-style\";\n\n/*\n * @appliesMixin LocalizeMixin\n */\nclass HaChangePasswordCard extends LocalizeMixin(PolymerElement) {\n  static get template() {\n    return html`\n      <style include=\"ha-style\">\n        .error {\n          color: red;\n        }\n        .status {\n          color: var(--primary-color);\n        }\n        .error,\n        .status {\n          position: absolute;\n          top: -4px;\n        }\n        .currentPassword {\n          margin-top: -4px;\n        }\n      </style>\n      <div>\n        <ha-card\n          header=\"[[localize('ui.panel.profile.change_password.header')]]\"\n        >\n          <div class=\"card-content\">\n            <template is=\"dom-if\" if=\"[[_errorMsg]]\">\n              <div class=\"error\">[[_errorMsg]]</div>\n            </template>\n            <template is=\"dom-if\" if=\"[[_statusMsg]]\">\n              <div class=\"status\">[[_statusMsg]]</div>\n            </template>\n            <paper-input\n              class=\"currentPassword\"\n              label=\"[[localize('ui.panel.profile.change_password.current_password')]]\"\n              type=\"password\"\n              value=\"{{_currentPassword}}\"\n              required\n              auto-validate\n              error-message=\"[[localize('ui.panel.profile.change_password.error_required')]]\"\n            ></paper-input>\n            <template is=\"dom-if\" if=\"[[_currentPassword]]\">\n              <paper-input\n                label=\"[[localize('ui.panel.profile.change_password.new_password')]]\"\n                type=\"password\"\n                value=\"{{_password1}}\"\n                required\n                auto-validate\n                error-message=\"[[localize('ui.panel.profile.change_password.error_required')]]\"\n              ></paper-input>\n              <paper-input\n                label=\"[[localize('ui.panel.profile.change_password.confirm_new_password')]]\"\n                type=\"password\"\n                value=\"{{_password2}}\"\n                required\n                auto-validate\n                error-message=\"[[localize('ui.panel.profile.change_password.error_required')]]\"\n              ></paper-input>\n            </template>\n          </div>\n          <div class=\"card-actions\">\n            <template is=\"dom-if\" if=\"[[_loading]]\">\n              <div><paper-spinner active></paper-spinner></div>\n            </template>\n            <template is=\"dom-if\" if=\"[[!_loading]]\">\n              <mwc-button on-click=\"_changePassword\"\n                >[[localize('ui.panel.profile.change_password.submit')]]</mwc-button\n              >\n            </template>\n          </div>\n        </ha-card>\n      </div>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n\n      _loading: {\n        type: Boolean,\n        value: false,\n      },\n\n      // Error message when can't talk to server etc\n      _statusMsg: String,\n      _errorMsg: String,\n\n      _currentPassword: String,\n      _password1: String,\n      _password2: String,\n    };\n  }\n\n  ready() {\n    super.ready();\n    this.addEventListener(\"keypress\", (ev) => {\n      this._statusMsg = null;\n      if (ev.keyCode === 13) {\n        this._changePassword();\n      }\n    });\n  }\n\n  async _changePassword() {\n    this._statusMsg = null;\n    if (!this._currentPassword || !this._password1 || !this._password2) return;\n\n    if (this._password1 !== this._password2) {\n      this._errorMsg = \"New password confirmation doesn't match\";\n      return;\n    }\n\n    if (this._currentPassword === this._password1) {\n      this._errorMsg = \"New password must be different than current password\";\n      return;\n    }\n\n    this._loading = true;\n    this._errorMsg = null;\n\n    try {\n      await this.hass.callWS({\n        type: \"config/auth_provider/homeassistant/change_password\",\n        current_password: this._currentPassword,\n        new_password: this._password1,\n      });\n\n      this.setProperties({\n        _statusMsg: \"Password changed successfully\",\n        _currentPassword: null,\n        _password1: null,\n        _password2: null,\n      });\n    } catch (err) {\n      this._errorMsg = err.message;\n    }\n\n    this._loading = false;\n  }\n}\n\ncustomElements.define(\"ha-change-password-card\", HaChangePasswordCard);\n","import \"@material/mwc-button\";\n\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\nimport { EventsMixin } from \"../../mixins/events-mixin\";\nimport LocalizeMixin from \"../../mixins/localize-mixin\";\nimport formatDateTime from \"../../common/datetime/format_date_time\";\nimport \"../../components/ha-card\";\n\nimport \"../../resources/ha-style\";\n\nimport \"./ha-settings-row\";\n\n/*\n * @appliesMixin EventsMixin\n * @appliesMixin LocalizeMixin\n */\nclass HaLongLivedTokens extends LocalizeMixin(EventsMixin(PolymerElement)) {\n  static get template() {\n    return html`\n      <style include=\"ha-style\">\n        .card-content {\n          margin: -1em 0;\n        }\n        a {\n          color: var(--primary-color);\n        }\n        paper-icon-button {\n          color: var(--primary-text-color);\n        }\n      </style>\n      <ha-card\n        header=\"[[localize('ui.panel.profile.long_lived_access_tokens.header')]]\"\n      >\n        <div class=\"card-content\">\n          <p>\n            [[localize('ui.panel.profile.long_lived_access_tokens.description')]]\n            <a\n              href=\"https://developers.home-assistant.io/docs/en/auth_api.html#making-authenticated-requests\"\n              target=\"_blank\"\n            >\n              [[localize('ui.panel.profile.long_lived_access_tokens.learn_auth_requests')]]\n            </a>\n          </p>\n          <template is=\"dom-if\" if=\"[[!_tokens.length]]\">\n            <p>\n              [[localize('ui.panel.profile.long_lived_access_tokens.empty_state')]]\n            </p>\n          </template>\n        </div>\n        <template is=\"dom-repeat\" items=\"[[_tokens]]\">\n          <ha-settings-row two-line>\n            <span slot=\"heading\">[[item.client_name]]</span>\n            <div slot=\"description\">[[_formatCreatedAt(item.created_at)]]</div>\n            <paper-icon-button\n              icon=\"hass:delete\"\n              on-click=\"_handleDelete\"\n            ></paper-icon-button>\n          </ha-settings-row>\n        </template>\n        <div class=\"card-actions\">\n          <mwc-button on-click=\"_handleCreate\">\n            [[localize('ui.panel.profile.long_lived_access_tokens.create')]]\n          </mwc-button>\n        </div>\n      </ha-card>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      refreshTokens: Array,\n      _tokens: {\n        type: Array,\n        computed: \"_computeTokens(refreshTokens)\",\n      },\n    };\n  }\n\n  _computeTokens(refreshTokens) {\n    return refreshTokens\n      .filter((tkn) => tkn.type === \"long_lived_access_token\")\n      .reverse();\n  }\n\n  _formatTitle(name) {\n    return this.localize(\n      \"ui.panel.profile.long_lived_access_tokens.token_title\",\n      \"name\",\n      name\n    );\n  }\n\n  _formatCreatedAt(created) {\n    return this.localize(\n      \"ui.panel.profile.long_lived_access_tokens.created_at\",\n      \"date\",\n      formatDateTime(new Date(created), this.hass.language)\n    );\n  }\n\n  async _handleCreate() {\n    const name = prompt(\n      this.localize(\"ui.panel.profile.long_lived_access_tokens.prompt_name\")\n    );\n    if (!name) return;\n    try {\n      const token = await this.hass.callWS({\n        type: \"auth/long_lived_access_token\",\n        lifespan: 3650,\n        client_name: name,\n      });\n      prompt(\n        this.localize(\n          \"ui.panel.profile.long_lived_access_tokens.prompt_copy_token\"\n        ),\n        token\n      );\n      this.fire(\"hass-refresh-tokens\");\n    } catch (err) {\n      // eslint-disable-next-line\n      console.error(err);\n      alert(\n        this.localize(\"ui.panel.profile.long_lived_access_tokens.create_failed\")\n      );\n    }\n  }\n\n  async _handleDelete(ev) {\n    if (\n      !confirm(\n        this.localize(\n          \"ui.panel.profile.long_lived_access_tokens.confirm_delete\",\n          \"name\",\n          ev.model.item.client_name\n        )\n      )\n    ) {\n      return;\n    }\n    try {\n      await this.hass.callWS({\n        type: \"auth/delete_refresh_token\",\n        refresh_token_id: ev.model.item.id,\n      });\n      this.fire(\"hass-refresh-tokens\");\n    } catch (err) {\n      // eslint-disable-next-line\n      console.error(err);\n      alert(\n        this.localize(\"ui.panel.profile.long_lived_access_tokens.delete_failed\")\n      );\n    }\n  }\n}\n\ncustomElements.define(\"ha-long-lived-access-tokens-card\", HaLongLivedTokens);\n","import \"@material/mwc-button\";\nimport \"@polymer/paper-item/paper-item-body\";\nimport \"@polymer/paper-item/paper-item\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\nimport \"../../components/ha-card\";\n\nimport \"../../resources/ha-style\";\n\nimport { EventsMixin } from \"../../mixins/events-mixin\";\nimport LocalizeMixin from \"../../mixins/localize-mixin\";\n\nlet registeredDialog = false;\n\n/*\n * @appliesMixin EventsMixin\n * @appliesMixin LocalizeMixin\n */\nclass HaMfaModulesCard extends EventsMixin(LocalizeMixin(PolymerElement)) {\n  static get template() {\n    return html`\n      <style include=\"iron-flex ha-style\">\n        .error {\n          color: red;\n        }\n        .status {\n          color: var(--primary-color);\n        }\n        .error,\n        .status {\n          position: absolute;\n          top: -4px;\n        }\n        mwc-button {\n          margin-right: -0.57em;\n        }\n      </style>\n      <ha-card header=\"[[localize('ui.panel.profile.mfa.header')]]\">\n        <template is=\"dom-repeat\" items=\"[[mfaModules]]\" as=\"module\">\n          <paper-item>\n            <paper-item-body two-line=\"\">\n              <div>[[module.name]]</div>\n              <div secondary=\"\">[[module.id]]</div>\n            </paper-item-body>\n            <template is=\"dom-if\" if=\"[[module.enabled]]\">\n              <mwc-button on-click=\"_disable\"\n                >[[localize('ui.panel.profile.mfa.disable')]]</mwc-button\n              >\n            </template>\n            <template is=\"dom-if\" if=\"[[!module.enabled]]\">\n              <mwc-button on-click=\"_enable\"\n                >[[localize('ui.panel.profile.mfa.enable')]]</mwc-button\n              >\n            </template>\n          </paper-item>\n        </template>\n      </ha-card>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n\n      _loading: {\n        type: Boolean,\n        value: false,\n      },\n\n      // Error message when can't talk to server etc\n      _statusMsg: String,\n      _errorMsg: String,\n\n      mfaModules: Array,\n    };\n  }\n\n  connectedCallback() {\n    super.connectedCallback();\n\n    if (!registeredDialog) {\n      registeredDialog = true;\n      this.fire(\"register-dialog\", {\n        dialogShowEvent: \"show-mfa-module-setup-flow\",\n        dialogTag: \"ha-mfa-module-setup-flow\",\n        dialogImport: () =>\n          import(/* webpackChunkName: \"ha-mfa-module-setup-flow\" */ \"./ha-mfa-module-setup-flow\"),\n      });\n    }\n  }\n\n  _enable(ev) {\n    this.fire(\"show-mfa-module-setup-flow\", {\n      hass: this.hass,\n      mfaModuleId: ev.model.module.id,\n      dialogClosedCallback: () => this._refreshCurrentUser(),\n    });\n  }\n\n  _disable(ev) {\n    if (\n      !confirm(\n        this.localize(\n          \"ui.panel.profile.mfa.confirm_disable\",\n          \"name\",\n          ev.model.module.name\n        )\n      )\n    ) {\n      return;\n    }\n\n    const mfaModuleId = ev.model.module.id;\n\n    this.hass\n      .callWS({\n        type: \"auth/depose_mfa\",\n        mfa_module_id: mfaModuleId,\n      })\n      .then(() => {\n        this._refreshCurrentUser();\n      });\n  }\n\n  _refreshCurrentUser() {\n    this.fire(\"hass-refresh-current-user\");\n  }\n}\n\ncustomElements.define(\"ha-mfa-modules-card\", HaMfaModulesCard);\n","import \"@polymer/app-layout/app-header-layout/app-header-layout\";\nimport \"@polymer/app-layout/app-header/app-header\";\nimport \"@polymer/paper-item/paper-item-body\";\nimport \"@polymer/paper-item/paper-item\";\nimport \"@material/mwc-button\";\nimport \"@polymer/app-layout/app-toolbar/app-toolbar\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport \"../../components/ha-card\";\nimport \"../../components/ha-menu-button\";\nimport \"../../resources/ha-style\";\n\nimport { EventsMixin } from \"../../mixins/events-mixin\";\nimport LocalizeMixin from \"../../mixins/localize-mixin\";\n\nimport \"./ha-change-password-card\";\nimport \"./ha-mfa-modules-card\";\nimport \"./ha-refresh-tokens-card\";\nimport \"./ha-long-lived-access-tokens-card\";\n\nimport \"./ha-pick-language-row\";\nimport \"./ha-pick-theme-row\";\nimport \"./ha-push-notifications-row\";\n\n/*\n * @appliesMixin EventsMixin\n * @appliesMixin LocalizeMixin\n */\nclass HaPanelProfile extends EventsMixin(LocalizeMixin(PolymerElement)) {\n  static get template() {\n    return html`\n      <style include=\"ha-style\">\n        :host {\n          -ms-user-select: initial;\n          -webkit-user-select: initial;\n          -moz-user-select: initial;\n        }\n\n        .content {\n          display: block;\n          max-width: 600px;\n          margin: 0 auto;\n        }\n\n        .content > * {\n          display: block;\n          margin: 24px 0;\n        }\n      </style>\n\n      <app-header-layout has-scrolling-region>\n        <app-header slot=\"header\" fixed>\n          <app-toolbar>\n            <ha-menu-button></ha-menu-button>\n            <div main-title>[[localize('panel.profile')]]</div>\n          </app-toolbar>\n        </app-header>\n\n        <div class=\"content\">\n          <ha-card header=\"[[hass.user.name]]\">\n            <div class=\"card-content\">\n              [[localize('ui.panel.profile.current_user', 'fullName',\n              hass.user.name)]]\n              <template is=\"dom-if\" if=\"[[hass.user.is_owner]]\"\n                >[[localize('ui.panel.profile.is_owner')]]</template\n              >\n            </div>\n\n            <hello-world hass=\"[[hass]]\"></hello-world>\n\n            <ha-pick-language-row\n              narrow=\"[[narrow]]\"\n              hass=\"[[hass]]\"\n            ></ha-pick-language-row>\n            <ha-pick-theme-row\n              narrow=\"[[narrow]]\"\n              hass=\"[[hass]]\"\n            ></ha-pick-theme-row>\n            <ha-push-notifications-row\n              narrow=\"[[narrow]]\"\n              hass=\"[[hass]]\"\n            ></ha-push-notifications-row>\n\n            <div class=\"card-actions\">\n              <mwc-button class=\"warning\" on-click=\"_handleLogOut\"\n                >[[localize('ui.panel.profile.logout')]]</mwc-button\n              >\n            </div>\n          </ha-card>\n\n          <template is=\"dom-if\" if=\"[[_canChangePassword(hass.user)]]\">\n            <ha-change-password-card hass=\"[[hass]]\"></ha-change-password-card>\n          </template>\n\n          <ha-mfa-modules-card\n            hass=\"[[hass]]\"\n            mfa-modules=\"[[hass.user.mfa_modules]]\"\n          ></ha-mfa-modules-card>\n\n          <ha-refresh-tokens-card\n            hass=\"[[hass]]\"\n            refresh-tokens=\"[[_refreshTokens]]\"\n            on-hass-refresh-tokens=\"_refreshRefreshTokens\"\n          ></ha-refresh-tokens-card>\n\n          <ha-long-lived-access-tokens-card\n            hass=\"[[hass]]\"\n            refresh-tokens=\"[[_refreshTokens]]\"\n            on-hass-refresh-tokens=\"_refreshRefreshTokens\"\n          ></ha-long-lived-access-tokens-card>\n        </div>\n      </app-header-layout>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      narrow: Boolean,\n      _refreshTokens: Array,\n    };\n  }\n\n  connectedCallback() {\n    super.connectedCallback();\n    this._refreshRefreshTokens();\n  }\n\n  async _refreshRefreshTokens() {\n    this._refreshTokens = await this.hass.callWS({\n      type: \"auth/refresh_tokens\",\n    });\n  }\n\n  _handleLogOut() {\n    this.fire(\"hass-logout\");\n  }\n\n  _canChangePassword(user) {\n    return user.credentials.some(\n      (cred) => cred.auth_provider_type === \"homeassistant\"\n    );\n  }\n}\n\ncustomElements.define(\"ha-panel-profile\", HaPanelProfile);\n","import \"@polymer/paper-item/paper-item\";\nimport \"@polymer/paper-listbox/paper-listbox\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport \"../../components/ha-paper-dropdown-menu\";\n\nimport { EventsMixin } from \"../../mixins/events-mixin\";\nimport LocalizeMixin from \"../../mixins/localize-mixin\";\n\nimport \"./ha-settings-row\";\n\n/*\n * @appliesMixin LocalizeMixin\n * @appliesMixin EventsMixin\n */\nclass HaPickLanguageRow extends LocalizeMixin(EventsMixin(PolymerElement)) {\n  static get template() {\n    return html`\n      <style>\n        a {\n          color: var(--primary-color);\n        }\n        paper-item {\n          direction: ltr;\n        }\n        paper-item[is-rtl] {\n          direction: rtl;\n        }\n      </style>\n      <ha-settings-row narrow=\"[[narrow]]\">\n        <span slot=\"heading\"\n          >[[localize('ui.panel.profile.language.header')]]</span\n        >\n        <span slot=\"description\">\n          <a\n            href=\"https://developers.home-assistant.io/docs/en/internationalization_translation.html\"\n            target=\"_blank\"\n            >[[localize('ui.panel.profile.language.link_promo')]]</a\n          >\n        </span>\n        <ha-paper-dropdown-menu\n          label=\"[[localize('ui.panel.profile.language.dropdown_label')]]\"\n          dynamic-align=\"\"\n        >\n          <paper-listbox\n            slot=\"dropdown-content\"\n            attr-for-selected=\"language-tag\"\n            selected=\"{{languageSelection}}\"\n          >\n            <template is=\"dom-repeat\" items=\"[[languages]]\">\n              <paper-item language-tag$=\"[[item.key]]\" is-rtl$=\"[[item.isRTL]]\">\n                [[item.nativeName]]\n              </paper-item>\n            </template>\n          </paper-listbox>\n        </ha-paper-dropdown-menu>\n      </ha-settings-row>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      narrow: Boolean,\n      languageSelection: {\n        type: String,\n        observer: \"languageSelectionChanged\",\n      },\n      languages: {\n        type: Array,\n        computed: \"computeLanguages(hass)\",\n      },\n    };\n  }\n\n  static get observers() {\n    return [\"setLanguageSelection(language)\"];\n  }\n\n  computeLanguages(hass) {\n    if (!hass || !hass.translationMetadata) {\n      return [];\n    }\n    const translations = hass.translationMetadata.translations;\n    return Object.keys(translations).map((key) => ({\n      key,\n      ...translations[key],\n    }));\n  }\n\n  setLanguageSelection(language) {\n    this.languageSelection = language;\n  }\n\n  languageSelectionChanged(newVal) {\n    // Only fire event if language was changed. This prevents select updates when\n    // responding to hass changes.\n    if (newVal !== this.hass.language) {\n      this.fire(\"hass-language-select\", { language: newVal });\n    }\n  }\n\n  ready() {\n    super.ready();\n    if (this.hass && this.hass.language) {\n      this.setLanguageSelection(this.hass.language);\n    }\n  }\n}\n\ncustomElements.define(\"ha-pick-language-row\", HaPickLanguageRow);\n","import \"@polymer/paper-item/paper-item\";\nimport \"@polymer/paper-listbox/paper-listbox\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport \"../../components/ha-paper-dropdown-menu\";\n\nimport { EventsMixin } from \"../../mixins/events-mixin\";\nimport LocalizeMixin from \"../../mixins/localize-mixin\";\n\n/*\n * @appliesMixin LocalizeMixin\n * @appliesMixin EventsMixin\n */\nclass HaPickThemeRow extends LocalizeMixin(EventsMixin(PolymerElement)) {\n  static get template() {\n    return html`\n      <style>\n        a {\n          color: var(--primary-color);\n        }\n      </style>\n      <ha-settings-row narrow=\"[[narrow]]\">\n        <span slot=\"heading\"\n          >[[localize('ui.panel.profile.themes.header')]]</span\n        >\n        <span slot=\"description\">\n          <template is=\"dom-if\" if=\"[[!_hasThemes]]\">\n            [[localize('ui.panel.profile.themes.error_no_theme')]]\n          </template>\n          <a\n            href=\"https://www.home-assistant.io/components/frontend/#defining-themes\"\n            target=\"_blank\"\n            >[[localize('ui.panel.profile.themes.link_promo')]]</a\n          >\n        </span>\n        <ha-paper-dropdown-menu\n          label=\"[[localize('ui.panel.profile.themes.dropdown_label')]]\"\n          dynamic-align\n          disabled=\"[[!_hasThemes]]\"\n        >\n          <paper-listbox slot=\"dropdown-content\" selected=\"{{selectedTheme}}\">\n            <template is=\"dom-repeat\" items=\"[[themes]]\" as=\"theme\">\n              <paper-item>[[theme]]</paper-item>\n            </template>\n          </paper-listbox>\n        </ha-paper-dropdown-menu>\n      </ha-settings-row>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      narrow: Boolean,\n      _hasThemes: {\n        type: Boolean,\n        computed: \"_compHasThemes(hass)\",\n      },\n      themes: {\n        type: Array,\n        computed: \"_computeThemes(hass)\",\n      },\n      selectedTheme: {\n        type: Number,\n      },\n    };\n  }\n\n  static get observers() {\n    return [\"selectionChanged(hass, selectedTheme)\"];\n  }\n\n  _compHasThemes(hass) {\n    return (\n      hass.themes &&\n      hass.themes.themes &&\n      Object.keys(hass.themes.themes).length\n    );\n  }\n\n  ready() {\n    super.ready();\n    if (\n      this.hass.selectedTheme &&\n      this.themes.indexOf(this.hass.selectedTheme) > 0\n    ) {\n      this.selectedTheme = this.themes.indexOf(this.hass.selectedTheme);\n    } else if (!this.hass.selectedTheme) {\n      this.selectedTheme = 0;\n    }\n  }\n\n  _computeThemes(hass) {\n    if (!hass) return [];\n    return [\"Backend-selected\", \"default\"].concat(\n      Object.keys(hass.themes.themes).sort()\n    );\n  }\n\n  selectionChanged(hass, selection) {\n    if (selection > 0 && selection < this.themes.length) {\n      if (hass.selectedTheme !== this.themes[selection]) {\n        this.fire(\"settheme\", this.themes[selection]);\n      }\n    } else if (selection === 0 && hass.selectedTheme !== \"\") {\n      this.fire(\"settheme\", \"\");\n    }\n  }\n}\n\ncustomElements.define(\"ha-pick-theme-row\", HaPickThemeRow);\n","import \"@polymer/iron-flex-layout/iron-flex-layout-classes\";\nimport \"@polymer/iron-label/iron-label\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport isComponentLoaded from \"../../common/config/is_component_loaded\";\nimport { pushSupported } from \"../../components/ha-push-notifications-toggle\";\n\nimport LocalizeMixin from \"../../mixins/localize-mixin\";\n\nimport \"./ha-settings-row\";\n\n/*\n * @appliesMixin LocalizeMixin\n */\nclass HaPushNotificationsRow extends LocalizeMixin(PolymerElement) {\n  static get template() {\n    return html`\n      <style>\n        a {\n          color: var(--primary-color);\n        }\n      </style>\n      <ha-settings-row narrow=\"[[narrow]]\">\n        <span slot=\"heading\"\n          >[[localize('ui.panel.profile.push_notifications.header')]]</span\n        >\n        <span slot=\"description\">\n          [[_description(_platformLoaded, _pushSupported)]]\n          <a\n            href=\"https://www.home-assistant.io/components/notify.html5/\"\n            target=\"_blank\"\n            >[[localize('ui.panel.profile.push_notifications.link_promo')]]</a\n          >\n        </span>\n        <ha-push-notifications-toggle\n          hass=\"[[hass]]\"\n          disabled=\"[[_error]]\"\n        ></ha-push-notifications-toggle>\n      </ha-settings-row>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      narrow: Boolean,\n      _platformLoaded: {\n        type: Boolean,\n        computed: \"_compPlatformLoaded(hass)\",\n      },\n      _pushSupported: {\n        type: Boolean,\n        value: pushSupported,\n      },\n      _error: {\n        type: Boolean,\n        computed: \"_compError(_platformLoaded, _pushSupported)\",\n      },\n    };\n  }\n\n  _compPlatformLoaded(hass) {\n    return isComponentLoaded(hass, \"notify.html5\");\n  }\n\n  _compError(platformLoaded, pushSupported_) {\n    return !platformLoaded || !pushSupported_;\n  }\n\n  _description(platformLoaded, pushSupported_) {\n    let key;\n    if (!pushSupported_) {\n      key = \"error_use_https\";\n    } else if (!platformLoaded) {\n      key = \"error_load_platform\";\n    } else {\n      key = \"description\";\n    }\n    return this.localize(`ui.panel.profile.push_notifications.${key}`);\n  }\n}\n\ncustomElements.define(\"ha-push-notifications-row\", HaPushNotificationsRow);\n","import \"@polymer/paper-icon-button/paper-icon-button\";\nimport \"@polymer/paper-tooltip/paper-tooltip\";\n\nimport \"../../components/ha-card\";\n\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\nimport { EventsMixin } from \"../../mixins/events-mixin\";\nimport LocalizeMixin from \"../../mixins/localize-mixin\";\nimport formatDateTime from \"../../common/datetime/format_date_time\";\n\nimport \"./ha-settings-row\";\n\n/*\n * @appliesMixin EventsMixin\n * @appliesMixin LocalizeMixin\n */\nclass HaRefreshTokens extends LocalizeMixin(EventsMixin(PolymerElement)) {\n  static get template() {\n    return html`\n      <style>\n        paper-icon-button {\n          color: var(--primary-text-color);\n        }\n        paper-icon-button[disabled] {\n          color: var(--disabled-text-color);\n        }\n      </style>\n      <ha-card header=\"[[localize('ui.panel.profile.refresh_tokens.header')]]\">\n        <div class=\"card-content\">\n          [[localize('ui.panel.profile.refresh_tokens.description')]]\n        </div>\n        <template is=\"dom-repeat\" items=\"[[_computeTokens(refreshTokens)]]\">\n          <ha-settings-row three-line>\n            <span slot=\"heading\">[[_formatTitle(item.client_id)]]</span>\n            <div slot=\"description\">[[_formatCreatedAt(item.created_at)]]</div>\n            <div slot=\"description\">[[_formatLastUsed(item)]]</div>\n            <div>\n              <template is=\"dom-if\" if=\"[[item.is_current]]\">\n                <paper-tooltip position=\"left\"\n                  >[[localize('ui.panel.profile.refresh_tokens.current_token_tooltip')]]</paper-tooltip\n                >\n              </template>\n              <paper-icon-button\n                icon=\"hass:delete\"\n                on-click=\"_handleDelete\"\n                disabled=\"[[item.is_current]]\"\n              ></paper-icon-button>\n            </div>\n          </ha-settings-row>\n        </template>\n      </ha-card>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      refreshTokens: Array,\n    };\n  }\n\n  _computeTokens(refreshTokens) {\n    return refreshTokens.filter((tkn) => tkn.type === \"normal\").reverse();\n  }\n\n  _formatTitle(clientId) {\n    return this.localize(\n      \"ui.panel.profile.refresh_tokens.token_title\",\n      \"clientId\",\n      clientId\n    );\n  }\n\n  _formatCreatedAt(created) {\n    return this.localize(\n      \"ui.panel.profile.refresh_tokens.created_at\",\n      \"date\",\n      formatDateTime(new Date(created), this.hass.language)\n    );\n  }\n\n  _formatLastUsed(item) {\n    return item.last_used_at\n      ? this.localize(\n          \"ui.panel.profile.refresh_tokens.last_used\",\n          \"date\",\n          formatDateTime(new Date(item.last_used_at), this.hass.language),\n          \"location\",\n          item.last_used_ip\n        )\n      : this.localize(\"ui.panel.profile.refresh_tokens.not_used\");\n  }\n\n  async _handleDelete(ev) {\n    if (\n      !confirm(\n        this.localize(\n          \"ui.panel.profile.refresh_tokens.confirm_delete\",\n          \"name\",\n          ev.model.item.client_id\n        )\n      )\n    ) {\n      return;\n    }\n    try {\n      await this.hass.callWS({\n        type: \"auth/delete_refresh_token\",\n        refresh_token_id: ev.model.item.id,\n      });\n      this.fire(\"hass-refresh-tokens\");\n    } catch (err) {\n      // eslint-disable-next-line\n      console.error(err);\n      alert(this.localize(\"ui.panel.profile.refresh_tokens.delete_failed\"));\n    }\n  }\n}\n\ncustomElements.define(\"ha-refresh-tokens-card\", HaRefreshTokens);\n","import { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nclass HaSettingsRow extends PolymerElement {\n  static get template() {\n    return html`\n      <style>\n        :host {\n          display: flex;\n          padding: 0 16px;\n          align-content: normal;\n          align-self: auto;\n          align-items: center;\n        }\n        :host([narrow]) {\n          align-items: normal;\n          flex-direction: column;\n          border-top: 1px solid var(--divider-color);\n          padding-bottom: 8px;\n        }\n        paper-item-body {\n          padding-right: 16px;\n        }\n      </style>\n      <paper-item-body two-line$=\"[[!threeLine]]\" three-line$=\"[[threeLine]]\">\n        <slot name=\"heading\"></slot>\n        <div secondary><slot name=\"description\"></slot></div>\n      </paper-item-body>\n      <slot></slot>\n    `;\n  }\n\n  static get properties() {\n    return {\n      narrow: {\n        type: Boolean,\n        reflectToAttribute: true,\n      },\n      threeLine: {\n        type: Boolean,\n        value: false,\n      },\n    };\n  }\n}\n\ncustomElements.define(\"ha-settings-row\", HaSettingsRow);\n"],"sourceRoot":""}