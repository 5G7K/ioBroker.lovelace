{"version":3,"sources":["webpack:///./src/cards/ha-media_player-card.js","webpack:///./src/cards/ha-weather-card.js","webpack:///./src/common/entity/extract_views.ts","webpack:///./src/common/entity/get_group_entities.ts","webpack:///./src/common/entity/get_view_entities.ts","webpack:///./src/common/entity/split_by_groups.ts","webpack:///./src/components/entity/ha-state-label-badge.ts","webpack:///./src/components/ha-label-badge.ts","webpack:///./src/components/ha-start-voice-button.js","webpack:///./src/data/media-player.ts"],"names":["HaMediaPlayerCard","playerObj","oldPlayerObj","isPlaying","showProgress","_positionTracking","setInterval","updatePlaybackPosition","clearInterval","picture","stateObj","attributes","entity_picture","oldPicture","$","cover","style","backgroundImage","substr","_coverShowing","_coverLoadError","fetchMediaPlayerThumbnailWithCache","hass","entity_id","contentType","content_type","content","playbackPosition","currentProgress","coverShowing","coverLoadError","cls","isOff","isIdle","media_content_type","supportsTurnOn","supportsTurnOff","HassMediaPlayerEntity","localize","primaryTitle","state","supportsPause","hasMediaControl","isPaused","supportsPlay","computeStateName","ev","stopPropagation","nextTrack","fire","entityId","mediaPlayPause","previousTrack","togglePower","html","Object","type","computed","observer","playbackControlIcon","String","Number","Boolean","value","LocalizeMixin","EventsMixin","PolymerElement","customElements","define","HaWeatherCard","config","forecast","Array","rtl","reflectToAttribute","cardinalDirections","weatherIcons","cloudy","fog","hail","lightning","partlycloudy","pouring","rainy","snowy","sunny","windy","addEventListener","_onClick","slice","measure","lengthUnit","unit_system","length","name","condition","degree","degreenum","parseInt","isFinite","speed","getUnit","bearing","cardinalDirection","windBearingToText","toLowerCase","item","data","date","Date","toLocaleDateString","language","weekday","toLocaleTimeString","hour","computeRTL","extractViews","entities","views","keys","forEach","entity","view","push","sort","view1","view2","DEFAULT_VIEW_ENTITY_ID","order","getGroupEntities","group","result","getViewEntities","viewEntities","hidden","computeDomain","groupEntities","grEntityId","grEntity","splitByGroups","groups","ungrouped","HaStateLabelBadge","customElement","property","_connected","startInterval","domain","computeStateDomain","classMap","_computeValue","_computeIcon","_computeLabel","_timerTimeRemaining","changedProperties","fireEvent","has","domainIcon","stateIcon","includes","secondsToDuration","unit_of_measurement","_updateRemaining","undefined","calculateTimerRemaining","window","timerTimeRemaining","css","LitElement","HaLabelBadge","big","icon","image","label","description","shadowRoot","getElementById","HaStartVoiceButton","isComponentLoaded","dialogImport","dialogTag","canListen","notify","SUPPORT_PAUSE","SUPPORT_NEXT_TRACK","SUPPORTS_PLAY","OFF_STATES","timeCachePromiseFunc","fetchMediaPlayerThumbnail","callWS"],"mappings":"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","file":"panel-kiosk~panel-lovelace~panel-states.chunk.js","sourcesContent":["import \"@polymer/iron-flex-layout/iron-flex-layout-classes\";\nimport \"@polymer/paper-icon-button/paper-icon-button\";\nimport \"@polymer/paper-progress/paper-progress\";\nimport \"@polymer/paper-styles/element-styles/paper-material-styles\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport HassMediaPlayerEntity from \"../util/hass-media-player-model\";\nimport { fetchMediaPlayerThumbnailWithCache } from \"../data/media-player\";\n\nimport computeStateName from \"../common/entity/compute_state_name\";\nimport { EventsMixin } from \"../mixins/events-mixin\";\nimport LocalizeMixin from \"../mixins/localize-mixin\";\n\n/*\n * @appliesMixin LocalizeMixin\n * @appliesMixin EventsMixin\n */\nclass HaMediaPlayerCard extends LocalizeMixin(EventsMixin(PolymerElement)) {\n  static get template() {\n    return html`\n      <style\n        include=\"paper-material-styles iron-flex iron-flex-alignment iron-positioning\"\n      >\n        :host {\n          @apply --paper-material-elevation-1;\n          display: block;\n          position: relative;\n          font-size: 0px;\n          border-radius: 2px;\n        }\n\n        .banner {\n          position: relative;\n          background-color: white;\n          border-top-left-radius: 2px;\n          border-top-right-radius: 2px;\n        }\n\n        .banner:before {\n          display: block;\n          content: \"\";\n          width: 100%;\n          /* removed .25% from 16:9 ratio to fix YT black bars */\n          padding-top: 56%;\n          transition: padding-top 0.8s;\n        }\n\n        .banner.no-cover {\n          background-position: center center;\n          background-image: url(/static/images/card_media_player_bg.png);\n          background-repeat: no-repeat;\n          background-color: var(--primary-color);\n        }\n\n        .banner.content-type-music:before {\n          padding-top: 100%;\n        }\n\n        .banner.content-type-game:before {\n          padding-top: 100%;\n        }\n\n        .banner.no-cover:before {\n          padding-top: 88px;\n        }\n\n        .banner > .cover {\n          position: absolute;\n          top: 0;\n          left: 0;\n          right: 0;\n          bottom: 0;\n\n          border-top-left-radius: 2px;\n          border-top-right-radius: 2px;\n\n          background-position: center center;\n          background-size: cover;\n          transition: opacity 0.8s;\n          opacity: 1;\n        }\n\n        .banner.is-off > .cover {\n          opacity: 0;\n        }\n\n        .banner > .caption {\n          @apply --paper-font-caption;\n\n          position: absolute;\n          left: 0;\n          right: 0;\n          bottom: 0;\n\n          background-color: rgba(0, 0, 0, var(--dark-secondary-opacity));\n\n          padding: 8px 16px;\n\n          font-size: 14px;\n          font-weight: 500;\n          color: white;\n\n          transition: background-color 0.5s;\n        }\n\n        .banner.is-off > .caption {\n          background-color: initial;\n        }\n\n        .banner > .caption .title {\n          @apply --paper-font-common-nowrap;\n          font-size: 1.2em;\n          margin: 8px 0 4px;\n        }\n\n        .progress {\n          width: 100%;\n          height: var(--paper-progress-height, 4px);\n          margin-top: calc(-1 * var(--paper-progress-height, 4px));\n          --paper-progress-active-color: var(--accent-color);\n          --paper-progress-container-color: rgba(200, 200, 200, 0.5);\n        }\n\n        .controls {\n          position: relative;\n          @apply --paper-font-body1;\n          padding: 8px;\n          border-bottom-left-radius: 2px;\n          border-bottom-right-radius: 2px;\n          background-color: var(--paper-card-background-color, white);\n        }\n\n        .controls paper-icon-button {\n          width: 44px;\n          height: 44px;\n        }\n\n        .playback-controls {\n          direction: ltr;\n        }\n\n        paper-icon-button {\n          opacity: var(--dark-primary-opacity);\n        }\n\n        paper-icon-button[disabled] {\n          opacity: var(--dark-disabled-opacity);\n        }\n\n        paper-icon-button.primary {\n          width: 56px !important;\n          height: 56px !important;\n          background-color: var(--primary-color);\n          color: white;\n          border-radius: 50%;\n          padding: 8px;\n          transition: background-color 0.5s;\n        }\n\n        paper-icon-button.primary[disabled] {\n          background-color: rgba(0, 0, 0, var(--dark-disabled-opacity));\n        }\n\n        [invisible] {\n          visibility: hidden !important;\n        }\n      </style>\n\n      <div\n        class$=\"[[computeBannerClasses(playerObj, _coverShowing, _coverLoadError)]]\"\n      >\n        <div class=\"cover\" id=\"cover\"></div>\n\n        <div class=\"caption\">\n          [[_computeStateName(stateObj)]]\n          <div class=\"title\">[[computePrimaryText(localize, playerObj)]]</div>\n          [[playerObj.secondaryTitle]]<br />\n        </div>\n      </div>\n\n      <paper-progress\n        max=\"[[stateObj.attributes.media_duration]]\"\n        value=\"[[playbackPosition]]\"\n        hidden$=\"[[computeHideProgress(playerObj)]]\"\n        class=\"progress\"\n      ></paper-progress>\n\n      <div class=\"controls layout horizontal justified\">\n        <paper-icon-button\n          icon=\"hass:power\"\n          on-click=\"handleTogglePower\"\n          invisible$=\"[[computeHidePowerButton(playerObj)]]\"\n          class=\"self-center secondary\"\n        ></paper-icon-button>\n\n        <div class=\"playback-controls\">\n          <paper-icon-button\n            icon=\"hass:skip-previous\"\n            invisible$=\"[[!playerObj.supportsPreviousTrack]]\"\n            disabled=\"[[playerObj.isOff]]\"\n            on-click=\"handlePrevious\"\n          ></paper-icon-button>\n          <paper-icon-button\n            class=\"primary\"\n            icon=\"[[computePlaybackControlIcon(playerObj)]]\"\n            invisible$=\"[[!computePlaybackControlIcon(playerObj)]]\"\n            disabled=\"[[playerObj.isOff]]\"\n            on-click=\"handlePlaybackControl\"\n          ></paper-icon-button>\n          <paper-icon-button\n            icon=\"hass:skip-next\"\n            invisible$=\"[[!playerObj.supportsNextTrack]]\"\n            disabled=\"[[playerObj.isOff]]\"\n            on-click=\"handleNext\"\n          ></paper-icon-button>\n        </div>\n\n        <paper-icon-button\n          icon=\"hass:dots-vertical\"\n          on-click=\"handleOpenMoreInfo\"\n          class=\"self-center secondary\"\n        ></paper-icon-button>\n      </div>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      stateObj: Object,\n      playerObj: {\n        type: Object,\n        computed: \"computePlayerObj(hass, stateObj)\",\n        observer: \"playerObjChanged\",\n      },\n      playbackControlIcon: {\n        type: String,\n        computed: \"computePlaybackControlIcon(playerObj)\",\n      },\n      playbackPosition: Number,\n      _coverShowing: {\n        type: Boolean,\n        value: false,\n      },\n      _coverLoadError: {\n        type: Boolean,\n        value: false,\n      },\n    };\n  }\n\n  async playerObjChanged(playerObj, oldPlayerObj) {\n    if (playerObj.isPlaying && playerObj.showProgress) {\n      if (!this._positionTracking) {\n        this._positionTracking = setInterval(\n          () => this.updatePlaybackPosition(),\n          1000\n        );\n      }\n    } else if (this._positionTracking) {\n      clearInterval(this._positionTracking);\n      this._positionTracking = null;\n    }\n    if (playerObj.showProgress) {\n      this.updatePlaybackPosition();\n    }\n\n    const picture = playerObj.stateObj.attributes.entity_picture;\n    const oldPicture =\n      oldPlayerObj && oldPlayerObj.stateObj.attributes.entity_picture;\n\n    if (picture !== oldPicture && !picture) {\n      this.$.cover.style.backgroundImage = \"\";\n      return;\n    }\n    if (picture === oldPicture) {\n      return;\n    }\n\n    // We have a new picture url\n    // If entity picture is non-relative, we use that url directly.\n    if (picture.substr(0, 1) !== \"/\") {\n      this._coverShowing = true;\n      this._coverLoadError = false;\n      this.$.cover.style.backgroundImage = `url(${picture})`;\n      return;\n    }\n\n    try {\n      const {\n        content_type: contentType,\n        content,\n      } = await fetchMediaPlayerThumbnailWithCache(\n        this.hass,\n        playerObj.stateObj.entity_id\n      );\n      this._coverShowing = true;\n      this._coverLoadError = false;\n      this.$.cover.style.backgroundImage = `url(data:${contentType};base64,${content})`;\n    } catch (err) {\n      this._coverShowing = false;\n      this._coverLoadError = true;\n      this.$.cover.style.backgroundImage = \"\";\n    }\n  }\n\n  updatePlaybackPosition() {\n    this.playbackPosition = this.playerObj.currentProgress;\n  }\n\n  computeBannerClasses(playerObj, coverShowing, coverLoadError) {\n    var cls = \"banner\";\n\n    if (playerObj.isOff || playerObj.isIdle) {\n      cls += \" is-off no-cover\";\n    } else if (\n      !playerObj.stateObj.attributes.entity_picture ||\n      coverLoadError ||\n      !coverShowing\n    ) {\n      cls += \" no-cover\";\n    } else if (playerObj.stateObj.attributes.media_content_type === \"music\") {\n      cls += \" content-type-music\";\n    } else if (playerObj.stateObj.attributes.media_content_type === \"game\") {\n      cls += \" content-type-game\";\n    }\n    return cls;\n  }\n\n  computeHideProgress(playerObj) {\n    return !playerObj.showProgress;\n  }\n\n  computeHidePowerButton(playerObj) {\n    return playerObj.isOff\n      ? !playerObj.supportsTurnOn\n      : !playerObj.supportsTurnOff;\n  }\n\n  computePlayerObj(hass, stateObj) {\n    return new HassMediaPlayerEntity(hass, stateObj);\n  }\n\n  computePrimaryText(localize, playerObj) {\n    return (\n      playerObj.primaryTitle ||\n      localize(`state.media_player.${playerObj.stateObj.state}`) ||\n      localize(`state.default.${playerObj.stateObj.state}`) ||\n      playerObj.stateObj.state\n    );\n  }\n\n  computePlaybackControlIcon(playerObj) {\n    if (playerObj.isPlaying) {\n      return playerObj.supportsPause ? \"hass:pause\" : \"hass:stop\";\n    }\n    if (playerObj.hasMediaControl || playerObj.isOff || playerObj.isIdle) {\n      if (\n        playerObj.hasMediaControl &&\n        playerObj.supportsPause &&\n        !playerObj.isPaused\n      ) {\n        return \"hass:play-pause\";\n      }\n      return playerObj.supportsPlay ? \"hass:play\" : null;\n    }\n    return \"\";\n  }\n\n  _computeStateName(stateObj) {\n    return computeStateName(stateObj);\n  }\n\n  handleNext(ev) {\n    ev.stopPropagation();\n    this.playerObj.nextTrack();\n  }\n\n  handleOpenMoreInfo(ev) {\n    ev.stopPropagation();\n    this.fire(\"hass-more-info\", { entityId: this.stateObj.entity_id });\n  }\n\n  handlePlaybackControl(ev) {\n    ev.stopPropagation();\n    this.playerObj.mediaPlayPause();\n  }\n\n  handlePrevious(ev) {\n    ev.stopPropagation();\n    this.playerObj.previousTrack();\n  }\n\n  handleTogglePower(ev) {\n    ev.stopPropagation();\n    this.playerObj.togglePower();\n  }\n}\ncustomElements.define(\"ha-media_player-card\", HaMediaPlayerCard);\n","import { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport computeStateName from \"../common/entity/compute_state_name\";\n\nimport \"../components/ha-card\";\nimport \"../components/ha-icon\";\n\nimport { EventsMixin } from \"../mixins/events-mixin\";\nimport LocalizeMixin from \"../mixins/localize-mixin\";\nimport { computeRTL } from \"../common/util/compute_rtl\";\n\n/*\n * @appliesMixin LocalizeMixin\n */\nclass HaWeatherCard extends LocalizeMixin(EventsMixin(PolymerElement)) {\n  static get template() {\n    return html`\n      <style>\n        :host {\n          cursor: pointer;\n        }\n\n        .content {\n          padding: 0 20px 20px;\n        }\n\n        ha-icon {\n          color: var(--paper-item-icon-color);\n        }\n\n        .header {\n          font-family: var(--paper-font-headline_-_font-family);\n          -webkit-font-smoothing: var(\n            --paper-font-headline_-_-webkit-font-smoothing\n          );\n          font-size: var(--paper-font-headline_-_font-size);\n          font-weight: var(--paper-font-headline_-_font-weight);\n          letter-spacing: var(--paper-font-headline_-_letter-spacing);\n          line-height: var(--paper-font-headline_-_line-height);\n          text-rendering: var(\n            --paper-font-common-expensive-kerning_-_text-rendering\n          );\n          opacity: var(--dark-primary-opacity);\n          padding: 24px 16px 16px;\n          display: flex;\n          align-items: baseline;\n        }\n\n        .name {\n          margin-left: 16px;\n          font-size: 16px;\n          color: var(--secondary-text-color);\n        }\n\n        :host([rtl]) .name {\n          margin-left: 0px;\n          margin-right: 16px;\n        }\n\n        .now {\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n          flex-wrap: wrap;\n        }\n\n        .main {\n          display: flex;\n          align-items: center;\n          margin-right: 32px;\n        }\n\n        :host([rtl]) .main {\n          margin-right: 0px;\n        }\n\n        .main ha-icon {\n          --iron-icon-height: 72px;\n          --iron-icon-width: 72px;\n          margin-right: 8px;\n        }\n\n        :host([rtl]) .main ha-icon {\n          margin-right: 0px;\n        }\n\n        .main .temp {\n          font-size: 52px;\n          line-height: 1em;\n          position: relative;\n        }\n\n        :host([rtl]) .main .temp {\n          direction: ltr;\n          margin-right: 28px;\n        }\n\n        .main .temp span {\n          font-size: 24px;\n          line-height: 1em;\n          position: absolute;\n          top: 4px;\n        }\n\n        .measurand {\n          display: inline-block;\n        }\n\n        :host([rtl]) .measurand {\n          direction: ltr;\n        }\n\n        .forecast {\n          margin-top: 16px;\n          display: flex;\n          justify-content: space-between;\n        }\n\n        .forecast div {\n          flex: 0 0 auto;\n          text-align: center;\n        }\n\n        .forecast .icon {\n          margin: 4px 0;\n          text-align: center;\n        }\n\n        :host([rtl]) .forecast .temp {\n          direction: ltr;\n        }\n\n        .weekday {\n          font-weight: bold;\n        }\n\n        .attributes,\n        .templow,\n        .precipitation {\n          color: var(--secondary-text-color);\n        }\n\n        :host([rtl]) .precipitation {\n          direction: ltr;\n        }\n      </style>\n      <ha-card>\n        <div class=\"header\">\n          [[computeState(stateObj.state, localize)]]\n          <div class=\"name\">[[computeName(stateObj)]]</div>\n        </div>\n        <div class=\"content\">\n          <div class=\"now\">\n            <div class=\"main\">\n              <template is=\"dom-if\" if=\"[[showWeatherIcon(stateObj.state)]]\">\n                <ha-icon icon=\"[[getWeatherIcon(stateObj.state)]]\"></ha-icon>\n              </template>\n              <div class=\"temp\">\n                [[stateObj.attributes.temperature]]<span\n                  >[[getUnit('temperature')]]</span\n                >\n              </div>\n            </div>\n            <div class=\"attributes\">\n              <template\n                is=\"dom-if\"\n                if=\"[[_showValue(stateObj.attributes.pressure)]]\"\n              >\n                <div>\n                  [[localize('ui.card.weather.attributes.air_pressure')]]:\n                  <span class=\"measurand\">\n                    [[stateObj.attributes.pressure]] [[getUnit('air_pressure')]]\n                  </span>\n                </div>\n              </template>\n              <template\n                is=\"dom-if\"\n                if=\"[[_showValue(stateObj.attributes.humidity)]]\"\n              >\n                <div>\n                  [[localize('ui.card.weather.attributes.humidity')]]:\n                  <span class=\"measurand\"\n                    >[[stateObj.attributes.humidity]] %</span\n                  >\n                </div>\n              </template>\n              <template\n                is=\"dom-if\"\n                if=\"[[_showValue(stateObj.attributes.wind_speed)]]\"\n              >\n                <div>\n                  [[localize('ui.card.weather.attributes.wind_speed')]]:\n                  <span class=\"measurand\">\n                    [[getWindSpeed(stateObj.attributes.wind_speed)]]\n                  </span>\n                  [[getWindBearing(stateObj.attributes.wind_bearing, localize)]]\n                </div>\n              </template>\n            </div>\n          </div>\n          <template is=\"dom-if\" if=\"[[forecast]]\">\n            <div class=\"forecast\">\n              <template is=\"dom-repeat\" items=\"[[forecast]]\">\n                <div>\n                  <div class=\"weekday\">\n                    [[computeDate(item.datetime)]]<br />\n                    <template is=\"dom-if\" if=\"[[!_showValue(item.templow)]]\">\n                      [[computeTime(item.datetime)]]\n                    </template>\n                  </div>\n                  <template is=\"dom-if\" if=\"[[_showValue(item.condition)]]\">\n                    <div class=\"icon\">\n                      <ha-icon\n                        icon=\"[[getWeatherIcon(item.condition)]]\"\n                      ></ha-icon>\n                    </div>\n                  </template>\n                  <div class=\"temp\">\n                    [[item.temperature]] [[getUnit('temperature')]]\n                  </div>\n                  <template is=\"dom-if\" if=\"[[_showValue(item.templow)]]\">\n                    <div class=\"templow\">\n                      [[item.templow]] [[getUnit('temperature')]]\n                    </div>\n                  </template>\n                  <template is=\"dom-if\" if=\"[[_showValue(item.precipitation)]]\">\n                    <div class=\"precipitation\">\n                      [[item.precipitation]] [[getUnit('precipitation')]]\n                    </div>\n                  </template>\n                </div>\n              </template>\n            </div>\n          </template>\n        </div>\n      </ha-card>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      config: Object,\n      stateObj: Object,\n      forecast: {\n        type: Array,\n        computed: \"computeForecast(stateObj.attributes.forecast)\",\n      },\n      rtl: {\n        type: Boolean,\n        reflectToAttribute: true,\n        computed: \"_computeRTL(hass)\",\n      },\n    };\n  }\n\n  constructor() {\n    super();\n    this.cardinalDirections = [\n      \"N\",\n      \"NNE\",\n      \"NE\",\n      \"ENE\",\n      \"E\",\n      \"ESE\",\n      \"SE\",\n      \"SSE\",\n      \"S\",\n      \"SSW\",\n      \"SW\",\n      \"WSW\",\n      \"W\",\n      \"WNW\",\n      \"NW\",\n      \"NNW\",\n      \"N\",\n    ];\n    this.weatherIcons = {\n      \"clear-night\": \"hass:weather-night\",\n      cloudy: \"hass:weather-cloudy\",\n      fog: \"hass:weather-fog\",\n      hail: \"hass:weather-hail\",\n      lightning: \"hass:weather-lightning\",\n      \"lightning-rainy\": \"hass:weather-lightning-rainy\",\n      partlycloudy: \"hass:weather-partlycloudy\",\n      pouring: \"hass:weather-pouring\",\n      rainy: \"hass:weather-rainy\",\n      snowy: \"hass:weather-snowy\",\n      \"snowy-rainy\": \"hass:weather-snowy-rainy\",\n      sunny: \"hass:weather-sunny\",\n      windy: \"hass:weather-windy\",\n      \"windy-variant\": \"hass:weather-windy-variant\",\n    };\n  }\n\n  ready() {\n    this.addEventListener(\"click\", this._onClick);\n    super.ready();\n  }\n\n  _onClick() {\n    this.fire(\"hass-more-info\", { entityId: this.stateObj.entity_id });\n  }\n\n  computeForecast(forecast) {\n    return forecast && forecast.slice(0, 5);\n  }\n\n  getUnit(measure) {\n    const lengthUnit = this.hass.config.unit_system.length || \"\";\n    switch (measure) {\n      case \"air_pressure\":\n        return lengthUnit === \"km\" ? \"hPa\" : \"inHg\";\n      case \"length\":\n        return lengthUnit;\n      case \"precipitation\":\n        return lengthUnit === \"km\" ? \"mm\" : \"in\";\n      default:\n        return this.hass.config.unit_system[measure] || \"\";\n    }\n  }\n\n  computeState(state, localize) {\n    return localize(`state.weather.${state}`) || state;\n  }\n\n  computeName(stateObj) {\n    return (this.config && this.config.name) || computeStateName(stateObj);\n  }\n\n  showWeatherIcon(condition) {\n    return condition in this.weatherIcons;\n  }\n\n  getWeatherIcon(condition) {\n    return this.weatherIcons[condition];\n  }\n\n  windBearingToText(degree) {\n    const degreenum = parseInt(degree);\n    if (isFinite(degreenum)) {\n      return this.cardinalDirections[(((degreenum + 11.25) / 22.5) | 0) % 16];\n    }\n    return degree;\n  }\n\n  getWindSpeed(speed) {\n    return `${speed} ${this.getUnit(\"length\")}/h`;\n  }\n\n  getWindBearing(bearing, localize) {\n    if (bearing != null) {\n      const cardinalDirection = this.windBearingToText(bearing);\n      return `(${localize(\n        `ui.card.weather.cardinal_direction.${cardinalDirection.toLowerCase()}`\n      ) || cardinalDirection})`;\n    }\n    return ``;\n  }\n\n  _showValue(item) {\n    return typeof item !== \"undefined\" && item !== null;\n  }\n\n  computeDate(data) {\n    const date = new Date(data);\n    return date.toLocaleDateString(this.hass.language, { weekday: \"short\" });\n  }\n\n  computeTime(data) {\n    const date = new Date(data);\n    return date.toLocaleTimeString(this.hass.language, { hour: \"numeric\" });\n  }\n\n  _computeRTL(hass) {\n    return computeRTL(hass);\n  }\n}\ncustomElements.define(\"ha-weather-card\", HaWeatherCard);\n","import { HassEntities } from \"home-assistant-js-websocket\";\nimport { DEFAULT_VIEW_ENTITY_ID } from \"../const\";\nimport { GroupEntity } from \"../../types\";\n\n// Return an ordered array of available views\nexport default function extractViews(entities: HassEntities): GroupEntity[] {\n  const views: GroupEntity[] = [];\n\n  Object.keys(entities).forEach((entityId) => {\n    const entity = entities[entityId];\n    if (entity.attributes.view) {\n      views.push(entity as GroupEntity);\n    }\n  });\n\n  views.sort((view1, view2) => {\n    if (view1.entity_id === DEFAULT_VIEW_ENTITY_ID) {\n      return -1;\n    }\n    if (view2.entity_id === DEFAULT_VIEW_ENTITY_ID) {\n      return 1;\n    }\n    return view1.attributes.order - view2.attributes.order;\n  });\n\n  return views;\n}\n","import { HassEntities } from \"home-assistant-js-websocket\";\nimport { GroupEntity } from \"../../types\";\n\nexport default function getGroupEntities(\n  entities: HassEntities,\n  group: GroupEntity\n) {\n  const result = {};\n\n  group.attributes.entity_id.forEach((entityId) => {\n    const entity = entities[entityId];\n\n    if (entity) {\n      result[entity.entity_id] = entity;\n    }\n  });\n\n  return result;\n}\n","import { HassEntities } from \"home-assistant-js-websocket\";\nimport computeDomain from \"./compute_domain\";\nimport getGroupEntities from \"./get_group_entities\";\nimport { GroupEntity } from \"../../types\";\n\n// Return an object containing all entities that the view will show\n// including embedded groups.\nexport default function getViewEntities(\n  entities: HassEntities,\n  view: GroupEntity\n): HassEntities {\n  const viewEntities = {};\n\n  view.attributes.entity_id.forEach((entityId) => {\n    const entity = entities[entityId];\n\n    if (entity && !entity.attributes.hidden) {\n      viewEntities[entity.entity_id] = entity;\n\n      if (computeDomain(entity.entity_id) === \"group\") {\n        const groupEntities = getGroupEntities(entities, entity as GroupEntity);\n\n        Object.keys(groupEntities).forEach((grEntityId) => {\n          const grEntity = groupEntities[grEntityId];\n\n          if (!grEntity.attributes.hidden) {\n            viewEntities[grEntityId] = grEntity;\n          }\n        });\n      }\n    }\n  });\n\n  return viewEntities;\n}\n","import computeDomain from \"./compute_domain\";\nimport { HassEntities } from \"home-assistant-js-websocket\";\nimport { GroupEntity } from \"../../types\";\n\n// Split a collection into a list of groups and a 'rest' list of ungrouped\n// entities.\n// Returns { groups: [], ungrouped: {} }\nexport default function splitByGroups(entities: HassEntities) {\n  const groups: GroupEntity[] = [];\n  const ungrouped: HassEntities = {};\n\n  Object.keys(entities).forEach((entityId) => {\n    const entity = entities[entityId];\n\n    if (computeDomain(entityId) === \"group\") {\n      groups.push(entity as GroupEntity);\n    } else {\n      ungrouped[entityId] = entity;\n    }\n  });\n\n  groups.forEach((group) =>\n    group.attributes.entity_id.forEach((entityId) => {\n      delete ungrouped[entityId];\n    })\n  );\n\n  return { groups, ungrouped };\n}\n","import {\n  LitElement,\n  html,\n  PropertyValues,\n  TemplateResult,\n  css,\n  CSSResult,\n  customElement,\n  property,\n} from \"lit-element\";\n\nimport { HassEntity } from \"home-assistant-js-websocket\";\nimport { classMap } from \"lit-html/directives/class-map\";\nimport { fireEvent } from \"../../common/dom/fire_event\";\nimport { HomeAssistant } from \"../../types\";\n\nimport computeStateDomain from \"../../common/entity/compute_state_domain\";\nimport computeStateName from \"../../common/entity/compute_state_name\";\nimport domainIcon from \"../../common/entity/domain_icon\";\nimport stateIcon from \"../../common/entity/state_icon\";\nimport timerTimeRemaining from \"../../common/entity/timer_time_remaining\";\nimport secondsToDuration from \"../../common/datetime/seconds_to_duration\";\n\nimport \"../ha-label-badge\";\n\n@customElement(\"ha-state-label-badge\")\nexport class HaStateLabelBadge extends LitElement {\n  @property() public hass?: HomeAssistant;\n\n  @property() public state?: HassEntity;\n\n  @property() private _timerTimeRemaining?: number;\n\n  private _connected?: boolean;\n\n  private _updateRemaining?: number;\n\n  public connectedCallback(): void {\n    super.connectedCallback();\n    this._connected = true;\n    this.startInterval(this.state);\n  }\n\n  public disconnectedCallback(): void {\n    super.disconnectedCallback();\n    this._connected = false;\n    this.clearInterval();\n  }\n\n  protected render(): TemplateResult | void {\n    const state = this.state;\n\n    if (!state) {\n      return html`\n        <ha-label-badge\n          class=\"warning\"\n          label=\"${this.hass!.localize(\"state_badge.default.error\")}\"\n          icon=\"hass:alert\"\n          description=\"${this.hass!.localize(\n            \"state_badge.default.entity_not_found\"\n          )}\"\n        ></ha-label-badge>\n      `;\n    }\n\n    const domain = computeStateDomain(state);\n\n    return html`\n      <ha-label-badge\n        class=\"${classMap({\n          [domain]: true,\n          \"has-unit_of_measurement\": \"unit_of_measurement\" in state.attributes,\n        })}\"\n        .value=\"${this._computeValue(domain, state)}\"\n        .icon=\"${this._computeIcon(domain, state)}\"\n        .image=\"${state.attributes.entity_picture}\"\n        .label=\"${this._computeLabel(domain, state, this._timerTimeRemaining)}\"\n        .description=\"${computeStateName(state)}\"\n      ></ha-label-badge>\n    `;\n  }\n\n  protected firstUpdated(changedProperties: PropertyValues): void {\n    super.firstUpdated(changedProperties);\n    this.addEventListener(\"click\", (ev) => {\n      ev.stopPropagation();\n      if (this.state) {\n        fireEvent(this, \"hass-more-info\", { entityId: this.state.entity_id });\n      }\n    });\n  }\n\n  protected updated(changedProperties: PropertyValues): void {\n    super.updated(changedProperties);\n\n    if (this._connected && changedProperties.has(\"state\")) {\n      this.startInterval(this.state);\n    }\n  }\n\n  private _computeValue(domain: string, state: HassEntity) {\n    switch (domain) {\n      case \"binary_sensor\":\n      case \"device_tracker\":\n      case \"updater\":\n      case \"sun\":\n      case \"alarm_control_panel\":\n      case \"timer\":\n        return null;\n      case \"sensor\":\n      default:\n        return state.state === \"unknown\"\n          ? \"-\"\n          : this.hass!.localize(`component.${domain}.state.${state.state}`) ||\n              state.state;\n    }\n  }\n\n  private _computeIcon(domain: string, state: HassEntity) {\n    if (state.state === \"unavailable\") {\n      return null;\n    }\n    switch (domain) {\n      case \"alarm_control_panel\":\n        if (state.state === \"pending\") {\n          return \"hass:clock-fast\";\n        }\n        if (state.state === \"armed_away\") {\n          return \"hass:nature\";\n        }\n        if (state.state === \"armed_home\") {\n          return \"hass:home-variant\";\n        }\n        if (state.state === \"armed_night\") {\n          return \"hass:weather-night\";\n        }\n        if (state.state === \"armed_custom_bypass\") {\n          return \"hass:shield-home\";\n        }\n        if (state.state === \"triggered\") {\n          return \"hass:alert-circle\";\n        }\n        // state == 'disarmed'\n        return domainIcon(domain, state.state);\n      case \"binary_sensor\":\n      case \"device_tracker\":\n      case \"updater\":\n      case \"person\":\n        return stateIcon(state);\n      case \"sun\":\n        return state.state === \"above_horizon\"\n          ? domainIcon(domain)\n          : \"hass:brightness-3\";\n      case \"timer\":\n        return state.state === \"active\" ? \"hass:timer\" : \"hass:timer-off\";\n      default:\n        return null;\n    }\n  }\n\n  private _computeLabel(domain, state, _timerTimeRemaining) {\n    if (\n      state.state === \"unavailable\" ||\n      [\"device_tracker\", \"alarm_control_panel\", \"person\"].includes(domain)\n    ) {\n      // Localize the state with a special state_badge namespace, which has variations of\n      // the state translations that are truncated to fit within the badge label. Translations\n      // are only added for device_tracker, alarm_control_panel and person.\n      return (\n        this.hass!.localize(`state_badge.${domain}.${state.state}`) ||\n        this.hass!.localize(`state_badge.default.${state.state}`) ||\n        state.state\n      );\n    }\n    if (domain === \"timer\") {\n      return secondsToDuration(_timerTimeRemaining);\n    }\n    return state.attributes.unit_of_measurement || null;\n  }\n\n  private clearInterval() {\n    if (this._updateRemaining) {\n      clearInterval(this._updateRemaining);\n      this._updateRemaining = undefined;\n    }\n  }\n\n  private startInterval(stateObj) {\n    this.clearInterval();\n    if (stateObj && computeStateDomain(stateObj) === \"timer\") {\n      this.calculateTimerRemaining(stateObj);\n\n      if (stateObj.state === \"active\") {\n        this._updateRemaining = window.setInterval(\n          () => this.calculateTimerRemaining(this.state),\n          1000\n        );\n      }\n    }\n  }\n\n  private calculateTimerRemaining(stateObj) {\n    this._timerTimeRemaining = timerTimeRemaining(stateObj);\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      :host {\n        cursor: pointer;\n      }\n\n      ha-label-badge {\n        --ha-label-badge-color: var(--label-badge-red, #df4c1e);\n      }\n      ha-label-badge.has-unit_of_measurement {\n        --ha-label-badge-label-text-transform: none;\n      }\n\n      ha-label-badge.binary_sensor,\n      ha-label-badge.updater {\n        --ha-label-badge-color: var(--label-badge-blue, #039be5);\n      }\n\n      .red {\n        --ha-label-badge-color: var(--label-badge-red, #df4c1e);\n      }\n\n      .blue {\n        --ha-label-badge-color: var(--label-badge-blue, #039be5);\n      }\n\n      .green {\n        --ha-label-badge-color: var(--label-badge-green, #0da035);\n      }\n\n      .yellow {\n        --ha-label-badge-color: var(--label-badge-yellow, #f4b400);\n      }\n\n      .grey {\n        --ha-label-badge-color: var(--label-badge-grey, var(--paper-grey-500));\n      }\n\n      .warning {\n        --ha-label-badge-color: var(--label-badge-yellow, #fce588);\n      }\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-state-label-badge\": HaStateLabelBadge;\n  }\n}\n","import {\n  html,\n  LitElement,\n  PropertyDeclarations,\n  PropertyValues,\n  TemplateResult,\n  CSSResult,\n  css,\n} from \"lit-element\";\nimport { classMap } from \"lit-html/directives/class-map\";\nimport \"./ha-icon\";\n\nclass HaLabelBadge extends LitElement {\n  public value?: string;\n  public icon?: string;\n  public label?: string;\n  public description?: string;\n  public image?: string;\n\n  static get properties(): PropertyDeclarations {\n    return {\n      value: {},\n      icon: {},\n      label: {},\n      description: {},\n      image: {},\n    };\n  }\n\n  protected render(): TemplateResult | void {\n    return html`\n      <div class=\"badge-container\">\n        <div class=\"label-badge\" id=\"badge\">\n          <div\n            class=\"${classMap({\n              value: true,\n              big: Boolean(this.value && this.value.length > 4),\n            })}\"\n          >\n            ${this.icon && !this.value && !this.image\n              ? html`\n                  <ha-icon .icon=\"${this.icon}\"></ha-icon>\n                `\n              : \"\"}\n            ${this.value && !this.image\n              ? html`\n                  <span>${this.value}</span>\n                `\n              : \"\"}\n          </div>\n          ${this.label\n            ? html`\n                <div\n                  class=\"${classMap({\n                    label: true,\n                    big: this.label.length > 5,\n                  })}\"\n                >\n                  <span>${this.label}</span>\n                </div>\n              `\n            : \"\"}\n        </div>\n        ${this.description\n          ? html`\n              <div class=\"title\">${this.description}</div>\n            `\n          : \"\"}\n      </div>\n    `;\n  }\n\n  static get styles(): CSSResult[] {\n    return [\n      css`\n        .badge-container {\n          display: inline-block;\n          text-align: center;\n          vertical-align: top;\n        }\n        .label-badge {\n          position: relative;\n          display: block;\n          margin: 0 auto;\n          width: var(--ha-label-badge-size, 2.5em);\n          text-align: center;\n          height: var(--ha-label-badge-size, 2.5em);\n          line-height: var(--ha-label-badge-size, 2.5em);\n          font-size: var(--ha-label-badge-font-size, 1.5em);\n          border-radius: 50%;\n          border: 0.1em solid var(--ha-label-badge-color, var(--primary-color));\n          color: var(--label-badge-text-color, rgb(76, 76, 76));\n\n          white-space: nowrap;\n          background-color: var(--label-badge-background-color, white);\n          background-size: cover;\n          transition: border 0.3s ease-in-out;\n        }\n        .label-badge .value {\n          font-size: 90%;\n          overflow: hidden;\n          text-overflow: ellipsis;\n        }\n        .label-badge .value.big {\n          font-size: 70%;\n        }\n        .label-badge .label {\n          position: absolute;\n          bottom: -1em;\n          /* Make the label as wide as container+border. (parent_borderwidth / font-size) */\n          left: -0.2em;\n          right: -0.2em;\n          line-height: 1em;\n          font-size: 0.5em;\n        }\n        .label-badge .label span {\n          box-sizing: border-box;\n          max-width: 100%;\n          display: inline-block;\n          background-color: var(--ha-label-badge-color, var(--primary-color));\n          color: var(--ha-label-badge-label-color, white);\n          border-radius: 1em;\n          padding: 9% 16% 8% 16%; /* mostly apitalized text, not much descenders => bit more top margin */\n          font-weight: 500;\n          overflow: hidden;\n          text-transform: uppercase;\n          text-overflow: ellipsis;\n          transition: background-color 0.3s ease-in-out;\n          text-transform: var(--ha-label-badge-label-text-transform, uppercase);\n        }\n        .label-badge .label.big span {\n          font-size: 90%;\n          padding: 10% 12% 7% 12%; /* push smaller text a bit down to center vertically */\n        }\n        .badge-container .title {\n          margin-top: 1em;\n          font-size: var(--ha-label-badge-title-font-size, 0.9em);\n          width: var(--ha-label-badge-title-width, 5em);\n          font-weight: var(--ha-label-badge-title-font-weight, 400);\n          overflow: hidden;\n          text-overflow: ellipsis;\n          line-height: normal;\n        }\n      `,\n    ];\n  }\n\n  protected updated(changedProperties: PropertyValues): void {\n    super.updated(changedProperties);\n    if (changedProperties.has(\"image\")) {\n      this.shadowRoot!.getElementById(\"badge\")!.style.backgroundImage = this\n        .image\n        ? `url(${this.image})`\n        : \"\";\n    }\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-label-badge\": HaLabelBadge;\n  }\n}\n\ncustomElements.define(\"ha-label-badge\", HaLabelBadge);\n","import \"@polymer/paper-icon-button/paper-icon-button\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport { EventsMixin } from \"../mixins/events-mixin\";\n\nimport isComponentLoaded from \"../common/config/is_component_loaded\";\nimport { fireEvent } from \"../common/dom/fire_event\";\n\n/*\n * @appliesMixin EventsMixin\n */\nclass HaStartVoiceButton extends EventsMixin(PolymerElement) {\n  static get template() {\n    return html`\n      <paper-icon-button\n        icon=\"hass:microphone\"\n        hidden$=\"[[!canListen]]\"\n        on-click=\"handleListenClick\"\n      ></paper-icon-button>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: {\n        type: Object,\n        value: null,\n      },\n\n      canListen: {\n        type: Boolean,\n        computed: \"computeCanListen(hass)\",\n        notify: true,\n      },\n    };\n  }\n\n  computeCanListen(hass) {\n    return (\n      \"webkitSpeechRecognition\" in window &&\n      isComponentLoaded(hass, \"conversation\")\n    );\n  }\n\n  handleListenClick() {\n    fireEvent(this, \"show-dialog\", {\n      dialogImport: () =>\n        import(/* webpackChunkName: \"voice-command-dialog\" */ \"../dialogs/ha-voice-command-dialog\"),\n      dialogTag: \"ha-voice-command-dialog\",\n    });\n  }\n}\n\ncustomElements.define(\"ha-start-voice-button\", HaStartVoiceButton);\n","import { HomeAssistant } from \"../types\";\n\nimport { timeCachePromiseFunc } from \"../common/util/time-cache-function-promise\";\n\nexport const SUPPORT_PAUSE = 1;\nexport const SUPPORT_NEXT_TRACK = 32;\nexport const SUPPORTS_PLAY = 16384;\nexport const OFF_STATES = [\"off\", \"idle\"];\n\nexport interface MediaPlayerThumbnail {\n  content_type: string;\n  content: string;\n}\n\nexport const fetchMediaPlayerThumbnailWithCache = (\n  hass: HomeAssistant,\n  entityId: string\n) =>\n  timeCachePromiseFunc(\n    \"_media_playerTmb\",\n    9000,\n    fetchMediaPlayerThumbnail,\n    hass,\n    entityId\n  );\n\nexport const fetchMediaPlayerThumbnail = (\n  hass: HomeAssistant,\n  entityId: string\n) => {\n  return hass.callWS<MediaPlayerThumbnail>({\n    type: \"media_player_thumbnail\",\n    entity_id: entityId,\n  });\n};\n"],"sourceRoot":""}