{"version":3,"sources":["webpack:///./src/common/util/debounce.ts","webpack:///./src/panels/config/ha-config-section.ts","webpack:///./src/common/string/compare.ts","webpack:///./src/data/area_registry.ts","webpack:///./src/components/ha-fab.ts","webpack:///./src/panels/config/areas/show-dialog-area-registry-detail.ts","webpack:///./src/panels/config/areas/ha-config-areas.ts"],"names":["__webpack_require__","d","__webpack_exports__","debounce","func","wait","timeout","immediate","arguments","length","undefined","_len","args","Array","_key","context","this","callNow","clearTimeout","setTimeout","apply","_decorate","customElement","_initialize","_HTMLElement","F","_HTMLElement2","HaConfigSection","_this","_classCallCheck","_possibleConstructorReturn","_getPrototypeOf","call","_assertThisInitialized","attachShadow","mode","shadowRoot","innerHTML","_inherits","HTMLElement","compare","caseInsensitiveCompare","a","b","toLowerCase","createAreaRegistryEntry","updateAreaRegistryEntry","deleteAreaRegistryEntry","subscribeAreaRegistry","home_assistant_js_websocket__WEBPACK_IMPORTED_MODULE_0__","_common_string_compare__WEBPACK_IMPORTED_MODULE_1__","_common_util_debounce__WEBPACK_IMPORTED_MODULE_2__","hass","values","callWS","Object","assign","type","areaId","updates","area_id","fetchAreaRegistry","conn","sendMessagePromise","then","areas","sort","ent1","ent2","name","subscribeAreaRegistryUpdates","store","subscribeEvents","setState","onChange","createCollection","MwcFab","customElements","get","_MwcFab","_MwcFab2","HaFab","_getPrototypeOf2","concat","kind","key","value","classes","mdc-fab--mini","mini","mdc-fab--exited","exited","mdc-fab--extended","extended","showLabel","label","html","_templateObject","ripple","classMap","disabled","icon","showIconAtEnd","_templateObject2","loadAreaRegistryDetailDialog","Promise","all","e","bind","HaConfigAreas","_LitElement","_LitElement2","decorators","property","_get","prototype","_unsubAreas","_this2","_areas","localize","isWide","map","entry","_templateObject3","_openEditEntry","_templateObject4","_createArea","_templateObject5","rtl","computeRTL","changedProps","_this3","connection","_openDialog","ev","currentTarget","element","systemLogDetailParams","_this4","createEntry","_createEntry","_asyncToGenerator","regeneratorRuntime","mark","_callee","wrap","_context","prev","next","abrupt","stop","_x","updateEntry","_updateEntry","_callee2","_context2","_x2","removeEntry","_removeEntry","_callee3","_context3","confirm","t0","fireEvent","dialogTag","dialogImport","dialogParams","static","css","_templateObject6","LitElement"],"mappings":"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","file":"chunk.163cd6201f14b5d5dec2.js","sourcesContent":["// From: https://davidwalsh.name/javascript-debounce-function\n\n// Returns a function, that, as long as it continues to be invoked, will not\n// be triggered. The function will be called after it stops being called for\n// N milliseconds. If `immediate` is passed, trigger the function on the\n// leading edge, instead of the trailing.\n// tslint:disable-next-line: ban-types\nexport const debounce = <T extends Function>(\n  func: T,\n  wait,\n  immediate = false\n): T => {\n  let timeout;\n  // @ts-ignore\n  return function(...args) {\n    // tslint:disable:no-this-assignment\n    // @ts-ignore\n    const context = this;\n    const later = () => {\n      timeout = null;\n      if (!immediate) {\n        func.apply(context, args);\n      }\n    };\n    const callNow = immediate && !timeout;\n    clearTimeout(timeout);\n    timeout = setTimeout(later, wait);\n    if (callNow) {\n      func.apply(context, args);\n    }\n  };\n};\n","import { customElement } from \"lit-element\";\n\n@customElement(\"ha-config-section\")\nexport class HaConfigSection extends HTMLElement {\n  constructor() {\n    super();\n    this.attachShadow({ mode: \"open\" });\n    this.shadowRoot!.innerHTML = `\n    <style>\n      .content {\n        padding: 28px 20px 0;\n        max-width: 640px;\n        margin: 0 auto;\n      }\n\n      .header {\n        font-family: var(--paper-font-headline_-_font-family);\n        -webkit-font-smoothing: var(\n          --paper-font-headline_-_-webkit-font-smoothing\n        );\n        font-size: var(--paper-font-headline_-_font-size);\n        font-weight: var(--paper-font-headline_-_font-weight);\n        letter-spacing: var(--paper-font-headline_-_letter-spacing);\n        line-height: var(--paper-font-headline_-_line-height);\n        opacity: var(--dark-primary-opacity);\n      }\n\n      .together {\n        margin-top: 20px;\n      }\n\n      .intro {\n        font-family: var(--paper-font-subhead_-_font-family);\n        -webkit-font-smoothing: var(\n          --paper-font-subhead_-_-webkit-font-smoothing\n        );\n        font-weight: var(--paper-font-subhead_-_font-weight);\n        line-height: var(--paper-font-subhead_-_line-height);\n        width: 100%;\n        width: 100%;\n        max-width: 500px;\n        opacity: var(--dark-primary-opacity);\n        font-size: 14px;\n        padding-bottom: 20px;\n      }\n\n      .panel {\n        margin-top: -24px;\n      }\n\n      .panel ::slotted(*) {\n        margin-top: 24px;\n        display: block;\n      }\n    </style>\n    <div class=\"content\">\n      <div class=\"header\"><slot name=\"header\"></slot></div>\n      <div class=\"together\">\n        <div class=\"intro\"><slot name=\"introduction\"></slot></div>\n        <div class=\"panel\"><slot></slot></div>\n      </div>\n    </div>\n    `;\n  }\n}\n","export const compare = (a: string, b: string) => {\n  if (a < b) {\n    return -1;\n  }\n  if (a > b) {\n    return 1;\n  }\n\n  return 0;\n};\n\nexport const caseInsensitiveCompare = (a: string, b: string) =>\n  compare(a.toLowerCase(), b.toLowerCase());\n","import { createCollection, Connection } from \"home-assistant-js-websocket\";\nimport { HomeAssistant } from \"../types\";\nimport { compare } from \"../common/string/compare\";\nimport { debounce } from \"../common/util/debounce\";\n\nexport interface AreaRegistryEntry {\n  area_id: string;\n  name: string;\n}\n\nexport interface AreaRegistryEntryMutableParams {\n  name: string;\n}\n\nexport const createAreaRegistryEntry = (\n  hass: HomeAssistant,\n  values: AreaRegistryEntryMutableParams\n) =>\n  hass.callWS<AreaRegistryEntry>({\n    type: \"config/area_registry/create\",\n    ...values,\n  });\n\nexport const updateAreaRegistryEntry = (\n  hass: HomeAssistant,\n  areaId: string,\n  updates: Partial<AreaRegistryEntryMutableParams>\n) =>\n  hass.callWS<AreaRegistryEntry>({\n    type: \"config/area_registry/update\",\n    area_id: areaId,\n    ...updates,\n  });\n\nexport const deleteAreaRegistryEntry = (hass: HomeAssistant, areaId: string) =>\n  hass.callWS({\n    type: \"config/area_registry/delete\",\n    area_id: areaId,\n  });\n\nconst fetchAreaRegistry = (conn) =>\n  conn\n    .sendMessagePromise({\n      type: \"config/area_registry/list\",\n    })\n    .then((areas) => areas.sort((ent1, ent2) => compare(ent1.name, ent2.name)));\n\nconst subscribeAreaRegistryUpdates = (conn, store) =>\n  conn.subscribeEvents(\n    debounce(\n      () =>\n        fetchAreaRegistry(conn).then((areas) => store.setState(areas, true)),\n      500,\n      true\n    ),\n    \"area_registry_updated\"\n  );\n\nexport const subscribeAreaRegistry = (\n  conn: Connection,\n  onChange: (areas: AreaRegistryEntry[]) => void\n) =>\n  createCollection<AreaRegistryEntry[]>(\n    \"_areaRegistry\",\n    fetchAreaRegistry,\n    subscribeAreaRegistryUpdates,\n    conn,\n    onChange\n  );\n","import { classMap } from \"lit-html/directives/class-map\";\nimport { html, customElement } from \"lit-element\";\nimport { ripple } from \"@material/mwc-ripple/ripple-directive.js\";\n\nimport \"@material/mwc-fab\";\nimport { Constructor } from \"../types\";\n// tslint:disable-next-line\nimport { Fab } from \"@material/mwc-fab\";\n// tslint:disable-next-line\nconst MwcFab = customElements.get(\"mwc-fab\") as Constructor<Fab>;\n\n@customElement(\"ha-fab\")\nexport class HaFab extends MwcFab {\n  // We override the render method because we don't have an icon font and mwc-fab doesn't support our svg-icon sets.\n  // Based on version mwc-fab 0.8\n  protected render() {\n    const classes = {\n      \"mdc-fab--mini\": this.mini,\n      \"mdc-fab--exited\": this.exited,\n      \"mdc-fab--extended\": this.extended,\n    };\n    const showLabel = this.label !== \"\" && this.extended;\n    return html`\n      <button\n        .ripple=\"${ripple()}\"\n        class=\"mdc-fab ${classMap(classes)}\"\n        ?disabled=\"${this.disabled}\"\n        aria-label=\"${this.label || this.icon}\"\n      >\n        ${showLabel && this.showIconAtEnd ? this.label : \"\"}\n        ${this.icon\n          ? html`\n              <ha-icon .icon=${this.icon}></ha-icon>\n            `\n          : \"\"}\n        ${showLabel && !this.showIconAtEnd ? this.label : \"\"}\n      </button>\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-fab\": HaFab;\n  }\n}\n","import { fireEvent } from \"../../../common/dom/fire_event\";\nimport {\n  AreaRegistryEntry,\n  AreaRegistryEntryMutableParams,\n} from \"../../../data/area_registry\";\n\nexport interface AreaRegistryDetailDialogParams {\n  entry?: AreaRegistryEntry;\n  createEntry: (values: AreaRegistryEntryMutableParams) => Promise<unknown>;\n  updateEntry: (\n    updates: Partial<AreaRegistryEntryMutableParams>\n  ) => Promise<unknown>;\n  removeEntry: () => Promise<boolean>;\n}\n\nexport const loadAreaRegistryDetailDialog = () =>\n  import(\n    /* webpackChunkName: \"area-registry-detail-dialog\" */ \"./dialog-area-registry-detail\"\n  );\n\nexport const showAreaRegistryDetailDialog = (\n  element: HTMLElement,\n  systemLogDetailParams: AreaRegistryDetailDialogParams\n): void => {\n  fireEvent(element, \"show-dialog\", {\n    dialogTag: \"dialog-area-registry-detail\",\n    dialogImport: loadAreaRegistryDetailDialog,\n    dialogParams: systemLogDetailParams,\n  });\n};\n","import {\n  LitElement,\n  TemplateResult,\n  html,\n  css,\n  CSSResult,\n  property,\n  customElement,\n} from \"lit-element\";\nimport \"@polymer/paper-item/paper-item\";\nimport \"@polymer/paper-item/paper-item-body\";\n\nimport { HomeAssistant } from \"../../../types\";\nimport {\n  AreaRegistryEntry,\n  updateAreaRegistryEntry,\n  deleteAreaRegistryEntry,\n  createAreaRegistryEntry,\n  subscribeAreaRegistry,\n} from \"../../../data/area_registry\";\nimport \"../../../components/ha-card\";\nimport \"../../../components/ha-fab\";\nimport \"../../../layouts/hass-subpage\";\nimport \"../../../layouts/hass-loading-screen\";\nimport \"../ha-config-section\";\nimport {\n  showAreaRegistryDetailDialog,\n  loadAreaRegistryDetailDialog,\n} from \"./show-dialog-area-registry-detail\";\nimport { classMap } from \"lit-html/directives/class-map\";\nimport { computeRTL } from \"../../../common/util/compute_rtl\";\nimport { UnsubscribeFunc } from \"home-assistant-js-websocket\";\n\n@customElement(\"ha-config-areas\")\nexport class HaConfigAreas extends LitElement {\n  @property() public hass!: HomeAssistant;\n  @property() public isWide?: boolean;\n  @property() private _areas?: AreaRegistryEntry[];\n  private _unsubAreas?: UnsubscribeFunc;\n\n  public disconnectedCallback() {\n    super.disconnectedCallback();\n    if (this._unsubAreas) {\n      this._unsubAreas();\n    }\n  }\n\n  protected render(): TemplateResult | void {\n    if (!this.hass || this._areas === undefined) {\n      return html`\n        <hass-loading-screen></hass-loading-screen>\n      `;\n    }\n    return html`\n      <hass-subpage\n        .header=\"${this.hass.localize(\"ui.panel.config.area_registry.caption\")}\"\n        .showBackButton=${!this.isWide}\n      >\n        <ha-config-section .isWide=${this.isWide}>\n          <span slot=\"header\">\n            ${this.hass.localize(\"ui.panel.config.area_registry.picker.header\")}\n          </span>\n          <span slot=\"introduction\">\n            ${this.hass.localize(\n              \"ui.panel.config.area_registry.picker.introduction\"\n            )}\n            <p>\n              ${this.hass.localize(\n                \"ui.panel.config.area_registry.picker.introduction2\"\n              )}\n            </p>\n            <a href=\"/config/integrations/dashboard\">\n              ${this.hass.localize(\n                \"ui.panel.config.area_registry.picker.integrations_page\"\n              )}\n            </a>\n          </span>\n          <ha-card>\n            ${this._areas.map((entry) => {\n              return html`\n                <paper-item @click=${this._openEditEntry} .entry=${entry}>\n                  <paper-item-body>\n                    ${entry.name}\n                  </paper-item-body>\n                </paper-item>\n              `;\n            })}\n            ${this._areas.length === 0\n              ? html`\n                  <div class=\"empty\">\n                    ${this.hass.localize(\n                      \"ui.panel.config.area_registry.no_areas\"\n                    )}\n                    <mwc-button @click=${this._createArea}>\n                      ${this.hass.localize(\n                        \"ui.panel.config.area_registry.create_area\"\n                      )}\n                    </mwc-button>\n                  </div>\n                `\n              : html``}\n          </ha-card>\n        </ha-config-section>\n      </hass-subpage>\n\n      <ha-fab\n        ?is-wide=${this.isWide}\n        icon=\"hass:plus\"\n        title=\"${this.hass.localize(\n          \"ui.panel.config.area_registry.create_area\"\n        )}\"\n        @click=${this._createArea}\n        class=\"${classMap({\n          rtl: computeRTL(this.hass),\n        })}\"\n      ></ha-fab>\n    `;\n  }\n\n  protected firstUpdated(changedProps) {\n    super.firstUpdated(changedProps);\n    loadAreaRegistryDetailDialog();\n  }\n\n  protected updated(changedProps) {\n    super.updated(changedProps);\n    if (!this._unsubAreas) {\n      this._unsubAreas = subscribeAreaRegistry(\n        this.hass.connection,\n        (areas) => {\n          this._areas = areas;\n        }\n      );\n    }\n  }\n\n  private _createArea() {\n    this._openDialog();\n  }\n\n  private _openEditEntry(ev: MouseEvent) {\n    const entry: AreaRegistryEntry = (ev.currentTarget! as any).entry;\n    this._openDialog(entry);\n  }\n  private _openDialog(entry?: AreaRegistryEntry) {\n    showAreaRegistryDetailDialog(this, {\n      entry,\n      createEntry: async (values) =>\n        createAreaRegistryEntry(this.hass!, values),\n      updateEntry: async (values) =>\n        updateAreaRegistryEntry(this.hass!, entry!.area_id, values),\n      removeEntry: async () => {\n        if (\n          !confirm(`Are you sure you want to delete this area?\n\nAll devices in this area will become unassigned.`)\n        ) {\n          return false;\n        }\n\n        try {\n          await deleteAreaRegistryEntry(this.hass!, entry!.area_id);\n          return true;\n        } catch (err) {\n          return false;\n        }\n      },\n    });\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      a {\n        color: var(--primary-color);\n      }\n      ha-card {\n        max-width: 600px;\n        margin: 16px auto;\n        overflow: hidden;\n      }\n      .empty {\n        text-align: center;\n      }\n      paper-item {\n        cursor: pointer;\n        padding-top: 4px;\n        padding-bottom: 4px;\n      }\n      ha-fab {\n        position: fixed;\n        bottom: 16px;\n        right: 16px;\n        z-index: 1;\n      }\n\n      ha-fab[is-wide] {\n        bottom: 24px;\n        right: 24px;\n      }\n\n      ha-fab.rtl {\n        right: auto;\n        left: 16px;\n      }\n\n      ha-fab[is-wide].rtl {\n        bottom: 24px;\n        right: auto;\n        left: 24px;\n      }\n    `;\n  }\n}\n"],"sourceRoot":""}