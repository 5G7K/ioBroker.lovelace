{"version":3,"sources":["webpack:///./src/components/dialog/ha-iron-focusables-helper.js","webpack:///./src/components/dialog/ha-paper-dialog.ts","webpack:///./src/components/ha-icon-next.ts","webpack:///./src/data/area_registry.ts","webpack:///./src/data/device_registry.ts","webpack:///./src/dialogs/config-flow/dialog-config-flow.ts","webpack:///./src/dialogs/config-flow/step-flow-abort.ts","webpack:///./src/dialogs/config-flow/step-flow-create-entry.ts","webpack:///./src/dialogs/config-flow/step-flow-external.ts","webpack:///./src/dialogs/config-flow/step-flow-form.ts","webpack:///./src/dialogs/config-flow/step-flow-loading.ts","webpack:///./src/dialogs/config-flow/step-flow-pick-handler.ts","webpack:///./src/dialogs/config-flow/styles.ts","webpack:///./src/mixins/events-mixin.js","webpack:///./src/polymer-types.ts"],"names":["HaIronFocusablesHelper","getTabbableNodes","node","result","needsSortByTabIndex","_collectTabbableNodes","IronFocusablesHelper","_sortByTabIndex","nodeType","Node","ELEMENT_NODE","_isVisible","element","tabIndex","_normalizedTabIndex","needsSort","push","children","localName","dom","getDistributedNodes","shadowRoot","root","i","length","paperDialogClass","customElements","get","haTabFixBehaviorImpl","_focusableNodes","HaPaperDialog","mixinBehaviors","define","HaIconNext","icon","window","getComputedStyle","direction","HaIcon","createAreaRegistryEntry","hass","values","callWS","type","updateAreaRegistryEntry","areaId","updates","area_id","deleteAreaRegistryEntry","fetchAreaRegistry","conn","sendMessagePromise","then","areas","sort","ent1","ent2","compare","name","subscribeAreaRegistryUpdates","store","subscribeEvents","debounce","setState","subscribeAreaRegistry","onChange","createCollection","updateDeviceRegistryEntry","deviceId","device_id","fetchDeviceRegistry","subscribeDeviceRegistryUpdates","devices","subscribeDeviceRegistry","instance","ConfigFlowDialog","customElement","property","params","_params","_instance","continueFlowId","_step","_handlers","undefined","_loading","updateComplete","_scheduleCenterDialog","getConfigFlowHandlers","handlerA","handlerB","caseInsensitiveCompare","localize","curInstance","fetchConfigFlow","step","_processStep","html","_openedChanged","_devices","_areas","changedProps","addEventListener","ev","detail","stepPromise","has","_fetchDevices","_fetchAreas","_dialog","setTimeout","center","querySelector","configEntryId","_unsubDevices","connection","filter","device","config_entries","includes","_unsubAreas","Promise","_flowDone","flowFinished","Boolean","deleteConfigFlow","flow_id","dialogClosedCallback","value","haStyleDialog","css","LitElement","StepFlowAbort","description","localizeKey","handler","reason","description_placeholders","fireEvent","configFlowContentStyles","StepFlowCreateEntry","title","map","model","manufacturer","id","_handleAreaChanged","area","_addArea","prompt","alert","dropdown","currentTarget","selectedItem","message","StepFlowExternal","step_id","url","data","open","StepFlowForm","allRequiredInfoFilledIn","_stepData","data_schema","find","field","optional","every","_errorMsg","_stepDataProcessed","_stepDataChanged","errors","_labelCallback","_errorCallback","_submitStep","keyCode","forEach","flowId","stepData","toSendData","Object","keys","key","isEmpty","handleConfigFlowStep","body","applyPolymerEvent","schema","error","StepFlowLoading","StepFlowPickHandler","handlers","_handlerPicked","createConfigFlow","EventsMixin","dedupingMixin","superClass","options","curValue","path","propName","split"],"mappings":"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","file":"dialog-config-flow.chunk.js","sourcesContent":["/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at\nhttp://polymer.github.io/LICENSE.txt The complete set of authors may be found at\nhttp://polymer.github.io/AUTHORS.txt The complete set of contributors may be\nfound at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as\npart of the polymer project is also subject to an additional IP rights grant\nfound at http://polymer.github.io/PATENTS.txt\n*/\n/*\n  Fixes issue with not using shadow dom properly in iron-overlay-behavior/icon-focusables-helper.js\n*/\nimport { dom } from \"@polymer/polymer/lib/legacy/polymer.dom.js\";\n\nimport { IronFocusablesHelper } from \"@polymer/iron-overlay-behavior/iron-focusables-helper.js\";\n\nexport const HaIronFocusablesHelper = {\n  /**\n   * Returns a sorted array of tabbable nodes, including the root node.\n   * It searches the tabbable nodes in the light and shadow dom of the chidren,\n   * sorting the result by tabindex.\n   * @param {!Node} node\n   * @return {!Array<!HTMLElement>}\n   */\n  getTabbableNodes: function(node) {\n    var result = [];\n    // If there is at least one element with tabindex > 0, we need to sort\n    // the final array by tabindex.\n    var needsSortByTabIndex = this._collectTabbableNodes(node, result);\n    if (needsSortByTabIndex) {\n      return IronFocusablesHelper._sortByTabIndex(result);\n    }\n    return result;\n  },\n\n  /**\n   * Searches for nodes that are tabbable and adds them to the `result` array.\n   * Returns if the `result` array needs to be sorted by tabindex.\n   * @param {!Node} node The starting point for the search; added to `result`\n   * if tabbable.\n   * @param {!Array<!HTMLElement>} result\n   * @return {boolean}\n   * @private\n   */\n  _collectTabbableNodes: function(node, result) {\n    // If not an element or not visible, no need to explore children.\n    if (\n      node.nodeType !== Node.ELEMENT_NODE ||\n      !IronFocusablesHelper._isVisible(node)\n    ) {\n      return false;\n    }\n    var element = /** @type {!HTMLElement} */ (node);\n    var tabIndex = IronFocusablesHelper._normalizedTabIndex(element);\n    var needsSort = tabIndex > 0;\n    if (tabIndex >= 0) {\n      result.push(element);\n    }\n\n    // In ShadowDOM v1, tab order is affected by the order of distrubution.\n    // E.g. getTabbableNodes(#root) in ShadowDOM v1 should return [#A, #B];\n    // in ShadowDOM v0 tab order is not affected by the distrubution order,\n    // in fact getTabbableNodes(#root) returns [#B, #A].\n    //  <div id=\"root\">\n    //   <!-- shadow -->\n    //     <slot name=\"a\">\n    //     <slot name=\"b\">\n    //   <!-- /shadow -->\n    //   <input id=\"A\" slot=\"a\">\n    //   <input id=\"B\" slot=\"b\" tabindex=\"1\">\n    //  </div>\n    // TODO(valdrin) support ShadowDOM v1 when upgrading to Polymer v2.0.\n    var children;\n    if (element.localName === \"content\" || element.localName === \"slot\") {\n      children = dom(element).getDistributedNodes();\n    } else {\n      // /////////////////////////\n      // Use shadow root if possible, will check for distributed nodes.\n      // THIS IS THE CHANGED LINE\n      children = dom(element.shadowRoot || element.root || element).children;\n      // /////////////////////////\n    }\n    for (var i = 0; i < children.length; i++) {\n      // Ensure method is always invoked to collect tabbable children.\n      needsSort = this._collectTabbableNodes(children[i], result) || needsSort;\n    }\n    return needsSort;\n  },\n};\n","import \"@polymer/paper-dialog/paper-dialog\";\nimport { mixinBehaviors } from \"@polymer/polymer/lib/legacy/class\";\nimport { HaIronFocusablesHelper } from \"./ha-iron-focusables-helper.js\";\n// tslint:disable-next-line\nimport { PaperDialogElement } from \"@polymer/paper-dialog/paper-dialog\";\n\nconst paperDialogClass = customElements.get(\"paper-dialog\");\n\n// behavior that will override existing iron-overlay-behavior and call the fixed implementation\nconst haTabFixBehaviorImpl = {\n  get _focusableNodes() {\n    return HaIronFocusablesHelper.getTabbableNodes(this);\n  },\n};\n\n// paper-dialog that uses the haTabFixBehaviorImpl behvaior\n// export class HaPaperDialog extends paperDialogClass {}\n// @ts-ignore\nexport class HaPaperDialog\n  extends mixinBehaviors([haTabFixBehaviorImpl], paperDialogClass)\n  implements PaperDialogElement {}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-paper-dialog\": HaPaperDialog;\n  }\n}\ncustomElements.define(\"ha-paper-dialog\", HaPaperDialog);\n","import \"@polymer/iron-icon/iron-icon\";\n// Not duplicate, this is for typing.\n// tslint:disable-next-line\nimport { HaIcon } from \"./ha-icon\";\n\nexport class HaIconNext extends HaIcon {\n  public connectedCallback() {\n    this.icon =\n      window.getComputedStyle(this).direction === \"ltr\"\n        ? \"hass:chevron-right\"\n        : \"hass:chevron-left\";\n\n    // calling super after setting icon to have it consistently show the icon (otherwise not always shown)\n    super.connectedCallback();\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-icon-next\": HaIconNext;\n  }\n}\n\ncustomElements.define(\"ha-icon-next\", HaIconNext);\n","import { createCollection, Connection } from \"home-assistant-js-websocket\";\nimport { HomeAssistant } from \"../types\";\nimport { compare } from \"../common/string/compare\";\nimport { debounce } from \"../common/util/debounce\";\n\nexport interface AreaRegistryEntry {\n  area_id: string;\n  name: string;\n}\n\nexport interface AreaRegistryEntryMutableParams {\n  name: string;\n}\n\nexport const createAreaRegistryEntry = (\n  hass: HomeAssistant,\n  values: AreaRegistryEntryMutableParams\n) =>\n  hass.callWS<AreaRegistryEntry>({\n    type: \"config/area_registry/create\",\n    ...values,\n  });\n\nexport const updateAreaRegistryEntry = (\n  hass: HomeAssistant,\n  areaId: string,\n  updates: Partial<AreaRegistryEntryMutableParams>\n) =>\n  hass.callWS<AreaRegistryEntry>({\n    type: \"config/area_registry/update\",\n    area_id: areaId,\n    ...updates,\n  });\n\nexport const deleteAreaRegistryEntry = (hass: HomeAssistant, areaId: string) =>\n  hass.callWS({\n    type: \"config/area_registry/delete\",\n    area_id: areaId,\n  });\n\nconst fetchAreaRegistry = (conn) =>\n  conn\n    .sendMessagePromise({\n      type: \"config/area_registry/list\",\n    })\n    .then((areas) => areas.sort((ent1, ent2) => compare(ent1.name, ent2.name)));\n\nconst subscribeAreaRegistryUpdates = (conn, store) =>\n  conn.subscribeEvents(\n    debounce(\n      () =>\n        fetchAreaRegistry(conn).then((areas) => store.setState(areas, true)),\n      500,\n      true\n    ),\n    \"area_registry_updated\"\n  );\n\nexport const subscribeAreaRegistry = (\n  conn: Connection,\n  onChange: (areas: AreaRegistryEntry[]) => void\n) =>\n  createCollection<AreaRegistryEntry[]>(\n    \"_areaRegistry\",\n    fetchAreaRegistry,\n    subscribeAreaRegistryUpdates,\n    conn,\n    onChange\n  );\n","import { HomeAssistant } from \"../types\";\nimport { createCollection, Connection } from \"home-assistant-js-websocket\";\nimport { debounce } from \"../common/util/debounce\";\n\nexport interface DeviceRegistryEntry {\n  id: string;\n  config_entries: string[];\n  connections: Array<[string, string]>;\n  manufacturer: string;\n  model?: string;\n  name?: string;\n  sw_version?: string;\n  hub_device_id?: string;\n  area_id?: string;\n  name_by_user?: string;\n}\n\nexport interface DeviceRegistryEntryMutableParams {\n  area_id?: string | null;\n  name_by_user?: string | null;\n}\n\nexport const updateDeviceRegistryEntry = (\n  hass: HomeAssistant,\n  deviceId: string,\n  updates: Partial<DeviceRegistryEntryMutableParams>\n) =>\n  hass.callWS<DeviceRegistryEntry>({\n    type: \"config/device_registry/update\",\n    device_id: deviceId,\n    ...updates,\n  });\n\nconst fetchDeviceRegistry = (conn) =>\n  conn.sendMessagePromise({\n    type: \"config/device_registry/list\",\n  });\n\nconst subscribeDeviceRegistryUpdates = (conn, store) =>\n  conn.subscribeEvents(\n    debounce(\n      () =>\n        fetchDeviceRegistry(conn).then((devices) =>\n          store.setState(devices, true)\n        ),\n      500,\n      true\n    ),\n    \"device_registry_updated\"\n  );\n\nexport const subscribeDeviceRegistry = (\n  conn: Connection,\n  onChange: (devices: DeviceRegistryEntry[]) => void\n) =>\n  createCollection<DeviceRegistryEntry[]>(\n    \"_dr\",\n    fetchDeviceRegistry,\n    subscribeDeviceRegistryUpdates,\n    conn,\n    onChange\n  );\n","import {\n  LitElement,\n  TemplateResult,\n  html,\n  CSSResultArray,\n  css,\n  customElement,\n  property,\n  PropertyValues,\n} from \"lit-element\";\nimport \"@material/mwc-button\";\nimport \"@polymer/paper-dialog-scrollable/paper-dialog-scrollable\";\nimport \"@polymer/paper-tooltip/paper-tooltip\";\nimport \"@polymer/paper-spinner/paper-spinner\";\nimport { UnsubscribeFunc } from \"home-assistant-js-websocket\";\n\nimport \"../../components/ha-form\";\nimport \"../../components/ha-markdown\";\nimport \"../../resources/ha-style\";\nimport \"../../components/dialog/ha-paper-dialog\";\n// Not duplicate, is for typing\n// tslint:disable-next-line\nimport { HaPaperDialog } from \"../../components/dialog/ha-paper-dialog\";\nimport { haStyleDialog } from \"../../resources/styles\";\nimport {\n  fetchConfigFlow,\n  ConfigFlowStep,\n  deleteConfigFlow,\n  getConfigFlowHandlers,\n} from \"../../data/config_entries\";\nimport { PolymerChangedEvent } from \"../../polymer-types\";\nimport { HaConfigFlowParams } from \"./show-dialog-config-flow\";\n\nimport \"./step-flow-pick-handler\";\nimport \"./step-flow-loading\";\nimport \"./step-flow-form\";\nimport \"./step-flow-external\";\nimport \"./step-flow-abort\";\nimport \"./step-flow-create-entry\";\nimport {\n  DeviceRegistryEntry,\n  subscribeDeviceRegistry,\n} from \"../../data/device_registry\";\nimport {\n  AreaRegistryEntry,\n  subscribeAreaRegistry,\n} from \"../../data/area_registry\";\nimport { HomeAssistant } from \"../../types\";\nimport { caseInsensitiveCompare } from \"../../common/string/compare\";\n\nlet instance = 0;\n\ndeclare global {\n  // for fire event\n  interface HASSDomEvents {\n    \"flow-update\": {\n      step?: ConfigFlowStep;\n      stepPromise?: Promise<ConfigFlowStep>;\n    };\n  }\n}\n\n@customElement(\"dialog-config-flow\")\nclass ConfigFlowDialog extends LitElement {\n  public hass!: HomeAssistant;\n  @property() private _params?: HaConfigFlowParams;\n  @property() private _loading = true;\n  private _instance = instance;\n  @property() private _step:\n    | ConfigFlowStep\n    | undefined\n    // Null means we need to pick a config flow\n    | null;\n  @property() private _devices?: DeviceRegistryEntry[];\n  @property() private _areas?: AreaRegistryEntry[];\n  @property() private _handlers?: string[];\n  private _unsubAreas?: UnsubscribeFunc;\n  private _unsubDevices?: UnsubscribeFunc;\n\n  public async showDialog(params: HaConfigFlowParams): Promise<void> {\n    this._params = params;\n    this._instance = instance++;\n\n    // Create a new config flow. Show picker\n    if (!params.continueFlowId) {\n      this._step = null;\n\n      // We only load the handlers once\n      if (this._handlers === undefined) {\n        this._loading = true;\n        this.updateComplete.then(() => this._scheduleCenterDialog());\n        try {\n          this._handlers = (await getConfigFlowHandlers(this.hass)).sort(\n            (handlerA, handlerB) =>\n              caseInsensitiveCompare(\n                this.hass.localize(`component.${handlerA}.config.title`),\n                this.hass.localize(`component.${handlerB}.config.title`)\n              )\n          );\n        } finally {\n          this._loading = false;\n        }\n      }\n      await this.updateComplete;\n      this._scheduleCenterDialog();\n      return;\n    }\n\n    this._loading = true;\n    const curInstance = this._instance;\n    const step = await fetchConfigFlow(this.hass, params.continueFlowId);\n\n    // Happens if second showDialog called\n    if (curInstance !== this._instance) {\n      return;\n    }\n\n    this._processStep(step);\n    this._loading = false;\n    // When the flow changes, center the dialog.\n    // Don't do it on each step or else the dialog keeps bouncing.\n    this._scheduleCenterDialog();\n  }\n\n  protected render(): TemplateResult | void {\n    if (!this._params) {\n      return html``;\n    }\n\n    return html`\n      <ha-paper-dialog\n        with-backdrop\n        opened\n        @opened-changed=${this._openedChanged}\n      >\n        ${this._loading || (this._step === null && this._handlers === undefined)\n          ? html`\n              <step-flow-loading></step-flow-loading>\n            `\n          : this._step === undefined\n          ? // When we are going to next step, we render 1 round of empty\n            // to reset the element.\n            \"\"\n          : this._step === null\n          ? // Show handler picker\n            html`\n              <step-flow-pick-handler\n                .hass=${this.hass}\n                .handlers=${this._handlers}\n              ></step-flow-pick-handler>\n            `\n          : this._step.type === \"form\"\n          ? html`\n              <step-flow-form\n                .step=${this._step}\n                .hass=${this.hass}\n              ></step-flow-form>\n            `\n          : this._step.type === \"external\"\n          ? html`\n              <step-flow-external\n                .step=${this._step}\n                .hass=${this.hass}\n              ></step-flow-external>\n            `\n          : this._step.type === \"abort\"\n          ? html`\n              <step-flow-abort\n                .step=${this._step}\n                .hass=${this.hass}\n              ></step-flow-abort>\n            `\n          : this._devices === undefined || this._areas === undefined\n          ? // When it's a create entry result, we will fetch device & area registry\n            html`\n              <step-flow-loading></step-flow-loading>\n            `\n          : html`\n              <step-flow-create-entry\n                .step=${this._step}\n                .hass=${this.hass}\n                .devices=${this._devices}\n                .areas=${this._areas}\n              ></step-flow-create-entry>\n            `}\n      </ha-paper-dialog>\n    `;\n  }\n\n  protected firstUpdated(changedProps: PropertyValues) {\n    super.firstUpdated(changedProps);\n    this.addEventListener(\"flow-update\", (ev) => {\n      const { step, stepPromise } = (ev as any).detail;\n      this._processStep(step || stepPromise);\n    });\n  }\n\n  protected updated(changedProps: PropertyValues) {\n    if (\n      changedProps.has(\"_step\") &&\n      this._step &&\n      this._step.type === \"create_entry\"\n    ) {\n      this._fetchDevices(this._step.result);\n      this._fetchAreas();\n    }\n\n    if (changedProps.has(\"_devices\") && this._dialog) {\n      this._scheduleCenterDialog();\n    }\n  }\n\n  private _scheduleCenterDialog() {\n    setTimeout(() => this._dialog.center(), 0);\n  }\n\n  private get _dialog(): HaPaperDialog {\n    return this.shadowRoot!.querySelector(\"ha-paper-dialog\")!;\n  }\n\n  private async _fetchDevices(configEntryId) {\n    this._unsubDevices = subscribeDeviceRegistry(\n      this.hass.connection,\n      (devices) => {\n        this._devices = devices.filter((device) =>\n          device.config_entries.includes(configEntryId)\n        );\n      }\n    );\n  }\n\n  private async _fetchAreas() {\n    this._unsubAreas = subscribeAreaRegistry(this.hass.connection, (areas) => {\n      this._areas = areas;\n    });\n  }\n\n  private async _processStep(\n    step: ConfigFlowStep | undefined | Promise<ConfigFlowStep>\n  ): Promise<void> {\n    if (step instanceof Promise) {\n      this._loading = true;\n      try {\n        this._step = await step;\n      } finally {\n        this._loading = false;\n      }\n      return;\n    }\n\n    if (step === undefined) {\n      this._flowDone();\n      return;\n    }\n    this._step = undefined;\n    await this.updateComplete;\n    this._step = step;\n  }\n\n  private _flowDone(): void {\n    if (!this._params) {\n      return;\n    }\n    const flowFinished = Boolean(\n      this._step && [\"create_entry\", \"abort\"].includes(this._step.type)\n    );\n\n    // If we created this flow, delete it now.\n    if (this._step && !flowFinished && !this._params.continueFlowId) {\n      deleteConfigFlow(this.hass, this._step.flow_id);\n    }\n\n    this._params.dialogClosedCallback({\n      flowFinished,\n    });\n\n    this._step = undefined;\n    this._params = undefined;\n    this._devices = undefined;\n    if (this._unsubAreas) {\n      this._unsubAreas();\n      this._unsubAreas = undefined;\n    }\n    if (this._unsubDevices) {\n      this._unsubDevices();\n      this._unsubDevices = undefined;\n    }\n  }\n\n  private _openedChanged(ev: PolymerChangedEvent<boolean>): void {\n    // Closed dialog by clicking on the overlay\n    if (!ev.detail.value) {\n      if (this._step) {\n        this._flowDone();\n      } else if (this._step === null) {\n        // Flow aborted during picking flow\n        this._step = undefined;\n        this._params = undefined;\n      }\n    }\n  }\n\n  static get styles(): CSSResultArray {\n    return [\n      haStyleDialog,\n      css`\n        ha-paper-dialog {\n          max-width: 500px;\n        }\n        ha-paper-dialog > * {\n          margin: 0;\n          display: block;\n          padding: 0;\n        }\n      `,\n    ];\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"dialog-config-flow\": ConfigFlowDialog;\n  }\n}\n","import {\n  LitElement,\n  TemplateResult,\n  html,\n  customElement,\n  property,\n  CSSResult,\n} from \"lit-element\";\nimport \"@material/mwc-button\";\n\nimport { ConfigFlowStepAbort } from \"../../data/config_entries\";\nimport { HomeAssistant } from \"../../types\";\nimport { localizeKey } from \"../../common/translations/localize\";\nimport { fireEvent } from \"../../common/dom/fire_event\";\nimport { configFlowContentStyles } from \"./styles\";\n\n@customElement(\"step-flow-abort\")\nclass StepFlowAbort extends LitElement {\n  @property()\n  public hass!: HomeAssistant;\n\n  @property()\n  private step!: ConfigFlowStepAbort;\n\n  protected render(): TemplateResult | void {\n    const localize = this.hass.localize;\n    const step = this.step;\n\n    const description = localizeKey(\n      localize,\n      `component.${step.handler}.config.abort.${step.reason}`,\n      step.description_placeholders\n    );\n\n    return html`\n      <h2>Aborted</h2>\n      <div class=\"content\">\n        ${description\n          ? html`\n              <ha-markdown .content=${description} allow-svg></ha-markdown>\n            `\n          : \"\"}\n      </div>\n      <div class=\"buttons\">\n        <mwc-button @click=\"${this._flowDone}\">Close</mwc-button>\n      </div>\n    `;\n  }\n\n  private _flowDone(): void {\n    fireEvent(this, \"flow-update\", { step: undefined });\n  }\n\n  static get styles(): CSSResult {\n    return configFlowContentStyles;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"step-flow-abort\": StepFlowAbort;\n  }\n}\n","import {\n  LitElement,\n  TemplateResult,\n  html,\n  customElement,\n  property,\n  CSSResultArray,\n  css,\n} from \"lit-element\";\nimport \"@material/mwc-button\";\nimport \"@polymer/paper-dropdown-menu/paper-dropdown-menu-light\";\nimport \"@polymer/paper-item/paper-item\";\nimport \"@polymer/paper-listbox/paper-listbox\";\n\nimport { ConfigFlowStepCreateEntry } from \"../../data/config_entries\";\nimport { HomeAssistant } from \"../../types\";\nimport { localizeKey } from \"../../common/translations/localize\";\nimport { fireEvent } from \"../../common/dom/fire_event\";\nimport { configFlowContentStyles } from \"./styles\";\nimport {\n  DeviceRegistryEntry,\n  updateDeviceRegistryEntry,\n} from \"../../data/device_registry\";\nimport {\n  AreaRegistryEntry,\n  createAreaRegistryEntry,\n} from \"../../data/area_registry\";\n\n@customElement(\"step-flow-create-entry\")\nclass StepFlowCreateEntry extends LitElement {\n  @property()\n  public hass!: HomeAssistant;\n\n  @property()\n  public step!: ConfigFlowStepCreateEntry;\n\n  @property()\n  public devices!: DeviceRegistryEntry[];\n\n  @property()\n  public areas!: AreaRegistryEntry[];\n\n  protected render(): TemplateResult | void {\n    const localize = this.hass.localize;\n    const step = this.step;\n\n    const description = localizeKey(\n      localize,\n      `component.${step.handler}.config.create_entry.${step.description ||\n        \"default\"}`,\n      step.description_placeholders\n    );\n\n    return html`\n      <h2>Success!</h2>\n      <div class=\"content\">\n        ${description\n          ? html`\n              <ha-markdown .content=${description} allow-svg></ha-markdown>\n            `\n          : \"\"}\n        <p>Created config for ${step.title}.</p>\n        ${this.devices.length === 0\n          ? \"\"\n          : html`\n              <p>We found the following devices:</p>\n              <div class=\"devices\">\n                ${this.devices.map(\n                  (device) =>\n                    html`\n                      <div class=\"device\">\n                        <b>${device.name}</b><br />\n                        ${device.model} (${device.manufacturer})\n\n                        <paper-dropdown-menu-light\n                          label=\"Area\"\n                          .device=${device.id}\n                          @selected-item-changed=${this._handleAreaChanged}\n                        >\n                          <paper-listbox slot=\"dropdown-content\" selected=\"0\">\n                            <paper-item>\n                              ${localize(\n                                \"ui.panel.config.integrations.config_entry.no_area\"\n                              )}\n                            </paper-item>\n                            ${this.areas.map(\n                              (area) => html`\n                                <paper-item .area=${area.area_id}>\n                                  ${area.name}\n                                </paper-item>\n                              `\n                            )}\n                          </paper-listbox>\n                        </paper-dropdown-menu-light>\n                      </div>\n                    `\n                )}\n              </div>\n            `}\n      </div>\n      <div class=\"buttons\">\n        ${this.devices.length > 0\n          ? html`\n              <mwc-button @click=\"${this._addArea}\">Add Area</mwc-button>\n            `\n          : \"\"}\n\n        <mwc-button @click=\"${this._flowDone}\">Finish</mwc-button>\n      </div>\n    `;\n  }\n\n  private _flowDone(): void {\n    fireEvent(this, \"flow-update\", { step: undefined });\n  }\n\n  private async _addArea() {\n    const name = prompt(\"Name of the new area?\");\n    if (!name) {\n      return;\n    }\n    try {\n      const area = await createAreaRegistryEntry(this.hass, {\n        name,\n      });\n      this.areas = [...this.areas, area];\n    } catch (err) {\n      alert(\"Failed to create area.\");\n    }\n  }\n\n  private async _handleAreaChanged(ev: Event) {\n    const dropdown = ev.currentTarget as any;\n    const device = dropdown.device;\n\n    // Item first becomes null, then new item.\n    if (!dropdown.selectedItem) {\n      return;\n    }\n\n    const area = dropdown.selectedItem.area;\n    try {\n      await updateDeviceRegistryEntry(this.hass, device, {\n        area_id: area,\n      });\n    } catch (err) {\n      alert(`Error saving area: ${err.message}`);\n      dropdown.value = null;\n    }\n  }\n\n  static get styles(): CSSResultArray {\n    return [\n      configFlowContentStyles,\n      css`\n        .devices {\n          display: flex;\n          flex-wrap: wrap;\n          margin: -4px;\n        }\n        .device {\n          border: 1px solid var(--divider-color);\n          padding: 5px;\n          border-radius: 4px;\n          margin: 4px;\n          display: inline-block;\n          width: 200px;\n        }\n        .buttons > *:last-child {\n          margin-left: auto;\n        }\n        paper-dropdown-menu-light {\n          cursor: pointer;\n        }\n        paper-item {\n          cursor: pointer;\n          white-space: nowrap;\n        }\n        @media all and (max-width: 450px), all and (max-height: 500px) {\n          .device {\n            width: auto;\n          }\n        }\n      `,\n    ];\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"step-flow-create-entry\": StepFlowCreateEntry;\n  }\n}\n","import {\n  LitElement,\n  TemplateResult,\n  html,\n  customElement,\n  property,\n  CSSResultArray,\n  css,\n} from \"lit-element\";\nimport \"@material/mwc-button\";\n\nimport {\n  ConfigFlowStepExternal,\n  DataEntryFlowProgressedEvent,\n  fetchConfigFlow,\n} from \"../../data/config_entries\";\nimport { HomeAssistant } from \"../../types\";\nimport { localizeKey } from \"../../common/translations/localize\";\nimport { fireEvent } from \"../../common/dom/fire_event\";\nimport { configFlowContentStyles } from \"./styles\";\n\n@customElement(\"step-flow-external\")\nclass StepFlowExternal extends LitElement {\n  @property()\n  public hass!: HomeAssistant;\n\n  @property()\n  private step!: ConfigFlowStepExternal;\n\n  protected render(): TemplateResult | void {\n    const localize = this.hass.localize;\n    const step = this.step;\n\n    const description = localizeKey(\n      localize,\n      `component.${step.handler}.config.${step.step_id}.description`,\n      step.description_placeholders\n    );\n\n    return html`\n      <h2>\n        ${localize(\n          `component.${step.handler}.config.step.${step.step_id}.title`\n        )}\n      </h2>\n      <div class=\"content\">\n        <p>\n          ${localize(\n            \"ui.panel.config.integrations.config_flow.external_step.description\"\n          )}\n        </p>\n        ${description\n          ? html`\n              <ha-markdown .content=${description} allow-svg></ha-markdown>\n            `\n          : \"\"}\n        <div class=\"open-button\">\n          <a href=${this.step.url} target=\"_blank\">\n            <mwc-button raised>\n              ${localize(\n                \"ui.panel.config.integrations.config_flow.external_step.open_site\"\n              )}\n            </mwc-button>\n          </a>\n        </div>\n      </div>\n    `;\n  }\n\n  protected firstUpdated(changedProps) {\n    super.firstUpdated(changedProps);\n    this.hass.connection.subscribeEvents<DataEntryFlowProgressedEvent>(\n      async (ev) => {\n        if (ev.data.flow_id !== this.step.flow_id) {\n          return;\n        }\n\n        const step = await fetchConfigFlow(this.hass, this.step.flow_id);\n        fireEvent(this, \"flow-update\", { step });\n      },\n      \"data_entry_flow_progressed\"\n    );\n    window.open(this.step.url);\n  }\n\n  static get styles(): CSSResultArray {\n    return [\n      configFlowContentStyles,\n      css`\n        .open-button {\n          text-align: center;\n          padding: 24px 0;\n        }\n        .open-button a {\n          text-decoration: none;\n        }\n      `,\n    ];\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"step-flow-external\": StepFlowExternal;\n  }\n}\n","import {\n  LitElement,\n  TemplateResult,\n  html,\n  CSSResultArray,\n  css,\n  customElement,\n  property,\n  PropertyValues,\n} from \"lit-element\";\nimport \"@material/mwc-button\";\nimport \"@polymer/paper-tooltip/paper-tooltip\";\nimport \"@polymer/paper-spinner/paper-spinner\";\n\nimport \"../../components/ha-form\";\nimport \"../../components/ha-markdown\";\nimport \"../../resources/ha-style\";\nimport {\n  handleConfigFlowStep,\n  FieldSchema,\n  ConfigFlowStepForm,\n} from \"../../data/config_entries\";\nimport { PolymerChangedEvent, applyPolymerEvent } from \"../../polymer-types\";\nimport { HomeAssistant } from \"../../types\";\nimport { fireEvent } from \"../../common/dom/fire_event\";\nimport { localizeKey } from \"../../common/translations/localize\";\nimport { configFlowContentStyles } from \"./styles\";\n\n@customElement(\"step-flow-form\")\nclass StepFlowForm extends LitElement {\n  @property()\n  public step!: ConfigFlowStepForm;\n\n  @property()\n  public hass!: HomeAssistant;\n\n  @property()\n  private _loading = false;\n\n  @property()\n  private _stepData?: { [key: string]: any };\n\n  @property()\n  private _errorMsg?: string;\n\n  protected render(): TemplateResult | void {\n    const localize = this.hass.localize;\n    const step = this.step;\n\n    const allRequiredInfoFilledIn =\n      this._stepData === undefined\n        ? // If no data filled in, just check that any field is required\n          step.data_schema.find((field) => !field.optional) === undefined\n        : // If data is filled in, make sure all required fields are\n          this._stepData &&\n          step.data_schema.every(\n            (field) =>\n              field.optional ||\n              ![\"\", undefined].includes(this._stepData![field.name])\n          );\n\n    const description = localizeKey(\n      localize,\n      `component.${step.handler}.config.step.${step.step_id}.description`,\n      step.description_placeholders\n    );\n\n    return html`\n      <h2>\n        ${localize(\n          `component.${step.handler}.config.step.${step.step_id}.title`\n        )}\n      </h2>\n      <div class=\"content\">\n        ${this._errorMsg\n          ? html`\n              <div class=\"error\">${this._errorMsg}</div>\n            `\n          : \"\"}\n        ${description\n          ? html`\n              <ha-markdown .content=${description} allow-svg></ha-markdown>\n            `\n          : \"\"}\n        <ha-form\n          .data=${this._stepDataProcessed}\n          @data-changed=${this._stepDataChanged}\n          .schema=${step.data_schema}\n          .error=${step.errors}\n          .computeLabel=${this._labelCallback}\n          .computeError=${this._errorCallback}\n        ></ha-form>\n      </div>\n      <div class=\"buttons\">\n        ${this._loading\n          ? html`\n              <div class=\"submit-spinner\">\n                <paper-spinner active></paper-spinner>\n              </div>\n            `\n          : html`\n              <div>\n                <mwc-button\n                  @click=${this._submitStep}\n                  .disabled=${!allRequiredInfoFilledIn}\n                >\n                  Submit\n                </mwc-button>\n\n                ${!allRequiredInfoFilledIn\n                  ? html`\n                      <paper-tooltip position=\"left\">\n                        Not all required fields are filled in.\n                      </paper-tooltip>\n                    `\n                  : html``}\n              </div>\n            `}\n      </div>\n    `;\n  }\n\n  protected firstUpdated(changedProps: PropertyValues) {\n    super.firstUpdated(changedProps);\n    this.addEventListener(\"keypress\", (ev) => {\n      if (ev.keyCode === 13) {\n        this._submitStep();\n      }\n    });\n  }\n\n  private get _stepDataProcessed() {\n    if (this._stepData !== undefined) {\n      return this._stepData;\n    }\n\n    const data = {};\n    this.step.data_schema.forEach((field) => {\n      if (\"default\" in field) {\n        data[field.name] = field.default;\n      }\n    });\n    return data;\n  }\n\n  private async _submitStep(): Promise<void> {\n    this._loading = true;\n    this._errorMsg = undefined;\n\n    const flowId = this.step.flow_id;\n    const stepData = this._stepData || {};\n\n    const toSendData = {};\n    Object.keys(stepData).forEach((key) => {\n      const value = stepData[key];\n      const isEmpty = [undefined, \"\"].includes(value);\n\n      if (!isEmpty) {\n        toSendData[key] = value;\n      }\n    });\n\n    try {\n      const step = await handleConfigFlowStep(\n        this.hass,\n        this.step.flow_id,\n        toSendData\n      );\n\n      // make sure we're still showing the same step as when we\n      // fired off request.\n      if (!this.step || flowId !== this.step.flow_id) {\n        return;\n      }\n\n      fireEvent(this, \"flow-update\", {\n        step,\n      });\n    } catch (err) {\n      this._errorMsg =\n        (err && err.body && err.body.message) || \"Unknown error occurred\";\n    } finally {\n      this._loading = false;\n    }\n  }\n\n  private _stepDataChanged(ev: PolymerChangedEvent<any>): void {\n    this._stepData = applyPolymerEvent(ev, this._stepData);\n  }\n\n  private _labelCallback = (schema: FieldSchema): string => {\n    const step = this.step as ConfigFlowStepForm;\n\n    return this.hass.localize(\n      `component.${step.handler}.config.step.${step.step_id}.data.${\n        schema.name\n      }`\n    );\n  };\n\n  private _errorCallback = (error: string) =>\n    this.hass.localize(`component.${this.step.handler}.config.error.${error}`);\n\n  static get styles(): CSSResultArray {\n    return [\n      configFlowContentStyles,\n      css`\n        .error {\n          color: red;\n        }\n\n        .submit-spinner {\n          margin-right: 16px;\n        }\n      `,\n    ];\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"step-flow-form\": StepFlowForm;\n  }\n}\n","import {\n  LitElement,\n  TemplateResult,\n  html,\n  css,\n  customElement,\n  CSSResult,\n} from \"lit-element\";\nimport \"@polymer/paper-spinner/paper-spinner-lite\";\n\n@customElement(\"step-flow-loading\")\nclass StepFlowLoading extends LitElement {\n  protected render(): TemplateResult | void {\n    return html`\n      <div class=\"init-spinner\">\n        <paper-spinner-lite active></paper-spinner-lite>\n      </div>\n    `;\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      .init-spinner {\n        padding: 50px 100px;\n        text-align: center;\n      }\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"step-flow-loading\": StepFlowLoading;\n  }\n}\n","import {\n  LitElement,\n  TemplateResult,\n  html,\n  css,\n  customElement,\n  CSSResult,\n} from \"lit-element\";\nimport \"@polymer/paper-spinner/paper-spinner-lite\";\nimport \"@polymer/paper-item/paper-item\";\nimport \"@polymer/paper-item/paper-item-body\";\nimport { HomeAssistant } from \"../../types\";\nimport { createConfigFlow } from \"../../data/config_entries\";\nimport { fireEvent } from \"../../common/dom/fire_event\";\nimport \"../../components/ha-icon-next\";\n\n@customElement(\"step-flow-pick-handler\")\nclass StepFlowPickHandler extends LitElement {\n  public hass!: HomeAssistant;\n  public handlers!: string[];\n\n  protected render(): TemplateResult | void {\n    return html`\n      <h2>${this.hass.localize(\"ui.panel.config.integrations.new\")}</h2>\n      <div>\n        ${this.handlers.map(\n          (handler) =>\n            html`\n              <paper-item @click=${this._handlerPicked} .handler=${handler}>\n                <paper-item-body>\n                  ${this.hass.localize(`component.${handler}.config.title`)}\n                </paper-item-body>\n                <ha-icon-next></ha-icon-next>\n              </paper-item>\n            `\n        )}\n      </div>\n    `;\n  }\n\n  private async _handlerPicked(ev) {\n    fireEvent(this, \"flow-update\", {\n      stepPromise: createConfigFlow(this.hass, ev.currentTarget.handler),\n    });\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      h2 {\n        padding-left: 16px;\n      }\n      div {\n        overflow: auto;\n        max-height: 600px;\n      }\n      paper-item {\n        cursor: pointer;\n      }\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"step-flow-pick-handler\": StepFlowPickHandler;\n  }\n}\n","import { css } from \"lit-element\";\n\nexport const configFlowContentStyles = css`\n  h2 {\n    margin-top: 24px;\n    padding: 0 24px;\n  }\n\n  .content {\n    margin-top: 20px;\n    padding: 0 24px;\n  }\n\n  .buttons {\n    position: relative;\n    padding: 8px 8px 8px 24px;\n    margin: 0;\n    color: var(--primary-color);\n    display: flex;\n    justify-content: flex-end;\n  }\n\n  ha-markdown {\n    overflow-wrap: break-word;\n  }\n  ha-markdown a {\n    color: var(--primary-color);\n  }\n  ha-markdown img:first-child:last-child {\n    display: block;\n    margin: 0 auto;\n  }\n`;\n","import { dedupingMixin } from \"@polymer/polymer/lib/utils/mixin\";\n\nimport { fireEvent } from \"../common/dom/fire_event\";\n\n// Polymer legacy event helpers used courtesy of the Polymer project.\n//\n// Copyright (c) 2017 The Polymer Authors. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without\n// modification, are permitted provided that the following conditions are\n// met:\n//\n//    * Redistributions of source code must retain the above copyright\n// notice, this list of conditions and the following disclaimer.\n//    * Redistributions in binary form must reproduce the above\n// copyright notice, this list of conditions and the following disclaimer\n// in the documentation and/or other materials provided with the\n// distribution.\n//    * Neither the name of Google Inc. nor the names of its\n// contributors may be used to endorse or promote products derived from\n// this software without specific prior written permission.\n//\n// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n// \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n// LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n// A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n// OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n// SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n// LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n// DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n// THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n// (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n// OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n\n/* @polymerMixin */\nexport const EventsMixin = dedupingMixin(\n  (superClass) =>\n    class extends superClass {\n      /**\n   * Dispatches a custom event with an optional detail value.\n   *\n   * @param {string} type Name of event type.\n   * @param {*=} detail Detail value containing event-specific\n   *   payload.\n   * @param {{ bubbles: (boolean|undefined),\n               cancelable: (boolean|undefined),\n                composed: (boolean|undefined) }=}\n    *  options Object specifying options.  These may include:\n    *  `bubbles` (boolean, defaults to `true`),\n    *  `cancelable` (boolean, defaults to false), and\n    *  `node` on which to fire the event (HTMLElement, defaults to `this`).\n    * @return {Event} The new event that was fired.\n    */\n      fire(type, detail, options) {\n        options = options || {};\n        return fireEvent(options.node || this, type, detail, options);\n      }\n    }\n);\n","export const applyPolymerEvent = <T>(\n  ev: PolymerChangedEvent<T>,\n  curValue: T\n): T => {\n  const { path, value } = ev.detail;\n  if (!path) {\n    return value;\n  }\n  const propName = path.split(\".\")[1];\n  return { ...curValue, [propName]: value };\n};\n\nexport interface PolymerChangedEvent<T> extends Event {\n  detail: {\n    value: T;\n    path?: string;\n    queueProperty: boolean;\n  };\n}\n\nexport interface PolymerIronSelectEvent<T> extends Event {\n  detail: {\n    item: T;\n  };\n}\n\ndeclare global {\n  // for fire event\n  interface HASSDomEvents {\n    \"hass-logout\": undefined;\n    \"iron-resize\": undefined;\n    \"config-refresh\": undefined;\n    \"hass-api-called\": {\n      success: boolean;\n      response: unknown;\n    };\n  }\n}\n"],"sourceRoot":""}