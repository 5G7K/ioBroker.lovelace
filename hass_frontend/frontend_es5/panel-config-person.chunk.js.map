{"version":3,"sources":["webpack:///./node_modules/@polymer/paper-styles/element-styles/paper-material-styles.js","webpack:///./src/common/string/compare.ts","webpack:///./src/data/person.ts","webpack:///./src/data/user.ts","webpack:///./src/panels/config/ha-config-section.js","webpack:///./src/panels/config/person/ha-config-person.ts","webpack:///./src/panels/config/person/show-dialog-person-detail.ts"],"names":["template","html","setAttribute","document","head","appendChild","content","compare","a","b","caseInsensitiveCompare","toLowerCase","fetchPersons","hass","callWS","type","createPerson","values","updatePerson","personId","updates","person_id","deletePerson","SYSTEM_GROUP_ID_ADMIN","SYSTEM_GROUP_ID_USER","SYSTEM_GROUP_ID_READ_ONLY","fetchUsers","createUser","name","updateUser","userId","params","user_id","deleteUser","HaConfigSection","isWide","classes","Object","narrow","Boolean","value","PolymerElement","customElements","define","HaConfigPerson","_storageItems","undefined","_configItems","length","map","entry","_openEditEntry","_createPerson","changedProps","_fetchData","loadPersonDetailDialog","_usersLoad","personData","storage","sort","ent1","ent2","config","_openDialog","ev","currentTarget","users","currentPerson","used","Set","coll","pers","add","currentUserId","filter","user","id","has","showPersonDetailDialog","_allowedUsers","createEntry","created","concat","updateEntry","updated","ent","removeEntry","confirm","css","LitElement","element","systemLogDetailParams","fireEvent","dialogTag","dialogImport","dialogParams"],"mappings":"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","file":"panel-config-person.chunk.js","sourcesContent":["/**\n@license\nCopyright (c) 2017 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at\nhttp://polymer.github.io/LICENSE.txt The complete set of authors may be found at\nhttp://polymer.github.io/AUTHORS.txt The complete set of contributors may be\nfound at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as\npart of the polymer project is also subject to an additional IP rights grant\nfound at http://polymer.github.io/PATENTS.txt\n*/\n/**\nMaterial design:\n[Cards](https://www.google.com/design/spec/components/cards.html)\n\nShared styles that you can apply to an element to renders two shadows on top\nof each other,that create the effect of a lifted piece of paper.\n\nExample:\n\n    <custom-style>\n      <style is=\"custom-style\" include=\"paper-material-styles\"></style>\n    </custom-style>\n\n    <div class=\"paper-material\" elevation=\"1\">\n      ... content ...\n    </div>\n\n@group Paper Elements\n@demo demo/index.html\n*/\n\nimport '@polymer/polymer/polymer-legacy.js';\nimport '../shadow.js';\n\nimport {html} from '@polymer/polymer/lib/utils/html-tag.js';\nconst template = html`\n<dom-module id=\"paper-material-styles\">\n  <template>\n    <style>\n      html {\n        --paper-material: {\n          display: block;\n          position: relative;\n        };\n        --paper-material-elevation-1: {\n          @apply --shadow-elevation-2dp;\n        };\n        --paper-material-elevation-2: {\n          @apply --shadow-elevation-4dp;\n        };\n        --paper-material-elevation-3: {\n          @apply --shadow-elevation-6dp;\n        };\n        --paper-material-elevation-4: {\n          @apply --shadow-elevation-8dp;\n        };\n        --paper-material-elevation-5: {\n          @apply --shadow-elevation-16dp;\n        };\n      }\n      .paper-material {\n        @apply --paper-material;\n      }\n      .paper-material[elevation=\"1\"] {\n        @apply --paper-material-elevation-1;\n      }\n      .paper-material[elevation=\"2\"] {\n        @apply --paper-material-elevation-2;\n      }\n      .paper-material[elevation=\"3\"] {\n        @apply --paper-material-elevation-3;\n      }\n      .paper-material[elevation=\"4\"] {\n        @apply --paper-material-elevation-4;\n      }\n      .paper-material[elevation=\"5\"] {\n        @apply --paper-material-elevation-5;\n      }\n\n      /* Duplicate the styles because of https://github.com/webcomponents/shadycss/issues/193 */\n      :host {\n        --paper-material: {\n          display: block;\n          position: relative;\n        };\n        --paper-material-elevation-1: {\n          @apply --shadow-elevation-2dp;\n        };\n        --paper-material-elevation-2: {\n          @apply --shadow-elevation-4dp;\n        };\n        --paper-material-elevation-3: {\n          @apply --shadow-elevation-6dp;\n        };\n        --paper-material-elevation-4: {\n          @apply --shadow-elevation-8dp;\n        };\n        --paper-material-elevation-5: {\n          @apply --shadow-elevation-16dp;\n        };\n      }\n      :host(.paper-material) {\n        @apply --paper-material;\n      }\n      :host(.paper-material[elevation=\"1\"]) {\n        @apply --paper-material-elevation-1;\n      }\n      :host(.paper-material[elevation=\"2\"]) {\n        @apply --paper-material-elevation-2;\n      }\n      :host(.paper-material[elevation=\"3\"]) {\n        @apply --paper-material-elevation-3;\n      }\n      :host(.paper-material[elevation=\"4\"]) {\n        @apply --paper-material-elevation-4;\n      }\n      :host(.paper-material[elevation=\"5\"]) {\n        @apply --paper-material-elevation-5;\n      }\n    </style>\n  </template>\n</dom-module>`;\ntemplate.setAttribute('style', 'display: none;');\ndocument.head.appendChild(template.content);\n","export const compare = (a: string, b: string) => {\n  if (a < b) {\n    return -1;\n  }\n  if (a > b) {\n    return 1;\n  }\n\n  return 0;\n};\n\nexport const caseInsensitiveCompare = (a: string, b: string) =>\n  compare(a.toLowerCase(), b.toLowerCase());\n","import { HomeAssistant } from \"../types\";\n\nexport interface Person {\n  id: string;\n  name: string;\n  user_id?: string;\n  device_trackers?: string[];\n}\n\nexport interface PersonMutableParams {\n  name: string;\n  user_id: string | null;\n  device_trackers: string[];\n}\n\nexport const fetchPersons = (hass: HomeAssistant) =>\n  hass.callWS<{\n    storage: Person[];\n    config: Person[];\n  }>({ type: \"person/list\" });\n\nexport const createPerson = (\n  hass: HomeAssistant,\n  values: PersonMutableParams\n) =>\n  hass.callWS<Person>({\n    type: \"person/create\",\n    ...values,\n  });\n\nexport const updatePerson = (\n  hass: HomeAssistant,\n  personId: string,\n  updates: Partial<PersonMutableParams>\n) =>\n  hass.callWS<Person>({\n    type: \"person/update\",\n    person_id: personId,\n    ...updates,\n  });\n\nexport const deletePerson = (hass: HomeAssistant, personId: string) =>\n  hass.callWS({\n    type: \"person/delete\",\n    person_id: personId,\n  });\n","import { HomeAssistant } from \"../types\";\nimport { Credential } from \"./auth\";\n\nexport const SYSTEM_GROUP_ID_ADMIN = \"system-admin\";\nexport const SYSTEM_GROUP_ID_USER = \"system-users\";\nexport const SYSTEM_GROUP_ID_READ_ONLY = \"system-read-only\";\n\nexport interface User {\n  id: string;\n  name: string;\n  is_owner: boolean;\n  is_active: boolean;\n  system_generated: boolean;\n  group_ids: string[];\n  credentials: Credential[];\n}\n\ninterface UpdateUserParams {\n  name?: User[\"name\"];\n  group_ids?: User[\"group_ids\"];\n}\n\nexport const fetchUsers = async (hass: HomeAssistant) =>\n  hass.callWS<User[]>({\n    type: \"config/auth/list\",\n  });\n\nexport const createUser = async (hass: HomeAssistant, name: string) =>\n  hass.callWS<{ user: User }>({\n    type: \"config/auth/create\",\n    name,\n  });\n\nexport const updateUser = async (\n  hass: HomeAssistant,\n  userId: string,\n  params: UpdateUserParams\n) =>\n  hass.callWS<{ user: User }>({\n    ...params,\n    type: \"config/auth/update\",\n    user_id: userId,\n  });\n\nexport const deleteUser = async (hass: HomeAssistant, userId: string) =>\n  hass.callWS<void>({\n    type: \"config/auth/delete\",\n    user_id: userId,\n  });\n","import { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport \"../../resources/ha-style\";\n\nclass HaConfigSection extends PolymerElement {\n  static get template() {\n    return html`\n      <style include=\"iron-flex ha-style\">\n        .content {\n          padding: 28px 20px 0;\n          max-width: 1040px;\n          margin: 0 auto;\n        }\n\n        .header {\n          @apply --paper-font-display1;\n          opacity: var(--dark-primary-opacity);\n        }\n\n        .together {\n          margin-top: 32px;\n        }\n\n        .intro {\n          @apply --paper-font-subhead;\n          width: 100%;\n          max-width: 400px;\n          margin-right: 40px;\n          opacity: var(--dark-primary-opacity);\n        }\n\n        .panel {\n          margin-top: -24px;\n        }\n\n        .panel ::slotted(*) {\n          margin-top: 24px;\n          display: block;\n        }\n\n        .narrow.content {\n          max-width: 640px;\n        }\n        .narrow .together {\n          margin-top: 20px;\n        }\n        .narrow .header {\n          @apply --paper-font-headline;\n        }\n        .narrow .intro {\n          font-size: 14px;\n          padding-bottom: 20px;\n          margin-right: 0;\n          max-width: 500px;\n        }\n      </style>\n      <div class$=\"[[computeContentClasses(isWide)]]\">\n        <div class=\"header\"><slot name=\"header\"></slot></div>\n        <div class$=\"[[computeClasses(isWide)]]\">\n          <div class=\"intro\"><slot name=\"introduction\"></slot></div>\n          <div class=\"panel flex-auto\"><slot></slot></div>\n        </div>\n      </div>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: {\n        type: Object,\n      },\n\n      narrow: {\n        type: Boolean,\n      },\n\n      isWide: {\n        type: Boolean,\n        value: false,\n      },\n    };\n  }\n\n  computeContentClasses(isWide) {\n    var classes = \"content \";\n\n    return isWide ? classes : classes + \"narrow\";\n  }\n\n  computeClasses(isWide) {\n    var classes = \"together layout \";\n\n    return classes + (isWide ? \"horizontal\" : \"vertical narrow\");\n  }\n}\n\ncustomElements.define(\"ha-config-section\", HaConfigSection);\n","import {\n  LitElement,\n  TemplateResult,\n  html,\n  css,\n  CSSResult,\n  PropertyDeclarations,\n} from \"lit-element\";\nimport \"@polymer/paper-item/paper-item\";\nimport \"@polymer/paper-item/paper-item-body\";\nimport \"@polymer/paper-fab/paper-fab\";\n\nimport { HomeAssistant } from \"../../../types\";\nimport {\n  Person,\n  fetchPersons,\n  updatePerson,\n  deletePerson,\n  createPerson,\n} from \"../../../data/person\";\nimport \"../../../components/ha-card\";\nimport \"../../../layouts/hass-subpage\";\nimport \"../../../layouts/hass-loading-screen\";\nimport { compare } from \"../../../common/string/compare\";\nimport \"../ha-config-section\";\nimport {\n  showPersonDetailDialog,\n  loadPersonDetailDialog,\n} from \"./show-dialog-person-detail\";\nimport { User, fetchUsers } from \"../../../data/user\";\n\nclass HaConfigPerson extends LitElement {\n  public hass?: HomeAssistant;\n  public isWide?: boolean;\n  private _storageItems?: Person[];\n  private _configItems?: Person[];\n  private _usersLoad?: Promise<User[]>;\n\n  static get properties(): PropertyDeclarations {\n    return {\n      hass: {},\n      isWide: {},\n      _storageItems: {},\n      _configItems: {},\n    };\n  }\n\n  protected render(): TemplateResult | void {\n    if (\n      !this.hass ||\n      this._storageItems === undefined ||\n      this._configItems === undefined\n    ) {\n      return html`\n        <hass-loading-screen></hass-loading-screen>\n      `;\n    }\n    return html`\n      <hass-subpage header=\"Persons\">\n        <ha-config-section .isWide=${this.isWide}>\n          <span slot=\"header\">Persons</span>\n          <span slot=\"introduction\">\n            Here you can define each person of interest in Home Assistant.\n            ${this._configItems.length > 0\n              ? html`\n                  <p>\n                    Note: persons configured via configuration.yaml cannot be\n                    edited via the UI.\n                  </p>\n                `\n              : \"\"}\n          </span>\n          <ha-card class=\"storage\">\n            ${this._storageItems.map((entry) => {\n              return html`\n                <paper-item @click=${this._openEditEntry} .entry=${entry}>\n                  <paper-item-body>\n                    ${entry.name}\n                  </paper-item-body>\n                </paper-item>\n              `;\n            })}\n            ${this._storageItems.length === 0\n              ? html`\n                  <div class=\"empty\">\n                    Looks like you have not created any persons yet.\n                    <mwc-button @click=${this._createPerson}>\n                      CREATE PERSON</mwc-button\n                    >\n                  </div>\n                `\n              : html``}\n          </ha-card>\n          ${this._configItems.length > 0\n            ? html`\n                <ha-card header=\"Configuration.yaml persons\">\n                  ${this._configItems.map((entry) => {\n                    return html`\n                      <paper-item>\n                        <paper-item-body>\n                          ${entry.name}\n                        </paper-item-body>\n                      </paper-item>\n                    `;\n                  })}\n                </ha-card>\n              `\n            : \"\"}\n        </ha-config-section>\n      </hass-subpage>\n\n      <paper-fab\n        ?is-wide=${this.isWide}\n        icon=\"hass:plus\"\n        title=\"Create Area\"\n        @click=${this._createPerson}\n      ></paper-fab>\n    `;\n  }\n\n  protected firstUpdated(changedProps) {\n    super.firstUpdated(changedProps);\n    this._fetchData();\n    loadPersonDetailDialog();\n  }\n\n  private async _fetchData() {\n    this._usersLoad = fetchUsers(this.hass!);\n    const personData = await fetchPersons(this.hass!);\n\n    this._storageItems = personData.storage.sort((ent1, ent2) =>\n      compare(ent1.name, ent2.name)\n    );\n    this._configItems = personData.config.sort((ent1, ent2) =>\n      compare(ent1.name, ent2.name)\n    );\n  }\n\n  private _createPerson() {\n    this._openDialog();\n  }\n\n  private _openEditEntry(ev: MouseEvent) {\n    const entry: Person = (ev.currentTarget! as any).entry;\n    this._openDialog(entry);\n  }\n\n  private _allowedUsers(users: User[], currentPerson?: Person) {\n    const used = new Set();\n    for (const coll of [this._configItems, this._storageItems]) {\n      for (const pers of coll!) {\n        if (pers.user_id) {\n          used.add(pers.user_id);\n        }\n      }\n    }\n    const currentUserId = currentPerson ? currentPerson.user_id : undefined;\n    return users.filter(\n      (user) => user.id === currentUserId || !used.has(user.id)\n    );\n  }\n\n  private async _openDialog(entry?: Person) {\n    const users = await this._usersLoad!;\n\n    showPersonDetailDialog(this, {\n      entry,\n      users: this._allowedUsers(users, entry),\n      createEntry: async (values) => {\n        const created = await createPerson(this.hass!, values);\n        this._storageItems = this._storageItems!.concat(created).sort(\n          (ent1, ent2) => compare(ent1.name, ent2.name)\n        );\n      },\n      updateEntry: async (values) => {\n        const updated = await updatePerson(this.hass!, entry!.id, values);\n        this._storageItems = this._storageItems!.map((ent) =>\n          ent === entry ? updated : ent\n        );\n      },\n      removeEntry: async () => {\n        if (\n          !confirm(`Are you sure you want to delete this person?\n\nAll devices belonging to this person will become unassigned.`)\n        ) {\n          return false;\n        }\n\n        try {\n          await deletePerson(this.hass!, entry!.id);\n          this._storageItems = this._storageItems!.filter(\n            (ent) => ent !== entry\n          );\n          return true;\n        } catch (err) {\n          return false;\n        }\n      },\n    });\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      a {\n        color: var(--primary-color);\n      }\n      ha-card {\n        max-width: 600px;\n        margin: 16px auto;\n        overflow: hidden;\n      }\n      .empty {\n        text-align: center;\n        padding: 8px;\n      }\n      paper-item {\n        padding-top: 4px;\n        padding-bottom: 4px;\n      }\n      ha-card.storage paper-item {\n        cursor: pointer;\n      }\n      paper-fab {\n        position: fixed;\n        bottom: 16px;\n        right: 16px;\n        z-index: 1;\n      }\n\n      paper-fab[is-wide] {\n        bottom: 24px;\n        right: 24px;\n      }\n    `;\n  }\n}\n\ncustomElements.define(\"ha-config-person\", HaConfigPerson);\n","import { fireEvent } from \"../../../common/dom/fire_event\";\nimport { Person, PersonMutableParams } from \"../../../data/person\";\nimport { User } from \"../../../data/user\";\n\nexport interface PersonDetailDialogParams {\n  entry?: Person;\n  users: User[];\n  createEntry: (values: PersonMutableParams) => Promise<unknown>;\n  updateEntry: (updates: Partial<PersonMutableParams>) => Promise<unknown>;\n  removeEntry: () => Promise<boolean>;\n}\n\nexport const loadPersonDetailDialog = () =>\n  import(/* webpackChunkName: \"person-detail-dialog\" */ \"./dialog-person-detail\");\n\nexport const showPersonDetailDialog = (\n  element: HTMLElement,\n  systemLogDetailParams: PersonDetailDialogParams\n): void => {\n  fireEvent(element, \"show-dialog\", {\n    dialogTag: \"dialog-person-detail\",\n    dialogImport: loadPersonDetailDialog,\n    dialogParams: systemLogDetailParams,\n  });\n};\n"],"sourceRoot":""}