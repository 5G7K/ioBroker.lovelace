{"version":3,"sources":["webpack:///./node_modules/@polymer/paper-item/paper-item-behavior.js","webpack:///./node_modules/@polymer/paper-item/paper-item.js","webpack:///./node_modules/@polymer/paper-item/paper-item-shared-styles.js","webpack:///../src/rpc-wrapper.js","webpack:///./src/mixins/localize-mixin.js","webpack:///./src/common/entity/compute_state_name.ts","webpack:///./src/components/ha-card.ts","webpack:///./src/common/entity/domain_icon.ts","webpack:///./src/mixins/events-mixin.js","webpack:///./src/components/ha-icon.ts","webpack:///./src/common/entity/compute_state_domain.ts","webpack:///./node_modules/@polymer/iron-flex-layout/iron-flex-layout-classes.js","webpack:///./node_modules/@polymer/paper-item/paper-item-body.js","webpack:///../src/directives/class-map.ts","webpack:///./src/components/entity/state-badge.ts","webpack:///./src/common/entity/compute_object_id.ts","webpack:///./src/common/util/debounce.ts","webpack:///./src/common/entity/sensor_icon.ts","webpack:///./src/common/entity/state_icon.ts","webpack:///./src/common/entity/binary_sensor_icon.ts","webpack:///./src/common/entity/cover_icon.ts","webpack:///./src/common/entity/input_dateteime_icon.ts","webpack:///./node_modules/@polymer/paper-item/paper-icon-item.js","webpack:///./src/panels/config/ha-config-section.js","webpack:///./src/common/string/compare.ts","webpack:///./src/data/device_registry.ts","webpack:///./src/data/area_registry.ts","webpack:///./src/dialogs/confirmation/show-dialog-confirmation.ts","webpack:///./src/data/entity_registry.ts","webpack:///./src/components/ha-fab.ts","webpack:///./node_modules/@polymer/app-route/app-route.js","webpack:///./node_modules/@polymer/paper-tooltip/paper-tooltip.js","webpack:///./src/components/ha-icon-next.ts","webpack:///./node_modules/deep-clone-simple/index.js","webpack:///./src/common/search/search-input.ts","webpack:///./src/common/util/render-status.ts","webpack:///../src/directives/repeat.ts","webpack:///./src/data/config_entries.ts","webpack:///./src/components/data-table/sort_filter_worker.ts","webpack:///./src/components/ha-checkbox.ts","webpack:///./src/components/data-table/ha-data-table.ts","webpack:///./src/data/config_flow.ts","webpack:///./src/dialogs/config-flow/show-dialog-data-entry-flow.ts","webpack:///./src/components/entity/ha-state-icon.js","webpack:///./src/dialogs/config-flow/show-dialog-config-flow.ts","webpack:///./src/panels/config/devices/ha-devices-data-table.ts","webpack:///./src/panels/config/integrations/ha-config-entries-dashboard.ts","webpack:///./src/panels/config/integrations/config-entry/ha-ce-entities-card.js","webpack:///./src/data/options_flow.ts","webpack:///./src/dialogs/config-flow/show-dialog-options-flow.ts","webpack:///./src/dialogs/config-entry-system-options/show-dialog-config-entry-system-options.ts","webpack:///./src/panels/config/integrations/config-entry/ha-config-entry-page.ts","webpack:///./src/panels/config/integrations/ha-config-integrations.ts"],"names":["__webpack_require__","d","__webpack_exports__","PaperItemBehavior","_polymer_iron_behaviors_iron_button_state_js__WEBPACK_IMPORTED_MODULE_1__","_polymer_iron_behaviors_iron_control_state_js__WEBPACK_IMPORTED_MODULE_2__","IronButtonState","IronControlState","hostAttributes","role","tabindex","Polymer","_template","html","_templateObject","is","behaviors","$_documentContainer","document","createElement","setAttribute","innerHTML","head","appendChild","content","worker","methods","c","callbacks","e","data","id","f","error","Object","Error","evt","method","Promise","a","b","type","params","dedupingMixin","superClass","_superClass","_class","_classCallCheck","this","_possibleConstructorReturn","_getPrototypeOf","apply","arguments","_inherits","key","get","hass","localize","Function","computed","value","computeStateName","_compute_object_id__WEBPACK_IMPORTED_MODULE_0__","stateObj","undefined","attributes","friendly_name","computeObjectId","entity_id","replace","HaCard","property","css","_templateObject2","header","_templateObject3","_templateObject4","LitElement","customElements","define","domainIcon","_const__WEBPACK_IMPORTED_MODULE_0__","fixedIcons","alert","alexa","automation","calendar","camera","climate","configurator","conversation","counter","device_tracker","fan","google_assistant","group","history_graph","homeassistant","homekit","image_processing","input_boolean","input_datetime","input_number","input_select","input_text","light","mailbox","notify","persistent_notification","person","plant","proximity","remote","scene","script","sensor","simple_alarm","sun","switch","timer","updater","vacuum","water_heater","weather","weblink","zone","domain","state","console","warn","DEFAULT_DOMAIN_ICON","EventsMixin","detail","options","fireEvent","node","ironIconClass","loaded","HaIcon","_ironIconClass","_getPrototypeOf2","_this","_len","length","args","Array","_key","call","concat","_assertThisInitialized","eventName","methodName","_get","prototype","_iconsetName","then","bind","computeStateDomain","_compute_domain__WEBPACK_IMPORTED_MODULE_0__","computeDomain","template","classMap","_lit_html_js__WEBPACK_IMPORTED_MODULE_0__","classMapCache","WeakMap","classInfo","part","committer","name","parts","element","has","className","strings","join","classList","oldInfo","remove","_name","set","StateBadge","query","overrideIcon","stateIcon","changedProps","iconStyle","color","filter","hostStyle","backgroundImage","entity_picture","overrideImage","imageUrl","hassUrl","display","hs_color","hue","sat","brightness","errorMessage","_typeof","assign","_icon","style","entityId","substr","indexOf","debounce","func","wait","timeout","immediate","context","callNow","clearTimeout","setTimeout","fixedDeviceClassIcons","humidity","illuminance","temperature","pressure","power","signal_strength","state_icon_stateIcon","domainIcons","binary_sensor","activated","device_class","cover","open","dclass","battery","Number","isNaN","batteryRound","Math","round","unit","unit_of_measurement","UNIT_C","UNIT_F","has_date","has_time","icon","HaConfigSection","PolymerElement","narrow","Boolean","isWide","classes","compare","caseInsensitiveCompare","toLowerCase","computeDeviceName","updateDeviceRegistryEntry","subscribeDeviceRegistry","home_assistant_js_websocket__WEBPACK_IMPORTED_MODULE_0__","_common_util_debounce__WEBPACK_IMPORTED_MODULE_1__","_common_entity_compute_state_name__WEBPACK_IMPORTED_MODULE_2__","device","entities","name_by_user","fallbackDeviceName","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","Symbol","iterator","next","done","entity","states","err","deviceId","updates","callWS","device_id","fetchDeviceRegistry","conn","sendMessagePromise","subscribeDeviceRegistryUpdates","store","subscribeEvents","devices","setState","onChange","createCollection","createAreaRegistryEntry","updateAreaRegistryEntry","deleteAreaRegistryEntry","subscribeAreaRegistry","_common_string_compare__WEBPACK_IMPORTED_MODULE_1__","_common_util_debounce__WEBPACK_IMPORTED_MODULE_2__","values","areaId","area_id","fetchAreaRegistry","areas","sort","ent1","ent2","subscribeAreaRegistryUpdates","showConfirmationDialog","_common_dom_fire_event__WEBPACK_IMPORTED_MODULE_0__","loadConfirmationDialog","all","systemLogDetailParams","dialogTag","dialogImport","dialogParams","computeEntityRegistryName","updateEntityRegistryEntry","removeEntityRegistryEntry","subscribeEntityRegistry","_common_entity_compute_state_name__WEBPACK_IMPORTED_MODULE_1__","entry","fetchEntityRegistry","subscribeEntityRegistryUpdates","MwcFab","_decorate","customElement","_initialize","_MwcFab","F","_MwcFab2","HaFab","kind","mdc-fab--mini","mini","mdc-fab--exited","exited","mdc-fab--extended","extended","showLabel","label","ripple","disabled","showIconAtEnd","_polymer_polymer_lib_legacy_polymer_fn_js__WEBPACK_IMPORTED_MODULE_1__","properties","route","pattern","String","autoActivate","_queryParamsUpdating","queryParams","tail","path","prefix","__queryParams","active","readOnly","_matched","observers","created","linkPaths","__routeQueryParamsChanged","copyOfQueryParams","anythingChanged","__tailQueryParamsChanged","__queryParamsChanged","changes","__resetProperties","_setActive","__tryToMatch","remainingPieces","split","patternPieces","matched","namedMatches","i","patternPiece","pathPiece","shift","push","charAt","slice","propertyUpdates","tailPrefix","tailPath","_dataInUrl","setProperties","__setMulti","__tailPathChanged","newPath","__updatePathOnDataChange","__getLink","overrideValues","interp","map","setObj","_propertySetter","_pathEffector","_notifyChange","for","observer","manualMode","position","fitToVisibleBounds","offset","marginTop","animationDelay","animationEntry","animationExit","animationConfig","timing","delay","exit","_showing","listeners","webkitAnimationEnd","target","parentNode","dom","ownerRoot","getOwnerRoot","querySelector","nodeType","Node","DOCUMENT_FRAGMENT_NODE","host","attached","_findTarget","detached","_removeListeners","playAnimation","show","hide","cancelAnimation","$","tooltip","add","textContent","trim","allChildrenEmpty","effectiveChildren","getEffectiveChildNodes","_getAnimationType","updatePosition","_animationPlaying","_cancelAnimation","_onAnimationFinish","_target","offsetParent","tooltipLeft","tooltipTop","parentRect","getBoundingClientRect","targetRect","thisRect","horizontalCenterOffset","width","verticalCenterOffset","height","targetLeft","left","targetTop","top","window","innerWidth","right","max","innerHeight","bottom","_addListeners","listen","_delayChange","newValue","updateStyles","--paper-tooltip-delay-in","_manualModeChanged","_onAnimationEnd","timingDelay","--paper-tooltip-delay-out","unlisten","HaIconNext","_HaIcon","getComputedStyle","direction","deepcopy","toString","Date","getTime","isArray","result","keys","forEach","_filterInputChanged","_clearSearch","regeneratorRuntime","async","_context","prev","stop","_context2","_filterChanged","_context3","afterNextRender","nextRender","cb","requestAnimationFrame","resolve","repeat","createAndInsertPart","containerPart","beforePart","container","startNode","beforeNode","endNode","insertBefore","newPart","insertAfterNode","updatePart","setValue","commit","insertPartBefore","ref","nextSibling","removePart","generateMap","list","start","end","Map","partListCache","keyListCache","items","keyFnOrTemplate","keyFn","newKeyToIndexMap","oldKeyToIndexMap","oldParts","oldKeys","newParts","newValues","newKeys","index","item","oldHead","oldTail","newHead","newTail","oldIndex","oldPart","_newPart","_oldPart","getConfigEntries","deleteConfigEntry","getConfigEntrySystemOptions","updateConfigEntrySystemOptions","callApi","configEntryId","entry_id","addMethods","module","exports","w","Worker","p","MwcCheckbox","_MwcCheckbox","HaCheckbox","_MwcCheckbox2","setProperty","static","ha_data_table_decorate","_BaseElement","HaDataTable","_BaseElement2","ha_data_table_classCallCheck","ha_data_table_possibleConstructorReturn","ha_data_table_getPrototypeOf","ha_data_table_assertThisInitialized","ha_data_table_inherits","decorators","MDCDataTableFoundation","queryAll","_this2","ev","_filter","ha_data_table_get","_worker","sortFilterWorker","columnId","_filterable","columns","some","column","filterable","_sortDirection","_sortColumn","clonedColumns","deepClone","title","_sortColumns","_filterData","_this3","ha_data_table_templateObject","_handleSearchChange","selectable","_handleHeaderRowCheckboxChange","_headerIndeterminate","_headerChecked","entries","columnEntry","_columnEntry","_slicedToArray","sorted","mdc-data-table__header-cell--numeric","mdc-data-table__header-cell--icon","sortable","not-sorted","_handleHeaderClick","_templateObject5","_filteredData","row","_templateObject6","_handleRowClick","_templateObject7","_handleRowCheckboxChange","_checkedRows","includes","_columnEntry2","_templateObject8","mdc-data-table__cell--numeric","mdc-data-table__cell--icon","_this4","addClassAtRowIndex","rowIndex","cssClasses","rowElements","getRowCount","getRowElements","getRowIdAtIndex","_getRowIdAtIndex","getRowIndexByChildElement","el","closest","getSelectedRowCount","isCheckboxAtRowIndexChecked","isHeaderRowCheckboxChecked","isRowsSelectable","notifyRowSelectionChanged","notifySelectedAll","notifyUnselectedAll","registerHeaderRowCheckbox","registerRowCheckboxes","removeClassAtRowIndex","setAttributeAtRowIndex","attr","setHeaderRowCheckboxChecked","checked","setHeaderRowCheckboxIndeterminate","indeterminate","setRowCheckboxCheckedAtIndex","_setRowChecked","startTime","curRequest","filterProm","_ref","_ref2","curTime","elapsed","filterSortData","awrap","sent","abrupt","getAttribute","_headerCheckbox","mdcFoundation","handleHeaderRowCheckboxChange","checkbox","rowId","handleRowCheckboxChange","bubbles","_toConsumableArray","splice","selected","_debounceSearch","_templateObject9","BaseElement","createConfigFlow","fetchConfigFlow","handleConfigFlowStep","deleteConfigFlow","getConfigFlowHandlers","getConfigFlowInProgressCollection","subscribeConfigFlowInProgress","localizeConfigFlowTitle","_common_util_debounce__WEBPACK_IMPORTED_MODULE_0__","home_assistant_js_websocket__WEBPACK_IMPORTED_MODULE_1__","handler","flowId","fetchConfigFlowInProgress","subscribeConfigFlowInProgressUpdates","flows","getCollection","connection","subscribe","flow","placeholders","title_placeholders","placeholderKeys","loadDataEntryFlowDialog","showFlowDialog","flowConfig","HaStateIcon","loadConfigFlowDialog","showConfigFlowDialog","loadDevicesAndAreas","getFlowHandlers","handlers","handlerA","handlerB","createFlow","fetchFlow","handleFlowStep","deleteFlow","renderAbortDescription","step","description","localizeKey","reason","description_placeholders","renderShowFormStepHeader","step_id","renderShowFormStepDescription","renderShowFormStepFieldLabel","field","renderShowFormStepFieldError","renderExternalStepHeader","renderExternalStepDescription","renderCreateEntryDescription","_LitElement","_LitElement2","HaDevicesDataTable","memoizeOne","outputDevices","deviceLookup","deviceEntityLookup","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","entryLookup","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_step3","_iterator3","areaLookup","_iteratorNormalCompletion4","_didIteratorError4","_iteratorError4","_step4","_iterator4","area","config_entries","find","entryId","model","manufacturer","integration","entId","battery_entity","_batteryEntity","batteryEntity","_columns","_devices","_handleRowClicked","navigate","HaConfigManagerDashboard","configEntriesInProgress","_continueFlow","flow_id","entityRegistryEntries","configEntries","idx","_getEntities","_createFlow","computeRTL","dialogClosedCallback","showAdvanced","continueFlowId","configEntry","_this5","config_entry_id","HaCeEntitiesCard","LocalizeMixIn","ha_ce_entities_card_templateObject","heading","fire","createOptionsFlow","fetchOptionsFlow","handleOptionsFlowStep","deleteOptionsFlow","loadConfigEntrySystemOptionsDialog","HaConfigEntryPage","ent","_configEntry","ha_config_entry_page_templateObject","configEntryDevices","_computeConfigEntryDevices","deviceRegistryEntries","noDeviceEntities","_computeNoDeviceEntities","ha_config_entry_page_templateObject2","supports_options","ha_config_entry_page_templateObject3","_showSettings","_showSystemOptions","_confirmRemoveEntry","ha_config_entry_page_templateObject4","ha_config_entry_page_templateObject5","ha_config_entry_page_templateObject6","startFlowHandler","show_dialog_options_flow_templateObject","_hass","show_dialog_options_flow_templateObject2","text","confirm","_removeEntry","require_restart","ha_config_entry_page_templateObject7","HaConfigIntegrations","defaultPage","routes","dashboard","tag","config_entry","ha_config_integrations_get","ha_config_integrations_getPrototypeOf","_loadData","_unsubs","pop","addEventListener","refresh","pageEl","_entityRegistryEntries","_configEntries","_currentPage","routeTail","_deviceRegistryEntries","_areas","_configEntriesInProgress","conf1","conf2","flowsInProgress","HassRouterPage"],"mappings":"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","file":"chunk.d4352d47e818624545a0.js","sourcesContent":["/**\n@license\nCopyright (c) 2015 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at\nhttp://polymer.github.io/LICENSE.txt The complete set of authors may be found at\nhttp://polymer.github.io/AUTHORS.txt The complete set of contributors may be\nfound at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as\npart of the polymer project is also subject to an additional IP rights grant\nfound at http://polymer.github.io/PATENTS.txt\n*/\nimport '@polymer/polymer/polymer-legacy.js';\n\nimport {IronButtonState} from '@polymer/iron-behaviors/iron-button-state.js';\nimport {IronControlState} from '@polymer/iron-behaviors/iron-control-state.js';\n\n/*\n`PaperItemBehavior` is a convenience behavior shared by <paper-item> and\n<paper-icon-item> that manages the shared control states and attributes of\nthe items.\n*/\n/** @polymerBehavior PaperItemBehavior */\nexport const PaperItemBehaviorImpl = {\n  hostAttributes: {role: 'option', tabindex: '0'}\n};\n\n/** @polymerBehavior */\nexport const PaperItemBehavior =\n    [IronButtonState, IronControlState, PaperItemBehaviorImpl];\n","/**\n@license\nCopyright (c) 2015 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at\nhttp://polymer.github.io/LICENSE.txt The complete set of authors may be found at\nhttp://polymer.github.io/AUTHORS.txt The complete set of contributors may be\nfound at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as\npart of the polymer project is also subject to an additional IP rights grant\nfound at http://polymer.github.io/PATENTS.txt\n*/\nimport '@polymer/polymer/polymer-legacy.js';\nimport '@polymer/iron-flex-layout/iron-flex-layout.js';\nimport './paper-item-shared-styles.js';\n\nimport {Polymer} from '@polymer/polymer/lib/legacy/polymer-fn.js';\nimport {html} from '@polymer/polymer/lib/utils/html-tag.js';\n\nimport {PaperItemBehavior} from './paper-item-behavior.js';\n\n/**\nMaterial design:\n[Lists](https://www.google.com/design/spec/components/lists.html)\n\n`<paper-item>` is an interactive list item. By default, it is a horizontal\nflexbox.\n\n    <paper-item>Item</paper-item>\n\nUse this element with `<paper-item-body>` to make Material Design styled\ntwo-line and three-line items.\n\n    <paper-item>\n      <paper-item-body two-line>\n        <div>Show your status</div>\n        <div secondary>Your status is visible to everyone</div>\n      </paper-item-body>\n      <iron-icon icon=\"warning\"></iron-icon>\n    </paper-item>\n\nTo use `paper-item` as a link, wrap it in an anchor tag. Since `paper-item` will\nalready receive focus, you may want to prevent the anchor tag from receiving\nfocus as well by setting its tabindex to -1.\n\n    <a href=\"https://www.polymer-project.org/\" tabindex=\"-1\">\n      <paper-item raised>Polymer Project</paper-item>\n    </a>\n\nIf you are concerned about performance and want to use `paper-item` in a\n`paper-listbox` with many items, you can just use a native `button` with the\n`paper-item` class applied (provided you have correctly included the shared\nstyles):\n\n    <style is=\"custom-style\" include=\"paper-item-shared-styles\"></style>\n\n    <paper-listbox>\n      <button class=\"paper-item\" role=\"option\">Inbox</button>\n      <button class=\"paper-item\" role=\"option\">Starred</button>\n      <button class=\"paper-item\" role=\"option\">Sent mail</button>\n    </paper-listbox>\n\n### Styling\n\nThe following custom properties and mixins are available for styling:\n\nCustom property | Description | Default\n----------------|-------------|----------\n`--paper-item-min-height` | Minimum height of the item | `48px`\n`--paper-item` | Mixin applied to the item | `{}`\n`--paper-item-selected-weight` | The font weight of a selected item | `bold`\n`--paper-item-selected` | Mixin applied to selected paper-items | `{}`\n`--paper-item-disabled-color` | The color for disabled paper-items | `--disabled-text-color`\n`--paper-item-disabled` | Mixin applied to disabled paper-items | `{}`\n`--paper-item-focused` | Mixin applied to focused paper-items | `{}`\n`--paper-item-focused-before` | Mixin applied to :before focused paper-items | `{}`\n\n### Accessibility\n\nThis element has `role=\"listitem\"` by default. Depending on usage, it may be\nmore appropriate to set `role=\"menuitem\"`, `role=\"menuitemcheckbox\"` or\n`role=\"menuitemradio\"`.\n\n    <paper-item role=\"menuitemcheckbox\">\n      <paper-item-body>\n        Show your status\n      </paper-item-body>\n      <paper-checkbox></paper-checkbox>\n    </paper-item>\n\n@group Paper Elements\n@element paper-item\n@demo demo/index.html\n*/\nPolymer({\n  _template: html`\n    <style include=\"paper-item-shared-styles\">\n      :host {\n        @apply --layout-horizontal;\n        @apply --layout-center;\n        @apply --paper-font-subhead;\n\n        @apply --paper-item;\n      }\n    </style>\n    <slot></slot>\n`,\n\n  is: 'paper-item',\n  behaviors: [PaperItemBehavior]\n});\n","/**\n@license\nCopyright (c) 2015 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at\nhttp://polymer.github.io/LICENSE.txt The complete set of authors may be found at\nhttp://polymer.github.io/AUTHORS.txt The complete set of contributors may be\nfound at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as\npart of the polymer project is also subject to an additional IP rights grant\nfound at http://polymer.github.io/PATENTS.txt\n*/\nimport '@polymer/iron-flex-layout/iron-flex-layout.js';\nimport '@polymer/paper-styles/color.js';\nimport '@polymer/paper-styles/default-theme.js';\nimport '@polymer/paper-styles/typography.js';\nconst $_documentContainer = document.createElement('template');\n$_documentContainer.setAttribute('style', 'display: none;');\n\n$_documentContainer.innerHTML = `<dom-module id=\"paper-item-shared-styles\">\n  <template>\n    <style>\n      :host, .paper-item {\n        display: block;\n        position: relative;\n        min-height: var(--paper-item-min-height, 48px);\n        padding: 0px 16px;\n      }\n\n      .paper-item {\n        @apply --paper-font-subhead;\n        border:none;\n        outline: none;\n        background: white;\n        width: 100%;\n        text-align: left;\n      }\n\n      :host([hidden]), .paper-item[hidden] {\n        display: none !important;\n      }\n\n      :host(.iron-selected), .paper-item.iron-selected {\n        font-weight: var(--paper-item-selected-weight, bold);\n\n        @apply --paper-item-selected;\n      }\n\n      :host([disabled]), .paper-item[disabled] {\n        color: var(--paper-item-disabled-color, var(--disabled-text-color));\n\n        @apply --paper-item-disabled;\n      }\n\n      :host(:focus), .paper-item:focus {\n        position: relative;\n        outline: 0;\n\n        @apply --paper-item-focused;\n      }\n\n      :host(:focus):before, .paper-item:focus:before {\n        @apply --layout-fit;\n\n        background: currentColor;\n        content: '';\n        opacity: var(--dark-divider-opacity);\n        pointer-events: none;\n\n        @apply --paper-item-focused-before;\n      }\n    </style>\n  </template>\n</dom-module>`;\n\ndocument.head.appendChild($_documentContainer.content);\n","export default function addMethods(worker, methods) {\n\tlet c = 0;\n\tlet callbacks = {};\n\tworker.addEventListener('message', (e) => {\n\t\tlet d = e.data;\n\t\tif (d.type!=='RPC') return;\n\t\tif (d.id) {\n\t\t\tlet f = callbacks[d.id];\n\t\t\tif (f) {\n\t\t\t\tdelete callbacks[d.id];\n\t\t\t\tif (d.error) {\n\t\t\t\t\tf[1](Object.assign(Error(d.error.message), d.error));\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tf[0](d.result);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tlet evt = document.createEvent('Event');\n\t\t\tevt.initEvent(d.method, false, false);\n\t\t\tevt.data = d.params;\n\t\t\tworker.dispatchEvent(evt);\n\t\t}\n\t});\n\tmethods.forEach( method => {\n\t\tworker[method] = (...params) => new Promise( (a, b) => {\n\t\t\tlet id = ++c;\n\t\t\tcallbacks[id] = [a, b];\n\t\t\tworker.postMessage({ type: 'RPC', id, method, params });\n\t\t});\n\t});\n}\n","import { dedupingMixin } from \"@polymer/polymer/lib/utils/mixin\";\n/**\n * Polymer Mixin to enable a localize function powered by language/resources from hass object.\n *\n * @polymerMixin\n */\nexport default dedupingMixin(\n  (superClass) =>\n    class extends superClass {\n      static get properties() {\n        return {\n          hass: Object,\n\n          /**\n           * Translates a string to the current `language`. Any parameters to the\n           * string should be passed in order, as follows:\n           * `localize(stringKey, param1Name, param1Value, param2Name, param2Value)`\n           */\n          localize: {\n            type: Function,\n            computed: \"__computeLocalize(hass.localize)\",\n          },\n        };\n      }\n\n      __computeLocalize(localize) {\n        return localize;\n      }\n    }\n);\n","import { HassEntity } from \"home-assistant-js-websocket\";\nimport { computeObjectId } from \"./compute_object_id\";\n\nexport const computeStateName = (stateObj: HassEntity): string => {\n  return stateObj.attributes.friendly_name === undefined\n    ? computeObjectId(stateObj.entity_id).replace(/_/g, \" \")\n    : stateObj.attributes.friendly_name || \"\";\n};\n","import {\n  css,\n  CSSResult,\n  html,\n  LitElement,\n  property,\n  TemplateResult,\n} from \"lit-element\";\n\nclass HaCard extends LitElement {\n  @property() public header?: string;\n\n  static get styles(): CSSResult {\n    return css`\n      :host {\n        background: var(\n          --ha-card-background,\n          var(--paper-card-background-color, white)\n        );\n        border-radius: var(--ha-card-border-radius, 2px);\n        box-shadow: var(\n          --ha-card-box-shadow,\n          0 2px 2px 0 rgba(0, 0, 0, 0.14),\n          0 1px 5px 0 rgba(0, 0, 0, 0.12),\n          0 3px 1px -2px rgba(0, 0, 0, 0.2)\n        );\n        color: var(--primary-text-color);\n        display: block;\n        transition: all 0.3s ease-out;\n        position: relative;\n      }\n\n      .card-header,\n      :host ::slotted(.card-header) {\n        color: var(--ha-card-header-color, --primary-text-color);\n        font-family: var(--ha-card-header-font-family, inherit);\n        font-size: var(--ha-card-header-font-size, 24px);\n        letter-spacing: -0.012em;\n        line-height: 32px;\n        padding: 24px 16px 16px;\n        display: block;\n      }\n\n      :host ::slotted(.card-content:not(:first-child)),\n      slot:not(:first-child)::slotted(.card-content) {\n        padding-top: 0px;\n        margin-top: -8px;\n      }\n\n      :host ::slotted(.card-content) {\n        padding: 16px;\n      }\n\n      :host ::slotted(.card-actions) {\n        border-top: 1px solid #e8e8e8;\n        padding: 5px 16px;\n      }\n    `;\n  }\n\n  protected render(): TemplateResult {\n    return html`\n      ${this.header\n        ? html`\n            <div class=\"card-header\">${this.header}</div>\n          `\n        : html``}\n      <slot></slot>\n    `;\n  }\n}\n\ncustomElements.define(\"ha-card\", HaCard);\n","/**\n * Return the icon to be used for a domain.\n *\n * Optionally pass in a state to influence the domain icon.\n */\nimport { DEFAULT_DOMAIN_ICON } from \"../const\";\n\nconst fixedIcons = {\n  alert: \"hass:alert\",\n  alexa: \"hass:amazon-alexa\",\n  automation: \"hass:playlist-play\",\n  calendar: \"hass:calendar\",\n  camera: \"hass:video\",\n  climate: \"hass:thermostat\",\n  configurator: \"hass:settings\",\n  conversation: \"hass:text-to-speech\",\n  counter: \"hass:counter\",\n  device_tracker: \"hass:account\",\n  fan: \"hass:fan\",\n  google_assistant: \"hass:google-assistant\",\n  group: \"hass:google-circles-communities\",\n  history_graph: \"hass:chart-line\",\n  homeassistant: \"hass:home-assistant\",\n  homekit: \"hass:home-automation\",\n  image_processing: \"hass:image-filter-frames\",\n  input_boolean: \"hass:drawing\",\n  input_datetime: \"hass:calendar-clock\",\n  input_number: \"hass:ray-vertex\",\n  input_select: \"hass:format-list-bulleted\",\n  input_text: \"hass:textbox\",\n  light: \"hass:lightbulb\",\n  mailbox: \"hass:mailbox\",\n  notify: \"hass:comment-alert\",\n  persistent_notification: \"hass:bell\",\n  person: \"hass:account\",\n  plant: \"hass:flower\",\n  proximity: \"hass:apple-safari\",\n  remote: \"hass:remote\",\n  scene: \"hass:google-pages\",\n  script: \"hass:file-document\",\n  sensor: \"hass:eye\",\n  simple_alarm: \"hass:bell\",\n  sun: \"hass:white-balance-sunny\",\n  switch: \"hass:flash\",\n  timer: \"hass:timer\",\n  updater: \"hass:cloud-upload\",\n  vacuum: \"hass:robot-vacuum\",\n  water_heater: \"hass:thermometer\",\n  weather: \"hass:weather-cloudy\",\n  weblink: \"hass:open-in-new\",\n  zone: \"hass:map-marker\",\n};\n\nexport const domainIcon = (domain: string, state?: string): string => {\n  if (domain in fixedIcons) {\n    return fixedIcons[domain];\n  }\n\n  switch (domain) {\n    case \"alarm_control_panel\":\n      switch (state) {\n        case \"armed_home\":\n          return \"hass:bell-plus\";\n        case \"armed_night\":\n          return \"hass:bell-sleep\";\n        case \"disarmed\":\n          return \"hass:bell-outline\";\n        case \"triggered\":\n          return \"hass:bell-ring\";\n        default:\n          return \"hass:bell\";\n      }\n\n    case \"binary_sensor\":\n      return state && state === \"off\"\n        ? \"hass:radiobox-blank\"\n        : \"hass:checkbox-marked-circle\";\n\n    case \"cover\":\n      return state === \"closed\" ? \"hass:window-closed\" : \"hass:window-open\";\n\n    case \"lock\":\n      return state && state === \"unlocked\" ? \"hass:lock-open\" : \"hass:lock\";\n\n    case \"media_player\":\n      return state && state !== \"off\" && state !== \"idle\"\n        ? \"hass:cast-connected\"\n        : \"hass:cast\";\n\n    case \"zwave\":\n      switch (state) {\n        case \"dead\":\n          return \"hass:emoticon-dead\";\n        case \"sleeping\":\n          return \"hass:sleep\";\n        case \"initializing\":\n          return \"hass:timer-sand\";\n        default:\n          return \"hass:z-wave\";\n      }\n\n    default:\n      // tslint:disable-next-line\n      console.warn(\n        \"Unable to find icon for domain \" + domain + \" (\" + state + \")\"\n      );\n      return DEFAULT_DOMAIN_ICON;\n  }\n};\n","import { dedupingMixin } from \"@polymer/polymer/lib/utils/mixin\";\n\nimport { fireEvent } from \"../common/dom/fire_event\";\n\n// Polymer legacy event helpers used courtesy of the Polymer project.\n//\n// Copyright (c) 2017 The Polymer Authors. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without\n// modification, are permitted provided that the following conditions are\n// met:\n//\n//    * Redistributions of source code must retain the above copyright\n// notice, this list of conditions and the following disclaimer.\n//    * Redistributions in binary form must reproduce the above\n// copyright notice, this list of conditions and the following disclaimer\n// in the documentation and/or other materials provided with the\n// distribution.\n//    * Neither the name of Google Inc. nor the names of its\n// contributors may be used to endorse or promote products derived from\n// this software without specific prior written permission.\n//\n// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n// \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n// LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n// A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n// OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n// SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n// LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n// DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n// THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n// (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n// OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n\n/* @polymerMixin */\nexport const EventsMixin = dedupingMixin(\n  (superClass) =>\n    class extends superClass {\n      /**\n   * Dispatches a custom event with an optional detail value.\n   *\n   * @param {string} type Name of event type.\n   * @param {*=} detail Detail value containing event-specific\n   *   payload.\n   * @param {{ bubbles: (boolean|undefined),\n               cancelable: (boolean|undefined),\n                composed: (boolean|undefined) }=}\n    *  options Object specifying options.  These may include:\n    *  `bubbles` (boolean, defaults to `true`),\n    *  `cancelable` (boolean, defaults to false), and\n    *  `node` on which to fire the event (HTMLElement, defaults to `this`).\n    * @return {Event} The new event that was fired.\n    */\n      fire(type, detail, options) {\n        options = options || {};\n        return fireEvent(options.node || this, type, detail, options);\n      }\n    }\n);\n","import { Constructor } from \"../types\";\n\nimport \"@polymer/iron-icon/iron-icon\";\n// Not duplicate, this is for typing.\n// tslint:disable-next-line\nimport { IronIconElement } from \"@polymer/iron-icon/iron-icon\";\n\nconst ironIconClass = customElements.get(\"iron-icon\") as Constructor<\n  IronIconElement\n>;\n\nlet loaded = false;\n\nexport class HaIcon extends ironIconClass {\n  private _iconsetName?: string;\n\n  public listen(\n    node: EventTarget | null,\n    eventName: string,\n    methodName: string\n  ): void {\n    super.listen(node, eventName, methodName);\n\n    if (!loaded && this._iconsetName === \"mdi\") {\n      loaded = true;\n      import(/* webpackChunkName: \"mdi-icons\" */ \"../resources/mdi-icons\");\n    }\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-icon\": HaIcon;\n  }\n}\n\ncustomElements.define(\"ha-icon\", HaIcon);\n","import { HassEntity } from \"home-assistant-js-websocket\";\nimport { computeDomain } from \"./compute_domain\";\n\nexport const computeStateDomain = (stateObj: HassEntity) => {\n  return computeDomain(stateObj.entity_id);\n};\n","/**\n@license\nCopyright (c) 2015 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at\nhttp://polymer.github.io/LICENSE.txt The complete set of authors may be found at\nhttp://polymer.github.io/AUTHORS.txt The complete set of contributors may be\nfound at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as\npart of the polymer project is also subject to an additional IP rights grant\nfound at http://polymer.github.io/PATENTS.txt\n*/\nimport '@polymer/polymer/polymer-legacy.js';\nimport {html} from '@polymer/polymer/lib/utils/html-tag.js';\n\n/*\nA set of layout classes that let you specify layout properties directly in\nmarkup. You must include this file in every element that needs to use them.\n\nSample use:\n\n    import '@polymer/iron-flex-layout/iron-flex-layout-classes.js';\n\n    const template = html`\n      <style is=\"custom-style\" include=\"iron-flex iron-flex-alignment\"></style>\n      <style>\n        .test { width: 100px; }\n      </style>\n      <div class=\"layout horizontal center-center\">\n        <div class=\"test\">horizontal layout center alignment</div>\n      </div>\n    `;\n    document.body.appendChild(template.content);\n\nThe following imports are available:\n - iron-flex\n - iron-flex-reverse\n - iron-flex-alignment\n - iron-flex-factors\n - iron-positioning\n*/\n\nconst template = html`\n/* Most common used flex styles*/\n<dom-module id=\"iron-flex\">\n  <template>\n    <style>\n      .layout.horizontal,\n      .layout.vertical {\n        display: -ms-flexbox;\n        display: -webkit-flex;\n        display: flex;\n      }\n\n      .layout.inline {\n        display: -ms-inline-flexbox;\n        display: -webkit-inline-flex;\n        display: inline-flex;\n      }\n\n      .layout.horizontal {\n        -ms-flex-direction: row;\n        -webkit-flex-direction: row;\n        flex-direction: row;\n      }\n\n      .layout.vertical {\n        -ms-flex-direction: column;\n        -webkit-flex-direction: column;\n        flex-direction: column;\n      }\n\n      .layout.wrap {\n        -ms-flex-wrap: wrap;\n        -webkit-flex-wrap: wrap;\n        flex-wrap: wrap;\n      }\n\n      .layout.no-wrap {\n        -ms-flex-wrap: nowrap;\n        -webkit-flex-wrap: nowrap;\n        flex-wrap: nowrap;\n      }\n\n      .layout.center,\n      .layout.center-center {\n        -ms-flex-align: center;\n        -webkit-align-items: center;\n        align-items: center;\n      }\n\n      .layout.center-justified,\n      .layout.center-center {\n        -ms-flex-pack: center;\n        -webkit-justify-content: center;\n        justify-content: center;\n      }\n\n      .flex {\n        -ms-flex: 1 1 0.000000001px;\n        -webkit-flex: 1;\n        flex: 1;\n        -webkit-flex-basis: 0.000000001px;\n        flex-basis: 0.000000001px;\n      }\n\n      .flex-auto {\n        -ms-flex: 1 1 auto;\n        -webkit-flex: 1 1 auto;\n        flex: 1 1 auto;\n      }\n\n      .flex-none {\n        -ms-flex: none;\n        -webkit-flex: none;\n        flex: none;\n      }\n    </style>\n  </template>\n</dom-module>\n/* Basic flexbox reverse styles */\n<dom-module id=\"iron-flex-reverse\">\n  <template>\n    <style>\n      .layout.horizontal-reverse,\n      .layout.vertical-reverse {\n        display: -ms-flexbox;\n        display: -webkit-flex;\n        display: flex;\n      }\n\n      .layout.horizontal-reverse {\n        -ms-flex-direction: row-reverse;\n        -webkit-flex-direction: row-reverse;\n        flex-direction: row-reverse;\n      }\n\n      .layout.vertical-reverse {\n        -ms-flex-direction: column-reverse;\n        -webkit-flex-direction: column-reverse;\n        flex-direction: column-reverse;\n      }\n\n      .layout.wrap-reverse {\n        -ms-flex-wrap: wrap-reverse;\n        -webkit-flex-wrap: wrap-reverse;\n        flex-wrap: wrap-reverse;\n      }\n    </style>\n  </template>\n</dom-module>\n/* Flexbox alignment */\n<dom-module id=\"iron-flex-alignment\">\n  <template>\n    <style>\n      /**\n       * Alignment in cross axis.\n       */\n      .layout.start {\n        -ms-flex-align: start;\n        -webkit-align-items: flex-start;\n        align-items: flex-start;\n      }\n\n      .layout.center,\n      .layout.center-center {\n        -ms-flex-align: center;\n        -webkit-align-items: center;\n        align-items: center;\n      }\n\n      .layout.end {\n        -ms-flex-align: end;\n        -webkit-align-items: flex-end;\n        align-items: flex-end;\n      }\n\n      .layout.baseline {\n        -ms-flex-align: baseline;\n        -webkit-align-items: baseline;\n        align-items: baseline;\n      }\n\n      /**\n       * Alignment in main axis.\n       */\n      .layout.start-justified {\n        -ms-flex-pack: start;\n        -webkit-justify-content: flex-start;\n        justify-content: flex-start;\n      }\n\n      .layout.center-justified,\n      .layout.center-center {\n        -ms-flex-pack: center;\n        -webkit-justify-content: center;\n        justify-content: center;\n      }\n\n      .layout.end-justified {\n        -ms-flex-pack: end;\n        -webkit-justify-content: flex-end;\n        justify-content: flex-end;\n      }\n\n      .layout.around-justified {\n        -ms-flex-pack: distribute;\n        -webkit-justify-content: space-around;\n        justify-content: space-around;\n      }\n\n      .layout.justified {\n        -ms-flex-pack: justify;\n        -webkit-justify-content: space-between;\n        justify-content: space-between;\n      }\n\n      /**\n       * Self alignment.\n       */\n      .self-start {\n        -ms-align-self: flex-start;\n        -webkit-align-self: flex-start;\n        align-self: flex-start;\n      }\n\n      .self-center {\n        -ms-align-self: center;\n        -webkit-align-self: center;\n        align-self: center;\n      }\n\n      .self-end {\n        -ms-align-self: flex-end;\n        -webkit-align-self: flex-end;\n        align-self: flex-end;\n      }\n\n      .self-stretch {\n        -ms-align-self: stretch;\n        -webkit-align-self: stretch;\n        align-self: stretch;\n      }\n\n      .self-baseline {\n        -ms-align-self: baseline;\n        -webkit-align-self: baseline;\n        align-self: baseline;\n      }\n\n      /**\n       * multi-line alignment in main axis.\n       */\n      .layout.start-aligned {\n        -ms-flex-line-pack: start;  /* IE10 */\n        -ms-align-content: flex-start;\n        -webkit-align-content: flex-start;\n        align-content: flex-start;\n      }\n\n      .layout.end-aligned {\n        -ms-flex-line-pack: end;  /* IE10 */\n        -ms-align-content: flex-end;\n        -webkit-align-content: flex-end;\n        align-content: flex-end;\n      }\n\n      .layout.center-aligned {\n        -ms-flex-line-pack: center;  /* IE10 */\n        -ms-align-content: center;\n        -webkit-align-content: center;\n        align-content: center;\n      }\n\n      .layout.between-aligned {\n        -ms-flex-line-pack: justify;  /* IE10 */\n        -ms-align-content: space-between;\n        -webkit-align-content: space-between;\n        align-content: space-between;\n      }\n\n      .layout.around-aligned {\n        -ms-flex-line-pack: distribute;  /* IE10 */\n        -ms-align-content: space-around;\n        -webkit-align-content: space-around;\n        align-content: space-around;\n      }\n    </style>\n  </template>\n</dom-module>\n/* Non-flexbox positioning helper styles */\n<dom-module id=\"iron-flex-factors\">\n  <template>\n    <style>\n      .flex,\n      .flex-1 {\n        -ms-flex: 1 1 0.000000001px;\n        -webkit-flex: 1;\n        flex: 1;\n        -webkit-flex-basis: 0.000000001px;\n        flex-basis: 0.000000001px;\n      }\n\n      .flex-2 {\n        -ms-flex: 2;\n        -webkit-flex: 2;\n        flex: 2;\n      }\n\n      .flex-3 {\n        -ms-flex: 3;\n        -webkit-flex: 3;\n        flex: 3;\n      }\n\n      .flex-4 {\n        -ms-flex: 4;\n        -webkit-flex: 4;\n        flex: 4;\n      }\n\n      .flex-5 {\n        -ms-flex: 5;\n        -webkit-flex: 5;\n        flex: 5;\n      }\n\n      .flex-6 {\n        -ms-flex: 6;\n        -webkit-flex: 6;\n        flex: 6;\n      }\n\n      .flex-7 {\n        -ms-flex: 7;\n        -webkit-flex: 7;\n        flex: 7;\n      }\n\n      .flex-8 {\n        -ms-flex: 8;\n        -webkit-flex: 8;\n        flex: 8;\n      }\n\n      .flex-9 {\n        -ms-flex: 9;\n        -webkit-flex: 9;\n        flex: 9;\n      }\n\n      .flex-10 {\n        -ms-flex: 10;\n        -webkit-flex: 10;\n        flex: 10;\n      }\n\n      .flex-11 {\n        -ms-flex: 11;\n        -webkit-flex: 11;\n        flex: 11;\n      }\n\n      .flex-12 {\n        -ms-flex: 12;\n        -webkit-flex: 12;\n        flex: 12;\n      }\n    </style>\n  </template>\n</dom-module>\n<dom-module id=\"iron-positioning\">\n  <template>\n    <style>\n      .block {\n        display: block;\n      }\n\n      [hidden] {\n        display: none !important;\n      }\n\n      .invisible {\n        visibility: hidden !important;\n      }\n\n      .relative {\n        position: relative;\n      }\n\n      .fit {\n        position: absolute;\n        top: 0;\n        right: 0;\n        bottom: 0;\n        left: 0;\n      }\n\n      body.fullbleed {\n        margin: 0;\n        height: 100vh;\n      }\n\n      .scroll {\n        -webkit-overflow-scrolling: touch;\n        overflow: auto;\n      }\n\n      /* fixed position */\n      .fixed-bottom,\n      .fixed-left,\n      .fixed-right,\n      .fixed-top {\n        position: fixed;\n      }\n\n      .fixed-top {\n        top: 0;\n        left: 0;\n        right: 0;\n      }\n\n      .fixed-right {\n        top: 0;\n        right: 0;\n        bottom: 0;\n      }\n\n      .fixed-bottom {\n        right: 0;\n        bottom: 0;\n        left: 0;\n      }\n\n      .fixed-left {\n        top: 0;\n        bottom: 0;\n        left: 0;\n      }\n    </style>\n  </template>\n</dom-module>\n`;\ntemplate.setAttribute('style', 'display: none;');\ndocument.head.appendChild(template.content);\n","/**\n@license\nCopyright (c) 2015 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at\nhttp://polymer.github.io/LICENSE.txt The complete set of authors may be found at\nhttp://polymer.github.io/AUTHORS.txt The complete set of contributors may be\nfound at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as\npart of the polymer project is also subject to an additional IP rights grant\nfound at http://polymer.github.io/PATENTS.txt\n*/\nimport '@polymer/polymer/polymer-legacy.js';\n\nimport '@polymer/iron-flex-layout/iron-flex-layout.js';\nimport '@polymer/paper-styles/default-theme.js';\nimport '@polymer/paper-styles/typography.js';\nimport {Polymer} from '@polymer/polymer/lib/legacy/polymer-fn.js';\nimport {html} from '@polymer/polymer/lib/utils/html-tag.js';\n\n/*\nUse `<paper-item-body>` in a `<paper-item>` or `<paper-icon-item>` to make two-\nor three- line items. It is a flex item that is a vertical flexbox.\n\n    <paper-item>\n      <paper-item-body two-line>\n        <div>Show your status</div>\n        <div secondary>Your status is visible to everyone</div>\n      </paper-item-body>\n    </paper-item>\n\nThe child elements with the `secondary` attribute is given secondary text\nstyling.\n\n### Styling\n\nThe following custom properties and mixins are available for styling:\n\nCustom property | Description | Default\n----------------|-------------|----------\n`--paper-item-body-two-line-min-height` | Minimum height of a two-line item | `72px`\n`--paper-item-body-three-line-min-height` | Minimum height of a three-line item | `88px`\n`--paper-item-body-secondary-color` | Foreground color for the `secondary` area | `--secondary-text-color`\n`--paper-item-body-secondary` | Mixin applied to the `secondary` area | `{}`\n\n*/\nPolymer({\n  _template: html`\n    <style>\n      :host {\n        overflow: hidden; /* needed for text-overflow: ellipsis to work on ff */\n        @apply --layout-vertical;\n        @apply --layout-center-justified;\n        @apply --layout-flex;\n      }\n\n      :host([two-line]) {\n        min-height: var(--paper-item-body-two-line-min-height, 72px);\n      }\n\n      :host([three-line]) {\n        min-height: var(--paper-item-body-three-line-min-height, 88px);\n      }\n\n      :host > ::slotted(*) {\n        overflow: hidden;\n        text-overflow: ellipsis;\n        white-space: nowrap;\n      }\n\n      :host > ::slotted([secondary]) {\n        @apply --paper-font-body1;\n\n        color: var(--paper-item-body-secondary-color, var(--secondary-text-color));\n\n        @apply --paper-item-body-secondary;\n      }\n    </style>\n\n    <slot></slot>\n`,\n\n  is: 'paper-item-body'\n});\n","/**\n * @license\n * Copyright (c) 2018 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n\nimport {AttributePart, directive, Part, PropertyPart} from '../lit-html.js';\n\n\nexport interface ClassInfo {\n  readonly [name: string]: string|boolean|number;\n}\n\n/**\n * Stores the ClassInfo object applied to a given AttributePart.\n * Used to unset existing values when a new ClassInfo object is applied.\n */\nconst classMapCache = new WeakMap();\n\n/**\n * A directive that applies CSS classes. This must be used in the `class`\n * attribute and must be the only part used in the attribute. It takes each\n * property in the `classInfo` argument and adds the property name to the\n * element's `classList` if the property value is truthy; if the property value\n * is falsey, the property name is removed from the element's `classList`. For\n * example\n * `{foo: bar}` applies the class `foo` if the value of `bar` is truthy.\n * @param classInfo {ClassInfo}\n */\nexport const classMap = directive((classInfo: ClassInfo) => (part: Part) => {\n  if (!(part instanceof AttributePart) || (part instanceof PropertyPart) ||\n      part.committer.name !== 'class' || part.committer.parts.length > 1) {\n    throw new Error(\n        'The `classMap` directive must be used in the `class` attribute ' +\n        'and must be the only part in the attribute.');\n  }\n\n  const {committer} = part;\n  const {element} = committer;\n\n  // handle static classes\n  if (!classMapCache.has(part)) {\n    element.className = committer.strings.join(' ');\n  }\n\n  const {classList} = element;\n\n  // remove old classes that no longer apply\n  const oldInfo = classMapCache.get(part);\n  for (const name in oldInfo) {\n    if (!(name in classInfo)) {\n      classList.remove(name);\n    }\n  }\n\n  // add new classes\n  for (const name in classInfo) {\n    const value = classInfo[name];\n    if (!oldInfo || value !== oldInfo[name]) {\n      // We explicitly want a loose truthy check here because\n      // it seems more convenient that '' and 0 are skipped.\n      const method = value ? 'add' : 'remove';\n      classList[method](name);\n    }\n  }\n  classMapCache.set(part, classInfo);\n});\n","import {\n  LitElement,\n  TemplateResult,\n  css,\n  CSSResult,\n  html,\n  property,\n  PropertyValues,\n  query,\n} from \"lit-element\";\nimport \"../ha-icon\";\nimport { computeStateDomain } from \"../../common/entity/compute_state_domain\";\nimport { stateIcon } from \"../../common/entity/state_icon\";\nimport { HassEntity } from \"home-assistant-js-websocket\";\n// Not duplicate, this is for typing.\n// tslint:disable-next-line\nimport { HaIcon } from \"../ha-icon\";\nimport { HomeAssistant } from \"../../types\";\n\nclass StateBadge extends LitElement {\n  public hass?: HomeAssistant;\n  @property() public stateObj?: HassEntity;\n  @property() public overrideIcon?: string;\n  @property() public overrideImage?: string;\n  @query(\"ha-icon\") private _icon!: HaIcon;\n\n  protected render(): TemplateResult | void {\n    const stateObj = this.stateObj;\n\n    if (!stateObj) {\n      return html``;\n    }\n\n    return html`\n      <ha-icon\n        id=\"icon\"\n        data-domain=${computeStateDomain(stateObj)}\n        data-state=${stateObj.state}\n        .icon=${this.overrideIcon || stateIcon(stateObj)}\n      ></ha-icon>\n    `;\n  }\n\n  protected updated(changedProps: PropertyValues) {\n    if (!changedProps.has(\"stateObj\") || !this.stateObj) {\n      return;\n    }\n    const stateObj = this.stateObj;\n\n    const iconStyle: Partial<CSSStyleDeclaration> = {\n      color: \"\",\n      filter: \"\",\n    };\n    const hostStyle: Partial<CSSStyleDeclaration> = {\n      backgroundImage: \"\",\n    };\n    if (stateObj) {\n      // hide icon if we have entity picture\n      if (\n        (stateObj.attributes.entity_picture && !this.overrideIcon) ||\n        this.overrideImage\n      ) {\n        let imageUrl = this.overrideImage || stateObj.attributes.entity_picture;\n        if (this.hass) {\n          imageUrl = this.hass.hassUrl(imageUrl);\n        }\n        hostStyle.backgroundImage = `url(${imageUrl})`;\n        iconStyle.display = \"none\";\n      } else {\n        if (stateObj.attributes.hs_color) {\n          const hue = stateObj.attributes.hs_color[0];\n          const sat = stateObj.attributes.hs_color[1];\n          if (sat > 10) {\n            iconStyle.color = `hsl(${hue}, 100%, ${100 - sat / 2}%)`;\n          }\n        }\n        if (stateObj.attributes.brightness) {\n          const brightness = stateObj.attributes.brightness;\n          if (typeof brightness !== \"number\") {\n            const errorMessage = `Type error: state-badge expected number, but type of ${\n              stateObj.entity_id\n            }.attributes.brightness is ${typeof brightness} (${brightness})`;\n            // tslint:disable-next-line\n            console.warn(errorMessage);\n          }\n          // lowest brighntess will be around 50% (that's pretty dark)\n          iconStyle.filter = `brightness(${(brightness + 245) / 5}%)`;\n        }\n      }\n    }\n    Object.assign(this._icon.style, iconStyle);\n    Object.assign(this.style, hostStyle);\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      :host {\n        position: relative;\n        display: inline-block;\n        width: 40px;\n        color: var(--paper-item-icon-color, #44739e);\n        border-radius: 50%;\n        height: 40px;\n        text-align: center;\n        background-size: cover;\n        line-height: 40px;\n        vertical-align: middle;\n      }\n\n      ha-icon {\n        transition: color 0.3s ease-in-out, filter 0.3s ease-in-out;\n      }\n\n      /* Color the icon if light or sun is on */\n      ha-icon[data-domain=\"light\"][data-state=\"on\"],\n      ha-icon[data-domain=\"switch\"][data-state=\"on\"],\n      ha-icon[data-domain=\"binary_sensor\"][data-state=\"on\"],\n      ha-icon[data-domain=\"fan\"][data-state=\"on\"],\n      ha-icon[data-domain=\"sun\"][data-state=\"above_horizon\"] {\n        color: var(--paper-item-icon-active-color, #fdd835);\n      }\n\n      /* Color the icon if unavailable */\n      ha-icon[data-state=\"unavailable\"] {\n        color: var(--state-icon-unavailable-color);\n      }\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"state-badge\": StateBadge;\n  }\n}\n\ncustomElements.define(\"state-badge\", StateBadge);\n","/** Compute the object ID of a state. */\nexport const computeObjectId = (entityId: string): string => {\n  return entityId.substr(entityId.indexOf(\".\") + 1);\n};\n","// From: https://davidwalsh.name/javascript-debounce-function\n\n// Returns a function, that, as long as it continues to be invoked, will not\n// be triggered. The function will be called after it stops being called for\n// N milliseconds. If `immediate` is passed, trigger the function on the\n// leading edge, instead of the trailing.\n// tslint:disable-next-line: ban-types\nexport const debounce = <T extends Function>(\n  func: T,\n  wait,\n  immediate = false\n): T => {\n  let timeout;\n  // @ts-ignore\n  return function(...args) {\n    // tslint:disable:no-this-assignment\n    // @ts-ignore\n    const context = this;\n    const later = () => {\n      timeout = null;\n      if (!immediate) {\n        func.apply(context, args);\n      }\n    };\n    const callNow = immediate && !timeout;\n    clearTimeout(timeout);\n    timeout = setTimeout(later, wait);\n    if (callNow) {\n      func.apply(context, args);\n    }\n  };\n};\n","/** Return an icon representing a sensor state. */\nimport { HassEntity } from \"home-assistant-js-websocket\";\nimport { UNIT_C, UNIT_F } from \"../const\";\nimport { domainIcon } from \"./domain_icon\";\n\nconst fixedDeviceClassIcons = {\n  humidity: \"hass:water-percent\",\n  illuminance: \"hass:brightness-5\",\n  temperature: \"hass:thermometer\",\n  pressure: \"hass:gauge\",\n  power: \"hass:flash\",\n  signal_strength: \"hass:wifi\",\n};\n\nexport const sensorIcon = (state: HassEntity) => {\n  const dclass = state.attributes.device_class;\n\n  if (dclass && dclass in fixedDeviceClassIcons) {\n    return fixedDeviceClassIcons[dclass];\n  }\n  if (dclass === \"battery\") {\n    const battery = Number(state.state);\n    if (isNaN(battery)) {\n      return \"hass:battery-unknown\";\n    }\n    const batteryRound = Math.round(battery / 10) * 10;\n    if (batteryRound >= 100) {\n      return \"hass:battery\";\n    }\n    if (batteryRound <= 0) {\n      return \"hass:battery-alert\";\n    }\n    // Will return one of the following icons: (listed so extractor picks up)\n    // hass:battery-10\n    // hass:battery-20\n    // hass:battery-30\n    // hass:battery-40\n    // hass:battery-50\n    // hass:battery-60\n    // hass:battery-70\n    // hass:battery-80\n    // hass:battery-90\n    // We obscure 'hass' in iconname so this name does not get picked up\n    return `${\"hass\"}:battery-${batteryRound}`;\n  }\n\n  const unit = state.attributes.unit_of_measurement;\n  if (unit === UNIT_C || unit === UNIT_F) {\n    return \"hass:thermometer\";\n  }\n  return domainIcon(\"sensor\");\n};\n","/** Return an icon representing a state. */\nimport { HassEntity } from \"home-assistant-js-websocket\";\nimport { DEFAULT_DOMAIN_ICON } from \"../const\";\nimport { binarySensorIcon } from \"./binary_sensor_icon\";\n\nimport { computeDomain } from \"./compute_domain\";\nimport { domainIcon } from \"./domain_icon\";\nimport { coverIcon } from \"./cover_icon\";\nimport { sensorIcon } from \"./sensor_icon\";\nimport { inputDateTimeIcon } from \"./input_dateteime_icon\";\n\nconst domainIcons = {\n  binary_sensor: binarySensorIcon,\n  cover: coverIcon,\n  sensor: sensorIcon,\n  input_datetime: inputDateTimeIcon,\n};\n\nexport const stateIcon = (state: HassEntity) => {\n  if (!state) {\n    return DEFAULT_DOMAIN_ICON;\n  }\n  if (state.attributes.icon) {\n    return state.attributes.icon;\n  }\n\n  const domain = computeDomain(state.entity_id);\n\n  if (domain in domainIcons) {\n    return domainIcons[domain](state);\n  }\n  return domainIcon(domain, state.state);\n};\n","import { HassEntity } from \"home-assistant-js-websocket\";\n\n/** Return an icon representing a binary sensor state. */\n\nexport const binarySensorIcon = (state: HassEntity) => {\n  const activated = state.state && state.state === \"off\";\n  switch (state.attributes.device_class) {\n    case \"battery\":\n      return activated ? \"hass:battery\" : \"hass:battery-outline\";\n    case \"cold\":\n      return activated ? \"hass:thermometer\" : \"hass:snowflake\";\n    case \"connectivity\":\n      return activated ? \"hass:server-network-off\" : \"hass:server-network\";\n    case \"door\":\n      return activated ? \"hass:door-closed\" : \"hass:door-open\";\n    case \"garage_door\":\n      return activated ? \"hass:garage\" : \"hass:garage-open\";\n    case \"gas\":\n    case \"power\":\n    case \"problem\":\n    case \"safety\":\n    case \"smoke\":\n      return activated ? \"hass:shield-check\" : \"hass:alert\";\n    case \"heat\":\n      return activated ? \"hass:thermometer\" : \"hass:fire\";\n    case \"light\":\n      return activated ? \"hass:brightness-5\" : \"hass:brightness-7\";\n    case \"lock\":\n      return activated ? \"hass:lock\" : \"hass:lock-open\";\n    case \"moisture\":\n      return activated ? \"hass:water-off\" : \"hass:water\";\n    case \"motion\":\n      return activated ? \"hass:walk\" : \"hass:run\";\n    case \"occupancy\":\n      return activated ? \"hass:home-outline\" : \"hass:home\";\n    case \"opening\":\n      return activated ? \"hass:square\" : \"hass:square-outline\";\n    case \"plug\":\n      return activated ? \"hass:power-plug-off\" : \"hass:power-plug\";\n    case \"presence\":\n      return activated ? \"hass:home-outline\" : \"hass:home\";\n    case \"sound\":\n      return activated ? \"hass:music-note-off\" : \"hass:music-note\";\n    case \"vibration\":\n      return activated ? \"hass:crop-portrait\" : \"hass:vibrate\";\n    case \"window\":\n      return activated ? \"hass:window-closed\" : \"hass:window-open\";\n    default:\n      return activated ? \"hass:radiobox-blank\" : \"hass:checkbox-marked-circle\";\n  }\n};\n","/** Return an icon representing a cover state. */\nimport { HassEntity } from \"home-assistant-js-websocket\";\nimport { domainIcon } from \"./domain_icon\";\n\nexport const coverIcon = (state: HassEntity): string => {\n  const open = state.state !== \"closed\";\n  switch (state.attributes.device_class) {\n    case \"garage\":\n      return open ? \"hass:garage-open\" : \"hass:garage\";\n    case \"door\":\n      return open ? \"hass:door-open\" : \"hass:door-closed\";\n    case \"shutter\":\n      return open ? \"hass:window-shutter-open\" : \"hass:window-shutter\";\n    case \"blind\":\n      return open ? \"hass:blinds-open\" : \"hass:blinds\";\n    case \"window\":\n      return open ? \"hass:window-open\" : \"hass:window-closed\";\n    default:\n      return domainIcon(\"cover\", state.state);\n  }\n};\n","/** Return an icon representing an input datetime state. */\nimport { domainIcon } from \"./domain_icon\";\nimport { HassEntity } from \"home-assistant-js-websocket\";\n\nexport const inputDateTimeIcon = (state: HassEntity): string => {\n  if (!state.attributes.has_date) {\n    return \"hass:clock\";\n  }\n  if (!state.attributes.has_time) {\n    return \"hass:calendar\";\n  }\n  return domainIcon(\"input_datetime\");\n};\n","/**\n@license\nCopyright (c) 2015 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at\nhttp://polymer.github.io/LICENSE.txt The complete set of authors may be found at\nhttp://polymer.github.io/AUTHORS.txt The complete set of contributors may be\nfound at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as\npart of the polymer project is also subject to an additional IP rights grant\nfound at http://polymer.github.io/PATENTS.txt\n*/\nimport '@polymer/polymer/polymer-legacy.js';\nimport '@polymer/iron-flex-layout/iron-flex-layout.js';\nimport '@polymer/paper-styles/typography.js';\nimport './paper-item-shared-styles.js';\n\nimport {Polymer} from '@polymer/polymer/lib/legacy/polymer-fn.js';\nimport {html} from '@polymer/polymer/lib/utils/html-tag.js';\n\nimport {PaperItemBehavior} from './paper-item-behavior.js';\n\n/*\n`<paper-icon-item>` is a convenience element to make an item with icon. It is an\ninteractive list item with a fixed-width icon area, according to Material\nDesign. This is useful if the icons are of varying widths, but you want the item\nbodies to line up. Use this like a `<paper-item>`. The child node with the slot\nname `item-icon` is placed in the icon area.\n\n    <paper-icon-item>\n      <iron-icon icon=\"favorite\" slot=\"item-icon\"></iron-icon>\n      Favorite\n    </paper-icon-item>\n    <paper-icon-item>\n      <div class=\"avatar\" slot=\"item-icon\"></div>\n      Avatar\n    </paper-icon-item>\n\n### Styling\n\nThe following custom properties and mixins are available for styling:\n\nCustom property | Description | Default\n----------------|-------------|----------\n`--paper-item-icon-width` | Width of the icon area | `56px`\n`--paper-item-icon` | Mixin applied to the icon area | `{}`\n`--paper-icon-item` | Mixin applied to the item | `{}`\n`--paper-item-selected-weight` | The font weight of a selected item | `bold`\n`--paper-item-selected` | Mixin applied to selected paper-items | `{}`\n`--paper-item-disabled-color` | The color for disabled paper-items | `--disabled-text-color`\n`--paper-item-disabled` | Mixin applied to disabled paper-items | `{}`\n`--paper-item-focused` | Mixin applied to focused paper-items | `{}`\n`--paper-item-focused-before` | Mixin applied to :before focused paper-items | `{}`\n\n*/\nPolymer({\n  _template: html`\n    <style include=\"paper-item-shared-styles\"></style>\n    <style>\n      :host {\n        @apply --layout-horizontal;\n        @apply --layout-center;\n        @apply --paper-font-subhead;\n\n        @apply --paper-item;\n        @apply --paper-icon-item;\n      }\n\n      .content-icon {\n        @apply --layout-horizontal;\n        @apply --layout-center;\n\n        width: var(--paper-item-icon-width, 56px);\n        @apply --paper-item-icon;\n      }\n    </style>\n\n    <div id=\"contentIcon\" class=\"content-icon\">\n      <slot name=\"item-icon\"></slot>\n    </div>\n    <slot></slot>\n`,\n\n  is: 'paper-icon-item',\n  behaviors: [PaperItemBehavior]\n});\n","import { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport \"../../resources/ha-style\";\n\nclass HaConfigSection extends PolymerElement {\n  static get template() {\n    return html`\n      <style include=\"iron-flex ha-style\">\n        .content {\n          padding: 28px 20px 0;\n          max-width: 1040px;\n          margin: 0 auto;\n        }\n\n        .header {\n          @apply --paper-font-display1;\n          opacity: var(--dark-primary-opacity);\n        }\n\n        .together {\n          margin-top: 32px;\n        }\n\n        .intro {\n          @apply --paper-font-subhead;\n          width: 100%;\n          max-width: 400px;\n          margin-right: 40px;\n          opacity: var(--dark-primary-opacity);\n        }\n\n        .panel {\n          margin-top: -24px;\n        }\n\n        .panel ::slotted(*) {\n          margin-top: 24px;\n          display: block;\n        }\n\n        .narrow.content {\n          max-width: 640px;\n        }\n        .narrow .together {\n          margin-top: 20px;\n        }\n        .narrow .header {\n          @apply --paper-font-headline;\n        }\n        .narrow .intro {\n          font-size: 14px;\n          padding-bottom: 20px;\n          margin-right: 0;\n          max-width: 500px;\n        }\n      </style>\n      <div class$=\"[[computeContentClasses(isWide)]]\">\n        <div class=\"header\"><slot name=\"header\"></slot></div>\n        <div class$=\"[[computeClasses(isWide)]]\">\n          <div class=\"intro\"><slot name=\"introduction\"></slot></div>\n          <div class=\"panel flex-auto\"><slot></slot></div>\n        </div>\n      </div>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: {\n        type: Object,\n      },\n\n      narrow: {\n        type: Boolean,\n      },\n\n      isWide: {\n        type: Boolean,\n        value: false,\n      },\n    };\n  }\n\n  computeContentClasses(isWide) {\n    var classes = \"content \";\n\n    return isWide ? classes : classes + \"narrow\";\n  }\n\n  computeClasses(isWide) {\n    var classes = \"together layout \";\n\n    return classes + (isWide ? \"horizontal\" : \"vertical narrow\");\n  }\n}\n\ncustomElements.define(\"ha-config-section\", HaConfigSection);\n","export const compare = (a: string, b: string) => {\n  if (a < b) {\n    return -1;\n  }\n  if (a > b) {\n    return 1;\n  }\n\n  return 0;\n};\n\nexport const caseInsensitiveCompare = (a: string, b: string) =>\n  compare(a.toLowerCase(), b.toLowerCase());\n","import { HomeAssistant } from \"../types\";\nimport { createCollection, Connection } from \"home-assistant-js-websocket\";\nimport { debounce } from \"../common/util/debounce\";\nimport { EntityRegistryEntry } from \"./entity_registry\";\nimport { computeStateName } from \"../common/entity/compute_state_name\";\n\nexport interface DeviceRegistryEntry {\n  id: string;\n  config_entries: string[];\n  connections: Array<[string, string]>;\n  manufacturer: string;\n  model?: string;\n  name?: string;\n  sw_version?: string;\n  via_device_id?: string;\n  area_id?: string;\n  name_by_user?: string;\n}\n\nexport interface DeviceRegistryEntryMutableParams {\n  area_id?: string | null;\n  name_by_user?: string | null;\n}\n\nexport const computeDeviceName = (\n  device: DeviceRegistryEntry,\n  hass: HomeAssistant,\n  entities?: EntityRegistryEntry[] | string[]\n) => {\n  return (\n    device.name_by_user ||\n    device.name ||\n    (entities && fallbackDeviceName(hass, entities)) ||\n    hass.localize(\"ui.panel.config.devices.unnamed_device\")\n  );\n};\n\nexport const fallbackDeviceName = (\n  hass: HomeAssistant,\n  entities: EntityRegistryEntry[] | string[]\n) => {\n  for (const entity of entities || []) {\n    const entityId = typeof entity === \"string\" ? entity : entity.entity_id;\n    const stateObj = hass.states[entityId];\n    if (stateObj) {\n      return computeStateName(stateObj);\n    }\n  }\n  return undefined;\n};\n\nexport const updateDeviceRegistryEntry = (\n  hass: HomeAssistant,\n  deviceId: string,\n  updates: Partial<DeviceRegistryEntryMutableParams>\n) =>\n  hass.callWS<DeviceRegistryEntry>({\n    type: \"config/device_registry/update\",\n    device_id: deviceId,\n    ...updates,\n  });\n\nconst fetchDeviceRegistry = (conn) =>\n  conn.sendMessagePromise({\n    type: \"config/device_registry/list\",\n  });\n\nconst subscribeDeviceRegistryUpdates = (conn, store) =>\n  conn.subscribeEvents(\n    debounce(\n      () =>\n        fetchDeviceRegistry(conn).then((devices) =>\n          store.setState(devices, true)\n        ),\n      500,\n      true\n    ),\n    \"device_registry_updated\"\n  );\n\nexport const subscribeDeviceRegistry = (\n  conn: Connection,\n  onChange: (devices: DeviceRegistryEntry[]) => void\n) =>\n  createCollection<DeviceRegistryEntry[]>(\n    \"_dr\",\n    fetchDeviceRegistry,\n    subscribeDeviceRegistryUpdates,\n    conn,\n    onChange\n  );\n","import { createCollection, Connection } from \"home-assistant-js-websocket\";\nimport { HomeAssistant } from \"../types\";\nimport { compare } from \"../common/string/compare\";\nimport { debounce } from \"../common/util/debounce\";\n\nexport interface AreaRegistryEntry {\n  area_id: string;\n  name: string;\n}\n\nexport interface AreaRegistryEntryMutableParams {\n  name: string;\n}\n\nexport const createAreaRegistryEntry = (\n  hass: HomeAssistant,\n  values: AreaRegistryEntryMutableParams\n) =>\n  hass.callWS<AreaRegistryEntry>({\n    type: \"config/area_registry/create\",\n    ...values,\n  });\n\nexport const updateAreaRegistryEntry = (\n  hass: HomeAssistant,\n  areaId: string,\n  updates: Partial<AreaRegistryEntryMutableParams>\n) =>\n  hass.callWS<AreaRegistryEntry>({\n    type: \"config/area_registry/update\",\n    area_id: areaId,\n    ...updates,\n  });\n\nexport const deleteAreaRegistryEntry = (hass: HomeAssistant, areaId: string) =>\n  hass.callWS({\n    type: \"config/area_registry/delete\",\n    area_id: areaId,\n  });\n\nconst fetchAreaRegistry = (conn) =>\n  conn\n    .sendMessagePromise({\n      type: \"config/area_registry/list\",\n    })\n    .then((areas) => areas.sort((ent1, ent2) => compare(ent1.name, ent2.name)));\n\nconst subscribeAreaRegistryUpdates = (conn, store) =>\n  conn.subscribeEvents(\n    debounce(\n      () =>\n        fetchAreaRegistry(conn).then((areas) => store.setState(areas, true)),\n      500,\n      true\n    ),\n    \"area_registry_updated\"\n  );\n\nexport const subscribeAreaRegistry = (\n  conn: Connection,\n  onChange: (areas: AreaRegistryEntry[]) => void\n) =>\n  createCollection<AreaRegistryEntry[]>(\n    \"_areaRegistry\",\n    fetchAreaRegistry,\n    subscribeAreaRegistryUpdates,\n    conn,\n    onChange\n  );\n","import { fireEvent } from \"../../common/dom/fire_event\";\n\nexport interface ConfirmationDialogParams {\n  title?: string;\n  text: string;\n  confirmBtnText?: string;\n  cancelBtnText?: string;\n  confirm: () => void;\n}\n\nexport const loadConfirmationDialog = () =>\n  import(/* webpackChunkName: \"confirmation\" */ \"./dialog-confirmation\");\n\nexport const showConfirmationDialog = (\n  element: HTMLElement,\n  systemLogDetailParams: ConfirmationDialogParams\n): void => {\n  fireEvent(element, \"show-dialog\", {\n    dialogTag: \"dialog-confirmation\",\n    dialogImport: loadConfirmationDialog,\n    dialogParams: systemLogDetailParams,\n  });\n};\n","import { createCollection, Connection } from \"home-assistant-js-websocket\";\nimport { HomeAssistant } from \"../types\";\nimport { computeStateName } from \"../common/entity/compute_state_name\";\nimport { debounce } from \"../common/util/debounce\";\n\nexport interface EntityRegistryEntry {\n  entity_id: string;\n  name: string;\n  platform: string;\n  config_entry_id?: string;\n  device_id?: string;\n  disabled_by: string | null;\n}\n\nexport interface EntityRegistryEntryUpdateParams {\n  name?: string | null;\n  disabled_by?: string | null;\n  new_entity_id?: string;\n}\n\nexport const computeEntityRegistryName = (\n  hass: HomeAssistant,\n  entry: EntityRegistryEntry\n): string | null => {\n  if (entry.name) {\n    return entry.name;\n  }\n  const state = hass.states[entry.entity_id];\n  return state ? computeStateName(state) : null;\n};\n\nexport const updateEntityRegistryEntry = (\n  hass: HomeAssistant,\n  entityId: string,\n  updates: Partial<EntityRegistryEntryUpdateParams>\n): Promise<EntityRegistryEntry> =>\n  hass.callWS<EntityRegistryEntry>({\n    type: \"config/entity_registry/update\",\n    entity_id: entityId,\n    ...updates,\n  });\n\nexport const removeEntityRegistryEntry = (\n  hass: HomeAssistant,\n  entityId: string\n): Promise<void> =>\n  hass.callWS({\n    type: \"config/entity_registry/remove\",\n    entity_id: entityId,\n  });\n\nconst fetchEntityRegistry = (conn) =>\n  conn.sendMessagePromise({\n    type: \"config/entity_registry/list\",\n  });\n\nconst subscribeEntityRegistryUpdates = (conn, store) =>\n  conn.subscribeEvents(\n    debounce(\n      () =>\n        fetchEntityRegistry(conn).then((entities) =>\n          store.setState(entities, true)\n        ),\n      500,\n      true\n    ),\n    \"entity_registry_updated\"\n  );\n\nexport const subscribeEntityRegistry = (\n  conn: Connection,\n  onChange: (entities: EntityRegistryEntry[]) => void\n) =>\n  createCollection<EntityRegistryEntry[]>(\n    \"_entityRegistry\",\n    fetchEntityRegistry,\n    subscribeEntityRegistryUpdates,\n    conn,\n    onChange\n  );\n","import { classMap } from \"lit-html/directives/class-map\";\nimport { html, customElement } from \"lit-element\";\nimport { ripple } from \"@material/mwc-ripple/ripple-directive.js\";\n\nimport \"@material/mwc-fab\";\nimport { Constructor } from \"../types\";\n// tslint:disable-next-line\nimport { Fab } from \"@material/mwc-fab\";\n// tslint:disable-next-line\nconst MwcFab = customElements.get(\"mwc-fab\") as Constructor<Fab>;\n\n@customElement(\"ha-fab\")\nexport class HaFab extends MwcFab {\n  // We override the render method because we don't have an icon font and mwc-fab doesn't support our svg-icon sets.\n  // Based on version mwc-fab 0.8\n  protected render() {\n    const classes = {\n      \"mdc-fab--mini\": this.mini,\n      \"mdc-fab--exited\": this.exited,\n      \"mdc-fab--extended\": this.extended,\n    };\n    const showLabel = this.label !== \"\" && this.extended;\n    return html`\n      <button\n        .ripple=\"${ripple()}\"\n        class=\"mdc-fab ${classMap(classes)}\"\n        ?disabled=\"${this.disabled}\"\n        aria-label=\"${this.label || this.icon}\"\n      >\n        ${showLabel && this.showIconAtEnd ? this.label : \"\"}\n        ${this.icon\n          ? html`\n              <ha-icon .icon=${this.icon}></ha-icon>\n            `\n          : \"\"}\n        ${showLabel && !this.showIconAtEnd ? this.label : \"\"}\n      </button>\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-fab\": HaFab;\n  }\n}\n","/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at\nhttp://polymer.github.io/LICENSE.txt The complete set of authors may be found at\nhttp://polymer.github.io/AUTHORS.txt The complete set of contributors may be\nfound at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as\npart of the polymer project is also subject to an additional IP rights grant\nfound at http://polymer.github.io/PATENTS.txt\n*/\nimport '@polymer/polymer/polymer-legacy.js';\n\nimport {Polymer} from '@polymer/polymer/lib/legacy/polymer-fn.js';\n\n/**\n`app-route` is an element that enables declarative, self-describing routing\nfor a web app.\n\nIn its typical usage, a `app-route` element consumes an object that describes\nsome state about the current route, via the `route` property. It then parses\nthat state using the `pattern` property, and produces two artifacts: some `data`\nrelated to the `route`, and a `tail` that contains the rest of the `route` that\ndid not match.\n\nHere is a basic example, when used with `app-location`:\n\n    <app-location route=\"{{route}}\"></app-location>\n    <app-route\n        route=\"{{route}}\"\n        pattern=\"/:page\"\n        data=\"{{data}}\"\n        tail=\"{{tail}}\">\n    </app-route>\n\nIn the above example, the `app-location` produces a `route` value. Then, the\n`route.path` property is matched by comparing it to the `pattern` property. If\nthe `pattern` property matches `route.path`, the `app-route` will set or update\nits `data` property with an object whose properties correspond to the parameters\nin `pattern`. So, in the above example, if `route.path` was `'/about'`, the\nvalue of `data` would be `{\"page\": \"about\"}`.\n\nThe `tail` property represents the remaining part of the route state after the\n`pattern` has been applied to a matching `route`.\n\nHere is another example, where `tail` is used:\n\n    <app-location route=\"{{route}}\"></app-location>\n    <app-route\n        route=\"{{route}}\"\n        pattern=\"/:page\"\n        data=\"{{routeData}}\"\n        tail=\"{{subroute}}\">\n    </app-route>\n    <app-route\n        route=\"{{subroute}}\"\n        pattern=\"/:id\"\n        data=\"{{subrouteData}}\">\n    </app-route>\n\nIn the above example, there are two `app-route` elements. The first\n`app-route` consumes a `route`. When the `route` is matched, the first\n`app-route` also produces `routeData` from its `data`, and `subroute` from\nits `tail`. The second `app-route` consumes the `subroute`, and when it\nmatches, it produces an object called `subrouteData` from its `data`.\n\nSo, when `route.path` is `'/about'`, the `routeData` object will look like\nthis: `{ page: 'about' }`\n\nAnd `subrouteData` will be null. However, if `route.path` changes to\n`'/article/123'`, the `routeData` object will look like this:\n`{ page: 'article' }`\n\nAnd the `subrouteData` will look like this: `{ id: '123' }`\n\n`app-route` is responsive to bi-directional changes to the `data` objects\nthey produce. So, if `routeData.page` changed from `'article'` to `'about'`,\nthe `app-route` will update `route.path`. This in-turn will update the\n`app-location`, and cause the global location bar to change its value.\n\n@element app-route\n@demo demo/index.html\n@demo demo/data-loading-demo.html\n@demo demo/simple-demo.html\n*/\nPolymer({\n  is: 'app-route',\n\n  properties: {\n    /**\n     * The URL component managed by this element.\n     */\n    route: {\n      type: Object,\n      notify: true,\n    },\n\n    /**\n     * The pattern of slash-separated segments to match `route.path` against.\n     *\n     * For example the pattern \"/foo\" will match \"/foo\" or \"/foo/bar\"\n     * but not \"/foobar\".\n     *\n     * Path segments like `/:named` are mapped to properties on the `data`\n     * object.\n     */\n    pattern: {\n      type: String,\n    },\n\n    /**\n     * The parameterized values that are extracted from the route as\n     * described by `pattern`.\n     */\n    data: {\n      type: Object,\n      value: function() {\n        return {};\n      },\n      notify: true,\n    },\n\n    /**\n     * Auto activate route if path empty\n     */\n    autoActivate: {\n      type: Boolean,\n      value: false,\n    },\n\n    _queryParamsUpdating: {\n      type: Boolean,\n      value: false,\n    },\n\n    /**\n     * @type {?Object}\n     */\n    queryParams: {\n      type: Object,\n      value: function() {\n        return {};\n      },\n      notify: true,\n    },\n\n    /**\n     * The part of `route.path` NOT consumed by `pattern`.\n     */\n    tail: {\n      type: Object,\n      value: function() {\n        return {\n          path: null,\n          prefix: null,\n          __queryParams: null,\n        };\n      },\n      notify: true,\n    },\n\n    /**\n     * Whether the current route is active. True if `route.path` matches the\n     * `pattern`, false otherwise.\n     */\n    active: {\n      type: Boolean,\n      notify: true,\n      readOnly: true,\n    },\n\n    /**\n     * @type {?string}\n     */\n    _matched: {\n      type: String,\n      value: '',\n    }\n  },\n\n  observers: [\n    '__tryToMatch(route.path, pattern)',\n    '__updatePathOnDataChange(data.*)',\n    '__tailPathChanged(tail.path)',\n    '__routeQueryParamsChanged(route.__queryParams)',\n    '__tailQueryParamsChanged(tail.__queryParams)',\n    '__queryParamsChanged(queryParams.*)'\n  ],\n\n  created: function() {\n    this.linkPaths('route.__queryParams', 'tail.__queryParams');\n    this.linkPaths('tail.__queryParams', 'route.__queryParams');\n  },\n\n  /**\n   * Deal with the query params object being assigned to wholesale.\n   */\n  __routeQueryParamsChanged: function(queryParams) {\n    if (queryParams && this.tail) {\n      if (this.tail.__queryParams !== queryParams) {\n        this.set('tail.__queryParams', queryParams);\n      }\n\n      if (!this.active || this._queryParamsUpdating) {\n        return;\n      }\n\n      // Copy queryParams and track whether there are any differences compared\n      // to the existing query params.\n      var copyOfQueryParams = {};\n      var anythingChanged = false;\n      for (var key in queryParams) {\n        copyOfQueryParams[key] = queryParams[key];\n        if (anythingChanged || !this.queryParams ||\n            queryParams[key] !== this.queryParams[key]) {\n          anythingChanged = true;\n        }\n      }\n      // Need to check whether any keys were deleted\n      for (var key in this.queryParams) {\n        if (anythingChanged || !(key in queryParams)) {\n          anythingChanged = true;\n          break;\n        }\n      }\n\n      if (!anythingChanged) {\n        return;\n      }\n      this._queryParamsUpdating = true;\n      this.set('queryParams', copyOfQueryParams);\n      this._queryParamsUpdating = false;\n    }\n  },\n\n  __tailQueryParamsChanged: function(queryParams) {\n    if (queryParams && this.route && this.route.__queryParams != queryParams) {\n      this.set('route.__queryParams', queryParams);\n    }\n  },\n\n  __queryParamsChanged: function(changes) {\n    if (!this.active || this._queryParamsUpdating) {\n      return;\n    }\n\n    this.set('route.__' + changes.path, changes.value);\n  },\n\n  __resetProperties: function() {\n    this._setActive(false);\n    this._matched = null;\n  },\n\n  __tryToMatch: function() {\n    if (!this.route) {\n      return;\n    }\n\n    var path = this.route.path;\n    var pattern = this.pattern;\n\n    if (this.autoActivate && path === '') {\n      path = '/';\n    }\n\n    if (!pattern) {\n      return;\n    }\n\n    if (!path) {\n      this.__resetProperties();\n      return;\n    }\n\n    var remainingPieces = path.split('/');\n    var patternPieces = pattern.split('/');\n\n    var matched = [];\n    var namedMatches = {};\n\n    for (var i = 0; i < patternPieces.length; i++) {\n      var patternPiece = patternPieces[i];\n      if (!patternPiece && patternPiece !== '') {\n        break;\n      }\n      var pathPiece = remainingPieces.shift();\n\n      // We don't match this path.\n      if (!pathPiece && pathPiece !== '') {\n        this.__resetProperties();\n        return;\n      }\n      matched.push(pathPiece);\n\n      if (patternPiece.charAt(0) == ':') {\n        namedMatches[patternPiece.slice(1)] = pathPiece;\n      } else if (patternPiece !== pathPiece) {\n        this.__resetProperties();\n        return;\n      }\n    }\n\n    this._matched = matched.join('/');\n\n    // Properties that must be updated atomically.\n    var propertyUpdates = {};\n\n    // this.active\n    if (!this.active) {\n      propertyUpdates.active = true;\n    }\n\n    // this.tail\n    var tailPrefix = this.route.prefix + this._matched;\n    var tailPath = remainingPieces.join('/');\n    if (remainingPieces.length > 0) {\n      tailPath = '/' + tailPath;\n    }\n    if (!this.tail || this.tail.prefix !== tailPrefix ||\n        this.tail.path !== tailPath) {\n      propertyUpdates.tail = {\n        prefix: tailPrefix,\n        path: tailPath,\n        __queryParams: this.route.__queryParams\n      };\n    }\n\n    // this.data\n    propertyUpdates.data = namedMatches;\n    this._dataInUrl = {};\n    for (var key in namedMatches) {\n      this._dataInUrl[key] = namedMatches[key];\n    }\n\n    if (this.setProperties) {\n      // atomic update\n      this.setProperties(propertyUpdates, true);\n    } else {\n      this.__setMulti(propertyUpdates);\n    }\n  },\n\n  __tailPathChanged: function(path) {\n    if (!this.active) {\n      return;\n    }\n    var tailPath = path;\n    var newPath = this._matched;\n    if (tailPath) {\n      if (tailPath.charAt(0) !== '/') {\n        tailPath = '/' + tailPath;\n      }\n      newPath += tailPath;\n    }\n    this.set('route.path', newPath);\n  },\n\n  __updatePathOnDataChange: function() {\n    if (!this.route || !this.active) {\n      return;\n    }\n    var newPath = this.__getLink({});\n    var oldPath = this.__getLink(this._dataInUrl);\n    if (newPath === oldPath) {\n      return;\n    }\n    this.set('route.path', newPath);\n  },\n\n  __getLink: function(overrideValues) {\n    var values = {tail: null};\n    for (var key in this.data) {\n      values[key] = this.data[key];\n    }\n    for (var key in overrideValues) {\n      values[key] = overrideValues[key];\n    }\n    var patternPieces = this.pattern.split('/');\n    var interp = patternPieces.map(function(value) {\n      if (value[0] == ':') {\n        value = values[value.slice(1)];\n      }\n      return value;\n    }, this);\n    if (values.tail && values.tail.path) {\n      if (interp.length > 0 && values.tail.path.charAt(0) === '/') {\n        interp.push(values.tail.path.slice(1));\n      } else {\n        interp.push(values.tail.path);\n      }\n    }\n    return interp.join('/');\n  },\n\n  __setMulti: function(setObj) {\n    // HACK(rictic): skirting around 1.0's lack of a setMulti by poking at\n    //     internal data structures. I would not advise that you copy this\n    //     example.\n    //\n    //     In the future this will be a feature of Polymer itself.\n    //     See: https://github.com/Polymer/polymer/issues/3640\n    //\n    //     Hacking around with private methods like this is juggling footguns,\n    //     and is likely to have unexpected and unsupported rough edges.\n    //\n    //     Be ye so warned.\n    for (var property in setObj) {\n      this._propertySetter(property, setObj[property]);\n    }\n    // notify in a specific order\n    if (setObj.data !== undefined) {\n      this._pathEffector('data', this.data);\n      this._notifyChange('data');\n    }\n    if (setObj.active !== undefined) {\n      this._pathEffector('active', this.active);\n      this._notifyChange('active');\n    }\n    if (setObj.tail !== undefined) {\n      this._pathEffector('tail', this.tail);\n      this._notifyChange('tail');\n    }\n  }\n});\n","/**\n@license\nCopyright (c) 2015 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at\nhttp://polymer.github.io/LICENSE.txt The complete set of authors may be found at\nhttp://polymer.github.io/AUTHORS.txt The complete set of contributors may be\nfound at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as\npart of the polymer project is also subject to an additional IP rights grant\nfound at http://polymer.github.io/PATENTS.txt\n*/\nimport '@polymer/polymer/polymer-legacy.js';\n\nimport {Polymer} from '@polymer/polymer/lib/legacy/polymer-fn.js';\nimport {dom} from '@polymer/polymer/lib/legacy/polymer.dom.js';\nimport {html} from '@polymer/polymer/lib/utils/html-tag.js';\n\n/**\nMaterial design:\n[Tooltips](https://www.google.com/design/spec/components/tooltips.html)\n`<paper-tooltip>` is a label that appears on hover and focus when the user\nhovers over an element with the cursor or with the keyboard. It will be centered\nto an anchor element specified in the `for` attribute, or, if that doesn't\nexist, centered to the parent node containing it.\nExample:\n    <div style=\"display:inline-block\">\n      <button>Click me!</button>\n      <paper-tooltip>Tooltip text</paper-tooltip>\n    </div>\n    <div>\n      <button id=\"btn\">Click me!</button>\n      <paper-tooltip for=\"btn\">Tooltip text</paper-tooltip>\n    </div>\nThe tooltip can be positioned on the top|bottom|left|right of the anchor using\nthe `position` attribute. The default position is bottom.\n    <paper-tooltip for=\"btn\" position=\"left\">Tooltip text</paper-tooltip>\n    <paper-tooltip for=\"btn\" position=\"top\">Tooltip text</paper-tooltip>\n\n### Styling\nThe following custom properties and mixins are available for styling:\nCustom property | Description | Default\n----------------|-------------|----------\n`--paper-tooltip-background` | The background color of the tooltip | `#616161`\n`--paper-tooltip-opacity` | The opacity of the tooltip | `0.9`\n`--paper-tooltip-text-color` | The text color of the tooltip | `white`\n`--paper-tooltip` | Mixin applied to the tooltip | `{}`\n`--paper-tooltip-delay-in` | Delay before tooltip starts to fade in | `500`\n`--paper-tooltip-delay-out` | Delay before tooltip starts to fade out | `0`\n`--paper-tooltip-duration-in` | Timing for animation when showing tooltip | `500`\n`--paper-tooltip-duration-out` | Timing for animation when hiding tooltip | `0`\n`--paper-tooltip-animation` | Mixin applied to the tooltip animation | `{}`\n@group Paper Elements\n@element paper-tooltip\n@demo demo/index.html\n*/\nPolymer({\n  _template: html`\n    <style>\n      :host {\n        display: block;\n        position: absolute;\n        outline: none;\n        z-index: 1002;\n        -moz-user-select: none;\n        -ms-user-select: none;\n        -webkit-user-select: none;\n        user-select: none;\n        cursor: default;\n      }\n\n      #tooltip {\n        display: block;\n        outline: none;\n        @apply --paper-font-common-base;\n        font-size: 10px;\n        line-height: 1;\n        background-color: var(--paper-tooltip-background, #616161);\n        color: var(--paper-tooltip-text-color, white);\n        padding: 8px;\n        border-radius: 2px;\n        @apply --paper-tooltip;\n      }\n\n      @keyframes keyFrameScaleUp {\n        0% {\n          transform: scale(0.0);\n        }\n        100% {\n          transform: scale(1.0);\n        }\n      }\n\n      @keyframes keyFrameScaleDown {\n        0% {\n          transform: scale(1.0);\n        }\n        100% {\n          transform: scale(0.0);\n        }\n      }\n\n      @keyframes keyFrameFadeInOpacity {\n        0% {\n          opacity: 0;\n        }\n        100% {\n          opacity: var(--paper-tooltip-opacity, 0.9);\n        }\n      }\n\n      @keyframes keyFrameFadeOutOpacity {\n        0% {\n          opacity: var(--paper-tooltip-opacity, 0.9);\n        }\n        100% {\n          opacity: 0;\n        }\n      }\n\n      @keyframes keyFrameSlideDownIn {\n        0% {\n          transform: translateY(-2000px);\n          opacity: 0;\n        }\n        10% {\n          opacity: 0.2;\n        }\n        100% {\n          transform: translateY(0);\n          opacity: var(--paper-tooltip-opacity, 0.9);\n        }\n      }\n\n      @keyframes keyFrameSlideDownOut {\n        0% {\n          transform: translateY(0);\n          opacity: var(--paper-tooltip-opacity, 0.9);\n        }\n        10% {\n          opacity: 0.2;\n        }\n        100% {\n          transform: translateY(-2000px);\n          opacity: 0;\n        }\n      }\n\n      .fade-in-animation {\n        opacity: 0;\n        animation-delay: var(--paper-tooltip-delay-in, 500ms);\n        animation-name: keyFrameFadeInOpacity;\n        animation-iteration-count: 1;\n        animation-timing-function: ease-in;\n        animation-duration: var(--paper-tooltip-duration-in, 500ms);\n        animation-fill-mode: forwards;\n        @apply --paper-tooltip-animation;\n      }\n\n      .fade-out-animation {\n        opacity: var(--paper-tooltip-opacity, 0.9);\n        animation-delay: var(--paper-tooltip-delay-out, 0ms);\n        animation-name: keyFrameFadeOutOpacity;\n        animation-iteration-count: 1;\n        animation-timing-function: ease-in;\n        animation-duration: var(--paper-tooltip-duration-out, 500ms);\n        animation-fill-mode: forwards;\n        @apply --paper-tooltip-animation;\n      }\n\n      .scale-up-animation {\n        transform: scale(0);\n        opacity: var(--paper-tooltip-opacity, 0.9);\n        animation-delay: var(--paper-tooltip-delay-in, 500ms);\n        animation-name: keyFrameScaleUp;\n        animation-iteration-count: 1;\n        animation-timing-function: ease-in;\n        animation-duration: var(--paper-tooltip-duration-in, 500ms);\n        animation-fill-mode: forwards;\n        @apply --paper-tooltip-animation;\n      }\n\n      .scale-down-animation {\n        transform: scale(1);\n        opacity: var(--paper-tooltip-opacity, 0.9);\n        animation-delay: var(--paper-tooltip-delay-out, 500ms);\n        animation-name: keyFrameScaleDown;\n        animation-iteration-count: 1;\n        animation-timing-function: ease-in;\n        animation-duration: var(--paper-tooltip-duration-out, 500ms);\n        animation-fill-mode: forwards;\n        @apply --paper-tooltip-animation;\n      }\n\n      .slide-down-animation {\n        transform: translateY(-2000px);\n        opacity: 0;\n        animation-delay: var(--paper-tooltip-delay-out, 500ms);\n        animation-name: keyFrameSlideDownIn;\n        animation-iteration-count: 1;\n        animation-timing-function: cubic-bezier(0.0, 0.0, 0.2, 1);\n        animation-duration: var(--paper-tooltip-duration-out, 500ms);\n        animation-fill-mode: forwards;\n        @apply --paper-tooltip-animation;\n      }\n\n      .slide-down-animation-out {\n        transform: translateY(0);\n        opacity: var(--paper-tooltip-opacity, 0.9);\n        animation-delay: var(--paper-tooltip-delay-out, 500ms);\n        animation-name: keyFrameSlideDownOut;\n        animation-iteration-count: 1;\n        animation-timing-function: cubic-bezier(0.4, 0.0, 1, 1);\n        animation-duration: var(--paper-tooltip-duration-out, 500ms);\n        animation-fill-mode: forwards;\n        @apply --paper-tooltip-animation;\n      }\n\n      .cancel-animation {\n        animation-delay: -30s !important;\n      }\n\n      /* Thanks IE 10. */\n\n      .hidden {\n        display: none !important;\n      }\n    </style>\n\n    <div id=\"tooltip\" class=\"hidden\">\n      <slot></slot>\n    </div>\n`,\n\n  is: 'paper-tooltip',\n  hostAttributes: {role: 'tooltip', tabindex: -1},\n\n  properties: {\n    /**\n     * The id of the element that the tooltip is anchored to. This element\n     * must be a sibling of the tooltip. If this property is not set,\n     * then the tooltip will be centered to the parent node containing it.\n     */\n    for: {type: String, observer: '_findTarget'},\n    /**\n     * Set this to true if you want to manually control when the tooltip\n     * is shown or hidden.\n     */\n    manualMode: {type: Boolean, value: false, observer: '_manualModeChanged'},\n    /**\n     * Positions the tooltip to the top, right, bottom, left of its content.\n     */\n    position: {type: String, value: 'bottom'},\n    /**\n     * If true, no parts of the tooltip will ever be shown offscreen.\n     */\n    fitToVisibleBounds: {type: Boolean, value: false},\n    /**\n     * The spacing between the top of the tooltip and the element it is\n     * anchored to.\n     */\n    offset: {type: Number, value: 14},\n    /**\n     * This property is deprecated, but left over so that it doesn't\n     * break exiting code. Please use `offset` instead. If both `offset` and\n     * `marginTop` are provided, `marginTop` will be ignored.\n     * @deprecated since version 1.0.3\n     */\n    marginTop: {type: Number, value: 14},\n    /**\n     * The delay that will be applied before the `entry` animation is\n     * played when showing the tooltip.\n     */\n    animationDelay: {type: Number, value: 500, observer: '_delayChange'},\n    /**\n     * The animation that will be played on entry.  This replaces the\n     * deprecated animationConfig.  Entries here will override the\n     * animationConfig settings.  You can enter your own animation\n     * by setting it to the css class name.\n     */\n    animationEntry: {type: String, value: ''},\n    /**\n     * The animation that will be played on exit.  This replaces the\n     * deprecated animationConfig.  Entries here will override the\n     * animationConfig settings.  You can enter your own animation\n     * by setting it to the css class name.\n     */\n    animationExit: {type: String, value: ''},\n    /**\n     * This property is deprecated.  Use --paper-tooltip-animation to change the\n     * animation. The entry and exit animations that will be played when showing\n     * and hiding the tooltip. If you want to override this, you must ensure\n     * that your animationConfig has the exact format below.\n     * @deprecated since version\n     *\n     * The entry and exit animations that will be played when showing and\n     * hiding the tooltip. If you want to override this, you must ensure\n     * that your animationConfig has the exact format below.\n     */\n    animationConfig: {\n      type: Object,\n      value: function() {\n        return {\n          'entry':\n              [{name: 'fade-in-animation', node: this, timing: {delay: 0}}],\n              'exit': [{name: 'fade-out-animation', node: this}]\n        }\n      }\n    },\n    _showing: {type: Boolean, value: false}\n  },\n\n  listeners: {\n    'webkitAnimationEnd': '_onAnimationEnd',\n  },\n\n  /**\n   * Returns the target element that this tooltip is anchored to. It is\n   * either the element given by the `for` attribute, or the immediate parent\n   * of the tooltip.\n   *\n   * @type {Node}\n   */\n  get target() {\n    var parentNode = dom(this).parentNode;\n    // If the parentNode is a document fragment, then we need to use the host.\n    var ownerRoot = dom(this).getOwnerRoot();\n    var target;\n    if (this.for) {\n      target = dom(ownerRoot).querySelector('#' + this.for);\n    } else {\n      target = parentNode.nodeType == Node.DOCUMENT_FRAGMENT_NODE ?\n          ownerRoot.host :\n          parentNode;\n    }\n    return target;\n  },\n\n  /**\n   * @return {void}\n   */\n  attached: function() {\n    this._findTarget();\n  },\n\n  /**\n   * @return {void}\n   */\n  detached: function() {\n    if (!this.manualMode)\n      this._removeListeners();\n  },\n\n  /**\n   * Replaces Neon-Animation playAnimation - just calls show and hide.\n   * @deprecated Use show and hide instead.\n   * @param {string} type Either `entry` or `exit`\n   */\n  playAnimation: function(type) {\n    if (type === 'entry') {\n      this.show();\n    } else if (type === 'exit') {\n      this.hide();\n    }\n  },\n\n  /**\n   * Cancels the animation and either fully shows or fully hides tooltip\n   */\n  cancelAnimation: function() {\n    // Short-cut and cancel all animations and hide\n    this.$.tooltip.classList.add('cancel-animation');\n  },\n\n  /**\n   * Shows the tooltip programatically\n   * @return {void}\n   */\n  show: function() {\n    // If the tooltip is already showing, there's nothing to do.\n    if (this._showing)\n      return;\n\n    if (dom(this).textContent.trim() === '') {\n      // Check if effective children are also empty\n      var allChildrenEmpty = true;\n      var effectiveChildren = dom(this).getEffectiveChildNodes();\n      for (var i = 0; i < effectiveChildren.length; i++) {\n        if (effectiveChildren[i].textContent.trim() !== '') {\n          allChildrenEmpty = false;\n          break;\n        }\n      }\n      if (allChildrenEmpty) {\n        return;\n      }\n    }\n\n    this._showing = true;\n    this.$.tooltip.classList.remove('hidden');\n    this.$.tooltip.classList.remove('cancel-animation');\n    this.$.tooltip.classList.remove(this._getAnimationType('exit'));\n    this.updatePosition();\n    this._animationPlaying = true;\n    this.$.tooltip.classList.add(this._getAnimationType('entry'));\n  },\n\n  /**\n   * Hides the tooltip programatically\n   * @return {void}\n   */\n  hide: function() {\n    // If the tooltip is already hidden, there's nothing to do.\n    if (!this._showing) {\n      return;\n    }\n\n    // If the entry animation is still playing, don't try to play the exit\n    // animation since this will reset the opacity to 1. Just end the animation.\n    if (this._animationPlaying) {\n      this._showing = false;\n      this._cancelAnimation();\n      return;\n    } else {\n      // Play Exit Animation\n      this._onAnimationFinish();\n    }\n\n    this._showing = false;\n    this._animationPlaying = true;\n  },\n\n  /**\n   * @return {void}\n   */\n  updatePosition: function() {\n    if (!this._target || !this.offsetParent)\n      return;\n    var offset = this.offset;\n    // If a marginTop has been provided by the user (pre 1.0.3), use it.\n    if (this.marginTop != 14 && this.offset == 14)\n      offset = this.marginTop;\n    var parentRect = this.offsetParent.getBoundingClientRect();\n    var targetRect = this._target.getBoundingClientRect();\n    var thisRect = this.getBoundingClientRect();\n    var horizontalCenterOffset = (targetRect.width - thisRect.width) / 2;\n    var verticalCenterOffset = (targetRect.height - thisRect.height) / 2;\n    var targetLeft = targetRect.left - parentRect.left;\n    var targetTop = targetRect.top - parentRect.top;\n    var tooltipLeft, tooltipTop;\n    switch (this.position) {\n      case 'top':\n        tooltipLeft = targetLeft + horizontalCenterOffset;\n        tooltipTop = targetTop - thisRect.height - offset;\n        break;\n      case 'bottom':\n        tooltipLeft = targetLeft + horizontalCenterOffset;\n        tooltipTop = targetTop + targetRect.height + offset;\n        break;\n      case 'left':\n        tooltipLeft = targetLeft - thisRect.width - offset;\n        tooltipTop = targetTop + verticalCenterOffset;\n        break;\n      case 'right':\n        tooltipLeft = targetLeft + targetRect.width + offset;\n        tooltipTop = targetTop + verticalCenterOffset;\n        break;\n    }\n    // TODO(noms): This should use IronFitBehavior if possible.\n    if (this.fitToVisibleBounds) {\n      // Clip the left/right side\n      if (parentRect.left + tooltipLeft + thisRect.width > window.innerWidth) {\n        this.style.right = '0px';\n        this.style.left = 'auto';\n      } else {\n        this.style.left = Math.max(0, tooltipLeft) + 'px';\n        this.style.right = 'auto';\n      }\n      // Clip the top/bottom side.\n      if (parentRect.top + tooltipTop + thisRect.height > window.innerHeight) {\n        this.style.bottom = (parentRect.height - targetTop + offset) + 'px';\n        this.style.top = 'auto';\n      } else {\n        this.style.top = Math.max(-parentRect.top, tooltipTop) + 'px';\n        this.style.bottom = 'auto';\n      }\n    } else {\n      this.style.left = tooltipLeft + 'px';\n      this.style.top = tooltipTop + 'px';\n    }\n  },\n\n  _addListeners: function() {\n    if (this._target) {\n      this.listen(this._target, 'mouseenter', 'show');\n      this.listen(this._target, 'focus', 'show');\n      this.listen(this._target, 'mouseleave', 'hide');\n      this.listen(this._target, 'blur', 'hide');\n      this.listen(this._target, 'tap', 'hide');\n    }\n    this.listen(this.$.tooltip, 'animationend', '_onAnimationEnd');\n    this.listen(this, 'mouseenter', 'hide');\n  },\n\n  _findTarget: function() {\n    if (!this.manualMode)\n      this._removeListeners();\n    this._target = this.target;\n    if (!this.manualMode)\n      this._addListeners();\n  },\n\n  _delayChange: function(newValue) {\n    // Only Update delay if different value set\n    if (newValue !== 500) {\n      this.updateStyles({'--paper-tooltip-delay-in': newValue + 'ms'});\n    }\n  },\n\n  _manualModeChanged: function() {\n    if (this.manualMode)\n      this._removeListeners();\n    else\n      this._addListeners();\n  },\n\n  _cancelAnimation: function() {\n    // Short-cut and cancel all animations and hide\n    this.$.tooltip.classList.remove(this._getAnimationType('entry'));\n    this.$.tooltip.classList.remove(this._getAnimationType('exit'));\n    this.$.tooltip.classList.remove('cancel-animation');\n    this.$.tooltip.classList.add('hidden');\n  },\n\n  _onAnimationFinish: function() {\n    if (this._showing) {\n      this.$.tooltip.classList.remove(this._getAnimationType('entry'));\n      this.$.tooltip.classList.remove('cancel-animation');\n      this.$.tooltip.classList.add(this._getAnimationType('exit'));\n    }\n  },\n\n  _onAnimationEnd: function() {\n    // If no longer showing add class hidden to completely hide tooltip\n    this._animationPlaying = false;\n    if (!this._showing) {\n      this.$.tooltip.classList.remove(this._getAnimationType('exit'));\n      this.$.tooltip.classList.add('hidden');\n    }\n  },\n\n  _getAnimationType: function(type) {\n    // These properties have priority over animationConfig values\n    if ((type === 'entry') && (this.animationEntry !== '')) {\n      return this.animationEntry;\n    }\n    if ((type === 'exit') && (this.animationExit !== '')) {\n      return this.animationExit;\n    }\n    // If no results then return the legacy value from animationConfig\n    if (this.animationConfig[type] &&\n        typeof this.animationConfig[type][0].name === 'string') {\n      // Checking Timing and Update if necessary - Legacy for animationConfig\n      if (this.animationConfig[type][0].timing &&\n          this.animationConfig[type][0].timing.delay &&\n          this.animationConfig[type][0].timing.delay !== 0) {\n        var timingDelay = this.animationConfig[type][0].timing.delay;\n        // Has Timing Change - Update CSS\n        if (type === 'entry') {\n          this.updateStyles({'--paper-tooltip-delay-in': timingDelay + 'ms'});\n        } else if (type === 'exit') {\n          this.updateStyles({'--paper-tooltip-delay-out': timingDelay + 'ms'});\n        }\n      }\n      return this.animationConfig[type][0].name;\n    }\n  },\n\n  _removeListeners: function() {\n    if (this._target) {\n      this.unlisten(this._target, 'mouseenter', 'show');\n      this.unlisten(this._target, 'focus', 'show');\n      this.unlisten(this._target, 'mouseleave', 'hide');\n      this.unlisten(this._target, 'blur', 'hide');\n      this.unlisten(this._target, 'tap', 'hide');\n    }\n    this.unlisten(this.$.tooltip, 'animationend', '_onAnimationEnd');\n    this.unlisten(this, 'mouseenter', 'hide');\n  }\n});\n","import \"@polymer/iron-icon/iron-icon\";\n// Not duplicate, this is for typing.\n// tslint:disable-next-line\nimport { HaIcon } from \"./ha-icon\";\n\nexport class HaIconNext extends HaIcon {\n  public connectedCallback() {\n    super.connectedCallback();\n\n    // wait to check for direction since otherwise direction is wrong even though top level is RTL\n    setTimeout(() => {\n      this.icon =\n        window.getComputedStyle(this).direction === \"ltr\"\n          ? \"hass:chevron-right\"\n          : \"hass:chevron-left\";\n    }, 100);\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-icon-next\": HaIconNext;\n  }\n}\n\ncustomElements.define(\"ha-icon-next\", HaIconNext);\n","export default function deepcopy(value) {\n  if (!(!!value && typeof value == 'object')) {\n    return value;\n  }\n  if (Object.prototype.toString.call(value) == '[object Date]') {\n    return new Date(value.getTime());\n  }\n  if (Array.isArray(value)) {\n    return value.map(deepcopy);\n  }\n  var result = {};\n  Object.keys(value).forEach(\n    function(key) { result[key] = deepcopy(value[key]); });\n  return result;\n}\n","import { TemplateResult, html } from \"lit-html\";\nimport {\n  css,\n  CSSResult,\n  customElement,\n  LitElement,\n  property,\n} from \"lit-element\";\nimport { fireEvent } from \"../dom/fire_event\";\nimport \"@polymer/iron-icon/iron-icon\";\nimport \"@polymer/paper-input/paper-input\";\nimport \"@polymer/paper-icon-button/paper-icon-button\";\nimport \"@material/mwc-button\";\n\n@customElement(\"search-input\")\nclass SearchInput extends LitElement {\n  @property() private filter?: string;\n\n  protected render(): TemplateResult | void {\n    return html`\n      <div class=\"search-container\">\n        <paper-input\n          autofocus\n          label=\"Search\"\n          .value=${this.filter}\n          @value-changed=${this._filterInputChanged}\n        >\n          <iron-icon\n            icon=\"hass:magnify\"\n            slot=\"prefix\"\n            class=\"prefix\"\n          ></iron-icon>\n          ${this.filter &&\n            html`\n              <paper-icon-button\n                slot=\"suffix\"\n                class=\"suffix\"\n                @click=${this._clearSearch}\n                icon=\"hass:close\"\n                alt=\"Clear\"\n                title=\"Clear\"\n              ></paper-icon-button>\n            `}\n        </paper-input>\n      </div>\n    `;\n  }\n\n  private async _filterChanged(value: string) {\n    fireEvent(this, \"value-changed\", { value: String(value) });\n  }\n\n  private async _filterInputChanged(e) {\n    this._filterChanged(e.target.value);\n  }\n\n  private async _clearSearch() {\n    this._filterChanged(\"\");\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      paper-input {\n        flex: 1 1 auto;\n        margin: 0 16px;\n      }\n      .search-container {\n        display: inline-flex;\n        width: 100%;\n        align-items: center;\n      }\n      .prefix {\n        margin: 8px;\n      }\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"search-input\": SearchInput;\n  }\n}\n","export const afterNextRender = (cb: () => void): void => {\n  requestAnimationFrame(() => setTimeout(cb, 0));\n};\n\nexport const nextRender = () => {\n  return new Promise((resolve) => {\n    afterNextRender(resolve);\n  });\n};\n","/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n\nimport {DirectiveFn} from '../lib/directive.js';\nimport {createMarker, directive, NodePart, Part, removeNodes, reparentNodes} from '../lit-html.js';\n\nexport type KeyFn<T> = (item: T, index: number) => unknown;\nexport type ItemTemplate<T> = (item: T, index: number) => unknown;\n\n// Helper functions for manipulating parts\n// TODO(kschaaf): Refactor into Part API?\nconst createAndInsertPart =\n    (containerPart: NodePart, beforePart?: NodePart): NodePart => {\n      const container = containerPart.startNode.parentNode as Node;\n      const beforeNode = beforePart === undefined ? containerPart.endNode :\n                                                    beforePart.startNode;\n      const startNode = container.insertBefore(createMarker(), beforeNode);\n      container.insertBefore(createMarker(), beforeNode);\n      const newPart = new NodePart(containerPart.options);\n      newPart.insertAfterNode(startNode);\n      return newPart;\n    };\n\nconst updatePart = (part: NodePart, value: unknown) => {\n  part.setValue(value);\n  part.commit();\n  return part;\n};\n\nconst insertPartBefore =\n    (containerPart: NodePart, part: NodePart, ref?: NodePart) => {\n      const container = containerPart.startNode.parentNode as Node;\n      const beforeNode = ref ? ref.startNode : containerPart.endNode;\n      const endNode = part.endNode.nextSibling;\n      if (endNode !== beforeNode) {\n        reparentNodes(container, part.startNode, endNode, beforeNode);\n      }\n    };\n\nconst removePart = (part: NodePart) => {\n  removeNodes(\n      part.startNode.parentNode!, part.startNode, part.endNode.nextSibling);\n};\n\n// Helper for generating a map of array item to its index over a subset\n// of an array (used to lazily generate `newKeyToIndexMap` and\n// `oldKeyToIndexMap`)\nconst generateMap = (list: unknown[], start: number, end: number) => {\n  const map = new Map();\n  for (let i = start; i <= end; i++) {\n    map.set(list[i], i);\n  }\n  return map;\n};\n\n// Stores previous ordered list of parts and map of key to index\nconst partListCache = new WeakMap<NodePart, (NodePart | null)[]>();\nconst keyListCache = new WeakMap<NodePart, unknown[]>();\n\n/**\n * A directive that repeats a series of values (usually `TemplateResults`)\n * generated from an iterable, and updates those items efficiently when the\n * iterable changes based on user-provided `keys` associated with each item.\n *\n * Note that if a `keyFn` is provided, strict key-to-DOM mapping is maintained,\n * meaning previous DOM for a given key is moved into the new position if\n * needed, and DOM will never be reused with values for different keys (new DOM\n * will always be created for new keys). This is generally the most efficient\n * way to use `repeat` since it performs minimum unnecessary work for insertions\n * amd removals.\n *\n * IMPORTANT: If providing a `keyFn`, keys *must* be unique for all items in a\n * given call to `repeat`. The behavior when two or more items have the same key\n * is undefined.\n *\n * If no `keyFn` is provided, this directive will perform similar to mapping\n * items to values, and DOM will be reused against potentially different items.\n */\nexport const repeat =\n    directive(\n        <T>(items: Iterable<T>,\n            keyFnOrTemplate: KeyFn<T>|ItemTemplate<T>,\n            template?: ItemTemplate<T>):\n            DirectiveFn => {\n              let keyFn: KeyFn<T>;\n              if (template === undefined) {\n                template = keyFnOrTemplate;\n              } else if (keyFnOrTemplate !== undefined) {\n                keyFn = keyFnOrTemplate as KeyFn<T>;\n              }\n\n              return (containerPart: Part): void => {\n                if (!(containerPart instanceof NodePart)) {\n                  throw new Error('repeat can only be used in text bindings');\n                }\n                // Old part & key lists are retrieved from the last update\n                // (associated with the part for this instance of the directive)\n                const oldParts = partListCache.get(containerPart) || [];\n                const oldKeys = keyListCache.get(containerPart) || [];\n\n                // New part list will be built up as we go (either reused from\n                // old parts or created for new keys in this update). This is\n                // saved in the above cache at the end of the update.\n                const newParts: NodePart[] = [];\n\n                // New value list is eagerly generated from items along with a\n                // parallel array indicating its key.\n                const newValues: unknown[] = [];\n                const newKeys: unknown[] = [];\n                let index = 0;\n                for (const item of items) {\n                  newKeys[index] = keyFn ? keyFn(item, index) : index;\n                  newValues[index] = template !(item, index);\n                  index++;\n                }\n\n                // Maps from key to index for current and previous update; these\n                // are generated lazily only when needed as a performance\n                // optimization, since they are only required for multiple\n                // non-contiguous changes in the list, which are less common.\n                let newKeyToIndexMap!: Map<unknown, number>;\n                let oldKeyToIndexMap!: Map<unknown, number>;\n\n                // Head and tail pointers to old parts and new values\n                let oldHead = 0;\n                let oldTail = oldParts.length - 1;\n                let newHead = 0;\n                let newTail = newValues.length - 1;\n\n                // Overview of O(n) reconciliation algorithm (general approach\n                // based on ideas found in ivi, vue, snabbdom, etc.):\n                //\n                // * We start with the list of old parts and new values (and\n                //   arrays of their respective keys), head/tail pointers into\n                //   each, and we build up the new list of parts by updating\n                //   (and when needed, moving) old parts or creating new ones.\n                //   The initial scenario might look like this (for brevity of\n                //   the diagrams, the numbers in the array reflect keys\n                //   associated with the old parts or new values, although keys\n                //   and parts/values are actually stored in parallel arrays\n                //   indexed using the same head/tail pointers):\n                //\n                //      oldHead v                 v oldTail\n                //   oldKeys:  [0, 1, 2, 3, 4, 5, 6]\n                //   newParts: [ ,  ,  ,  ,  ,  ,  ]\n                //   newKeys:  [0, 2, 1, 4, 3, 7, 6] <- reflects the user's new\n                //                                      item order\n                //      newHead ^                 ^ newTail\n                //\n                // * Iterate old & new lists from both sides, updating,\n                //   swapping, or removing parts at the head/tail locations\n                //   until neither head nor tail can move.\n                //\n                // * Example below: keys at head pointers match, so update old\n                //   part 0 in-place (no need to move it) and record part 0 in\n                //   the `newParts` list. The last thing we do is advance the\n                //   `oldHead` and `newHead` pointers (will be reflected in the\n                //   next diagram).\n                //\n                //      oldHead v                 v oldTail\n                //   oldKeys:  [0, 1, 2, 3, 4, 5, 6]\n                //   newParts: [0,  ,  ,  ,  ,  ,  ] <- heads matched: update 0\n                //   newKeys:  [0, 2, 1, 4, 3, 7, 6]    and advance both oldHead\n                //                                      & newHead\n                //      newHead ^                 ^ newTail\n                //\n                // * Example below: head pointers don't match, but tail\n                //   pointers do, so update part 6 in place (no need to move\n                //   it), and record part 6 in the `newParts` list. Last,\n                //   advance the `oldTail` and `oldHead` pointers.\n                //\n                //         oldHead v              v oldTail\n                //   oldKeys:  [0, 1, 2, 3, 4, 5, 6]\n                //   newParts: [0,  ,  ,  ,  ,  , 6] <- tails matched: update 6\n                //   newKeys:  [0, 2, 1, 4, 3, 7, 6]    and advance both oldTail\n                //                                      & newTail\n                //         newHead ^              ^ newTail\n                //\n                // * If neither head nor tail match; next check if one of the\n                //   old head/tail items was removed. We first need to generate\n                //   the reverse map of new keys to index (`newKeyToIndexMap`),\n                //   which is done once lazily as a performance optimization,\n                //   since we only hit this case if multiple non-contiguous\n                //   changes were made. Note that for contiguous removal\n                //   anywhere in the list, the head and tails would advance\n                //   from either end and pass each other before we get to this\n                //   case and removals would be handled in the final while loop\n                //   without needing to generate the map.\n                //\n                // * Example below: The key at `oldTail` was removed (no longer\n                //   in the `newKeyToIndexMap`), so remove that part from the\n                //   DOM and advance just the `oldTail` pointer.\n                //\n                //         oldHead v           v oldTail\n                //   oldKeys:  [0, 1, 2, 3, 4, 5, 6]\n                //   newParts: [0,  ,  ,  ,  ,  , 6] <- 5 not in new map: remove\n                //   newKeys:  [0, 2, 1, 4, 3, 7, 6]    5 and advance oldTail\n                //         newHead ^           ^ newTail\n                //\n                // * Once head and tail cannot move, any mismatches are due to\n                //   either new or moved items; if a new key is in the previous\n                //   \"old key to old index\" map, move the old part to the new\n                //   location, otherwise create and insert a new part. Note\n                //   that when moving an old part we null its position in the\n                //   oldParts array if it lies between the head and tail so we\n                //   know to skip it when the pointers get there.\n                //\n                // * Example below: neither head nor tail match, and neither\n                //   were removed; so find the `newHead` key in the\n                //   `oldKeyToIndexMap`, and move that old part's DOM into the\n                //   next head position (before `oldParts[oldHead]`). Last,\n                //   null the part in the `oldPart` array since it was\n                //   somewhere in the remaining oldParts still to be scanned\n                //   (between the head and tail pointers) so that we know to\n                //   skip that old part on future iterations.\n                //\n                //         oldHead v        v oldTail\n                //   oldKeys:  [0, 1, -, 3, 4, 5, 6]\n                //   newParts: [0, 2,  ,  ,  ,  , 6] <- stuck: update & move 2\n                //   newKeys:  [0, 2, 1, 4, 3, 7, 6]    into place and advance\n                //                                      newHead\n                //         newHead ^           ^ newTail\n                //\n                // * Note that for moves/insertions like the one above, a part\n                //   inserted at the head pointer is inserted before the\n                //   current `oldParts[oldHead]`, and a part inserted at the\n                //   tail pointer is inserted before `newParts[newTail+1]`. The\n                //   seeming asymmetry lies in the fact that new parts are\n                //   moved into place outside in, so to the right of the head\n                //   pointer are old parts, and to the right of the tail\n                //   pointer are new parts.\n                //\n                // * We always restart back from the top of the algorithm,\n                //   allowing matching and simple updates in place to\n                //   continue...\n                //\n                // * Example below: the head pointers once again match, so\n                //   simply update part 1 and record it in the `newParts`\n                //   array.  Last, advance both head pointers.\n                //\n                //         oldHead v        v oldTail\n                //   oldKeys:  [0, 1, -, 3, 4, 5, 6]\n                //   newParts: [0, 2, 1,  ,  ,  , 6] <- heads matched: update 1\n                //   newKeys:  [0, 2, 1, 4, 3, 7, 6]    and advance both oldHead\n                //                                      & newHead\n                //            newHead ^        ^ newTail\n                //\n                // * As mentioned above, items that were moved as a result of\n                //   being stuck (the final else clause in the code below) are\n                //   marked with null, so we always advance old pointers over\n                //   these so we're comparing the next actual old value on\n                //   either end.\n                //\n                // * Example below: `oldHead` is null (already placed in\n                //   newParts), so advance `oldHead`.\n                //\n                //            oldHead v     v oldTail\n                //   oldKeys:  [0, 1, -, 3, 4, 5, 6] <- old head already used:\n                //   newParts: [0, 2, 1,  ,  ,  , 6]    advance oldHead\n                //   newKeys:  [0, 2, 1, 4, 3, 7, 6]\n                //               newHead ^     ^ newTail\n                //\n                // * Note it's not critical to mark old parts as null when they\n                //   are moved from head to tail or tail to head, since they\n                //   will be outside the pointer range and never visited again.\n                //\n                // * Example below: Here the old tail key matches the new head\n                //   key, so the part at the `oldTail` position and move its\n                //   DOM to the new head position (before `oldParts[oldHead]`).\n                //   Last, advance `oldTail` and `newHead` pointers.\n                //\n                //               oldHead v  v oldTail\n                //   oldKeys:  [0, 1, -, 3, 4, 5, 6]\n                //   newParts: [0, 2, 1, 4,  ,  , 6] <- old tail matches new\n                //   newKeys:  [0, 2, 1, 4, 3, 7, 6]   head: update & move 4,\n                //                                     advance oldTail & newHead\n                //               newHead ^     ^ newTail\n                //\n                // * Example below: Old and new head keys match, so update the\n                //   old head part in place, and advance the `oldHead` and\n                //   `newHead` pointers.\n                //\n                //               oldHead v oldTail\n                //   oldKeys:  [0, 1, -, 3, 4, 5, 6]\n                //   newParts: [0, 2, 1, 4, 3,   ,6] <- heads match: update 3\n                //   newKeys:  [0, 2, 1, 4, 3, 7, 6]    and advance oldHead &\n                //                                      newHead\n                //                  newHead ^  ^ newTail\n                //\n                // * Once the new or old pointers move past each other then all\n                //   we have left is additions (if old list exhausted) or\n                //   removals (if new list exhausted). Those are handled in the\n                //   final while loops at the end.\n                //\n                // * Example below: `oldHead` exceeded `oldTail`, so we're done\n                //   with the main loop.  Create the remaining part and insert\n                //   it at the new head position, and the update is complete.\n                //\n                //                   (oldHead > oldTail)\n                //   oldKeys:  [0, 1, -, 3, 4, 5, 6]\n                //   newParts: [0, 2, 1, 4, 3, 7 ,6] <- create and insert 7\n                //   newKeys:  [0, 2, 1, 4, 3, 7, 6]\n                //                     newHead ^ newTail\n                //\n                // * Note that the order of the if/else clauses is not\n                //   important to the algorithm, as long as the null checks\n                //   come first (to ensure we're always working on valid old\n                //   parts) and that the final else clause comes last (since\n                //   that's where the expensive moves occur). The order of\n                //   remaining clauses is is just a simple guess at which cases\n                //   will be most common.\n                //\n                // * TODO(kschaaf) Note, we could calculate the longest\n                //   increasing subsequence (LIS) of old items in new position,\n                //   and only move those not in the LIS set. However that costs\n                //   O(nlogn) time and adds a bit more code, and only helps\n                //   make rare types of mutations require fewer moves. The\n                //   above handles removes, adds, reversal, swaps, and single\n                //   moves of contiguous items in linear time, in the minimum\n                //   number of moves. As the number of multiple moves where LIS\n                //   might help approaches a random shuffle, the LIS\n                //   optimization becomes less helpful, so it seems not worth\n                //   the code at this point. Could reconsider if a compelling\n                //   case arises.\n\n                while (oldHead <= oldTail && newHead <= newTail) {\n                  if (oldParts[oldHead] === null) {\n                    // `null` means old part at head has already been used\n                    // below; skip\n                    oldHead++;\n                  } else if (oldParts[oldTail] === null) {\n                    // `null` means old part at tail has already been used\n                    // below; skip\n                    oldTail--;\n                  } else if (oldKeys[oldHead] === newKeys[newHead]) {\n                    // Old head matches new head; update in place\n                    newParts[newHead] =\n                        updatePart(oldParts[oldHead]!, newValues[newHead]);\n                    oldHead++;\n                    newHead++;\n                  } else if (oldKeys[oldTail] === newKeys[newTail]) {\n                    // Old tail matches new tail; update in place\n                    newParts[newTail] =\n                        updatePart(oldParts[oldTail]!, newValues[newTail]);\n                    oldTail--;\n                    newTail--;\n                  } else if (oldKeys[oldHead] === newKeys[newTail]) {\n                    // Old head matches new tail; update and move to new tail\n                    newParts[newTail] =\n                        updatePart(oldParts[oldHead]!, newValues[newTail]);\n                    insertPartBefore(\n                        containerPart,\n                        oldParts[oldHead]!,\n                        newParts[newTail + 1]);\n                    oldHead++;\n                    newTail--;\n                  } else if (oldKeys[oldTail] === newKeys[newHead]) {\n                    // Old tail matches new head; update and move to new head\n                    newParts[newHead] =\n                        updatePart(oldParts[oldTail]!, newValues[newHead]);\n                    insertPartBefore(\n                        containerPart, oldParts[oldTail]!, oldParts[oldHead]!);\n                    oldTail--;\n                    newHead++;\n                  } else {\n                    if (newKeyToIndexMap === undefined) {\n                      // Lazily generate key-to-index maps, used for removals &\n                      // moves below\n                      newKeyToIndexMap = generateMap(newKeys, newHead, newTail);\n                      oldKeyToIndexMap = generateMap(oldKeys, oldHead, oldTail);\n                    }\n                    if (!newKeyToIndexMap.has(oldKeys[oldHead])) {\n                      // Old head is no longer in new list; remove\n                      removePart(oldParts[oldHead]!);\n                      oldHead++;\n                    } else if (!newKeyToIndexMap.has(oldKeys[oldTail])) {\n                      // Old tail is no longer in new list; remove\n                      removePart(oldParts[oldTail]!);\n                      oldTail--;\n                    } else {\n                      // Any mismatches at this point are due to additions or\n                      // moves; see if we have an old part we can reuse and move\n                      // into place\n                      const oldIndex = oldKeyToIndexMap.get(newKeys[newHead]);\n                      const oldPart =\n                          oldIndex !== undefined ? oldParts[oldIndex] : null;\n                      if (oldPart === null) {\n                        // No old part for this value; create a new one and\n                        // insert it\n                        const newPart = createAndInsertPart(\n                            containerPart, oldParts[oldHead]!);\n                        updatePart(newPart, newValues[newHead]);\n                        newParts[newHead] = newPart;\n                      } else {\n                        // Reuse old part\n                        newParts[newHead] =\n                            updatePart(oldPart, newValues[newHead]);\n                        insertPartBefore(\n                            containerPart, oldPart, oldParts[oldHead]!);\n                        // This marks the old part as having been used, so that\n                        // it will be skipped in the first two checks above\n                        oldParts[oldIndex as number] = null;\n                      }\n                      newHead++;\n                    }\n                  }\n                }\n                // Add parts for any remaining new values\n                while (newHead <= newTail) {\n                  // For all remaining additions, we insert before last new\n                  // tail, since old pointers are no longer valid\n                  const newPart =\n                      createAndInsertPart(containerPart, newParts[newTail + 1]);\n                  updatePart(newPart, newValues[newHead]);\n                  newParts[newHead++] = newPart;\n                }\n                // Remove any remaining unused old parts\n                while (oldHead <= oldTail) {\n                  const oldPart = oldParts[oldHead++];\n                  if (oldPart !== null) {\n                    removePart(oldPart);\n                  }\n                }\n                // Save order of new parts for next round\n                partListCache.set(containerPart, newParts);\n                keyListCache.set(containerPart, newKeys);\n              };\n            }) as\n    <T>(items: Iterable<T>,\n        keyFnOrTemplate: KeyFn<T>|ItemTemplate<T>,\n        template?: ItemTemplate<T>) => DirectiveFn;\n","import { HomeAssistant } from \"../types\";\n\nexport interface ConfigEntry {\n  entry_id: string;\n  domain: string;\n  title: string;\n  source: string;\n  state: string;\n  connection_class: string;\n  supports_options: boolean;\n}\n\nexport interface ConfigEntrySystemOptions {\n  disable_new_entities: boolean;\n}\n\nexport const getConfigEntries = (hass: HomeAssistant) =>\n  hass.callApi<ConfigEntry[]>(\"GET\", \"config/config_entries/entry\");\n\nexport const deleteConfigEntry = (hass: HomeAssistant, configEntryId: string) =>\n  hass.callApi<{\n    require_restart: boolean;\n  }>(\"DELETE\", `config/config_entries/entry/${configEntryId}`);\n\nexport const getConfigEntrySystemOptions = (\n  hass: HomeAssistant,\n  configEntryId: string\n) =>\n  hass.callWS<ConfigEntrySystemOptions>({\n    type: \"config_entries/system_options/list\",\n    entry_id: configEntryId,\n  });\n\nexport const updateConfigEntrySystemOptions = (\n  hass: HomeAssistant,\n  configEntryId: string,\n  params: Partial<ConfigEntrySystemOptions>\n) =>\n  hass.callWS({\n    type: \"config_entries/system_options/update\",\n    entry_id: configEntryId,\n    ...params,\n  });\n","\n\t\t\t\tvar addMethods = require(\"../../../node_modules/workerize-loader/dist/rpc-wrapper.js\")\n\t\t\t\tvar methods = [\"filterSortData\",\"filterData\",\"sortData\"]\n\t\t\t\tmodule.exports = function() {\n\t\t\t\t\tvar w = new Worker(__webpack_public_path__ + \"7c63c1b1411e73f4a1ba.worker.js\", { name: \"[hash].worker.js\" })\n\t\t\t\t\taddMethods(w, methods)\n\t\t\t\t\t\n\t\t\t\t\treturn w\n\t\t\t\t}\n\t\t\t","import { customElement, CSSResult, css } from \"lit-element\";\nimport \"@material/mwc-checkbox\";\n// tslint:disable-next-line\nimport { Checkbox } from \"@material/mwc-checkbox\";\nimport { style } from \"@material/mwc-checkbox/mwc-checkbox-css\";\nimport { Constructor } from \"../types\";\n// tslint:disable-next-line\nconst MwcCheckbox = customElements.get(\"mwc-checkbox\") as Constructor<Checkbox>;\n\n@customElement(\"ha-checkbox\")\nexport class HaCheckbox extends MwcCheckbox {\n  protected firstUpdated() {\n    super.firstUpdated();\n    this.style.setProperty(\"--mdc-theme-secondary\", \"var(--primary-color)\");\n  }\n\n  protected static get styles(): CSSResult[] {\n    return [\n      style,\n      css`\n        .mdc-checkbox__native-control:enabled:not(:checked):not(:indeterminate)\n          ~ .mdc-checkbox__background {\n          border-color: rgba(var(--rgb-primary-text-color), 0.54);\n        }\n      `,\n    ];\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-checkbox\": HaCheckbox;\n  }\n}\n","import { repeat } from \"lit-html/directives/repeat\";\nimport deepClone from \"deep-clone-simple\";\n\nimport {\n  MDCDataTableAdapter,\n  MDCDataTableFoundation,\n} from \"@material/data-table\";\n\nimport { classMap } from \"lit-html/directives/class-map\";\n\nimport {\n  html,\n  query,\n  queryAll,\n  CSSResult,\n  css,\n  customElement,\n  property,\n  TemplateResult,\n  PropertyValues,\n} from \"lit-element\";\n\nimport { BaseElement } from \"@material/mwc-base/base-element\";\n\n// eslint-disable-next-line import/no-webpack-loader-syntax\n// @ts-ignore\n// tslint:disable-next-line: no-implicit-dependencies\nimport sortFilterWorker from \"workerize-loader!./sort_filter_worker\";\n\nimport \"../ha-icon\";\nimport \"../../common/search/search-input\";\nimport \"../ha-checkbox\";\n// tslint:disable-next-line\nimport { HaCheckbox } from \"../ha-checkbox\";\nimport { fireEvent } from \"../../common/dom/fire_event\";\nimport { nextRender } from \"../../common/util/render-status\";\nimport { debounce } from \"../../common/util/debounce\";\n\ndeclare global {\n  // for fire event\n  interface HASSDomEvents {\n    \"selection-changed\": SelectionChangedEvent;\n    \"row-click\": RowClickedEvent;\n    \"sorting-changed\": SortingChangedEvent;\n  }\n}\n\nexport interface RowClickedEvent {\n  id: string;\n}\n\nexport interface SelectionChangedEvent {\n  id: string;\n  selected: boolean;\n}\n\nexport interface SortingChangedEvent {\n  column: string;\n  direction: SortingDirection;\n}\n\nexport type SortingDirection = \"desc\" | \"asc\" | null;\n\nexport interface DataTableColumnContainer {\n  [key: string]: DataTableColumnData;\n}\n\nexport interface DataTableSortColumnData {\n  sortable?: boolean;\n  filterable?: boolean;\n  filterKey?: string;\n  direction?: SortingDirection;\n}\n\nexport interface DataTableColumnData extends DataTableSortColumnData {\n  title: string;\n  type?: \"numeric\" | \"icon\";\n  template?: <T>(data: any, row: T) => TemplateResult;\n}\n\nexport interface DataTableRowData {\n  [key: string]: any;\n}\n\n@customElement(\"ha-data-table\")\nexport class HaDataTable extends BaseElement {\n  @property({ type: Object }) public columns: DataTableColumnContainer = {};\n  @property({ type: Array }) public data: DataTableRowData[] = [];\n  @property({ type: Boolean }) public selectable = false;\n  @property({ type: String }) public id = \"id\";\n  protected mdcFoundation!: MDCDataTableFoundation;\n  protected readonly mdcFoundationClass = MDCDataTableFoundation;\n  @query(\".mdc-data-table\") protected mdcRoot!: HTMLElement;\n  @queryAll(\".mdc-data-table__row\") protected rowElements!: HTMLElement[];\n  @query(\"#header-checkbox\") private _headerCheckbox!: HaCheckbox;\n  @property({ type: Boolean }) private _filterable = false;\n  @property({ type: Boolean }) private _headerChecked = false;\n  @property({ type: Boolean }) private _headerIndeterminate = false;\n  @property({ type: Array }) private _checkedRows: string[] = [];\n  @property({ type: String }) private _filter = \"\";\n  @property({ type: String }) private _sortColumn?: string;\n  @property({ type: String }) private _sortDirection: SortingDirection = null;\n  @property({ type: Array }) private _filteredData: DataTableRowData[] = [];\n  private _sortColumns: {\n    [key: string]: DataTableSortColumnData;\n  } = {};\n  private curRequest = 0;\n  private _worker: any | undefined;\n\n  private _debounceSearch = debounce(\n    (ev) => {\n      this._filter = ev.detail.value;\n    },\n    200,\n    false\n  );\n\n  protected firstUpdated() {\n    super.firstUpdated();\n    this._worker = sortFilterWorker();\n  }\n\n  protected updated(properties: PropertyValues) {\n    super.updated(properties);\n\n    if (properties.has(\"columns\")) {\n      this._filterable = Object.values(this.columns).some(\n        (column) => column.filterable\n      );\n\n      for (const columnId in this.columns) {\n        if (this.columns[columnId].direction) {\n          this._sortDirection = this.columns[columnId].direction!;\n          this._sortColumn = columnId;\n          break;\n        }\n      }\n\n      const clonedColumns: DataTableColumnContainer = deepClone(this.columns);\n      Object.values(clonedColumns).forEach((column: DataTableColumnData) => {\n        delete column.title;\n        delete column.type;\n        delete column.template;\n      });\n\n      this._sortColumns = clonedColumns;\n    }\n\n    if (\n      properties.has(\"data\") ||\n      properties.has(\"columns\") ||\n      properties.has(\"_filter\") ||\n      properties.has(\"_sortColumn\") ||\n      properties.has(\"_sortDirection\")\n    ) {\n      this._filterData();\n    }\n  }\n\n  protected render() {\n    return html`\n      ${this._filterable\n        ? html`\n            <search-input\n              @value-changed=${this._handleSearchChange}\n            ></search-input>\n          `\n        : \"\"}\n      <div class=\"mdc-data-table\">\n        <table class=\"mdc-data-table__table\">\n          <thead>\n            <tr class=\"mdc-data-table__header-row\">\n              ${this.selectable\n                ? html`\n                    <th\n                      class=\"mdc-data-table__header-cell mdc-data-table__header-cell--checkbox\"\n                      role=\"columnheader\"\n                      scope=\"col\"\n                    >\n                      <ha-checkbox\n                        id=\"header-checkbox\"\n                        class=\"mdc-data-table__row-checkbox\"\n                        @change=${this._handleHeaderRowCheckboxChange}\n                        .indeterminate=${this._headerIndeterminate}\n                        .checked=${this._headerChecked}\n                      >\n                      </ha-checkbox>\n                    </th>\n                  `\n                : \"\"}\n              ${Object.entries(this.columns).map((columnEntry) => {\n                const [key, column] = columnEntry;\n                const sorted = key === this._sortColumn;\n                const classes = {\n                  \"mdc-data-table__header-cell--numeric\": Boolean(\n                    column.type && column.type === \"numeric\"\n                  ),\n                  \"mdc-data-table__header-cell--icon\": Boolean(\n                    column.type && column.type === \"icon\"\n                  ),\n                  sortable: Boolean(column.sortable),\n                  \"not-sorted\": Boolean(column.sortable && !sorted),\n                };\n                return html`\n                  <th\n                    class=\"mdc-data-table__header-cell ${classMap(classes)}\"\n                    role=\"columnheader\"\n                    scope=\"col\"\n                    @click=${this._handleHeaderClick}\n                    data-column-id=\"${key}\"\n                  >\n                    ${column.sortable\n                      ? html`\n                          <ha-icon\n                            .icon=${sorted && this._sortDirection === \"desc\"\n                              ? \"hass:arrow-down\"\n                              : \"hass:arrow-up\"}\n                          ></ha-icon>\n                        `\n                      : \"\"}\n                    <span>${column.title}</span>\n                  </th>\n                `;\n              })}\n            </tr>\n          </thead>\n          <tbody class=\"mdc-data-table__content\">\n            ${repeat(\n              this._filteredData!,\n              (row: DataTableRowData) => row[this.id],\n              (row: DataTableRowData) => html`\n                <tr\n                  data-row-id=\"${row[this.id]}\"\n                  @click=${this._handleRowClick}\n                  class=\"mdc-data-table__row\"\n                >\n                  ${this.selectable\n                    ? html`\n                        <td\n                          class=\"mdc-data-table__cell mdc-data-table__cell--checkbox\"\n                        >\n                          <ha-checkbox\n                            class=\"mdc-data-table__row-checkbox\"\n                            @change=${this._handleRowCheckboxChange}\n                            .checked=${this._checkedRows.includes(row[this.id])}\n                          >\n                          </ha-checkbox>\n                        </td>\n                      `\n                    : \"\"}\n                  ${Object.entries(this.columns).map((columnEntry) => {\n                    const [key, column] = columnEntry;\n                    return html`\n                      <td\n                        class=\"mdc-data-table__cell ${classMap({\n                          \"mdc-data-table__cell--numeric\": Boolean(\n                            column.type && column.type === \"numeric\"\n                          ),\n                          \"mdc-data-table__cell--icon\": Boolean(\n                            column.type && column.type === \"icon\"\n                          ),\n                        })}\"\n                      >\n                        ${column.template\n                          ? column.template(row[key], row)\n                          : row[key]}\n                      </td>\n                    `;\n                  })}\n                </tr>\n              `\n            )}\n          </tbody>\n        </table>\n      </div>\n    `;\n  }\n\n  protected createAdapter(): MDCDataTableAdapter {\n    return {\n      addClassAtRowIndex: (rowIndex: number, cssClasses: string) => {\n        this.rowElements[rowIndex].classList.add(cssClasses);\n      },\n      getRowCount: () => this.data.length,\n      getRowElements: () => this.rowElements,\n      getRowIdAtIndex: (rowIndex: number) => this._getRowIdAtIndex(rowIndex),\n      getRowIndexByChildElement: (el: Element) =>\n        Array.prototype.indexOf.call(this.rowElements, el.closest(\"tr\")),\n      getSelectedRowCount: () => this._checkedRows.length,\n      isCheckboxAtRowIndexChecked: (rowIndex: number) =>\n        this._checkedRows.includes(this._getRowIdAtIndex(rowIndex)),\n      isHeaderRowCheckboxChecked: () => this._headerChecked,\n      isRowsSelectable: () => true,\n      notifyRowSelectionChanged: () => undefined,\n      notifySelectedAll: () => undefined,\n      notifyUnselectedAll: () => undefined,\n      registerHeaderRowCheckbox: () => undefined,\n      registerRowCheckboxes: () => undefined,\n      removeClassAtRowIndex: (rowIndex: number, cssClasses: string) => {\n        this.rowElements[rowIndex].classList.remove(cssClasses);\n      },\n      setAttributeAtRowIndex: (\n        rowIndex: number,\n        attr: string,\n        value: string\n      ) => {\n        this.rowElements[rowIndex].setAttribute(attr, value);\n      },\n      setHeaderRowCheckboxChecked: (checked: boolean) => {\n        this._headerChecked = checked;\n      },\n      setHeaderRowCheckboxIndeterminate: (indeterminate: boolean) => {\n        this._headerIndeterminate = indeterminate;\n      },\n      setRowCheckboxCheckedAtIndex: (rowIndex: number, checked: boolean) => {\n        this._setRowChecked(this._getRowIdAtIndex(rowIndex), checked);\n      },\n    };\n  }\n\n  private async _filterData() {\n    const startTime = new Date().getTime();\n    this.curRequest++;\n    const curRequest = this.curRequest;\n\n    const filterProm = this._worker.filterSortData(\n      this.data,\n      this._sortColumns,\n      this._filter,\n      this._sortDirection,\n      this._sortColumn\n    );\n\n    const [data] = await Promise.all([filterProm, nextRender]);\n\n    const curTime = new Date().getTime();\n    const elapsed = curTime - startTime;\n\n    if (elapsed < 100) {\n      await new Promise((resolve) => setTimeout(resolve, 100 - elapsed));\n    }\n    if (this.curRequest !== curRequest) {\n      return;\n    }\n    this._filteredData = data;\n  }\n\n  private _getRowIdAtIndex(rowIndex: number): string {\n    return this.rowElements[rowIndex].getAttribute(\"data-row-id\")!;\n  }\n\n  private _handleHeaderClick(ev: Event) {\n    const columnId = (ev.target as HTMLElement)\n      .closest(\"th\")!\n      .getAttribute(\"data-column-id\")!;\n    if (!this.columns[columnId].sortable) {\n      return;\n    }\n    if (!this._sortDirection || this._sortColumn !== columnId) {\n      this._sortDirection = \"asc\";\n    } else if (this._sortDirection === \"asc\") {\n      this._sortDirection = \"desc\";\n    } else {\n      this._sortDirection = null;\n    }\n\n    this._sortColumn = this._sortDirection === null ? undefined : columnId;\n\n    fireEvent(this, \"sorting-changed\", {\n      column: columnId,\n      direction: this._sortDirection,\n    });\n  }\n\n  private _handleHeaderRowCheckboxChange() {\n    this._headerChecked = this._headerCheckbox.checked;\n    this._headerIndeterminate = this._headerCheckbox.indeterminate;\n    this.mdcFoundation.handleHeaderRowCheckboxChange();\n  }\n\n  private _handleRowCheckboxChange(ev: Event) {\n    const checkbox = ev.target as HaCheckbox;\n    const rowId = checkbox.closest(\"tr\")!.getAttribute(\"data-row-id\");\n\n    this._setRowChecked(rowId!, checkbox.checked);\n    this.mdcFoundation.handleRowCheckboxChange(ev);\n  }\n\n  private _handleRowClick(ev: Event) {\n    const rowId = (ev.target as HTMLElement)\n      .closest(\"tr\")!\n      .getAttribute(\"data-row-id\")!;\n    fireEvent(this, \"row-click\", { id: rowId }, { bubbles: false });\n  }\n\n  private _setRowChecked(rowId: string, checked: boolean) {\n    if (checked && !this._checkedRows.includes(rowId)) {\n      this._checkedRows = [...this._checkedRows, rowId];\n    } else if (!checked) {\n      const index = this._checkedRows.indexOf(rowId);\n      if (index !== -1) {\n        this._checkedRows.splice(index, 1);\n      }\n    }\n    fireEvent(this, \"selection-changed\", {\n      id: rowId,\n      selected: checked,\n    });\n  }\n\n  private _handleSearchChange(ev: CustomEvent): void {\n    this._debounceSearch(ev);\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      /* default mdc styles, colors changed, without checkbox styles */\n\n      .mdc-data-table__content {\n        font-family: Roboto, sans-serif;\n        -moz-osx-font-smoothing: grayscale;\n        -webkit-font-smoothing: antialiased;\n        font-size: 0.875rem;\n        line-height: 1.25rem;\n        font-weight: 400;\n        letter-spacing: 0.0178571429em;\n        text-decoration: inherit;\n        text-transform: inherit;\n      }\n\n      .mdc-data-table {\n        background-color: var(--data-table-background-color);\n        border-radius: 4px;\n        border-width: 1px;\n        border-style: solid;\n        border-color: rgba(var(--rgb-primary-text-color), 0.12);\n        display: inline-flex;\n        flex-direction: column;\n        box-sizing: border-box;\n        overflow-x: auto;\n      }\n\n      .mdc-data-table__row--selected {\n        background-color: rgba(var(--rgb-primary-color), 0.04);\n      }\n\n      .mdc-data-table__row {\n        border-top-color: rgba(var(--rgb-primary-text-color), 0.12);\n      }\n\n      .mdc-data-table__row {\n        border-top-width: 1px;\n        border-top-style: solid;\n      }\n\n      .mdc-data-table__row:not(.mdc-data-table__row--selected):hover {\n        background-color: rgba(var(--rgb-primary-text-color), 0.04);\n      }\n\n      .mdc-data-table__header-cell {\n        color: var(--primary-text-color);\n      }\n\n      .mdc-data-table__cell {\n        color: var(--primary-text-color);\n      }\n\n      .mdc-data-table__header-row {\n        height: 56px;\n      }\n\n      .mdc-data-table__row {\n        height: 52px;\n      }\n\n      .mdc-data-table__cell,\n      .mdc-data-table__header-cell {\n        padding-right: 16px;\n        padding-left: 16px;\n      }\n\n      .mdc-data-table__header-cell--checkbox,\n      .mdc-data-table__cell--checkbox {\n        /* @noflip */\n        padding-left: 16px;\n        /* @noflip */\n        padding-right: 0;\n      }\n      [dir=\"rtl\"] .mdc-data-table__header-cell--checkbox,\n      .mdc-data-table__header-cell--checkbox[dir=\"rtl\"],\n      [dir=\"rtl\"] .mdc-data-table__cell--checkbox,\n      .mdc-data-table__cell--checkbox[dir=\"rtl\"] {\n        /* @noflip */\n        padding-left: 0;\n        /* @noflip */\n        padding-right: 16px;\n      }\n\n      .mdc-data-table__table {\n        width: 100%;\n        border: 0;\n        white-space: nowrap;\n        border-collapse: collapse;\n      }\n\n      .mdc-data-table__cell {\n        font-family: Roboto, sans-serif;\n        -moz-osx-font-smoothing: grayscale;\n        -webkit-font-smoothing: antialiased;\n        font-size: 0.875rem;\n        line-height: 1.25rem;\n        font-weight: 400;\n        letter-spacing: 0.0178571429em;\n        text-decoration: inherit;\n        text-transform: inherit;\n      }\n\n      .mdc-data-table__cell--numeric {\n        text-align: right;\n      }\n      [dir=\"rtl\"] .mdc-data-table__cell--numeric,\n      .mdc-data-table__cell--numeric[dir=\"rtl\"] {\n        /* @noflip */\n        text-align: left;\n      }\n\n      .mdc-data-table__cell--icon {\n        color: var(--secondary-text-color);\n        text-align: center;\n      }\n\n      .mdc-data-table__header-cell {\n        font-family: Roboto, sans-serif;\n        -moz-osx-font-smoothing: grayscale;\n        -webkit-font-smoothing: antialiased;\n        font-size: 0.875rem;\n        line-height: 1.375rem;\n        font-weight: 500;\n        letter-spacing: 0.0071428571em;\n        text-decoration: inherit;\n        text-transform: inherit;\n        text-align: left;\n      }\n      [dir=\"rtl\"] .mdc-data-table__header-cell,\n      .mdc-data-table__header-cell[dir=\"rtl\"] {\n        /* @noflip */\n        text-align: right;\n      }\n\n      .mdc-data-table__header-cell--numeric {\n        text-align: right;\n      }\n      [dir=\"rtl\"] .mdc-data-table__header-cell--numeric,\n      .mdc-data-table__header-cell--numeric[dir=\"rtl\"] {\n        /* @noflip */\n        text-align: left;\n      }\n\n      .mdc-data-table__header-cell--icon {\n        text-align: center;\n      }\n\n      /* custom from here */\n\n      .mdc-data-table {\n        display: block;\n      }\n      .mdc-data-table__header-cell {\n        overflow: hidden;\n      }\n      .mdc-data-table__header-cell.sortable {\n        cursor: pointer;\n      }\n      .mdc-data-table__header-cell.not-sorted:not(.mdc-data-table__header-cell--numeric):not(.mdc-data-table__header-cell--icon)\n        span {\n        position: relative;\n        left: -24px;\n      }\n      .mdc-data-table__header-cell.not-sorted > * {\n        transition: left 0.2s ease 0s;\n      }\n      .mdc-data-table__header-cell.not-sorted ha-icon {\n        left: -36px;\n      }\n      .mdc-data-table__header-cell.not-sorted:not(.mdc-data-table__header-cell--numeric):not(.mdc-data-table__header-cell--icon):hover\n        span {\n        left: 0px;\n      }\n      .mdc-data-table__header-cell:hover.not-sorted ha-icon {\n        left: 0px;\n      }\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-data-table\": HaDataTable;\n  }\n}\n","import { HomeAssistant } from \"../types\";\nimport { DataEntryFlowStep, DataEntryFlowProgress } from \"./data_entry_flow\";\nimport { debounce } from \"../common/util/debounce\";\nimport { getCollection, Connection } from \"home-assistant-js-websocket\";\nimport { LocalizeFunc } from \"../common/translations/localize\";\n\nexport const createConfigFlow = (hass: HomeAssistant, handler: string) =>\n  hass.callApi<DataEntryFlowStep>(\"POST\", \"config/config_entries/flow\", {\n    handler,\n  });\n\nexport const fetchConfigFlow = (hass: HomeAssistant, flowId: string) =>\n  hass.callApi<DataEntryFlowStep>(\n    \"GET\",\n    `config/config_entries/flow/${flowId}`\n  );\n\nexport const handleConfigFlowStep = (\n  hass: HomeAssistant,\n  flowId: string,\n  data: { [key: string]: any }\n) =>\n  hass.callApi<DataEntryFlowStep>(\n    \"POST\",\n    `config/config_entries/flow/${flowId}`,\n    data\n  );\n\nexport const deleteConfigFlow = (hass: HomeAssistant, flowId: string) =>\n  hass.callApi(\"DELETE\", `config/config_entries/flow/${flowId}`);\n\nexport const getConfigFlowHandlers = (hass: HomeAssistant) =>\n  hass.callApi<string[]>(\"GET\", \"config/config_entries/flow_handlers\");\n\nconst fetchConfigFlowInProgress = (conn) =>\n  conn.sendMessagePromise({\n    type: \"config_entries/flow/progress\",\n  });\n\nconst subscribeConfigFlowInProgressUpdates = (conn, store) =>\n  conn.subscribeEvents(\n    debounce(\n      () =>\n        fetchConfigFlowInProgress(conn).then((flows) =>\n          store.setState(flows, true)\n        ),\n      500,\n      true\n    ),\n    \"config_entry_discovered\"\n  );\n\nexport const getConfigFlowInProgressCollection = (conn: Connection) =>\n  getCollection<DataEntryFlowProgress[]>(\n    conn,\n    \"_configFlowProgress\",\n    fetchConfigFlowInProgress,\n    subscribeConfigFlowInProgressUpdates\n  );\n\nexport const subscribeConfigFlowInProgress = (\n  hass: HomeAssistant,\n  onChange: (flows: DataEntryFlowProgress[]) => void\n) => getConfigFlowInProgressCollection(hass.connection).subscribe(onChange);\n\nexport const localizeConfigFlowTitle = (\n  localize: LocalizeFunc,\n  flow: DataEntryFlowProgress\n) => {\n  const placeholders = flow.context.title_placeholders || {};\n  const placeholderKeys = Object.keys(placeholders);\n  if (placeholderKeys.length === 0) {\n    return localize(`component.${flow.handler}.config.title`);\n  }\n  const args: string[] = [];\n  placeholderKeys.forEach((key) => {\n    args.push(key);\n    args.push(placeholders[key]);\n  });\n  return localize(`component.${flow.handler}.config.flow_title`, ...args);\n};\n","import { TemplateResult } from \"lit-html\";\nimport { fireEvent } from \"../../common/dom/fire_event\";\nimport { HomeAssistant } from \"../../types\";\nimport {\n  DataEntryFlowStepCreateEntry,\n  DataEntryFlowStepExternal,\n  DataEntryFlowStepForm,\n  DataEntryFlowStep,\n  DataEntryFlowStepAbort,\n  FieldSchema,\n} from \"../../data/data_entry_flow\";\n\nexport interface FlowConfig {\n  loadDevicesAndAreas: boolean;\n\n  getFlowHandlers?: (hass: HomeAssistant) => Promise<string[]>;\n\n  createFlow(hass: HomeAssistant, handler: string): Promise<DataEntryFlowStep>;\n\n  fetchFlow(hass: HomeAssistant, flowId: string): Promise<DataEntryFlowStep>;\n\n  handleFlowStep(\n    hass: HomeAssistant,\n    flowId: string,\n    data: { [key: string]: any }\n  ): Promise<DataEntryFlowStep>;\n\n  deleteFlow(hass: HomeAssistant, flowId: string): Promise<unknown>;\n\n  renderAbortDescription(\n    hass: HomeAssistant,\n    step: DataEntryFlowStepAbort\n  ): TemplateResult | \"\";\n\n  renderShowFormStepHeader(\n    hass: HomeAssistant,\n    step: DataEntryFlowStepForm\n  ): string;\n\n  renderShowFormStepDescription(\n    hass: HomeAssistant,\n    step: DataEntryFlowStepForm\n  ): TemplateResult | \"\";\n\n  renderShowFormStepFieldLabel(\n    hass: HomeAssistant,\n    step: DataEntryFlowStepForm,\n    field: FieldSchema\n  ): string;\n\n  renderShowFormStepFieldError(\n    hass: HomeAssistant,\n    step: DataEntryFlowStepForm,\n    error: string\n  ): string;\n\n  renderExternalStepHeader(\n    hass: HomeAssistant,\n    step: DataEntryFlowStepExternal\n  ): string;\n\n  renderExternalStepDescription(\n    hass: HomeAssistant,\n    step: DataEntryFlowStepExternal\n  ): TemplateResult | \"\";\n\n  renderCreateEntryDescription(\n    hass: HomeAssistant,\n    step: DataEntryFlowStepCreateEntry\n  ): TemplateResult | \"\";\n}\n\nexport interface DataEntryFlowDialogParams {\n  startFlowHandler?: string;\n  continueFlowId?: string;\n  dialogClosedCallback?: (params: { flowFinished: boolean }) => void;\n  flowConfig: FlowConfig;\n  showAdvanced?: boolean;\n}\n\nexport const loadDataEntryFlowDialog = () =>\n  import(\n    /* webpackChunkName: \"dialog-config-flow\" */ \"./dialog-data-entry-flow\"\n  );\n\nexport const showFlowDialog = (\n  element: HTMLElement,\n  dialogParams: Omit<DataEntryFlowDialogParams, \"flowConfig\">,\n  flowConfig: FlowConfig\n): void => {\n  fireEvent(element, \"show-dialog\", {\n    dialogTag: \"dialog-data-entry-flow\",\n    dialogImport: loadDataEntryFlowDialog,\n    dialogParams: {\n      ...dialogParams,\n      flowConfig,\n    },\n  });\n};\n","import { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport \"../ha-icon\";\nimport { stateIcon } from \"../../common/entity/state_icon\";\n\nclass HaStateIcon extends PolymerElement {\n  static get template() {\n    return html`\n      <ha-icon icon=\"[[computeIcon(stateObj)]]\"></ha-icon>\n    `;\n  }\n\n  static get properties() {\n    return {\n      stateObj: {\n        type: Object,\n      },\n    };\n  }\n\n  computeIcon(stateObj) {\n    return stateIcon(stateObj);\n  }\n}\n\ncustomElements.define(\"ha-state-icon\", HaStateIcon);\n","import {\n  getConfigFlowHandlers,\n  fetchConfigFlow,\n  handleConfigFlowStep,\n  deleteConfigFlow,\n  createConfigFlow,\n} from \"../../data/config_flow\";\nimport { html } from \"lit-element\";\nimport { localizeKey } from \"../../common/translations/localize\";\nimport {\n  showFlowDialog,\n  DataEntryFlowDialogParams,\n  loadDataEntryFlowDialog,\n} from \"./show-dialog-data-entry-flow\";\nimport { caseInsensitiveCompare } from \"../../common/string/compare\";\n\nexport const loadConfigFlowDialog = loadDataEntryFlowDialog;\n\nexport const showConfigFlowDialog = (\n  element: HTMLElement,\n  dialogParams: Omit<DataEntryFlowDialogParams, \"flowConfig\">\n): void =>\n  showFlowDialog(element, dialogParams, {\n    loadDevicesAndAreas: true,\n    getFlowHandlers: (hass) =>\n      getConfigFlowHandlers(hass).then((handlers) =>\n        handlers.sort((handlerA, handlerB) =>\n          caseInsensitiveCompare(\n            hass.localize(`component.${handlerA}.config.title`),\n            hass.localize(`component.${handlerB}.config.title`)\n          )\n        )\n      ),\n    createFlow: createConfigFlow,\n    fetchFlow: fetchConfigFlow,\n    handleFlowStep: handleConfigFlowStep,\n    deleteFlow: deleteConfigFlow,\n\n    renderAbortDescription(hass, step) {\n      const description = localizeKey(\n        hass.localize,\n        `component.${step.handler}.config.abort.${step.reason}`,\n        step.description_placeholders\n      );\n\n      return description\n        ? html`\n            <ha-markdown allowsvg .content=${description}></ha-markdown>\n          `\n        : \"\";\n    },\n\n    renderShowFormStepHeader(hass, step) {\n      return hass.localize(\n        `component.${step.handler}.config.step.${step.step_id}.title`\n      );\n    },\n\n    renderShowFormStepDescription(hass, step) {\n      const description = localizeKey(\n        hass.localize,\n        `component.${step.handler}.config.step.${step.step_id}.description`,\n        step.description_placeholders\n      );\n      return description\n        ? html`\n            <ha-markdown allowsvg .content=${description}></ha-markdown>\n          `\n        : \"\";\n    },\n\n    renderShowFormStepFieldLabel(hass, step, field) {\n      return hass.localize(\n        `component.${step.handler}.config.step.${step.step_id}.data.${field.name}`\n      );\n    },\n\n    renderShowFormStepFieldError(hass, step, error) {\n      return hass.localize(`component.${step.handler}.config.error.${error}`);\n    },\n\n    renderExternalStepHeader(hass, step) {\n      return hass.localize(\n        `component.${step.handler}.config.step.${step.step_id}.title`\n      );\n    },\n\n    renderExternalStepDescription(hass, step) {\n      const description = localizeKey(\n        hass.localize,\n        `component.${step.handler}.config.${step.step_id}.description`,\n        step.description_placeholders\n      );\n\n      return html`\n        <p>\n          ${hass.localize(\n            \"ui.panel.config.integrations.config_flow.external_step.description\"\n          )}\n        </p>\n        ${description\n          ? html`\n              <ha-markdown allowsvg .content=${description}></ha-markdown>\n            `\n          : \"\"}\n      `;\n    },\n\n    renderCreateEntryDescription(hass, step) {\n      const description = localizeKey(\n        hass.localize,\n        `component.${step.handler}.config.create_entry.${step.description ||\n          \"default\"}`,\n        step.description_placeholders\n      );\n\n      return html`\n        ${description\n          ? html`\n              <ha-markdown allowsvg .content=${description}></ha-markdown>\n            `\n          : \"\"}\n        <p>\n          ${hass.localize(\n            \"ui.panel.config.integrations.config_flow.created_config\",\n            \"name\",\n            step.title\n          )}\n        </p>\n      `;\n    },\n  });\n","import \"../../../components/data-table/ha-data-table\";\nimport \"../../../components/entity/ha-state-icon\";\n\nimport memoizeOne from \"memoize-one\";\n\nimport {\n  LitElement,\n  html,\n  TemplateResult,\n  property,\n  customElement,\n} from \"lit-element\";\nimport { HomeAssistant } from \"../../../types\";\n// tslint:disable-next-line\nimport {\n  DataTableColumnContainer,\n  RowClickedEvent,\n  DataTableRowData,\n} from \"../../../components/data-table/ha-data-table\";\n// tslint:disable-next-line\nimport {\n  DeviceRegistryEntry,\n  computeDeviceName,\n} from \"../../../data/device_registry\";\nimport { EntityRegistryEntry } from \"../../../data/entity_registry\";\nimport { ConfigEntry } from \"../../../data/config_entries\";\nimport { AreaRegistryEntry } from \"../../../data/area_registry\";\nimport { navigate } from \"../../../common/navigate\";\nimport { LocalizeFunc } from \"../../../common/translations/localize\";\n\nexport interface DeviceRowData extends DeviceRegistryEntry {\n  device?: DeviceRowData;\n  area?: string;\n  integration?: string;\n  battery_entity?: string;\n}\n\nexport interface DeviceEntityLookup {\n  [deviceId: string]: EntityRegistryEntry[];\n}\n\n@customElement(\"ha-devices-data-table\")\nexport class HaDevicesDataTable extends LitElement {\n  @property() public hass!: HomeAssistant;\n  @property() public narrow = false;\n  @property() public devices!: DeviceRegistryEntry[];\n  @property() public entries!: ConfigEntry[];\n  @property() public entities!: EntityRegistryEntry[];\n  @property() public areas!: AreaRegistryEntry[];\n  @property() public domain!: string;\n\n  private _devices = memoizeOne(\n    (\n      devices: DeviceRegistryEntry[],\n      entries: ConfigEntry[],\n      entities: EntityRegistryEntry[],\n      areas: AreaRegistryEntry[],\n      domain: string,\n      localize: LocalizeFunc\n    ) => {\n      // Some older installations might have devices pointing at invalid entryIDs\n      // So we guard for that.\n\n      let outputDevices: DeviceRowData[] = devices;\n\n      const deviceLookup: { [deviceId: string]: DeviceRegistryEntry } = {};\n      for (const device of devices) {\n        deviceLookup[device.id] = device;\n      }\n\n      const deviceEntityLookup: DeviceEntityLookup = {};\n      for (const entity of entities) {\n        if (!entity.device_id) {\n          continue;\n        }\n        if (!(entity.device_id in deviceEntityLookup)) {\n          deviceEntityLookup[entity.device_id] = [];\n        }\n        deviceEntityLookup[entity.device_id].push(entity);\n      }\n\n      const entryLookup: { [entryId: string]: ConfigEntry } = {};\n      for (const entry of entries) {\n        entryLookup[entry.entry_id] = entry;\n      }\n\n      const areaLookup: { [areaId: string]: AreaRegistryEntry } = {};\n      for (const area of areas) {\n        areaLookup[area.area_id] = area;\n      }\n\n      if (domain) {\n        outputDevices = outputDevices.filter((device) =>\n          device.config_entries.find(\n            (entryId) =>\n              entryId in entryLookup && entryLookup[entryId].domain === domain\n          )\n        );\n      }\n\n      outputDevices = outputDevices.map((device) => {\n        return {\n          ...device,\n          name: computeDeviceName(\n            device,\n            this.hass,\n            deviceEntityLookup[device.id]\n          ),\n          model: device.model || \"<unknown>\",\n          manufacturer: device.manufacturer || \"<unknown>\",\n          area: device.area_id ? areaLookup[device.area_id].name : \"No area\",\n          integration: device.config_entries.length\n            ? device.config_entries\n                .filter((entId) => entId in entryLookup)\n                .map(\n                  (entId) =>\n                    localize(\n                      `component.${entryLookup[entId].domain}.config.title`\n                    ) || entryLookup[entId].domain\n                )\n                .join(\", \")\n            : \"No integration\",\n          battery_entity: this._batteryEntity(device.id, deviceEntityLookup),\n        };\n      });\n\n      return outputDevices;\n    }\n  );\n\n  private _columns = memoizeOne(\n    (narrow: boolean): DataTableColumnContainer =>\n      narrow\n        ? {\n            name: {\n              title: \"Device\",\n              sortable: true,\n              filterable: true,\n              direction: \"asc\",\n              template: (name, device: DataTableRowData) => {\n                const battery = device.battery_entity\n                  ? this.hass.states[device.battery_entity]\n                  : undefined;\n                // Have to work on a nice layout for mobile\n                return html`\n                  ${name}<br />\n                  ${device.area} | ${device.integration}<br />\n                  ${battery\n                    ? html`\n                        ${battery.state}%\n                        <ha-state-icon\n                          .hass=${this.hass!}\n                          .stateObj=${battery}\n                        ></ha-state-icon>\n                      `\n                    : \"\"}\n                `;\n              },\n            },\n          }\n        : {\n            name: {\n              title: this.hass.localize(\n                \"ui.panel.config.devices.data_table.device\"\n              ),\n              sortable: true,\n              filterable: true,\n              direction: \"asc\",\n            },\n            manufacturer: {\n              title: this.hass.localize(\n                \"ui.panel.config.devices.data_table.manufacturer\"\n              ),\n              sortable: true,\n              filterable: true,\n            },\n            model: {\n              title: this.hass.localize(\n                \"ui.panel.config.devices.data_table.model\"\n              ),\n              sortable: true,\n              filterable: true,\n            },\n            area: {\n              title: this.hass.localize(\n                \"ui.panel.config.devices.data_table.area\"\n              ),\n              sortable: true,\n              filterable: true,\n            },\n            integration: {\n              title: this.hass.localize(\n                \"ui.panel.config.devices.data_table.integration\"\n              ),\n              sortable: true,\n              filterable: true,\n            },\n            battery_entity: {\n              title: this.hass.localize(\n                \"ui.panel.config.devices.data_table.battery\"\n              ),\n              sortable: true,\n              type: \"numeric\",\n              template: (batteryEntity: string) => {\n                const battery = batteryEntity\n                  ? this.hass.states[batteryEntity]\n                  : undefined;\n                return battery\n                  ? html`\n                      ${battery.state}%\n                      <ha-state-icon\n                        .hass=${this.hass!}\n                        .stateObj=${battery}\n                      ></ha-state-icon>\n                    `\n                  : html`\n                      -\n                    `;\n              },\n            },\n          }\n  );\n\n  protected render(): TemplateResult {\n    return html`\n      <ha-data-table\n        .columns=${this._columns(this.narrow)}\n        .data=${this._devices(\n          this.devices,\n          this.entries,\n          this.entities,\n          this.areas,\n          this.domain,\n          this.hass.localize\n        )}\n        @row-click=${this._handleRowClicked}\n      ></ha-data-table>\n    `;\n  }\n\n  private _batteryEntity(\n    deviceId: string,\n    deviceEntityLookup: DeviceEntityLookup\n  ): string | undefined {\n    const batteryEntity = (deviceEntityLookup[deviceId] || []).find(\n      (entity) =>\n        this.hass.states[entity.entity_id] &&\n        this.hass.states[entity.entity_id].attributes.device_class === \"battery\"\n    );\n\n    return batteryEntity ? batteryEntity.entity_id : undefined;\n  }\n\n  private _handleRowClicked(ev: CustomEvent) {\n    const deviceId = (ev.detail as RowClickedEvent).id;\n    navigate(this, `/config/devices/device/${deviceId}`);\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-devices-data-table\": HaDevicesDataTable;\n  }\n}\n","import \"@polymer/iron-flex-layout/iron-flex-layout-classes\";\nimport \"@polymer/paper-tooltip/paper-tooltip\";\nimport \"@material/mwc-button\";\nimport \"@polymer/iron-icon/iron-icon\";\nimport \"@polymer/paper-item/paper-item\";\nimport \"@polymer/paper-item/paper-item-body\";\n\nimport { HassEntity } from \"home-assistant-js-websocket\";\n\nimport \"../../../components/ha-card\";\nimport \"../../../components/ha-icon-next\";\nimport \"../../../components/ha-fab\";\nimport \"../../../components/entity/ha-state-icon\";\nimport \"../../../layouts/hass-subpage\";\nimport \"../../../resources/ha-style\";\nimport \"../../../components/ha-icon\";\n\nimport { computeRTL } from \"../../../common/util/compute_rtl\";\nimport \"../ha-config-section\";\n\nimport { computeStateName } from \"../../../common/entity/compute_state_name\";\nimport {\n  loadConfigFlowDialog,\n  showConfigFlowDialog,\n} from \"../../../dialogs/config-flow/show-dialog-config-flow\";\nimport { localizeConfigFlowTitle } from \"../../../data/config_flow\";\nimport {\n  LitElement,\n  TemplateResult,\n  html,\n  property,\n  customElement,\n  css,\n  CSSResult,\n} from \"lit-element\";\nimport { HomeAssistant } from \"../../../types\";\nimport { ConfigEntry } from \"../../../data/config_entries\";\nimport { fireEvent } from \"../../../common/dom/fire_event\";\nimport { EntityRegistryEntry } from \"../../../data/entity_registry\";\nimport { DataEntryFlowProgress } from \"../../../data/data_entry_flow\";\n\n@customElement(\"ha-config-entries-dashboard\")\nexport class HaConfigManagerDashboard extends LitElement {\n  @property() public hass!: HomeAssistant;\n  @property() public showAdvanced!: boolean;\n\n  @property() private configEntries!: ConfigEntry[];\n\n  /**\n   * Entity Registry entries.\n   */\n  @property() private entityRegistryEntries!: EntityRegistryEntry[];\n\n  /**\n   * Current flows that are in progress and have not been started by a user.\n   * For example, can be discovered devices that require more config.\n   */\n  @property() private configEntriesInProgress!: DataEntryFlowProgress[];\n\n  public connectedCallback() {\n    super.connectedCallback();\n    loadConfigFlowDialog();\n  }\n\n  protected render(): TemplateResult {\n    return html`\n      <hass-subpage\n        header=${this.hass.localize(\"ui.panel.config.integrations.caption\")}\n      >\n        ${this.configEntriesInProgress.length\n          ? html`\n              <ha-config-section>\n                <span slot=\"header\"\n                  >${this.hass.localize(\n                    \"ui.panel.config.integrations.discovered\"\n                  )}</span\n                >\n                <ha-card>\n                  ${this.configEntriesInProgress.map(\n                    (flow) => html`\n                      <div class=\"config-entry-row\">\n                        <paper-item-body>\n                          ${localizeConfigFlowTitle(this.hass.localize, flow)}\n                        </paper-item-body>\n                        <mwc-button\n                          @click=${this._continueFlow}\n                          data-id=\"${flow.flow_id}\"\n                          >${this.hass.localize(\n                            \"ui.panel.config.integrations.configure\"\n                          )}</mwc-button\n                        >\n                      </div>\n                    `\n                  )}\n                </ha-card>\n              </ha-config-section>\n            `\n          : \"\"}\n\n        <ha-config-section class=\"configured\">\n          <span slot=\"header\"\n            >${this.hass.localize(\n              \"ui.panel.config.integrations.configured\"\n            )}</span\n          >\n          <ha-card>\n            ${this.entityRegistryEntries.length\n              ? this.configEntries.map(\n                  (item: any, idx) => html`\n                    <a\n                      href=\"/config/integrations/config_entry/${item.entry_id}\"\n                    >\n                      <paper-item data-index=${idx}>\n                        <paper-item-body two-line>\n                          <div>\n                            ${this.hass.localize(\n                              `component.${item.domain}.config.title`\n                            )}:\n                            ${item.title}\n                          </div>\n                          <div secondary>\n                            ${this._getEntities(item).map(\n                              (entity) => html`\n                                <span>\n                                  <ha-state-icon\n                                    .stateObj=${entity}\n                                  ></ha-state-icon>\n                                  <paper-tooltip position=\"bottom\"\n                                    >${computeStateName(entity)}</paper-tooltip\n                                  >\n                                </span>\n                              `\n                            )}\n                          </div>\n                        </paper-item-body>\n                        <ha-icon-next></ha-icon-next>\n                      </paper-item>\n                    </a>\n                  `\n                )\n              : html`\n                  <div class=\"config-entry-row\">\n                    <paper-item-body two-line>\n                      <div>\n                        ${this.hass.localize(\n                          \"ui.panel.config.integrations.none\"\n                        )}\n                      </div>\n                    </paper-item-body>\n                  </div>\n                `}\n          </ha-card>\n        </ha-config-section>\n\n        <ha-fab\n          icon=\"hass:plus\"\n          title=${this.hass.localize(\"ui.panel.config.integrations.new\")}\n          @click=${this._createFlow}\n          ?rtl=${computeRTL(this.hass!)}\n        ></ha-fab>\n      </hass-subpage>\n    `;\n  }\n\n  private _createFlow() {\n    showConfigFlowDialog(this, {\n      dialogClosedCallback: () => fireEvent(this, \"hass-reload-entries\"),\n      showAdvanced: this.showAdvanced,\n    });\n  }\n\n  private _continueFlow(ev: Event) {\n    showConfigFlowDialog(this, {\n      continueFlowId:\n        (ev.target as HTMLElement).getAttribute(\"data-id\") || undefined,\n      dialogClosedCallback: () => fireEvent(this, \"hass-reload-entries\"),\n    });\n  }\n\n  private _getEntities(configEntry: ConfigEntry): HassEntity[] {\n    if (!this.entityRegistryEntries) {\n      return [];\n    }\n    const states: HassEntity[] = [];\n    this.entityRegistryEntries.forEach((entity) => {\n      if (\n        entity.config_entry_id === configEntry.entry_id &&\n        entity.entity_id in this.hass.states\n      ) {\n        states.push(this.hass.states[entity.entity_id]);\n      }\n    });\n    return states;\n  }\n  static get styles(): CSSResult {\n    return css`\n      ha-card {\n        overflow: hidden;\n      }\n      mwc-button {\n        top: 3px;\n        margin-right: -0.57em;\n      }\n      .config-entry-row {\n        display: flex;\n        padding: 0 16px;\n      }\n      ha-icon {\n        cursor: pointer;\n        margin: 8px;\n      }\n      .configured a {\n        color: var(--primary-text-color);\n        text-decoration: none;\n      }\n      ha-fab {\n        position: fixed;\n        bottom: 16px;\n        right: 16px;\n        z-index: 1;\n      }\n\n      ha-fab[rtl] {\n        right: auto;\n        left: 16px;\n      }\n    `;\n  }\n}\n","import \"@polymer/paper-item/paper-icon-item\";\nimport \"@polymer/paper-item/paper-item-body\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport \"../../../../components/ha-card\";\nimport \"../../../../layouts/hass-subpage\";\n\nimport { EventsMixin } from \"../../../../mixins/events-mixin\";\nimport LocalizeMixIn from \"../../../../mixins/localize-mixin\";\nimport \"../../../../components/entity/state-badge\";\nimport { computeEntityRegistryName } from \"../../../../data/entity_registry\";\n\n/*\n * @appliesMixin LocalizeMixIn\n * @appliesMixin EventsMixin\n */\nclass HaCeEntitiesCard extends LocalizeMixIn(EventsMixin(PolymerElement)) {\n  static get template() {\n    return html`\n      <style>\n        ha-card {\n          margin-top: 8px;\n          padding-bottom: 8px;\n        }\n        paper-icon-item {\n          cursor: pointer;\n          padding-top: 4px;\n          padding-bottom: 4px;\n        }\n      </style>\n      <ha-card header=\"[[heading]]\">\n        <template is=\"dom-repeat\" items=\"[[entities]]\" as=\"entity\">\n          <paper-icon-item on-click=\"_openMoreInfo\">\n            <state-badge\n              state-obj=\"[[_computeStateObj(entity, hass)]]\"\n              slot=\"item-icon\"\n            ></state-badge>\n            <paper-item-body>\n              <div class=\"name\">[[_computeEntityName(entity, hass)]]</div>\n              <div class=\"secondary entity-id\">[[entity.entity_id]]</div>\n            </paper-item-body>\n          </paper-icon-item>\n        </template>\n      </ha-card>\n    `;\n  }\n\n  static get properties() {\n    return {\n      heading: String,\n      entities: Array,\n      hass: Object,\n    };\n  }\n\n  _computeStateObj(entity, hass) {\n    return hass.states[entity.entity_id];\n  }\n\n  _computeEntityName(entity, hass) {\n    return (\n      computeEntityRegistryName(hass, entity) ||\n      `(${this.localize(\n        \"ui.panel.config.integrations.config_entry.entity_unavailable\"\n      )})`\n    );\n  }\n\n  _openMoreInfo(ev) {\n    this.fire(\"hass-more-info\", { entityId: ev.model.entity.entity_id });\n  }\n}\n\ncustomElements.define(\"ha-ce-entities-card\", HaCeEntitiesCard);\n","import { HomeAssistant } from \"../types\";\nimport { DataEntryFlowStep } from \"./data_entry_flow\";\n\nexport const createOptionsFlow = (hass: HomeAssistant, handler: string) =>\n  hass.callApi<DataEntryFlowStep>(\n    \"POST\",\n    \"config/config_entries/options/flow\",\n    {\n      handler,\n    }\n  );\n\nexport const fetchOptionsFlow = (hass: HomeAssistant, flowId: string) =>\n  hass.callApi<DataEntryFlowStep>(\n    \"GET\",\n    `config/config_entries/options/flow/${flowId}`\n  );\n\nexport const handleOptionsFlowStep = (\n  hass: HomeAssistant,\n  flowId: string,\n  data: { [key: string]: any }\n) =>\n  hass.callApi<DataEntryFlowStep>(\n    \"POST\",\n    `config/config_entries/options/flow/${flowId}`,\n    data\n  );\n\nexport const deleteOptionsFlow = (hass: HomeAssistant, flowId: string) =>\n  hass.callApi(\"DELETE\", `config/config_entries/options/flow/${flowId}`);\n","import {\n  fetchOptionsFlow,\n  handleOptionsFlowStep,\n  deleteOptionsFlow,\n  createOptionsFlow,\n} from \"../../data/options_flow\";\nimport { html } from \"lit-element\";\nimport { localizeKey } from \"../../common/translations/localize\";\nimport {\n  showFlowDialog,\n  loadDataEntryFlowDialog,\n} from \"./show-dialog-data-entry-flow\";\nimport { ConfigEntry } from \"../../data/config_entries\";\n\nexport const loadOptionsFlowDialog = loadDataEntryFlowDialog;\n\nexport const showOptionsFlowDialog = (\n  element: HTMLElement,\n  configEntry: ConfigEntry\n): void =>\n  showFlowDialog(\n    element,\n    {\n      startFlowHandler: configEntry.entry_id,\n    },\n    {\n      loadDevicesAndAreas: false,\n      createFlow: createOptionsFlow,\n      fetchFlow: fetchOptionsFlow,\n      handleFlowStep: handleOptionsFlowStep,\n      deleteFlow: deleteOptionsFlow,\n\n      renderAbortDescription(hass, step) {\n        const description = localizeKey(\n          hass.localize,\n          `component.${configEntry.domain}.options.abort.${step.reason}`,\n          step.description_placeholders\n        );\n\n        return description\n          ? html`\n              <ha-markdown allowsvg .content=${description}></ha-markdown>\n            `\n          : \"\";\n      },\n\n      renderShowFormStepHeader(hass, _step) {\n        return hass.localize(`ui.dialogs.options_flow.form.header`);\n      },\n\n      renderShowFormStepDescription(_hass, _step) {\n        return \"\";\n      },\n\n      renderShowFormStepFieldLabel(hass, step, field) {\n        return hass.localize(\n          `component.${configEntry.domain}.options.step.${step.step_id}.data.${field.name}`\n        );\n      },\n\n      renderShowFormStepFieldError(hass, _step, error) {\n        return hass.localize(\n          `component.${configEntry.domain}.options.error.${error}`\n        );\n      },\n\n      renderExternalStepHeader(_hass, _step) {\n        return \"\";\n      },\n\n      renderExternalStepDescription(_hass, _step) {\n        return \"\";\n      },\n\n      renderCreateEntryDescription(hass, _step) {\n        return html`\n          <p>${hass.localize(`ui.dialogs.options_flow.success.description`)}</p>\n        `;\n      },\n    }\n  );\n","import { fireEvent } from \"../../common/dom/fire_event\";\nimport { ConfigEntry } from \"../../data/config_entries\";\n\nexport interface ConfigEntrySystemOptionsDialogParams {\n  entry: ConfigEntry;\n  // updateEntry: (\n  //   updates: Partial<EntityRegistryEntryUpdateParams>\n  // ) => Promise<unknown>;\n  // removeEntry: () => Promise<boolean>;\n}\n\nexport const loadConfigEntrySystemOptionsDialog = () =>\n  import(\n    /* webpackChunkName: \"config-entry-system-options\" */ \"./dialog-config-entry-system-options\"\n  );\n\nexport const showConfigEntrySystemOptionsDialog = (\n  element: HTMLElement,\n  systemLogDetailParams: ConfigEntrySystemOptionsDialogParams\n): void => {\n  fireEvent(element, \"show-dialog\", {\n    dialogTag: \"dialog-config-entry-system-options\",\n    dialogImport: loadConfigEntrySystemOptionsDialog,\n    dialogParams: systemLogDetailParams,\n  });\n};\n","import memoizeOne from \"memoize-one\";\nimport \"../../../../layouts/hass-subpage\";\nimport \"../../../../layouts/hass-error-screen\";\n\nimport \"../../devices/ha-devices-data-table\";\nimport \"./ha-ce-entities-card\";\nimport { showOptionsFlowDialog } from \"../../../../dialogs/config-flow/show-dialog-options-flow\";\nimport { property, LitElement, CSSResult, css, html } from \"lit-element\";\nimport { navigate } from \"../../../../common/navigate\";\nimport { HomeAssistant } from \"../../../../types\";\nimport {\n  ConfigEntry,\n  deleteConfigEntry,\n} from \"../../../../data/config_entries\";\nimport { EntityRegistryEntry } from \"../../../../data/entity_registry\";\nimport { DeviceRegistryEntry } from \"../../../../data/device_registry\";\nimport { AreaRegistryEntry } from \"../../../../data/area_registry\";\nimport { fireEvent } from \"../../../../common/dom/fire_event\";\nimport { showConfigEntrySystemOptionsDialog } from \"../../../../dialogs/config-entry-system-options/show-dialog-config-entry-system-options\";\nimport { showConfirmationDialog } from \"../../../../dialogs/confirmation/show-dialog-confirmation\";\n\nclass HaConfigEntryPage extends LitElement {\n  @property() public hass!: HomeAssistant;\n  @property() public narrow!: boolean;\n  @property() public configEntryId!: string;\n  @property() public configEntries!: ConfigEntry[];\n  @property() public entityRegistryEntries!: EntityRegistryEntry[];\n  @property() public deviceRegistryEntries!: DeviceRegistryEntry[];\n  @property() public areas!: AreaRegistryEntry[];\n\n  private get _configEntry(): ConfigEntry | undefined {\n    return this.configEntries\n      ? this.configEntries.find(\n          (entry) => entry.entry_id === this.configEntryId\n        )\n      : undefined;\n  }\n\n  private _computeConfigEntryDevices = memoizeOne(\n    (configEntry: ConfigEntry, devices: DeviceRegistryEntry[]) => {\n      if (!devices) {\n        return [];\n      }\n      return devices.filter((device) =>\n        device.config_entries.includes(configEntry.entry_id)\n      );\n    }\n  );\n\n  private _computeNoDeviceEntities = memoizeOne(\n    (configEntry: ConfigEntry, entities: EntityRegistryEntry[]) => {\n      if (!entities) {\n        return [];\n      }\n      return entities.filter(\n        (ent) => !ent.device_id && ent.config_entry_id === configEntry.entry_id\n      );\n    }\n  );\n\n  protected render() {\n    const configEntry = this._configEntry;\n\n    if (!configEntry) {\n      return html`\n        <hass-error-screen\n          error=\"${this.hass.localize(\n            \"ui.panel.config.integrations.integration_not_found\"\n          )}\"\n        ></hass-error-screen>\n      `;\n    }\n\n    const configEntryDevices = this._computeConfigEntryDevices(\n      configEntry,\n      this.deviceRegistryEntries\n    );\n\n    const noDeviceEntities = this._computeNoDeviceEntities(\n      configEntry,\n      this.entityRegistryEntries\n    );\n\n    return html`\n      <hass-subpage .header=${configEntry.title}>\n        ${configEntry.supports_options\n          ? html`\n              <paper-icon-button\n                slot=\"toolbar-icon\"\n                icon=\"hass:settings\"\n                @click=${this._showSettings}\n                title=${this.hass.localize(\n                  \"ui.panel.config.integrations.config_entry.settings_button\",\n                  \"integration\",\n                  configEntry.title\n                )}\n              ></paper-icon-button>\n            `\n          : \"\"}\n        <paper-icon-button\n          slot=\"toolbar-icon\"\n          icon=\"hass:message-settings-variant\"\n          title=${this.hass.localize(\n            \"ui.panel.config.integrations.config_entry.system_options_button\",\n            \"integration\",\n            configEntry.title\n          )}\n          @click=${this._showSystemOptions}\n        ></paper-icon-button>\n        <paper-icon-button\n          slot=\"toolbar-icon\"\n          icon=\"hass:delete\"\n          title=${this.hass.localize(\n            \"ui.panel.config.integrations.config_entry.delete_button\",\n            \"integration\",\n            configEntry.title\n          )}\n          @click=${this._confirmRemoveEntry}\n        ></paper-icon-button>\n\n        <div class=\"content\">\n          ${configEntryDevices.length === 0 && noDeviceEntities.length === 0\n            ? html`\n                <p>\n                  ${this.hass.localize(\n                    \"ui.panel.config.integrations.config_entry.no_devices\"\n                  )}\n                </p>\n              `\n            : html`\n                <ha-devices-data-table\n                  .hass=${this.hass}\n                  .narrow=${this.narrow}\n                  .devices=${configEntryDevices}\n                  .entries=${this.configEntries}\n                  .entities=${this.entityRegistryEntries}\n                  .areas=${this.areas}\n                ></ha-devices-data-table>\n              `}\n          ${noDeviceEntities.length > 0\n            ? html`\n                <ha-ce-entities-card\n                  .heading=${this.hass.localize(\n                    \"ui.panel.config.integrations.config_entry.no_device\"\n                  )}\n                  .entities=${noDeviceEntities}\n                  .hass=${this.hass}\n                  .narrow=${this.narrow}\n                ></ha-ce-entities-card>\n              `\n            : \"\"}\n        </div>\n      </hass-subpage>\n    `;\n  }\n\n  private _showSettings() {\n    showOptionsFlowDialog(this, this._configEntry!);\n  }\n\n  private _showSystemOptions() {\n    showConfigEntrySystemOptionsDialog(this, {\n      entry: this._configEntry!,\n    });\n  }\n\n  private _confirmRemoveEntry() {\n    showConfirmationDialog(this, {\n      text: this.hass.localize(\n        \"ui.panel.config.integrations.config_entry.delete_confirm\"\n      ),\n      confirm: () => this._removeEntry(),\n    });\n  }\n\n  private _removeEntry() {\n    deleteConfigEntry(this.hass, this.configEntryId).then((result) => {\n      fireEvent(this, \"hass-reload-entries\");\n      if (result.require_restart) {\n        alert(\n          this.hass.localize(\n            \"ui.panel.config.integrations.config_entry.restart_confirm\"\n          )\n        );\n      }\n      navigate(this, \"/config/integrations/dashboard\", true);\n    });\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      .content {\n        padding: 4px;\n      }\n      p {\n        text-align: center;\n      }\n      ha-devices-data-table {\n        width: 100%;\n      }\n    `;\n  }\n}\n\ncustomElements.define(\"ha-config-entry-page\", HaConfigEntryPage);\n","import \"@polymer/app-route/app-route\";\nimport { property, customElement, PropertyValues } from \"lit-element\";\n\nimport \"./ha-config-entries-dashboard\";\nimport \"./config-entry/ha-config-entry-page\";\nimport { compare } from \"../../../common/string/compare\";\nimport {\n  subscribeAreaRegistry,\n  AreaRegistryEntry,\n} from \"../../../data/area_registry\";\nimport {\n  HassRouterPage,\n  RouterOptions,\n} from \"../../../layouts/hass-router-page\";\nimport { HomeAssistant } from \"../../../types\";\nimport { ConfigEntry, getConfigEntries } from \"../../../data/config_entries\";\nimport {\n  EntityRegistryEntry,\n  subscribeEntityRegistry,\n} from \"../../../data/entity_registry\";\nimport {\n  DeviceRegistryEntry,\n  subscribeDeviceRegistry,\n} from \"../../../data/device_registry\";\nimport { UnsubscribeFunc } from \"home-assistant-js-websocket\";\nimport { DataEntryFlowProgress } from \"../../../data/data_entry_flow\";\nimport {\n  subscribeConfigFlowInProgress,\n  getConfigFlowInProgressCollection,\n} from \"../../../data/config_flow\";\n\ndeclare global {\n  interface HASSDomEvents {\n    \"hass-reload-entries\": undefined;\n  }\n}\n\n@customElement(\"ha-config-integrations\")\nclass HaConfigIntegrations extends HassRouterPage {\n  @property() public hass!: HomeAssistant;\n  @property() public narrow!: boolean;\n  @property() public showAdvanced!: boolean;\n\n  protected routerOptions: RouterOptions = {\n    defaultPage: \"dashboard\",\n    routes: {\n      dashboard: {\n        tag: \"ha-config-entries-dashboard\",\n      },\n      config_entry: {\n        tag: \"ha-config-entry-page\",\n      },\n    },\n  };\n\n  @property() private _configEntries: ConfigEntry[] = [];\n  @property() private _configEntriesInProgress: DataEntryFlowProgress[] = [];\n  @property() private _entityRegistryEntries: EntityRegistryEntry[] = [];\n  @property() private _deviceRegistryEntries: DeviceRegistryEntry[] = [];\n  @property() private _areas: AreaRegistryEntry[] = [];\n\n  private _unsubs?: UnsubscribeFunc[];\n\n  public connectedCallback() {\n    super.connectedCallback();\n\n    if (!this.hass) {\n      return;\n    }\n    this._loadData();\n  }\n\n  public disconnectedCallback() {\n    super.disconnectedCallback();\n    if (this._unsubs) {\n      while (this._unsubs.length) {\n        this._unsubs.pop()!();\n      }\n      this._unsubs = undefined;\n    }\n  }\n\n  protected firstUpdated(changedProps) {\n    super.firstUpdated(changedProps);\n    this.addEventListener(\"hass-reload-entries\", () => {\n      this._loadData();\n      getConfigFlowInProgressCollection(this.hass.connection).refresh();\n    });\n  }\n\n  protected updated(changedProps: PropertyValues) {\n    super.updated(changedProps);\n    if (!this._unsubs && changedProps.has(\"hass\")) {\n      this._loadData();\n    }\n  }\n\n  protected updatePageEl(pageEl) {\n    pageEl.hass = this.hass;\n\n    pageEl.entityRegistryEntries = this._entityRegistryEntries;\n    pageEl.configEntries = this._configEntries;\n    pageEl.narrow = this.narrow;\n    pageEl.showAdvanced = this.showAdvanced;\n\n    if (this._currentPage === \"dashboard\") {\n      pageEl.configEntriesInProgress = this._configEntriesInProgress;\n      return;\n    }\n\n    pageEl.configEntryId = this.routeTail.path.substr(1);\n    pageEl.deviceRegistryEntries = this._deviceRegistryEntries;\n    pageEl.areas = this._areas;\n  }\n\n  private _loadData() {\n    getConfigEntries(this.hass).then((configEntries) => {\n      this._configEntries = configEntries.sort((conf1, conf2) =>\n        compare(conf1.title, conf2.title)\n      );\n    });\n    if (this._unsubs) {\n      return;\n    }\n    this._unsubs = [\n      subscribeAreaRegistry(this.hass.connection, (areas) => {\n        this._areas = areas;\n      }),\n      subscribeEntityRegistry(this.hass.connection, (entries) => {\n        this._entityRegistryEntries = entries;\n      }),\n      subscribeDeviceRegistry(this.hass.connection, (entries) => {\n        this._deviceRegistryEntries = entries;\n      }),\n      subscribeConfigFlowInProgress(this.hass, (flowsInProgress) => {\n        this._configEntriesInProgress = flowsInProgress;\n      }),\n    ];\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-config-integrations\": HaConfigIntegrations;\n  }\n}\n"],"sourceRoot":""}