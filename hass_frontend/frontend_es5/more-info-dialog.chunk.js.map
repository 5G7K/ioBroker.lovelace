{"version":3,"sources":["webpack:///./src/common/const.ts","webpack:///./src/common/entity/compute_object_id.ts","webpack:///./src/common/entity/compute_state_name.ts","webpack:///./src/common/entity/feature_class_names.ts","webpack:///./src/components/ha-attributes.js","webpack:///./src/components/ha-camera-stream.ts","webpack:///./src/components/ha-climate-control.js","webpack:///./src/components/ha-color-picker.js","webpack:///./src/components/ha-labeled-slider.js","webpack:///./src/components/ha-paper-icon-button-arrow-prev.ts","webpack:///./src/components/ha-paper-slider.js","webpack:///./src/components/ha-water_heater-control.js","webpack:///./src/dialogs/ha-more-info-dialog.js","webpack:///./src/dialogs/more-info/controls/more-info-alarm_control_panel.js","webpack:///./src/dialogs/more-info/controls/more-info-automation.js","webpack:///./src/dialogs/more-info/controls/more-info-camera.ts","webpack:///./src/dialogs/more-info/controls/more-info-climate.js","webpack:///./src/dialogs/more-info/controls/more-info-configurator.js","webpack:///./src/dialogs/more-info/controls/more-info-content.ts","webpack:///./src/dialogs/more-info/controls/more-info-cover.js","webpack:///./src/dialogs/more-info/controls/more-info-default.js","webpack:///./src/dialogs/more-info/controls/more-info-fan.js","webpack:///./src/dialogs/more-info/controls/more-info-group.js","webpack:///./src/dialogs/more-info/controls/more-info-history_graph.js","webpack:///./src/dialogs/more-info/controls/more-info-input_datetime.js","webpack:///./src/dialogs/more-info/controls/more-info-light.js","webpack:///./src/dialogs/more-info/controls/more-info-lock.js","webpack:///./src/dialogs/more-info/controls/more-info-media_player.js","webpack:///./src/dialogs/more-info/controls/more-info-script.js","webpack:///./src/dialogs/more-info/controls/more-info-sun.js","webpack:///./src/dialogs/more-info/controls/more-info-updater.js","webpack:///./src/dialogs/more-info/controls/more-info-vacuum.js","webpack:///./src/dialogs/more-info/controls/more-info-water_heater.js","webpack:///./src/dialogs/more-info/controls/more-info-weather.js","webpack:///./src/dialogs/more-info/more-info-controls.js","webpack:///./src/dialogs/more-info/more-info-settings.js","webpack:///./src/mixins/dialog-mixin.js","webpack:///./src/mixins/localize-mixin.js","webpack:///./src/util/hass-attributes-util.js"],"names":["DEFAULT_DOMAIN_ICON","DEFAULT_PANEL","DOMAINS_WITH_CARD","DOMAINS_WITH_MORE_INFO","DOMAINS_HIDE_MORE_INFO","DOMAINS_MORE_INFO_NO_HISTORY","STATES_OFF","DOMAINS_TOGGLE","Set","UNIT_C","UNIT_F","DEFAULT_VIEW_ENTITY_ID","computeObjectId","entityId","substr","indexOf","stateObj","attributes","friendly_name","undefined","entity_id","replace","featureClassNames","classNames","supported_features","Object","keys","map","feature","supportsFeature","Number","filter","attr","join","HaAttributes","extraFilters","hassAttributeUtil","LOGIC_STATE_ATTRIBUTES","concat","split","filtersArray","key","attribute","value","Array","isArray","JSON","stringify","attribution","html","type","String","computed","PolymerElement","customElements","define","HaCameraStream","customElement","property","Boolean","_attached","__DEMO__","_shouldRenderMJPEG","_elementResized","computeMJPEGStreamUrl","computeStateName","showControls","changedProps","stateObjChanged","has","attachedChanged","oldState","get","oldEntityId","curEntityId","_destroyPolyfill","_startHls","_forceMJPEG","hass","config","components","includes","CAMERA_SUPPORT_STREAM","shadowRoot","querySelector","Hls","hlsSupported","isSupported","videoEl","_videoEl","canPlayType","fetchStreamUrl","url","_renderHLSPolyfill","_renderHLSNative","console","error","src","Promise","resolve","addEventListener","play","hls","_hlsPolyfillInstance","attachMedia","on","Events","MEDIA_ATTACHED","loadSource","fireEvent","destroy","css","LitElement","HaClimateControl","inFlux","$","target_temperature","classList","toggle","val","s","step","toString","parseFloat","toFixed","length","Math","round","newval","_round","max","last_changed","Date","now","temperatureStateInFlux","min","window","setTimeout","fire","observer","units","EventsMixin","HaColorPicker","setupLayers","drawColorWheel","drawMarker","interactionLayer","ev","onMouseDown","onTouchStart","clientX","clientY","svgPoint","createSVGPoint","x","y","cc","matrixTransform","getScreenCTM","inverse","convertToCanvasCoordinates","isInWheel","onMouseSelect","canvas","add","onMouseUp","remove","removeEventListener","requestAnimationFrame","processUserSelect","touch","changedTouches","target","marker","preventDefault","onTouchSelect","onTouchEnd","tapBecameScroll","onTap","passive","canvasXY","hs","getColor","onColorSelect","setMarkerOnColor","ignoreSegments","applySegmentFilter","applyColorToCanvas","colorSelectIsThrottled","clearTimeout","ensureFinalSelect","fireColorSelected","throttle","hsColor","h","dist","radius","theta","PI","markerdX","cos","markerdY","sin","translateString","setAttribute","tooltip","style","color","dX","dY","atan2","angle","getDistance","sqrt","hue","getAngle","relativeDistance","sat","hueSegments","angleStep","halfAngleStep","rest","saturationSegments","segmentSize","saturationStep","calculatedSat","floor","backgroundLayer","originX","width","originY","height","shadowColor","shadowOffsetX","shadowOffsetY","shadowBlur","context","getContext","cX","cY","counterClockwise","wheelStyle","getComputedStyle","borderWidth","parseInt","getPropertyValue","borderColor","trim","wheelShadow","values","pop","borderRadius","wheelRadius","shadowRadius","drawCircle","startAngle","endAngle","beginPath","moveTo","arc","closePath","gradient","createRadialGradient","lightness","addColorStop","ratioStep","ratio","stop","prevLighness","fillStyle","fill","drawShadow","save","restore","drawBorder","lineWidth","strokeStyle","stroke","shadow","svgElement","markerradius","tooltipradius","TooltipOffsetY","TooltipOffsetX","document","createElementNS","appendChild","desiredHsColor","HaLabeledSlider","caption","disabled","pin","extra","ignoreBarTouch","icon","notify","paperIconButtonClass","HaPaperIconButtonArrowPrev","direction","hassio","PaperSliderClass","HaPaperSlider","tpl","createElement","innerHTML","template","styleEl","content","HaWaterHeaterControl","HaMoreInfoDialog","_dialogElement","_page","detail","page","computeStateDomain","states","moreInfoEntityId","newVal","oldVal","setProperties","opened","_registryInfo","large","isComponentLoaded","user","is_admin","callWS","info","a","b","notifyResize","reflectToAttribute","dataDomain","DialogMixin","MoreInfoAlarmControlPanel","_enteredCode","_codeFormat","_codeValid","_disarmVisible","_armVisible","_inputEnabled","_armedStates","state","props","code_format","format","code","getAttribute","service","data","callService","then","LocalizeMixin","MoreInfoAutomation","MoreInfoCamera","_cameraPrefs","preload_stream","_handleCheckboxChanged","_fetchCameraPrefs","fetchCameraPrefs","checkbox","currentTarget","updateCameraPrefs","checked","alert","message","MoreInfoClimate","awayToggleChecked","away_mode","auxToggleChecked","aux_heat","onToggleChecked","_debouncer","Debouncer","debounce","timeOut","after","target_temp_step","unit_system","temperature","supportsTemperature","supportsTemperatureRange","target_temp_low","target_temp_high","_featureClassNames","classes","attributeClassNames","push","callServiceHelper","targetTempLow","targetTempHigh","humidity","fan_mode","operation_mode","swing_mode","localize","mode","computeRTLDirection","rtl","MoreInfoConfigurator","el","fieldInput","name","configure_id","fields","isConfiguring","bind","action","isConfigurable","MoreInfoContent","position","display","lastChild","_detachedChild","removeChild","moreInfoType","custom_ui_more_info","stateMoreInfoType","dynamicContentUpdater","toUpperCase","UpdatingElement","FEATURE_CLASS_NAMES","MoreInfoCover","CoverEntity","coverPositionSliderValue","current_position","coverTiltPositionSliderValue","current_tilt_position","entityObj","setCoverPosition","setCoverTiltPosition","MoreInfoDefault","MoreInfoFan","oscillationToggleChecked","oscillating","speed","MoreInfoGroup","entIds","i","groupDomainStateObj","groupDomain","baseStateObj","find","assign","dom","groupedControlDetails","MoreInfoHistoryGraph","DatetimeInput","is_ready","monthFiller","month","dayFiller","day","year","changed","minuteFiller","serviceData","has_time","selectedMinute","minute","selectedHour","hour","timeStr","time","has_date","selectedDate","dateValInput","dateValState","date","getDateString","MoreInfoLight","brightnessSliderValue","brightness","ctSliderValue","color_temp","wvSliderValue","white_value","hs_color","colorPickerColor","effect","bri","isNaN","ct","wv","serviceChangeColor","MoreInfoLock","isLocked","enteredCode","MoreInfoMediaPlayer","HassMediaPlayerEntity","playerObj","isMuted","supportsVolumeButtons","isOff","hasMediaControl","isPlaying","supportsPause","isIdle","isPaused","supportsPlay","supportsTurnOn","supportsTurnOff","supportsSelectSource","sourceList","supportsSelectSoundMode","soundModeList","ttsLoaded","supportsPlayMedia","togglePower","previousTrack","mediaPlayPause","nextTrack","source","selectSource","soundMode","selectSoundMode","supportsVolumeMute","volumeMute","obj","volumeUp","handleVolumeWorker","volumeDown","force","pointerDown","volPercentage","volume","setVolume","keyCode","sendTTS","services","tts","serviceKeys","sort","ttsMessage","ttsInput","focus","MoreInfoScript","MoreInfoSun","next_rising","next_setting","risingDate","settingDate","formatTime","itemDate","language","MoreInfoUpdater","release_notes","MoreInfoVacuum","fan_speed","inDialog","MoreInfoWaterHeater","MoreInfoWeather","cardinalDirections","weatherIcons","cloudy","fog","hail","lightning","partlycloudy","pouring","rainy","snowy","sunny","windy","toLocaleDateString","weekday","measure","lengthUnit","degree","degreenum","isFinite","bearing","cardinalDirection","windBearingToText","getUnit","toLowerCase","condition","item","DOMAINS_NO_INFO","MoreInfoControls","_cacheConfig","cacheKey","computeRTL","dialogElement","canConfigure","domain","_stateHistory","_stateHistoryLoading","refresh","hoursToShow","MoreInfoSettings","computeDomain","_name","_entityId","updateEntityRegistryEntry","new_entity_id","registryInfo","dedupingMixin","superClass","withBackdrop","mixinBehaviors","PaperDialogBehavior","Function","DOMAIN_DEVICE_CLASS","binary_sensor","cover","sensor","UNKNOWN_TYPE","ADD_TYPE","TYPE_TO_TAG","string","json","array","entity_picture","description","emulated_hue","domains","emulated_hue_name","haaska_hidden","haaska_name","homebridge_hidden","homebridge_name","custom_ui_state_card","device_class","options","hidden","assumed_state","initial_state","unit_of_measurement"],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;;AAEA;AACO,IAAMA,mBAAmB,GAAG,eAA5B;AAEP;;AACO,IAAMC,aAAa,GAAG,UAAtB;AAEP;;AACO,IAAMC,iBAAiB,GAAG,CAC/B,SAD+B,EAE/B,OAF+B,EAG/B,cAH+B,EAI/B,cAJ+B,EAK/B,cAL+B,EAM/B,YAN+B,EAO/B,MAP+B,EAQ/B,cAR+B,EAS/B,OAT+B,EAU/B,QAV+B,EAW/B,OAX+B,EAY/B,QAZ+B,EAa/B,cAb+B,EAc/B,SAd+B,CAA1B;AAiBP;;AACO,IAAMC,sBAAsB,GAAG,CACpC,qBADoC,EAEpC,YAFoC,EAGpC,QAHoC,EAIpC,SAJoC,EAKpC,cALoC,EAMpC,OANoC,EAOpC,KAPoC,EAQpC,OARoC,EASpC,eAToC,EAUpC,gBAVoC,EAWpC,OAXoC,EAYpC,MAZoC,EAapC,cAboC,EAcpC,QAdoC,EAepC,KAfoC,EAgBpC,SAhBoC,EAiBpC,QAjBoC,EAkBpC,cAlBoC,EAmBpC,SAnBoC,CAA/B;AAsBP;;AACO,IAAMC,sBAAsB,GAAG,CACpC,cADoC,EAEpC,cAFoC,EAGpC,YAHoC,EAIpC,OAJoC,EAKpC,SALoC,CAA/B;AAQP;;AACO,IAAMC,4BAA4B,GAAG,CAC1C,QAD0C,EAE1C,cAF0C,EAG1C,eAH0C,EAI1C,OAJ0C,CAArC;AAOP;;AACO,IAAMC,UAAU,GAAG,CAAC,QAAD,EAAW,QAAX,EAAqB,KAArB,CAAnB;AAEP;;AACO,IAAMC,cAAc,GAAG,IAAIC,GAAJ,CAAQ,CACpC,KADoC,EAEpC,eAFoC,EAGpC,OAHoC,EAIpC,QAJoC,EAKpC,OALoC,EAMpC,YANoC,CAAR,CAAvB;AASP;;AACO,IAAMC,MAAM,GAAG,IAAf;AACA,IAAMC,MAAM,GAAG,IAAf;AAEP;;AACO,IAAMC,sBAAsB,GAAG,oBAA/B,C;;;;;;;;;;;;ACxFP;AAAA;AAAA;AACe,SAASC,eAAT,CAAyBC,QAAzB,EAAmD;AAChE,SAAOA,QAAQ,CAACC,MAAT,CAAgBD,QAAQ,CAACE,OAAT,CAAiB,GAAjB,IAAwB,CAAxC,CAAP;AACD,C;;;;;;;;;;;;ACFD;AAAA;AAAA;AAEe,yEAACC,QAAD;AAAA,SACbA,QAAQ,CAACC,UAAT,CAAoBC,aAApB,KAAsCC,SAAtC,GACIP,kEAAe,CAACI,QAAQ,CAACI,SAAV,CAAf,CAAoCC,OAApC,CAA4C,IAA5C,EAAkD,GAAlD,CADJ,GAEIL,QAAQ,CAACC,UAAT,CAAoBC,aAApB,IAAqC,EAH5B;AAAA,CAAf,E;;;;;;;;;;;;ACFA;AAAA;AAAA;CAEA;;AACe,SAASI,iBAAT,CACbN,QADa,EAEbO,UAFa,EAGb;AACA,MAAI,CAACP,QAAD,IAAa,CAACA,QAAQ,CAACC,UAAT,CAAoBO,kBAAtC,EAA0D;AACxD,WAAO,EAAP;AACD;;AAED,SAAOC,MAAM,CAACC,IAAP,CAAYH,UAAZ,EACJI,GADI,CACA,UAACC,OAAD;AAAA,WACHC,yEAAe,CAACb,QAAD,EAAWc,MAAM,CAACF,OAAD,CAAjB,CAAf,GAA6CL,UAAU,CAACK,OAAD,CAAvD,GAAmE,EADhE;AAAA,GADA,EAIJG,MAJI,CAIG,UAACC,IAAD;AAAA,WAAUA,IAAI,KAAK,EAAnB;AAAA,GAJH,EAKJC,IALI,CAKC,GALD,CAAP;AAMD,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AClBD;AACA;AACA;AAEA;;IAEMC,Y;;;;;;;;;;;;;wCAkDgBC,Y,EAAc;AAChC,aAAOV,MAAM,CAACC,IAAP,CAAYU,kEAAiB,CAACC,sBAA9B,EAAsDC,MAAtD,CACLH,YAAY,GAAGA,YAAY,CAACI,KAAb,CAAmB,GAAnB,CAAH,GAA6B,EADpC,CAAP;AAGD;;;6CAEwBvB,Q,EAAUwB,Y,EAAc;AAC/C,UAAI,CAACxB,QAAL,EAAe;AACb,eAAO,EAAP;AACD;;AACD,aAAOS,MAAM,CAACC,IAAP,CAAYV,QAAQ,CAACC,UAArB,EAAiCc,MAAjC,CAAwC,UAASU,GAAT,EAAc;AAC3D,eAAOD,YAAY,CAACzB,OAAb,CAAqB0B,GAArB,MAA8B,CAAC,CAAtC;AACD,OAFM,CAAP;AAGD;;;oCAEeC,S,EAAW;AACzB,aAAOA,SAAS,CAACrB,OAAV,CAAkB,IAAlB,EAAwB,GAAxB,CAAP;AACD;;;yCAEoBL,Q,EAAU0B,S,EAAW;AACxC,UAAIC,KAAK,GAAG3B,QAAQ,CAACC,UAAT,CAAoByB,SAApB,CAAZ;AACA,UAAIC,KAAK,KAAK,IAAd,EAAoB,OAAO,GAAP;;AACpB,UAAIC,KAAK,CAACC,OAAN,CAAcF,KAAd,CAAJ,EAA0B;AACxB,eAAOA,KAAK,CAACV,IAAN,CAAW,IAAX,CAAP;AACD;;AACD,aAAOU,KAAK,YAAYlB,MAAjB,GAA0BqB,IAAI,CAACC,SAAL,CAAeJ,KAAf,EAAsB,IAAtB,EAA4B,CAA5B,CAA1B,GAA2DA,KAAlE;AACD;;;uCAEkB3B,Q,EAAU;AAC3B,aAAOA,QAAQ,CAACC,UAAT,CAAoB+B,WAA3B;AACD;;;wBA/EqB;AACpB,aAAOC,gFAAP;AA8BD;;;wBAEuB;AACtB,aAAO;AACLjC,gBAAQ,EAAE;AACRkC,cAAI,EAAEzB;AADE,SADL;AAILU,oBAAY,EAAE;AACZe,cAAI,EAAEC,MADM;AAEZR,eAAK,EAAE;AAFK,SAJT;AAQLH,oBAAY,EAAE;AACZU,cAAI,EAAEN,KADM;AAEZQ,kBAAQ,EAAE;AAFE;AART,OAAP;AAaD;;;;EAhDwBC,+E;;AAmF3BC,cAAc,CAACC,MAAf,CAAsB,eAAtB,EAAuCrB,YAAvC,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACzFA;AAWA;AAEA;AACA;AAKA;;IAKMsB,c,cADLC,iEAAa,CAAC,kBAAD,C;MACRD,c;;;;;;;;;;;;;;;;;;;;;;;;;;;OAAAA,c;;;mBACHE,4DAAQ,E;;;;;mBACRA,4DAAQ,E;;;;;mBACRA,4DAAQ,CAAC;AAAER,YAAI,EAAES;AAAR,OAAD,C;;;eAA0C,K;;;;mBAClDD,4DAAQ,E;;;eAAuB,K;;;;mBAG/BA,4DAAQ,E;;;eAA6CvC,S;;;;;;;;;aAFtD;AACA;AAIA,mCAA2B;AACzB,6BAXEqC,cAWF;;AACA,aAAKI,SAAL,GAAiB,IAAjB;AACD;;;;aAED,gCAA8B;AAC5B,6BAhBEJ,cAgBF;;AACA,aAAKI,SAAL,GAAiB,KAAjB;AACD;;;;aAED,kBAA0C;AACxC,YAAI,CAAC,KAAK5C,QAAN,IAAkB,CAAC,KAAK4C,SAA5B,EAAuC;AACrC,iBAAOX,wDAAP;AACD;;AAED,eAAOA,wDAAP,qBACIY,MAAQ,IAAI,KAAKC,kBAAjB,GACEb,wDADF,qBAGc,KAAKc,eAHnB,EAIaF,MAAQ,eAEXG,0EAAqB,CAAC,KAAKhD,QAAN,CAN/B,EAOaiD,iFAAgB,CAAC,KAAKjD,QAAN,CAP7B,IAUEiC,wDAVF,qBAekB,KAAKiB,YAfvB,EAgBoB,KAAKH,eAhBzB,CADJ;AAqBD;;;;aAED,iBAAkBI,YAAlB,EAAgD;AAC9C,6BAjDEX,cAiDF,yCAAcW,YAAd;;AAEA,YAAMC,eAAe,GAAGD,YAAY,CAACE,GAAb,CAAiB,UAAjB,CAAxB;AACA,YAAMC,eAAe,GAAGH,YAAY,CAACE,GAAb,CAAiB,WAAjB,CAAxB;AAEA,YAAME,QAAQ,GAAGJ,YAAY,CAACK,GAAb,CAAiB,UAAjB,CAAjB;AACA,YAAMC,WAAW,GAAGF,QAAQ,GAAGA,QAAQ,CAACnD,SAAZ,GAAwBD,SAApD;AACA,YAAMuD,WAAW,GAAG,KAAK1D,QAAL,GAAgB,KAAKA,QAAL,CAAcI,SAA9B,GAA0CD,SAA9D;;AAEA,YACG,CAACiD,eAAD,IAAoB,CAACE,eAAtB,IACCF,eAAe,IAAIK,WAAW,KAAKC,WAFtC,EAGE;AACA;AACD,SAf6C,CAiB9C;;;AACA,YAAIJ,eAAe,IAAI,CAAC,KAAKV,SAA7B,EAAwC;AACtC,eAAKe,gBAAL;;AACA;AACD,SArB6C,CAuB9C;;;AACA,YAAI,KAAKb,kBAAT,EAA6B;AAC3B;AACD,SA1B6C,CA4B9C;;;AACA,aAAKa,gBAAL;;AAEA,YAAID,WAAJ,EAAiB;AACf,eAAKE,SAAL;AACD;AACF;;;;aAED,8BAAiC;AAC/B,eACE,KAAKC,WAAL,KAAqB,KAAK7D,QAAL,CAAeI,SAApC,IACA,CAAC,KAAK0D,IAAL,CAAWC,MAAX,CAAkBC,UAAlB,CAA6BC,QAA7B,CAAsC,QAAtC,CADD,IAEA,CAACpD,uFAAe,CAAC,KAAKb,QAAN,EAAiBkE,kEAAjB,CAHlB;AAKD;;;;aAED,oBAAyC;AACvC,eAAO,KAAKC,UAAL,CAAiBC,aAAjB,CAA+B,OAA/B,CAAP;AACD;;;;;;;gCAED;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBAEsB,6JAFtB;;AAAA;AAEQC,qBAFR;AAIMC,8BAJN,GAIqBD,GAAG,CAACE,WAAJ,EAJrB;AAKQC,yBALR,GAKkB,KAAKC,QALvB;;AAOE,sBAAI,CAACH,YAAL,EAAmB;AACjBA,gCAAY,GACVE,OAAO,CAACE,WAAR,CAAoB,+BAApB,MAAyD,EAD3D;AAED;;AAVH,sBAYOJ,YAZP;AAAA;AAAA;AAAA;;AAaI,uBAAKT,WAAL,GAAmB,KAAK7D,QAAL,CAAeI,SAAlC;AAbJ;;AAAA;AAAA;AAAA;AAAA,yBAkB0BuE,mEAAc,CAClC,KAAKb,IAD6B,EAElC,KAAK9D,QAAL,CAAeI,SAFmB,CAlBxC;;AAAA;AAAA;AAkBYwE,qBAlBZ,QAkBYA,GAlBZ;;AAuBI,sBAAIP,GAAG,CAACE,WAAJ,EAAJ,EAAuB;AACrB,yBAAKM,kBAAL,CAAwBL,OAAxB,EAAiCH,GAAjC,EAAsCO,GAAtC;AACD,mBAFD,MAEO;AACL,yBAAKE,gBAAL,CAAsBN,OAAtB,EAA+BI,GAA/B;AACD;;AA3BL;;AAAA;AAAA;AAAA;AA8BI;AACA;AACAG,yBAAO,CAACC,KAAR;AACA,uBAAKnB,WAAL,GAAmB,KAAK7D,QAAL,CAAeI,SAAlC;;AAjCJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,S;;;;;;;;;;;;;;gCAqCA,kBAA+BoE,OAA/B,EAA0DI,GAA1D;AAAA;AAAA;AAAA;AAAA;AACEJ,yBAAO,CAACS,GAAR,GAAcL,GAAd;AADF;AAAA,yBAEQ,IAAIM,OAAJ,CAAY,UAACC,OAAD;AAAA,2BAChBX,OAAO,CAACY,gBAAR,CAAyB,gBAAzB,EAA2CD,OAA3C,CADgB;AAAA,mBAAZ,CAFR;;AAAA;AAKEX,yBAAO,CAACa,IAAR;;AALF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,S;;;;;;;;;;;;;;gCAQA,kBACEb,OADF,EAEE;AACAH,WAHF,EAIEO,GAJF;AAAA;AAAA;AAAA;AAAA;AAAA;AAMQU,qBANR,GAMc,IAAIjB,GAAJ,EANd;AAOE,uBAAKkB,oBAAL,GAA4BD,GAA5B;AACAA,qBAAG,CAACE,WAAJ,CAAgBhB,OAAhB;AACAc,qBAAG,CAACG,EAAJ,CAAOpB,GAAG,CAACqB,MAAJ,CAAWC,cAAlB,EAAkC,YAAM;AACtCL,uBAAG,CAACM,UAAJ,CAAehB,GAAf;AACD,mBAFD;;AATF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,S;;;;;;;;;;;aAcA,2BAA0B;AACxBiB,gFAAS,CAAC,IAAD,EAAO,aAAP,CAAT;AACD;;;;aAED,4BAAiC;AAC/B,YAAI,KAAKN,oBAAT,EAA+B;AAC7B,eAAKA,oBAAL,CAA0BO,OAA1B;;AACA,eAAKP,oBAAL,GAA4BpF,SAA5B;AACD;AACF;;;;;aAED,kBAA+B;AAC7B,eAAO4F,uDAAP;AAYD;;;GAnL0BC,sD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACxB7B;AACA;AACA;AACA;AAEA;AAEA;;;;IAGMC,gB;;;;;;;;;;;;;2CAsEmBC,M,EAAQ;AAC7B,WAAKC,CAAL,CAAOC,kBAAP,CAA0BC,SAA1B,CAAoCC,MAApC,CAA2C,SAA3C,EAAsDJ,MAAtD;AACD;;;2BAEMK,G,EAAK;AACV;AACA;AACA,UAAMC,CAAC,GAAG,KAAKC,IAAL,CAAUC,QAAV,GAAqBnF,KAArB,CAA2B,GAA3B,CAAV;AACA,aAAOiF,CAAC,CAAC,CAAD,CAAD,GAAOG,UAAU,CAACJ,GAAG,CAACK,OAAJ,CAAYJ,CAAC,CAAC,CAAD,CAAD,CAAKK,MAAjB,CAAD,CAAjB,GAA8CC,IAAI,CAACC,KAAL,CAAWR,GAAX,CAArD;AACD;;;qCAEgB;AACf,UAAMS,MAAM,GAAG,KAAKC,MAAL,CAAY,KAAKtF,KAAL,GAAa,KAAK8E,IAA9B,CAAf;;AACA,UAAI,KAAK9E,KAAL,GAAa,KAAKuF,GAAtB,EAA2B;AACzB,aAAKC,YAAL,GAAoBC,IAAI,CAACC,GAAL,EAApB;AACA,aAAKC,sBAAL,CAA4B,IAA5B;AACD;;AACD,UAAIN,MAAM,IAAI,KAAKE,GAAnB,EAAwB;AACtB;AACA;AACA;AACA,YAAIF,MAAM,IAAI,KAAKO,GAAnB,EAAwB;AACtB,eAAK5F,KAAL,GAAa,KAAK4F,GAAlB;AACD,SAFD,MAEO;AACL,eAAK5F,KAAL,GAAaqF,MAAb;AACD;AACF,OATD,MASO;AACL,aAAKrF,KAAL,GAAa,KAAKuF,GAAlB;AACD;AACF;;;qCAEgB;AACf,UAAMF,MAAM,GAAG,KAAKC,MAAL,CAAY,KAAKtF,KAAL,GAAa,KAAK8E,IAA9B,CAAf;;AACA,UAAI,KAAK9E,KAAL,GAAa,KAAK4F,GAAtB,EAA2B;AACzB,aAAKJ,YAAL,GAAoBC,IAAI,CAACC,GAAL,EAApB;AACA,aAAKC,sBAAL,CAA4B,IAA5B;AACD;;AACD,UAAIN,MAAM,IAAI,KAAKO,GAAnB,EAAwB;AACtB,aAAK5F,KAAL,GAAaqF,MAAb;AACD,OAFD,MAEO;AACL,aAAKrF,KAAL,GAAa,KAAK4F,GAAlB;AACD;AACF;;;mCAEc;AAAA;;AACb;AACA;AACA;AACA;AACA,UAAI,KAAKJ,YAAT,EAAuB;AACrBK,cAAM,CAACC,UAAP,CAAkB,YAAM;AACtB,cAAMJ,GAAG,GAAGD,IAAI,CAACC,GAAL,EAAZ;;AACA,cAAIA,GAAG,GAAG,KAAI,CAACF,YAAX,IAA2B,IAA/B,EAAqC;AACnC,iBAAI,CAACO,IAAL,CAAU,QAAV;;AACA,iBAAI,CAACJ,sBAAL,CAA4B,KAA5B;;AACA,iBAAI,CAACH,YAAL,GAAoB,IAApB;AACD;AACF,SAPD,EAOG,IAPH;AAQD;AACF;;;wBAhIqB;AACpB,aAAOlF,gFAAP;AA4CD;;;wBAEuB;AACtB,aAAO;AACLN,aAAK,EAAE;AACLO,cAAI,EAAEpB,MADD;AAEL6G,kBAAQ,EAAE;AAFL,SADF;AAKLC,aAAK,EAAE;AACL1F,cAAI,EAAEC;AADD,SALF;AAQLoF,WAAG,EAAE;AACHrF,cAAI,EAAEpB;AADH,SARA;AAWLoG,WAAG,EAAE;AACHhF,cAAI,EAAEpB;AADH,SAXA;AAcL2F,YAAI,EAAE;AACJvE,cAAI,EAAEpB,MADF;AAEJa,eAAK,EAAE;AAFH;AAdD,OAAP;AAmBD;;;;EApE4BkG,wEAAW,CAACxF,+EAAD,C;;AAoI1CC,cAAc,CAACC,MAAf,CAAsB,oBAAtB,EAA4C0D,gBAA5C,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC9IA;AACA;AAEA;AAEA;;;;;;IAKM6B,a;;;;;;;;;;;;;4BAkKI;AAAA;;AACN;;AACA,WAAKC,WAAL;AACA,WAAKC,cAAL;AACA,WAAKC,UAAL;AAEA,WAAKC,gBAAL,CAAsB9C,gBAAtB,CAAuC,WAAvC,EAAoD,UAAC+C,EAAD;AAAA,eAClD,KAAI,CAACC,WAAL,CAAiBD,EAAjB,CADkD;AAAA,OAApD;AAGA,WAAKD,gBAAL,CAAsB9C,gBAAtB,CAAuC,YAAvC,EAAqD,UAAC+C,EAAD;AAAA,eACnD,KAAI,CAACE,YAAL,CAAkBF,EAAlB,CADmD;AAAA,OAArD;AAGD,K,CAED;AACA;AACA;;;;+CAC2BG,O,EAASC,O,EAAS;AAC3C,UAAIC,QAAQ,GAAG,KAAKN,gBAAL,CAAsBO,cAAtB,EAAf;AACAD,cAAQ,CAACE,CAAT,GAAaJ,OAAb;AACAE,cAAQ,CAACG,CAAT,GAAaJ,OAAb;AACA,UAAIK,EAAE,GAAGJ,QAAQ,CAACK,eAAT,CACP,KAAKX,gBAAL,CAAsBY,YAAtB,GAAqCC,OAArC,EADO,CAAT;AAGA,aAAO;AAAEL,SAAC,EAAEE,EAAE,CAACF,CAAR;AAAWC,SAAC,EAAEC,EAAE,CAACD;AAAjB,OAAP;AACD,K,CAED;;;;gCAEYR,E,EAAI;AACd,UAAMS,EAAE,GAAG,KAAKI,0BAAL,CAAgCb,EAAE,CAACG,OAAnC,EAA4CH,EAAE,CAACI,OAA/C,CAAX,CADc,CAEd;;AACA,UAAI,CAAC,KAAKU,SAAL,CAAeL,EAAE,CAACF,CAAlB,EAAqBE,EAAE,CAACD,CAAxB,CAAL,EAAiC;AAC/B;AACD,OALa,CAMd;;;AACA,WAAKO,aAAL,CAAmBf,EAAnB,EAPc,CAQd;;AACA,WAAKgB,MAAL,CAAY9C,SAAZ,CAAsB+C,GAAtB,CAA0B,OAA1B,EAAmC,UAAnC;AACA,WAAKhE,gBAAL,CAAsB,WAAtB,EAAmC,KAAK8D,aAAxC;AACA,WAAK9D,gBAAL,CAAsB,SAAtB,EAAiC,KAAKiE,SAAtC;AACD;;;gCAEW;AACV,WAAKF,MAAL,CAAY9C,SAAZ,CAAsBiD,MAAtB,CAA6B,OAA7B,EAAsC,UAAtC;AACA,WAAKC,mBAAL,CAAyB,WAAzB,EAAsC,KAAKL,aAA3C;AACD;;;kCAEaf,E,EAAI;AAAA;;AAChBqB,2BAAqB,CAAC;AAAA,eAAM,MAAI,CAACC,iBAAL,CAAuBtB,EAAvB,CAAN;AAAA,OAAD,CAArB;AACD,K,CAED;;;;iCAEaA,E,EAAI;AAAA;;AACf,UAAIuB,KAAK,GAAGvB,EAAE,CAACwB,cAAH,CAAkB,CAAlB,CAAZ;AACA,UAAMf,EAAE,GAAG,KAAKI,0BAAL,CAAgCU,KAAK,CAACpB,OAAtC,EAA+CoB,KAAK,CAACnB,OAArD,CAAX,CAFe,CAGf;;AACA,UAAI,CAAC,KAAKU,SAAL,CAAeL,EAAE,CAACF,CAAlB,EAAqBE,EAAE,CAACD,CAAxB,CAAL,EAAiC;AAC/B;AACD;;AACD,UAAIR,EAAE,CAACyB,MAAH,KAAc,KAAKC,MAAvB,EAA+B;AAC7B;AACA1B,UAAE,CAAC2B,cAAH;AACA,aAAKX,MAAL,CAAY9C,SAAZ,CAAsB+C,GAAtB,CAA0B,OAA1B,EAAmC,UAAnC;AACA,aAAKhE,gBAAL,CAAsB,WAAtB,EAAmC,KAAK2E,aAAxC;AACA,aAAK3E,gBAAL,CAAsB,UAAtB,EAAkC,KAAK4E,UAAvC;AACA;AACD,OAdc,CAef;AACA;;;AACA,WAAKC,eAAL,GAAuB,KAAvB;AACA,WAAK7E,gBAAL,CAAsB,UAAtB,EAAkC,KAAK8E,KAAvC;AACA,WAAK9E,gBAAL,CACE,WADF,EAEE,YAAM;AACJ,cAAI,CAAC6E,eAAL,GAAuB,IAAvB;AACD,OAJH,EAKE;AAAEE,eAAO,EAAE;AAAX,OALF;AAOD;;;0BAEKhC,E,EAAI;AACR,UAAI,KAAK8B,eAAT,EAA0B;AACxB;AACD;;AACD9B,QAAE,CAAC2B,cAAH;AACA,WAAKC,aAAL,CAAmB5B,EAAnB;AACD;;;iCAEY;AACX,WAAKgB,MAAL,CAAY9C,SAAZ,CAAsBiD,MAAtB,CAA6B,OAA7B,EAAsC,UAAtC;AACA,WAAKC,mBAAL,CAAyB,WAAzB,EAAsC,KAAKQ,aAA3C;AACD;;;kCAEa5B,E,EAAI;AAAA;;AAChBqB,2BAAqB,CAAC;AAAA,eAAM,MAAI,CAACC,iBAAL,CAAuBtB,EAAE,CAACwB,cAAH,CAAkB,CAAlB,CAAvB,CAAN;AAAA,OAAD,CAArB;AACD;AAED;;;AAIA;;;;sCACkBxB,E,EAAI;AACpB,UAAIiC,QAAQ,GAAG,KAAKpB,0BAAL,CAAgCb,EAAE,CAACG,OAAnC,EAA4CH,EAAE,CAACI,OAA/C,CAAf;AACA,UAAI8B,EAAE,GAAG,KAAKC,QAAL,CAAcF,QAAQ,CAAC1B,CAAvB,EAA0B0B,QAAQ,CAACzB,CAAnC,CAAT;AACA,WAAK4B,aAAL,CAAmBF,EAAnB;AACD,K,CAED;;;;kCACcA,E,EAAI;AAAA;;AAChB,WAAKG,gBAAL,CAAsBH,EAAtB,EADgB,CACW;;AAC3B,UAAI,CAAC,KAAKI,cAAV,EAA0B;AACxB;AACAJ,UAAE,GAAG,KAAKK,kBAAL,CAAwBL,EAAxB,CAAL;AACD,OALe,CAMhB;;;AACA,WAAKM,kBAAL,CAAwBN,EAAxB,EAPgB,CAQhB;AACA;;AACA,UAAI,KAAKO,sBAAT,EAAiC;AAC/B;AACA;AACAC,oBAAY,CAAC,KAAKC,iBAAN,CAAZ;AACA,aAAKA,iBAAL,GAAyBrD,UAAU,CAAC,YAAM;AACxC,gBAAI,CAACsD,iBAAL,CAAuBV,EAAvB,EADwC,CACZ;;AAC7B,SAFkC,EAEhC,KAAKW,QAF2B,CAAnC;AAGA;AACD;;AACD,WAAKD,iBAAL,CAAuBV,EAAvB,EAnBgB,CAmBY;;AAC5B,WAAKO,sBAAL,GAA8B,IAA9B;AACAnD,gBAAU,CAAC,YAAM;AACf,cAAI,CAACmD,sBAAL,GAA8B,KAA9B;AACD,OAFS,EAEP,KAAKI,QAFE,CAAV;AAGD,K,CAED;;;;sCACkBX,E,EAAI;AACpB,WAAKY,OAAL,GAAeZ,EAAf;AACA,WAAK3C,IAAL,CAAU,eAAV,EAA2B;AAAE2C,UAAE,EAAE;AAAEa,WAAC,EAAEb,EAAE,CAACa,CAAR;AAAW1E,WAAC,EAAE6D,EAAE,CAAC7D;AAAjB;AAAN,OAA3B;AACD;AAED;;;AAIA;;;;qCACiB6D,E,EAAI;AACnB,UAAIc,IAAI,GAAGd,EAAE,CAAC7D,CAAH,GAAO,KAAK4E,MAAvB;AACA,UAAIC,KAAK,GAAI,CAAChB,EAAE,CAACa,CAAH,GAAO,GAAR,IAAe,GAAhB,GAAuBpE,IAAI,CAACwE,EAAxC;AACA,UAAIC,QAAQ,GAAG,CAACJ,IAAD,GAAQrE,IAAI,CAAC0E,GAAL,CAASH,KAAT,CAAvB;AACA,UAAII,QAAQ,GAAG,CAACN,IAAD,GAAQrE,IAAI,CAAC4E,GAAL,CAASL,KAAT,CAAvB;AACA,UAAIM,eAAe,uBAAgBJ,QAAhB,cAA4BE,QAA5B,MAAnB;AACA,WAAK5B,MAAL,CAAY+B,YAAZ,CAAyB,WAAzB,EAAsCD,eAAtC;AACA,WAAKE,OAAL,CAAaD,YAAb,CAA0B,WAA1B,EAAuCD,eAAvC;AACD,K,CAED;;;;uCACmBtB,E,EAAI;AACrB;AACA;AACA,WAAKnC,gBAAL,CAAsB4D,KAAtB,CAA4BC,KAA5B,iBAA2C1B,EAAE,CAACa,CAA9C,qBAA0D,MACxDb,EAAE,CAAC7D,CAAH,GAAO,EADT;AAED;;;iCAEY6D,E,EAAI;AACf;AACA,UAAI,KAAKY,OAAL,IAAgB,KAAKA,OAAL,CAAaC,CAAb,KAAmBb,EAAE,CAACa,CAAtC,IAA2C,KAAKD,OAAL,CAAazE,CAAb,KAAmB6D,EAAE,CAAC7D,CAArE,EAAwE;AACtE;AACD;;AACD,WAAKgE,gBAAL,CAAsBH,EAAtB,EALe,CAKY;;AAC3B,UAAI,CAAC,KAAKI,cAAV,EAA0B;AACxB;AACAJ,UAAE,GAAG,KAAKK,kBAAL,CAAwBL,EAAxB,CAAL;AACD;;AACD,WAAKY,OAAL,GAAeZ,EAAf,CAVe,CAWf;;AACA,WAAKM,kBAAL,CAAwBN,EAAxB;AACD;AAED;;;AAIA;;;;6BACS2B,E,EAAIC,E,EAAI;AACf,UAAIZ,KAAK,GAAGvE,IAAI,CAACoF,KAAL,CAAW,CAACD,EAAZ,EAAgB,CAACD,EAAjB,CAAZ,CADe,CACmB;;AAClC,UAAIG,KAAK,GAAId,KAAK,GAAGvE,IAAI,CAACwE,EAAd,GAAoB,GAApB,GAA0B,GAAtC,CAFe,CAE4B;;AAC3C,aAAOa,KAAP;AACD,K,CAED;;;;8BACUzD,C,EAAGC,C,EAAG;AACd,aAAO,KAAKyD,WAAL,CAAiB1D,CAAjB,EAAoBC,CAApB,KAA0B,CAAjC;AACD,K,CAED;;;;gCACYqD,E,EAAIC,E,EAAI;AAClB,aAAOnF,IAAI,CAACuF,IAAL,CAAUL,EAAE,GAAGA,EAAL,GAAUC,EAAE,GAAGA,EAAzB,IAA+B,KAAKb,MAA3C;AACD;AAED;;;;;;6BAIS1C,C,EAAGC,C,EAAG;AACb,UAAI2D,GAAG,GAAG,KAAKC,QAAL,CAAc7D,CAAd,EAAiBC,CAAjB,CAAV,CADa,CACkB;;AAC/B,UAAI6D,gBAAgB,GAAG,KAAKJ,WAAL,CAAiB1D,CAAjB,EAAoBC,CAApB,CAAvB,CAFa,CAEkC;;AAC/C,UAAI8D,GAAG,GAAG3F,IAAI,CAACS,GAAL,CAASiF,gBAAT,EAA2B,CAA3B,CAAV,CAHa,CAG4B;;AACzC,aAAO;AAAEtB,SAAC,EAAEoB,GAAL;AAAU9F,SAAC,EAAEiG;AAAb,OAAP;AACD;;;uCAEkBpC,E,EAAI;AACrB;AACA,UAAI,KAAKqC,WAAT,EAAsB;AACpB,YAAMC,SAAS,GAAG,MAAM,KAAKD,WAA7B;AACA,YAAME,aAAa,GAAGD,SAAS,GAAG,CAAlC;AACAtC,UAAE,CAACa,CAAH,IAAQ0B,aAAR,CAHoB,CAGG;;AACvB,YAAIvC,EAAE,CAACa,CAAH,GAAO,CAAX,EAAc;AACZb,YAAE,CAACa,CAAH,IAAQ,GAAR;AACD,SANmB,CAMlB;;;AACF,YAAM2B,IAAI,GAAGxC,EAAE,CAACa,CAAH,GAAOyB,SAApB;AACAtC,UAAE,CAACa,CAAH,IAAQ2B,IAAI,GAAGF,SAAf;AACD,OAXoB,CAarB;;;AACA,UAAI,KAAKG,kBAAT,EAA6B;AAC3B,YAAI,KAAKA,kBAAL,KAA4B,CAAhC,EAAmC;AACjCzC,YAAE,CAAC7D,CAAH,GAAO,CAAP;AACD,SAFD,MAEO;AACL,cAAIuG,WAAW,GAAG,IAAI,KAAKD,kBAA3B;AACA,cAAIE,cAAc,GAAG,KAAK,KAAKF,kBAAL,GAA0B,CAA/B,CAArB;AACA,cAAIG,aAAa,GAAGnG,IAAI,CAACoG,KAAL,CAAW7C,EAAE,CAAC7D,CAAH,GAAOuG,WAAlB,IAAiCC,cAArD;AACA3C,YAAE,CAAC7D,CAAH,GAAOM,IAAI,CAACS,GAAL,CAAS0F,aAAT,EAAwB,CAAxB,CAAP;AACD;AACF;;AACD,aAAO5C,EAAP;AACD;AAED;;;;;;kCAIc;AACZ,WAAKlB,MAAL,GAAc,KAAKhD,CAAL,CAAOgD,MAArB;AACA,WAAKgE,eAAL,GAAuB,KAAKhH,CAAL,CAAOgH,eAA9B;AACA,WAAKjF,gBAAL,GAAwB,KAAK/B,CAAL,CAAO+B,gBAA/B,CAHY,CAKZ;;AACA,WAAKkF,OAAL,GAAe,KAAKC,KAAL,GAAa,CAA5B;AACA,WAAKC,OAAL,GAAe,KAAKF,OAApB,CAPY,CASZ;;AACA,WAAKD,eAAL,CAAqBE,KAArB,GAA6B,KAAKA,KAAlC;AACA,WAAKF,eAAL,CAAqBI,MAArB,GAA8B,KAAKA,MAAnC;AACA,WAAKrF,gBAAL,CAAsB0D,YAAtB,CACE,SADF,YAEK,CAAC,KAAKwB,OAFX,cAEsB,CAAC,KAAKE,OAF5B,cAEuC,KAAKD,KAF5C,cAEqD,KAAKE,MAF1D;AAID;;;qCAEgB;AACf;;;AAGA,UAAIC,WAAJ;AACA,UAAIC,aAAJ;AACA,UAAIC,aAAJ;AACA,UAAIC,UAAJ;AACA,UAAMC,OAAO,GAAG,KAAKT,eAAL,CAAqBU,UAArB,CAAgC,IAAhC,CAAhB,CARe,CASf;;AACA,UAAMC,EAAE,GAAG,KAAKV,OAAhB;AACA,UAAMW,EAAE,GAAG,KAAKT,OAAhB;AACA,UAAMlC,MAAM,GAAG,KAAKA,MAApB;AACA,UAAM4C,gBAAgB,GAAG,KAAzB,CAbe,CAcf;;AACA,UAAMC,UAAU,GAAGzG,MAAM,CAAC0G,gBAAP,CAAwB,KAAKf,eAA7B,EAA8C,IAA9C,CAAnB;AACA,UAAMgB,WAAW,GAAGC,QAAQ,CAC1BH,UAAU,CAACI,gBAAX,CAA4B,qBAA5B,CAD0B,EAE1B,EAF0B,CAA5B;AAIA,UAAMC,WAAW,GAAGL,UAAU,CAC3BI,gBADiB,CACA,qBADA,EAEjBE,IAFiB,EAApB;AAGA,UAAMC,WAAW,GAAGP,UAAU,CAACI,gBAAX,CAA4B,gBAA5B,EAA8CE,IAA9C,EAApB,CAvBe,CAwBf;AACA;;AACA,UAAIC,WAAW,KAAK,MAApB,EAA4B;AAC1B,YAAMC,MAAM,GAAGD,WAAW,CAACjN,KAAZ,CAAkB,KAAlB,CAAf;AACAiM,mBAAW,GAAGiB,MAAM,CAACC,GAAP,EAAd;AACAjB,qBAAa,GAAGW,QAAQ,CAACK,MAAM,CAAC,CAAD,CAAP,EAAY,EAAZ,CAAxB;AACAf,qBAAa,GAAGU,QAAQ,CAACK,MAAM,CAAC,CAAD,CAAP,EAAY,EAAZ,CAAxB;AACAd,kBAAU,GAAGS,QAAQ,CAACK,MAAM,CAAC,CAAD,CAAP,EAAY,EAAZ,CAAR,IAA2B,CAAxC;AACD;;AACD,UAAME,YAAY,GAAGvD,MAAM,GAAG+C,WAAW,GAAG,CAA5C;AACA,UAAMS,WAAW,GAAGxD,MAApB;AACA,UAAMyD,YAAY,GAAGzD,MAAM,GAAG+C,WAA9B;AAEA;;;;AAGA,eAASW,UAAT,CAAoBpC,WAApB,EAAiCI,kBAAjC,EAAqD;AACnDJ,mBAAW,GAAGA,WAAW,IAAI,GAA7B,CADmD,CACjB;;AAClC,YAAMC,SAAS,GAAG,MAAMD,WAAxB;AACA,YAAME,aAAa,GAAGD,SAAS,GAAG,CAAlC,CAHmD,CAGd;;AACrC,aAAK,IAAIR,KAAK,GAAG,CAAjB,EAAoBA,KAAK,IAAI,GAA7B,EAAkCA,KAAK,IAAIQ,SAA3C,EAAsD;AACpD,cAAIoC,UAAU,GAAG,CAAC5C,KAAK,GAAGS,aAAT,KAA2B9F,IAAI,CAACwE,EAAL,GAAU,GAArC,CAAjB;AACA,cAAI0D,QAAQ,GAAG,CAAC7C,KAAK,GAAGS,aAAR,GAAwB,CAAzB,KAA+B9F,IAAI,CAACwE,EAAL,GAAU,GAAzC,CAAf;AACAsC,iBAAO,CAACqB,SAAR;AACArB,iBAAO,CAACsB,MAAR,CAAepB,EAAf,EAAmBC,EAAnB;AACAH,iBAAO,CAACuB,GAAR,CACErB,EADF,EAEEC,EAFF,EAGEa,WAHF,EAIEG,UAJF,EAKEC,QALF,EAMEhB,gBANF;AAQAJ,iBAAO,CAACwB,SAAR,GAboD,CAcpD;;AACA,cAAIC,QAAQ,GAAGzB,OAAO,CAAC0B,oBAAR,CACbxB,EADa,EAEbC,EAFa,EAGb,CAHa,EAIbD,EAJa,EAKbC,EALa,EAMba,WANa,CAAf;AAQA,cAAIW,SAAS,GAAG,GAAhB,CAvBoD,CAwBpD;;AACAF,kBAAQ,CAACG,YAAT,CAAsB,CAAtB,gBAAgCrD,KAAhC,qBAAgDoD,SAAhD,SAzBoD,CA0BpD;;AACA,cAAIzC,kBAAkB,GAAG,CAAzB,EAA4B;AAC1B,gBAAM2C,SAAS,GAAG,IAAI3C,kBAAtB;AACA,gBAAI4C,KAAK,GAAG,CAAZ;;AACA,iBAAK,IAAIC,IAAI,GAAG,CAAhB,EAAmBA,IAAI,GAAG7C,kBAA1B,EAA8C6C,IAAI,IAAI,CAAtD,EAAyD;AACvD,kBAAIC,YAAY,GAAGL,SAAnB;AACAG,mBAAK,GAAGC,IAAI,GAAGF,SAAf;AACAF,uBAAS,GAAG,MAAM,KAAKG,KAAvB;AACAL,sBAAQ,CAACG,YAAT,CACEE,KADF,gBAESvD,KAFT,qBAEyByD,YAFzB;AAIAP,sBAAQ,CAACG,YAAT,CAAsBE,KAAtB,gBAAoCvD,KAApC,qBAAoDoD,SAApD;AACD;;AACDF,oBAAQ,CAACG,YAAT,CAAsBE,KAAtB,gBAAoCvD,KAApC;AACD,WAzCmD,CA0CpD;;;AACAkD,kBAAQ,CAACG,YAAT,CAAsB,CAAtB,gBAAgCrD,KAAhC;AAEAyB,iBAAO,CAACiC,SAAR,GAAoBR,QAApB;AACAzB,iBAAO,CAACkC,IAAR;AACD;AACF;;AAED,eAASC,UAAT,GAAsB;AACpBnC,eAAO,CAACoC,IAAR;AACApC,eAAO,CAACqB,SAAR;AACArB,eAAO,CAACuB,GAAR,CAAYrB,EAAZ,EAAgBC,EAAhB,EAAoBc,YAApB,EAAkC,CAAlC,EAAqC,IAAI/H,IAAI,CAACwE,EAA9C,EAAkD,KAAlD;AACAsC,eAAO,CAACJ,WAAR,GAAsBA,WAAtB;AACAI,eAAO,CAACH,aAAR,GAAwBA,aAAxB;AACAG,eAAO,CAACF,aAAR,GAAwBA,aAAxB;AACAE,eAAO,CAACD,UAAR,GAAqBA,UAArB;AACAC,eAAO,CAACiC,SAAR,GAAoB,OAApB;AACAjC,eAAO,CAACkC,IAAR;AACAlC,eAAO,CAACqC,OAAR;AACD;;AAED,eAASC,UAAT,GAAsB;AACpBtC,eAAO,CAACqB,SAAR;AACArB,eAAO,CAACuB,GAAR,CAAYrB,EAAZ,EAAgBC,EAAhB,EAAoBY,YAApB,EAAkC,CAAlC,EAAqC,IAAI7H,IAAI,CAACwE,EAA9C,EAAkD,KAAlD;AACAsC,eAAO,CAACuC,SAAR,GAAoBhC,WAApB;AACAP,eAAO,CAACwC,WAAR,GAAsB9B,WAAtB;AACAV,eAAO,CAACyC,MAAR;AACD;AAED;;;;;;AAIA,UAAIpC,UAAU,CAACqC,MAAX,KAAsB,MAA1B,EAAkC;AAChCP,kBAAU;AACX;;AACDjB,gBAAU,CAAC,KAAKpC,WAAN,EAAmB,KAAKI,kBAAxB,CAAV;;AACA,UAAIqB,WAAW,GAAG,CAAlB,EAAqB;AACnB+B,kBAAU;AACX;AACF;AAED;;;;;;;iCAKa;AACX,UAAMK,UAAU,GAAG,KAAKrI,gBAAxB;AACA,UAAMsI,YAAY,GAAG,KAAKpF,MAAL,GAAc,IAAnC;AACA,UAAMqF,aAAa,GAAG,KAAKrF,MAAL,GAAc,IAApC;AACA,UAAMsF,cAAc,GAAG,EAAED,aAAa,GAAG,CAAlB,CAAvB;AACA,UAAME,cAAc,GAAG,CAAvB;AAEAJ,gBAAU,CAAC1G,MAAX,GAAoB+G,QAAQ,CAACC,eAAT,CAClB,4BADkB,EAElB,QAFkB,CAApB;AAIAN,gBAAU,CAAC1G,MAAX,CAAkB+B,YAAlB,CAA+B,IAA/B,EAAqC,QAArC;AACA2E,gBAAU,CAAC1G,MAAX,CAAkB+B,YAAlB,CAA+B,GAA/B,EAAoC4E,YAApC;AACA,WAAK3G,MAAL,GAAc0G,UAAU,CAAC1G,MAAzB;AACA0G,gBAAU,CAACO,WAAX,CAAuBP,UAAU,CAAC1G,MAAlC;AAEA0G,gBAAU,CAAC1E,OAAX,GAAqB+E,QAAQ,CAACC,eAAT,CACnB,4BADmB,EAEnB,QAFmB,CAArB;AAIAN,gBAAU,CAAC1E,OAAX,CAAmBD,YAAnB,CAAgC,IAAhC,EAAsC,cAAtC;AACA2E,gBAAU,CAAC1E,OAAX,CAAmBD,YAAnB,CAAgC,GAAhC,EAAqC6E,aAArC;AACAF,gBAAU,CAAC1E,OAAX,CAAmBD,YAAnB,CAAgC,IAAhC,EAAsC+E,cAAtC;AACAJ,gBAAU,CAAC1E,OAAX,CAAmBD,YAAnB,CAAgC,IAAhC,EAAsC8E,cAAtC;AACA,WAAK7E,OAAL,GAAe0E,UAAU,CAAC1E,OAA1B;AACA0E,gBAAU,CAACO,WAAX,CAAuBP,UAAU,CAAC1E,OAAlC;AACD;;;yCAEoB;AACnB,UAAI,KAAKsB,eAAT,EAA0B;AACxB,aAAKnF,cAAL;AACD;AACF;;;wBA5kBqB;AACpB,aAAO/F,gFAAP;AA0FD;;;wBAEuB;AACtB,aAAO;AACLgJ,eAAO,EAAE;AACP/I,cAAI,EAAEzB;AADC,SADJ;AAKL;AACAsQ,sBAAc,EAAE;AACd7O,cAAI,EAAEzB,MADQ;AAEdkH,kBAAQ,EAAE;AAFI,SANX;AAWL;AACA;AACA;AACA;AACA;AACA0F,aAAK,EAAE;AACLnL,cAAI,EAAEpB,MADD;AAELa,eAAK,EAAE;AAFF,SAhBF;AAqBL4L,cAAM,EAAE;AACNrL,cAAI,EAAEpB,MADA;AAENa,eAAK,EAAE;AAFD,SArBH;AA0BLyJ,cAAM,EAAE;AACNlJ,cAAI,EAAEpB,MADA;AAENa,eAAK,EAAE;AAFD,SA1BH;AA+BL;AACA;AACA;AACA+K,mBAAW,EAAE;AACXxK,cAAI,EAAEpB,MADK;AAEXa,eAAK,EAAE,CAFI;AAGXgG,kBAAQ,EAAE;AAHC,SAlCR;AAwCL;AACA;AACA;AACA;AACAmF,0BAAkB,EAAE;AAClB5K,cAAI,EAAEpB,MADY;AAElBa,eAAK,EAAE,CAFW;AAGlBgG,kBAAQ,EAAE;AAHQ,SA5Cf;AAkDL;AACA;AACA;AACA8C,sBAAc,EAAE;AACdvI,cAAI,EAAES,OADQ;AAEdhB,eAAK,EAAE;AAFO,SArDX;AA0DL;AACA;AACAqJ,gBAAQ,EAAE;AACR9I,cAAI,EAAEpB,MADE;AAERa,eAAK,EAAE;AAFC;AA5DL,OAAP;AAiED;;;;EAhKyBkG,wEAAW,CAACxF,+EAAD,C;;AA+kBvCC,cAAc,CAACC,MAAf,CAAsB,iBAAtB,EAAyCuF,aAAzC,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACzlBA;AACA;AAEA;AACA;;IAEMkJ,e;;;;;;;;;;;;;wBACkB;AACpB,aAAO/O,gFAAP;AAqCD;;;wBAEuB;AACtB,aAAO;AACLgP,eAAO,EAAE9O,MADJ;AAEL+O,gBAAQ,EAAEvO,OAFL;AAGL4E,WAAG,EAAEzG,MAHA;AAILoG,WAAG,EAAEpG,MAJA;AAKLqQ,WAAG,EAAExO,OALA;AAML8D,YAAI,EAAE3F,MAND;AAQLsQ,aAAK,EAAE;AACLlP,cAAI,EAAES,OADD;AAELhB,eAAK,EAAE;AAFF,SARF;AAYL0P,sBAAc,EAAE;AACdnP,cAAI,EAAES,OADQ;AAEdhB,eAAK,EAAE;AAFO,SAZX;AAgBL2P,YAAI,EAAE;AACJpP,cAAI,EAAEC,MADF;AAEJR,eAAK,EAAE;AAFH,SAhBD;AAoBLA,aAAK,EAAE;AACLO,cAAI,EAAEpB,MADD;AAELyQ,gBAAM,EAAE;AAFH;AApBF,OAAP;AAyBD;;;;EAnE2BlP,+E;;AAsE9BC,cAAc,CAACC,MAAf,CAAsB,mBAAtB,EAA2CyO,eAA3C,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;CC1EA;AACA;;AAGA,IAAMQ,oBAAoB,GAAGlP,cAAc,CAACkB,GAAf,CAC3B,mBAD2B,CAA7B;AAIO,IAAMiO,0BAAb;AAAA;AAAA;AAAA;;AAAA;AAAA;;AAAA;;AAAA;;AAAA;AAAA;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AAAA;AAAA;AAAA,wCAG6B;AACzB,WAAKH,IAAL,GACE9J,MAAM,CAAC0G,gBAAP,CAAwB,IAAxB,EAA8BwD,SAA9B,KAA4C,KAA5C,GACI,KAAKC,MAAL,GACE,mBADF,GAEE,iBAHN,GAII,KAAKA,MAAL,GACA,oBADA,GAEA,kBAPN,CADyB,CAUzB;;AACA;AACD;AAfH;;AAAA;AAAA,EAAgDH,oBAAhD;AAwBAlP,cAAc,CAACC,MAAf,CACE,iCADF,EAEEkP,0BAFF,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AClCA;AAEA;;;;;;AAKA,IAAMG,gBAAgB,GAAGtP,cAAc,CAACkB,GAAf,CAAmB,cAAnB,CAAzB;;IAEMqO,a;;;;;;;;;;;;;wBACkB;AACpB,UAAMC,GAAG,GAAGlB,QAAQ,CAACmB,aAAT,CAAuB,UAAvB,CAAZ;AACAD,SAAG,CAACE,SAAJ,GAAgBJ,gBAAgB,CAACK,QAAjB,CAA0BD,SAA1C;AACA,UAAME,OAAO,GAAGtB,QAAQ,CAACmB,aAAT,CAAuB,OAAvB,CAAhB;AACAG,aAAO,CAACF,SAAR;AAoDAF,SAAG,CAACK,OAAJ,CAAYrB,WAAZ,CAAwBoB,OAAxB;AACA,aAAOJ,GAAP;AACD;;;;EA3DyBF,gB;;AA6D5BtP,cAAc,CAACC,MAAf,CAAsB,iBAAtB,EAAyCsP,aAAzC,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACtEA;AACA;AACA;AACA;AAEA;AAEA;;;;IAGMO,oB;;;;;;;;;;;;;2CAqEmBlM,M,EAAQ;AAC7B,WAAKC,CAAL,CAAOC,kBAAP,CAA0BC,SAA1B,CAAoCC,MAApC,CAA2C,SAA3C,EAAsDJ,MAAtD;AACD;;;qCAEgB;AACf,UAAMc,MAAM,GAAG,KAAKrF,KAAL,GAAa,KAAK8E,IAAjC;;AACA,UAAI,KAAK9E,KAAL,GAAa,KAAKuF,GAAtB,EAA2B;AACzB,aAAKC,YAAL,GAAoBC,IAAI,CAACC,GAAL,EAApB;AACA,aAAKC,sBAAL,CAA4B,IAA5B;AACD;;AACD,UAAIN,MAAM,IAAI,KAAKE,GAAnB,EAAwB;AACtB;AACA;AACA;AACA,YAAIF,MAAM,IAAI,KAAKO,GAAnB,EAAwB;AACtB,eAAK5F,KAAL,GAAa,KAAK4F,GAAlB;AACD,SAFD,MAEO;AACL,eAAK5F,KAAL,GAAaqF,MAAb;AACD;AACF,OATD,MASO;AACL,aAAKrF,KAAL,GAAa,KAAKuF,GAAlB;AACD;AACF;;;qCAEgB;AACf,UAAMF,MAAM,GAAG,KAAKrF,KAAL,GAAa,KAAK8E,IAAjC;;AACA,UAAI,KAAK9E,KAAL,GAAa,KAAK4F,GAAtB,EAA2B;AACzB,aAAKJ,YAAL,GAAoBC,IAAI,CAACC,GAAL,EAApB;AACA,aAAKC,sBAAL,CAA4B,IAA5B;AACD;;AACD,UAAIN,MAAM,IAAI,KAAKO,GAAnB,EAAwB;AACtB,aAAK5F,KAAL,GAAaqF,MAAb;AACD,OAFD,MAEO;AACL,aAAKrF,KAAL,GAAa,KAAK4F,GAAlB;AACD;AACF;;;mCAEc;AAAA;;AACb;AACA;AACA;AACA;AACA,UAAI,KAAKJ,YAAT,EAAuB;AACrBK,cAAM,CAACC,UAAP,CAAkB,YAAM;AACtB,cAAMJ,GAAG,GAAGD,IAAI,CAACC,GAAL,EAAZ;;AACA,cAAIA,GAAG,GAAG,KAAI,CAACF,YAAX,IAA2B,IAA/B,EAAqC;AACnC,iBAAI,CAACO,IAAL,CAAU,QAAV;;AACA,iBAAI,CAACJ,sBAAL,CAA4B,KAA5B;;AACA,iBAAI,CAACH,YAAL,GAAoB,IAApB;AACD;AACF,SAPD,EAOG,IAPH;AAQD;AACF;;;wBAxHqB;AACpB,aAAOlF,gFAAP;AA2CD;;;wBAEuB;AACtB,aAAO;AACLN,aAAK,EAAE;AACLO,cAAI,EAAEpB,MADD;AAEL6G,kBAAQ,EAAE;AAFL,SADF;AAKLC,aAAK,EAAE;AACL1F,cAAI,EAAEC;AADD,SALF;AAQLoF,WAAG,EAAE;AACHrF,cAAI,EAAEpB;AADH,SARA;AAWLoG,WAAG,EAAE;AACHhF,cAAI,EAAEpB;AADH,SAXA;AAcL2F,YAAI,EAAE;AACJvE,cAAI,EAAEpB,MADF;AAEJa,eAAK,EAAE;AAFH;AAdD,OAAP;AAmBD;;;;EAnEgCkG,wEAAW,CAACxF,+EAAD,C;;AA4H9CC,cAAc,CAACC,MAAf,CAAsB,yBAAtB,EAAiD6P,oBAAjD,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACtIA;AACA;AACA;AACA;AAEA;AAEA;AACA;AAEA;AACA;AAEA;AAEA;;;;IAGMC,gB;;;;;;;;;;;;;4BAsHI;AAAA;;AACN;;AACA,WAAKC,cAAL,GAAsB,IAAtB;AACA,WAAKlN,gBAAL,CAAsB,gBAAtB,EAAwC,UAAC+C,EAAD,EAAQ;AAC9C,aAAI,CAACoK,KAAL,GAAapK,EAAE,CAACqK,MAAH,CAAUC,IAAvB;AACD,OAFD;AAGD;;;mCAEczS,Q,EAAU;AACvB,aAAOA,QAAQ,GAAG0S,mFAAkB,CAAC1S,QAAD,CAArB,GAAkC,EAAjD;AACD;;;qCAEgB8D,I,EAAM;AACrB,aAAOA,IAAI,CAAC6O,MAAL,CAAY7O,IAAI,CAAC8O,gBAAjB,KAAsC,IAA7C;AACD;;;;;;+CAEsBC,M,EAAQC,M;;;;;;;;oBACxBD,M;;;;;AACH,qBAAKE,aAAL,CAAmB;AACjBC,wBAAM,EAAE,KADS;AAEjBT,uBAAK,EAAE,IAFU;AAGjBU,+BAAa,EAAE,IAHE;AAIjBC,uBAAK,EAAE;AAJU,iBAAnB;;;;AASF1J,qCAAqB,CAAC;AAAA,yBACpBA,qBAAqB,CAAC,YAAM;AAC1B;AACA;AACA,0BAAI,CAACwJ,MAAL,GAAc,IAAd;AACD,mBAJoB,CADD;AAAA,iBAAD,CAArB;;sBASE,CAACG,kFAAiB,CAAC,KAAKrP,IAAN,EAAY,QAAZ,CAAlB,IACCgP,MAAM,IAAIA,MAAM,CAAC1S,SAAP,KAAqByS,MAAM,CAACzS,S;;;;;;;;qBAKrC,KAAK0D,IAAL,CAAUsP,IAAV,CAAeC,Q;;;;;;;uBAEI,KAAKvP,IAAL,CAAUwP,MAAV,CAAiB;AAClCpR,sBAAI,EAAE,4BAD4B;AAElC9B,2BAAS,EAAEyS,MAAM,CAACzS;AAFgB,iBAAjB,C;;;AAAbmT,oB;AAIN,qBAAKN,aAAL,GAAqBM,IAArB;;;;;;;AAEA,qBAAKN,aAAL,GAAqB,IAArB;;;;;;;;;;;;;;;;;;uCAKaJ,M,EAAQ;AACzB,UAAI,CAACA,MAAD,IAAW,KAAK7S,QAApB,EAA8B;AAC5B,aAAK0H,IAAL,CAAU,gBAAV,EAA4B;AAAE7H,kBAAQ,EAAE;AAAZ,SAA5B;AACD;AACF;;;4BAEO2T,C,EAAGC,C,EAAG;AACZ,aAAOD,CAAC,KAAKC,CAAb;AACD;;;oCAEe;AACd,WAAKC,YAAL;AACD;;;wBAxLqB;AACpB,aAAOzR,gFAAP;AAgFD;;;wBAEuB;AACtB,aAAO;AACL6B,YAAI,EAAErD,MADD;AAELT,gBAAQ,EAAE;AACRkC,cAAI,EAAEzB,MADE;AAER2B,kBAAQ,EAAE,wBAFF;AAGRuF,kBAAQ,EAAE;AAHF,SAFL;AAQLuL,aAAK,EAAE;AACLhR,cAAI,EAAES,OADD;AAELgR,4BAAkB,EAAE,IAFf;AAGLhM,kBAAQ,EAAE;AAHL,SARF;AAcL2K,sBAAc,EAAE7R,MAdX;AAeLwS,qBAAa,EAAExS,MAfV;AAiBL8R,aAAK,EAAE;AACLrQ,cAAI,EAAEC,MADD;AAELR,eAAK,EAAE;AAFF,SAjBF;AAsBLiS,kBAAU,EAAE;AACVxR,kBAAQ,EAAE,0BADA;AAEVuR,4BAAkB,EAAE;AAFV;AAtBP,OAAP;AA2BD;;;wBAEsB;AACrB,aAAO,CAAC,4BAAD,CAAP;AACD;;;;EApH4BE,oEAAW,CAACxR,+EAAD,C;;AA2L1CC,cAAc,CAACC,MAAf,CAAsB,qBAAtB,EAA6C8P,gBAA7C,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC7MA;AACA;AACA;AACA;AACA;AAEA;AACA;;IAEMyB,yB;;;;;;;wBAGkB;AACpB,aAAO7R,gFAAP;AA6JD;;;wBAEuB;AACtB,aAAO;AACL6B,YAAI,EAAErD,MADD;AAELT,gBAAQ,EAAE;AACRkC,cAAI,EAAEzB,MADE;AAERkH,kBAAQ,EAAE;AAFF,SAFL;AAMLoM,oBAAY,EAAE;AACZ7R,cAAI,EAAEC,MADM;AAEZR,eAAK,EAAE;AAFK,SANT;AAULqS,mBAAW,EAAE;AACX9R,cAAI,EAAEC,MADK;AAEXR,eAAK,EAAE;AAFI,SAVR;AAcLsS,kBAAU,EAAE;AACV/R,cAAI,EAAES,OADI;AAEVP,kBAAQ,EAAE;AAFA,SAdP;AAkBL8R,sBAAc,EAAE;AACdhS,cAAI,EAAES,OADQ;AAEdhB,eAAK,EAAE;AAFO,SAlBX;AAsBLwS,mBAAW,EAAE;AACXjS,cAAI,EAAES,OADK;AAEXhB,eAAK,EAAE;AAFI,SAtBR;AA0BLyS,qBAAa,EAAE;AACblS,cAAI,EAAES,OADO;AAEbhB,eAAK,EAAE;AAFM;AA1BV,OAAP;AA+BD;;;AAED,uCAAc;AAAA;;AAAA;;AACZ;AACA,UAAK0S,YAAL,GAAoB,CAClB,YADkB,EAElB,YAFkB,EAGlB,aAHkB,EAIlB,qBAJkB,CAApB;AAFY;AAQb;;;;qCAEgBxB,M,EAAQC,M,EAAQ;AAAA;;AAC/B,UAAID,MAAJ,EAAY;AACV,YAAMyB,KAAK,GAAGzB,MAAM,CAACyB,KAArB;AACA,YAAMC,KAAK,GAAG;AACZP,qBAAW,EAAEnB,MAAM,CAAC5S,UAAP,CAAkBuU,WADnB;AAEZL,qBAAW,EAAEG,KAAK,KAAK,UAFX;AAGZJ,wBAAc,EACZ,KAAKG,YAAL,CAAkBpQ,QAAlB,CAA2BqQ,KAA3B,KACAA,KAAK,KAAK,SADV,IAEAA,KAAK,KAAK,WAFV,IAGAA,KAAK,KAAK;AAPA,SAAd;AASAC,aAAK,CAACH,aAAN,GAAsBG,KAAK,CAACL,cAAN,IAAwBK,KAAK,CAACJ,WAApD;AACA,aAAKpB,aAAL,CAAmBwB,KAAnB;AACD;;AACD,UAAIzB,MAAJ,EAAY;AACVrL,kBAAU,CAAC,YAAM;AACf,gBAAI,CAACC,IAAL,CAAU,aAAV;AACD,SAFS,EAEP,GAFO,CAAV;AAGD;AACF;;;8BAES+M,M,EAAQ;AAChB,aAAOA,MAAM,KAAK,QAAlB;AACD;;;kCAEaC,I,EAAMD,M,EAAQ;AAC1B,aAAO,CAACA,MAAD,IAAWC,IAAI,CAAC7N,MAAL,GAAc,CAAhC;AACD;;;kCAEasB,E,EAAI;AAChB,WAAK4L,YAAL,IAAqB5L,EAAE,CAACyB,MAAH,CAAU+K,YAAV,CAAuB,YAAvB,CAArB;AACD;;;wCAEmB;AAClB,WAAKZ,YAAL,GAAoB,EAApB;AACD;;;iCAEY5L,E,EAAI;AAAA;;AACf,UAAMyM,OAAO,GAAGzM,EAAE,CAACyB,MAAH,CAAU+K,YAAV,CAAuB,cAAvB,CAAhB;AACA,UAAME,IAAI,GAAG;AACXzU,iBAAS,EAAE,KAAKJ,QAAL,CAAcI,SADd;AAEXsU,YAAI,EAAE,KAAKX;AAFA,OAAb;AAIA,WAAKjQ,IAAL,CAAUgR,WAAV,CAAsB,qBAAtB,EAA6CF,OAA7C,EAAsDC,IAAtD,EAA4DE,IAA5D,CAAiE,YAAM;AACrE,cAAI,CAAChB,YAAL,GAAoB,EAApB;AACD,OAFD;AAGD;;;;EA9PqCiB,sEAAa,CACnDnN,wEAAW,CAACxF,+EAAD,CADwC,C;;AAgQrDC,cAAc,CAACC,MAAf,CACE,+BADF,EAEEuR,yBAFF,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACzQA;AACA;AACA;AAEA;AAEA;;IAEMmB,kB;;;;;;;;;;;;;0CAqCkB;AACpB,WAAKnR,IAAL,CAAUgR,WAAV,CAAsB,YAAtB,EAAoC,SAApC,EAA+C;AAC7C1U,iBAAS,EAAE,KAAKJ,QAAL,CAAcI;AADoB,OAA/C;AAGD;;;wBAxCqB;AACpB,aAAO6B,gFAAP;AA0BD;;;wBAEuB;AACtB,aAAO;AACL6B,YAAI,EAAErD,MADD;AAELT,gBAAQ,EAAES;AAFL,OAAP;AAID;;;;EAnC8BuU,sEAAa,CAAC3S,+EAAD,C;;AA4C9CC,cAAc,CAACC,MAAf,CAAsB,sBAAtB,EAA8C0S,kBAA9C,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACpDA;AAWA;AAMA;AACA;CAEA;AACA;;IAGMC,c;MAAAA,c;;;;;;;;;;;;;;;;;;;;;;;;;;;OAAAA,c;;;mBACHxS,4DAAQ,E;;;;;mBACRA,4DAAQ,E;;;;;mBACRA,4DAAQ,E;;;;;;aAET,kBAA0C;AACxC,YAAI,CAAC,KAAKoB,IAAN,IAAc,CAAC,KAAK9D,QAAxB,EAAkC;AAChC,iBAAOiC,wDAAP;AACD;;AAED,eAAOA,wDAAP,qBAEa,KAAK6B,IAFlB,EAGiB,KAAK9D,QAHtB,EAMI,KAAKmV,YAAL,GACElT,wDADF,qBAGiB,KAAKkT,YAAL,CAAkBC,cAHnC,EAIgB,KAAKC,sBAJrB,IASElV,SAfN;AAiBD;;;;aAED,iBAAkBgD,YAAlB,EAAgD;AAC9C,YAAI,CAACA,YAAY,CAACE,GAAb,CAAiB,UAAjB,CAAL,EAAmC;AACjC;AACD;;AAED,YAAME,QAAQ,GAAGJ,YAAY,CAACK,GAAb,CAAiB,UAAjB,CAAjB;AACA,YAAMC,WAAW,GAAGF,QAAQ,GAAGA,QAAQ,CAACnD,SAAZ,GAAwBD,SAApD;AACA,YAAMuD,WAAW,GAAG,KAAK1D,QAAL,GAAgB,KAAKA,QAAL,CAAcI,SAA9B,GAA0CD,SAA9D,CAP8C,CAS9C;;AACA,YAAIuD,WAAW,KAAKD,WAApB,EAAiC;AAC/B;AACD;;AAED,YACEC,WAAW,IACX,KAAKI,IAAL,CAAWC,MAAX,CAAkBC,UAAlB,CAA6BC,QAA7B,CAAsC,QAAtC,CADA,IAEApD,uFAAe,CAAC,KAAKb,QAAN,EAAiBkE,kEAAjB,CAHjB,EAIE;AACA;AACA,eAAKoR,iBAAL;AACD;AACF;;;;;;;gCAED;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBAC4BC,qEAAgB,CACxC,KAAKzR,IADmC,EAExC,KAAK9D,QAAL,CAAeI,SAFyB,CAD5C;;AAAA;AACE,uBAAK+U,YADP;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,S;;;;;;;;;;;;;;gCAOA,kBAAqChN,EAArC;AAAA;AAAA;AAAA;AAAA;AAAA;AACQqN,0BADR,GACmBrN,EAAE,CAACsN,aADtB;AAAA;AAAA;AAAA,yBAG8BC,sEAAiB,CACzC,KAAK5R,IADoC,EAEzC,KAAK9D,QAAL,CAAeI,SAF0B,EAGzC;AACEgV,kCAAc,EAAEI,QAAQ,CAACG;AAD3B,mBAHyC,CAH/C;;AAAA;AAGI,uBAAKR,YAHT;AAAA;AAAA;;AAAA;AAAA;AAAA;AAWIS,uBAAK,CAAC,aAAIC,OAAL,CAAL;AACAL,0BAAQ,CAACG,OAAT,GAAmB,CAACH,QAAQ,CAACG,OAA7B;;AAZJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,S;;;;;;;;;;;;aAgBA,kBAA+B;AAC7B,eAAO5P,uDAAP;AAUD;;;GAvF0BC,sD;;AA0F7B1D,cAAc,CAACC,MAAf,CAAsB,kBAAtB,EAA0C2S,cAA1C,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AClHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AAEA;;;;;IAIMY,e;;;;;;;;;;;;;oCAySYjD,M,EAAQC,M,EAAQ;AAAA;;AAC9B,UAAID,MAAJ,EAAY;AACV,aAAKE,aAAL,CAAmB;AACjBgD,2BAAiB,EAAElD,MAAM,CAAC5S,UAAP,CAAkB+V,SAAlB,KAAgC,IADlC;AAEjBC,0BAAgB,EAAEpD,MAAM,CAAC5S,UAAP,CAAkBiW,QAAlB,KAA+B,IAFhC;AAGjBC,yBAAe,EAAEtD,MAAM,CAACyB,KAAP,KAAiB;AAHjB,SAAnB;AAKD;;AAED,UAAIxB,MAAJ,EAAY;AACV,aAAKsD,UAAL,GAAkBC,6EAAS,CAACC,QAAV,CAChB,KAAKF,UADW,EAEhBG,wEAAO,CAACC,KAAR,CAAc,GAAd,CAFgB,EAGhB,YAAM;AACJ,eAAI,CAAC9O,IAAL,CAAU,aAAV;AACD,SALe,CAAlB;AAOD;AACF;;;+CAE0B5D,I,EAAM9D,Q,EAAU;AACzC,UAAIA,QAAQ,CAACC,UAAT,CAAoBwW,gBAAxB,EAA0C;AACxC,eAAOzW,QAAQ,CAACC,UAAT,CAAoBwW,gBAA3B;AACD;;AACD,UAAI3S,IAAI,CAACC,MAAL,CAAY2S,WAAZ,CAAwBC,WAAxB,CAAoC5W,OAApC,CAA4C,GAA5C,MAAqD,CAAC,CAA1D,EAA6D;AAC3D,eAAO,CAAP;AACD;;AACD,aAAO,GAAP;AACD;;;gDAE2BC,Q,EAAU;AACpC,aACE,KAAK4W,mBAAL,CAAyB5W,QAAzB,KACA,KAAK6W,wBAAL,CAA8B7W,QAA9B,CAFF;AAID;;;wCAEmBA,Q,EAAU;AAC5B,aACEa,wFAAe,CAACb,QAAD,EAAW,CAAX,CAAf,IACA,OAAOA,QAAQ,CAACC,UAAT,CAAoB0W,WAA3B,KAA2C,QAF7C;AAID;;;6CAEwB3W,Q,EAAU;AACjC,aACEa,wFAAe,CAACb,QAAD,EAAW,CAAX,CAAf,KACC,OAAOA,QAAQ,CAACC,UAAT,CAAoB6W,eAA3B,KAA+C,QAA/C,IACC,OAAO9W,QAAQ,CAACC,UAAT,CAAoB8W,gBAA3B,KAAgD,QAFlD,CADF;AAKD;;;qCAEgB/W,Q,EAAU;AACzB,aAAOa,wFAAe,CAACb,QAAD,EAAW,CAAX,CAAtB;AACD;;;oCAEeA,Q,EAAU;AACxB,aAAOa,wFAAe,CAACb,QAAD,EAAW,EAAX,CAAtB;AACD;;;0CAEqBA,Q,EAAU;AAC9B,aAAOa,wFAAe,CAACb,QAAD,EAAW,GAAX,CAAtB;AACD;;;sCAEiBA,Q,EAAU;AAC1B,aAAOa,wFAAe,CAACb,QAAD,EAAW,GAAX,CAAtB;AACD;;;qCAEgBA,Q,EAAU;AACzB,aAAOa,wFAAe,CAACb,QAAD,EAAW,IAAX,CAAtB;AACD;;;oCAEeA,Q,EAAU;AACxB,aAAOa,wFAAe,CAACb,QAAD,EAAW,IAAX,CAAtB;AACD;;;+BAEUA,Q,EAAU;AACnB,aAAOa,wFAAe,CAACb,QAAD,EAAW,IAAX,CAAtB;AACD;;;sCAEiBA,Q,EAAU;AAC1B,UAAMgX,kBAAkB,GAAG;AACzB,WAAG,wBADsB;AAEzB,WAAG,6BAFsB;AAGzB,WAAG,4BAHsB;AAIzB,WAAG,qBAJsB;AAKzB,YAAI,0BALqB;AAMzB,YAAI,yBANqB;AAOzB,YAAI,cAPqB;AAQzB,aAAK,oBARoB;AASzB,aAAK,eAToB;AAUzB,aAAK,gBAVoB;AAWzB,cAAM,eAXmB;AAYzB,cAAM,cAZmB;AAazB,cAAM;AAbmB,OAA3B;AAgBA,UAAIC,OAAO,GAAG,CACZC,qFAAmB,CAAClX,QAAD,EAAW,CAC5B,qBAD4B,EAE5B,kBAF4B,CAAX,CADP,EAKZM,mFAAiB,CAACN,QAAD,EAAWgX,kBAAX,CALL,CAAd;AAQAC,aAAO,CAACE,IAAR,CAAa,mBAAb;AAEA,aAAOF,OAAO,CAAChW,IAAR,CAAa,GAAb,CAAP;AACD;;;6CAEwBkH,E,EAAI;AAC3B,UAAMwO,WAAW,GAAGxO,EAAE,CAACyB,MAAH,CAAUjI,KAA9B;AACA,UAAIgV,WAAW,KAAK,KAAK3W,QAAL,CAAcC,UAAd,CAAyB0W,WAA7C,EAA0D;AAC1D,WAAKS,iBAAL,CAAuB,iBAAvB,EAA0C;AAAET,mBAAW,EAAEA;AAAf,OAA1C;AACD;;;gDAE2BxO,E,EAAI;AAC9B,UAAMkP,aAAa,GAAGlP,EAAE,CAACsN,aAAH,CAAiB9T,KAAvC;AACA,UAAI0V,aAAa,KAAK,KAAKrX,QAAL,CAAcC,UAAd,CAAyB6W,eAA/C,EAAgE;AAChE,WAAKM,iBAAL,CAAuB,iBAAvB,EAA0C;AACxCN,uBAAe,EAAEO,aADuB;AAExCN,wBAAgB,EAAE,KAAK/W,QAAL,CAAcC,UAAd,CAAyB8W;AAFH,OAA1C;AAID;;;iDAE4B5O,E,EAAI;AAC/B,UAAMmP,cAAc,GAAGnP,EAAE,CAACsN,aAAH,CAAiB9T,KAAxC;AACA,UAAI2V,cAAc,KAAK,KAAKtX,QAAL,CAAcC,UAAd,CAAyB8W,gBAAhD,EAAkE;AAClE,WAAKK,iBAAL,CAAuB,iBAAvB,EAA0C;AACxCN,uBAAe,EAAE,KAAK9W,QAAL,CAAcC,UAAd,CAAyB6W,eADF;AAExCC,wBAAgB,EAAEO;AAFsB,OAA1C;AAID;;;gDAE2BnP,E,EAAI;AAC9B,UAAMoP,QAAQ,GAAGpP,EAAE,CAACyB,MAAH,CAAUjI,KAA3B;AACA,UAAI4V,QAAQ,KAAK,KAAKvX,QAAL,CAAcC,UAAd,CAAyBsX,QAA1C,EAAoD;AACpD,WAAKH,iBAAL,CAAuB,cAAvB,EAAuC;AAAEG,gBAAQ,EAAEA;AAAZ,OAAvC;AACD;;;sCAEiBpP,E,EAAI;AACpB,UAAM2K,MAAM,GAAG,KAAK9S,QAAL,CAAcC,UAAd,CAAyB+V,SAAzB,KAAuC,IAAtD;AACA,UAAMnD,MAAM,GAAG1K,EAAE,CAACyB,MAAH,CAAU+L,OAAzB;AACA,UAAI7C,MAAM,KAAKD,MAAf,EAAuB;AACvB,WAAKuE,iBAAL,CAAuB,eAAvB,EAAwC;AAAEpB,iBAAS,EAAEnD;AAAb,OAAxC;AACD;;;qCAEgB1K,E,EAAI;AACnB,UAAM2K,MAAM,GAAG,KAAK9S,QAAL,CAAcC,UAAd,CAAyBiW,QAAzB,KAAsC,IAArD;AACA,UAAMrD,MAAM,GAAG1K,EAAE,CAACyB,MAAH,CAAU+L,OAAzB;AACA,UAAI7C,MAAM,KAAKD,MAAf,EAAuB;AACvB,WAAKuE,iBAAL,CAAuB,cAAvB,EAAuC;AAAElB,gBAAQ,EAAErD;AAAZ,OAAvC;AACD;;;oCAEe1K,E,EAAI;AAClB,UAAM2K,MAAM,GAAG,KAAK9S,QAAL,CAAcsU,KAAd,KAAwB,KAAvC;AACA,UAAMzB,MAAM,GAAG1K,EAAE,CAACyB,MAAH,CAAU+L,OAAzB;AACA,UAAI7C,MAAM,KAAKD,MAAf,EAAuB;AACvB,WAAKuE,iBAAL,CAAuBvE,MAAM,GAAG,SAAH,GAAe,UAA5C,EAAwD,EAAxD;AACD;;;yCAEoB1K,E,EAAI;AACvB,UAAM2K,MAAM,GAAG,KAAK9S,QAAL,CAAcC,UAAd,CAAyBuX,QAAxC;AACA,UAAM3E,MAAM,GAAG1K,EAAE,CAACqK,MAAH,CAAU7Q,KAAzB;AACA,UAAI,CAACkR,MAAD,IAAWC,MAAM,KAAKD,MAA1B,EAAkC;AAClC,WAAKuE,iBAAL,CAAuB,cAAvB,EAAuC;AAAEI,gBAAQ,EAAE3E;AAAZ,OAAvC;AACD;;;+CAE0B1K,E,EAAI;AAC7B,UAAM2K,MAAM,GAAG,KAAK9S,QAAL,CAAcC,UAAd,CAAyBwX,cAAxC;AACA,UAAM5E,MAAM,GAAG1K,EAAE,CAACqK,MAAH,CAAU7Q,KAAzB;AACA,UAAI,CAACkR,MAAD,IAAWC,MAAM,KAAKD,MAA1B,EAAkC;AAClC,WAAKuE,iBAAL,CAAuB,oBAAvB,EAA6C;AAC3CK,sBAAc,EAAE5E;AAD2B,OAA7C;AAGD;;;2CAEsB1K,E,EAAI;AACzB,UAAM2K,MAAM,GAAG,KAAK9S,QAAL,CAAcC,UAAd,CAAyByX,UAAxC;AACA,UAAM7E,MAAM,GAAG1K,EAAE,CAACqK,MAAH,CAAU7Q,KAAzB;AACA,UAAI,CAACkR,MAAD,IAAWC,MAAM,KAAKD,MAA1B,EAAkC;AAClC,WAAKuE,iBAAL,CAAuB,gBAAvB,EAAyC;AAAEM,kBAAU,EAAE7E;AAAd,OAAzC;AACD;;;sCAEiB+B,O,EAASC,I,EAAM;AAAA;;AAC/B;AACA;AACA;AACA;;AACA;AACAA,UAAI,CAACzU,SAAL,GAAiB,KAAKJ,QAAL,CAAcI,SAA/B;AACA;;AACA,WAAK0D,IAAL,CAAUgR,WAAV,CAAsB,SAAtB,EAAiCF,OAAjC,EAA0CC,IAA1C,EAAgDE,IAAhD,CAAqD,YAAM;AACzD,cAAI,CAAC3R,eAAL,CAAqB,MAAI,CAACpD,QAA1B;AACD,OAFD;AAGD;;;2CAEsB2X,Q,EAAUC,I,EAAM;AACrC,aAAOD,QAAQ,yBAAkBC,IAAlB,EAAR,IAAqCA,IAA5C;AACD;;;qCAEgBD,Q,EAAUC,I,EAAM;AAC/B,aAAOD,QAAQ,6CAAsCC,IAAtC,EAAR,IAAyDA,IAAhE;AACD;;;yCAEoB9T,I,EAAM;AACzB,aAAO+T,qFAAmB,CAAC/T,IAAD,CAA1B;AACD;;;wBAvfqB;AACpB,aAAO7B,gFAAP;AA8QD;;;wBAEuB;AACtB,aAAO;AACL6B,YAAI,EAAE;AACJ5B,cAAI,EAAEzB;AADF,SADD;AAKLT,gBAAQ,EAAE;AACRkC,cAAI,EAAEzB,MADE;AAERkH,kBAAQ,EAAE;AAFF,SALL;AAULoO,yBAAiB,EAAEpT,OAVd;AAWLsT,wBAAgB,EAAEtT,OAXb;AAYLwT,uBAAe,EAAExT,OAZZ;AAcLmV,WAAG,EAAE;AACH5V,cAAI,EAAEC,MADH;AAEHR,eAAK,EAAE,KAFJ;AAGHS,kBAAQ,EAAE;AAHP;AAdA,OAAP;AAoBD;;;;EAvS2B4S,uEAAa,CAACnN,yEAAW,CAACxF,+EAAD,CAAZ,C;;AA2f3CC,cAAc,CAACC,MAAf,CAAsB,mBAAtB,EAA2CuT,eAA3C,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACphBA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;;IAEMiC,oB;;;;;;;;;;;;;0CA6GkB/X,Q,EAAU;AAC9B,aAAOA,QAAQ,CAACsU,KAAT,KAAmB,WAA1B;AACD;;;iCAEYnM,E,EAAI;AACf,UAAI6P,EAAE,GAAG7P,EAAE,CAACyB,MAAZ;AACA,WAAKqO,UAAL,CAAgBD,EAAE,CAACE,IAAnB,IAA2BF,EAAE,CAACrW,KAA9B;AACD;;;oCAEe;AACd,UAAIkT,IAAI,GAAG;AACTsD,oBAAY,EAAE,KAAKnY,QAAL,CAAcC,UAAd,CAAyBkY,YAD9B;AAETC,cAAM,EAAE,KAAKH;AAFJ,OAAX;AAKA,WAAKI,aAAL,GAAqB,IAArB;AAEA,WAAKvU,IAAL,CAAUgR,WAAV,CAAsB,cAAtB,EAAsC,WAAtC,EAAmDD,IAAnD,EAAyDE,IAAzD,CACE,YAAW;AACT,aAAKsD,aAAL,GAAqB,KAArB;AACD,OAFD,CAEEC,IAFF,CAEO,IAFP,CADF,EAIE,YAAW;AACT,aAAKD,aAAL,GAAqB,KAArB;AACD,OAFD,CAEEC,IAFF,CAEO,IAFP,CAJF;AAQD;;;wBArIqB;AACpB,aAAOrW,gFAAP;AA2ED;;;wBAEuB;AACtB,aAAO;AACLjC,gBAAQ,EAAE;AACRkC,cAAI,EAAEzB;AADE,SADL;AAKL8X,cAAM,EAAE;AACNrW,cAAI,EAAEC,MADA;AAENR,eAAK,EAAE;AAFD,SALH;AAUL6W,sBAAc,EAAE;AACdtW,cAAI,EAAES,OADQ;AAEdP,kBAAQ,EAAE;AAFI,SAVX;AAeLiW,qBAAa,EAAE;AACbnW,cAAI,EAAES,OADO;AAEbhB,eAAK,EAAE;AAFM,SAfV;AAoBLsW,kBAAU,EAAE;AACV/V,cAAI,EAAEzB,MADI;AAEVkB,eAAK,EAAE,iBAAW;AAChB,mBAAO,EAAP;AACD;AAJS;AApBP,OAAP;AA2BD;;;;EA3GgCU,+E;;AAyInCC,cAAc,CAACC,MAAf,CAAsB,wBAAtB,EAAgDwV,oBAAhD,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACnJA;AAOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;;IAGMU,e;;;;;;;;;;;;;;;;;;;;;;;;;;;;;mCAY2B;AAC7B,WAAK3M,KAAL,CAAW4M,QAAX,GAAsB,UAAtB;AACA,WAAK5M,KAAL,CAAW6M,OAAX,GAAqB,OAArB;AACD,K,CAED;;;;2BACiBxV,Y,EAAoC;AACnD,kFAAaA,YAAb;;AACA,UAAMnD,QAAQ,GAAG,KAAKA,QAAtB;AACA,UAAM8D,IAAI,GAAG,KAAKA,IAAlB;;AAEA,UAAI,CAAC9D,QAAD,IAAa,CAAC8D,IAAlB,EAAwB;AACtB,YAAI,KAAK8U,SAAT,EAAoB;AAClB,eAAKC,cAAL,GAAsB,KAAKD,SAA3B,CADkB,CAElB;;AACA,eAAKE,WAAL,CAAiB,KAAKF,SAAtB;AACD;;AACD;AACD;;AAED,UAAI,KAAKC,cAAT,EAAyB;AACvB,aAAK/H,WAAL,CAAiB,KAAK+H,cAAtB;AACA,aAAKA,cAAL,GAAsB1Y,SAAtB;AACD;;AAED,UAAM4Y,YAAY,GAChB/Y,QAAQ,CAACC,UAAT,IAAuB,yBAAyBD,QAAQ,CAACC,UAAzD,GACID,QAAQ,CAACC,UAAT,CAAoB+Y,mBADxB,GAEI,eAAeC,oFAAiB,CAACjZ,QAAD,CAHtC;AAKAkZ,0FAAqB,CAAC,IAAD,EAAOH,YAAY,CAACI,WAAb,EAAP,EAAmC;AACtDrV,YAAI,EAAJA,IADsD;AAEtD9D,gBAAQ,EAARA;AAFsD,OAAnC,CAArB;AAID;;;wBAzC6C;AAC5C,aAAO;AACL8D,YAAI,EAAE,EADD;AAEL9D,gBAAQ,EAAE;AAFL,OAAP;AAID;;;;EAV2BoZ,2D;;AAiD9B9W,cAAc,CAACC,MAAf,CAAsB,mBAAtB,EAA2CkW,eAA3C,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACjFA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AAEA;AAEA,IAAMY,mBAAmB,GAAG;AAC1B,OAAK;AADqB,CAA5B;;IAGMC,a;;;;;;;;;;;;;qCAqEaxV,I,EAAM9D,Q,EAAU;AAC/B,aAAO,IAAIuZ,yDAAJ,CAAgBzV,IAAhB,EAAsB9D,QAAtB,CAAP;AACD;;;oCAEe6S,M,EAAQ;AACtB,UAAIA,MAAJ,EAAY;AACV,aAAKE,aAAL,CAAmB;AACjByG,kCAAwB,EAAE3G,MAAM,CAAC5S,UAAP,CAAkBwZ,gBAD3B;AAEjBC,sCAA4B,EAAE7G,MAAM,CAAC5S,UAAP,CAAkB0Z;AAF/B,SAAnB;AAID;AACF;;;sCAEiB3Z,Q,EAAU;AAC1B,UAAIiX,OAAO,GAAG,CACZC,oFAAmB,CAAClX,QAAD,EAAW,CAC5B,kBAD4B,EAE5B,uBAF4B,CAAX,CADP,EAKZM,kFAAiB,CAACN,QAAD,EAAWqZ,mBAAX,CALL,CAAd;AAOA,aAAOpC,OAAO,CAAChW,IAAR,CAAa,GAAb,CAAP;AACD;;;+CAE0BkH,E,EAAI;AAC7B,WAAKyR,SAAL,CAAeC,gBAAf,CAAgC1R,EAAE,CAACyB,MAAH,CAAUjI,KAA1C;AACD;;;mDAE8BwG,E,EAAI;AACjC,WAAKyR,SAAL,CAAeE,oBAAf,CAAoC3R,EAAE,CAACyB,MAAH,CAAUjI,KAA9C;AACD;;;wBAlGqB;AACpB,aAAOM,gFAAP;AAiDD;;;wBAEuB;AACtB,aAAO;AACL6B,YAAI,EAAErD,MADD;AAELT,gBAAQ,EAAE;AACRkC,cAAI,EAAEzB,MADE;AAERkH,kBAAQ,EAAE;AAFF,SAFL;AAMLiS,iBAAS,EAAE;AACT1X,cAAI,EAAEzB,MADG;AAET2B,kBAAQ,EAAE;AAFD,SANN;AAULoX,gCAAwB,EAAE1Y,MAVrB;AAWL4Y,oCAA4B,EAAE5Y;AAXzB,OAAP;AAaD;;;;EAnEyBkU,sEAAa,CAAC3S,+EAAD,C;;AAsGzCC,cAAc,CAACC,MAAf,CAAsB,iBAAtB,EAAyC+W,aAAzC,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACvHA;AACA;AAEA;;IAEMS,e;;;;;;;;;;;;;wBACkB;AACpB,aAAO9X,gFAAP;AAGD;;;wBAEuB;AACtB,aAAO;AACLjC,gBAAQ,EAAE;AACRkC,cAAI,EAAEzB;AADE;AADL,OAAP;AAKD;;;;EAb2B4B,+E;;AAgB9BC,cAAc,CAACC,MAAf,CAAsB,mBAAtB,EAA2CwX,eAA3C,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACrBA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AAEA;;;;IAGMC,W;;;;;;;;;;;;;oCAuGYnH,M,EAAQC,M,EAAQ;AAAA;;AAC9B,UAAID,MAAJ,EAAY;AACV,aAAKE,aAAL,CAAmB;AACjBkH,kCAAwB,EAAEpH,MAAM,CAAC5S,UAAP,CAAkBia;AAD3B,SAAnB;AAGD;;AAED,UAAIpH,MAAJ,EAAY;AACVrL,kBAAU,CAAC,YAAM;AACf,eAAI,CAACC,IAAL,CAAU,aAAV;AACD,SAFS,EAEP,GAFO,CAAV;AAGD;AACF;;;sCAEiB1H,Q,EAAU;AAC1B,aACE,mBACAkX,oFAAmB,CAAClX,QAAD,EAAW,CAAC,aAAD,EAAgB,YAAhB,EAA8B,WAA9B,CAAX,CAFrB;AAID;;;iCAEYmI,E,EAAI;AACf,UAAI2K,MAAM,GAAG,KAAK9S,QAAL,CAAcC,UAAd,CAAyBka,KAAtC;AACA,UAAItH,MAAM,GAAG1K,EAAE,CAACqK,MAAH,CAAU7Q,KAAvB;AAEA,UAAI,CAACkR,MAAD,IAAWC,MAAM,KAAKD,MAA1B,EAAkC;AAElC,WAAK/O,IAAL,CAAUgR,WAAV,CAAsB,KAAtB,EAA6B,SAA7B,EAAwC;AACtC1U,iBAAS,EAAE,KAAKJ,QAAL,CAAcI,SADa;AAEtC+Z,aAAK,EAAEtH;AAF+B,OAAxC;AAID;;;6CAEwB1K,E,EAAI;AAC3B,UAAI2K,MAAM,GAAG,KAAK9S,QAAL,CAAcC,UAAd,CAAyBia,WAAtC;AACA,UAAIrH,MAAM,GAAG1K,EAAE,CAACyB,MAAH,CAAU+L,OAAvB;AAEA,UAAI7C,MAAM,KAAKD,MAAf,EAAuB;AAEvB,WAAK/O,IAAL,CAAUgR,WAAV,CAAsB,KAAtB,EAA6B,WAA7B,EAA0C;AACxC1U,iBAAS,EAAE,KAAKJ,QAAL,CAAcI,SADe;AAExC8Z,mBAAW,EAAErH;AAF2B,OAA1C;AAID;;;sCAEiB;AAChB,WAAK/O,IAAL,CAAUgR,WAAV,CAAsB,KAAtB,EAA6B,eAA7B,EAA8C;AAC5C1U,iBAAS,EAAE,KAAKJ,QAAL,CAAcI,SADmB;AAE5CsR,iBAAS,EAAE;AAFiC,OAA9C;AAID;;;uCAEkB;AACjB,WAAK5N,IAAL,CAAUgR,WAAV,CAAsB,KAAtB,EAA6B,eAA7B,EAA8C;AAC5C1U,iBAAS,EAAE,KAAKJ,QAAL,CAAcI,SADmB;AAE5CsR,iBAAS,EAAE;AAFiC,OAA9C;AAID;;;0CAEqB1R,Q,EAAU;AAC9B,aAAOA,QAAQ,CAACC,UAAT,CAAoByR,SAApB,KAAkC,SAAzC;AACD;;;2CAEsB1R,Q,EAAU;AAC/B,aAAOA,QAAQ,CAACC,UAAT,CAAoByR,SAApB,KAAkC,SAAzC;AACD;;;wBAvKqB;AACpB,aAAOzP,gFAAP;AAkFD;;;wBAEuB;AACtB,aAAO;AACL6B,YAAI,EAAE;AACJ5B,cAAI,EAAEzB;AADF,SADD;AAKLT,gBAAQ,EAAE;AACRkC,cAAI,EAAEzB,MADE;AAERkH,kBAAQ,EAAE;AAFF,SALL;AAULsS,gCAAwB,EAAE;AACxB/X,cAAI,EAAES;AADkB;AAVrB,OAAP;AAcD;;;;EArGuBqS,uEAAa,CAACnN,yEAAW,CAACxF,+EAAD,CAAZ,C;;AA2KvCC,cAAc,CAACC,MAAf,CAAsB,eAAtB,EAAuCyX,WAAvC,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC7LA;AACA;AACA;AAEA;AAEA;AACA;;IAEMI,a;;;;;;;;;;;;;kCA8CUpa,Q,EAAU8D,I,EAAM;AAC5B,UAAI6O,MAAM,GAAG,EAAb;AACA,UAAI0H,MAAM,GAAGra,QAAQ,CAACC,UAAT,CAAoBG,SAApB,IAAiC,EAA9C;;AAEA,WAAK,IAAIka,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGD,MAAM,CAACxT,MAA3B,EAAmCyT,CAAC,EAApC,EAAwC;AACtC,YAAIhG,KAAK,GAAGxQ,IAAI,CAAC6O,MAAL,CAAY0H,MAAM,CAACC,CAAD,CAAlB,CAAZ;;AAEA,YAAIhG,KAAJ,EAAW;AACT3B,gBAAM,CAACwE,IAAP,CAAY7C,KAAZ;AACD;AACF;;AAED,aAAO3B,MAAP;AACD;;;kCAEa3S,Q,EAAU2S,M,EAAQ;AAC9B,UAAI4H,mBAAmB,GAAG,KAA1B;AACA,UAAIC,WAAW,GAAG,KAAlB;;AAEA,UAAI7H,MAAM,IAAIA,MAAM,CAAC9L,MAAP,GAAgB,CAA9B,EAAiC;AAC/B,YAAM4T,YAAY,GAAG9H,MAAM,CAAC+H,IAAP,CAAY,UAAClU,CAAD;AAAA,iBAAOA,CAAC,CAAC8N,KAAF,KAAY,IAAnB;AAAA,SAAZ,KAAwC3B,MAAM,CAAC,CAAD,CAAnE;AACA6H,mBAAW,GAAG9H,mFAAkB,CAAC+H,YAAD,CAAhC,CAF+B,CAI/B;AACA;;AACA,YAAID,WAAW,KAAK,OAApB,EAA6B;AAC3BD,6BAAmB,GAAG9Z,MAAM,CAACka,MAAP,CAAc,EAAd,EAAkBF,YAAlB,EAAgC;AACpDra,qBAAS,EAAEJ,QAAQ,CAACI,SADgC;AAEpDH,sBAAU,EAAEQ,MAAM,CAACka,MAAP,CAAc,EAAd,EAAkBF,YAAY,CAACxa,UAA/B;AAFwC,WAAhC,CAAtB;;AAKA,eAAK,IAAIqa,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG3H,MAAM,CAAC9L,MAA3B,EAAmCyT,CAAC,EAApC,EAAwC;AACtC,gBAAIE,WAAW,KAAK9H,mFAAkB,CAACC,MAAM,CAAC2H,CAAD,CAAP,CAAtC,EAAmD;AACjDC,iCAAmB,GAAG,KAAtB;AACA;AACD;AACF;AACF;AACF;;AAED,UAAI,CAACA,mBAAL,EAA0B;AACxB,YAAMvC,EAAE,GAAG4C,mFAAG,CAAC,KAAKzU,CAAL,CAAO0U,qBAAR,CAAd;;AACA,YAAI7C,EAAE,CAACY,SAAP,EAAkB;AAChBZ,YAAE,CAACc,WAAH,CAAed,EAAE,CAACY,SAAlB;AACD;AACF,OALD,MAKO;AACLM,2FAAqB,CACnB,KAAK/S,CAAL,CAAO0U,qBADY,EAEnB,eAAeL,WAAW,CAACrB,WAAZ,EAFI,EAGnB;AAAEnZ,kBAAQ,EAAEua,mBAAZ;AAAiCzW,cAAI,EAAE,KAAKA;AAA5C,SAHmB,CAArB;AAKD;AACF;;;wBAjGqB;AACpB,aAAO7B,gFAAP;AAqBD;;;wBAEuB;AACtB,aAAO;AACL6B,YAAI,EAAE;AACJ5B,cAAI,EAAEzB;AADF,SADD;AAKLT,gBAAQ,EAAE;AACRkC,cAAI,EAAEzB;AADE,SALL;AASLkS,cAAM,EAAE;AACNzQ,cAAI,EAAEN,KADA;AAENQ,kBAAQ,EAAE;AAFJ;AATH,OAAP;AAcD;;;wBAEsB;AACrB,aAAO,CAAC,iCAAD,CAAP;AACD;;;;EA5CyBC,+E;;AAqG5BC,cAAc,CAACC,MAAf,CAAsB,iBAAtB,EAAyC6X,aAAzC,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC9GA;AACA;AAEA;AACA;;IAEMU,oB;;;;;;;;;;;;;wBACkB;AACpB,aAAO7Y,gFAAP;AAeD;;;wBAEuB;AACtB,aAAO;AACL6B,YAAI,EAAErD,MADD;AAELT,gBAAQ,EAAES;AAFL,OAAP;AAID;;;;EAxBgC4B,+E;;AA0BnCC,cAAc,CAACC,MAAf,CAAsB,yBAAtB,EAAiDuY,oBAAjD,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AChCA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;;IAEMC,a;;;;;;;wBACkB;AACpB,aAAO9Y,gFAAP;AAuBD;;;AAED,2BAAc;AAAA;;AAAA;;AACZ;AACA,UAAK+Y,QAAL,GAAgB,KAAhB;AAFY;AAGb;;;;4BA8BO;AACN;;AACA,WAAKA,QAAL,GAAgB,IAAhB;AACD;AAED;;;;kCACchb,Q,EAAU;AACtB,UAAIA,QAAQ,CAACsU,KAAT,KAAmB,SAAvB,EAAkC;AAChC,eAAO,EAAP;AACD;;AACD,UAAI2G,WAAJ;;AACA,UAAIjb,QAAQ,CAACC,UAAT,CAAoBib,KAApB,GAA4B,EAAhC,EAAoC;AAClCD,mBAAW,GAAG,GAAd;AACD,OAFD,MAEO;AACLA,mBAAW,GAAG,EAAd;AACD;;AAED,UAAIE,SAAJ;;AACA,UAAInb,QAAQ,CAACC,UAAT,CAAoBmb,GAApB,GAA0B,EAA9B,EAAkC;AAChCD,iBAAS,GAAG,GAAZ;AACD,OAFD,MAEO;AACLA,iBAAS,GAAG,EAAZ;AACD;;AAED,aACEnb,QAAQ,CAACC,UAAT,CAAoBob,IAApB,GACA,GADA,GAEAJ,WAFA,GAGAjb,QAAQ,CAACC,UAAT,CAAoBib,KAHpB,GAIA,GAJA,GAKAC,SALA,GAMAnb,QAAQ,CAACC,UAAT,CAAoBmb,GAPtB;AASD;AAED;;;;;sCAEkB;AAChB;AACA,UAAI,CAAC,KAAKJ,QAAV,EAAoB;AAClB;AACD;;AAED,UAAIM,OAAO,GAAG,KAAd;AACA,UAAIC,YAAJ;AAEA,UAAMC,WAAW,GAAG;AAClBpb,iBAAS,EAAE,KAAKJ,QAAL,CAAcI;AADP,OAApB;;AAIA,UAAI,KAAKJ,QAAL,CAAcC,UAAd,CAAyBwb,QAA7B,EAAuC;AACrCH,eAAO,IACLlN,QAAQ,CAAC,KAAKsN,cAAN,CAAR,KAAkC,KAAK1b,QAAL,CAAcC,UAAd,CAAyB0b,MAD7D;AAEAL,eAAO,IAAIlN,QAAQ,CAAC,KAAKwN,YAAN,CAAR,KAAgC,KAAK5b,QAAL,CAAcC,UAAd,CAAyB4b,IAApE;;AACA,YAAI,KAAKH,cAAL,GAAsB,EAA1B,EAA8B;AAC5BH,sBAAY,GAAG,GAAf;AACD,SAFD,MAEO;AACLA,sBAAY,GAAG,EAAf;AACD;;AACD,YAAIO,OAAO,GACT,KAAKF,YAAL,GAAoB,GAApB,GAA0BL,YAA1B,GAAyC,KAAKG,cADhD;AAEAF,mBAAW,CAACO,IAAZ,GAAmBD,OAAnB;AACD;;AAED,UAAI,KAAK9b,QAAL,CAAcC,UAAd,CAAyB+b,QAA7B,EAAuC;AACrC,YAAI,KAAKC,YAAL,CAAkBpV,MAAlB,KAA6B,CAAjC,EAAoC;AAClC,iBADkC,CAC1B;AACT;;AAED,YAAMqV,YAAY,GAAG,IAAI9U,IAAJ,CAAS,KAAK6U,YAAd,CAArB;AACA,YAAME,YAAY,GAAG,IAAI/U,IAAJ,CACnB,KAAKpH,QAAL,CAAcC,UAAd,CAAyBob,IADN,EAEnB,KAAKrb,QAAL,CAAcC,UAAd,CAAyBib,KAAzB,GAAiC,CAFd,EAGnB,KAAKlb,QAAL,CAAcC,UAAd,CAAyBmb,GAHN,CAArB;AAMAE,eAAO,IAAIa,YAAY,KAAKD,YAA5B;AAEAV,mBAAW,CAACY,IAAZ,GAAmB,KAAKH,YAAxB;AACD;;AAED,UAAIX,OAAJ,EAAa;AACX,aAAKxX,IAAL,CAAUgR,WAAV,CAAsB,gBAAtB,EAAwC,cAAxC,EAAwD0G,WAAxD;AACD;AACF;;;oCAEe3I,M,EAAQ;AACtB;AACA,WAAKmI,QAAL,GAAgB,KAAhB;;AAEA,UAAInI,MAAM,CAAC5S,UAAP,CAAkBwb,QAAtB,EAAgC;AAC9B,aAAKG,YAAL,GAAoB/I,MAAM,CAAC5S,UAAP,CAAkB4b,IAAtC;AACA,aAAKH,cAAL,GAAsB7I,MAAM,CAAC5S,UAAP,CAAkB0b,MAAxC;AACD;;AAED,UAAI9I,MAAM,CAAC5S,UAAP,CAAkB+b,QAAtB,EAAgC;AAC9B,aAAKC,YAAL,GAAoB,KAAKI,aAAL,CAAmBxJ,MAAnB,CAApB;AACD;;AAED,WAAKmI,QAAL,GAAgB,IAAhB;AACD;;;iCAEYhb,Q,EAAU;AACrB,aAAOA,QAAQ,CAACC,UAAT,CAAoB+b,QAA3B;AACD;;;iCAEYhc,Q,EAAU;AACrB,aAAOA,QAAQ,CAACC,UAAT,CAAoBwb,QAA3B;AACD;;;sCAEiBzb,Q,EAAU;AAC1B,aACE,8BACAkX,oFAAmB,CAAClX,QAAD,EAAW,CAAC,UAAD,EAAa,UAAb,CAAX,CAFrB;AAID;;;wBA/IuB;AACtB,aAAO;AACL8D,YAAI,EAAE;AACJ5B,cAAI,EAAEzB;AADF,SADD;AAKLT,gBAAQ,EAAE;AACRkC,cAAI,EAAEzB,MADE;AAERkH,kBAAQ,EAAE;AAFF,SALL;AAULsU,oBAAY,EAAE;AACZ/Z,cAAI,EAAEC,MADM;AAEZwF,kBAAQ,EAAE;AAFE,SAVT;AAeLiU,oBAAY,EAAE;AACZ1Z,cAAI,EAAEpB,MADM;AAEZ6G,kBAAQ,EAAE;AAFE,SAfT;AAoBL+T,sBAAc,EAAE;AACdxZ,cAAI,EAAEpB,MADQ;AAEd6G,kBAAQ,EAAE;AAFI;AApBX,OAAP;AAyBD;;;;EA1DyBtF,+E;;AAkL5BC,cAAc,CAACC,MAAf,CAAsB,0BAAtB,EAAkDwY,aAAlD,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC7LA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA,IAAM1B,mBAAmB,GAAG;AAC1B,KAAG,gBADuB;AAE1B,KAAG,gBAFuB;AAG1B,KAAG,iBAHuB;AAI1B,MAAI,WAJsB;AAK1B,OAAK;AALqB,CAA5B;AAOA;;;;IAGMiD,a;;;;;;;;;;;;;oCAiOYzJ,M,EAAQC,M,EAAQ;AAAA;;AAC9B,UAAMyB,KAAK,GAAG;AACZgI,6BAAqB,EAAE;AADX,OAAd;;AAIA,UAAI1J,MAAM,IAAIA,MAAM,CAACyB,KAAP,KAAiB,IAA/B,EAAqC;AACnCC,aAAK,CAACgI,qBAAN,GAA8B1J,MAAM,CAAC5S,UAAP,CAAkBuc,UAAhD;AACAjI,aAAK,CAACkI,aAAN,GAAsB5J,MAAM,CAAC5S,UAAP,CAAkByc,UAAxC;AACAnI,aAAK,CAACoI,aAAN,GAAsB9J,MAAM,CAAC5S,UAAP,CAAkB2c,WAAxC;;AACA,YAAI/J,MAAM,CAAC5S,UAAP,CAAkB4c,QAAtB,EAAgC;AAC9BtI,eAAK,CAACuI,gBAAN,GAAyB;AACvB5R,aAAC,EAAE2H,MAAM,CAAC5S,UAAP,CAAkB4c,QAAlB,CAA2B,CAA3B,CADoB;AAEvBrW,aAAC,EAAEqM,MAAM,CAAC5S,UAAP,CAAkB4c,QAAlB,CAA2B,CAA3B,IAAgC;AAFZ,WAAzB;AAID;AACF;;AAED,WAAK9J,aAAL,CAAmBwB,KAAnB;;AAEA,UAAIzB,MAAJ,EAAY;AACVrL,kBAAU,CAAC,YAAM;AACf,eAAI,CAACC,IAAL,CAAU,aAAV;AACD,SAFS,EAEP,GAFO,CAAV;AAGD;AACF;;;sCAEiB1H,Q,EAAU;AAC1B,UAAMiX,OAAO,GAAG,CAAC3W,kFAAiB,CAACN,QAAD,EAAWqZ,mBAAX,CAAlB,CAAhB;;AACA,UAAIrZ,QAAQ,IAAIA,QAAQ,CAACsU,KAAT,KAAmB,IAAnC,EAAyC;AACvC2C,eAAO,CAACE,IAAR,CAAa,OAAb;AACD;;AACD,UAAInX,QAAQ,IAAIA,QAAQ,CAACsU,KAAT,KAAmB,aAAnC,EAAkD;AAChD2C,eAAO,CAACE,IAAR,CAAa,gBAAb;AACD;;AACD,aAAOF,OAAO,CAAChW,IAAR,CAAa,GAAb,CAAP;AACD;;;kCAEakH,E,EAAI;AAChB,UAAI2K,MAAM,GAAG,KAAK9S,QAAL,CAAcC,UAAd,CAAyB8c,MAAtC;AACA,UAAIlK,MAAM,GAAG1K,EAAE,CAACqK,MAAH,CAAU7Q,KAAvB;AAEA,UAAI,CAACkR,MAAD,IAAWC,MAAM,KAAKD,MAA1B,EAAkC;AAElC,WAAK/O,IAAL,CAAUgR,WAAV,CAAsB,OAAtB,EAA+B,SAA/B,EAA0C;AACxC1U,iBAAS,EAAE,KAAKJ,QAAL,CAAcI,SADe;AAExC2c,cAAM,EAAElK;AAFgC,OAA1C;AAID;;;4CAEuB1K,E,EAAI;AAC1B,UAAI6U,GAAG,GAAG5O,QAAQ,CAACjG,EAAE,CAACyB,MAAH,CAAUjI,KAAX,EAAkB,EAAlB,CAAlB;AAEA,UAAIsb,KAAK,CAACD,GAAD,CAAT,EAAgB;AAEhB,WAAKlZ,IAAL,CAAUgR,WAAV,CAAsB,OAAtB,EAA+B,SAA/B,EAA0C;AACxC1U,iBAAS,EAAE,KAAKJ,QAAL,CAAcI,SADe;AAExCoc,kBAAU,EAAEQ;AAF4B,OAA1C;AAID;;;oCAEe7U,E,EAAI;AAClB,UAAI+U,EAAE,GAAG9O,QAAQ,CAACjG,EAAE,CAACyB,MAAH,CAAUjI,KAAX,EAAkB,EAAlB,CAAjB;AAEA,UAAIsb,KAAK,CAACC,EAAD,CAAT,EAAe;AAEf,WAAKpZ,IAAL,CAAUgR,WAAV,CAAsB,OAAtB,EAA+B,SAA/B,EAA0C;AACxC1U,iBAAS,EAAE,KAAKJ,QAAL,CAAcI,SADe;AAExCsc,kBAAU,EAAEQ;AAF4B,OAA1C;AAID;;;oCAEe/U,E,EAAI;AAClB,UAAIgV,EAAE,GAAG/O,QAAQ,CAACjG,EAAE,CAACyB,MAAH,CAAUjI,KAAX,EAAkB,EAAlB,CAAjB;AAEA,UAAIsb,KAAK,CAACE,EAAD,CAAT,EAAe;AAEf,WAAKrZ,IAAL,CAAUgR,WAAV,CAAsB,OAAtB,EAA+B,SAA/B,EAA0C;AACxC1U,iBAAS,EAAE,KAAKJ,QAAL,CAAcI,SADe;AAExCwc,mBAAW,EAAEO;AAF2B,OAA1C;AAID;;;mCAEc;AACb,UAAI,KAAKzQ,WAAL,KAAqB,EAArB,IAA2B,KAAKI,kBAAL,KAA4B,CAA3D,EAA8D;AAC5D,aAAKiG,aAAL,CAAmB;AAAErG,qBAAW,EAAE,CAAf;AAAkBI,4BAAkB,EAAE;AAAtC,SAAnB;AACD,OAFD,MAEO;AACL,aAAKiG,aAAL,CAAmB;AAAErG,qBAAW,EAAE,EAAf;AAAmBI,4BAAkB,EAAE;AAAvC,SAAnB;AACD;AACF;;;uCAEkBhJ,I,EAAMjE,Q,EAAUkM,K,EAAO;AACxCjI,UAAI,CAACgR,WAAL,CAAiB,OAAjB,EAA0B,SAA1B,EAAqC;AACnC1U,iBAAS,EAAEP,QADwB;AAEnCgd,gBAAQ,EAAE,CAAC9Q,KAAK,CAACb,CAAP,EAAUa,KAAK,CAACvF,CAAN,GAAU,GAApB;AAFyB,OAArC;AAID;AAED;;;;;;;gCAIY2B,E,EAAI;AACd,WAAKiV,kBAAL,CAAwB,KAAKtZ,IAA7B,EAAmC,KAAK9D,QAAL,CAAcI,SAAjD,EAA4D+H,EAAE,CAACqK,MAAH,CAAUnI,EAAtE;AACD;;;wBAvUqB;AACpB,aAAOpI,gFAAP;AAmLD;;;wBAEuB;AACtB,aAAO;AACL6B,YAAI,EAAE;AACJ5B,cAAI,EAAEzB;AADF,SADD;AAKLT,gBAAQ,EAAE;AACRkC,cAAI,EAAEzB,MADE;AAERkH,kBAAQ,EAAE;AAFF,SALL;AAUL4U,6BAAqB,EAAE;AACrBra,cAAI,EAAEpB,MADe;AAErBa,eAAK,EAAE;AAFc,SAVlB;AAeL8a,qBAAa,EAAE;AACbva,cAAI,EAAEpB,MADO;AAEba,eAAK,EAAE;AAFM,SAfV;AAoBLgb,qBAAa,EAAE;AACbza,cAAI,EAAEpB,MADO;AAEba,eAAK,EAAE;AAFM,SApBV;AAyBL+K,mBAAW,EAAE;AACXxK,cAAI,EAAEpB,MADK;AAEXa,eAAK,EAAE;AAFI,SAzBR;AA8BLmL,0BAAkB,EAAE;AAClB5K,cAAI,EAAEpB,MADY;AAElBa,eAAK,EAAE;AAFW,SA9Bf;AAmCLmb,wBAAgB,EAAE;AAChB5a,cAAI,EAAEzB;AADU;AAnCb,OAAP;AAuCD;;;;EA/NyBuU,uEAAa,CAACnN,yEAAW,CAACxF,+EAAD,CAAZ,C;;AA2UzCC,cAAc,CAACC,MAAf,CAAsB,iBAAtB,EAAyC+Z,aAAzC,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACpWA;AACA;AACA;AACA;AAEA;AAEA;AAEA;;;;IAGMe,Y;;;;;;;;;;;;;oCAmDYxK,M,EAAQ;AACtB,UAAIA,MAAJ,EAAY;AACV,aAAKyK,QAAL,GAAgBzK,MAAM,CAACyB,KAAP,KAAiB,QAAjC;AACD;AACF;;;gCAEWnM,E,EAAI;AACd,UAAMyM,OAAO,GAAGzM,EAAE,CAACyB,MAAH,CAAU+K,YAAV,CAAuB,cAAvB,CAAhB;AACA,UAAME,IAAI,GAAG;AACXzU,iBAAS,EAAE,KAAKJ,QAAL,CAAcI,SADd;AAEXsU,YAAI,EAAE,KAAK6I;AAFA,OAAb;AAIA,WAAKzZ,IAAL,CAAUgR,WAAV,CAAsB,MAAtB,EAA8BF,OAA9B,EAAuCC,IAAvC;AACD;;;wBA/DqB;AACpB,aAAO5S,gFAAP;AAgCD;;;wBAEuB;AACtB,aAAO;AACL6B,YAAI,EAAErD,MADD;AAELT,gBAAQ,EAAE;AACRkC,cAAI,EAAEzB,MADE;AAERkH,kBAAQ,EAAE;AAFF,SAFL;AAML4V,mBAAW,EAAE;AACXrb,cAAI,EAAEC,MADK;AAEXR,eAAK,EAAE;AAFI,SANR;AAUL2b,gBAAQ,EAAE3a;AAVL,OAAP;AAYD;;;;EAjDwBqS,sEAAa,CAAC3S,+EAAD,C;;AAmExCC,cAAc,CAACC,MAAf,CAAsB,gBAAtB,EAAwC8a,YAAxC,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC/EA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;;;;;IAIMG,mB;;;;;;;;;;;;;qCA2Na1Z,I,EAAM9D,Q,EAAU;AAC/B,aAAO,IAAIyd,qEAAJ,CAA0B3Z,IAA1B,EAAgC9D,QAAhC,CAAP;AACD;;;qCAEgB6S,M,EAAQC,M,EAAQ;AAAA;;AAC/B,UAAIA,MAAJ,EAAY;AACVrL,kBAAU,CAAC,YAAM;AACf,eAAI,CAACC,IAAL,CAAU,aAAV;AACD,SAFS,EAEP,GAFO,CAAV;AAGD;AACF;;;sCAEiB1H,Q,EAAU;AAC1B,aAAOkX,qFAAmB,CAAClX,QAAD,EAAW,CAAC,cAAD,CAAX,CAA1B;AACD;;;0CAEqB0d,S,EAAW;AAC/B,aAAOA,SAAS,CAACC,OAAV,GAAoB,iBAApB,GAAwC,kBAA/C;AACD;;;6CAEwBD,S,EAAW;AAClC,aAAO,CAACA,SAAS,CAACE,qBAAX,IAAoCF,SAAS,CAACG,KAArD;AACD;;;gDAE2BH,S,EAAW;AACrC,aAAO,CAACA,SAAS,CAACG,KAAX,IAAoBH,SAAS,CAACI,eAArC;AACD;;;+CAE0BJ,S,EAAW;AACpC,UAAIA,SAAS,CAACK,SAAd,EAAyB;AACvB,eAAOL,SAAS,CAACM,aAAV,GAA0B,YAA1B,GAAyC,WAAhD;AACD;;AACD,UAAIN,SAAS,CAACI,eAAV,IAA6BJ,SAAS,CAACG,KAAvC,IAAgDH,SAAS,CAACO,MAA9D,EAAsE;AACpE,YACEP,SAAS,CAACI,eAAV,IACAJ,SAAS,CAACM,aADV,IAEA,CAACN,SAAS,CAACQ,QAHb,EAIE;AACA,iBAAO,iBAAP;AACD;;AACD,eAAOR,SAAS,CAACS,YAAV,GAAyB,WAAzB,GAAuC,IAA9C;AACD;;AACD,aAAO,EAAP;AACD;;;2CAEsBT,S,EAAW;AAChC,aAAOA,SAAS,CAACG,KAAV,GACH,CAACH,SAAS,CAACU,cADR,GAEH,CAACV,SAAS,CAACW,eAFf;AAGD;;;4CAEuBX,S,EAAW;AACjC,aACEA,SAAS,CAACG,KAAV,IACA,CAACH,SAAS,CAACY,oBADX,IAEA,CAACZ,SAAS,CAACa,UAHb;AAKD;;;+CAE0Bb,S,EAAW;AACpC,aACEA,SAAS,CAACG,KAAV,IACA,CAACH,SAAS,CAACc,uBADX,IAEA,CAACd,SAAS,CAACe,aAHb;AAKD;;;mCAEcC,S,EAAWhB,S,EAAW;AACnC,aAAO,CAACgB,SAAD,IAAc,CAAChB,SAAS,CAACiB,iBAAhC;AACD;;;qCAEgB7a,I,EAAM;AACrB,aAAOqP,mFAAiB,CAACrP,IAAD,EAAO,KAAP,CAAxB;AACD;;;wCAEmB;AAClB,WAAK4Z,SAAL,CAAekB,WAAf;AACD;;;qCAEgB;AACf,WAAKlB,SAAL,CAAemB,aAAf;AACD;;;4CAEuB;AACtB,WAAKnB,SAAL,CAAeoB,cAAf;AACD;;;iCAEY;AACX,WAAKpB,SAAL,CAAeqB,SAAf;AACD;;;wCAEmB5W,E,EAAI;AACtB,UAAI,CAAC,KAAKuV,SAAV,EAAqB;AAErB,UAAI5K,MAAM,GAAG,KAAK4K,SAAL,CAAesB,MAA5B;AACA,UAAInM,MAAM,GAAG1K,EAAE,CAACqK,MAAH,CAAU7Q,KAAvB;AAEA,UAAI,CAACkR,MAAD,IAAWC,MAAM,KAAKD,MAA1B,EAAkC;AAElC,WAAK6K,SAAL,CAAeuB,YAAf,CAA4BpM,MAA5B;AACD;;;2CAEsB1K,E,EAAI;AACzB,UAAI,CAAC,KAAKuV,SAAV,EAAqB;AAErB,UAAI5K,MAAM,GAAG,KAAK4K,SAAL,CAAewB,SAA5B;AACA,UAAIrM,MAAM,GAAG1K,EAAE,CAACqK,MAAH,CAAU7Q,KAAvB;AAEA,UAAI,CAACkR,MAAD,IAAWC,MAAM,KAAKD,MAA1B,EAAkC;AAElC,WAAK6K,SAAL,CAAeyB,eAAf,CAA+BtM,MAA/B;AACD;;;sCAEiB;AAChB,UAAI,CAAC,KAAK6K,SAAL,CAAe0B,kBAApB,EAAwC;AACtC;AACD;;AACD,WAAK1B,SAAL,CAAe2B,UAAf,CAA0B,CAAC,KAAK3B,SAAL,CAAeC,OAA1C;AACD;;;yCAEoBxV,E,EAAI;AACvB;;AAEAA,QAAE,CAAC2B,cAAH;AACD;;;qCAEgB;AACf,UAAMwV,GAAG,GAAG,KAAKnZ,CAAL,CAAOoZ,QAAnB;AACA,WAAKC,kBAAL,CAAwB,WAAxB,EAAqCF,GAArC,EAA0C,IAA1C;AACD;;;uCAEkB;AACjB,UAAMA,GAAG,GAAG,KAAKnZ,CAAL,CAAOsZ,UAAnB;AACA,WAAKD,kBAAL,CAAwB,aAAxB,EAAuCF,GAAvC,EAA4C,IAA5C;AACD;;;uCAEkB1K,O,EAAS0K,G,EAAKI,K,EAAO;AAAA;;AACtC,UAAIA,KAAK,IAAKJ,GAAG,KAAKnf,SAAR,IAAqBmf,GAAG,CAACK,WAAvC,EAAqD;AACnD,aAAKjC,SAAL,CAAe5I,WAAf,CAA2BF,OAA3B;AACAnN,kBAAU,CAAC;AAAA,iBAAM,MAAI,CAAC+X,kBAAL,CAAwB5K,OAAxB,EAAiC0K,GAAjC,EAAsC,KAAtC,CAAN;AAAA,SAAD,EAAqD,GAArD,CAAV;AACD;AACF;;;wCAEmBnX,E,EAAI;AACtB,UAAMyX,aAAa,GAAGjZ,UAAU,CAACwB,EAAE,CAACyB,MAAH,CAAUjI,KAAX,CAAhC;AACA,UAAMke,MAAM,GAAGD,aAAa,GAAG,CAAhB,GAAoBA,aAAa,GAAG,GAApC,GAA0C,CAAzD;AACA,WAAKlC,SAAL,CAAeoC,SAAf,CAAyBD,MAAzB;AACD;;;qCAEgB1X,E,EAAI;AACnB,UAAIA,EAAE,CAAC4X,OAAH,KAAe,EAAnB,EAAuB,KAAKC,OAAL;AACxB;;;8BAES;AACR,UAAMC,QAAQ,GAAG,KAAKnc,IAAL,CAAUmc,QAAV,CAAmBC,GAApC;AACA,UAAMC,WAAW,GAAG1f,MAAM,CAACC,IAAP,CAAYuf,QAAZ,EAAsBG,IAAtB,EAApB;AACA,UAAIxL,OAAJ;AACA,UAAI0F,CAAJ;;AAEA,WAAKA,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAG6F,WAAW,CAACtZ,MAA5B,EAAoCyT,CAAC,EAArC,EAAyC;AACvC,YAAI6F,WAAW,CAAC7F,CAAD,CAAX,CAAeva,OAAf,CAAuB,MAAvB,MAAmC,CAAC,CAAxC,EAA2C;AACzC6U,iBAAO,GAAGuL,WAAW,CAAC7F,CAAD,CAArB;AACA;AACD;AACF;;AAED,UAAI,CAAC1F,OAAL,EAAc;AACZ;AACD;;AAED,WAAK9Q,IAAL,CAAUgR,WAAV,CAAsB,KAAtB,EAA6BF,OAA7B,EAAsC;AACpCxU,iBAAS,EAAE,KAAKJ,QAAL,CAAcI,SADW;AAEpCyV,eAAO,EAAE,KAAKwK;AAFsB,OAAtC;AAIA,WAAKA,UAAL,GAAkB,EAAlB;AACA,WAAKla,CAAL,CAAOma,QAAP,CAAgBC,KAAhB;AACD;;;yCAEoBzc,I,EAAM;AACzB,aAAO+T,qFAAmB,CAAC/T,IAAD,CAA1B;AACD;;;wBA9YqB;AACpB,aAAO7B,gFAAP;AA4LD;;;wBAEuB;AACtB,aAAO;AACL6B,YAAI,EAAErD,MADD;AAELT,gBAAQ,EAAES,MAFL;AAGLid,iBAAS,EAAE;AACTxb,cAAI,EAAEzB,MADG;AAET2B,kBAAQ,EAAE,kCAFD;AAGTuF,kBAAQ,EAAE;AAHD,SAHN;AASL+W,iBAAS,EAAE;AACTxc,cAAI,EAAES,OADG;AAETP,kBAAQ,EAAE;AAFD,SATN;AAcLie,kBAAU,EAAE;AACVne,cAAI,EAAEC,MADI;AAEVR,eAAK,EAAE;AAFG,SAdP;AAmBLmW,WAAG,EAAE;AACH5V,cAAI,EAAEC,MADH;AAEHC,kBAAQ,EAAE;AAFP;AAnBA,OAAP;AAwBD;;;;EAzN+B4S,uEAAa,CAACnN,yEAAW,CAACxF,+EAAD,CAAZ,C;;AAkZ/CC,cAAc,CAACC,MAAf,CAAsB,wBAAtB,EAAgDib,mBAAhD,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACxaA;AACA;AACA;AACA;;IAEMgD,c;;;;;;;;;;;;;wBACkB;AACpB,aAAOve,gFAAP;AAYD;;;wBAEuB;AACtB,aAAO;AACLjC,gBAAQ,EAAE;AACRkC,cAAI,EAAEzB;AADE;AADL,OAAP;AAKD;;;;EAtB0BuU,sEAAa,CAAC3S,+EAAD,C;;AAyB1CC,cAAc,CAACC,MAAf,CAAsB,kBAAtB,EAA0Cie,cAA1C,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC9BA;AACA;AACA;AAEA;AAEA;AACA;;IAEMC,W;;;;;;;;;;;;;kCA6CUzgB,Q,EAAU;AACtB,aAAO,IAAIoH,IAAJ,CAASpH,QAAQ,CAACC,UAAT,CAAoBygB,WAA7B,CAAP;AACD;;;mCAEc1gB,Q,EAAU;AACvB,aAAO,IAAIoH,IAAJ,CAASpH,QAAQ,CAACC,UAAT,CAAoB0gB,YAA7B,CAAP;AACD;;;iCAEYC,U,EAAYC,W,EAAa;AACpC,aAAOD,UAAU,GAAGC,WAAb,GAA2B,CAAC,KAAD,EAAQ,KAAR,CAA3B,GAA4C,CAAC,KAAD,EAAQ,KAAR,CAAnD;AACD;;;gCAEW3e,I,EAAM;AAChB,UAAIA,IAAI,KAAK,KAAb,EAAoB;AAClB,eAAO,KAAKyV,QAAL,CAAc,yCAAd,CAAP;AACD;;AACD,aAAO,KAAKA,QAAL,CAAc,0CAAd,CAAP;AACD;;;6BAEQzV,I,EAAM;AACb,aAAOA,IAAI,KAAK,KAAT,GAAiB,KAAK0e,UAAtB,GAAmC,KAAKC,WAA/C;AACD;;;8BAES3e,I,EAAM;AACd,aAAO4e,4EAAU,CAAC,KAAKC,QAAL,CAAc7e,IAAd,CAAD,EAAsB,KAAK4B,IAAL,CAAUkd,QAAhC,CAAjB;AACD;;;wBArEqB;AACpB,aAAO/e,gFAAP;AAyBD;;;wBAEuB;AACtB,aAAO;AACL6B,YAAI,EAAErD,MADD;AAELT,gBAAQ,EAAES,MAFL;AAGLmgB,kBAAU,EAAE;AACV1e,cAAI,EAAEzB,MADI;AAEV2B,kBAAQ,EAAE;AAFA,SAHP;AAQLye,mBAAW,EAAE;AACX3e,cAAI,EAAEzB,MADK;AAEX2B,kBAAQ,EAAE;AAFC;AARR,OAAP;AAaD;;;;EA3CuB4S,sEAAa,CAAC3S,+EAAD,C;;AAyEvCC,cAAc,CAACC,MAAf,CAAsB,eAAtB,EAAuCke,WAAvC,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AClFA;AACA;AACA;;IAEMQ,e;;;;;;;;;;;;;wCA4BgBjhB,Q,EAAU;AAC5B,aACEA,QAAQ,CAACC,UAAT,CAAoBihB,aAApB,IACA,2DAFF;AAID;;;wBAhCqB;AACpB,aAAOjf,gFAAP;AAgBD;;;wBAEuB;AACtB,aAAO;AACLjC,gBAAQ,EAAE;AACRkC,cAAI,EAAEzB;AADE;AADL,OAAP;AAKD;;;;EA1B2BuU,sEAAa,CAAC3S,+EAAD,C;;AAoC3CC,cAAc,CAACC,MAAf,CAAsB,mBAAtB,EAA2C0e,eAA3C,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACxCA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;;IAEME,c;;;;;;;;;;;;;kCAoJUnhB,Q,EAAU;AACtB,aAAOa,uFAAe,CAACb,QAAD,EAAW,CAAX,CAAtB;AACD;;;iCAEYA,Q,EAAU;AACrB,aAAOa,uFAAe,CAACb,QAAD,EAAW,CAAX,CAAtB;AACD;;;uCAEkBA,Q,EAAU;AAC3B,aAAOa,uFAAe,CAACb,QAAD,EAAW,EAAX,CAAtB;AACD;;;qCAEgBA,Q,EAAU;AACzB,aAAOa,uFAAe,CAACb,QAAD,EAAW,EAAX,CAAtB;AACD;;;oCAEeA,Q,EAAU;AACxB,aAAOa,uFAAe,CAACb,QAAD,EAAW,EAAX,CAAtB;AACD;;;mCAEcA,Q,EAAU;AACvB,aAAOa,uFAAe,CAACb,QAAD,EAAW,GAAX,CAAtB;AACD;;;mCAEcA,Q,EAAU;AACvB,aAAOa,uFAAe,CAACb,QAAD,EAAW,GAAX,CAAtB;AACD;;;sCAEiBA,Q,EAAU;AAC1B,aAAOa,uFAAe,CAACb,QAAD,EAAW,IAAX,CAAtB;AACD;;;kCAEaA,Q,EAAU;AACtB,aAAOa,uFAAe,CAACb,QAAD,EAAW,IAAX,CAAtB;AACD;;;uCAEkBA,Q,EAAU;AAC3B,aACEa,uFAAe,CAACb,QAAD,EAAW,CAAX,CAAf,GACAa,uFAAe,CAACb,QAAD,EAAW,CAAX,CADf,GAEAa,uFAAe,CAACb,QAAD,EAAW,EAAX,CAFf,GAGAa,uFAAe,CAACb,QAAD,EAAW,GAAX,CAHf,GAIAa,uFAAe,CAACb,QAAD,EAAW,IAAX,CAJf,GAKAa,uFAAe,CAACb,QAAD,EAAW,IAAX,CANjB;AAQD;;;oCAEemI,E,EAAI;AAClB,UAAI2K,MAAM,GAAG,KAAK9S,QAAL,CAAcC,UAAd,CAAyBmhB,SAAtC;AACA,UAAIvO,MAAM,GAAG1K,EAAE,CAACqK,MAAH,CAAU7Q,KAAvB;AAEA,UAAI,CAACkR,MAAD,IAAWC,MAAM,KAAKD,MAA1B,EAAkC;AAElC,WAAK/O,IAAL,CAAUgR,WAAV,CAAsB,QAAtB,EAAgC,eAAhC,EAAiD;AAC/C1U,iBAAS,EAAE,KAAKJ,QAAL,CAAcI,SADsB;AAE/CghB,iBAAS,EAAEvO;AAFoC,OAAjD;AAID;;;6BAEQ;AACP,WAAK/O,IAAL,CAAUgR,WAAV,CAAsB,QAAtB,EAAgC,MAAhC,EAAwC;AACtC1U,iBAAS,EAAE,KAAKJ,QAAL,CAAcI;AADa,OAAxC;AAGD;;;kCAEa;AACZ,WAAK0D,IAAL,CAAUgR,WAAV,CAAsB,QAAtB,EAAgC,aAAhC,EAA+C;AAC7C1U,iBAAS,EAAE,KAAKJ,QAAL,CAAcI;AADoB,OAA/C;AAGD;;;8BAES;AACR,WAAK0D,IAAL,CAAUgR,WAAV,CAAsB,QAAtB,EAAgC,OAAhC,EAAyC;AACvC1U,iBAAS,EAAE,KAAKJ,QAAL,CAAcI;AADc,OAAzC;AAGD;;;8BAES;AACR,WAAK0D,IAAL,CAAUgR,WAAV,CAAsB,QAAtB,EAAgC,OAAhC,EAAyC;AACvC1U,iBAAS,EAAE,KAAKJ,QAAL,CAAcI;AADc,OAAzC;AAGD;;;+BAEU;AACT,WAAK0D,IAAL,CAAUgR,WAAV,CAAsB,QAAtB,EAAgC,QAAhC,EAA0C;AACxC1U,iBAAS,EAAE,KAAKJ,QAAL,CAAcI;AADe,OAA1C;AAGD;;;kCAEa;AACZ,WAAK0D,IAAL,CAAUgR,WAAV,CAAsB,QAAtB,EAAgC,YAAhC,EAA8C;AAC5C1U,iBAAS,EAAE,KAAKJ,QAAL,CAAcI;AADmB,OAA9C;AAGD;;;mCAEc;AACb,WAAK0D,IAAL,CAAUgR,WAAV,CAAsB,QAAtB,EAAgC,gBAAhC,EAAkD;AAChD1U,iBAAS,EAAE,KAAKJ,QAAL,CAAcI;AADuB,OAAlD;AAGD;;;wBAtPqB;AACpB,aAAO6B,gFAAP;AA+HD;;;wBAEuB;AACtB,aAAO;AACL6B,YAAI,EAAE;AACJ5B,cAAI,EAAEzB;AADF,SADD;AAKL4gB,gBAAQ,EAAE;AACRnf,cAAI,EAAES,OADE;AAERhB,eAAK,EAAE;AAFC,SALL;AAUL3B,gBAAQ,EAAE;AACRkC,cAAI,EAAEzB;AADE;AAVL,OAAP;AAcD;;;;EAlJ0B4B,+E;;AA0P7BC,cAAc,CAACC,MAAf,CAAsB,kBAAtB,EAA0C4e,cAA1C,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACtQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AAEA;AACA;AAEA;;;;;IAIMG,mB;;;;;;;;;;;;;oCAkIYzO,M,EAAQC,M,EAAQ;AAAA;;AAC9B,UAAID,MAAJ,EAAY;AACV,aAAKE,aAAL,CAAmB;AACjBgD,2BAAiB,EAAElD,MAAM,CAAC5S,UAAP,CAAkB+V,SAAlB,KAAgC;AADlC,SAAnB;AAGD;;AAED,UAAIlD,MAAJ,EAAY;AACV,aAAKsD,UAAL,GAAkBC,6EAAS,CAACC,QAAV,CAChB,KAAKF,UADW,EAEhBG,wEAAO,CAACC,KAAR,CAAc,GAAd,CAFgB,EAGhB,YAAM;AACJ,eAAI,CAAC9O,IAAL,CAAU,aAAV;AACD,SALe,CAAlB;AAOD;AACF;;;+CAE0B5D,I,EAAM9D,Q,EAAU;AACzC,UAAIA,QAAQ,CAACC,UAAT,CAAoBwW,gBAAxB,EAA0C;AACxC,eAAOzW,QAAQ,CAACC,UAAT,CAAoBwW,gBAA3B;AACD;;AACD,UAAI3S,IAAI,CAACC,MAAL,CAAY2S,WAAZ,CAAwBC,WAAxB,CAAoC5W,OAApC,CAA4C,GAA5C,MAAqD,CAAC,CAA1D,EAA6D;AAC3D,eAAO,CAAP;AACD;;AACD,aAAO,GAAP;AACD;;;gDAE2BC,Q,EAAU;AACpC,aAAO,KAAK4W,mBAAL,CAAyB5W,QAAzB,CAAP;AACD;;;wCAEmBA,Q,EAAU;AAC5B,aACEa,wFAAe,CAACb,QAAD,EAAW,CAAX,CAAf,IACA,OAAOA,QAAQ,CAACC,UAAT,CAAoB0W,WAA3B,KAA2C,QAF7C;AAID;;;0CAEqB3W,Q,EAAU;AAC9B,aAAOa,wFAAe,CAACb,QAAD,EAAW,CAAX,CAAtB;AACD;;;qCAEgBA,Q,EAAU;AACzB,aAAOa,wFAAe,CAACb,QAAD,EAAW,CAAX,CAAtB;AACD;;;sCAEiBA,Q,EAAU;AAC1B,UAAMgX,kBAAkB,GAAG;AACzB,WAAG,wBADsB;AAEzB,WAAG,oBAFsB;AAGzB,WAAG;AAHsB,OAA3B;AAMA,UAAIC,OAAO,GAAG,CAAC3W,mFAAiB,CAACN,QAAD,EAAWgX,kBAAX,CAAlB,CAAd;AAEAC,aAAO,CAACE,IAAR,CAAa,wBAAb;AAEA,aAAOF,OAAO,CAAChW,IAAR,CAAa,GAAb,CAAP;AACD;;;6CAEwBkH,E,EAAI;AAC3B,UAAMwO,WAAW,GAAGxO,EAAE,CAACyB,MAAH,CAAUjI,KAA9B;AACA,UAAIgV,WAAW,KAAK,KAAK3W,QAAL,CAAcC,UAAd,CAAyB0W,WAA7C,EAA0D;AAC1D,WAAKS,iBAAL,CAAuB,iBAAvB,EAA0C;AAAET,mBAAW,EAAEA;AAAf,OAA1C;AACD;;;sCAEiBxO,E,EAAI;AACpB,UAAM2K,MAAM,GAAG,KAAK9S,QAAL,CAAcC,UAAd,CAAyB+V,SAAzB,KAAuC,IAAtD;AACA,UAAMnD,MAAM,GAAG1K,EAAE,CAACyB,MAAH,CAAU+L,OAAzB;AACA,UAAI7C,MAAM,KAAKD,MAAf,EAAuB;AACvB,WAAKuE,iBAAL,CAAuB,eAAvB,EAAwC;AAAEpB,iBAAS,EAAEnD;AAAb,OAAxC;AACD;;;+CAE0B1K,E,EAAI;AAC7B,UAAM2K,MAAM,GAAG,KAAK9S,QAAL,CAAcC,UAAd,CAAyBwX,cAAxC;AACA,UAAM5E,MAAM,GAAG1K,EAAE,CAACqK,MAAH,CAAU7Q,KAAzB;AACA,UAAI,CAACkR,MAAD,IAAWC,MAAM,KAAKD,MAA1B,EAAkC;AAClC,WAAKuE,iBAAL,CAAuB,oBAAvB,EAA6C;AAC3CK,sBAAc,EAAE5E;AAD2B,OAA7C;AAGD;;;sCAEiB+B,O,EAASC,I,EAAM;AAAA;;AAC/B;AACA;AACA;AACA;;AACA;AACAA,UAAI,CAACzU,SAAL,GAAiB,KAAKJ,QAAL,CAAcI,SAA/B;AACA;;AACA,WAAK0D,IAAL,CAAUgR,WAAV,CAAsB,cAAtB,EAAsCF,OAAtC,EAA+CC,IAA/C,EAAqDE,IAArD,CAA0D,YAAM;AAC9D,cAAI,CAAC3R,eAAL,CAAqB,MAAI,CAACpD,QAA1B;AACD,OAFD;AAGD;;;2CAEsB2X,Q,EAAUC,I,EAAM;AACrC,aAAOD,QAAQ,8BAAuBC,IAAvB,EAAR,IAA0CA,IAAjD;AACD;;;wBAnOqB;AACpB,aAAO3V,gFAAP;AA+GD;;;wBAEuB;AACtB,aAAO;AACL6B,YAAI,EAAE;AACJ5B,cAAI,EAAEzB;AADF,SADD;AAKLT,gBAAQ,EAAE;AACRkC,cAAI,EAAEzB,MADE;AAERkH,kBAAQ,EAAE;AAFF,SALL;AAULoO,yBAAiB,EAAEpT;AAVd,OAAP;AAYD;;;;EAhI+BqS,uEAAa,CAACnN,yEAAW,CAACxF,+EAAD,CAAZ,C;;AAuO/CC,cAAc,CAACC,MAAf,CAAsB,wBAAtB,EAAgD+e,mBAAhD,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC9PA;AACA;AACA;AAEA;AAEA;;;;IAGMC,e;;;;;;;wBACkB;AACpB,aAAOtf,gFAAP;AAoHD;;;wBAEuB;AACtB,aAAO;AACL6B,YAAI,EAAErD,MADD;AAELT,gBAAQ,EAAES;AAFL,OAAP;AAID;;;AAED,6BAAc;AAAA;;AAAA;;AACZ;AACA,UAAK+gB,kBAAL,GAA0B,CACxB,GADwB,EAExB,KAFwB,EAGxB,IAHwB,EAIxB,KAJwB,EAKxB,GALwB,EAMxB,KANwB,EAOxB,IAPwB,EAQxB,KARwB,EASxB,GATwB,EAUxB,KAVwB,EAWxB,IAXwB,EAYxB,KAZwB,EAaxB,GAbwB,EAcxB,KAdwB,EAexB,IAfwB,EAgBxB,KAhBwB,EAiBxB,GAjBwB,CAA1B;AAmBA,UAAKC,YAAL,GAAoB;AAClB,qBAAe,oBADG;AAElBC,YAAM,EAAE,qBAFU;AAGlBC,SAAG,EAAE,kBAHa;AAIlBC,UAAI,EAAE,mBAJY;AAKlBC,eAAS,EAAE,wBALO;AAMlB,yBAAmB,8BAND;AAOlBC,kBAAY,EAAE,2BAPI;AAQlBC,aAAO,EAAE,sBARS;AASlBC,WAAK,EAAE,oBATW;AAUlBC,WAAK,EAAE,oBAVW;AAWlB,qBAAe,0BAXG;AAYlBC,WAAK,EAAE,oBAZW;AAalBC,WAAK,EAAE,oBAbW;AAclB,uBAAiB;AAdC,KAApB;AArBY;AAqCb;;;;gCAEWtN,I,EAAM;AAChB,UAAMuH,IAAI,GAAG,IAAIhV,IAAJ,CAASyN,IAAT,CAAb;AACA,aAAOuH,IAAI,CAACgG,kBAAL,CAAwB,KAAKte,IAAL,CAAUkd,QAAlC,EAA4C;AACjDqB,eAAO,EAAE,MADwC;AAEjDnH,aAAK,EAAE,OAF0C;AAGjDE,WAAG,EAAE;AAH4C,OAA5C,CAAP;AAKD;;;oCAEevG,I,EAAM;AACpB,UAAMuH,IAAI,GAAG,IAAIhV,IAAJ,CAASyN,IAAT,CAAb;AACA,aAAOuH,IAAI,CAACgG,kBAAL,CAAwB,KAAKte,IAAL,CAAUkd,QAAlC,EAA4C;AACjDqB,eAAO,EAAE,MADwC;AAEjDxG,YAAI,EAAE;AAF2C,OAA5C,CAAP;AAID;;;4BAEOyG,O,EAAS;AACf,UAAMC,UAAU,GAAG,KAAKze,IAAL,CAAUC,MAAV,CAAiB2S,WAAjB,CAA6B7P,MAA7B,IAAuC,EAA1D;;AACA,cAAQyb,OAAR;AACE,aAAK,cAAL;AACE,iBAAOC,UAAU,KAAK,IAAf,GAAsB,KAAtB,GAA8B,MAArC;;AACF,aAAK,QAAL;AACE,iBAAOA,UAAP;;AACF,aAAK,eAAL;AACE,iBAAOA,UAAU,KAAK,IAAf,GAAsB,IAAtB,GAA6B,IAApC;;AACF;AACE,iBAAO,KAAKze,IAAL,CAAUC,MAAV,CAAiB2S,WAAjB,CAA6B4L,OAA7B,KAAyC,EAAhD;AARJ;AAUD;;;sCAEiBE,M,EAAQ;AACxB,UAAMC,SAAS,GAAGrU,QAAQ,CAACoU,MAAD,CAA1B;;AACA,UAAIE,QAAQ,CAACD,SAAD,CAAZ,EAAyB;AACvB,eAAO,KAAKjB,kBAAL,CAAwB,CAAE,CAACiB,SAAS,GAAG,KAAb,IAAsB,IAAvB,GAA+B,CAAhC,IAAqC,EAA7D,CAAP;AACD;;AACD,aAAOD,MAAP;AACD;;;4BAEOrI,K,EAAOwI,O,EAAShL,Q,EAAU;AAChC,UAAIgL,OAAO,IAAI,IAAf,EAAqB;AACnB,YAAMC,iBAAiB,GAAG,KAAKC,iBAAL,CAAuBF,OAAvB,CAA1B;AACA,yBAAUxI,KAAV,cAAmB,KAAK2I,OAAL,CAAa,QAAb,CAAnB,iBAAgDnL,QAAQ,8CAChBiL,iBAAiB,CAACG,WAAlB,EADgB,EAAR,IAE3CH,iBAFL;AAGD;;AACD,uBAAUzI,KAAV,cAAmB,KAAK2I,OAAL,CAAa,QAAb,CAAnB;AACD;;;mCAEcE,S,EAAW;AACxB,aAAO,KAAKvB,YAAL,CAAkBuB,SAAlB,CAAP;AACD;;;+BAEUC,I,EAAM;AACf,aAAO,OAAOA,IAAP,KAAgB,WAAhB,IAA+BA,IAAI,KAAK,IAA/C;AACD;;;;EA7N2BjO,sEAAa,CAAC3S,+EAAD,C;;AAgO3CC,cAAc,CAACC,MAAf,CAAsB,mBAAtB,EAA2Cgf,eAA3C,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACzOA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA,IAAM2B,eAAe,GAAG,CAAC,QAAD,EAAW,cAAX,EAA2B,eAA3B,CAAxB;AACA;;;;IAGMC,gB;;;;;;;;;;;;;8BA2IM;AACR,WAAKjQ,KAAL,GAAa,CAAC,KAAKA,KAAnB;AACD;;;0CAEqBlT,Q,EAAU;AAC9B,aAAO,CAACA,QAAD,IAAa,CAACkjB,eAAe,CAACjf,QAAhB,CAAyByO,oFAAkB,CAAC1S,QAAD,CAA3C,CAArB;AACD;;;iDAE4B8D,I,EAAM9D,Q,EAAU;AAC3C,aACE8D,IAAI,IACJ9D,QADA,IAEAmT,mFAAiB,CAACrP,IAAD,EAAO,SAAP,CAFjB,IAGA,CAACzE,2EAA4B,CAAC4E,QAA7B,CAAsCyO,oFAAkB,CAAC1S,QAAD,CAAxD,CAJH;AAMD;;;mCAEcA,Q,EAAU;AACvB,aAAOA,QAAQ,GAAG0S,oFAAkB,CAAC1S,QAAD,CAArB,GAAkC,EAAjD;AACD;;;sCAEiBA,Q,EAAU;AAC1B,aAAOA,QAAQ,GAAGiD,kFAAgB,CAACjD,QAAD,CAAnB,GAAgC,EAA/C;AACD;;;qCAEgB6S,M,EAAQ;AACvB,UAAI,CAACA,MAAL,EAAa;AACX;AACD;;AAED,UAAI,KAAKuQ,YAAL,CAAkBC,QAAlB,yBAA4CxQ,MAAM,CAACzS,SAAnD,CAAJ,EAAoE;AAClE,aAAKgjB,YAAL,GAAoB3iB,MAAM,CAACka,MAAP,CAAc,EAAd,EAAkB,KAAKyI,YAAvB,EAAqC;AACvDC,kBAAQ,sBAAexQ,MAAM,CAACzS,SAAtB;AAD+C,SAArC,CAApB;AAGD;AACF;;;oCAEe;AACd,WAAKsH,IAAL,CAAU,gBAAV,EAA4B;AAAE+K,YAAI,EAAE;AAAR,OAA5B;AACD;;;gCAEW3O,I,EAAM;AAChB,aAAOwf,4EAAU,CAACxf,IAAD,CAAjB;AACD;;;wBArLqB;AACpB,aAAO7B,gFAAP;AA4FD;;;wBAEuB;AACtB,aAAO;AACL6B,YAAI,EAAErD,MADD;AAGLT,gBAAQ,EAAE;AACRkC,cAAI,EAAEzB,MADE;AAERkH,kBAAQ,EAAE;AAFF,SAHL;AAQL4b,qBAAa,EAAE9iB,MARV;AASL+iB,oBAAY,EAAE7gB,OATT;AAWL8gB,cAAM,EAAE;AACNvhB,cAAI,EAAEC,MADA;AAENwR,4BAAkB,EAAE,IAFd;AAGNvR,kBAAQ,EAAE;AAHJ,SAXH;AAiBLshB,qBAAa,EAAEjjB,MAjBV;AAkBLkjB,4BAAoB,EAAEhhB,OAlBjB;AAoBLuQ,aAAK,EAAE;AACLhR,cAAI,EAAES,OADD;AAELhB,eAAK,EAAE,KAFF;AAGL4P,gBAAM,EAAE;AAHH,SApBF;AA0BL6R,oBAAY,EAAE;AACZlhB,cAAI,EAAEzB,MADM;AAEZkB,eAAK,EAAE;AACLiiB,mBAAO,EAAE,EADJ;AAELP,oBAAQ,EAAE,IAFL;AAGLQ,uBAAW,EAAE;AAHR;AAFK,SA1BT;AAkCL/L,WAAG,EAAE;AACH5V,cAAI,EAAES,OADH;AAEHgR,4BAAkB,EAAE,IAFjB;AAGHvR,kBAAQ,EAAE;AAHP;AAlCA,OAAP;AAwCD;;;;EAzI4ByF,yEAAW,CAACxF,+EAAD,C;;AAwL1CC,cAAc,CAACC,MAAf,CAAsB,oBAAtB,EAA4C4gB,gBAA5C,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AChNA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AAEA;AACA;;;;;IAIMW,gB;;;;;;;;;;;;;sCAmEc9jB,Q,EAAU;AAC1B,UAAI,CAACA,QAAL,EAAe,OAAO,EAAP;AACf,aAAOiD,iFAAgB,CAACjD,QAAD,CAAvB;AACD;;;oCAEeH,Q,EAAU;AACxB,aAAOkkB,6EAAa,CAAC,KAAK/jB,QAAL,CAAcI,SAAf,CAAb,KAA2C2jB,6EAAa,CAAClkB,QAAD,CAA/D;AACD;;;yCAEoBgT,M,EAAQ;AAC3B,UAAIA,MAAJ,EAAY;AACV,aAAKE,aAAL,CAAmB;AACjBiR,eAAK,EAAEnR,MAAM,CAACqF,IADG;AAEjB+L,mBAAS,EAAEpR,MAAM,CAACzS;AAFD,SAAnB;AAID,OALD,MAKO;AACL,aAAK2S,aAAL,CAAmB;AACjBiR,eAAK,EAAE,EADU;AAEjBC,mBAAS,EAAE;AAFM,SAAnB;AAID;AACF;;;kCAEa;AACZ,WAAKvc,IAAL,CAAU,gBAAV,EAA4B;AAAE+K,YAAI,EAAE;AAAR,OAA5B;AACD;;;;;;;;;;;;;;uBAIsByR,wFAAyB,CAC1C,KAAKpgB,IADqC,EAE1C,KAAK9D,QAAL,CAAcI,SAF4B,EAG1C;AACE8X,sBAAI,EAAE,KAAK8L,KADb;AAEEG,+BAAa,EAAE,KAAKF;AAFtB,iBAH0C,C;;;AAAtC1Q,oB;AASN,qBAAK6Q,YAAL,GAAoB7Q,IAApB,C,CAEA;;AACA,oBAAI,KAAKvT,QAAL,CAAcI,SAAd,KAA4B,KAAK6jB,SAArC,EAAgD;AAC9C,uBAAKvc,IAAL,CAAU,gBAAV,EAA4B;AAAE7H,4BAAQ,EAAE,KAAKokB;AAAjB,mBAA5B;AACD;;;;;;;;AAEDrO,qBAAK,wBAAiB,YAAIC,OAArB,EAAL;;;;;;;;;;;;;;;;;;wBA/GkB;AACpB,aAAO5T,gFAAP;AA+CD;;;wBAEuB;AACtB,aAAO;AACL6B,YAAI,EAAErD,MADD;AAELT,gBAAQ,EAAES,MAFL;AAIL2jB,oBAAY,EAAE;AACZliB,cAAI,EAAEzB,MADM;AAEZkH,kBAAQ,EAAE,sBAFE;AAGZ4J,gBAAM,EAAE;AAHI,SAJT;AAULyS,aAAK,EAAE7hB,MAVF;AAWL8hB,iBAAS,EAAE9hB;AAXN,OAAP;AAaD;;;;EAjE4B6S,sEAAa,CAACnN,wEAAW,CAACxF,+EAAD,CAAZ,C;;AAoH5CC,cAAc,CAACC,MAAf,CAAsB,oBAAtB,EAA4CuhB,gBAA5C,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACvIA;AACA;AACA;AACA;AACA;;;;;;AAKeO,qJAAa,CAC1B,UAACC,UAAD;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;;AAAA;AAAA;;AAAA;AAAA;AAAA,4BAK4B;AACtB,iBAAO;AACLC,wBAAY,EAAE;AACZriB,kBAAI,EAAES,OADM;AAEZhB,mBAAK,EAAE;AAFK;AADT,WAAP;AAMD;AAZL;;AAAA;AAAA,MACgB6iB,wFAAc,CAC1B,CAAC3c,yDAAD,EAAc4c,wGAAd,CAD0B,EAE1BH,UAF0B,CAD9B;AAAA;AAAA,CAD0B,CAA5B,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACTA;AACA;;;;;;AAKeD,qJAAa,CAC1B,UAACC,UAAD;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;;AAAA;AAAA;;AAAA;AAAA;AAAA,0CAkBsB3M,QAlBtB,EAkBgC;AAC1B,iBAAOA,QAAP;AACD;AApBL;AAAA;AAAA,4BAE4B;AACtB,iBAAO;AACL7T,gBAAI,EAAErD,MADD;;AAGL;;;;;AAKAkX,oBAAQ,EAAE;AACRzV,kBAAI,EAAEwiB,QADE;AAERtiB,sBAAQ,EAAE;AAFF;AARL,WAAP;AAaD;AAhBL;;AAAA;AAAA,MACgBkiB,UADhB;AAAA;AAAA,CAD0B,CAA5B,E;;;;;;;;;;;;ACNA;AAAA,IAAMljB,iBAAiB,GAAG,EAA1B;AAEAA,iBAAiB,CAACujB,mBAAlB,GAAwC;AACtCC,eAAa,EAAE,CACb,SADa,EAEb,MAFa,EAGb,cAHa,EAIb,MAJa,EAKb,aALa,EAMb,KANa,EAOb,MAPa,EAQb,OARa,EASb,MATa,EAUb,UAVa,EAWb,QAXa,EAYb,QAZa,EAab,WAba,EAcb,SAda,EAeb,MAfa,EAgBb,OAhBa,EAiBb,UAjBa,EAkBb,SAlBa,EAmBb,QAnBa,EAoBb,OApBa,EAqBb,OArBa,EAsBb,WAtBa,EAuBb,QAvBa,CADuB;AA0BtCC,OAAK,EAAE,CACL,QADK,EAEL,OAFK,EAGL,SAHK,EAIL,QAJK,EAKL,MALK,EAML,QANK,EAOL,OAPK,EAQL,SARK,EASL,QATK,CA1B+B;AAqCtCC,QAAM,EAAE,CACN,SADM,EAEN,UAFM,EAGN,aAHM,EAIN,aAJM,EAKN,UALM,EAMN,OANM,EAON,iBAPM,CArC8B;AA8CtC,YAAQ,CAAC,QAAD,EAAW,QAAX;AA9C8B,CAAxC;AAiDA1jB,iBAAiB,CAAC2jB,YAAlB,GAAiC,MAAjC;AACA3jB,iBAAiB,CAAC4jB,QAAlB,GAA6B,WAA7B;AAEA5jB,iBAAiB,CAAC6jB,WAAlB,GAAgC;AAC9BC,QAAM,EAAE,qBADsB;AAE9BC,MAAI,EAAE,qBAFwB;AAG9B7T,MAAI,EAAE,mBAHwB;AAI9B,aAAS,sBAJqB;AAK9B8T,OAAK,EAAE,oBALuB;AAM9B,eAAa;AANiB,CAAhC,C,CASA;AACA;AACA;AACA;;AACAhkB,iBAAiB,CAACC,sBAAlB,GAA2CD,iBAAiB,CAACC,sBAAlB,IAA4C;AACrFgkB,gBAAc,EAAEllB,SADqE;AAErFD,eAAa,EAAE;AAAEgC,QAAI,EAAE,QAAR;AAAkBojB,eAAW,EAAE;AAA/B,GAFsE;AAGrFhU,MAAI,EAAE;AAAEpP,QAAI,EAAE;AAAR,GAH+E;AAIrFqjB,cAAY,EAAE;AACZrjB,QAAI,EAAE,SADM;AAEZsjB,WAAO,EAAE,CAAC,cAAD;AAFG,GAJuE;AAQrFC,mBAAiB,EAAE;AACjBvjB,QAAI,EAAE,QADW;AAEjBsjB,WAAO,EAAE,CAAC,cAAD;AAFQ,GARkE;AAYrFE,eAAa,EAAEvlB,SAZsE;AAarFwlB,aAAW,EAAExlB,SAbwE;AAcrFylB,mBAAiB,EAAE;AAAE1jB,QAAI,EAAE;AAAR,GAdkE;AAerF2jB,iBAAe,EAAE;AAAE3jB,QAAI,EAAE;AAAR,GAfoE;AAgBrF1B,oBAAkB,EAAEL,SAhBiE;AAiBrF6B,aAAW,EAAE7B,SAjBwE;AAkBrF6Y,qBAAmB,EAAE;AAAE9W,QAAI,EAAE;AAAR,GAlBgE;AAmBrF4jB,sBAAoB,EAAE;AAAE5jB,QAAI,EAAE;AAAR,GAnB+D;AAoBrF6jB,cAAY,EAAE;AACZ7jB,QAAI,EAAE,OADM;AAEZ8jB,WAAO,EAAE5kB,iBAAiB,CAACujB,mBAFf;AAGZW,eAAW,EAAE,cAHD;AAIZE,WAAO,EAAE,CAAC,eAAD,EAAkB,OAAlB,EAA2B,QAA3B,EAAqC,QAArC;AAJG,GApBuE;AA0BrFS,QAAM,EAAE;AAAE/jB,QAAI,EAAE,SAAR;AAAmBojB,eAAW,EAAE;AAAhC,GA1B6E;AA2BrFY,eAAa,EAAE;AACbhkB,QAAI,EAAE,SADO;AAEbsjB,WAAO,EAAE,CACP,QADO,EAEP,OAFO,EAGP,OAHO,EAIP,SAJO,EAKP,KALO,EAMP,OANO,EAOP,cAPO;AAFI,GA3BsE;AAuCrFW,eAAa,EAAE;AACbjkB,QAAI,EAAE,QADO;AAEbsjB,WAAO,EAAE,CAAC,YAAD;AAFI,GAvCsE;AA2CrFY,qBAAmB,EAAE;AAAElkB,QAAI,EAAE;AAAR;AA3CgE,CAAvF;AA8Ced,gFAAf,E","file":"more-info-dialog.chunk.js","sourcesContent":["/** Constants to be used in the frontend. */\n\n// Constants should be alphabetically sorted by name.\n// Arrays with values should be alphabetically sorted if order doesn't matter.\n// Each constant should have a description what it is supposed to be used for.\n\n/** Icon to use when no icon specified for domain. */\nexport const DEFAULT_DOMAIN_ICON = \"hass:bookmark\";\n\n/** Panel to show when no panel is picked. */\nexport const DEFAULT_PANEL = \"lovelace\";\n\n/** Domains that have a state card. */\nexport const DOMAINS_WITH_CARD = [\n  \"climate\",\n  \"cover\",\n  \"configurator\",\n  \"input_select\",\n  \"input_number\",\n  \"input_text\",\n  \"lock\",\n  \"media_player\",\n  \"scene\",\n  \"script\",\n  \"timer\",\n  \"vacuum\",\n  \"water_heater\",\n  \"weblink\",\n];\n\n/** Domains with separate more info dialog. */\nexport const DOMAINS_WITH_MORE_INFO = [\n  \"alarm_control_panel\",\n  \"automation\",\n  \"camera\",\n  \"climate\",\n  \"configurator\",\n  \"cover\",\n  \"fan\",\n  \"group\",\n  \"history_graph\",\n  \"input_datetime\",\n  \"light\",\n  \"lock\",\n  \"media_player\",\n  \"script\",\n  \"sun\",\n  \"updater\",\n  \"vacuum\",\n  \"water_heater\",\n  \"weather\",\n];\n\n/** Domains that show no more info dialog. */\nexport const DOMAINS_HIDE_MORE_INFO = [\n  \"input_number\",\n  \"input_select\",\n  \"input_text\",\n  \"scene\",\n  \"weblink\",\n];\n\n/** Domains that should have the history hidden in the more info dialog. */\nexport const DOMAINS_MORE_INFO_NO_HISTORY = [\n  \"camera\",\n  \"configurator\",\n  \"history_graph\",\n  \"scene\",\n];\n\n/** States that we consider \"off\". */\nexport const STATES_OFF = [\"closed\", \"locked\", \"off\"];\n\n/** Domains where we allow toggle in Lovelace. */\nexport const DOMAINS_TOGGLE = new Set([\n  \"fan\",\n  \"input_boolean\",\n  \"light\",\n  \"switch\",\n  \"group\",\n  \"automation\",\n]);\n\n/** Temperature units. */\nexport const UNIT_C = \"°C\";\nexport const UNIT_F = \"°F\";\n\n/** Entity ID of the default view. */\nexport const DEFAULT_VIEW_ENTITY_ID = \"group.default_view\";\n","/** Compute the object ID of a state. */\nexport default function computeObjectId(entityId: string): string {\n  return entityId.substr(entityId.indexOf(\".\") + 1);\n}\n","import { HassEntity } from \"home-assistant-js-websocket\";\nimport computeObjectId from \"./compute_object_id\";\n\nexport default (stateObj: HassEntity): string =>\n  stateObj.attributes.friendly_name === undefined\n    ? computeObjectId(stateObj.entity_id).replace(/_/g, \" \")\n    : stateObj.attributes.friendly_name || \"\";\n","import { HassEntity } from \"home-assistant-js-websocket\";\nimport { supportsFeature } from \"./supports-feature\";\n\n// Expects classNames to be an object mapping feature-bit -> className\nexport default function featureClassNames(\n  stateObj: HassEntity,\n  classNames: { [feature: number]: string }\n) {\n  if (!stateObj || !stateObj.attributes.supported_features) {\n    return \"\";\n  }\n\n  return Object.keys(classNames)\n    .map((feature) =>\n      supportsFeature(stateObj, Number(feature)) ? classNames[feature] : \"\"\n    )\n    .filter((attr) => attr !== \"\")\n    .join(\" \");\n}\n","import \"@polymer/iron-flex-layout/iron-flex-layout-classes\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport hassAttributeUtil from \"../util/hass-attributes-util\";\n\nclass HaAttributes extends PolymerElement {\n  static get template() {\n    return html`\n      <style include=\"iron-flex iron-flex-alignment\"></style>\n      <style>\n        .data-entry .value {\n          max-width: 200px;\n        }\n        .attribution {\n          color: var(--secondary-text-color);\n          text-align: right;\n        }\n      </style>\n\n      <div class=\"layout vertical\">\n        <template\n          is=\"dom-repeat\"\n          items=\"[[computeDisplayAttributes(stateObj, filtersArray)]]\"\n          as=\"attribute\"\n        >\n          <div class=\"data-entry layout justified horizontal\">\n            <div class=\"key\">[[formatAttribute(attribute)]]</div>\n            <div class=\"value\">\n              [[formatAttributeValue(stateObj, attribute)]]\n            </div>\n          </div>\n        </template>\n        <div class=\"attribution\" hidden$=\"[[!computeAttribution(stateObj)]]\">\n          [[computeAttribution(stateObj)]]\n        </div>\n      </div>\n    `;\n  }\n\n  static get properties() {\n    return {\n      stateObj: {\n        type: Object,\n      },\n      extraFilters: {\n        type: String,\n        value: \"\",\n      },\n      filtersArray: {\n        type: Array,\n        computed: \"computeFiltersArray(extraFilters)\",\n      },\n    };\n  }\n\n  computeFiltersArray(extraFilters) {\n    return Object.keys(hassAttributeUtil.LOGIC_STATE_ATTRIBUTES).concat(\n      extraFilters ? extraFilters.split(\",\") : []\n    );\n  }\n\n  computeDisplayAttributes(stateObj, filtersArray) {\n    if (!stateObj) {\n      return [];\n    }\n    return Object.keys(stateObj.attributes).filter(function(key) {\n      return filtersArray.indexOf(key) === -1;\n    });\n  }\n\n  formatAttribute(attribute) {\n    return attribute.replace(/_/g, \" \");\n  }\n\n  formatAttributeValue(stateObj, attribute) {\n    var value = stateObj.attributes[attribute];\n    if (value === null) return \"-\";\n    if (Array.isArray(value)) {\n      return value.join(\", \");\n    }\n    return value instanceof Object ? JSON.stringify(value, null, 2) : value;\n  }\n\n  computeAttribution(stateObj) {\n    return stateObj.attributes.attribution;\n  }\n}\n\ncustomElements.define(\"ha-attributes\", HaAttributes);\n","import {\n  property,\n  PropertyValues,\n  LitElement,\n  TemplateResult,\n  html,\n  CSSResult,\n  css,\n  customElement,\n} from \"lit-element\";\n\nimport computeStateName from \"../common/entity/compute_state_name\";\nimport { HomeAssistant, CameraEntity } from \"../types\";\nimport { fireEvent } from \"../common/dom/fire_event\";\nimport {\n  CAMERA_SUPPORT_STREAM,\n  fetchStreamUrl,\n  computeMJPEGStreamUrl,\n} from \"../data/camera\";\nimport { supportsFeature } from \"../common/entity/supports-feature\";\n\ntype HLSModule = typeof import(\"hls.js\");\n\n@customElement(\"ha-camera-stream\")\nclass HaCameraStream extends LitElement {\n  @property() public hass?: HomeAssistant;\n  @property() public stateObj?: CameraEntity;\n  @property({ type: Boolean }) public showControls = false;\n  @property() private _attached = false;\n  // We keep track if we should force MJPEG with a string\n  // that way it automatically resets if we change entity.\n  @property() private _forceMJPEG: string | undefined = undefined;\n  private _hlsPolyfillInstance?: Hls;\n\n  public connectedCallback() {\n    super.connectedCallback();\n    this._attached = true;\n  }\n\n  public disconnectedCallback() {\n    super.disconnectedCallback();\n    this._attached = false;\n  }\n\n  protected render(): TemplateResult | void {\n    if (!this.stateObj || !this._attached) {\n      return html``;\n    }\n\n    return html`\n      ${__DEMO__ || this._shouldRenderMJPEG\n        ? html`\n            <img\n              @load=${this._elementResized}\n              .src=${__DEMO__\n                ? `/api/camera_proxy_stream/${this.stateObj.entity_id}`\n                : computeMJPEGStreamUrl(this.stateObj)}\n              .alt=${computeStateName(this.stateObj)}\n            />\n          `\n        : html`\n            <video\n              autoplay\n              muted\n              playsinline\n              ?controls=${this.showControls}\n              @loadeddata=${this._elementResized}\n            ></video>\n          `}\n    `;\n  }\n\n  protected updated(changedProps: PropertyValues) {\n    super.updated(changedProps);\n\n    const stateObjChanged = changedProps.has(\"stateObj\");\n    const attachedChanged = changedProps.has(\"_attached\");\n\n    const oldState = changedProps.get(\"stateObj\") as this[\"stateObj\"];\n    const oldEntityId = oldState ? oldState.entity_id : undefined;\n    const curEntityId = this.stateObj ? this.stateObj.entity_id : undefined;\n\n    if (\n      (!stateObjChanged && !attachedChanged) ||\n      (stateObjChanged && oldEntityId === curEntityId)\n    ) {\n      return;\n    }\n\n    // If we are no longer attached, destroy polyfill.\n    if (attachedChanged && !this._attached) {\n      this._destroyPolyfill();\n      return;\n    }\n\n    // Nothing to do if we are render MJPEG.\n    if (this._shouldRenderMJPEG) {\n      return;\n    }\n\n    // Tear down existing polyfill, if available\n    this._destroyPolyfill();\n\n    if (curEntityId) {\n      this._startHls();\n    }\n  }\n\n  private get _shouldRenderMJPEG() {\n    return (\n      this._forceMJPEG === this.stateObj!.entity_id ||\n      !this.hass!.config.components.includes(\"stream\") ||\n      !supportsFeature(this.stateObj!, CAMERA_SUPPORT_STREAM)\n    );\n  }\n\n  private get _videoEl(): HTMLVideoElement {\n    return this.shadowRoot!.querySelector(\"video\")!;\n  }\n\n  private async _startHls(): Promise<void> {\n    // tslint:disable-next-line\n    const Hls = ((await import(/* webpackChunkName: \"hls.js\" */ \"hls.js\")) as any)\n      .default as HLSModule;\n    let hlsSupported = Hls.isSupported();\n    const videoEl = this._videoEl;\n\n    if (!hlsSupported) {\n      hlsSupported =\n        videoEl.canPlayType(\"application/vnd.apple.mpegurl\") !== \"\";\n    }\n\n    if (!hlsSupported) {\n      this._forceMJPEG = this.stateObj!.entity_id;\n      return;\n    }\n\n    try {\n      const { url } = await fetchStreamUrl(\n        this.hass!,\n        this.stateObj!.entity_id\n      );\n\n      if (Hls.isSupported()) {\n        this._renderHLSPolyfill(videoEl, Hls, url);\n      } else {\n        this._renderHLSNative(videoEl, url);\n      }\n      return;\n    } catch (err) {\n      // Fails if we were unable to get a stream\n      // tslint:disable-next-line\n      console.error(err);\n      this._forceMJPEG = this.stateObj!.entity_id;\n    }\n  }\n\n  private async _renderHLSNative(videoEl: HTMLVideoElement, url: string) {\n    videoEl.src = url;\n    await new Promise((resolve) =>\n      videoEl.addEventListener(\"loadedmetadata\", resolve)\n    );\n    videoEl.play();\n  }\n\n  private async _renderHLSPolyfill(\n    videoEl: HTMLVideoElement,\n    // tslint:disable-next-line\n    Hls: HLSModule,\n    url: string\n  ) {\n    const hls = new Hls();\n    this._hlsPolyfillInstance = hls;\n    hls.attachMedia(videoEl);\n    hls.on(Hls.Events.MEDIA_ATTACHED, () => {\n      hls.loadSource(url);\n    });\n  }\n\n  private _elementResized() {\n    fireEvent(this, \"iron-resize\");\n  }\n\n  private _destroyPolyfill(): void {\n    if (this._hlsPolyfillInstance) {\n      this._hlsPolyfillInstance.destroy();\n      this._hlsPolyfillInstance = undefined;\n    }\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      :host,\n      img,\n      video {\n        display: block;\n      }\n\n      img,\n      video {\n        width: 100%;\n      }\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-camera-stream\": HaCameraStream;\n  }\n}\n","import \"@polymer/iron-flex-layout/iron-flex-layout-classes\";\nimport \"@polymer/paper-icon-button/paper-icon-button\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport { EventsMixin } from \"../mixins/events-mixin\";\n\n/*\n * @appliesMixin EventsMixin\n */\nclass HaClimateControl extends EventsMixin(PolymerElement) {\n  static get template() {\n    return html`\n      <style include=\"iron-flex iron-flex-alignment\"></style>\n      <style>\n        /* local DOM styles go here */\n        :host {\n          @apply --layout-flex;\n          @apply --layout-horizontal;\n          @apply --layout-justified;\n        }\n        .in-flux#target_temperature {\n          color: var(--google-red-500);\n        }\n        #target_temperature {\n          @apply --layout-self-center;\n          font-size: 200%;\n          direction: ltr;\n        }\n        .control-buttons {\n          font-size: 200%;\n          text-align: right;\n        }\n        paper-icon-button {\n          height: 48px;\n          width: 48px;\n        }\n      </style>\n\n      <!-- local DOM goes here -->\n      <div id=\"target_temperature\">[[value]] [[units]]</div>\n      <div class=\"control-buttons\">\n        <div>\n          <paper-icon-button\n            icon=\"hass:chevron-up\"\n            on-click=\"incrementValue\"\n          ></paper-icon-button>\n        </div>\n        <div>\n          <paper-icon-button\n            icon=\"hass:chevron-down\"\n            on-click=\"decrementValue\"\n          ></paper-icon-button>\n        </div>\n      </div>\n    `;\n  }\n\n  static get properties() {\n    return {\n      value: {\n        type: Number,\n        observer: \"valueChanged\",\n      },\n      units: {\n        type: String,\n      },\n      min: {\n        type: Number,\n      },\n      max: {\n        type: Number,\n      },\n      step: {\n        type: Number,\n        value: 1,\n      },\n    };\n  }\n\n  temperatureStateInFlux(inFlux) {\n    this.$.target_temperature.classList.toggle(\"in-flux\", inFlux);\n  }\n\n  _round(val) {\n    // round value to precision derived from step\n    // insired by https://github.com/soundar24/roundSlider/blob/master/src/roundslider.js\n    const s = this.step.toString().split(\".\");\n    return s[1] ? parseFloat(val.toFixed(s[1].length)) : Math.round(val);\n  }\n\n  incrementValue() {\n    const newval = this._round(this.value + this.step);\n    if (this.value < this.max) {\n      this.last_changed = Date.now();\n      this.temperatureStateInFlux(true);\n    }\n    if (newval <= this.max) {\n      // If no initial target_temp\n      // this forces control to start\n      // from the min configured instead of 0\n      if (newval <= this.min) {\n        this.value = this.min;\n      } else {\n        this.value = newval;\n      }\n    } else {\n      this.value = this.max;\n    }\n  }\n\n  decrementValue() {\n    const newval = this._round(this.value - this.step);\n    if (this.value > this.min) {\n      this.last_changed = Date.now();\n      this.temperatureStateInFlux(true);\n    }\n    if (newval >= this.min) {\n      this.value = newval;\n    } else {\n      this.value = this.min;\n    }\n  }\n\n  valueChanged() {\n    // when the last_changed timestamp is changed,\n    // trigger a potential event fire in\n    // the future, as long as last changed is far enough in the\n    // past.\n    if (this.last_changed) {\n      window.setTimeout(() => {\n        const now = Date.now();\n        if (now - this.last_changed >= 2000) {\n          this.fire(\"change\");\n          this.temperatureStateInFlux(false);\n          this.last_changed = null;\n        }\n      }, 2010);\n    }\n  }\n}\n\ncustomElements.define(\"ha-climate-control\", HaClimateControl);\n","import { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport { EventsMixin } from \"../mixins/events-mixin\";\n\n/**\n * Color-picker custom element\n *\n * @appliesMixin EventsMixin\n */\nclass HaColorPicker extends EventsMixin(PolymerElement) {\n  static get template() {\n    return html`\n      <style>\n        :host {\n          user-select: none;\n          -webkit-user-select: none;\n        }\n\n        #canvas {\n          position: relative;\n          width: 100%;\n          max-width: 330px;\n        }\n        #canvas > * {\n          display: block;\n        }\n        #interactionLayer {\n          color: white;\n          position: absolute;\n          cursor: crosshair;\n          width: 100%;\n          height: 100%;\n          overflow: visible;\n        }\n        #backgroundLayer {\n          width: 100%;\n          overflow: visible;\n          --wheel-bordercolor: var(--ha-color-picker-wheel-bordercolor, white);\n          --wheel-borderwidth: var(--ha-color-picker-wheel-borderwidth, 3);\n          --wheel-shadow: var(\n            --ha-color-picker-wheel-shadow,\n            rgb(15, 15, 15) 10px 5px 5px 0px\n          );\n        }\n\n        #marker {\n          fill: currentColor;\n          stroke: var(--ha-color-picker-marker-bordercolor, white);\n          stroke-width: var(--ha-color-picker-marker-borderwidth, 3);\n          filter: url(#marker-shadow);\n        }\n        .dragging #marker {\n        }\n\n        #colorTooltip {\n          display: none;\n          fill: currentColor;\n          stroke: var(--ha-color-picker-tooltip-bordercolor, white);\n          stroke-width: var(--ha-color-picker-tooltip-borderwidth, 3);\n        }\n\n        .touch.dragging #colorTooltip {\n          display: inherit;\n        }\n      </style>\n      <div id=\"canvas\">\n        <svg id=\"interactionLayer\">\n          <defs>\n            <filter\n              id=\"marker-shadow\"\n              x=\"-50%\"\n              y=\"-50%\"\n              width=\"200%\"\n              height=\"200%\"\n              filterUnits=\"objectBoundingBox\"\n            >\n              <feOffset\n                result=\"offOut\"\n                in=\"SourceAlpha\"\n                dx=\"2\"\n                dy=\"2\"\n              ></feOffset>\n              <feGaussianBlur\n                result=\"blurOut\"\n                in=\"offOut\"\n                stdDeviation=\"2\"\n              ></feGaussianBlur>\n              <feComponentTransfer in=\"blurOut\" result=\"alphaOut\">\n                <feFuncA type=\"linear\" slope=\"0.3\"></feFuncA>\n              </feComponentTransfer>\n              <feBlend\n                in=\"SourceGraphic\"\n                in2=\"alphaOut\"\n                mode=\"normal\"\n              ></feBlend>\n            </filter>\n          </defs>\n        </svg>\n        <canvas id=\"backgroundLayer\"></canvas>\n      </div>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hsColor: {\n        type: Object,\n      },\n\n      // use these properties to update the state via attributes\n      desiredHsColor: {\n        type: Object,\n        observer: \"applyHsColor\",\n      },\n\n      // width, height and radius apply to the coordinates of\n      // of the canvas.\n      // border width are relative to these numbers\n      // the onscreen displayed size should be controlled with css\n      // and should be the same or smaller\n      width: {\n        type: Number,\n        value: 500,\n      },\n\n      height: {\n        type: Number,\n        value: 500,\n      },\n\n      radius: {\n        type: Number,\n        value: 225,\n      },\n\n      // the amount segments for the hue\n      // 0 = continuous gradient\n      // other than 0 gives 'pie-pieces'\n      hueSegments: {\n        type: Number,\n        value: 0,\n        observer: \"segmentationChange\",\n      },\n\n      // the amount segments for the hue\n      // 0 = continuous gradient\n      // 1 = only fully saturated\n      // > 1 = segments from white to fully saturated\n      saturationSegments: {\n        type: Number,\n        value: 0,\n        observer: \"segmentationChange\",\n      },\n\n      // set to true to make the segments purely esthetical\n      // this allows selection off all collors, also\n      // interpolated between the segments\n      ignoreSegments: {\n        type: Boolean,\n        value: false,\n      },\n\n      // throttle te amount of 'colorselected' events fired\n      // value is timeout in milliseconds\n      throttle: {\n        type: Number,\n        value: 500,\n      },\n    };\n  }\n\n  ready() {\n    super.ready();\n    this.setupLayers();\n    this.drawColorWheel();\n    this.drawMarker();\n\n    this.interactionLayer.addEventListener(\"mousedown\", (ev) =>\n      this.onMouseDown(ev)\n    );\n    this.interactionLayer.addEventListener(\"touchstart\", (ev) =>\n      this.onTouchStart(ev)\n    );\n  }\n\n  // converts browser coordinates to canvas canvas coordinates\n  // origin is wheel center\n  // returns {x: X, y: Y} object\n  convertToCanvasCoordinates(clientX, clientY) {\n    var svgPoint = this.interactionLayer.createSVGPoint();\n    svgPoint.x = clientX;\n    svgPoint.y = clientY;\n    var cc = svgPoint.matrixTransform(\n      this.interactionLayer.getScreenCTM().inverse()\n    );\n    return { x: cc.x, y: cc.y };\n  }\n\n  // Mouse events\n\n  onMouseDown(ev) {\n    const cc = this.convertToCanvasCoordinates(ev.clientX, ev.clientY);\n    // return if we're not on the wheel\n    if (!this.isInWheel(cc.x, cc.y)) {\n      return;\n    }\n    // a mousedown in wheel is always a color select action\n    this.onMouseSelect(ev);\n    // allow dragging\n    this.canvas.classList.add(\"mouse\", \"dragging\");\n    this.addEventListener(\"mousemove\", this.onMouseSelect);\n    this.addEventListener(\"mouseup\", this.onMouseUp);\n  }\n\n  onMouseUp() {\n    this.canvas.classList.remove(\"mouse\", \"dragging\");\n    this.removeEventListener(\"mousemove\", this.onMouseSelect);\n  }\n\n  onMouseSelect(ev) {\n    requestAnimationFrame(() => this.processUserSelect(ev));\n  }\n\n  // Touch events\n\n  onTouchStart(ev) {\n    var touch = ev.changedTouches[0];\n    const cc = this.convertToCanvasCoordinates(touch.clientX, touch.clientY);\n    // return if we're not on the wheel\n    if (!this.isInWheel(cc.x, cc.y)) {\n      return;\n    }\n    if (ev.target === this.marker) {\n      // drag marker\n      ev.preventDefault();\n      this.canvas.classList.add(\"touch\", \"dragging\");\n      this.addEventListener(\"touchmove\", this.onTouchSelect);\n      this.addEventListener(\"touchend\", this.onTouchEnd);\n      return;\n    }\n    // don't fire color selection immediately,\n    // wait for touchend and invalidate when we scroll\n    this.tapBecameScroll = false;\n    this.addEventListener(\"touchend\", this.onTap);\n    this.addEventListener(\n      \"touchmove\",\n      () => {\n        this.tapBecameScroll = true;\n      },\n      { passive: true }\n    );\n  }\n\n  onTap(ev) {\n    if (this.tapBecameScroll) {\n      return;\n    }\n    ev.preventDefault();\n    this.onTouchSelect(ev);\n  }\n\n  onTouchEnd() {\n    this.canvas.classList.remove(\"touch\", \"dragging\");\n    this.removeEventListener(\"touchmove\", this.onTouchSelect);\n  }\n\n  onTouchSelect(ev) {\n    requestAnimationFrame(() => this.processUserSelect(ev.changedTouches[0]));\n  }\n\n  /*\n   * General event/selection handling\n   */\n\n  // Process user input to color\n  processUserSelect(ev) {\n    var canvasXY = this.convertToCanvasCoordinates(ev.clientX, ev.clientY);\n    var hs = this.getColor(canvasXY.x, canvasXY.y);\n    this.onColorSelect(hs);\n  }\n\n  // apply color to marker position and canvas\n  onColorSelect(hs) {\n    this.setMarkerOnColor(hs); // marker always follows mounse 'raw' hs value (= mouse position)\n    if (!this.ignoreSegments) {\n      // apply segments if needed\n      hs = this.applySegmentFilter(hs);\n    }\n    // always apply the new color to the interface / canvas\n    this.applyColorToCanvas(hs);\n    // throttling is applied to updating the exposed colors (properties)\n    // and firing of events\n    if (this.colorSelectIsThrottled) {\n      // make sure we apply the last selected color\n      // eventually after throttle limit has passed\n      clearTimeout(this.ensureFinalSelect);\n      this.ensureFinalSelect = setTimeout(() => {\n        this.fireColorSelected(hs); // do it for the final time\n      }, this.throttle);\n      return;\n    }\n    this.fireColorSelected(hs); // do it\n    this.colorSelectIsThrottled = true;\n    setTimeout(() => {\n      this.colorSelectIsThrottled = false;\n    }, this.throttle);\n  }\n\n  // set color values and fire colorselected event\n  fireColorSelected(hs) {\n    this.hsColor = hs;\n    this.fire(\"colorselected\", { hs: { h: hs.h, s: hs.s } });\n  }\n\n  /*\n   * Interface updating\n   */\n\n  // set marker position to the given color\n  setMarkerOnColor(hs) {\n    var dist = hs.s * this.radius;\n    var theta = ((hs.h - 180) / 180) * Math.PI;\n    var markerdX = -dist * Math.cos(theta);\n    var markerdY = -dist * Math.sin(theta);\n    var translateString = `translate(${markerdX},${markerdY})`;\n    this.marker.setAttribute(\"transform\", translateString);\n    this.tooltip.setAttribute(\"transform\", translateString);\n  }\n\n  // apply given color to interface elements\n  applyColorToCanvas(hs) {\n    // we're not really converting hs to hsl here, but we keep it cheap\n    // setting the color on the interactionLayer, the svg elements can inherit\n    this.interactionLayer.style.color = `hsl(${hs.h}, 100%, ${100 -\n      hs.s * 50}%)`;\n  }\n\n  applyHsColor(hs) {\n    // do nothing is we already have the same color\n    if (this.hsColor && this.hsColor.h === hs.h && this.hsColor.s === hs.s) {\n      return;\n    }\n    this.setMarkerOnColor(hs); // marker is always set on 'raw' hs position\n    if (!this.ignoreSegments) {\n      // apply segments if needed\n      hs = this.applySegmentFilter(hs);\n    }\n    this.hsColor = hs;\n    // always apply the new color to the interface / canvas\n    this.applyColorToCanvas(hs);\n  }\n\n  /*\n   * input processing helpers\n   */\n\n  // get angle (degrees)\n  getAngle(dX, dY) {\n    var theta = Math.atan2(-dY, -dX); // radians from the left edge, clockwise = positive\n    var angle = (theta / Math.PI) * 180 + 180; // degrees, clockwise from right\n    return angle;\n  }\n\n  // returns true when coordinates are in the colorwheel\n  isInWheel(x, y) {\n    return this.getDistance(x, y) <= 1;\n  }\n\n  // returns distance from wheel center, 0 = center, 1 = edge, >1 = outside\n  getDistance(dX, dY) {\n    return Math.sqrt(dX * dX + dY * dY) / this.radius;\n  }\n\n  /*\n   * Getting colors\n   */\n\n  getColor(x, y) {\n    var hue = this.getAngle(x, y); // degrees, clockwise from right\n    var relativeDistance = this.getDistance(x, y); // edge of radius = 1\n    var sat = Math.min(relativeDistance, 1); // Distance from center\n    return { h: hue, s: sat };\n  }\n\n  applySegmentFilter(hs) {\n    // apply hue segment steps\n    if (this.hueSegments) {\n      const angleStep = 360 / this.hueSegments;\n      const halfAngleStep = angleStep / 2;\n      hs.h -= halfAngleStep; // take the 'centered segemnts' into account\n      if (hs.h < 0) {\n        hs.h += 360;\n      } // don't end up below 0\n      const rest = hs.h % angleStep;\n      hs.h -= rest - angleStep;\n    }\n\n    // apply saturation segment steps\n    if (this.saturationSegments) {\n      if (this.saturationSegments === 1) {\n        hs.s = 1;\n      } else {\n        var segmentSize = 1 / this.saturationSegments;\n        var saturationStep = 1 / (this.saturationSegments - 1);\n        var calculatedSat = Math.floor(hs.s / segmentSize) * saturationStep;\n        hs.s = Math.min(calculatedSat, 1);\n      }\n    }\n    return hs;\n  }\n\n  /*\n   * Drawing related stuff\n   */\n\n  setupLayers() {\n    this.canvas = this.$.canvas;\n    this.backgroundLayer = this.$.backgroundLayer;\n    this.interactionLayer = this.$.interactionLayer;\n\n    // coordinate origin position (center of the wheel)\n    this.originX = this.width / 2;\n    this.originY = this.originX;\n\n    // synchronise width/height coordinates\n    this.backgroundLayer.width = this.width;\n    this.backgroundLayer.height = this.height;\n    this.interactionLayer.setAttribute(\n      \"viewBox\",\n      `${-this.originX} ${-this.originY} ${this.width} ${this.height}`\n    );\n  }\n\n  drawColorWheel() {\n    /*\n     *  Setting up all paremeters\n     */\n    let shadowColor;\n    let shadowOffsetX;\n    let shadowOffsetY;\n    let shadowBlur;\n    const context = this.backgroundLayer.getContext(\"2d\");\n    // postioning and sizing\n    const cX = this.originX;\n    const cY = this.originY;\n    const radius = this.radius;\n    const counterClockwise = false;\n    // styling of the wheel\n    const wheelStyle = window.getComputedStyle(this.backgroundLayer, null);\n    const borderWidth = parseInt(\n      wheelStyle.getPropertyValue(\"--wheel-borderwidth\"),\n      10\n    );\n    const borderColor = wheelStyle\n      .getPropertyValue(\"--wheel-bordercolor\")\n      .trim();\n    const wheelShadow = wheelStyle.getPropertyValue(\"--wheel-shadow\").trim();\n    // extract shadow properties from  CCS variable\n    // the shadow should be defined as: \"10px 5px 5px 0px COLOR\"\n    if (wheelShadow !== \"none\") {\n      const values = wheelShadow.split(\"px \");\n      shadowColor = values.pop();\n      shadowOffsetX = parseInt(values[0], 10);\n      shadowOffsetY = parseInt(values[1], 10);\n      shadowBlur = parseInt(values[2], 10) || 0;\n    }\n    const borderRadius = radius + borderWidth / 2;\n    const wheelRadius = radius;\n    const shadowRadius = radius + borderWidth;\n\n    /*\n     *  Drawing functions\n     */\n    function drawCircle(hueSegments, saturationSegments) {\n      hueSegments = hueSegments || 360; // reset 0 segments to 360\n      const angleStep = 360 / hueSegments;\n      const halfAngleStep = angleStep / 2; // center segments on color\n      for (var angle = 0; angle <= 360; angle += angleStep) {\n        var startAngle = (angle - halfAngleStep) * (Math.PI / 180);\n        var endAngle = (angle + halfAngleStep + 1) * (Math.PI / 180);\n        context.beginPath();\n        context.moveTo(cX, cY);\n        context.arc(\n          cX,\n          cY,\n          wheelRadius,\n          startAngle,\n          endAngle,\n          counterClockwise\n        );\n        context.closePath();\n        // gradient\n        var gradient = context.createRadialGradient(\n          cX,\n          cY,\n          0,\n          cX,\n          cY,\n          wheelRadius\n        );\n        let lightness = 100;\n        // first gradient stop\n        gradient.addColorStop(0, `hsl(${angle}, 100%, ${lightness}%)`);\n        // segment gradient stops\n        if (saturationSegments > 0) {\n          const ratioStep = 1 / saturationSegments;\n          let ratio = 0;\n          for (var stop = 1; stop < saturationSegments; stop += 1) {\n            var prevLighness = lightness;\n            ratio = stop * ratioStep;\n            lightness = 100 - 50 * ratio;\n            gradient.addColorStop(\n              ratio,\n              `hsl(${angle}, 100%, ${prevLighness}%)`\n            );\n            gradient.addColorStop(ratio, `hsl(${angle}, 100%, ${lightness}%)`);\n          }\n          gradient.addColorStop(ratio, `hsl(${angle}, 100%, 50%)`);\n        }\n        // last gradient stop\n        gradient.addColorStop(1, `hsl(${angle}, 100%, 50%)`);\n\n        context.fillStyle = gradient;\n        context.fill();\n      }\n    }\n\n    function drawShadow() {\n      context.save();\n      context.beginPath();\n      context.arc(cX, cY, shadowRadius, 0, 2 * Math.PI, false);\n      context.shadowColor = shadowColor;\n      context.shadowOffsetX = shadowOffsetX;\n      context.shadowOffsetY = shadowOffsetY;\n      context.shadowBlur = shadowBlur;\n      context.fillStyle = \"white\";\n      context.fill();\n      context.restore();\n    }\n\n    function drawBorder() {\n      context.beginPath();\n      context.arc(cX, cY, borderRadius, 0, 2 * Math.PI, false);\n      context.lineWidth = borderWidth;\n      context.strokeStyle = borderColor;\n      context.stroke();\n    }\n\n    /*\n     *   Call the drawing functions\n     *   draws the shadow, wheel and border\n     */\n    if (wheelStyle.shadow !== \"none\") {\n      drawShadow();\n    }\n    drawCircle(this.hueSegments, this.saturationSegments);\n    if (borderWidth > 0) {\n      drawBorder();\n    }\n  }\n\n  /*\n   *   Draw the (draggable) marker and tooltip\n   *   on the interactionLayer)\n   */\n\n  drawMarker() {\n    const svgElement = this.interactionLayer;\n    const markerradius = this.radius * 0.08;\n    const tooltipradius = this.radius * 0.15;\n    const TooltipOffsetY = -(tooltipradius * 3);\n    const TooltipOffsetX = 0;\n\n    svgElement.marker = document.createElementNS(\n      \"http://www.w3.org/2000/svg\",\n      \"circle\"\n    );\n    svgElement.marker.setAttribute(\"id\", \"marker\");\n    svgElement.marker.setAttribute(\"r\", markerradius);\n    this.marker = svgElement.marker;\n    svgElement.appendChild(svgElement.marker);\n\n    svgElement.tooltip = document.createElementNS(\n      \"http://www.w3.org/2000/svg\",\n      \"circle\"\n    );\n    svgElement.tooltip.setAttribute(\"id\", \"colorTooltip\");\n    svgElement.tooltip.setAttribute(\"r\", tooltipradius);\n    svgElement.tooltip.setAttribute(\"cx\", TooltipOffsetX);\n    svgElement.tooltip.setAttribute(\"cy\", TooltipOffsetY);\n    this.tooltip = svgElement.tooltip;\n    svgElement.appendChild(svgElement.tooltip);\n  }\n\n  segmentationChange() {\n    if (this.backgroundLayer) {\n      this.drawColorWheel();\n    }\n  }\n}\ncustomElements.define(\"ha-color-picker\", HaColorPicker);\n","import { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport \"./ha-paper-slider\";\nimport \"./ha-icon\";\n\nclass HaLabeledSlider extends PolymerElement {\n  static get template() {\n    return html`\n      <style>\n        :host {\n          display: block;\n        }\n\n        .title {\n          margin-bottom: 16px;\n          opacity: var(--dark-primary-opacity);\n        }\n\n        ha-icon {\n          float: left;\n          margin-top: 4px;\n          opacity: var(--dark-secondary-opacity);\n        }\n\n        ha-paper-slider {\n          background-image: var(--ha-slider-background);\n        }\n      </style>\n\n      <div class=\"title\">[[caption]]</div>\n      <div class=\"extra-container\"><slot name=\"extra\"></slot></div>\n      <div class=\"slider-container\">\n        <ha-icon icon=\"[[icon]]\" hidden$=\"[[!icon]]\"></ha-icon>\n        <ha-paper-slider\n          min=\"[[min]]\"\n          max=\"[[max]]\"\n          step=\"[[step]]\"\n          pin=\"[[pin]]\"\n          disabled=\"[[disabled]]\"\n          disabled=\"[[disabled]]\"\n          value=\"{{value}}\"\n        ></ha-paper-slider>\n      </div>\n    `;\n  }\n\n  static get properties() {\n    return {\n      caption: String,\n      disabled: Boolean,\n      min: Number,\n      max: Number,\n      pin: Boolean,\n      step: Number,\n\n      extra: {\n        type: Boolean,\n        value: false,\n      },\n      ignoreBarTouch: {\n        type: Boolean,\n        value: true,\n      },\n      icon: {\n        type: String,\n        value: \"\",\n      },\n      value: {\n        type: Number,\n        notify: true,\n      },\n    };\n  }\n}\n\ncustomElements.define(\"ha-labeled-slider\", HaLabeledSlider);\n","import { Constructor } from \"lit-element\";\nimport \"@polymer/paper-icon-button/paper-icon-button\";\n// Not duplicate, this is for typing.\n// tslint:disable-next-line\nimport { PaperIconButtonElement } from \"@polymer/paper-icon-button/paper-icon-button\";\n\nconst paperIconButtonClass = customElements.get(\n  \"paper-icon-button\"\n) as Constructor<PaperIconButtonElement>;\n\nexport class HaPaperIconButtonArrowPrev extends paperIconButtonClass {\n  public hassio?: boolean;\n\n  public connectedCallback() {\n    this.icon =\n      window.getComputedStyle(this).direction === \"ltr\"\n        ? this.hassio\n          ? \"hassio:arrow-left\"\n          : \"hass:arrow-left\"\n        : this.hassio\n        ? \"hassio:arrow-right\"\n        : \"hass:arrow-right\";\n\n    // calling super after setting icon to have it consistently show the icon (otherwise not always shown)\n    super.connectedCallback();\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-paper-icon-button-arrow-prev\": HaPaperIconButtonArrowPrev;\n  }\n}\n\ncustomElements.define(\n  \"ha-paper-icon-button-arrow-prev\",\n  HaPaperIconButtonArrowPrev\n);\n","import \"@polymer/paper-slider/paper-slider\";\n\n/**\n * @polymer\n * @customElement\n * @appliesMixin paper-slider\n */\nconst PaperSliderClass = customElements.get(\"paper-slider\");\n\nclass HaPaperSlider extends PaperSliderClass {\n  static get template() {\n    const tpl = document.createElement(\"template\");\n    tpl.innerHTML = PaperSliderClass.template.innerHTML;\n    const styleEl = document.createElement(\"style\");\n    styleEl.innerHTML = `\n      .pin > .slider-knob > .slider-knob-inner {\n        font-size:  var(--ha-paper-slider-pin-font-size, 10px);\n        line-height: normal;\n      }\n\n      .pin > .slider-knob > .slider-knob-inner::before {\n        top: unset;\n        margin-left: unset;\n\n        bottom: calc(15px + var(--calculated-paper-slider-height)/2);\n        left: 50%;\n        width: 2.2em;\n        height: 2.2em;\n\n        -webkit-transform-origin: left bottom;\n        transform-origin: left bottom;\n        -webkit-transform: rotate(-45deg) scale(0) translate(0);\n        transform: rotate(-45deg) scale(0) translate(0);\n      }\n\n      .pin.expand > .slider-knob > .slider-knob-inner::before {\n        -webkit-transform: rotate(-45deg) scale(1) translate(7px, -7px);\n        transform: rotate(-45deg) scale(1) translate(7px, -7px);\n      }\n\n      .pin > .slider-knob > .slider-knob-inner::after {\n        top: unset;\n        font-size: unset;\n\n        bottom: calc(15px + var(--calculated-paper-slider-height)/2);\n        left: 50%;\n        margin-left: -1.1em;\n        width: 2.2em;\n        height: 2.1em;\n\n        -webkit-transform-origin: center bottom;\n        transform-origin: center bottom;\n        -webkit-transform: scale(0) translate(0);\n        transform: scale(0) translate(0);\n      }\n\n      .pin.expand > .slider-knob > .slider-knob-inner::after {\n        -webkit-transform: scale(1) translate(0, -10px);\n        transform: scale(1) translate(0, -10px);\n      }\n\n      :host([dir=\"rtl\"]) .pin.expand > .slider-knob > .slider-knob-inner::after {\n        -webkit-transform: scale(1) translate(0, -17px) scaleX(-1) !important;\n        transform: scale(1) translate(0, -17px) scaleX(-1) !important;\n        }\n    `;\n    tpl.content.appendChild(styleEl);\n    return tpl;\n  }\n}\ncustomElements.define(\"ha-paper-slider\", HaPaperSlider);\n","import \"@polymer/iron-flex-layout/iron-flex-layout-classes\";\nimport \"@polymer/paper-icon-button/paper-icon-button\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport { EventsMixin } from \"../mixins/events-mixin\";\n\n/*\n * @appliesMixin EventsMixin\n */\nclass HaWaterHeaterControl extends EventsMixin(PolymerElement) {\n  static get template() {\n    return html`\n      <style include=\"iron-flex iron-flex-alignment\"></style>\n      <style>\n        /* local DOM styles go here */\n        :host {\n          @apply --layout-flex;\n          @apply --layout-horizontal;\n          @apply --layout-justified;\n        }\n        .in-flux#target_temperature {\n          color: var(--google-red-500);\n        }\n        #target_temperature {\n          @apply --layout-self-center;\n          font-size: 200%;\n        }\n        .control-buttons {\n          font-size: 200%;\n          text-align: right;\n        }\n        paper-icon-button {\n          height: 48px;\n          width: 48px;\n        }\n      </style>\n\n      <!-- local DOM goes here -->\n      <div id=\"target_temperature\">[[value]] [[units]]</div>\n      <div class=\"control-buttons\">\n        <div>\n          <paper-icon-button\n            icon=\"hass:chevron-up\"\n            on-click=\"incrementValue\"\n          ></paper-icon-button>\n        </div>\n        <div>\n          <paper-icon-button\n            icon=\"hass:chevron-down\"\n            on-click=\"decrementValue\"\n          ></paper-icon-button>\n        </div>\n      </div>\n    `;\n  }\n\n  static get properties() {\n    return {\n      value: {\n        type: Number,\n        observer: \"valueChanged\",\n      },\n      units: {\n        type: String,\n      },\n      min: {\n        type: Number,\n      },\n      max: {\n        type: Number,\n      },\n      step: {\n        type: Number,\n        value: 1,\n      },\n    };\n  }\n\n  temperatureStateInFlux(inFlux) {\n    this.$.target_temperature.classList.toggle(\"in-flux\", inFlux);\n  }\n\n  incrementValue() {\n    const newval = this.value + this.step;\n    if (this.value < this.max) {\n      this.last_changed = Date.now();\n      this.temperatureStateInFlux(true);\n    }\n    if (newval <= this.max) {\n      // If no initial target_temp\n      // this forces control to start\n      // from the min configured instead of 0\n      if (newval <= this.min) {\n        this.value = this.min;\n      } else {\n        this.value = newval;\n      }\n    } else {\n      this.value = this.max;\n    }\n  }\n\n  decrementValue() {\n    const newval = this.value - this.step;\n    if (this.value > this.min) {\n      this.last_changed = Date.now();\n      this.temperatureStateInFlux(true);\n    }\n    if (newval >= this.min) {\n      this.value = newval;\n    } else {\n      this.value = this.min;\n    }\n  }\n\n  valueChanged() {\n    // when the last_changed timestamp is changed,\n    // trigger a potential event fire in\n    // the future, as long as last changed is far enough in the\n    // past.\n    if (this.last_changed) {\n      window.setTimeout(() => {\n        const now = Date.now();\n        if (now - this.last_changed >= 2000) {\n          this.fire(\"change\");\n          this.temperatureStateInFlux(false);\n          this.last_changed = null;\n        }\n      }, 2010);\n    }\n  }\n}\n\ncustomElements.define(\"ha-water_heater-control\", HaWaterHeaterControl);\n","import \"@polymer/paper-dialog-behavior/paper-dialog-shared-styles\";\nimport \"@polymer/paper-dialog-scrollable/paper-dialog-scrollable\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport \"../resources/ha-style\";\n\nimport \"./more-info/more-info-controls\";\nimport \"./more-info/more-info-settings\";\n\nimport computeStateDomain from \"../common/entity/compute_state_domain\";\nimport isComponentLoaded from \"../common/config/is_component_loaded\";\n\nimport DialogMixin from \"../mixins/dialog-mixin\";\n\n/*\n * @appliesMixin DialogMixin\n */\nclass HaMoreInfoDialog extends DialogMixin(PolymerElement) {\n  static get template() {\n    return html`\n      <style include=\"ha-style-dialog paper-dialog-shared-styles\">\n        :host {\n          font-size: 14px;\n          width: 365px;\n          border-radius: 2px;\n        }\n\n        more-info-controls,\n        more-info-settings {\n          --more-info-header-background: var(--secondary-background-color);\n          --more-info-header-color: var(--primary-text-color);\n          --ha-more-info-app-toolbar-title: {\n            /* Design guideline states 24px, changed to 16 to align with state info */\n            margin-left: 16px;\n            line-height: 1.3em;\n            max-height: 2.6em;\n            overflow: hidden;\n            /* webkit and blink still support simple multiline text-overflow */\n            display: -webkit-box;\n            -webkit-line-clamp: 2;\n            -webkit-box-orient: vertical;\n            text-overflow: ellipsis;\n          }\n        }\n\n        /* overrule the ha-style-dialog max-height on small screens */\n        @media all and (max-width: 450px), all and (max-height: 500px) {\n          more-info-controls,\n          more-info-settings {\n            --more-info-header-background: var(--primary-color);\n            --more-info-header-color: var(--text-primary-color);\n          }\n          :host {\n            width: 100% !important;\n            border-radius: 0px;\n            position: fixed !important;\n            margin: 0;\n          }\n          :host::before {\n            content: \"\";\n            position: fixed;\n            z-index: -1;\n            top: 0px;\n            left: 0px;\n            right: 0px;\n            bottom: 0px;\n            background-color: inherit;\n          }\n        }\n\n        :host([data-domain=\"camera\"]) {\n          width: auto;\n        }\n\n        :host([data-domain=\"history_graph\"]),\n        :host([large]) {\n          width: 90%;\n        }\n      </style>\n\n      <template is=\"dom-if\" if=\"[[!_page]]\">\n        <more-info-controls\n          class=\"no-padding\"\n          hass=\"[[hass]]\"\n          state-obj=\"[[stateObj]]\"\n          dialog-element=\"[[_dialogElement]]\"\n          can-configure=\"[[_registryInfo]]\"\n          large=\"{{large}}\"\n        ></more-info-controls>\n      </template>\n      <template is=\"dom-if\" if='[[_equals(_page, \"settings\")]]'>\n        <more-info-settings\n          class=\"no-padding\"\n          hass=\"[[hass]]\"\n          state-obj=\"[[stateObj]]\"\n          registry-info=\"{{_registryInfo}}\"\n        ></more-info-settings>\n      </template>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      stateObj: {\n        type: Object,\n        computed: \"_computeStateObj(hass)\",\n        observer: \"_stateObjChanged\",\n      },\n\n      large: {\n        type: Boolean,\n        reflectToAttribute: true,\n        observer: \"_largeChanged\",\n      },\n\n      _dialogElement: Object,\n      _registryInfo: Object,\n\n      _page: {\n        type: String,\n        value: null,\n      },\n\n      dataDomain: {\n        computed: \"_computeDomain(stateObj)\",\n        reflectToAttribute: true,\n      },\n    };\n  }\n\n  static get observers() {\n    return [\"_dialogOpenChanged(opened)\"];\n  }\n\n  ready() {\n    super.ready();\n    this._dialogElement = this;\n    this.addEventListener(\"more-info-page\", (ev) => {\n      this._page = ev.detail.page;\n    });\n  }\n\n  _computeDomain(stateObj) {\n    return stateObj ? computeStateDomain(stateObj) : \"\";\n  }\n\n  _computeStateObj(hass) {\n    return hass.states[hass.moreInfoEntityId] || null;\n  }\n\n  async _stateObjChanged(newVal, oldVal) {\n    if (!newVal) {\n      this.setProperties({\n        opened: false,\n        _page: null,\n        _registryInfo: null,\n        large: false,\n      });\n      return;\n    }\n\n    requestAnimationFrame(() =>\n      requestAnimationFrame(() => {\n        // allow dialog to render content before showing it so it will be\n        // positioned correctly.\n        this.opened = true;\n      })\n    );\n\n    if (\n      !isComponentLoaded(this.hass, \"config\") ||\n      (oldVal && oldVal.entity_id === newVal.entity_id)\n    ) {\n      return;\n    }\n\n    if (this.hass.user.is_admin) {\n      try {\n        const info = await this.hass.callWS({\n          type: \"config/entity_registry/get\",\n          entity_id: newVal.entity_id,\n        });\n        this._registryInfo = info;\n      } catch (err) {\n        this._registryInfo = null;\n      }\n    }\n  }\n\n  _dialogOpenChanged(newVal) {\n    if (!newVal && this.stateObj) {\n      this.fire(\"hass-more-info\", { entityId: null });\n    }\n  }\n\n  _equals(a, b) {\n    return a === b;\n  }\n\n  _largeChanged() {\n    this.notifyResize();\n  }\n}\ncustomElements.define(\"ha-more-info-dialog\", HaMoreInfoDialog);\n","import \"@polymer/iron-flex-layout/iron-flex-layout-classes\";\nimport \"@material/mwc-button\";\nimport \"@polymer/paper-input/paper-input\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport { EventsMixin } from \"../../../mixins/events-mixin\";\nimport LocalizeMixin from \"../../../mixins/localize-mixin\";\n\nclass MoreInfoAlarmControlPanel extends LocalizeMixin(\n  EventsMixin(PolymerElement)\n) {\n  static get template() {\n    return html`\n      <style include=\"iron-flex\"></style>\n      <style>\n        paper-input {\n          margin: auto;\n          max-width: 200px;\n        }\n        .pad {\n          display: flex;\n          justify-content: center;\n          margin-bottom: 24px;\n        }\n        .pad div {\n          display: flex;\n          flex-direction: column;\n        }\n        .pad mwc-button {\n          width: 80px;\n        }\n        .actions mwc-button {\n          min-width: 160px;\n          margin-bottom: 16px;\n        }\n        mwc-button.disarm {\n          color: var(--google-red-500);\n        }\n      </style>\n\n      <template is=\"dom-if\" if=\"[[_codeFormat]]\">\n        <paper-input\n          label=\"[[localize('ui.card.alarm_control_panel.code')]]\"\n          value=\"{{_enteredCode}}\"\n          type=\"password\"\n          disabled=\"[[!_inputEnabled]]\"\n        ></paper-input>\n\n        <template is=\"dom-if\" if=\"[[_isNumber(_codeFormat)]]\">\n          <div class=\"pad\">\n            <div>\n              <mwc-button\n                on-click=\"_digitClicked\"\n                disabled=\"[[!_inputEnabled]]\"\n                data-digit=\"1\"\n                raised\n                >1</mwc-button\n              >\n              <mwc-button\n                on-click=\"_digitClicked\"\n                disabled=\"[[!_inputEnabled]]\"\n                data-digit=\"4\"\n                raised\n                >4</mwc-button\n              >\n              <mwc-button\n                on-click=\"_digitClicked\"\n                disabled=\"[[!_inputEnabled]]\"\n                data-digit=\"7\"\n                raised\n                >7</mwc-button\n              >\n            </div>\n            <div>\n              <mwc-button\n                on-click=\"_digitClicked\"\n                disabled=\"[[!_inputEnabled]]\"\n                data-digit=\"2\"\n                raised\n                >2</mwc-button\n              >\n              <mwc-button\n                on-click=\"_digitClicked\"\n                disabled=\"[[!_inputEnabled]]\"\n                data-digit=\"5\"\n                raised\n                >5</mwc-button\n              >\n              <mwc-button\n                on-click=\"_digitClicked\"\n                disabled=\"[[!_inputEnabled]]\"\n                data-digit=\"8\"\n                raised\n                >8</mwc-button\n              >\n              <mwc-button\n                on-click=\"_digitClicked\"\n                disabled=\"[[!_inputEnabled]]\"\n                data-digit=\"0\"\n                raised\n                >0</mwc-button\n              >\n            </div>\n            <div>\n              <mwc-button\n                on-click=\"_digitClicked\"\n                disabled=\"[[!_inputEnabled]]\"\n                data-digit=\"3\"\n                raised\n                >3</mwc-button\n              >\n              <mwc-button\n                on-click=\"_digitClicked\"\n                disabled=\"[[!_inputEnabled]]\"\n                data-digit=\"6\"\n                raised\n                >6</mwc-button\n              >\n              <mwc-button\n                on-click=\"_digitClicked\"\n                disabled=\"[[!_inputEnabled]]\"\n                data-digit=\"9\"\n                raised\n                >9</mwc-button\n              >\n              <mwc-button\n                on-click=\"_clearEnteredCode\"\n                disabled=\"[[!_inputEnabled]]\"\n                raised\n              >\n                [[localize('ui.card.alarm_control_panel.clear_code')]]\n              </mwc-button>\n            </div>\n          </div>\n        </template>\n      </template>\n\n      <div class=\"layout horizontal center-justified actions\">\n        <template is=\"dom-if\" if=\"[[_disarmVisible]]\">\n          <mwc-button\n            raised\n            class=\"disarm\"\n            on-click=\"_callService\"\n            data-service=\"alarm_disarm\"\n            disabled=\"[[!_codeValid]]\"\n          >\n            [[localize('ui.card.alarm_control_panel.disarm')]]\n          </mwc-button>\n        </template>\n        <template is=\"dom-if\" if=\"[[_armVisible]]\">\n          <mwc-button\n            raised\n            on-click=\"_callService\"\n            data-service=\"alarm_arm_home\"\n            disabled=\"[[!_codeValid]]\"\n          >\n            [[localize('ui.card.alarm_control_panel.arm_home')]]\n          </mwc-button>\n          <mwc-button\n            raised\n            on-click=\"_callService\"\n            data-service=\"alarm_arm_away\"\n            disabled=\"[[!_codeValid]]\"\n          >\n            [[localize('ui.card.alarm_control_panel.arm_away')]]\n          </mwc-button>\n        </template>\n      </div>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      stateObj: {\n        type: Object,\n        observer: \"_stateObjChanged\",\n      },\n      _enteredCode: {\n        type: String,\n        value: \"\",\n      },\n      _codeFormat: {\n        type: String,\n        value: \"\",\n      },\n      _codeValid: {\n        type: Boolean,\n        computed: \"_validateCode(_enteredCode, _codeFormat)\",\n      },\n      _disarmVisible: {\n        type: Boolean,\n        value: false,\n      },\n      _armVisible: {\n        type: Boolean,\n        value: false,\n      },\n      _inputEnabled: {\n        type: Boolean,\n        value: false,\n      },\n    };\n  }\n\n  constructor() {\n    super();\n    this._armedStates = [\n      \"armed_home\",\n      \"armed_away\",\n      \"armed_night\",\n      \"armed_custom_bypass\",\n    ];\n  }\n\n  _stateObjChanged(newVal, oldVal) {\n    if (newVal) {\n      const state = newVal.state;\n      const props = {\n        _codeFormat: newVal.attributes.code_format,\n        _armVisible: state === \"disarmed\",\n        _disarmVisible:\n          this._armedStates.includes(state) ||\n          state === \"pending\" ||\n          state === \"triggered\" ||\n          state === \"arming\",\n      };\n      props._inputEnabled = props._disarmVisible || props._armVisible;\n      this.setProperties(props);\n    }\n    if (oldVal) {\n      setTimeout(() => {\n        this.fire(\"iron-resize\");\n      }, 500);\n    }\n  }\n\n  _isNumber(format) {\n    return format === \"Number\";\n  }\n\n  _validateCode(code, format) {\n    return !format || code.length > 0;\n  }\n\n  _digitClicked(ev) {\n    this._enteredCode += ev.target.getAttribute(\"data-digit\");\n  }\n\n  _clearEnteredCode() {\n    this._enteredCode = \"\";\n  }\n\n  _callService(ev) {\n    const service = ev.target.getAttribute(\"data-service\");\n    const data = {\n      entity_id: this.stateObj.entity_id,\n      code: this._enteredCode,\n    };\n    this.hass.callService(\"alarm_control_panel\", service, data).then(() => {\n      this._enteredCode = \"\";\n    });\n  }\n}\ncustomElements.define(\n  \"more-info-alarm_control_panel\",\n  MoreInfoAlarmControlPanel\n);\n","import \"@material/mwc-button\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport \"../../../components/ha-relative-time\";\n\nimport LocalizeMixin from \"../../../mixins/localize-mixin\";\n\nclass MoreInfoAutomation extends LocalizeMixin(PolymerElement) {\n  static get template() {\n    return html`\n      <style>\n        .flex {\n          display: flex;\n          justify-content: space-between;\n        }\n        .actions {\n          margin: 36px 0 8px 0;\n          text-align: right;\n        }\n      </style>\n\n      <div class=\"flex\">\n        <div>[[localize('ui.card.automation.last_triggered')]]:</div>\n        <ha-relative-time\n          hass=\"[[hass]]\"\n          datetime=\"[[stateObj.attributes.last_triggered]]\"\n        ></ha-relative-time>\n      </div>\n\n      <div class=\"actions\">\n        <mwc-button on-click=\"handleTriggerTapped\">\n          [[localize('ui.card.automation.trigger')]]\n        </mwc-button>\n      </div>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      stateObj: Object,\n    };\n  }\n\n  handleTriggerTapped() {\n    this.hass.callService(\"automation\", \"trigger\", {\n      entity_id: this.stateObj.entity_id,\n    });\n  }\n}\n\ncustomElements.define(\"more-info-automation\", MoreInfoAutomation);\n","import {\n  property,\n  PropertyValues,\n  LitElement,\n  TemplateResult,\n  html,\n  CSSResult,\n  css,\n} from \"lit-element\";\n\nimport { HomeAssistant, CameraEntity } from \"../../../types\";\nimport {\n  CAMERA_SUPPORT_STREAM,\n  CameraPreferences,\n  fetchCameraPrefs,\n  updateCameraPrefs,\n} from \"../../../data/camera\";\nimport { supportsFeature } from \"../../../common/entity/supports-feature\";\nimport \"../../../components/ha-camera-stream\";\nimport \"@polymer/paper-checkbox/paper-checkbox\";\n// Not duplicate import, it's for typing\n// tslint:disable-next-line\nimport { PaperCheckboxElement } from \"@polymer/paper-checkbox/paper-checkbox\";\n\nclass MoreInfoCamera extends LitElement {\n  @property() public hass?: HomeAssistant;\n  @property() public stateObj?: CameraEntity;\n  @property() private _cameraPrefs?: CameraPreferences;\n\n  protected render(): TemplateResult | void {\n    if (!this.hass || !this.stateObj) {\n      return html``;\n    }\n\n    return html`\n      <ha-camera-stream\n        .hass=\"${this.hass}\"\n        .stateObj=\"${this.stateObj}\"\n        showcontrols\n      ></ha-camera-stream>\n      ${this._cameraPrefs\n        ? html`\n            <paper-checkbox\n              .checked=${this._cameraPrefs.preload_stream}\n              @change=${this._handleCheckboxChanged}\n            >\n              Preload stream\n            </paper-checkbox>\n          `\n        : undefined}\n    `;\n  }\n\n  protected updated(changedProps: PropertyValues) {\n    if (!changedProps.has(\"stateObj\")) {\n      return;\n    }\n\n    const oldState = changedProps.get(\"stateObj\") as this[\"stateObj\"];\n    const oldEntityId = oldState ? oldState.entity_id : undefined;\n    const curEntityId = this.stateObj ? this.stateObj.entity_id : undefined;\n\n    // Same entity, ignore.\n    if (curEntityId === oldEntityId) {\n      return;\n    }\n\n    if (\n      curEntityId &&\n      this.hass!.config.components.includes(\"stream\") &&\n      supportsFeature(this.stateObj!, CAMERA_SUPPORT_STREAM)\n    ) {\n      // Fetch in background while we set up the video.\n      this._fetchCameraPrefs();\n    }\n  }\n\n  private async _fetchCameraPrefs() {\n    this._cameraPrefs = await fetchCameraPrefs(\n      this.hass!,\n      this.stateObj!.entity_id\n    );\n  }\n\n  private async _handleCheckboxChanged(ev) {\n    const checkbox = ev.currentTarget as PaperCheckboxElement;\n    try {\n      this._cameraPrefs = await updateCameraPrefs(\n        this.hass!,\n        this.stateObj!.entity_id,\n        {\n          preload_stream: checkbox.checked!,\n        }\n      );\n    } catch (err) {\n      alert(err.message);\n      checkbox.checked = !checkbox.checked;\n    }\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      paper-checkbox {\n        position: absolute;\n        top: 0;\n        right: 0;\n        background-color: var(--secondary-background-color);\n        padding: 5px;\n        border-bottom-left-radius: 6px;\n      }\n    `;\n  }\n}\n\ncustomElements.define(\"more-info-camera\", MoreInfoCamera);\n","import \"@polymer/iron-flex-layout/iron-flex-layout-classes\";\nimport \"@polymer/paper-item/paper-item\";\nimport \"@polymer/paper-listbox/paper-listbox\";\nimport \"@polymer/paper-toggle-button/paper-toggle-button\";\nimport { timeOut } from \"@polymer/polymer/lib/utils/async\";\nimport { Debouncer } from \"@polymer/polymer/lib/utils/debounce\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport \"../../../components/ha-climate-control\";\nimport \"../../../components/ha-paper-slider\";\nimport \"../../../components/ha-paper-dropdown-menu\";\n\nimport attributeClassNames from \"../../../common/entity/attribute_class_names\";\nimport featureClassNames from \"../../../common/entity/feature_class_names\";\nimport { supportsFeature } from \"../../../common/entity/supports-feature\";\n\nimport { EventsMixin } from \"../../../mixins/events-mixin\";\nimport LocalizeMixin from \"../../../mixins/localize-mixin\";\nimport { computeRTLDirection } from \"../../../common/util/compute_rtl\";\n\n/*\n * @appliesMixin EventsMixin\n * @appliesMixin LocalizeMixin\n */\nclass MoreInfoClimate extends LocalizeMixin(EventsMixin(PolymerElement)) {\n  static get template() {\n    return html`\n      <style include=\"iron-flex\"></style>\n      <style>\n        :host {\n          color: var(--primary-text-color);\n        }\n\n        .container-on,\n        .container-away_mode,\n        .container-aux_heat,\n        .container-temperature,\n        .container-humidity,\n        .container-operation_list,\n        .container-fan_list,\n        .container-swing_list {\n          display: none;\n        }\n\n        .has-on .container-on,\n        .has-away_mode .container-away_mode,\n        .has-aux_heat .container-aux_heat,\n        .has-target_temperature .container-temperature,\n        .has-target_temperature_low .container-temperature,\n        .has-target_temperature_high .container-temperature,\n        .has-target_humidity .container-humidity,\n        .has-operation_mode .container-operation_list,\n        .has-fan_mode .container-fan_list,\n        .has-swing_list .container-swing_list,\n        .has-swing_mode .container-swing_list {\n          display: block;\n          margin-bottom: 5px;\n        }\n\n        .container-operation_list iron-icon,\n        .container-fan_list iron-icon,\n        .container-swing_list iron-icon {\n          margin: 22px 16px 0 0;\n        }\n\n        ha-paper-dropdown-menu {\n          width: 100%;\n        }\n\n        paper-item {\n          cursor: pointer;\n        }\n\n        ha-paper-slider {\n          width: 100%;\n        }\n\n        .container-humidity .single-row {\n            display: flex;\n            height: 50px;\n        }\n\n        .target-humidity {\n          width: 90px;\n          font-size: 200%;\n          margin: auto;\n          direction: ltr;\n        }\n\n        ha-climate-control.range-control-left,\n        ha-climate-control.range-control-right {\n          float: left;\n          width: 46%;\n        }\n        ha-climate-control.range-control-left {\n          margin-right: 4%;\n        }\n        ha-climate-control.range-control-right {\n          margin-left: 4%;\n        }\n\n        .humidity {\n          --paper-slider-active-color: var(--paper-blue-400);\n          --paper-slider-secondary-color: var(--paper-blue-400);\n        }\n\n        .single-row {\n          padding: 8px 0;\n        }\n        }\n      </style>\n\n      <div class$=\"[[computeClassNames(stateObj)]]\">\n        <template is=\"dom-if\" if=\"[[supportsOn(stateObj)]]\">\n          <div class=\"container-on\">\n            <div class=\"center horizontal layout single-row\">\n              <div class=\"flex\">[[localize('ui.card.climate.on_off')]]</div>\n              <paper-toggle-button\n                checked=\"[[onToggleChecked]]\"\n                on-change=\"onToggleChanged\"\n              >\n              </paper-toggle-button>\n            </div>\n          </div>\n        </template>\n\n        <div class=\"container-temperature\">\n          <div class$=\"[[stateObj.attributes.operation_mode]]\">\n            <div hidden$=\"[[!supportsTemperatureControls(stateObj)]]\">\n              [[localize('ui.card.climate.target_temperature')]]\n            </div>\n            <template is=\"dom-if\" if=\"[[supportsTemperature(stateObj)]]\">\n              <ha-climate-control\n                value=\"[[stateObj.attributes.temperature]]\"\n                units=\"[[hass.config.unit_system.temperature]]\"\n                step=\"[[computeTemperatureStepSize(hass, stateObj)]]\"\n                min=\"[[stateObj.attributes.min_temp]]\"\n                max=\"[[stateObj.attributes.max_temp]]\"\n                on-change=\"targetTemperatureChanged\"\n              >\n              </ha-climate-control>\n            </template>\n            <template is=\"dom-if\" if=\"[[supportsTemperatureRange(stateObj)]]\">\n              <ha-climate-control\n                value=\"[[stateObj.attributes.target_temp_low]]\"\n                units=\"[[hass.config.unit_system.temperature]]\"\n                step=\"[[computeTemperatureStepSize(hass, stateObj)]]\"\n                min=\"[[stateObj.attributes.min_temp]]\"\n                max=\"[[stateObj.attributes.target_temp_high]]\"\n                class=\"range-control-left\"\n                on-change=\"targetTemperatureLowChanged\"\n              >\n              </ha-climate-control>\n              <ha-climate-control\n                value=\"[[stateObj.attributes.target_temp_high]]\"\n                units=\"[[hass.config.unit_system.temperature]]\"\n                step=\"[[computeTemperatureStepSize(hass, stateObj)]]\"\n                min=\"[[stateObj.attributes.target_temp_low]]\"\n                max=\"[[stateObj.attributes.max_temp]]\"\n                class=\"range-control-right\"\n                on-change=\"targetTemperatureHighChanged\"\n              >\n              </ha-climate-control>\n            </template>\n          </div>\n        </div>\n\n        <template is=\"dom-if\" if=\"[[supportsHumidity(stateObj)]]\">\n          <div class=\"container-humidity\">\n            <div>[[localize('ui.card.climate.target_humidity')]]</div>\n            <div class=\"single-row\">\n              <div class=\"target-humidity\">\n                [[stateObj.attributes.humidity]] %\n              </div>\n              <ha-paper-slider\n                class=\"humidity\"\n                min=\"[[stateObj.attributes.min_humidity]]\"\n                max=\"[[stateObj.attributes.max_humidity]]\"\n                secondary-progress=\"[[stateObj.attributes.max_humidity]]\"\n                step=\"1\"\n                pin=\"\"\n                value=\"[[stateObj.attributes.humidity]]\"\n                on-change=\"targetHumiditySliderChanged\"\n                ignore-bar-touch=\"\"\n                dir=\"[[rtl]]\"\n              >\n              </ha-paper-slider>\n            </div>\n          </div>\n        </template>\n\n        <template is=\"dom-if\" if=\"[[supportsOperationMode(stateObj)]]\">\n          <div class=\"container-operation_list\">\n            <div class=\"controls\">\n              <ha-paper-dropdown-menu\n                label-float=\"\"\n                dynamic-align=\"\"\n                label=\"[[localize('ui.card.climate.operation')]]\"\n              >\n                <paper-listbox\n                  slot=\"dropdown-content\"\n                  selected=\"[[stateObj.attributes.operation_mode]]\"\n                  attr-for-selected=\"item-name\"\n                  on-selected-changed=\"handleOperationmodeChanged\"\n                >\n                  <template\n                    is=\"dom-repeat\"\n                    items=\"[[stateObj.attributes.operation_list]]\"\n                  >\n                    <paper-item item-name$=\"[[item]]\"\n                      >[[_localizeOperationMode(localize, item)]]</paper-item\n                    >\n                  </template>\n                </paper-listbox>\n              </ha-paper-dropdown-menu>\n            </div>\n          </div>\n        </template>\n\n        <template is=\"dom-if\" if=\"[[supportsFanMode(stateObj)]]\">\n          <div class=\"container-fan_list\">\n            <ha-paper-dropdown-menu\n              label-float=\"\"\n              dynamic-align=\"\"\n              label=\"[[localize('ui.card.climate.fan_mode')]]\"\n            >\n              <paper-listbox\n                slot=\"dropdown-content\"\n                selected=\"[[stateObj.attributes.fan_mode]]\"\n                attr-for-selected=\"item-name\"\n                on-selected-changed=\"handleFanmodeChanged\"\n              >\n                <template\n                  is=\"dom-repeat\"\n                  items=\"[[stateObj.attributes.fan_list]]\"\n                >\n                  <paper-item item-name$=\"[[item]]\"\n                    >[[_localizeFanMode(localize, item)]]\n                  </paper-item>\n                </template>\n              </paper-listbox>\n            </ha-paper-dropdown-menu>\n          </div>\n        </template>\n\n        <template is=\"dom-if\" if=\"[[supportsSwingMode(stateObj)]]\">\n          <div class=\"container-swing_list\">\n            <ha-paper-dropdown-menu\n              label-float=\"\"\n              dynamic-align=\"\"\n              label=\"[[localize('ui.card.climate.swing_mode')]]\"\n            >\n              <paper-listbox\n                slot=\"dropdown-content\"\n                selected=\"[[stateObj.attributes.swing_mode]]\"\n                attr-for-selected=\"item-name\"\n                on-selected-changed=\"handleSwingmodeChanged\"\n              >\n                <template\n                  is=\"dom-repeat\"\n                  items=\"[[stateObj.attributes.swing_list]]\"\n                >\n                  <paper-item item-name$=\"[[item]]\">[[item]]</paper-item>\n                </template>\n              </paper-listbox>\n            </ha-paper-dropdown-menu>\n          </div>\n        </template>\n\n        <template is=\"dom-if\" if=\"[[supportsAwayMode(stateObj)]]\">\n          <div class=\"container-away_mode\">\n            <div class=\"center horizontal layout single-row\">\n              <div class=\"flex\">[[localize('ui.card.climate.away_mode')]]</div>\n              <paper-toggle-button\n                checked=\"[[awayToggleChecked]]\"\n                on-change=\"awayToggleChanged\"\n              >\n              </paper-toggle-button>\n            </div>\n          </div>\n        </template>\n\n        <template is=\"dom-if\" if=\"[[supportsAuxHeat(stateObj)]]\">\n          <div class=\"container-aux_heat\">\n            <div class=\"center horizontal layout single-row\">\n              <div class=\"flex\">[[localize('ui.card.climate.aux_heat')]]</div>\n              <paper-toggle-button\n                checked=\"[[auxToggleChecked]]\"\n                on-change=\"auxToggleChanged\"\n              >\n              </paper-toggle-button>\n            </div>\n          </div>\n        </template>\n      </div>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: {\n        type: Object,\n      },\n\n      stateObj: {\n        type: Object,\n        observer: \"stateObjChanged\",\n      },\n\n      awayToggleChecked: Boolean,\n      auxToggleChecked: Boolean,\n      onToggleChecked: Boolean,\n\n      rtl: {\n        type: String,\n        value: \"ltr\",\n        computed: \"_computeRTLDirection(hass)\",\n      },\n    };\n  }\n\n  stateObjChanged(newVal, oldVal) {\n    if (newVal) {\n      this.setProperties({\n        awayToggleChecked: newVal.attributes.away_mode === \"on\",\n        auxToggleChecked: newVal.attributes.aux_heat === \"on\",\n        onToggleChecked: newVal.state !== \"off\",\n      });\n    }\n\n    if (oldVal) {\n      this._debouncer = Debouncer.debounce(\n        this._debouncer,\n        timeOut.after(500),\n        () => {\n          this.fire(\"iron-resize\");\n        }\n      );\n    }\n  }\n\n  computeTemperatureStepSize(hass, stateObj) {\n    if (stateObj.attributes.target_temp_step) {\n      return stateObj.attributes.target_temp_step;\n    }\n    if (hass.config.unit_system.temperature.indexOf(\"F\") !== -1) {\n      return 1;\n    }\n    return 0.5;\n  }\n\n  supportsTemperatureControls(stateObj) {\n    return (\n      this.supportsTemperature(stateObj) ||\n      this.supportsTemperatureRange(stateObj)\n    );\n  }\n\n  supportsTemperature(stateObj) {\n    return (\n      supportsFeature(stateObj, 1) &&\n      typeof stateObj.attributes.temperature === \"number\"\n    );\n  }\n\n  supportsTemperatureRange(stateObj) {\n    return (\n      supportsFeature(stateObj, 6) &&\n      (typeof stateObj.attributes.target_temp_low === \"number\" ||\n        typeof stateObj.attributes.target_temp_high === \"number\")\n    );\n  }\n\n  supportsHumidity(stateObj) {\n    return supportsFeature(stateObj, 8);\n  }\n\n  supportsFanMode(stateObj) {\n    return supportsFeature(stateObj, 64);\n  }\n\n  supportsOperationMode(stateObj) {\n    return supportsFeature(stateObj, 128);\n  }\n\n  supportsSwingMode(stateObj) {\n    return supportsFeature(stateObj, 512);\n  }\n\n  supportsAwayMode(stateObj) {\n    return supportsFeature(stateObj, 1024);\n  }\n\n  supportsAuxHeat(stateObj) {\n    return supportsFeature(stateObj, 2048);\n  }\n\n  supportsOn(stateObj) {\n    return supportsFeature(stateObj, 4096);\n  }\n\n  computeClassNames(stateObj) {\n    const _featureClassNames = {\n      1: \"has-target_temperature\",\n      2: \"has-target_temperature_high\",\n      4: \"has-target_temperature_low\",\n      8: \"has-target_humidity\",\n      16: \"has-target_humidity_high\",\n      32: \"has-target_humidity_low\",\n      64: \"has-fan_mode\",\n      128: \"has-operation_mode\",\n      256: \"has-hold_mode\",\n      512: \"has-swing_mode\",\n      1024: \"has-away_mode\",\n      2048: \"has-aux_heat\",\n      4096: \"has-on\",\n    };\n\n    var classes = [\n      attributeClassNames(stateObj, [\n        \"current_temperature\",\n        \"current_humidity\",\n      ]),\n      featureClassNames(stateObj, _featureClassNames),\n    ];\n\n    classes.push(\"more-info-climate\");\n\n    return classes.join(\" \");\n  }\n\n  targetTemperatureChanged(ev) {\n    const temperature = ev.target.value;\n    if (temperature === this.stateObj.attributes.temperature) return;\n    this.callServiceHelper(\"set_temperature\", { temperature: temperature });\n  }\n\n  targetTemperatureLowChanged(ev) {\n    const targetTempLow = ev.currentTarget.value;\n    if (targetTempLow === this.stateObj.attributes.target_temp_low) return;\n    this.callServiceHelper(\"set_temperature\", {\n      target_temp_low: targetTempLow,\n      target_temp_high: this.stateObj.attributes.target_temp_high,\n    });\n  }\n\n  targetTemperatureHighChanged(ev) {\n    const targetTempHigh = ev.currentTarget.value;\n    if (targetTempHigh === this.stateObj.attributes.target_temp_high) return;\n    this.callServiceHelper(\"set_temperature\", {\n      target_temp_low: this.stateObj.attributes.target_temp_low,\n      target_temp_high: targetTempHigh,\n    });\n  }\n\n  targetHumiditySliderChanged(ev) {\n    const humidity = ev.target.value;\n    if (humidity === this.stateObj.attributes.humidity) return;\n    this.callServiceHelper(\"set_humidity\", { humidity: humidity });\n  }\n\n  awayToggleChanged(ev) {\n    const oldVal = this.stateObj.attributes.away_mode === \"on\";\n    const newVal = ev.target.checked;\n    if (oldVal === newVal) return;\n    this.callServiceHelper(\"set_away_mode\", { away_mode: newVal });\n  }\n\n  auxToggleChanged(ev) {\n    const oldVal = this.stateObj.attributes.aux_heat === \"on\";\n    const newVal = ev.target.checked;\n    if (oldVal === newVal) return;\n    this.callServiceHelper(\"set_aux_heat\", { aux_heat: newVal });\n  }\n\n  onToggleChanged(ev) {\n    const oldVal = this.stateObj.state !== \"off\";\n    const newVal = ev.target.checked;\n    if (oldVal === newVal) return;\n    this.callServiceHelper(newVal ? \"turn_on\" : \"turn_off\", {});\n  }\n\n  handleFanmodeChanged(ev) {\n    const oldVal = this.stateObj.attributes.fan_mode;\n    const newVal = ev.detail.value;\n    if (!newVal || oldVal === newVal) return;\n    this.callServiceHelper(\"set_fan_mode\", { fan_mode: newVal });\n  }\n\n  handleOperationmodeChanged(ev) {\n    const oldVal = this.stateObj.attributes.operation_mode;\n    const newVal = ev.detail.value;\n    if (!newVal || oldVal === newVal) return;\n    this.callServiceHelper(\"set_operation_mode\", {\n      operation_mode: newVal,\n    });\n  }\n\n  handleSwingmodeChanged(ev) {\n    const oldVal = this.stateObj.attributes.swing_mode;\n    const newVal = ev.detail.value;\n    if (!newVal || oldVal === newVal) return;\n    this.callServiceHelper(\"set_swing_mode\", { swing_mode: newVal });\n  }\n\n  callServiceHelper(service, data) {\n    // We call stateChanged after a successful call to re-sync the inputs\n    // with the state. It will be out of sync if our service call did not\n    // result in the entity to be turned on. Since the state is not changing,\n    // the resync is not called automatic.\n    /* eslint-disable no-param-reassign */\n    data.entity_id = this.stateObj.entity_id;\n    /* eslint-enable no-param-reassign */\n    this.hass.callService(\"climate\", service, data).then(() => {\n      this.stateObjChanged(this.stateObj);\n    });\n  }\n\n  _localizeOperationMode(localize, mode) {\n    return localize(`state.climate.${mode}`) || mode;\n  }\n\n  _localizeFanMode(localize, mode) {\n    return localize(`state_attributes.climate.fan_mode.${mode}`) || mode;\n  }\n\n  _computeRTLDirection(hass) {\n    return computeRTLDirection(hass);\n  }\n}\n\ncustomElements.define(\"more-info-climate\", MoreInfoClimate);\n","import \"@polymer/iron-flex-layout/iron-flex-layout-classes\";\nimport \"@polymer/iron-input/iron-input\";\nimport \"@material/mwc-button\";\nimport \"@polymer/paper-input/paper-input\";\nimport \"@polymer/paper-spinner/paper-spinner\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport \"../../../components/ha-markdown\";\n\nclass MoreInfoConfigurator extends PolymerElement {\n  static get template() {\n    return html`\n      <style include=\"iron-flex\"></style>\n      <style>\n        p {\n          margin: 8px 0;\n        }\n\n        a {\n          color: var(--primary-color);\n        }\n\n        p > img {\n          max-width: 100%;\n        }\n\n        p.center {\n          text-align: center;\n        }\n\n        p.error {\n          color: #c62828;\n        }\n\n        p.submit {\n          text-align: center;\n          height: 41px;\n        }\n\n        paper-spinner {\n          width: 14px;\n          height: 14px;\n          margin-right: 20px;\n        }\n\n        [hidden] {\n          display: none;\n        }\n      </style>\n\n      <div class=\"layout vertical\">\n        <template is=\"dom-if\" if=\"[[isConfigurable]]\">\n          <ha-markdown\n            content=\"[[stateObj.attributes.description]]\"\n          ></ha-markdown>\n\n          <p class=\"error\" hidden$=\"[[!stateObj.attributes.errors]]\">\n            [[stateObj.attributes.errors]]\n          </p>\n\n          <template is=\"dom-repeat\" items=\"[[stateObj.attributes.fields]]\">\n            <paper-input\n              label=\"[[item.name]]\"\n              name=\"[[item.id]]\"\n              type=\"[[item.type]]\"\n              on-change=\"fieldChanged\"\n            ></paper-input>\n          </template>\n\n          <p class=\"submit\" hidden$=\"[[!stateObj.attributes.submit_caption]]\">\n            <mwc-button\n              raised=\"\"\n              disabled=\"[[isConfiguring]]\"\n              on-click=\"submitClicked\"\n            >\n              <paper-spinner\n                active=\"[[isConfiguring]]\"\n                hidden=\"[[!isConfiguring]]\"\n                alt=\"Configuring\"\n              ></paper-spinner>\n              [[stateObj.attributes.submit_caption]]\n            </mwc-button>\n          </p>\n        </template>\n      </div>\n    `;\n  }\n\n  static get properties() {\n    return {\n      stateObj: {\n        type: Object,\n      },\n\n      action: {\n        type: String,\n        value: \"display\",\n      },\n\n      isConfigurable: {\n        type: Boolean,\n        computed: \"computeIsConfigurable(stateObj)\",\n      },\n\n      isConfiguring: {\n        type: Boolean,\n        value: false,\n      },\n\n      fieldInput: {\n        type: Object,\n        value: function() {\n          return {};\n        },\n      },\n    };\n  }\n\n  computeIsConfigurable(stateObj) {\n    return stateObj.state === \"configure\";\n  }\n\n  fieldChanged(ev) {\n    var el = ev.target;\n    this.fieldInput[el.name] = el.value;\n  }\n\n  submitClicked() {\n    var data = {\n      configure_id: this.stateObj.attributes.configure_id,\n      fields: this.fieldInput,\n    };\n\n    this.isConfiguring = true;\n\n    this.hass.callService(\"configurator\", \"configure\", data).then(\n      function() {\n        this.isConfiguring = false;\n      }.bind(this),\n      function() {\n        this.isConfiguring = false;\n      }.bind(this)\n    );\n  }\n}\n\ncustomElements.define(\"more-info-configurator\", MoreInfoConfigurator);\n","import {\n  PropertyDeclarations,\n  PropertyValues,\n  UpdatingElement,\n} from \"lit-element\";\nimport { HassEntity } from \"home-assistant-js-websocket\";\n\nimport \"./more-info-alarm_control_panel\";\nimport \"./more-info-automation\";\nimport \"./more-info-camera\";\nimport \"./more-info-climate\";\nimport \"./more-info-configurator\";\nimport \"./more-info-cover\";\nimport \"./more-info-default\";\nimport \"./more-info-fan\";\nimport \"./more-info-group\";\nimport \"./more-info-history_graph\";\nimport \"./more-info-input_datetime\";\nimport \"./more-info-light\";\nimport \"./more-info-lock\";\nimport \"./more-info-media_player\";\nimport \"./more-info-script\";\nimport \"./more-info-sun\";\nimport \"./more-info-updater\";\nimport \"./more-info-vacuum\";\nimport \"./more-info-water_heater\";\nimport \"./more-info-weather\";\n\nimport stateMoreInfoType from \"../../../common/entity/state_more_info_type\";\nimport dynamicContentUpdater from \"../../../common/dom/dynamic_content_updater\";\nimport { HomeAssistant } from \"../../../types\";\n\nclass MoreInfoContent extends UpdatingElement {\n  public hass?: HomeAssistant;\n  public stateObj?: HassEntity;\n  private _detachedChild?: ChildNode;\n\n  static get properties(): PropertyDeclarations {\n    return {\n      hass: {},\n      stateObj: {},\n    };\n  }\n\n  protected firstUpdated(): void {\n    this.style.position = \"relative\";\n    this.style.display = \"block\";\n  }\n\n  // This is not a lit element, but an updating element, so we implement update\n  protected update(changedProps: PropertyValues): void {\n    super.update(changedProps);\n    const stateObj = this.stateObj;\n    const hass = this.hass;\n\n    if (!stateObj || !hass) {\n      if (this.lastChild) {\n        this._detachedChild = this.lastChild;\n        // Detach child to prevent it from doing work.\n        this.removeChild(this.lastChild);\n      }\n      return;\n    }\n\n    if (this._detachedChild) {\n      this.appendChild(this._detachedChild);\n      this._detachedChild = undefined;\n    }\n\n    const moreInfoType =\n      stateObj.attributes && \"custom_ui_more_info\" in stateObj.attributes\n        ? stateObj.attributes.custom_ui_more_info\n        : \"more-info-\" + stateMoreInfoType(stateObj);\n\n    dynamicContentUpdater(this, moreInfoType.toUpperCase(), {\n      hass,\n      stateObj,\n    });\n  }\n}\n\ncustomElements.define(\"more-info-content\", MoreInfoContent);\n","import \"@polymer/iron-flex-layout/iron-flex-layout-classes\";\nimport \"@polymer/paper-icon-button/paper-icon-button\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport \"../../../components/ha-cover-tilt-controls\";\nimport \"../../../components/ha-labeled-slider\";\nimport CoverEntity from \"../../../util/cover-model\";\n\nimport attributeClassNames from \"../../../common/entity/attribute_class_names\";\nimport featureClassNames from \"../../../common/entity/feature_class_names\";\n\nimport LocalizeMixin from \"../../../mixins/localize-mixin\";\n\nconst FEATURE_CLASS_NAMES = {\n  128: \"has-set_tilt_position\",\n};\nclass MoreInfoCover extends LocalizeMixin(PolymerElement) {\n  static get template() {\n    return html`\n      <style include=\"iron-flex\"></style>\n      <style>\n        .current_position,\n        .tilt {\n          max-height: 0px;\n          overflow: hidden;\n        }\n\n        .has-current_position .current_position,\n        .has-set_tilt_position .tilt,\n        .has-current_tilt_position .tilt {\n          max-height: 208px;\n        }\n\n        [invisible] {\n          visibility: hidden !important;\n        }\n      </style>\n      <div class$=\"[[computeClassNames(stateObj)]]\">\n        <div class=\"current_position\">\n          <ha-labeled-slider\n            caption=\"[[localize('ui.card.cover.position')]]\"\n            pin=\"\"\n            value=\"{{coverPositionSliderValue}}\"\n            disabled=\"[[!entityObj.supportsSetPosition]]\"\n            on-change=\"coverPositionSliderChanged\"\n          ></ha-labeled-slider>\n        </div>\n\n        <div class=\"tilt\">\n          <ha-labeled-slider\n            caption=\"[[localize('ui.card.cover.tilt_position')]]\"\n            pin=\"\"\n            extra=\"\"\n            value=\"{{coverTiltPositionSliderValue}}\"\n            disabled=\"[[!entityObj.supportsSetTiltPosition]]\"\n            on-change=\"coverTiltPositionSliderChanged\"\n          >\n            <ha-cover-tilt-controls\n              slot=\"extra\"\n              hidden$=\"[[entityObj.isTiltOnly]]\"\n              hass=\"[[hass]]\"\n              state-obj=\"[[stateObj]]\"\n            ></ha-cover-tilt-controls>\n          </ha-labeled-slider>\n        </div>\n      </div>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      stateObj: {\n        type: Object,\n        observer: \"stateObjChanged\",\n      },\n      entityObj: {\n        type: Object,\n        computed: \"computeEntityObj(hass, stateObj)\",\n      },\n      coverPositionSliderValue: Number,\n      coverTiltPositionSliderValue: Number,\n    };\n  }\n\n  computeEntityObj(hass, stateObj) {\n    return new CoverEntity(hass, stateObj);\n  }\n\n  stateObjChanged(newVal) {\n    if (newVal) {\n      this.setProperties({\n        coverPositionSliderValue: newVal.attributes.current_position,\n        coverTiltPositionSliderValue: newVal.attributes.current_tilt_position,\n      });\n    }\n  }\n\n  computeClassNames(stateObj) {\n    var classes = [\n      attributeClassNames(stateObj, [\n        \"current_position\",\n        \"current_tilt_position\",\n      ]),\n      featureClassNames(stateObj, FEATURE_CLASS_NAMES),\n    ];\n    return classes.join(\" \");\n  }\n\n  coverPositionSliderChanged(ev) {\n    this.entityObj.setCoverPosition(ev.target.value);\n  }\n\n  coverTiltPositionSliderChanged(ev) {\n    this.entityObj.setCoverTiltPosition(ev.target.value);\n  }\n}\n\ncustomElements.define(\"more-info-cover\", MoreInfoCover);\n","import { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport \"../../../components/ha-attributes\";\n\nclass MoreInfoDefault extends PolymerElement {\n  static get template() {\n    return html`\n      <ha-attributes state-obj=\"[[stateObj]]\"></ha-attributes>\n    `;\n  }\n\n  static get properties() {\n    return {\n      stateObj: {\n        type: Object,\n      },\n    };\n  }\n}\n\ncustomElements.define(\"more-info-default\", MoreInfoDefault);\n","import \"@polymer/iron-flex-layout/iron-flex-layout-classes\";\nimport \"@polymer/paper-icon-button/paper-icon-button\";\nimport \"@polymer/paper-item/paper-item\";\nimport \"@polymer/paper-listbox/paper-listbox\";\nimport \"@polymer/paper-toggle-button/paper-toggle-button\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport \"../../../components/ha-attributes\";\nimport \"../../../components/ha-paper-dropdown-menu\";\n\nimport attributeClassNames from \"../../../common/entity/attribute_class_names\";\nimport { EventsMixin } from \"../../../mixins/events-mixin\";\nimport LocalizeMixin from \"../../../mixins/localize-mixin\";\n\n/*\n * @appliesMixin EventsMixin\n */\nclass MoreInfoFan extends LocalizeMixin(EventsMixin(PolymerElement)) {\n  static get template() {\n    return html`\n      <style include=\"iron-flex\"></style>\n      <style>\n        .container-speed_list,\n        .container-direction,\n        .container-oscillating {\n          display: none;\n        }\n\n        .has-speed_list .container-speed_list,\n        .has-direction .container-direction,\n        .has-oscillating .container-oscillating {\n          display: block;\n        }\n\n        ha-paper-dropdown-menu {\n          width: 100%;\n        }\n\n        paper-item {\n          cursor: pointer;\n        }\n      </style>\n\n      <div class$=\"[[computeClassNames(stateObj)]]\">\n        <div class=\"container-speed_list\">\n          <ha-paper-dropdown-menu\n            label-float=\"\"\n            dynamic-align=\"\"\n            label=\"[[localize('ui.card.fan.speed')]]\"\n          >\n            <paper-listbox\n              slot=\"dropdown-content\"\n              selected=\"[[stateObj.attributes.speed]]\"\n              on-selected-changed=\"speedChanged\"\n              attr-for-selected=\"item-name\"\n            >\n              <template\n                is=\"dom-repeat\"\n                items=\"[[stateObj.attributes.speed_list]]\"\n              >\n                <paper-item item-name$=\"[[item]]\">[[item]]</paper-item>\n              </template>\n            </paper-listbox>\n          </ha-paper-dropdown-menu>\n        </div>\n\n        <div class=\"container-oscillating\">\n          <div class=\"center horizontal layout single-row\">\n            <div class=\"flex\">[[localize('ui.card.fan.oscillate')]]</div>\n            <paper-toggle-button\n              checked=\"[[oscillationToggleChecked]]\"\n              on-change=\"oscillationToggleChanged\"\n            >\n            </paper-toggle-button>\n          </div>\n        </div>\n\n        <div class=\"container-direction\">\n          <div class=\"direction\">\n            <div>[[localize('ui.card.fan.direction')]]</div>\n            <paper-icon-button\n              icon=\"hass:rotate-left\"\n              on-click=\"onDirectionLeft\"\n              title=\"Left\"\n              disabled=\"[[computeIsRotatingLeft(stateObj)]]\"\n            ></paper-icon-button>\n            <paper-icon-button\n              icon=\"hass:rotate-right\"\n              on-click=\"onDirectionRight\"\n              title=\"Right\"\n              disabled=\"[[computeIsRotatingRight(stateObj)]]\"\n            ></paper-icon-button>\n          </div>\n        </div>\n      </div>\n\n      <ha-attributes\n        state-obj=\"[[stateObj]]\"\n        extra-filters=\"speed,speed_list,oscillating,direction\"\n      ></ha-attributes>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: {\n        type: Object,\n      },\n\n      stateObj: {\n        type: Object,\n        observer: \"stateObjChanged\",\n      },\n\n      oscillationToggleChecked: {\n        type: Boolean,\n      },\n    };\n  }\n\n  stateObjChanged(newVal, oldVal) {\n    if (newVal) {\n      this.setProperties({\n        oscillationToggleChecked: newVal.attributes.oscillating,\n      });\n    }\n\n    if (oldVal) {\n      setTimeout(() => {\n        this.fire(\"iron-resize\");\n      }, 500);\n    }\n  }\n\n  computeClassNames(stateObj) {\n    return (\n      \"more-info-fan \" +\n      attributeClassNames(stateObj, [\"oscillating\", \"speed_list\", \"direction\"])\n    );\n  }\n\n  speedChanged(ev) {\n    var oldVal = this.stateObj.attributes.speed;\n    var newVal = ev.detail.value;\n\n    if (!newVal || oldVal === newVal) return;\n\n    this.hass.callService(\"fan\", \"turn_on\", {\n      entity_id: this.stateObj.entity_id,\n      speed: newVal,\n    });\n  }\n\n  oscillationToggleChanged(ev) {\n    var oldVal = this.stateObj.attributes.oscillating;\n    var newVal = ev.target.checked;\n\n    if (oldVal === newVal) return;\n\n    this.hass.callService(\"fan\", \"oscillate\", {\n      entity_id: this.stateObj.entity_id,\n      oscillating: newVal,\n    });\n  }\n\n  onDirectionLeft() {\n    this.hass.callService(\"fan\", \"set_direction\", {\n      entity_id: this.stateObj.entity_id,\n      direction: \"reverse\",\n    });\n  }\n\n  onDirectionRight() {\n    this.hass.callService(\"fan\", \"set_direction\", {\n      entity_id: this.stateObj.entity_id,\n      direction: \"forward\",\n    });\n  }\n\n  computeIsRotatingLeft(stateObj) {\n    return stateObj.attributes.direction === \"reverse\";\n  }\n\n  computeIsRotatingRight(stateObj) {\n    return stateObj.attributes.direction === \"forward\";\n  }\n}\n\ncustomElements.define(\"more-info-fan\", MoreInfoFan);\n","import { dom } from \"@polymer/polymer/lib/legacy/polymer.dom\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport \"../../../state-summary/state-card-content\";\n\nimport computeStateDomain from \"../../../common/entity/compute_state_domain\";\nimport dynamicContentUpdater from \"../../../common/dom/dynamic_content_updater\";\n\nclass MoreInfoGroup extends PolymerElement {\n  static get template() {\n    return html`\n      <style>\n        .child-card {\n          margin-bottom: 8px;\n        }\n\n        .child-card:last-child {\n          margin-bottom: 0;\n        }\n      </style>\n\n      <div id=\"groupedControlDetails\"></div>\n      <template is=\"dom-repeat\" items=\"[[states]]\" as=\"state\">\n        <div class=\"child-card\">\n          <state-card-content\n            state-obj=\"[[state]]\"\n            hass=\"[[hass]]\"\n          ></state-card-content>\n        </div>\n      </template>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: {\n        type: Object,\n      },\n\n      stateObj: {\n        type: Object,\n      },\n\n      states: {\n        type: Array,\n        computed: \"computeStates(stateObj, hass)\",\n      },\n    };\n  }\n\n  static get observers() {\n    return [\"statesChanged(stateObj, states)\"];\n  }\n\n  computeStates(stateObj, hass) {\n    var states = [];\n    var entIds = stateObj.attributes.entity_id || [];\n\n    for (var i = 0; i < entIds.length; i++) {\n      var state = hass.states[entIds[i]];\n\n      if (state) {\n        states.push(state);\n      }\n    }\n\n    return states;\n  }\n\n  statesChanged(stateObj, states) {\n    let groupDomainStateObj = false;\n    let groupDomain = false;\n\n    if (states && states.length > 0) {\n      const baseStateObj = states.find((s) => s.state === \"on\") || states[0];\n      groupDomain = computeStateDomain(baseStateObj);\n\n      // Groups need to be filtered out or we'll show content of\n      // first child above the children of the current group\n      if (groupDomain !== \"group\") {\n        groupDomainStateObj = Object.assign({}, baseStateObj, {\n          entity_id: stateObj.entity_id,\n          attributes: Object.assign({}, baseStateObj.attributes),\n        });\n\n        for (let i = 0; i < states.length; i++) {\n          if (groupDomain !== computeStateDomain(states[i])) {\n            groupDomainStateObj = false;\n            break;\n          }\n        }\n      }\n    }\n\n    if (!groupDomainStateObj) {\n      const el = dom(this.$.groupedControlDetails);\n      if (el.lastChild) {\n        el.removeChild(el.lastChild);\n      }\n    } else {\n      dynamicContentUpdater(\n        this.$.groupedControlDetails,\n        \"MORE-INFO-\" + groupDomain.toUpperCase(),\n        { stateObj: groupDomainStateObj, hass: this.hass }\n      );\n    }\n  }\n}\n\ncustomElements.define(\"more-info-group\", MoreInfoGroup);\n","import { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport \"../../../cards/ha-history_graph-card\";\nimport \"../../../components/ha-attributes\";\n\nclass MoreInfoHistoryGraph extends PolymerElement {\n  static get template() {\n    return html`\n      <style>\n        :host {\n          display: block;\n          margin-bottom: 6px;\n        }\n      </style>\n      <ha-history_graph-card\n        hass=\"[[hass]]\"\n        state-obj=\"[[stateObj]]\"\n        in-dialog=\"\"\n      >\n        <ha-attributes state-obj=\"[[stateObj]]\"></ha-attributes>\n      </ha-history_graph-card>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      stateObj: Object,\n    };\n  }\n}\ncustomElements.define(\"more-info-history_graph\", MoreInfoHistoryGraph);\n","import \"@polymer/iron-flex-layout/iron-flex-layout-classes\";\nimport \"@polymer/paper-input/paper-input\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\nimport \"@vaadin/vaadin-date-picker/vaadin-date-picker\";\n\nimport \"../../../components/ha-relative-time\";\nimport \"../../../components/paper-time-input\";\n\nimport attributeClassNames from \"../../../common/entity/attribute_class_names\";\n\nclass DatetimeInput extends PolymerElement {\n  static get template() {\n    return html`\n      <div class$=\"[[computeClassNames(stateObj)]]\">\n        <template is=\"dom-if\" if=\"[[doesHaveDate(stateObj)]]\" restamp=\"\">\n          <div>\n            <vaadin-date-picker\n              id=\"dateInput\"\n              on-value-changed=\"dateTimeChanged\"\n              label=\"Date\"\n              value=\"{{selectedDate}}\"\n            ></vaadin-date-picker>\n          </div>\n        </template>\n        <template is=\"dom-if\" if=\"[[doesHaveTime(stateObj)]]\" restamp=\"\">\n          <div>\n            <paper-time-input\n              hour=\"{{selectedHour}}\"\n              min=\"{{selectedMinute}}\"\n              format=\"24\"\n            ></paper-time-input>\n          </div>\n        </template>\n      </div>\n    `;\n  }\n\n  constructor() {\n    super();\n    this.is_ready = false;\n  }\n\n  static get properties() {\n    return {\n      hass: {\n        type: Object,\n      },\n\n      stateObj: {\n        type: Object,\n        observer: \"stateObjChanged\",\n      },\n\n      selectedDate: {\n        type: String,\n        observer: \"dateTimeChanged\",\n      },\n\n      selectedHour: {\n        type: Number,\n        observer: \"dateTimeChanged\",\n      },\n\n      selectedMinute: {\n        type: Number,\n        observer: \"dateTimeChanged\",\n      },\n    };\n  }\n\n  ready() {\n    super.ready();\n    this.is_ready = true;\n  }\n\n  /* Convert the date in the stateObj into a string useable by vaadin-date-picker */\n  getDateString(stateObj) {\n    if (stateObj.state === \"unknown\") {\n      return \"\";\n    }\n    var monthFiller;\n    if (stateObj.attributes.month < 10) {\n      monthFiller = \"0\";\n    } else {\n      monthFiller = \"\";\n    }\n\n    var dayFiller;\n    if (stateObj.attributes.day < 10) {\n      dayFiller = \"0\";\n    } else {\n      dayFiller = \"\";\n    }\n\n    return (\n      stateObj.attributes.year +\n      \"-\" +\n      monthFiller +\n      stateObj.attributes.month +\n      \"-\" +\n      dayFiller +\n      stateObj.attributes.day\n    );\n  }\n\n  /* Should fire when any value was changed *by the user*, not b/c of setting\n   * initial values. */\n  dateTimeChanged() {\n    // Check if the change is really coming from the user\n    if (!this.is_ready) {\n      return;\n    }\n\n    let changed = false;\n    let minuteFiller;\n\n    const serviceData = {\n      entity_id: this.stateObj.entity_id,\n    };\n\n    if (this.stateObj.attributes.has_time) {\n      changed |=\n        parseInt(this.selectedMinute) !== this.stateObj.attributes.minute;\n      changed |= parseInt(this.selectedHour) !== this.stateObj.attributes.hour;\n      if (this.selectedMinute < 10) {\n        minuteFiller = \"0\";\n      } else {\n        minuteFiller = \"\";\n      }\n      var timeStr =\n        this.selectedHour + \":\" + minuteFiller + this.selectedMinute;\n      serviceData.time = timeStr;\n    }\n\n    if (this.stateObj.attributes.has_date) {\n      if (this.selectedDate.length === 0) {\n        return; // Date was not set\n      }\n\n      const dateValInput = new Date(this.selectedDate);\n      const dateValState = new Date(\n        this.stateObj.attributes.year,\n        this.stateObj.attributes.month - 1,\n        this.stateObj.attributes.day\n      );\n\n      changed |= dateValState !== dateValInput;\n\n      serviceData.date = this.selectedDate;\n    }\n\n    if (changed) {\n      this.hass.callService(\"input_datetime\", \"set_datetime\", serviceData);\n    }\n  }\n\n  stateObjChanged(newVal) {\n    // Set to non-ready s.t. dateTimeChanged does not fire\n    this.is_ready = false;\n\n    if (newVal.attributes.has_time) {\n      this.selectedHour = newVal.attributes.hour;\n      this.selectedMinute = newVal.attributes.minute;\n    }\n\n    if (newVal.attributes.has_date) {\n      this.selectedDate = this.getDateString(newVal);\n    }\n\n    this.is_ready = true;\n  }\n\n  doesHaveDate(stateObj) {\n    return stateObj.attributes.has_date;\n  }\n\n  doesHaveTime(stateObj) {\n    return stateObj.attributes.has_time;\n  }\n\n  computeClassNames(stateObj) {\n    return (\n      \"more-info-input_datetime \" +\n      attributeClassNames(stateObj, [\"has_time\", \"has_date\"])\n    );\n  }\n}\n\ncustomElements.define(\"more-info-input_datetime\", DatetimeInput);\n","import \"@polymer/iron-flex-layout/iron-flex-layout-classes\";\nimport \"@polymer/paper-item/paper-item\";\nimport \"@polymer/paper-listbox/paper-listbox\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport \"../../../components/ha-attributes\";\nimport \"../../../components/ha-color-picker\";\nimport \"../../../components/ha-labeled-slider\";\nimport \"../../../components/ha-paper-dropdown-menu\";\n\nimport featureClassNames from \"../../../common/entity/feature_class_names\";\nimport { EventsMixin } from \"../../../mixins/events-mixin\";\nimport LocalizeMixin from \"../../../mixins/localize-mixin\";\n\nconst FEATURE_CLASS_NAMES = {\n  1: \"has-brightness\",\n  2: \"has-color_temp\",\n  4: \"has-effect_list\",\n  16: \"has-color\",\n  128: \"has-white_value\",\n};\n/*\n * @appliesMixin EventsMixin\n */\nclass MoreInfoLight extends LocalizeMixin(EventsMixin(PolymerElement)) {\n  static get template() {\n    return html`\n      <style include=\"iron-flex\"></style>\n      <style>\n        .effect_list,\n        .brightness,\n        .color_temp,\n        .white_value {\n          max-height: 0px;\n          overflow: hidden;\n          transition: max-height 0.5s ease-in;\n        }\n\n        .color_temp {\n          --ha-slider-background: -webkit-linear-gradient(\n            right,\n            rgb(255, 160, 0) 0%,\n            white 50%,\n            rgb(166, 209, 255) 100%\n          );\n          /* The color temp minimum value shouldn't be rendered differently. It's not \"off\". */\n          --paper-slider-knob-start-border-color: var(--primary-color);\n        }\n\n        .segmentationContainer {\n          position: relative;\n          width: 100%;\n        }\n\n        ha-color-picker {\n          display: block;\n          width: 100%;\n\n          max-height: 0px;\n          overflow: hidden;\n          transition: max-height 0.5s ease-in;\n        }\n\n        .segmentationButton {\n          position: absolute;\n          top: 11%;\n          transform: translate(0%, 0%);\n          padding: 0px;\n          max-height: 0px;\n          width: 23px;\n          height: 23px;\n          opacity: var(--dark-secondary-opacity);\n          overflow: hidden;\n          transition: max-height 0.5s ease-in;\n        }\n\n        .has-color.is-on .segmentationContainer .segmentationButton {\n          position: absolute;\n          top: 11%;\n          transform: translate(0%, 0%);\n          width: 23px;\n          height: 23px;\n          padding: 0px;\n          opacity: var(--dark-secondary-opacity);\n        }\n\n        .has-effect_list.is-on .effect_list,\n        .has-brightness .brightness,\n        .has-color_temp.is-on .color_temp,\n        .has-white_value.is-on .white_value {\n          max-height: 84px;\n        }\n\n        .has-brightness .has-color_temp.is-on,\n        .has-white_value.is-on {\n          margin-top: -16px;\n        }\n\n        .has-brightness .brightness,\n        .has-color_temp.is-on .color_temp,\n        .has-white_value.is-on .white_value {\n          padding-top: 16px;\n        }\n\n        .has-color.is-on .segmentationButton {\n          max-height: 100px;\n          overflow: visible;\n        }\n\n        .has-color.is-on ha-color-picker {\n          max-height: 500px;\n          overflow: visible;\n          --ha-color-picker-wheel-borderwidth: 5;\n          --ha-color-picker-wheel-bordercolor: white;\n          --ha-color-picker-wheel-shadow: none;\n          --ha-color-picker-marker-borderwidth: 2;\n          --ha-color-picker-marker-bordercolor: white;\n        }\n\n        .is-unavailable .control {\n          max-height: 0px;\n        }\n\n        paper-item {\n          cursor: pointer;\n        }\n      </style>\n\n      <div class$=\"[[computeClassNames(stateObj)]]\">\n        <div class=\"control brightness\">\n          <ha-labeled-slider\n            caption=\"[[localize('ui.card.light.brightness')]]\"\n            icon=\"hass:brightness-5\"\n            min=\"1\"\n            max=\"255\"\n            value=\"{{brightnessSliderValue}}\"\n            on-change=\"brightnessSliderChanged\"\n          ></ha-labeled-slider>\n        </div>\n\n        <div class=\"control color_temp\">\n          <ha-labeled-slider\n            caption=\"[[localize('ui.card.light.color_temperature')]]\"\n            icon=\"hass:thermometer\"\n            min=\"[[stateObj.attributes.min_mireds]]\"\n            max=\"[[stateObj.attributes.max_mireds]]\"\n            value=\"{{ctSliderValue}}\"\n            on-change=\"ctSliderChanged\"\n          ></ha-labeled-slider>\n        </div>\n\n        <div class=\"control white_value\">\n          <ha-labeled-slider\n            caption=\"[[localize('ui.card.light.white_value')]]\"\n            icon=\"hass:file-word-box\"\n            max=\"255\"\n            value=\"{{wvSliderValue}}\"\n            on-change=\"wvSliderChanged\"\n          ></ha-labeled-slider>\n        </div>\n        <div class=\"segmentationContainer\">\n          <ha-color-picker\n            class=\"control color\"\n            on-colorselected=\"colorPicked\"\n            desired-hs-color=\"{{colorPickerColor}}\"\n            throttle=\"500\"\n            hue-segments=\"{{hueSegments}}\"\n            saturation-segments=\"{{saturationSegments}}\"\n          >\n          </ha-color-picker>\n          <paper-icon-button\n            icon=\"mdi:palette\"\n            on-click=\"segmentClick\"\n            class=\"control segmentationButton\"\n          ></paper-icon-button>\n        </div>\n\n        <div class=\"control effect_list\">\n          <ha-paper-dropdown-menu\n            label-float=\"\"\n            dynamic-align=\"\"\n            label=\"[[localize('ui.card.light.effect')]]\"\n          >\n            <paper-listbox\n              slot=\"dropdown-content\"\n              selected=\"[[stateObj.attributes.effect]]\"\n              on-selected-changed=\"effectChanged\"\n              attr-for-selected=\"item-name\"\n            >\n              <template\n                is=\"dom-repeat\"\n                items=\"[[stateObj.attributes.effect_list]]\"\n              >\n                <paper-item item-name$=\"[[item]]\">[[item]]</paper-item>\n              </template>\n            </paper-listbox>\n          </ha-paper-dropdown-menu>\n        </div>\n\n        <ha-attributes\n          state-obj=\"[[stateObj]]\"\n          extra-filters=\"brightness,color_temp,white_value,effect_list,effect,hs_color,rgb_color,xy_color,min_mireds,max_mireds\"\n        ></ha-attributes>\n      </div>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: {\n        type: Object,\n      },\n\n      stateObj: {\n        type: Object,\n        observer: \"stateObjChanged\",\n      },\n\n      brightnessSliderValue: {\n        type: Number,\n        value: 0,\n      },\n\n      ctSliderValue: {\n        type: Number,\n        value: 0,\n      },\n\n      wvSliderValue: {\n        type: Number,\n        value: 0,\n      },\n\n      hueSegments: {\n        type: Number,\n        value: 24,\n      },\n\n      saturationSegments: {\n        type: Number,\n        value: 8,\n      },\n\n      colorPickerColor: {\n        type: Object,\n      },\n    };\n  }\n\n  stateObjChanged(newVal, oldVal) {\n    const props = {\n      brightnessSliderValue: 0,\n    };\n\n    if (newVal && newVal.state === \"on\") {\n      props.brightnessSliderValue = newVal.attributes.brightness;\n      props.ctSliderValue = newVal.attributes.color_temp;\n      props.wvSliderValue = newVal.attributes.white_value;\n      if (newVal.attributes.hs_color) {\n        props.colorPickerColor = {\n          h: newVal.attributes.hs_color[0],\n          s: newVal.attributes.hs_color[1] / 100,\n        };\n      }\n    }\n\n    this.setProperties(props);\n\n    if (oldVal) {\n      setTimeout(() => {\n        this.fire(\"iron-resize\");\n      }, 500);\n    }\n  }\n\n  computeClassNames(stateObj) {\n    const classes = [featureClassNames(stateObj, FEATURE_CLASS_NAMES)];\n    if (stateObj && stateObj.state === \"on\") {\n      classes.push(\"is-on\");\n    }\n    if (stateObj && stateObj.state === \"unavailable\") {\n      classes.push(\"is-unavailable\");\n    }\n    return classes.join(\" \");\n  }\n\n  effectChanged(ev) {\n    var oldVal = this.stateObj.attributes.effect;\n    var newVal = ev.detail.value;\n\n    if (!newVal || oldVal === newVal) return;\n\n    this.hass.callService(\"light\", \"turn_on\", {\n      entity_id: this.stateObj.entity_id,\n      effect: newVal,\n    });\n  }\n\n  brightnessSliderChanged(ev) {\n    var bri = parseInt(ev.target.value, 10);\n\n    if (isNaN(bri)) return;\n\n    this.hass.callService(\"light\", \"turn_on\", {\n      entity_id: this.stateObj.entity_id,\n      brightness: bri,\n    });\n  }\n\n  ctSliderChanged(ev) {\n    var ct = parseInt(ev.target.value, 10);\n\n    if (isNaN(ct)) return;\n\n    this.hass.callService(\"light\", \"turn_on\", {\n      entity_id: this.stateObj.entity_id,\n      color_temp: ct,\n    });\n  }\n\n  wvSliderChanged(ev) {\n    var wv = parseInt(ev.target.value, 10);\n\n    if (isNaN(wv)) return;\n\n    this.hass.callService(\"light\", \"turn_on\", {\n      entity_id: this.stateObj.entity_id,\n      white_value: wv,\n    });\n  }\n\n  segmentClick() {\n    if (this.hueSegments === 24 && this.saturationSegments === 8) {\n      this.setProperties({ hueSegments: 0, saturationSegments: 0 });\n    } else {\n      this.setProperties({ hueSegments: 24, saturationSegments: 8 });\n    }\n  }\n\n  serviceChangeColor(hass, entityId, color) {\n    hass.callService(\"light\", \"turn_on\", {\n      entity_id: entityId,\n      hs_color: [color.h, color.s * 100],\n    });\n  }\n\n  /**\n   * Called when a new color has been picked.\n   * should be throttled with the 'throttle=' attribute of the color picker\n   */\n  colorPicked(ev) {\n    this.serviceChangeColor(this.hass, this.stateObj.entity_id, ev.detail.hs);\n  }\n}\n\ncustomElements.define(\"more-info-light\", MoreInfoLight);\n","import \"@material/mwc-button\";\nimport \"@polymer/paper-input/paper-input\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport \"../../../components/ha-attributes\";\n\nimport LocalizeMixin from \"../../../mixins/localize-mixin\";\n\n/*\n * @appliesMixin LocalizeMixin\n */\nclass MoreInfoLock extends LocalizeMixin(PolymerElement) {\n  static get template() {\n    return html`\n      <style>\n        paper-input {\n          display: inline-block;\n        }\n      </style>\n\n      <template is=\"dom-if\" if=\"[[stateObj.attributes.code_format]]\">\n        <paper-input\n          label=\"[[localize('ui.card.lock.code')]]\"\n          value=\"{{enteredCode}}\"\n          pattern=\"[[stateObj.attributes.code_format]]\"\n          type=\"password\"\n        ></paper-input>\n        <mwc-button\n          on-click=\"callService\"\n          data-service=\"unlock\"\n          hidden$=\"[[!isLocked]]\"\n          >[[localize('ui.card.lock.unlock')]]</mwc-button\n        >\n        <mwc-button\n          on-click=\"callService\"\n          data-service=\"lock\"\n          hidden$=\"[[isLocked]]\"\n          >[[localize('ui.card.lock.lock')]]</mwc-button\n        >\n      </template>\n      <ha-attributes\n        state-obj=\"[[stateObj]]\"\n        extra-filters=\"code_format\"\n      ></ha-attributes>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      stateObj: {\n        type: Object,\n        observer: \"stateObjChanged\",\n      },\n      enteredCode: {\n        type: String,\n        value: \"\",\n      },\n      isLocked: Boolean,\n    };\n  }\n\n  stateObjChanged(newVal) {\n    if (newVal) {\n      this.isLocked = newVal.state === \"locked\";\n    }\n  }\n\n  callService(ev) {\n    const service = ev.target.getAttribute(\"data-service\");\n    const data = {\n      entity_id: this.stateObj.entity_id,\n      code: this.enteredCode,\n    };\n    this.hass.callService(\"lock\", service, data);\n  }\n}\n\ncustomElements.define(\"more-info-lock\", MoreInfoLock);\n","import \"@polymer/iron-flex-layout/iron-flex-layout-classes\";\nimport \"@polymer/iron-icon/iron-icon\";\nimport \"@polymer/paper-icon-button/paper-icon-button\";\nimport \"@polymer/paper-item/paper-item\";\nimport \"@polymer/paper-listbox/paper-listbox\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport \"../../../components/ha-paper-slider\";\nimport \"../../../components/ha-paper-dropdown-menu\";\nimport HassMediaPlayerEntity from \"../../../util/hass-media-player-model\";\n\nimport attributeClassNames from \"../../../common/entity/attribute_class_names\";\nimport isComponentLoaded from \"../../../common/config/is_component_loaded\";\nimport { EventsMixin } from \"../../../mixins/events-mixin\";\nimport LocalizeMixin from \"../../../mixins/localize-mixin\";\nimport { computeRTLDirection } from \"../../../common/util/compute_rtl\";\n\n/*\n * @appliesMixin LocalizeMixin\n * @appliesMixin EventsMixin\n */\nclass MoreInfoMediaPlayer extends LocalizeMixin(EventsMixin(PolymerElement)) {\n  static get template() {\n    return html`\n      <style include=\"iron-flex iron-flex-alignment\"></style>\n      <style>\n        .media-state {\n          text-transform: capitalize;\n        }\n\n        paper-icon-button[highlight] {\n          color: var(--accent-color);\n        }\n\n        .volume {\n          margin-bottom: 8px;\n\n          max-height: 0px;\n          overflow: hidden;\n          transition: max-height 0.5s ease-in;\n        }\n\n        .has-volume_level .volume {\n          max-height: 40px;\n        }\n\n        iron-icon.source-input {\n          padding: 7px;\n          margin-top: 15px;\n        }\n\n        ha-paper-dropdown-menu.source-input {\n          margin-left: 10px;\n        }\n\n        [hidden] {\n          display: none !important;\n        }\n\n        paper-item {\n          cursor: pointer;\n        }\n      </style>\n\n      <div class$=\"[[computeClassNames(stateObj)]]\">\n        <div class=\"layout horizontal\">\n          <div class=\"flex\">\n            <paper-icon-button\n              icon=\"hass:power\"\n              highlight$=\"[[playerObj.isOff]]\"\n              on-click=\"handleTogglePower\"\n              hidden$=\"[[computeHidePowerButton(playerObj)]]\"\n            ></paper-icon-button>\n          </div>\n          <div>\n            <template\n              is=\"dom-if\"\n              if=\"[[computeShowPlaybackControls(playerObj)]]\"\n            >\n              <paper-icon-button\n                icon=\"hass:skip-previous\"\n                on-click=\"handlePrevious\"\n                hidden$=\"[[!playerObj.supportsPreviousTrack]]\"\n              ></paper-icon-button>\n              <paper-icon-button\n                icon=\"[[computePlaybackControlIcon(playerObj)]]\"\n                on-click=\"handlePlaybackControl\"\n                hidden$=\"[[!computePlaybackControlIcon(playerObj)]]\"\n                highlight=\"\"\n              ></paper-icon-button>\n              <paper-icon-button\n                icon=\"hass:skip-next\"\n                on-click=\"handleNext\"\n                hidden$=\"[[!playerObj.supportsNextTrack]]\"\n              ></paper-icon-button>\n            </template>\n          </div>\n        </div>\n        <!-- VOLUME -->\n        <div\n          class=\"volume_buttons center horizontal layout\"\n          hidden$=\"[[computeHideVolumeButtons(playerObj)]]\"\n        >\n          <paper-icon-button\n            on-click=\"handleVolumeTap\"\n            icon=\"hass:volume-off\"\n          ></paper-icon-button>\n          <paper-icon-button\n            id=\"volumeDown\"\n            disabled$=\"[[playerObj.isMuted]]\"\n            on-mousedown=\"handleVolumeDown\"\n            on-touchstart=\"handleVolumeDown\"\n            on-touchend=\"handleVolumeTouchEnd\"\n            icon=\"hass:volume-medium\"\n          ></paper-icon-button>\n          <paper-icon-button\n            id=\"volumeUp\"\n            disabled$=\"[[playerObj.isMuted]]\"\n            on-mousedown=\"handleVolumeUp\"\n            on-touchstart=\"handleVolumeUp\"\n            on-touchend=\"handleVolumeTouchEnd\"\n            icon=\"hass:volume-high\"\n          ></paper-icon-button>\n        </div>\n        <div\n          class=\"volume center horizontal layout\"\n          hidden$=\"[[!playerObj.supportsVolumeSet]]\"\n        >\n          <paper-icon-button\n            on-click=\"handleVolumeTap\"\n            hidden$=\"[[playerObj.supportsVolumeButtons]]\"\n            icon=\"[[computeMuteVolumeIcon(playerObj)]]\"\n          ></paper-icon-button>\n          <ha-paper-slider\n            disabled$=\"[[playerObj.isMuted]]\"\n            min=\"0\"\n            max=\"100\"\n            value=\"[[playerObj.volumeSliderValue]]\"\n            on-change=\"volumeSliderChanged\"\n            class=\"flex\"\n            ignore-bar-touch=\"\"\n            dir=\"{{rtl}}\"\n          >\n          </ha-paper-slider>\n        </div>\n        <!-- SOURCE PICKER -->\n        <div\n          class=\"controls layout horizontal justified\"\n          hidden$=\"[[computeHideSelectSource(playerObj)]]\"\n        >\n          <iron-icon class=\"source-input\" icon=\"hass:login-variant\"></iron-icon>\n          <ha-paper-dropdown-menu\n            class=\"flex source-input\"\n            dynamic-align=\"\"\n            label-float=\"\"\n            label=\"[[localize('ui.card.media_player.source')]]\"\n          >\n            <paper-listbox\n              slot=\"dropdown-content\"\n              attr-for-selected=\"item-name\"\n              selected=\"[[playerObj.source]]\"\n              on-selected-changed=\"handleSourceChanged\"\n            >\n              <template is=\"dom-repeat\" items=\"[[playerObj.sourceList]]\">\n                <paper-item item-name$=\"[[item]]\">[[item]]</paper-item>\n              </template>\n            </paper-listbox>\n          </ha-paper-dropdown-menu>\n        </div>\n        <!-- SOUND MODE PICKER -->\n        <template is=\"dom-if\" if=\"[[!computeHideSelectSoundMode(playerObj)]]\">\n          <div class=\"controls layout horizontal justified\">\n            <iron-icon class=\"source-input\" icon=\"hass:music-note\"></iron-icon>\n            <ha-paper-dropdown-menu\n              class=\"flex source-input\"\n              dynamic-align\n              label-float\n              label=\"[[localize('ui.card.media_player.sound_mode')]]\"\n            >\n              <paper-listbox\n                slot=\"dropdown-content\"\n                attr-for-selected=\"item-name\"\n                selected=\"[[playerObj.soundMode]]\"\n                on-selected-changed=\"handleSoundModeChanged\"\n              >\n                <template is=\"dom-repeat\" items=\"[[playerObj.soundModeList]]\">\n                  <paper-item item-name$=\"[[item]]\">[[item]]</paper-item>\n                </template>\n              </paper-listbox>\n            </ha-paper-dropdown-menu>\n          </div>\n        </template>\n        <!-- TTS -->\n        <div\n          hidden$=\"[[computeHideTTS(ttsLoaded, playerObj)]]\"\n          class=\"layout horizontal end\"\n        >\n          <paper-input\n            id=\"ttsInput\"\n            label=\"[[localize('ui.card.media_player.text_to_speak')]]\"\n            class=\"flex\"\n            value=\"{{ttsMessage}}\"\n            on-keydown=\"ttsCheckForEnter\"\n          ></paper-input>\n          <paper-icon-button\n            icon=\"hass:send\"\n            on-click=\"sendTTS\"\n          ></paper-icon-button>\n        </div>\n      </div>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      stateObj: Object,\n      playerObj: {\n        type: Object,\n        computed: \"computePlayerObj(hass, stateObj)\",\n        observer: \"playerObjChanged\",\n      },\n\n      ttsLoaded: {\n        type: Boolean,\n        computed: \"computeTTSLoaded(hass)\",\n      },\n\n      ttsMessage: {\n        type: String,\n        value: \"\",\n      },\n\n      rtl: {\n        type: String,\n        computed: \"_computeRTLDirection(hass)\",\n      },\n    };\n  }\n\n  computePlayerObj(hass, stateObj) {\n    return new HassMediaPlayerEntity(hass, stateObj);\n  }\n\n  playerObjChanged(newVal, oldVal) {\n    if (oldVal) {\n      setTimeout(() => {\n        this.fire(\"iron-resize\");\n      }, 500);\n    }\n  }\n\n  computeClassNames(stateObj) {\n    return attributeClassNames(stateObj, [\"volume_level\"]);\n  }\n\n  computeMuteVolumeIcon(playerObj) {\n    return playerObj.isMuted ? \"hass:volume-off\" : \"hass:volume-high\";\n  }\n\n  computeHideVolumeButtons(playerObj) {\n    return !playerObj.supportsVolumeButtons || playerObj.isOff;\n  }\n\n  computeShowPlaybackControls(playerObj) {\n    return !playerObj.isOff && playerObj.hasMediaControl;\n  }\n\n  computePlaybackControlIcon(playerObj) {\n    if (playerObj.isPlaying) {\n      return playerObj.supportsPause ? \"hass:pause\" : \"hass:stop\";\n    }\n    if (playerObj.hasMediaControl || playerObj.isOff || playerObj.isIdle) {\n      if (\n        playerObj.hasMediaControl &&\n        playerObj.supportsPause &&\n        !playerObj.isPaused\n      ) {\n        return \"hass:play-pause\";\n      }\n      return playerObj.supportsPlay ? \"hass:play\" : null;\n    }\n    return \"\";\n  }\n\n  computeHidePowerButton(playerObj) {\n    return playerObj.isOff\n      ? !playerObj.supportsTurnOn\n      : !playerObj.supportsTurnOff;\n  }\n\n  computeHideSelectSource(playerObj) {\n    return (\n      playerObj.isOff ||\n      !playerObj.supportsSelectSource ||\n      !playerObj.sourceList\n    );\n  }\n\n  computeHideSelectSoundMode(playerObj) {\n    return (\n      playerObj.isOff ||\n      !playerObj.supportsSelectSoundMode ||\n      !playerObj.soundModeList\n    );\n  }\n\n  computeHideTTS(ttsLoaded, playerObj) {\n    return !ttsLoaded || !playerObj.supportsPlayMedia;\n  }\n\n  computeTTSLoaded(hass) {\n    return isComponentLoaded(hass, \"tts\");\n  }\n\n  handleTogglePower() {\n    this.playerObj.togglePower();\n  }\n\n  handlePrevious() {\n    this.playerObj.previousTrack();\n  }\n\n  handlePlaybackControl() {\n    this.playerObj.mediaPlayPause();\n  }\n\n  handleNext() {\n    this.playerObj.nextTrack();\n  }\n\n  handleSourceChanged(ev) {\n    if (!this.playerObj) return;\n\n    var oldVal = this.playerObj.source;\n    var newVal = ev.detail.value;\n\n    if (!newVal || oldVal === newVal) return;\n\n    this.playerObj.selectSource(newVal);\n  }\n\n  handleSoundModeChanged(ev) {\n    if (!this.playerObj) return;\n\n    var oldVal = this.playerObj.soundMode;\n    var newVal = ev.detail.value;\n\n    if (!newVal || oldVal === newVal) return;\n\n    this.playerObj.selectSoundMode(newVal);\n  }\n\n  handleVolumeTap() {\n    if (!this.playerObj.supportsVolumeMute) {\n      return;\n    }\n    this.playerObj.volumeMute(!this.playerObj.isMuted);\n  }\n\n  handleVolumeTouchEnd(ev) {\n    /* when touch ends, we must prevent this from\n     * becoming a mousedown, up, click by emulation */\n    ev.preventDefault();\n  }\n\n  handleVolumeUp() {\n    const obj = this.$.volumeUp;\n    this.handleVolumeWorker(\"volume_up\", obj, true);\n  }\n\n  handleVolumeDown() {\n    const obj = this.$.volumeDown;\n    this.handleVolumeWorker(\"volume_down\", obj, true);\n  }\n\n  handleVolumeWorker(service, obj, force) {\n    if (force || (obj !== undefined && obj.pointerDown)) {\n      this.playerObj.callService(service);\n      setTimeout(() => this.handleVolumeWorker(service, obj, false), 500);\n    }\n  }\n\n  volumeSliderChanged(ev) {\n    const volPercentage = parseFloat(ev.target.value);\n    const volume = volPercentage > 0 ? volPercentage / 100 : 0;\n    this.playerObj.setVolume(volume);\n  }\n\n  ttsCheckForEnter(ev) {\n    if (ev.keyCode === 13) this.sendTTS();\n  }\n\n  sendTTS() {\n    const services = this.hass.services.tts;\n    const serviceKeys = Object.keys(services).sort();\n    let service;\n    let i;\n\n    for (i = 0; i < serviceKeys.length; i++) {\n      if (serviceKeys[i].indexOf(\"_say\") !== -1) {\n        service = serviceKeys[i];\n        break;\n      }\n    }\n\n    if (!service) {\n      return;\n    }\n\n    this.hass.callService(\"tts\", service, {\n      entity_id: this.stateObj.entity_id,\n      message: this.ttsMessage,\n    });\n    this.ttsMessage = \"\";\n    this.$.ttsInput.focus();\n  }\n\n  _computeRTLDirection(hass) {\n    return computeRTLDirection(hass);\n  }\n}\n\ncustomElements.define(\"more-info-media_player\", MoreInfoMediaPlayer);\n","import \"@polymer/iron-flex-layout/iron-flex-layout-classes\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\nimport LocalizeMixin from \"../../../mixins/localize-mixin\";\n\nclass MoreInfoScript extends LocalizeMixin(PolymerElement) {\n  static get template() {\n    return html`\n      <style include=\"iron-flex iron-flex-alignment\"></style>\n\n      <div class=\"layout vertical\">\n        <div class=\"data-entry layout justified horizontal\">\n          <div class=\"key\">\n            [[localize('ui.dialogs.more_info_control.script.last_action')]]\n          </div>\n          <div class=\"value\">[[stateObj.attributes.last_action]]</div>\n        </div>\n      </div>\n    `;\n  }\n\n  static get properties() {\n    return {\n      stateObj: {\n        type: Object,\n      },\n    };\n  }\n}\n\ncustomElements.define(\"more-info-script\", MoreInfoScript);\n","import \"@polymer/iron-flex-layout/iron-flex-layout-classes\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport \"../../../components/ha-relative-time\";\n\nimport LocalizeMixin from \"../../../mixins/localize-mixin\";\nimport formatTime from \"../../../common/datetime/format_time\";\n\nclass MoreInfoSun extends LocalizeMixin(PolymerElement) {\n  static get template() {\n    return html`\n      <style include=\"iron-flex iron-flex-alignment\"></style>\n\n      <template\n        is=\"dom-repeat\"\n        items=\"[[computeOrder(risingDate, settingDate)]]\"\n      >\n        <div class=\"data-entry layout justified horizontal\">\n          <div class=\"key\">\n            <span>[[itemCaption(item)]]</span>\n            <ha-relative-time\n              hass=\"[[hass]]\"\n              datetime-obj=\"[[itemDate(item)]]\"\n            ></ha-relative-time>\n          </div>\n          <div class=\"value\">[[itemValue(item)]]</div>\n        </div>\n      </template>\n      <div class=\"data-entry layout justified horizontal\">\n        <div class=\"key\">\n          [[localize('ui.dialogs.more_info_control.sun.elevation')]]\n        </div>\n        <div class=\"value\">[[stateObj.attributes.elevation]]</div>\n      </div>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      stateObj: Object,\n      risingDate: {\n        type: Object,\n        computed: \"computeRising(stateObj)\",\n      },\n\n      settingDate: {\n        type: Object,\n        computed: \"computeSetting(stateObj)\",\n      },\n    };\n  }\n\n  computeRising(stateObj) {\n    return new Date(stateObj.attributes.next_rising);\n  }\n\n  computeSetting(stateObj) {\n    return new Date(stateObj.attributes.next_setting);\n  }\n\n  computeOrder(risingDate, settingDate) {\n    return risingDate > settingDate ? [\"set\", \"ris\"] : [\"ris\", \"set\"];\n  }\n\n  itemCaption(type) {\n    if (type === \"ris\") {\n      return this.localize(\"ui.dialogs.more_info_control.sun.rising\");\n    }\n    return this.localize(\"ui.dialogs.more_info_control.sun.setting\");\n  }\n\n  itemDate(type) {\n    return type === \"ris\" ? this.risingDate : this.settingDate;\n  }\n\n  itemValue(type) {\n    return formatTime(this.itemDate(type), this.hass.language);\n  }\n}\n\ncustomElements.define(\"more-info-sun\", MoreInfoSun);\n","import { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\nimport LocalizeMixin from \"../../../mixins/localize-mixin\";\n\nclass MoreInfoUpdater extends LocalizeMixin(PolymerElement) {\n  static get template() {\n    return html`\n      <style>\n        .link {\n          color: #03a9f4;\n        }\n      </style>\n\n      <div>\n        <a\n          class=\"link\"\n          href=\"https://www.home-assistant.io/docs/installation/updating/\"\n          target=\"_blank\"\n          >[[localize('ui.dialogs.more_info_control.updater.title')]]</a\n        >\n      </div>\n    `;\n  }\n\n  static get properties() {\n    return {\n      stateObj: {\n        type: Object,\n      },\n    };\n  }\n\n  computeReleaseNotes(stateObj) {\n    return (\n      stateObj.attributes.release_notes ||\n      \"https://www.home-assistant.io/docs/installation/updating/\"\n    );\n  }\n}\n\ncustomElements.define(\"more-info-updater\", MoreInfoUpdater);\n","import \"@polymer/iron-flex-layout/iron-flex-layout-classes\";\nimport \"@polymer/iron-icon/iron-icon\";\nimport \"@polymer/paper-icon-button/paper-icon-button\";\nimport \"@polymer/paper-item/paper-item\";\nimport \"@polymer/paper-listbox/paper-listbox\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport \"../../../components/ha-attributes\";\nimport \"../../../components/ha-paper-dropdown-menu\";\nimport { supportsFeature } from \"../../../common/entity/supports-feature\";\n\nclass MoreInfoVacuum extends PolymerElement {\n  static get template() {\n    return html`\n      <style include=\"iron-flex iron-flex-alignment\"></style>\n      <style>\n        :host {\n          @apply --paper-font-body1;\n          line-height: 1.5;\n        }\n\n        .status-subtitle {\n          color: var(--secondary-text-color);\n        }\n\n        paper-item {\n          cursor: pointer;\n        }\n      </style>\n\n      <div class=\"horizontal justified layout\">\n        <div hidden$=\"[[!supportsStatus(stateObj)]]\">\n          <span class=\"status-subtitle\">Status: </span\n          ><span><strong>[[stateObj.attributes.status]]</strong></span>\n        </div>\n        <div hidden$=\"[[!supportsBattery(stateObj)]]\">\n          <span\n            ><iron-icon icon=\"[[stateObj.attributes.battery_icon]]\"></iron-icon>\n            [[stateObj.attributes.battery_level]] %</span\n          >\n        </div>\n      </div>\n      <div hidden$=\"[[!supportsCommandBar(stateObj)]]\">\n        <p></p>\n        <div class=\"status-subtitle\">Vacuum cleaner commands:</div>\n        <div class=\"horizontal justified layout\">\n          <template is=\"dom-if\" if=\"[[supportsStart(stateObj)]]\">\n            <div>\n              <paper-icon-button\n                icon=\"hass:play\"\n                on-click=\"onStart\"\n                title=\"Start\"\n              ></paper-icon-button>\n            </div>\n            <div hidden$=\"[[!supportsPause(stateObj)]]\">\n              <paper-icon-button\n                icon=\"hass:pause\"\n                on-click=\"onPause\"\n                title=\"Pause\"\n              ></paper-icon-button>\n            </div>\n          </template>\n          <template is=\"dom-if\" if=\"[[!supportsStart(stateObj)]]\">\n            <div hidden$=\"[[!supportsPause(stateObj)]]\">\n              <paper-icon-button\n                icon=\"hass:play-pause\"\n                on-click=\"onPlayPause\"\n                title=\"Pause\"\n              ></paper-icon-button>\n            </div>\n          </template>\n\n          <div hidden$=\"[[!supportsStop(stateObj)]]\">\n            <paper-icon-button\n              icon=\"hass:stop\"\n              on-click=\"onStop\"\n              title=\"Stop\"\n            ></paper-icon-button>\n          </div>\n          <div hidden$=\"[[!supportsCleanSpot(stateObj)]]\">\n            <paper-icon-button\n              icon=\"hass:broom\"\n              on-click=\"onCleanSpot\"\n              title=\"Clean spot\"\n            ></paper-icon-button>\n          </div>\n          <div hidden$=\"[[!supportsLocate(stateObj)]]\">\n            <paper-icon-button\n              icon=\"hass:map-marker\"\n              on-click=\"onLocate\"\n              title=\"Locate\"\n            ></paper-icon-button>\n          </div>\n          <div hidden$=\"[[!supportsReturnHome(stateObj)]]\">\n            <paper-icon-button\n              icon=\"hass:home-map-marker\"\n              on-click=\"onReturnHome\"\n              title=\"Return home\"\n            ></paper-icon-button>\n          </div>\n        </div>\n      </div>\n\n      <div hidden$=\"[[!supportsFanSpeed(stateObj)]]\">\n        <div class=\"horizontal justified layout\">\n          <ha-paper-dropdown-menu\n            label-float=\"\"\n            dynamic-align=\"\"\n            label=\"Fan speed\"\n          >\n            <paper-listbox\n              slot=\"dropdown-content\"\n              selected=\"[[stateObj.attributes.fan_speed]]\"\n              on-selected-changed=\"fanSpeedChanged\"\n              attr-for-selected=\"item-name\"\n            >\n              <template\n                is=\"dom-repeat\"\n                items=\"[[stateObj.attributes.fan_speed_list]]\"\n              >\n                <paper-item item-name$=\"[[item]]\">[[item]]</paper-item>\n              </template>\n            </paper-listbox>\n          </ha-paper-dropdown-menu>\n          <div\n            style=\"justify-content: center; align-self: center; padding-top: 1.3em\"\n          >\n            <span\n              ><iron-icon icon=\"hass:fan\"></iron-icon>\n              [[stateObj.attributes.fan_speed]]</span\n            >\n          </div>\n        </div>\n        <p></p>\n      </div>\n      <ha-attributes\n        state-obj=\"[[stateObj]]\"\n        extra-filters=\"fan_speed,fan_speed_list,status,battery_level,battery_icon\"\n      ></ha-attributes>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: {\n        type: Object,\n      },\n\n      inDialog: {\n        type: Boolean,\n        value: false,\n      },\n\n      stateObj: {\n        type: Object,\n      },\n    };\n  }\n\n  supportsPause(stateObj) {\n    return supportsFeature(stateObj, 4);\n  }\n\n  supportsStop(stateObj) {\n    return supportsFeature(stateObj, 8);\n  }\n\n  supportsReturnHome(stateObj) {\n    return supportsFeature(stateObj, 16);\n  }\n\n  supportsFanSpeed(stateObj) {\n    return supportsFeature(stateObj, 32);\n  }\n\n  supportsBattery(stateObj) {\n    return supportsFeature(stateObj, 64);\n  }\n\n  supportsStatus(stateObj) {\n    return supportsFeature(stateObj, 128);\n  }\n\n  supportsLocate(stateObj) {\n    return supportsFeature(stateObj, 512);\n  }\n\n  supportsCleanSpot(stateObj) {\n    return supportsFeature(stateObj, 1024);\n  }\n\n  supportsStart(stateObj) {\n    return supportsFeature(stateObj, 8192);\n  }\n\n  supportsCommandBar(stateObj) {\n    return (\n      supportsFeature(stateObj, 4) |\n      supportsFeature(stateObj, 8) |\n      supportsFeature(stateObj, 16) |\n      supportsFeature(stateObj, 512) |\n      supportsFeature(stateObj, 1024) |\n      supportsFeature(stateObj, 8192)\n    );\n  }\n\n  fanSpeedChanged(ev) {\n    var oldVal = this.stateObj.attributes.fan_speed;\n    var newVal = ev.detail.value;\n\n    if (!newVal || oldVal === newVal) return;\n\n    this.hass.callService(\"vacuum\", \"set_fan_speed\", {\n      entity_id: this.stateObj.entity_id,\n      fan_speed: newVal,\n    });\n  }\n\n  onStop() {\n    this.hass.callService(\"vacuum\", \"stop\", {\n      entity_id: this.stateObj.entity_id,\n    });\n  }\n\n  onPlayPause() {\n    this.hass.callService(\"vacuum\", \"start_pause\", {\n      entity_id: this.stateObj.entity_id,\n    });\n  }\n\n  onPause() {\n    this.hass.callService(\"vacuum\", \"pause\", {\n      entity_id: this.stateObj.entity_id,\n    });\n  }\n\n  onStart() {\n    this.hass.callService(\"vacuum\", \"start\", {\n      entity_id: this.stateObj.entity_id,\n    });\n  }\n\n  onLocate() {\n    this.hass.callService(\"vacuum\", \"locate\", {\n      entity_id: this.stateObj.entity_id,\n    });\n  }\n\n  onCleanSpot() {\n    this.hass.callService(\"vacuum\", \"clean_spot\", {\n      entity_id: this.stateObj.entity_id,\n    });\n  }\n\n  onReturnHome() {\n    this.hass.callService(\"vacuum\", \"return_to_base\", {\n      entity_id: this.stateObj.entity_id,\n    });\n  }\n}\n\ncustomElements.define(\"more-info-vacuum\", MoreInfoVacuum);\n","import \"@polymer/iron-flex-layout/iron-flex-layout-classes\";\nimport \"@polymer/paper-item/paper-item\";\nimport \"@polymer/paper-listbox/paper-listbox\";\nimport \"@polymer/paper-toggle-button/paper-toggle-button\";\nimport { timeOut } from \"@polymer/polymer/lib/utils/async\";\nimport { Debouncer } from \"@polymer/polymer/lib/utils/debounce\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport \"../../../components/ha-water_heater-control\";\nimport \"../../../components/ha-paper-slider\";\nimport \"../../../components/ha-paper-dropdown-menu\";\n\nimport featureClassNames from \"../../../common/entity/feature_class_names\";\nimport { supportsFeature } from \"../../../common/entity/supports-feature\";\n\nimport { EventsMixin } from \"../../../mixins/events-mixin\";\nimport LocalizeMixin from \"../../../mixins/localize-mixin\";\n\n/*\n * @appliesMixin EventsMixin\n * @appliesMixin LocalizeMixin\n */\nclass MoreInfoWaterHeater extends LocalizeMixin(EventsMixin(PolymerElement)) {\n  static get template() {\n    return html`\n      <style include=\"iron-flex\"></style>\n      <style>\n        :host {\n          color: var(--primary-text-color);\n        }\n\n        .container-away_mode,\n        .container-temperature,\n        .container-operation_list,\n\n        .has-away_mode .container-away_mode,\n        .has-target_temperature .container-temperature,\n        .has-operation_mode .container-operation_list,\n\n        .container-operation_list iron-icon,\n\n        ha-paper-dropdown-menu {\n          width: 100%;\n        }\n\n        paper-item {\n          cursor: pointer;\n        }\n\n        ha-paper-slider {\n          width: 100%;\n        }\n\n        ha-water_heater-control.range-control-left,\n        ha-water_heater-control.range-control-right {\n          float: left;\n          width: 46%;\n        }\n        ha-water_heater-control.range-control-left {\n          margin-right: 4%;\n        }\n        ha-water_heater-control.range-control-right {\n          margin-left: 4%;\n        }\n\n        .single-row {\n          padding: 8px 0;\n        }\n        }\n      </style>\n\n      <div class$=\"[[computeClassNames(stateObj)]]\">\n        <div class=\"container-temperature\">\n          <div class$=\"[[stateObj.attributes.operation_mode]]\">\n            <div hidden$=\"[[!supportsTemperatureControls(stateObj)]]\">\n              [[localize('ui.card.water_heater.target_temperature')]]\n            </div>\n            <template is=\"dom-if\" if=\"[[supportsTemperature(stateObj)]]\">\n              <ha-water_heater-control\n                value=\"[[stateObj.attributes.temperature]]\"\n                units=\"[[hass.config.unit_system.temperature]]\"\n                step=\"[[computeTemperatureStepSize(hass, stateObj)]]\"\n                min=\"[[stateObj.attributes.min_temp]]\"\n                max=\"[[stateObj.attributes.max_temp]]\"\n                on-change=\"targetTemperatureChanged\"\n              >\n              </ha-water_heater-control>\n            </template>\n          </div>\n        </div>\n\n        <template is=\"dom-if\" if=\"[[supportsOperationMode(stateObj)]]\">\n          <div class=\"container-operation_list\">\n            <div class=\"controls\">\n              <ha-paper-dropdown-menu\n                label-float=\"\"\n                dynamic-align=\"\"\n                label=\"[[localize('ui.card.water_heater.operation')]]\"\n              >\n                <paper-listbox\n                  slot=\"dropdown-content\"\n                  selected=\"[[stateObj.attributes.operation_mode]]\"\n                  attr-for-selected=\"item-name\"\n                  on-selected-changed=\"handleOperationmodeChanged\"\n                >\n                  <template\n                    is=\"dom-repeat\"\n                    items=\"[[stateObj.attributes.operation_list]]\"\n                  >\n                    <paper-item item-name$=\"[[item]]\"\n                      >[[_localizeOperationMode(localize, item)]]</paper-item\n                    >\n                  </template>\n                </paper-listbox>\n              </ha-paper-dropdown-menu>\n            </div>\n          </div>\n        </template>\n\n        <template is=\"dom-if\" if=\"[[supportsAwayMode(stateObj)]]\">\n          <div class=\"container-away_mode\">\n            <div class=\"center horizontal layout single-row\">\n              <div class=\"flex\">\n                [[localize('ui.card.water_heater.away_mode')]]\n              </div>\n              <paper-toggle-button\n                checked=\"[[awayToggleChecked]]\"\n                on-change=\"awayToggleChanged\"\n              >\n              </paper-toggle-button>\n            </div>\n          </div>\n        </template>\n      </div>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: {\n        type: Object,\n      },\n\n      stateObj: {\n        type: Object,\n        observer: \"stateObjChanged\",\n      },\n\n      awayToggleChecked: Boolean,\n    };\n  }\n\n  stateObjChanged(newVal, oldVal) {\n    if (newVal) {\n      this.setProperties({\n        awayToggleChecked: newVal.attributes.away_mode === \"on\",\n      });\n    }\n\n    if (oldVal) {\n      this._debouncer = Debouncer.debounce(\n        this._debouncer,\n        timeOut.after(500),\n        () => {\n          this.fire(\"iron-resize\");\n        }\n      );\n    }\n  }\n\n  computeTemperatureStepSize(hass, stateObj) {\n    if (stateObj.attributes.target_temp_step) {\n      return stateObj.attributes.target_temp_step;\n    }\n    if (hass.config.unit_system.temperature.indexOf(\"F\") !== -1) {\n      return 1;\n    }\n    return 0.5;\n  }\n\n  supportsTemperatureControls(stateObj) {\n    return this.supportsTemperature(stateObj);\n  }\n\n  supportsTemperature(stateObj) {\n    return (\n      supportsFeature(stateObj, 1) &&\n      typeof stateObj.attributes.temperature === \"number\"\n    );\n  }\n\n  supportsOperationMode(stateObj) {\n    return supportsFeature(stateObj, 2);\n  }\n\n  supportsAwayMode(stateObj) {\n    return supportsFeature(stateObj, 4);\n  }\n\n  computeClassNames(stateObj) {\n    const _featureClassNames = {\n      1: \"has-target_temperature\",\n      2: \"has-operation_mode\",\n      4: \"has-away_mode\",\n    };\n\n    var classes = [featureClassNames(stateObj, _featureClassNames)];\n\n    classes.push(\"more-info-water_heater\");\n\n    return classes.join(\" \");\n  }\n\n  targetTemperatureChanged(ev) {\n    const temperature = ev.target.value;\n    if (temperature === this.stateObj.attributes.temperature) return;\n    this.callServiceHelper(\"set_temperature\", { temperature: temperature });\n  }\n\n  awayToggleChanged(ev) {\n    const oldVal = this.stateObj.attributes.away_mode === \"on\";\n    const newVal = ev.target.checked;\n    if (oldVal === newVal) return;\n    this.callServiceHelper(\"set_away_mode\", { away_mode: newVal });\n  }\n\n  handleOperationmodeChanged(ev) {\n    const oldVal = this.stateObj.attributes.operation_mode;\n    const newVal = ev.detail.value;\n    if (!newVal || oldVal === newVal) return;\n    this.callServiceHelper(\"set_operation_mode\", {\n      operation_mode: newVal,\n    });\n  }\n\n  callServiceHelper(service, data) {\n    // We call stateChanged after a successful call to re-sync the inputs\n    // with the state. It will be out of sync if our service call did not\n    // result in the entity to be turned on. Since the state is not changing,\n    // the resync is not called automatic.\n    /* eslint-disable no-param-reassign */\n    data.entity_id = this.stateObj.entity_id;\n    /* eslint-enable no-param-reassign */\n    this.hass.callService(\"water_heater\", service, data).then(() => {\n      this.stateObjChanged(this.stateObj);\n    });\n  }\n\n  _localizeOperationMode(localize, mode) {\n    return localize(`state.water_heater.${mode}`) || mode;\n  }\n}\n\ncustomElements.define(\"more-info-water_heater\", MoreInfoWaterHeater);\n","import \"@polymer/iron-icon/iron-icon\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport LocalizeMixin from \"../../../mixins/localize-mixin\";\n\n/*\n * @appliesMixin LocalizeMixin\n */\nclass MoreInfoWeather extends LocalizeMixin(PolymerElement) {\n  static get template() {\n    return html`\n      <style>\n        iron-icon {\n          color: var(--paper-item-icon-color);\n        }\n        .section {\n          margin: 16px 0 8px 0;\n          font-size: 1.2em;\n        }\n\n        .flex {\n          display: flex;\n          height: 32px;\n          align-items: center;\n        }\n\n        .main {\n          flex: 1;\n          margin-left: 24px;\n        }\n\n        .temp,\n        .templow {\n          min-width: 48px;\n          text-align: right;\n        }\n\n        .templow {\n          margin: 0 16px;\n          color: var(--secondary-text-color);\n        }\n\n        .attribution {\n          color: var(--secondary-text-color);\n          text-align: center;\n        }\n      </style>\n\n      <div class=\"flex\">\n        <iron-icon icon=\"hass:thermometer\"></iron-icon>\n        <div class=\"main\">\n          [[localize('ui.card.weather.attributes.temperature')]]\n        </div>\n        <div>\n          [[stateObj.attributes.temperature]] [[getUnit('temperature')]]\n        </div>\n      </div>\n      <template is=\"dom-if\" if=\"[[_showValue(stateObj.attributes.pressure)]]\">\n        <div class=\"flex\">\n          <iron-icon icon=\"hass:gauge\"></iron-icon>\n          <div class=\"main\">\n            [[localize('ui.card.weather.attributes.air_pressure')]]\n          </div>\n          <div>\n            [[stateObj.attributes.pressure]] [[getUnit('air_pressure')]]\n          </div>\n        </div>\n      </template>\n      <template is=\"dom-if\" if=\"[[_showValue(stateObj.attributes.humidity)]]\">\n        <div class=\"flex\">\n          <iron-icon icon=\"hass:water-percent\"></iron-icon>\n          <div class=\"main\">\n            [[localize('ui.card.weather.attributes.humidity')]]\n          </div>\n          <div>[[stateObj.attributes.humidity]] %</div>\n        </div>\n      </template>\n      <template is=\"dom-if\" if=\"[[_showValue(stateObj.attributes.wind_speed)]]\">\n        <div class=\"flex\">\n          <iron-icon icon=\"hass:weather-windy\"></iron-icon>\n          <div class=\"main\">\n            [[localize('ui.card.weather.attributes.wind_speed')]]\n          </div>\n          <div>\n            [[getWind(stateObj.attributes.wind_speed,\n            stateObj.attributes.wind_bearing, localize)]]\n          </div>\n        </div>\n      </template>\n      <template is=\"dom-if\" if=\"[[_showValue(stateObj.attributes.visibility)]]\">\n        <div class=\"flex\">\n          <iron-icon icon=\"hass:eye\"></iron-icon>\n          <div class=\"main\">\n            [[localize('ui.card.weather.attributes.visibility')]]\n          </div>\n          <div>[[stateObj.attributes.visibility]] [[getUnit('length')]]</div>\n        </div>\n      </template>\n\n      <template is=\"dom-if\" if=\"[[stateObj.attributes.forecast]]\">\n        <div class=\"section\">[[localize('ui.card.weather.forecast')]]:</div>\n        <template is=\"dom-repeat\" items=\"[[stateObj.attributes.forecast]]\">\n          <div class=\"flex\">\n            <template is=\"dom-if\" if=\"[[_showValue(item.condition)]]\">\n              <iron-icon icon=\"[[getWeatherIcon(item.condition)]]\"></iron-icon>\n            </template>\n            <template is=\"dom-if\" if=\"[[!_showValue(item.templow)]]\">\n              <div class=\"main\">[[computeDateTime(item.datetime)]]</div>\n            </template>\n            <template is=\"dom-if\" if=\"[[_showValue(item.templow)]]\">\n              <div class=\"main\">[[computeDate(item.datetime)]]</div>\n              <div class=\"templow\">\n                [[item.templow]] [[getUnit('temperature')]]\n              </div>\n            </template>\n            <div class=\"temp\">\n              [[item.temperature]] [[getUnit('temperature')]]\n            </div>\n          </div>\n        </template>\n      </template>\n\n      <template is=\"dom-if\" if=\"stateObj.attributes.attribution\">\n        <div class=\"attribution\">[[stateObj.attributes.attribution]]</div>\n      </template>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      stateObj: Object,\n    };\n  }\n\n  constructor() {\n    super();\n    this.cardinalDirections = [\n      \"N\",\n      \"NNE\",\n      \"NE\",\n      \"ENE\",\n      \"E\",\n      \"ESE\",\n      \"SE\",\n      \"SSE\",\n      \"S\",\n      \"SSW\",\n      \"SW\",\n      \"WSW\",\n      \"W\",\n      \"WNW\",\n      \"NW\",\n      \"NNW\",\n      \"N\",\n    ];\n    this.weatherIcons = {\n      \"clear-night\": \"hass:weather-night\",\n      cloudy: \"hass:weather-cloudy\",\n      fog: \"hass:weather-fog\",\n      hail: \"hass:weather-hail\",\n      lightning: \"hass:weather-lightning\",\n      \"lightning-rainy\": \"hass:weather-lightning-rainy\",\n      partlycloudy: \"hass:weather-partlycloudy\",\n      pouring: \"hass:weather-pouring\",\n      rainy: \"hass:weather-rainy\",\n      snowy: \"hass:weather-snowy\",\n      \"snowy-rainy\": \"hass:weather-snowy-rainy\",\n      sunny: \"hass:weather-sunny\",\n      windy: \"hass:weather-windy\",\n      \"windy-variant\": \"hass:weather-windy-variant\",\n    };\n  }\n\n  computeDate(data) {\n    const date = new Date(data);\n    return date.toLocaleDateString(this.hass.language, {\n      weekday: \"long\",\n      month: \"short\",\n      day: \"numeric\",\n    });\n  }\n\n  computeDateTime(data) {\n    const date = new Date(data);\n    return date.toLocaleDateString(this.hass.language, {\n      weekday: \"long\",\n      hour: \"numeric\",\n    });\n  }\n\n  getUnit(measure) {\n    const lengthUnit = this.hass.config.unit_system.length || \"\";\n    switch (measure) {\n      case \"air_pressure\":\n        return lengthUnit === \"km\" ? \"hPa\" : \"inHg\";\n      case \"length\":\n        return lengthUnit;\n      case \"precipitation\":\n        return lengthUnit === \"km\" ? \"mm\" : \"in\";\n      default:\n        return this.hass.config.unit_system[measure] || \"\";\n    }\n  }\n\n  windBearingToText(degree) {\n    const degreenum = parseInt(degree);\n    if (isFinite(degreenum)) {\n      return this.cardinalDirections[(((degreenum + 11.25) / 22.5) | 0) % 16];\n    }\n    return degree;\n  }\n\n  getWind(speed, bearing, localize) {\n    if (bearing != null) {\n      const cardinalDirection = this.windBearingToText(bearing);\n      return `${speed} ${this.getUnit(\"length\")}/h (${localize(\n        `ui.card.weather.cardinal_direction.${cardinalDirection.toLowerCase()}`\n      ) || cardinalDirection})`;\n    }\n    return `${speed} ${this.getUnit(\"length\")}/h`;\n  }\n\n  getWeatherIcon(condition) {\n    return this.weatherIcons[condition];\n  }\n\n  _showValue(item) {\n    return typeof item !== \"undefined\" && item !== null;\n  }\n}\n\ncustomElements.define(\"more-info-weather\", MoreInfoWeather);\n","import \"@polymer/app-layout/app-toolbar/app-toolbar\";\nimport \"@polymer/paper-dialog-scrollable/paper-dialog-scrollable\";\nimport \"@polymer/paper-icon-button/paper-icon-button\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport \"../../components/state-history-charts\";\nimport \"../../data/ha-state-history-data\";\nimport \"../../resources/ha-style\";\nimport \"../../state-summary/state-card-content\";\n\nimport \"./controls/more-info-content\";\n\nimport computeStateName from \"../../common/entity/compute_state_name\";\nimport computeStateDomain from \"../../common/entity/compute_state_domain\";\nimport isComponentLoaded from \"../../common/config/is_component_loaded\";\nimport { DOMAINS_MORE_INFO_NO_HISTORY } from \"../../common/const\";\nimport { EventsMixin } from \"../../mixins/events-mixin\";\nimport { computeRTL } from \"../../common/util/compute_rtl\";\n\nconst DOMAINS_NO_INFO = [\"camera\", \"configurator\", \"history_graph\"];\n/*\n * @appliesMixin EventsMixin\n */\nclass MoreInfoControls extends EventsMixin(PolymerElement) {\n  static get template() {\n    return html`\n      <style include=\"ha-style-dialog\">\n        app-toolbar {\n          color: var(--more-info-header-color);\n          background-color: var(--more-info-header-background);\n        }\n\n        app-toolbar [main-title] {\n          @apply --ha-more-info-app-toolbar-title;\n        }\n\n        state-card-content {\n          display: block;\n          padding: 16px;\n        }\n\n        state-history-charts {\n          max-width: 100%;\n          margin-bottom: 16px;\n        }\n\n        @media all and (min-width: 451px) and (min-height: 501px) {\n          .main-title {\n            pointer-events: auto;\n            cursor: default;\n          }\n        }\n\n        paper-dialog-scrollable {\n          padding-bottom: 16px;\n        }\n\n        :host([domain=\"camera\"]) paper-dialog-scrollable {\n          margin: 0 -24px -21px;\n        }\n\n        :host([rtl]) app-toolbar {\n          direction: rtl;\n          text-align: right;\n        }\n      </style>\n\n      <app-toolbar>\n        <paper-icon-button\n          icon=\"hass:close\"\n          dialog-dismiss=\"\"\n        ></paper-icon-button>\n        <div class=\"main-title\" main-title=\"\" on-click=\"enlarge\">\n          [[_computeStateName(stateObj)]]\n        </div>\n        <template is=\"dom-if\" if=\"[[canConfigure]]\">\n          <paper-icon-button\n            icon=\"hass:settings\"\n            on-click=\"_gotoSettings\"\n          ></paper-icon-button>\n        </template>\n      </app-toolbar>\n\n      <template is=\"dom-if\" if=\"[[_computeShowStateInfo(stateObj)]]\" restamp=\"\">\n        <state-card-content\n          state-obj=\"[[stateObj]]\"\n          hass=\"[[hass]]\"\n          in-dialog=\"\"\n        ></state-card-content>\n      </template>\n      <paper-dialog-scrollable dialog-element=\"[[dialogElement]]\">\n        <template\n          is=\"dom-if\"\n          if=\"[[_computeShowHistoryComponent(hass, stateObj)]]\"\n          restamp=\"\"\n        >\n          <ha-state-history-data\n            hass=\"[[hass]]\"\n            filter-type=\"recent-entity\"\n            entity-id=\"[[stateObj.entity_id]]\"\n            data=\"{{_stateHistory}}\"\n            is-loading=\"{{_stateHistoryLoading}}\"\n            cache-config=\"[[_cacheConfig]]\"\n          ></ha-state-history-data>\n          <state-history-charts\n            hass=\"[[hass]]\"\n            history-data=\"[[_stateHistory]]\"\n            is-loading-data=\"[[_stateHistoryLoading]]\"\n            up-to-now\n          ></state-history-charts>\n        </template>\n        <more-info-content\n          state-obj=\"[[stateObj]]\"\n          hass=\"[[hass]]\"\n        ></more-info-content>\n      </paper-dialog-scrollable>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n\n      stateObj: {\n        type: Object,\n        observer: \"_stateObjChanged\",\n      },\n\n      dialogElement: Object,\n      canConfigure: Boolean,\n\n      domain: {\n        type: String,\n        reflectToAttribute: true,\n        computed: \"_computeDomain(stateObj)\",\n      },\n\n      _stateHistory: Object,\n      _stateHistoryLoading: Boolean,\n\n      large: {\n        type: Boolean,\n        value: false,\n        notify: true,\n      },\n\n      _cacheConfig: {\n        type: Object,\n        value: {\n          refresh: 60,\n          cacheKey: null,\n          hoursToShow: 24,\n        },\n      },\n      rtl: {\n        type: Boolean,\n        reflectToAttribute: true,\n        computed: \"_computeRTL(hass)\",\n      },\n    };\n  }\n\n  enlarge() {\n    this.large = !this.large;\n  }\n\n  _computeShowStateInfo(stateObj) {\n    return !stateObj || !DOMAINS_NO_INFO.includes(computeStateDomain(stateObj));\n  }\n\n  _computeShowHistoryComponent(hass, stateObj) {\n    return (\n      hass &&\n      stateObj &&\n      isComponentLoaded(hass, \"history\") &&\n      !DOMAINS_MORE_INFO_NO_HISTORY.includes(computeStateDomain(stateObj))\n    );\n  }\n\n  _computeDomain(stateObj) {\n    return stateObj ? computeStateDomain(stateObj) : \"\";\n  }\n\n  _computeStateName(stateObj) {\n    return stateObj ? computeStateName(stateObj) : \"\";\n  }\n\n  _stateObjChanged(newVal) {\n    if (!newVal) {\n      return;\n    }\n\n    if (this._cacheConfig.cacheKey !== `more_info.${newVal.entity_id}`) {\n      this._cacheConfig = Object.assign({}, this._cacheConfig, {\n        cacheKey: `more_info.${newVal.entity_id}`,\n      });\n    }\n  }\n\n  _gotoSettings() {\n    this.fire(\"more-info-page\", { page: \"settings\" });\n  }\n\n  _computeRTL(hass) {\n    return computeRTL(hass);\n  }\n}\ncustomElements.define(\"more-info-controls\", MoreInfoControls);\n","import \"@polymer/app-layout/app-toolbar/app-toolbar\";\nimport \"@material/mwc-button\";\nimport \"@polymer/paper-icon-button/paper-icon-button\";\nimport \"@polymer/paper-input/paper-input\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport { EventsMixin } from \"../../mixins/events-mixin\";\nimport LocalizeMixin from \"../../mixins/localize-mixin\";\n\nimport computeStateName from \"../../common/entity/compute_state_name\";\nimport computeDomain from \"../../common/entity/compute_domain\";\nimport { updateEntityRegistryEntry } from \"../../data/entity_registry\";\n\nimport \"../../components/ha-paper-icon-button-arrow-prev\";\n/*\n * @appliesMixin EventsMixin\n * @appliesMixin LocalizeMixin\n */\nclass MoreInfoSettings extends LocalizeMixin(EventsMixin(PolymerElement)) {\n  static get template() {\n    return html`\n      <style>\n        app-toolbar {\n          color: var(--more-info-header-color);\n          background-color: var(--more-info-header-background);\n\n          /* to fit save button */\n          padding-right: 0;\n        }\n\n        app-toolbar [main-title] {\n          @apply --ha-more-info-app-toolbar-title;\n        }\n\n        app-toolbar mwc-button {\n          font-size: 0.8em;\n          margin: 0;\n        }\n\n        .form {\n          padding: 0 24px 24px;\n        }\n      </style>\n\n      <app-toolbar>\n        <ha-paper-icon-button-arrow-prev\n          on-click=\"_backTapped\"\n        ></ha-paper-icon-button-arrow-prev>\n        <div main-title=\"\">[[_computeStateName(stateObj)]]</div>\n        <mwc-button on-click=\"_save\" disabled=\"[[_computeInvalid(_entityId)]]\"\n          >[[localize('ui.dialogs.more_info_settings.save')]]</mwc-button\n        >\n      </app-toolbar>\n\n      <div class=\"form\">\n        <paper-input\n          value=\"{{_name}}\"\n          label=\"[[localize('ui.dialogs.more_info_settings.name')]]\"\n        ></paper-input>\n        <paper-input\n          value=\"{{_entityId}}\"\n          label=\"[[localize('ui.dialogs.more_info_settings.entity_id')]]\"\n          error-message=\"Domain needs to stay the same\"\n          invalid=\"[[_computeInvalid(_entityId)]]\"\n        ></paper-input>\n      </div>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      stateObj: Object,\n\n      registryInfo: {\n        type: Object,\n        observer: \"_registryInfoChanged\",\n        notify: true,\n      },\n\n      _name: String,\n      _entityId: String,\n    };\n  }\n\n  _computeStateName(stateObj) {\n    if (!stateObj) return \"\";\n    return computeStateName(stateObj);\n  }\n\n  _computeInvalid(entityId) {\n    return computeDomain(this.stateObj.entity_id) !== computeDomain(entityId);\n  }\n\n  _registryInfoChanged(newVal) {\n    if (newVal) {\n      this.setProperties({\n        _name: newVal.name,\n        _entityId: newVal.entity_id,\n      });\n    } else {\n      this.setProperties({\n        _name: \"\",\n        _entityId: \"\",\n      });\n    }\n  }\n\n  _backTapped() {\n    this.fire(\"more-info-page\", { page: null });\n  }\n\n  async _save() {\n    try {\n      const info = await updateEntityRegistryEntry(\n        this.hass,\n        this.stateObj.entity_id,\n        {\n          name: this._name,\n          new_entity_id: this._entityId,\n        }\n      );\n\n      this.registryInfo = info;\n\n      // Keep the more info dialog open at the new entity.\n      if (this.stateObj.entity_id !== this._entityId) {\n        this.fire(\"hass-more-info\", { entityId: this._entityId });\n      }\n    } catch (err) {\n      alert(`save failed: ${err.message}`);\n    }\n  }\n}\ncustomElements.define(\"more-info-settings\", MoreInfoSettings);\n","import { dedupingMixin } from \"@polymer/polymer/lib/utils/mixin\";\nimport { PaperDialogBehavior } from \"@polymer/paper-dialog-behavior/paper-dialog-behavior\";\nimport { mixinBehaviors } from \"@polymer/polymer/lib/legacy/class\";\nimport { EventsMixin } from \"./events-mixin\";\n/**\n * @polymerMixin\n * @appliesMixin EventsMixin\n * @appliesMixin PaperDialogBehavior\n */\nexport default dedupingMixin(\n  (superClass) =>\n    class extends mixinBehaviors(\n      [EventsMixin, PaperDialogBehavior],\n      superClass\n    ) {\n      static get properties() {\n        return {\n          withBackdrop: {\n            type: Boolean,\n            value: true,\n          },\n        };\n      }\n    }\n);\n","import { dedupingMixin } from \"@polymer/polymer/lib/utils/mixin\";\n/**\n * Polymer Mixin to enable a localize function powered by language/resources from hass object.\n *\n * @polymerMixin\n */\nexport default dedupingMixin(\n  (superClass) =>\n    class extends superClass {\n      static get properties() {\n        return {\n          hass: Object,\n\n          /**\n           * Translates a string to the current `language`. Any parameters to the\n           * string should be passed in order, as follows:\n           * `localize(stringKey, param1Name, param1Value, param2Name, param2Value)`\n           */\n          localize: {\n            type: Function,\n            computed: \"__computeLocalize(hass.localize)\",\n          },\n        };\n      }\n\n      __computeLocalize(localize) {\n        return localize;\n      }\n    }\n);\n","const hassAttributeUtil = {};\n\nhassAttributeUtil.DOMAIN_DEVICE_CLASS = {\n  binary_sensor: [\n    \"battery\",\n    \"cold\",\n    \"connectivity\",\n    \"door\",\n    \"garage_door\",\n    \"gas\",\n    \"heat\",\n    \"light\",\n    \"lock\",\n    \"moisture\",\n    \"motion\",\n    \"moving\",\n    \"occupancy\",\n    \"opening\",\n    \"plug\",\n    \"power\",\n    \"presence\",\n    \"problem\",\n    \"safety\",\n    \"smoke\",\n    \"sound\",\n    \"vibration\",\n    \"window\",\n  ],\n  cover: [\n    \"awning\",\n    \"blind\",\n    \"curtain\",\n    \"damper\",\n    \"door\",\n    \"garage\",\n    \"shade\",\n    \"shutter\",\n    \"window\",\n  ],\n  sensor: [\n    \"battery\",\n    \"humidity\",\n    \"illuminance\",\n    \"temperature\",\n    \"pressure\",\n    \"power\",\n    \"signal_strength\",\n  ],\n  switch: [\"switch\", \"outlet\"],\n};\n\nhassAttributeUtil.UNKNOWN_TYPE = \"json\";\nhassAttributeUtil.ADD_TYPE = \"key-value\";\n\nhassAttributeUtil.TYPE_TO_TAG = {\n  string: \"ha-customize-string\",\n  json: \"ha-customize-string\",\n  icon: \"ha-customize-icon\",\n  boolean: \"ha-customize-boolean\",\n  array: \"ha-customize-array\",\n  \"key-value\": \"ha-customize-key-value\",\n};\n\n// Attributes here serve dual purpose:\n// 1) Any key of this object won't be shown in more-info window.\n// 2) Any key which has value other than undefined will appear in customization\n//    config according to its value.\nhassAttributeUtil.LOGIC_STATE_ATTRIBUTES = hassAttributeUtil.LOGIC_STATE_ATTRIBUTES || {\n  entity_picture: undefined,\n  friendly_name: { type: \"string\", description: \"Name\" },\n  icon: { type: \"icon\" },\n  emulated_hue: {\n    type: \"boolean\",\n    domains: [\"emulated_hue\"],\n  },\n  emulated_hue_name: {\n    type: \"string\",\n    domains: [\"emulated_hue\"],\n  },\n  haaska_hidden: undefined,\n  haaska_name: undefined,\n  homebridge_hidden: { type: \"boolean\" },\n  homebridge_name: { type: \"string\" },\n  supported_features: undefined,\n  attribution: undefined,\n  custom_ui_more_info: { type: \"string\" },\n  custom_ui_state_card: { type: \"string\" },\n  device_class: {\n    type: \"array\",\n    options: hassAttributeUtil.DOMAIN_DEVICE_CLASS,\n    description: \"Device class\",\n    domains: [\"binary_sensor\", \"cover\", \"sensor\", \"switch\"],\n  },\n  hidden: { type: \"boolean\", description: \"Hide from UI\" },\n  assumed_state: {\n    type: \"boolean\",\n    domains: [\n      \"switch\",\n      \"light\",\n      \"cover\",\n      \"climate\",\n      \"fan\",\n      \"group\",\n      \"water_heater\",\n    ],\n  },\n  initial_state: {\n    type: \"string\",\n    domains: [\"automation\"],\n  },\n  unit_of_measurement: { type: \"string\" },\n};\n\nexport default hassAttributeUtil;\n"],"sourceRoot":""}