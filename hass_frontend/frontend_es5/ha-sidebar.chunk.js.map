{"version":3,"sources":["webpack:///./src/common/config/is_component_loaded.ts","webpack:///./src/components/ha-icon.ts","webpack:///./src/components/ha-sidebar.ts","webpack:///./src/components/user/ha-user-badge.ts","webpack:///./src/external_app/external_config.ts"],"names":["isComponentLoaded","hass","component","config","components","indexOf","ironIconClass","customElements","get","loaded","HaIcon","node","eventName","methodName","_iconsetName","define","computeUrl","urlPath","computePanels","panels","sortValue","map","logbook","history","result","Object","values","filter","panel","title","sort","a","b","aBuiltIn","component_name","bBuiltIn","HaSidebar","property","localStorage","defaultPage","DEFAULT_PANEL","html","user","panelUrl","_defaultPage","localize","url_path","icon","_externalConfig","hasSettingsScreen","_handleExternalAppConfiguration","_handleLogOut","is_admin","changedProps","has","oldHass","auth","external","getExternalConfig","then","conf","fireEvent","ev","preventDefault","fireMessage","type","css","LitElement","computeInitials","name","trim","split","slice","s","substr","join","StateBadge","customElement","initials","classMap","length","bus","cache","cfg","sendMessage"],"mappings":";;;;;;;;;;AAEA;AAAA;AAAA;AACe,SAASA,iBAAT,CACbC,IADa,EAEbC,SAFa,EAGJ;AACT,SAAOD,IAAI,IAAIA,IAAI,CAACE,MAAL,CAAYC,UAAZ,CAAuBC,OAAvB,CAA+BH,SAA/B,MAA8C,CAAC,CAA9D;AACD,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;CCND;AACA;;AAGA,IAAMI,aAAa,GAAGC,cAAc,CAACC,GAAf,CAAmB,WAAnB,CAAtB;AAIA,IAAIC,MAAM,GAAG,KAAb;AAEO,IAAMC,MAAb;AAAA;AAAA;AAAA;;AAAA;AAAA;;AAAA;;AAAA;;AAAA;AAAA;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AAAA;AAAA;AAAA,2BAIIC,IAJJ,EAKIC,SALJ,EAMIC,UANJ,EAOU;AACN,yEAAaF,IAAb,EAAmBC,SAAnB,EAA8BC,UAA9B;;AAEA,UAAI,CAACJ,MAAD,IAAW,KAAKK,YAAL,KAAsB,KAArC,EAA4C;AAC1CL,cAAM,GAAG,IAAT;AACA;AACD;AACF;AAdH;;AAAA;AAAA,EAA4BH,aAA5B;AAuBAC,cAAc,CAACQ,MAAf,CAAsB,SAAtB,EAAiCL,MAAjC,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACnCA;AAQA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;;AAKA,IAAMM,UAAU,GAAG,SAAbA,UAAa,CAACC,OAAD;AAAA,oBAAiBA,OAAjB;AAAA,CAAnB;;AAEA,IAAMC,aAAa,GAAG,SAAhBA,aAAgB,CAACjB,IAAD,EAAyB;AAC7C,MAAMkB,MAAM,GAAGlB,IAAI,CAACkB,MAApB;;AACA,MAAI,CAACA,MAAL,EAAa;AACX,WAAO,EAAP;AACD;;AAED,MAAMC,SAAS,GAAG;AAChBC,OAAG,EAAE,CADW;AAEhBC,WAAO,EAAE,CAFO;AAGhBC,WAAO,EAAE;AAHO,GAAlB;AAKA,MAAMC,MAAmB,GAAGC,MAAM,CAACC,MAAP,CAAcP,MAAd,EAAsBQ,MAAtB,CAC1B,UAACC,KAAD;AAAA,WAAWA,KAAK,CAACC,KAAjB;AAAA,GAD0B,CAA5B;AAIAL,QAAM,CAACM,IAAP,CAAY,UAACC,CAAD,EAAIC,CAAJ,EAAU;AACpB,QAAMC,QAAQ,GAAGF,CAAC,CAACG,cAAF,IAAoBd,SAArC;AACA,QAAMe,QAAQ,GAAGH,CAAC,CAACE,cAAF,IAAoBd,SAArC;;AAEA,QAAIa,QAAQ,IAAIE,QAAhB,EAA0B;AACxB,aAAOf,SAAS,CAACW,CAAC,CAACG,cAAH,CAAT,GAA8Bd,SAAS,CAACY,CAAC,CAACE,cAAH,CAA9C;AACD;;AACD,QAAID,QAAJ,EAAc;AACZ,aAAO,CAAC,CAAR;AACD;;AACD,QAAIE,QAAJ,EAAc;AACZ,aAAO,CAAP;AACD,KAZmB,CAapB;;;AACA,QAAIJ,CAAC,CAACF,KAAF,GAAWG,CAAC,CAACH,KAAjB,EAAyB;AACvB,aAAO,CAAC,CAAR;AACD;;AACD,QAAIE,CAAC,CAACF,KAAF,GAAWG,CAAC,CAACH,KAAjB,EAAyB;AACvB,aAAO,CAAP;AACD;;AACD,WAAO,CAAP;AACD,GArBD;AAuBA,SAAOL,MAAP;AACD,CAvCD;AAyCA;;;;;IAGMY,S;MAAAA,S;;;;;;;;;;;;;;;;;;;;;;;;;;;OAAAA,S;;;mBACHC,4DAAQ,E;;;;;mBACRA,4DAAQ,E;;;eACPC,YAAY,CAACC,WAAb,IAA4BC,4D;;;;mBAC7BH,4DAAQ,E;;;;;;aAET,kBAAmB;AACjB,YAAMpC,IAAI,GAAG,KAAKA,IAAlB;;AAEA,YAAI,CAACA,IAAL,EAAW;AACT,iBAAOwC,wDAAP;AACD;;AAED,eAAOA,wDAAP,qBAGMxC,IAAI,CAACyC,IAAL,GACED,wDADF,qBAG6BxC,IAAI,CAACyC,IAHlC,IAME,EATR,EAY4DzC,IAAI,CAAC0C,QAZjE,EAcc3B,UAAU,CAAC,KAAK4B,YAAN,CAdxB,EAemB,KAAKA,YAfxB,EAoBkC3C,IAAI,CAAC4C,QAAL,CAAc,cAAd,CApBlC,EAwBM3B,aAAa,CAACjB,IAAD,CAAb,CAAoBoB,GAApB,CACA,UAACO,KAAD;AAAA,iBAAWa,wDAAX,qBAEYzB,UAAU,CAACY,KAAK,CAACkB,QAAP,CAFtB,EAGkBlB,KAAK,CAACkB,QAHxB,EAOyClB,KAAK,CAACmB,IAP/C,EASW9C,IAAI,CAAC4C,QAAL,iBAAuBjB,KAAK,CAACC,KAA7B,MAAyCD,KAAK,CAACC,KAT1D;AAAA,SADA,CAxBN,EAwCM,KAAKmB,eAAL,IAAwB,KAAKA,eAAL,CAAqBC,iBAA7C,GACER,wDADF,qBAKe,KAAKS,+BALpB,EAaajD,IAAI,CAAC4C,QAAL,CACD,uCADC,CAbb,IAoBE,EA5DR,EA6DM,CAAC5C,IAAI,CAACyC,IAAN,GACED,wDADF,qBAE8B,KAAKU,aAFnC,EAKWlD,IAAI,CAAC4C,QAAL,CAAc,oBAAd,CALX,IASEJ,wDATF,oBA7DN,EAyEIxC,IAAI,CAACyC,IAAL,IAAazC,IAAI,CAACyC,IAAL,CAAUU,QAAvB,GACEX,wDADF,qBAMUxC,IAAI,CAAC4C,QAAL,CAAc,4BAAd,CANV,EAamB5C,IAAI,CAAC4C,QAAL,CAAc,oBAAd,CAbnB,EAcqB5C,IAAI,CAAC4C,QAAL,CAAc,oBAAd,CAdrB,EAoBmB5C,IAAI,CAAC4C,QAAL,CAAc,kBAAd,CApBnB,EAqBqB5C,IAAI,CAAC4C,QAAL,CAAc,kBAAd,CArBrB,EA2BmB5C,IAAI,CAAC4C,QAAL,CAAc,kBAAd,CA3BnB,EA4BqB5C,IAAI,CAAC4C,QAAL,CAAc,kBAAd,CA5BrB,EAkCmB5C,IAAI,CAAC4C,QAAL,CAAc,qBAAd,CAlCnB,EAmCqB5C,IAAI,CAAC4C,QAAL,CAAc,qBAAd,CAnCrB,EAsCU7C,kFAAiB,CAACC,IAAD,EAAO,MAAP,CAAjB,GACEwC,wDADF,qBAKexC,IAAI,CAAC4C,QAAL,CAAc,gBAAd,CALf,EAMiB5C,IAAI,CAAC4C,QAAL,CAAc,gBAAd,CANjB,IAUEJ,wDAVF,qBAtCV,EAoDmBxC,IAAI,CAAC4C,QAAL,CAAc,gBAAd,CApDnB,EAqDqB5C,IAAI,CAAC4C,QAAL,CAAc,gBAAd,CArDrB,IA2DE,EApIN;AAsID;;;;aAED,sBAAuBQ,YAAvB,EAA8D;AAC5D,YAAIA,YAAY,CAACC,GAAb,CAAiB,iBAAjB,CAAJ,EAAyC;AACvC,iBAAO,IAAP;AACD;;AACD,YAAI,CAAC,KAAKrD,IAAN,IAAc,CAACoD,YAAY,CAACC,GAAb,CAAiB,MAAjB,CAAnB,EAA6C;AAC3C,iBAAO,KAAP;AACD;;AACD,YAAMC,OAAO,GAAGF,YAAY,CAAC7C,GAAb,CAAiB,MAAjB,CAAhB;;AACA,YAAI,CAAC+C,OAAL,EAAc;AACZ,iBAAO,IAAP;AACD;;AACD,YAAMtD,IAAI,GAAG,KAAKA,IAAlB;AACA,eACEA,IAAI,CAACkB,MAAL,KAAgBoC,OAAO,CAACpC,MAAxB,IACAlB,IAAI,CAAC0C,QAAL,KAAkBY,OAAO,CAACZ,QAD1B,IAEA1C,IAAI,CAACE,MAAL,CAAYC,UAAZ,KAA2BmD,OAAO,CAACpD,MAAR,CAAeC,UAF1C,IAGAH,IAAI,CAACyC,IAAL,KAAca,OAAO,CAACb,IAHtB,IAIAzC,IAAI,CAAC4C,QAAL,KAAkBU,OAAO,CAACV,QAL5B;AAOD;;;;aAED,sBAAuBQ,YAAvB,EAAqD;AAAA;;AACnD,6BA3KEjB,SA2KF,8CAAmBiB,YAAnB;;AACA,YAAI,KAAKpD,IAAL,IAAa,KAAKA,IAAL,CAAUuD,IAAV,CAAeC,QAAhC,EAA0C;AACxCC,kGAAiB,CAAC,KAAKzD,IAAL,CAAUuD,IAAV,CAAeC,QAAhB,CAAjB,CAA2CE,IAA3C,CAAgD,UAACC,IAAD,EAAU;AACxD,kBAAI,CAACZ,eAAL,GAAuBY,IAAvB;AACD,WAFD;AAGD;AACF;;;;aAED,yBAAwB;AACtBC,gFAAS,CAAC,IAAD,EAAO,aAAP,CAAT;AACD;;;;aAED,yCAAwCC,EAAxC,EAAmD;AACjDA,UAAE,CAACC,cAAH;AACA,aAAK9D,IAAL,CAAWuD,IAAX,CAAgBC,QAAhB,CAA0BO,WAA1B,CAAsC;AACpCC,cAAI,EAAE;AAD8B,SAAtC;AAGD;;;;;aAED,kBAA+B;AAC7B,eAAOC,uDAAP;AA6GD;;;GA5SqBC,sD;;AAqTxB5D,cAAc,CAACQ,MAAf,CAAsB,YAAtB,EAAoCqB,SAApC,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC5XA;AASA;;AAIA,IAAMgC,eAAe,GAAG,SAAlBA,eAAkB,CAACC,IAAD,EAAkB;AACxC,MAAI,CAACA,IAAL,EAAW;AACT,WAAO,MAAP;AACD;;AACD,SACEA,IAAI,CACDC,IADH,GAEE;AAFF,GAGGC,KAHH,CAGS,GAHT,EAIGC,KAJH,CAIS,CAJT,EAIY,CAJZ,EAKE;AALF,GAMGnD,GANH,CAMO,UAACoD,CAAD;AAAA,WAAOA,CAAC,CAACC,MAAF,CAAS,CAAT,EAAY,CAAZ,CAAP;AAAA,GANP,EAOGC,IAPH,CAOQ,EAPR,CADF;AAUD,CAdD;;IAiBMC,U,cADLC,iEAAa,CAAC,eAAD,C;MACRD,U;;;;;;;;;;;;;;;;;;;;;;;;;;;OAAAA,U;;;mBACHvC,4DAAQ,E;;;;;;aAET,kBAA0C;AACxC,YAAMK,IAAI,GAAG,KAAKA,IAAlB;AAEA,YAAMoC,QAAQ,GAAGpC,IAAI,GAAG0B,eAAe,CAAC1B,IAAI,CAAC2B,IAAN,CAAlB,GAAgC,GAArD;AAEA,eAAO5B,wDAAP,oBAEasC,8EAAQ,CAAC;AAChB,2BAAiB,IADD;AAEhB,kBAAMD,QAAQ,CAACE,MAAT,GAAkB;AAFR,SAAD,CAFrB,EAOMF,QAPN;AAUD;;;;;aAED,kBAA+B;AAC7B,eAAOZ,uDAAP;AAkBD;;;GAvCsBC,sD;;;;;;;;;;;;ACxBzB;AAAA;AAAO,IAAMT,iBAAiB,GAAG,SAApBA,iBAAoB,CAC/BuB,GAD+B,EAEH;AAC5B,MAAI,CAACA,GAAG,CAACC,KAAJ,CAAUC,GAAf,EAAoB;AAClBF,OAAG,CAACC,KAAJ,CAAUC,GAAV,GAAgBF,GAAG,CAACG,WAAJ,CAAgC;AAC9CnB,UAAI,EAAE;AADwC,KAAhC,CAAhB;AAGD;;AACD,SAAOgB,GAAG,CAACC,KAAJ,CAAUC,GAAjB;AACD,CATM,C","file":"ha-sidebar.chunk.js","sourcesContent":["import { HomeAssistant } from \"../../types\";\n\n/** Return if a component is loaded. */\nexport default function isComponentLoaded(\n  hass: HomeAssistant,\n  component: string\n): boolean {\n  return hass && hass.config.components.indexOf(component) !== -1;\n}\n","import { Constructor } from \"lit-element\";\nimport \"@polymer/iron-icon/iron-icon\";\n// Not duplicate, this is for typing.\n// tslint:disable-next-line\nimport { IronIconElement } from \"@polymer/iron-icon/iron-icon\";\n\nconst ironIconClass = customElements.get(\"iron-icon\") as Constructor<\n  IronIconElement\n>;\n\nlet loaded = false;\n\nexport class HaIcon extends ironIconClass {\n  private _iconsetName?: string;\n\n  public listen(\n    node: EventTarget | null,\n    eventName: string,\n    methodName: string\n  ): void {\n    super.listen(node, eventName, methodName);\n\n    if (!loaded && this._iconsetName === \"mdi\") {\n      loaded = true;\n      import(/* webpackChunkName: \"mdi-icons\" */ \"../resources/mdi-icons\");\n    }\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-icon\": HaIcon;\n  }\n}\n\ncustomElements.define(\"ha-icon\", HaIcon);\n","import {\n  LitElement,\n  html,\n  CSSResult,\n  css,\n  PropertyValues,\n  property,\n} from \"lit-element\";\nimport \"@polymer/app-layout/app-toolbar/app-toolbar\";\nimport \"@polymer/paper-icon-button/paper-icon-button\";\nimport \"@polymer/paper-item/paper-icon-item\";\nimport \"@polymer/paper-item/paper-item\";\nimport \"@polymer/paper-listbox/paper-listbox\";\nimport \"./ha-icon\";\n\nimport \"../components/user/ha-user-badge\";\nimport isComponentLoaded from \"../common/config/is_component_loaded\";\nimport { HomeAssistant, PanelInfo } from \"../types\";\nimport { fireEvent } from \"../common/dom/fire_event\";\nimport { DEFAULT_PANEL } from \"../common/const\";\nimport {\n  getExternalConfig,\n  ExternalConfig,\n} from \"../external_app/external_config\";\n\nconst computeUrl = (urlPath) => `/${urlPath}`;\n\nconst computePanels = (hass: HomeAssistant) => {\n  const panels = hass.panels;\n  if (!panels) {\n    return [];\n  }\n\n  const sortValue = {\n    map: 1,\n    logbook: 2,\n    history: 3,\n  };\n  const result: PanelInfo[] = Object.values(panels).filter(\n    (panel) => panel.title\n  );\n\n  result.sort((a, b) => {\n    const aBuiltIn = a.component_name in sortValue;\n    const bBuiltIn = b.component_name in sortValue;\n\n    if (aBuiltIn && bBuiltIn) {\n      return sortValue[a.component_name] - sortValue[b.component_name];\n    }\n    if (aBuiltIn) {\n      return -1;\n    }\n    if (bBuiltIn) {\n      return 1;\n    }\n    // both not built in, sort by title\n    if (a.title! < b.title!) {\n      return -1;\n    }\n    if (a.title! > b.title!) {\n      return 1;\n    }\n    return 0;\n  });\n\n  return result;\n};\n\n/*\n * @appliesMixin LocalizeMixin\n */\nclass HaSidebar extends LitElement {\n  @property() public hass?: HomeAssistant;\n  @property() public _defaultPage?: string =\n    localStorage.defaultPage || DEFAULT_PANEL;\n  @property() private _externalConfig?: ExternalConfig;\n\n  protected render() {\n    const hass = this.hass;\n\n    if (!hass) {\n      return html``;\n    }\n\n    return html`\n      <app-toolbar>\n        <div main-title>Home Assistant</div>\n        ${hass.user\n          ? html`\n              <a href=\"/profile\">\n                <ha-user-badge .user=${hass.user}></ha-user-badge>\n              </a>\n            `\n          : \"\"}\n      </app-toolbar>\n\n      <paper-listbox attr-for-selected=\"data-panel\" .selected=${hass.panelUrl}>\n        <a\n          href=\"${computeUrl(this._defaultPage)}\"\n          data-panel=${this._defaultPage}\n          tabindex=\"-1\"\n        >\n          <paper-icon-item>\n            <ha-icon slot=\"item-icon\" icon=\"hass:apps\"></ha-icon>\n            <span class=\"item-text\">${hass.localize(\"panel.states\")}</span>\n          </paper-icon-item>\n        </a>\n\n        ${computePanels(hass).map(\n          (panel) => html`\n            <a\n              href=\"${computeUrl(panel.url_path)}\"\n              data-panel=\"${panel.url_path}\"\n              tabindex=\"-1\"\n            >\n              <paper-icon-item>\n                <ha-icon slot=\"item-icon\" .icon=\"${panel.icon}\"></ha-icon>\n                <span class=\"item-text\"\n                  >${hass.localize(`panel.${panel.title}`) || panel.title}</span\n                >\n              </paper-icon-item>\n            </a>\n          `\n        )}\n        ${this._externalConfig && this._externalConfig.hasSettingsScreen\n          ? html`\n              <a\n                href=\"#external-app-configuration\"\n                tabindex=\"-1\"\n                @click=${this._handleExternalAppConfiguration}\n              >\n                <paper-icon-item>\n                  <ha-icon\n                    slot=\"item-icon\"\n                    icon=\"hass:cellphone-settings-variant\"\n                  ></ha-icon>\n                  <span class=\"item-text\"\n                    >${hass.localize(\n                      \"ui.sidebar.external_app_configuration\"\n                    )}</span\n                  >\n                </paper-icon-item>\n              </a>\n            `\n          : \"\"}\n        ${!hass.user\n          ? html`\n              <paper-icon-item @click=${this._handleLogOut} class=\"logout\">\n                <ha-icon slot=\"item-icon\" icon=\"hass:exit-to-app\"></ha-icon>\n                <span class=\"item-text\"\n                  >${hass.localize(\"ui.sidebar.log_out\")}</span\n                >\n              </paper-icon-item>\n            `\n          : html``}\n      </paper-listbox>\n\n      ${hass.user && hass.user.is_admin\n        ? html`\n            <div>\n              <div class=\"divider\"></div>\n\n              <div class=\"subheader\">\n                ${hass.localize(\"ui.sidebar.developer_tools\")}\n              </div>\n\n              <div class=\"dev-tools\">\n                <a href=\"/dev-service\" tabindex=\"-1\">\n                  <paper-icon-button\n                    icon=\"hass:remote\"\n                    alt=\"${hass.localize(\"panel.dev-services\")}\"\n                    title=\"${hass.localize(\"panel.dev-services\")}\"\n                  ></paper-icon-button>\n                </a>\n                <a href=\"/dev-state\" tabindex=\"-1\">\n                  <paper-icon-button\n                    icon=\"hass:code-tags\"\n                    alt=\"${hass.localize(\"panel.dev-states\")}\"\n                    title=\"${hass.localize(\"panel.dev-states\")}\"\n                  ></paper-icon-button>\n                </a>\n                <a href=\"/dev-event\" tabindex=\"-1\">\n                  <paper-icon-button\n                    icon=\"hass:radio-tower\"\n                    alt=\"${hass.localize(\"panel.dev-events\")}\"\n                    title=\"${hass.localize(\"panel.dev-events\")}\"\n                  ></paper-icon-button>\n                </a>\n                <a href=\"/dev-template\" tabindex=\"-1\">\n                  <paper-icon-button\n                    icon=\"hass:file-xml\"\n                    alt=\"${hass.localize(\"panel.dev-templates\")}\"\n                    title=\"${hass.localize(\"panel.dev-templates\")}\"\n                  ></paper-icon-button>\n                </a>\n                ${isComponentLoaded(hass, \"mqtt\")\n                  ? html`\n                      <a href=\"/dev-mqtt\" tabindex=\"-1\">\n                        <paper-icon-button\n                          icon=\"hass:altimeter\"\n                          alt=\"${hass.localize(\"panel.dev-mqtt\")}\"\n                          title=\"${hass.localize(\"panel.dev-mqtt\")}\"\n                        ></paper-icon-button>\n                      </a>\n                    `\n                  : html``}\n                <a href=\"/dev-info\" tabindex=\"-1\">\n                  <paper-icon-button\n                    icon=\"hass:information-outline\"\n                    alt=\"${hass.localize(\"panel.dev-info\")}\"\n                    title=\"${hass.localize(\"panel.dev-info\")}\"\n                  ></paper-icon-button>\n                </a>\n              </div>\n            </div>\n          `\n        : \"\"}\n    `;\n  }\n\n  protected shouldUpdate(changedProps: PropertyValues): boolean {\n    if (changedProps.has(\"_externalConfig\")) {\n      return true;\n    }\n    if (!this.hass || !changedProps.has(\"hass\")) {\n      return false;\n    }\n    const oldHass = changedProps.get(\"hass\") as HomeAssistant;\n    if (!oldHass) {\n      return true;\n    }\n    const hass = this.hass;\n    return (\n      hass.panels !== oldHass.panels ||\n      hass.panelUrl !== oldHass.panelUrl ||\n      hass.config.components !== oldHass.config.components ||\n      hass.user !== oldHass.user ||\n      hass.localize !== oldHass.localize\n    );\n  }\n\n  protected firstUpdated(changedProps: PropertyValues) {\n    super.firstUpdated(changedProps);\n    if (this.hass && this.hass.auth.external) {\n      getExternalConfig(this.hass.auth.external).then((conf) => {\n        this._externalConfig = conf;\n      });\n    }\n  }\n\n  private _handleLogOut() {\n    fireEvent(this, \"hass-logout\");\n  }\n\n  private _handleExternalAppConfiguration(ev: Event) {\n    ev.preventDefault();\n    this.hass!.auth.external!.fireMessage({\n      type: \"config_screen/show\",\n    });\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      :host {\n        height: 100%;\n        display: block;\n        overflow: auto;\n        -ms-user-select: none;\n        -webkit-user-select: none;\n        -moz-user-select: none;\n        border-right: 1px solid var(--divider-color);\n        background-color: var(\n          --sidebar-background-color,\n          var(--primary-background-color)\n        );\n      }\n\n      app-toolbar {\n        font-weight: 400;\n        color: var(--primary-text-color);\n        border-bottom: 1px solid var(--divider-color);\n        background-color: var(--primary-background-color);\n      }\n\n      app-toolbar a {\n        color: var(--primary-text-color);\n      }\n\n      paper-listbox {\n        padding: 0;\n      }\n\n      paper-listbox > a {\n        color: var(--sidebar-text-color);\n        font-weight: 500;\n        font-size: 14px;\n        text-decoration: none;\n      }\n\n      paper-icon-item {\n        margin: 8px;\n        padding-left: 9px;\n        border-radius: 4px;\n        --paper-item-min-height: 40px;\n      }\n\n      ha-icon[slot=\"item-icon\"] {\n        color: var(--sidebar-icon-color);\n      }\n\n      .iron-selected paper-icon-item:before {\n        border-radius: 4px;\n        position: absolute;\n        top: 0;\n        right: 0;\n        bottom: 0;\n        left: 0;\n        pointer-events: none;\n        content: \"\";\n        background-color: var(--sidebar-selected-icon-color);\n        opacity: 0.12;\n        transition: opacity 15ms linear;\n        will-change: opacity;\n      }\n\n      .iron-selected paper-icon-item[pressed]:before {\n        opacity: 0.37;\n      }\n\n      paper-icon-item span {\n        color: var(--sidebar-text-color);\n        font-weight: 500;\n        font-size: 14px;\n      }\n\n      a.iron-selected paper-icon-item ha-icon {\n        color: var(--sidebar-selected-icon-color);\n      }\n\n      a.iron-selected .item-text {\n        color: var(--sidebar-selected-text-color);\n      }\n\n      paper-icon-item.logout {\n        margin-top: 16px;\n      }\n\n      .divider {\n        height: 1px;\n        background-color: var(--divider-color);\n        margin: 4px 0;\n      }\n\n      .subheader {\n        color: var(--sidebar-text-color);\n        font-weight: 500;\n        font-size: 14px;\n        padding: 16px;\n      }\n\n      .dev-tools {\n        display: flex;\n        flex-direction: row;\n        justify-content: space-between;\n        padding: 0 8px;\n      }\n\n      .dev-tools a {\n        color: var(--sidebar-icon-color);\n      }\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-sidebar\": HaSidebar;\n  }\n}\n\ncustomElements.define(\"ha-sidebar\", HaSidebar);\n","import {\n  LitElement,\n  TemplateResult,\n  css,\n  CSSResult,\n  html,\n  property,\n  customElement,\n} from \"lit-element\";\nimport { classMap } from \"lit-html/directives/class-map\";\nimport { User } from \"../../data/user\";\nimport { CurrentUser } from \"../../types\";\n\nconst computeInitials = (name: string) => {\n  if (!name) {\n    return \"user\";\n  }\n  return (\n    name\n      .trim()\n      // Split by space and take first 3 words\n      .split(\" \")\n      .slice(0, 3)\n      // Of each word, take first letter\n      .map((s) => s.substr(0, 1))\n      .join(\"\")\n  );\n};\n\n@customElement(\"ha-user-badge\")\nclass StateBadge extends LitElement {\n  @property() public user?: User | CurrentUser;\n\n  protected render(): TemplateResult | void {\n    const user = this.user;\n\n    const initials = user ? computeInitials(user.name) : \"?\";\n\n    return html`\n      <div\n        class=\"${classMap({\n          \"profile-badge\": true,\n          long: initials.length > 2,\n        })}\"\n      >\n        ${initials}\n      </div>\n    `;\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      .profile-badge {\n        display: inline-block;\n        box-sizing: border-box;\n        width: 40px;\n        line-height: 40px;\n        border-radius: 50%;\n        text-align: center;\n        background-color: var(--light-primary-color);\n        text-decoration: none;\n        color: var(--primary-text-color);\n        overflow: hidden;\n      }\n\n      .profile-badge.long {\n        font-size: 80%;\n      }\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-user-badge\": StateBadge;\n  }\n}\n","import { ExternalMessaging } from \"./external_messaging\";\n\nexport interface ExternalConfig {\n  hasSettingsScreen: boolean;\n}\n\nexport const getExternalConfig = (\n  bus: ExternalMessaging\n): Promise<ExternalConfig> => {\n  if (!bus.cache.cfg) {\n    bus.cache.cfg = bus.sendMessage<ExternalConfig>({\n      type: \"config/get\",\n    });\n  }\n  return bus.cache.cfg;\n};\n"],"sourceRoot":""}