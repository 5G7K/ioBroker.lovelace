{"version":3,"sources":["webpack:///./src/common/config/is_component_loaded.ts","webpack:///./src/components/ha-start-voice-button.js","webpack:///./src/mixins/events-mixin.js","webpack:///./src/mixins/localize-mixin.js","webpack:///./src/panels/shopping-list/ha-panel-shopping-list.js"],"names":["isComponentLoaded","hass","component","config","components","indexOf","HaStartVoiceButton","EventsMixin","PolymerElement","template","html","properties","type","Object","value","canListen","Boolean","computed","notify","computeCanListen","window","handleListenClick","fireEvent","dialogImport","dialogTag","customElements","define","dedupingMixin","superClass","fire","detail","options","node","localize","Function","__computeLocalize","HaPanelShoppingList","LocalizeMixin","items","Array","connectedCallback","_fetchData","bind","connection","subscribeEvents","then","unsub","_unsubEvents","disconnectedCallback","callApi","reverse","_itemCompleteTapped","ev","stopPropagation","model","item","id","complete","target","checked","catch","_addItem","name","$","addBox","setTimeout","focus","_addKeyPress","keyCode","_saveEdit","index","set","_clearCompleted"],"mappings":"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","file":"panel-shopping-list.chunk.js","sourcesContent":["import { HomeAssistant } from \"../../types\";\n\n/** Return if a component is loaded. */\nexport default function isComponentLoaded(\n  hass: HomeAssistant,\n  component: string\n): boolean {\n  return hass && hass.config.components.indexOf(component) !== -1;\n}\n","import \"@polymer/paper-icon-button/paper-icon-button\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport { EventsMixin } from \"../mixins/events-mixin\";\n\nimport isComponentLoaded from \"../common/config/is_component_loaded\";\nimport { fireEvent } from \"../common/dom/fire_event\";\n\n/*\n * @appliesMixin EventsMixin\n */\nclass HaStartVoiceButton extends EventsMixin(PolymerElement) {\n  static get template() {\n    return html`\n      <paper-icon-button\n        icon=\"hass:microphone\"\n        hidden$=\"[[!canListen]]\"\n        on-click=\"handleListenClick\"\n      ></paper-icon-button>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: {\n        type: Object,\n        value: null,\n      },\n\n      canListen: {\n        type: Boolean,\n        computed: \"computeCanListen(hass)\",\n        notify: true,\n      },\n    };\n  }\n\n  computeCanListen(hass) {\n    return (\n      \"webkitSpeechRecognition\" in window &&\n      isComponentLoaded(hass, \"conversation\")\n    );\n  }\n\n  handleListenClick() {\n    fireEvent(this, \"show-dialog\", {\n      dialogImport: () =>\n        import(/* webpackChunkName: \"voice-command-dialog\" */ \"../dialogs/ha-voice-command-dialog\"),\n      dialogTag: \"ha-voice-command-dialog\",\n    });\n  }\n}\n\ncustomElements.define(\"ha-start-voice-button\", HaStartVoiceButton);\n","import { dedupingMixin } from \"@polymer/polymer/lib/utils/mixin\";\n\nimport { fireEvent } from \"../common/dom/fire_event\";\n\n// Polymer legacy event helpers used courtesy of the Polymer project.\n//\n// Copyright (c) 2017 The Polymer Authors. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without\n// modification, are permitted provided that the following conditions are\n// met:\n//\n//    * Redistributions of source code must retain the above copyright\n// notice, this list of conditions and the following disclaimer.\n//    * Redistributions in binary form must reproduce the above\n// copyright notice, this list of conditions and the following disclaimer\n// in the documentation and/or other materials provided with the\n// distribution.\n//    * Neither the name of Google Inc. nor the names of its\n// contributors may be used to endorse or promote products derived from\n// this software without specific prior written permission.\n//\n// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n// \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n// LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n// A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n// OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n// SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n// LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n// DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n// THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n// (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n// OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n\n/* @polymerMixin */\nexport const EventsMixin = dedupingMixin(\n  (superClass) =>\n    class extends superClass {\n      /**\n   * Dispatches a custom event with an optional detail value.\n   *\n   * @param {string} type Name of event type.\n   * @param {*=} detail Detail value containing event-specific\n   *   payload.\n   * @param {{ bubbles: (boolean|undefined),\n               cancelable: (boolean|undefined),\n                composed: (boolean|undefined) }=}\n    *  options Object specifying options.  These may include:\n    *  `bubbles` (boolean, defaults to `true`),\n    *  `cancelable` (boolean, defaults to false), and\n    *  `node` on which to fire the event (HTMLElement, defaults to `this`).\n    * @return {Event} The new event that was fired.\n    */\n      fire(type, detail, options) {\n        options = options || {};\n        return fireEvent(options.node || this, type, detail, options);\n      }\n    }\n);\n","import { dedupingMixin } from \"@polymer/polymer/lib/utils/mixin\";\n/**\n * Polymer Mixin to enable a localize function powered by language/resources from hass object.\n *\n * @polymerMixin\n */\nexport default dedupingMixin(\n  (superClass) =>\n    class extends superClass {\n      static get properties() {\n        return {\n          hass: Object,\n\n          /**\n           * Translates a string to the current `language`. Any parameters to the\n           * string should be passed in order, as follows:\n           * `localize(stringKey, param1Name, param1Value, param2Name, param2Value)`\n           */\n          localize: {\n            type: Function,\n            computed: \"__computeLocalize(hass.localize)\",\n          },\n        };\n      }\n\n      __computeLocalize(localize) {\n        return localize;\n      }\n    }\n);\n","import \"@polymer/app-layout/app-header-layout/app-header-layout\";\nimport \"@polymer/app-layout/app-header/app-header\";\nimport \"@polymer/app-layout/app-toolbar/app-toolbar\";\nimport \"@polymer/paper-checkbox/paper-checkbox\";\nimport \"@polymer/paper-icon-button/paper-icon-button\";\nimport \"@polymer/paper-input/paper-input\";\nimport \"@polymer/paper-item/paper-icon-item\";\nimport \"@polymer/paper-item/paper-item-body\";\nimport \"@polymer/paper-item/paper-item\";\nimport \"@polymer/paper-listbox/paper-listbox\";\nimport \"@polymer/paper-menu-button/paper-menu-button\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport \"../../components/ha-menu-button\";\nimport \"../../components/ha-start-voice-button\";\nimport \"../../components/ha-card\";\nimport LocalizeMixin from \"../../mixins/localize-mixin\";\n\n/*\n * @appliesMixin LocalizeMixin\n */\nclass HaPanelShoppingList extends LocalizeMixin(PolymerElement) {\n  static get template() {\n    return html`\n      <style include=\"ha-style\">\n        :host {\n          height: 100%;\n        }\n        app-toolbar paper-listbox {\n          width: 150px;\n        }\n        app-toolbar paper-item {\n          cursor: pointer;\n        }\n        .content {\n          padding-bottom: 32px;\n          max-width: 600px;\n          margin: 0 auto;\n        }\n        paper-icon-item {\n          border-top: 1px solid var(--divider-color);\n        }\n        paper-icon-item:first-child {\n          border-top: 0;\n        }\n        paper-checkbox {\n          padding: 11px;\n        }\n        paper-input {\n          --paper-input-container-underline: {\n            display: none;\n          }\n          --paper-input-container-underline-focus: {\n            display: none;\n          }\n          position: relative;\n          top: 1px;\n        }\n        .tip {\n          padding: 24px;\n          text-align: center;\n          color: var(--secondary-text-color);\n        }\n      </style>\n\n      <app-header-layout has-scrolling-region>\n        <app-header slot=\"header\" fixed>\n          <app-toolbar>\n            <ha-menu-button></ha-menu-button>\n            <div main-title>[[localize('panel.shopping_list')]]</div>\n            <ha-start-voice-button\n              hass=\"[[hass]]\"\n              can-listen=\"{{canListen}}\"\n            ></ha-start-voice-button>\n            <paper-menu-button\n              horizontal-align=\"right\"\n              horizontal-offset=\"-5\"\n              vertical-offset=\"-5\"\n            >\n              <paper-icon-button\n                icon=\"hass:dots-vertical\"\n                slot=\"dropdown-trigger\"\n              ></paper-icon-button>\n              <paper-listbox slot=\"dropdown-content\">\n                <paper-item on-click=\"_clearCompleted\"\n                  >[[localize('ui.panel.shopping-list.clear_completed')]]</paper-item\n                >\n              </paper-listbox>\n            </paper-menu-button>\n          </app-toolbar>\n        </app-header>\n\n        <div class=\"content\">\n          <ha-card>\n            <paper-icon-item on-focus=\"_focusRowInput\">\n              <paper-icon-button\n                slot=\"item-icon\"\n                icon=\"hass:plus\"\n                on-click=\"_addItem\"\n              ></paper-icon-button>\n              <paper-item-body>\n                <paper-input\n                  id=\"addBox\"\n                  placeholder=\"[[localize('ui.panel.shopping-list.add_item')]]\"\n                  on-keydown=\"_addKeyPress\"\n                  no-label-float\n                ></paper-input>\n              </paper-item-body>\n            </paper-icon-item>\n\n            <template is=\"dom-repeat\" items=\"[[items]]\">\n              <paper-icon-item>\n                <paper-checkbox\n                  slot=\"item-icon\"\n                  checked=\"{{item.complete}}\"\n                  on-click=\"_itemCompleteTapped\"\n                  tabindex=\"0\"\n                ></paper-checkbox>\n                <paper-item-body>\n                  <paper-input\n                    id=\"editBox\"\n                    no-label-float\n                    value=\"[[item.name]]\"\n                    on-change=\"_saveEdit\"\n                  ></paper-input>\n                </paper-item-body>\n              </paper-icon-item>\n            </template>\n          </ha-card>\n          <div class=\"tip\" hidden$=\"[[!canListen]]\">\n            [[localize('ui.panel.shopping-list.microphone_tip')]]\n          </div>\n        </div>\n      </app-header-layout>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      canListen: Boolean,\n      items: {\n        type: Array,\n        value: [],\n      },\n    };\n  }\n\n  connectedCallback() {\n    super.connectedCallback();\n    this._fetchData = this._fetchData.bind(this);\n\n    this.hass.connection\n      .subscribeEvents(this._fetchData, \"shopping_list_updated\")\n      .then(\n        function(unsub) {\n          this._unsubEvents = unsub;\n        }.bind(this)\n      );\n    this._fetchData();\n  }\n\n  disconnectedCallback() {\n    super.disconnectedCallback();\n    if (this._unsubEvents) this._unsubEvents();\n  }\n\n  _fetchData() {\n    this.hass.callApi(\"get\", \"shopping_list\").then(\n      function(items) {\n        items.reverse();\n        this.items = items;\n      }.bind(this)\n    );\n  }\n\n  _itemCompleteTapped(ev) {\n    ev.stopPropagation();\n    this.hass\n      .callApi(\"post\", \"shopping_list/item/\" + ev.model.item.id, {\n        complete: ev.target.checked,\n      })\n      .catch(() => this._fetchData());\n  }\n\n  _addItem(ev) {\n    this.hass\n      .callApi(\"post\", \"shopping_list/item\", {\n        name: this.$.addBox.value,\n      })\n      .catch(() => this._fetchData());\n    this.$.addBox.value = \"\";\n    // Presence of 'ev' means tap on \"add\" button.\n    if (ev) {\n      setTimeout(() => this.$.addBox.focus(), 10);\n    }\n  }\n\n  _addKeyPress(ev) {\n    if (ev.keyCode === 13) {\n      this._addItem();\n    }\n  }\n\n  _saveEdit(ev) {\n    const { index, item } = ev.model;\n    const name = ev.target.value;\n\n    if (name === item.name) {\n      return;\n    }\n\n    this.set([\"items\", index, \"name\"], name);\n    this.hass\n      .callApi(\"post\", \"shopping_list/item/\" + item.id, {\n        name: name,\n      })\n      .catch(() => this._fetchData());\n  }\n\n  _clearCompleted() {\n    this.hass.callApi(\"POST\", \"shopping_list/clear_completed\");\n  }\n}\n\ncustomElements.define(\"ha-panel-shopping-list\", HaPanelShoppingList);\n"],"sourceRoot":""}