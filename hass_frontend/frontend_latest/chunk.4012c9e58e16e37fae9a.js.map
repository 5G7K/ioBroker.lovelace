{"version":3,"sources":["webpack:///./src/mixins/localize-mixin.js","webpack:///./src/mixins/events-mixin.js","webpack:///./src/components/ha-icon.ts","webpack:///./node_modules/@polymer/app-route/app-route.js","webpack:///./src/components/ha-icon-next.ts","webpack:///./src/mixins/navigate-mixin.js","webpack:///./src/util/toast-saved-success.ts","webpack:///./src/panels/config/users/ha-config-user-picker.js","webpack:///../src/directives/until.ts","webpack:///./src/panels/config/users/ha-user-editor.ts","webpack:///./src/panels/config/users/ha-config-users.js"],"names":["_polymer_polymer_lib_utils_mixin__WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","dedupingMixin","superClass","properties","hass","Object","localize","type","Function","computed","__computeLocalize","d","__webpack_exports__","EventsMixin","_common_dom_fire_event__WEBPACK_IMPORTED_MODULE_1__","fire","detail","options","fireEvent","node","this","ironIconClass","customElements","get","loaded","HaIcon","[object Object]","args","super","listen","eventName","methodName","_iconsetName","e","then","bind","define","_polymer_polymer_lib_legacy_polymer_fn_js__WEBPACK_IMPORTED_MODULE_1__","Polymer","is","route","notify","pattern","String","data","value","autoActivate","Boolean","_queryParamsUpdating","queryParams","tail","path","prefix","__queryParams","active","readOnly","_matched","observers","created","linkPaths","__routeQueryParamsChanged","set","copyOfQueryParams","anythingChanged","key","__tailQueryParamsChanged","__queryParamsChanged","changes","__resetProperties","_setActive","__tryToMatch","remainingPieces","split","patternPieces","matched","namedMatches","i","length","patternPiece","pathPiece","shift","push","charAt","slice","join","propertyUpdates","tailPrefix","tailPath","_dataInUrl","setProperties","__setMulti","__tailPathChanged","newPath","__updatePathOnDataChange","__getLink","overrideValues","values","interp","map","setObj","property","_propertySetter","undefined","_pathEffector","_notifyChange","_ha_icon__WEBPACK_IMPORTED_MODULE_1__","connectedCallback","setTimeout","icon","window","getComputedStyle","direction","_common_navigate__WEBPACK_IMPORTED_MODULE_1__","navigate","showSaveSuccessToast","_toast__WEBPACK_IMPORTED_MODULE_0__","el","showToast","message","registeredDialog","NavigateMixin","LocalizeMixin","PolymerElement","template","html","users","Array","rtl","reflectToAttribute","dialogShowEvent","dialogTag","dialogImport","Promise","all","_withDefault","defaultValue","_computeUrl","user","id","_computeGroup","group_ids","_computeRTL","computeRTL","_addUser","dialogClosedCallback","async","userId","_state","WeakMap","until","lit_html","part","state","lastRenderedIndex","previousValues","previousLength","parts","setValue","resolve","resolvedValue","index","indexOf","commit","GROUPS","SYSTEM_GROUP_ID_USER","SYSTEM_GROUP_ID_ADMIN","customElement","_LitElement","_initialize","_name","is_owner","_handleGroupChange","updateComplete","groupId","is_active","system_generated","_handleRenameUser","_deleteUser","name","ev","currentTarget","blur","newName","prompt","updateUser","err","alert","selectEl","newGroup","confirm","deleteUser","code","target","haStyle","css","LitElement","observer","_routeData","_user","_users","ready","_loadData","addEventListener","_handlePickUser","_checkRoute","_debouncer","Debouncer","debounce","timeOut","after","_computeUser","filter","u","_equals","a","b","fetchUsers"],"mappings":"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","file":"chunk.4012c9e58e16e37fae9a.js","sourcesContent":["import { dedupingMixin } from \"@polymer/polymer/lib/utils/mixin\";\n/**\n * Polymer Mixin to enable a localize function powered by language/resources from hass object.\n *\n * @polymerMixin\n */\nexport default dedupingMixin(\n  (superClass) =>\n    class extends superClass {\n      static get properties() {\n        return {\n          hass: Object,\n\n          /**\n           * Translates a string to the current `language`. Any parameters to the\n           * string should be passed in order, as follows:\n           * `localize(stringKey, param1Name, param1Value, param2Name, param2Value)`\n           */\n          localize: {\n            type: Function,\n            computed: \"__computeLocalize(hass.localize)\",\n          },\n        };\n      }\n\n      __computeLocalize(localize) {\n        return localize;\n      }\n    }\n);\n","import { dedupingMixin } from \"@polymer/polymer/lib/utils/mixin\";\n\nimport { fireEvent } from \"../common/dom/fire_event\";\n\n// Polymer legacy event helpers used courtesy of the Polymer project.\n//\n// Copyright (c) 2017 The Polymer Authors. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without\n// modification, are permitted provided that the following conditions are\n// met:\n//\n//    * Redistributions of source code must retain the above copyright\n// notice, this list of conditions and the following disclaimer.\n//    * Redistributions in binary form must reproduce the above\n// copyright notice, this list of conditions and the following disclaimer\n// in the documentation and/or other materials provided with the\n// distribution.\n//    * Neither the name of Google Inc. nor the names of its\n// contributors may be used to endorse or promote products derived from\n// this software without specific prior written permission.\n//\n// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n// \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n// LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n// A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n// OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n// SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n// LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n// DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n// THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n// (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n// OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n\n/* @polymerMixin */\nexport const EventsMixin = dedupingMixin(\n  (superClass) =>\n    class extends superClass {\n      /**\n   * Dispatches a custom event with an optional detail value.\n   *\n   * @param {string} type Name of event type.\n   * @param {*=} detail Detail value containing event-specific\n   *   payload.\n   * @param {{ bubbles: (boolean|undefined),\n               cancelable: (boolean|undefined),\n                composed: (boolean|undefined) }=}\n    *  options Object specifying options.  These may include:\n    *  `bubbles` (boolean, defaults to `true`),\n    *  `cancelable` (boolean, defaults to false), and\n    *  `node` on which to fire the event (HTMLElement, defaults to `this`).\n    * @return {Event} The new event that was fired.\n    */\n      fire(type, detail, options) {\n        options = options || {};\n        return fireEvent(options.node || this, type, detail, options);\n      }\n    }\n);\n","import { Constructor } from \"../types\";\n\nimport \"@polymer/iron-icon/iron-icon\";\n// Not duplicate, this is for typing.\n// tslint:disable-next-line\nimport { IronIconElement } from \"@polymer/iron-icon/iron-icon\";\n\nconst ironIconClass = customElements.get(\"iron-icon\") as Constructor<\n  IronIconElement\n>;\n\nlet loaded = false;\n\nexport class HaIcon extends ironIconClass {\n  private _iconsetName?: string;\n\n  public listen(\n    node: EventTarget | null,\n    eventName: string,\n    methodName: string\n  ): void {\n    super.listen(node, eventName, methodName);\n\n    if (!loaded && this._iconsetName === \"mdi\") {\n      loaded = true;\n      import(/* webpackChunkName: \"mdi-icons\" */ \"../resources/mdi-icons\");\n    }\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-icon\": HaIcon;\n  }\n}\n\ncustomElements.define(\"ha-icon\", HaIcon);\n","/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at\nhttp://polymer.github.io/LICENSE.txt The complete set of authors may be found at\nhttp://polymer.github.io/AUTHORS.txt The complete set of contributors may be\nfound at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as\npart of the polymer project is also subject to an additional IP rights grant\nfound at http://polymer.github.io/PATENTS.txt\n*/\nimport '@polymer/polymer/polymer-legacy.js';\n\nimport {Polymer} from '@polymer/polymer/lib/legacy/polymer-fn.js';\n\n/**\n`app-route` is an element that enables declarative, self-describing routing\nfor a web app.\n\nIn its typical usage, a `app-route` element consumes an object that describes\nsome state about the current route, via the `route` property. It then parses\nthat state using the `pattern` property, and produces two artifacts: some `data`\nrelated to the `route`, and a `tail` that contains the rest of the `route` that\ndid not match.\n\nHere is a basic example, when used with `app-location`:\n\n    <app-location route=\"{{route}}\"></app-location>\n    <app-route\n        route=\"{{route}}\"\n        pattern=\"/:page\"\n        data=\"{{data}}\"\n        tail=\"{{tail}}\">\n    </app-route>\n\nIn the above example, the `app-location` produces a `route` value. Then, the\n`route.path` property is matched by comparing it to the `pattern` property. If\nthe `pattern` property matches `route.path`, the `app-route` will set or update\nits `data` property with an object whose properties correspond to the parameters\nin `pattern`. So, in the above example, if `route.path` was `'/about'`, the\nvalue of `data` would be `{\"page\": \"about\"}`.\n\nThe `tail` property represents the remaining part of the route state after the\n`pattern` has been applied to a matching `route`.\n\nHere is another example, where `tail` is used:\n\n    <app-location route=\"{{route}}\"></app-location>\n    <app-route\n        route=\"{{route}}\"\n        pattern=\"/:page\"\n        data=\"{{routeData}}\"\n        tail=\"{{subroute}}\">\n    </app-route>\n    <app-route\n        route=\"{{subroute}}\"\n        pattern=\"/:id\"\n        data=\"{{subrouteData}}\">\n    </app-route>\n\nIn the above example, there are two `app-route` elements. The first\n`app-route` consumes a `route`. When the `route` is matched, the first\n`app-route` also produces `routeData` from its `data`, and `subroute` from\nits `tail`. The second `app-route` consumes the `subroute`, and when it\nmatches, it produces an object called `subrouteData` from its `data`.\n\nSo, when `route.path` is `'/about'`, the `routeData` object will look like\nthis: `{ page: 'about' }`\n\nAnd `subrouteData` will be null. However, if `route.path` changes to\n`'/article/123'`, the `routeData` object will look like this:\n`{ page: 'article' }`\n\nAnd the `subrouteData` will look like this: `{ id: '123' }`\n\n`app-route` is responsive to bi-directional changes to the `data` objects\nthey produce. So, if `routeData.page` changed from `'article'` to `'about'`,\nthe `app-route` will update `route.path`. This in-turn will update the\n`app-location`, and cause the global location bar to change its value.\n\n@element app-route\n@demo demo/index.html\n@demo demo/data-loading-demo.html\n@demo demo/simple-demo.html\n*/\nPolymer({\n  is: 'app-route',\n\n  properties: {\n    /**\n     * The URL component managed by this element.\n     */\n    route: {\n      type: Object,\n      notify: true,\n    },\n\n    /**\n     * The pattern of slash-separated segments to match `route.path` against.\n     *\n     * For example the pattern \"/foo\" will match \"/foo\" or \"/foo/bar\"\n     * but not \"/foobar\".\n     *\n     * Path segments like `/:named` are mapped to properties on the `data`\n     * object.\n     */\n    pattern: {\n      type: String,\n    },\n\n    /**\n     * The parameterized values that are extracted from the route as\n     * described by `pattern`.\n     */\n    data: {\n      type: Object,\n      value: function() {\n        return {};\n      },\n      notify: true,\n    },\n\n    /**\n     * Auto activate route if path empty\n     */\n    autoActivate: {\n      type: Boolean,\n      value: false,\n    },\n\n    _queryParamsUpdating: {\n      type: Boolean,\n      value: false,\n    },\n\n    /**\n     * @type {?Object}\n     */\n    queryParams: {\n      type: Object,\n      value: function() {\n        return {};\n      },\n      notify: true,\n    },\n\n    /**\n     * The part of `route.path` NOT consumed by `pattern`.\n     */\n    tail: {\n      type: Object,\n      value: function() {\n        return {\n          path: null,\n          prefix: null,\n          __queryParams: null,\n        };\n      },\n      notify: true,\n    },\n\n    /**\n     * Whether the current route is active. True if `route.path` matches the\n     * `pattern`, false otherwise.\n     */\n    active: {\n      type: Boolean,\n      notify: true,\n      readOnly: true,\n    },\n\n    /**\n     * @type {?string}\n     */\n    _matched: {\n      type: String,\n      value: '',\n    }\n  },\n\n  observers: [\n    '__tryToMatch(route.path, pattern)',\n    '__updatePathOnDataChange(data.*)',\n    '__tailPathChanged(tail.path)',\n    '__routeQueryParamsChanged(route.__queryParams)',\n    '__tailQueryParamsChanged(tail.__queryParams)',\n    '__queryParamsChanged(queryParams.*)'\n  ],\n\n  created: function() {\n    this.linkPaths('route.__queryParams', 'tail.__queryParams');\n    this.linkPaths('tail.__queryParams', 'route.__queryParams');\n  },\n\n  /**\n   * Deal with the query params object being assigned to wholesale.\n   */\n  __routeQueryParamsChanged: function(queryParams) {\n    if (queryParams && this.tail) {\n      if (this.tail.__queryParams !== queryParams) {\n        this.set('tail.__queryParams', queryParams);\n      }\n\n      if (!this.active || this._queryParamsUpdating) {\n        return;\n      }\n\n      // Copy queryParams and track whether there are any differences compared\n      // to the existing query params.\n      var copyOfQueryParams = {};\n      var anythingChanged = false;\n      for (var key in queryParams) {\n        copyOfQueryParams[key] = queryParams[key];\n        if (anythingChanged || !this.queryParams ||\n            queryParams[key] !== this.queryParams[key]) {\n          anythingChanged = true;\n        }\n      }\n      // Need to check whether any keys were deleted\n      for (var key in this.queryParams) {\n        if (anythingChanged || !(key in queryParams)) {\n          anythingChanged = true;\n          break;\n        }\n      }\n\n      if (!anythingChanged) {\n        return;\n      }\n      this._queryParamsUpdating = true;\n      this.set('queryParams', copyOfQueryParams);\n      this._queryParamsUpdating = false;\n    }\n  },\n\n  __tailQueryParamsChanged: function(queryParams) {\n    if (queryParams && this.route && this.route.__queryParams != queryParams) {\n      this.set('route.__queryParams', queryParams);\n    }\n  },\n\n  __queryParamsChanged: function(changes) {\n    if (!this.active || this._queryParamsUpdating) {\n      return;\n    }\n\n    this.set('route.__' + changes.path, changes.value);\n  },\n\n  __resetProperties: function() {\n    this._setActive(false);\n    this._matched = null;\n  },\n\n  __tryToMatch: function() {\n    if (!this.route) {\n      return;\n    }\n\n    var path = this.route.path;\n    var pattern = this.pattern;\n\n    if (this.autoActivate && path === '') {\n      path = '/';\n    }\n\n    if (!pattern) {\n      return;\n    }\n\n    if (!path) {\n      this.__resetProperties();\n      return;\n    }\n\n    var remainingPieces = path.split('/');\n    var patternPieces = pattern.split('/');\n\n    var matched = [];\n    var namedMatches = {};\n\n    for (var i = 0; i < patternPieces.length; i++) {\n      var patternPiece = patternPieces[i];\n      if (!patternPiece && patternPiece !== '') {\n        break;\n      }\n      var pathPiece = remainingPieces.shift();\n\n      // We don't match this path.\n      if (!pathPiece && pathPiece !== '') {\n        this.__resetProperties();\n        return;\n      }\n      matched.push(pathPiece);\n\n      if (patternPiece.charAt(0) == ':') {\n        namedMatches[patternPiece.slice(1)] = pathPiece;\n      } else if (patternPiece !== pathPiece) {\n        this.__resetProperties();\n        return;\n      }\n    }\n\n    this._matched = matched.join('/');\n\n    // Properties that must be updated atomically.\n    var propertyUpdates = {};\n\n    // this.active\n    if (!this.active) {\n      propertyUpdates.active = true;\n    }\n\n    // this.tail\n    var tailPrefix = this.route.prefix + this._matched;\n    var tailPath = remainingPieces.join('/');\n    if (remainingPieces.length > 0) {\n      tailPath = '/' + tailPath;\n    }\n    if (!this.tail || this.tail.prefix !== tailPrefix ||\n        this.tail.path !== tailPath) {\n      propertyUpdates.tail = {\n        prefix: tailPrefix,\n        path: tailPath,\n        __queryParams: this.route.__queryParams\n      };\n    }\n\n    // this.data\n    propertyUpdates.data = namedMatches;\n    this._dataInUrl = {};\n    for (var key in namedMatches) {\n      this._dataInUrl[key] = namedMatches[key];\n    }\n\n    if (this.setProperties) {\n      // atomic update\n      this.setProperties(propertyUpdates, true);\n    } else {\n      this.__setMulti(propertyUpdates);\n    }\n  },\n\n  __tailPathChanged: function(path) {\n    if (!this.active) {\n      return;\n    }\n    var tailPath = path;\n    var newPath = this._matched;\n    if (tailPath) {\n      if (tailPath.charAt(0) !== '/') {\n        tailPath = '/' + tailPath;\n      }\n      newPath += tailPath;\n    }\n    this.set('route.path', newPath);\n  },\n\n  __updatePathOnDataChange: function() {\n    if (!this.route || !this.active) {\n      return;\n    }\n    var newPath = this.__getLink({});\n    var oldPath = this.__getLink(this._dataInUrl);\n    if (newPath === oldPath) {\n      return;\n    }\n    this.set('route.path', newPath);\n  },\n\n  __getLink: function(overrideValues) {\n    var values = {tail: null};\n    for (var key in this.data) {\n      values[key] = this.data[key];\n    }\n    for (var key in overrideValues) {\n      values[key] = overrideValues[key];\n    }\n    var patternPieces = this.pattern.split('/');\n    var interp = patternPieces.map(function(value) {\n      if (value[0] == ':') {\n        value = values[value.slice(1)];\n      }\n      return value;\n    }, this);\n    if (values.tail && values.tail.path) {\n      if (interp.length > 0 && values.tail.path.charAt(0) === '/') {\n        interp.push(values.tail.path.slice(1));\n      } else {\n        interp.push(values.tail.path);\n      }\n    }\n    return interp.join('/');\n  },\n\n  __setMulti: function(setObj) {\n    // HACK(rictic): skirting around 1.0's lack of a setMulti by poking at\n    //     internal data structures. I would not advise that you copy this\n    //     example.\n    //\n    //     In the future this will be a feature of Polymer itself.\n    //     See: https://github.com/Polymer/polymer/issues/3640\n    //\n    //     Hacking around with private methods like this is juggling footguns,\n    //     and is likely to have unexpected and unsupported rough edges.\n    //\n    //     Be ye so warned.\n    for (var property in setObj) {\n      this._propertySetter(property, setObj[property]);\n    }\n    // notify in a specific order\n    if (setObj.data !== undefined) {\n      this._pathEffector('data', this.data);\n      this._notifyChange('data');\n    }\n    if (setObj.active !== undefined) {\n      this._pathEffector('active', this.active);\n      this._notifyChange('active');\n    }\n    if (setObj.tail !== undefined) {\n      this._pathEffector('tail', this.tail);\n      this._notifyChange('tail');\n    }\n  }\n});\n","import \"@polymer/iron-icon/iron-icon\";\n// Not duplicate, this is for typing.\n// tslint:disable-next-line\nimport { HaIcon } from \"./ha-icon\";\n\nexport class HaIconNext extends HaIcon {\n  public connectedCallback() {\n    super.connectedCallback();\n\n    // wait to check for direction since otherwise direction is wrong even though top level is RTL\n    setTimeout(() => {\n      this.icon =\n        window.getComputedStyle(this).direction === \"ltr\"\n          ? \"hass:chevron-right\"\n          : \"hass:chevron-left\";\n    }, 100);\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-icon-next\": HaIconNext;\n  }\n}\n\ncustomElements.define(\"ha-icon-next\", HaIconNext);\n","import { dedupingMixin } from \"@polymer/polymer/lib/utils/mixin\";\nimport { navigate } from \"../common/navigate\";\n\n/*\n * @polymerMixin\n * @appliesMixin EventsMixin\n */\nexport default dedupingMixin(\n  (superClass) =>\n    class extends superClass {\n      navigate(...args) {\n        navigate(this, ...args);\n      }\n    }\n);\n","import { showToast } from \"./toast\";\nimport { HomeAssistant } from \"../types\";\n\nexport const showSaveSuccessToast = (el: HTMLElement, hass: HomeAssistant) =>\n  showToast(el, {\n    message: hass!.localize(\"ui.common.successfully_saved\"),\n  });\n","import \"@polymer/paper-item/paper-item\";\nimport \"@polymer/paper-item/paper-item-body\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport \"../../../layouts/hass-subpage\";\nimport \"../../../components/ha-icon-next\";\nimport \"../../../components/ha-card\";\nimport \"../../../components/ha-fab\";\n\nimport LocalizeMixin from \"../../../mixins/localize-mixin\";\nimport NavigateMixin from \"../../../mixins/navigate-mixin\";\nimport { EventsMixin } from \"../../../mixins/events-mixin\";\n\nimport { computeRTL } from \"../../../common/util/compute_rtl\";\n\nlet registeredDialog = false;\n\n/*\n * @appliesMixin LocalizeMixin\n * @appliesMixin NavigateMixin\n * @appliesMixin EventsMixin\n */\nclass HaUserPicker extends EventsMixin(\n  NavigateMixin(LocalizeMixin(PolymerElement))\n) {\n  static get template() {\n    return html`\n      <style>\n        ha-fab {\n          position: fixed;\n          bottom: 16px;\n          right: 16px;\n          z-index: 1;\n        }\n        ha-fab[is-wide] {\n          bottom: 24px;\n          right: 24px;\n        }\n        ha-fab[rtl] {\n          right: auto;\n          left: 16px;\n        }\n        ha-fab[rtl][is-wide] {\n          bottom: 24px;\n          right: auto;\n          left: 24px;\n        }\n\n        ha-card {\n          max-width: 600px;\n          margin: 16px auto;\n          overflow: hidden;\n        }\n        a {\n          text-decoration: none;\n          color: var(--primary-text-color);\n        }\n      </style>\n\n      <hass-subpage header=\"[[localize('ui.panel.config.users.picker.title')]]\">\n        <ha-card>\n          <template is=\"dom-repeat\" items=\"[[users]]\" as=\"user\">\n            <a href=\"[[_computeUrl(user)]]\">\n              <paper-item>\n                <paper-item-body two-line>\n                  <div>[[_withDefault(user.name, 'Unnamed User')]]</div>\n                  <div secondary=\"\">\n                    [[_computeGroup(localize, user)]]\n                    <template is=\"dom-if\" if=\"[[user.system_generated]]\">\n                      -\n                      [[localize('ui.panel.config.users.picker.system_generated')]]\n                    </template>\n                  </div>\n                </paper-item-body>\n                <ha-icon-next></ha-icon-next>\n              </paper-item>\n            </a>\n          </template>\n        </ha-card>\n\n        <ha-fab\n          is-wide$=\"[[isWide]]\"\n          icon=\"hass:plus\"\n          title=\"[[localize('ui.panel.config.users.picker.add_user')]]\"\n          on-click=\"_addUser\"\n          rtl$=\"[[rtl]]\"\n        ></ha-fab>\n      </hass-subpage>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      users: Array,\n\n      rtl: {\n        type: Boolean,\n        reflectToAttribute: true,\n        computed: \"_computeRTL(hass)\",\n      },\n    };\n  }\n\n  connectedCallback() {\n    super.connectedCallback();\n\n    if (!registeredDialog) {\n      registeredDialog = true;\n      this.fire(\"register-dialog\", {\n        dialogShowEvent: \"show-add-user\",\n        dialogTag: \"ha-dialog-add-user\",\n        dialogImport: () =>\n          import(\n            /* webpackChunkName: \"ha-dialog-add-user\" */ \"./ha-dialog-add-user\"\n          ),\n      });\n    }\n  }\n\n  _withDefault(value, defaultValue) {\n    return value || defaultValue;\n  }\n\n  _computeUrl(user) {\n    return `/config/users/${user.id}`;\n  }\n\n  _computeGroup(localize, user) {\n    return localize(`groups.${user.group_ids[0]}`);\n  }\n\n  _computeRTL(hass) {\n    return computeRTL(hass);\n  }\n\n  _addUser() {\n    this.fire(\"show-add-user\", {\n      hass: this.hass,\n      dialogClosedCallback: async ({ userId }) => {\n        this.fire(\"reload-users\");\n        if (userId) this.navigate(`/config/users/${userId}`);\n      },\n    });\n  }\n}\n\ncustomElements.define(\"ha-config-user-picker\", HaUserPicker);\n","/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n\nimport {isPrimitive} from '../lib/parts.js';\nimport {directive, Part} from '../lit-html.js';\n\ninterface AsyncState {\n  /**\n   * The last rendered index of a call to until(). A value only renders if its\n   * index is less than the `lastRenderedIndex`.\n   */\n  lastRenderedIndex: number;\n\n  values: unknown[];\n}\n\nconst _state = new WeakMap<Part, AsyncState>();\n// Effectively infinity, but a SMI.\nconst _infinity = 0x7fffffff;\n\n/**\n * Renders one of a series of values, including Promises, to a Part.\n *\n * Values are rendered in priority order, with the first argument having the\n * highest priority and the last argument having the lowest priority. If a\n * value is a Promise, low-priority values will be rendered until it resolves.\n *\n * The priority of values can be used to create placeholder content for async\n * data. For example, a Promise with pending content can be the first,\n * highest-priority, argument, and a non_promise loading indicator template can\n * be used as the second, lower-priority, argument. The loading indicator will\n * render immediately, and the primary content will render when the Promise\n * resolves.\n *\n * Example:\n *\n *     const content = fetch('./content.txt').then(r => r.text());\n *     html`${until(content, html`<span>Loading...</span>`)}`\n */\nexport const until = directive((...args: unknown[]) => (part: Part) => {\n  let state = _state.get(part)!;\n  if (state === undefined) {\n    state = {\n      lastRenderedIndex: _infinity,\n      values: [],\n    };\n    _state.set(part, state);\n  }\n  const previousValues = state.values;\n  let previousLength = previousValues.length;\n  state.values = args;\n\n  for (let i = 0; i < args.length; i++) {\n    // If we've rendered a higher-priority value already, stop.\n    if (i > state.lastRenderedIndex) {\n      break;\n    }\n\n    const value = args[i];\n\n    // Render non-Promise values immediately\n    if (isPrimitive(value) ||\n        typeof (value as {then?: unknown}).then !== 'function') {\n      part.setValue(value);\n      state.lastRenderedIndex = i;\n      // Since a lower-priority value will never overwrite a higher-priority\n      // synchronous value, we can stop processsing now.\n      break;\n    }\n\n    // If this is a Promise we've already handled, skip it.\n    if (i < previousLength && value === previousValues[i]) {\n      continue;\n    }\n\n    // We have a Promise that we haven't seen before, so priorities may have\n    // changed. Forget what we rendered before.\n    state.lastRenderedIndex = _infinity;\n    previousLength = 0;\n\n    Promise.resolve(value).then((resolvedValue: unknown) => {\n      const index = state.values.indexOf(value);\n      // If state.values doesn't contain the value, we've re-rendered without\n      // the value, so don't render it. Then, only render if the value is\n      // higher-priority than what's already been rendered.\n      if (index > -1 && index < state.lastRenderedIndex) {\n        state.lastRenderedIndex = index;\n        part.setValue(resolvedValue);\n        part.commit();\n      }\n    });\n  }\n});\n","import {\n  LitElement,\n  TemplateResult,\n  html,\n  customElement,\n  CSSResultArray,\n  css,\n  property,\n} from \"lit-element\";\nimport { until } from \"lit-html/directives/until\";\nimport \"@material/mwc-button\";\n\nimport \"../../../layouts/hass-subpage\";\nimport { haStyle } from \"../../../resources/styles\";\nimport \"../../../components/ha-card\";\nimport { HomeAssistant } from \"../../../types\";\nimport { fireEvent } from \"../../../common/dom/fire_event\";\nimport { navigate } from \"../../../common/navigate\";\nimport {\n  User,\n  deleteUser,\n  updateUser,\n  SYSTEM_GROUP_ID_USER,\n  SYSTEM_GROUP_ID_ADMIN,\n} from \"../../../data/user\";\nimport { showSaveSuccessToast } from \"../../../util/toast-saved-success\";\n\ndeclare global {\n  interface HASSDomEvents {\n    \"reload-users\": undefined;\n  }\n}\n\nconst GROUPS = [SYSTEM_GROUP_ID_USER, SYSTEM_GROUP_ID_ADMIN];\n\n@customElement(\"ha-user-editor\")\nclass HaUserEditor extends LitElement {\n  @property() public hass?: HomeAssistant;\n  @property() public user?: User;\n\n  protected render(): TemplateResult | void {\n    const hass = this.hass;\n    const user = this.user;\n    if (!hass || !user) {\n      return html``;\n    }\n\n    return html`\n      <hass-subpage\n        .header=${hass.localize(\"ui.panel.config.users.editor.caption\")}\n      >\n        <ha-card .header=${this._name}>\n          <table class=\"card-content\">\n            <tr>\n              <td>${hass.localize(\"ui.panel.config.users.editor.id\")}</td>\n              <td>${user.id}</td>\n            </tr>\n            <tr>\n              <td>${hass.localize(\"ui.panel.config.users.editor.owner\")}</td>\n              <td>${user.is_owner}</td>\n            </tr>\n            <tr>\n              <td>${hass.localize(\"ui.panel.config.users.editor.group\")}</td>\n              <td>\n                <select\n                  @change=${this._handleGroupChange}\n                  .value=${until(\n                    this.updateComplete.then(() => user.group_ids[0])\n                  )}\n                >\n                  ${GROUPS.map(\n                    (groupId) => html`\n                      <option value=${groupId}>\n                        ${hass.localize(`groups.${groupId}`)}\n                      </option>\n                    `\n                  )}\n                </select>\n              </td>\n            </tr>\n            ${user.group_ids[0] === SYSTEM_GROUP_ID_USER\n              ? html`\n                  <tr>\n                    <td colspan=\"2\" class=\"user-experiment\">\n                      The users group is a work in progress. The user will be\n                      unable to administer the instance via the UI. We're still\n                      auditing all management API endpoints to ensure that they\n                      correctly limit access to administrators.\n                    </td>\n                  </tr>\n                `\n              : \"\"}\n\n            <tr>\n              <td>${hass.localize(\"ui.panel.config.users.editor.active\")}</td>\n              <td>${user.is_active}</td>\n            </tr>\n            <tr>\n              <td>\n                ${hass.localize(\n                  \"ui.panel.config.users.editor.system_generated\"\n                )}\n              </td>\n              <td>${user.system_generated}</td>\n            </tr>\n          </table>\n\n          <div class=\"card-actions\">\n            <mwc-button @click=${this._handleRenameUser}>\n              ${hass.localize(\"ui.panel.config.users.editor.rename_user\")}\n            </mwc-button>\n            <mwc-button\n              class=\"warning\"\n              @click=${this._deleteUser}\n              .disabled=${user.system_generated}\n            >\n              ${hass.localize(\"ui.panel.config.users.editor.delete_user\")}\n            </mwc-button>\n            ${user.system_generated\n              ? html`\n                  ${hass.localize(\n                    \"ui.panel.config.users.editor.system_generated_users_not_removable\"\n                  )}\n                `\n              : \"\"}\n          </div>\n        </ha-card>\n      </hass-subpage>\n    `;\n  }\n\n  private get _name() {\n    return (\n      this.user &&\n      (this.user.name ||\n        this.hass!.localize(\"ui.panel.config.users.editor.unnamed_user\"))\n    );\n  }\n\n  private async _handleRenameUser(ev): Promise<void> {\n    ev.currentTarget.blur();\n    const newName = prompt(\n      this.hass!.localize(\"ui.panel.config.users.editor.enter_new_name\"),\n      this.user!.name\n    );\n    if (newName === null || newName === this.user!.name) {\n      return;\n    }\n\n    try {\n      await updateUser(this.hass!, this.user!.id, {\n        name: newName,\n      });\n      fireEvent(this, \"reload-users\");\n    } catch (err) {\n      alert(\n        `${this.hass!.localize(\n          \"ui.panel.config.users.editor.user_rename_failed\"\n        )} ${err.message}`\n      );\n    }\n  }\n\n  private async _handleGroupChange(ev): Promise<void> {\n    const selectEl = ev.currentTarget as HTMLSelectElement;\n    const newGroup = selectEl.value;\n    try {\n      await updateUser(this.hass!, this.user!.id, {\n        group_ids: [newGroup],\n      });\n      showSaveSuccessToast(this, this.hass!);\n      fireEvent(this, \"reload-users\");\n    } catch (err) {\n      alert(\n        `${this.hass!.localize(\n          \"ui.panel.config.users.editor.group_update_failed\"\n        )} ${err.message}`\n      );\n      selectEl.value = this.user!.group_ids[0];\n    }\n  }\n\n  private async _deleteUser(ev): Promise<void> {\n    if (\n      !confirm(\n        this.hass!.localize(\n          \"ui.panel.config.users.editor.confirm_user_deletion\",\n          \"name\",\n          this._name\n        )\n      )\n    ) {\n      ev.target.blur();\n      return;\n    }\n    try {\n      await deleteUser(this.hass!, this.user!.id);\n    } catch (err) {\n      alert(err.code);\n      return;\n    }\n    fireEvent(this, \"reload-users\");\n    navigate(this, \"/config/users\");\n  }\n\n  static get styles(): CSSResultArray {\n    return [\n      haStyle,\n      css`\n        .card-actions {\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n        }\n        ha-card {\n          max-width: 600px;\n          margin: 0 auto 16px;\n        }\n        hass-subpage ha-card:first-of-type {\n          direction: ltr;\n        }\n        table {\n          width: 100%;\n        }\n        td {\n          vertical-align: top;\n        }\n        .user-experiment {\n          padding: 8px 0;\n        }\n      `,\n    ];\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-user-editor\": HaUserEditor;\n  }\n}\n","import \"@polymer/app-route/app-route\";\nimport { timeOut } from \"@polymer/polymer/lib/utils/async\";\nimport { Debouncer } from \"@polymer/polymer/lib/utils/debounce\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport NavigateMixin from \"../../../mixins/navigate-mixin\";\n\nimport \"./ha-config-user-picker\";\nimport \"./ha-user-editor\";\nimport { fireEvent } from \"../../../common/dom/fire_event\";\nimport { fetchUsers } from \"../../../data/user\";\n\n/*\n * @appliesMixin NavigateMixin\n */\nclass HaConfigUsers extends NavigateMixin(PolymerElement) {\n  static get template() {\n    return html`\n      <app-route\n        route=\"[[route]]\"\n        pattern=\"/:user\"\n        data=\"{{_routeData}}\"\n      ></app-route>\n\n      <template is=\"dom-if\" if='[[_equals(_routeData.user, \"picker\")]]'>\n        <ha-config-user-picker\n          hass=\"[[hass]]\"\n          users=\"[[_users]]\"\n        ></ha-config-user-picker>\n      </template>\n      <template\n        is=\"dom-if\"\n        if='[[!_equals(_routeData.user, \"picker\")]]'\n        restamp\n      >\n        <ha-user-editor\n          hass=\"[[hass]]\"\n          user=\"[[_computeUser(_users, _routeData.user)]]\"\n        ></ha-user-editor>\n      </template>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      route: {\n        type: Object,\n        observer: \"_checkRoute\",\n      },\n      _routeData: Object,\n      _user: {\n        type: Object,\n        value: null,\n      },\n      _users: {\n        type: Array,\n        value: null,\n      },\n    };\n  }\n\n  ready() {\n    super.ready();\n    this._loadData();\n    this.addEventListener(\"reload-users\", () => this._loadData());\n  }\n\n  _handlePickUser(ev) {\n    this._user = ev.detail.user;\n  }\n\n  _checkRoute(route) {\n    // prevent list getting under toolbar\n    fireEvent(this, \"iron-resize\");\n\n    this._debouncer = Debouncer.debounce(\n      this._debouncer,\n      timeOut.after(0),\n      () => {\n        if (route.path === \"\") {\n          this.navigate(`${route.prefix}/picker`, true);\n        }\n      }\n    );\n  }\n\n  _computeUser(users, userId) {\n    return users && users.filter((u) => u.id === userId)[0];\n  }\n\n  _equals(a, b) {\n    return a === b;\n  }\n\n  async _loadData() {\n    this._users = await fetchUsers(this.hass);\n  }\n}\n\ncustomElements.define(\"ha-config-users\", HaConfigUsers);\n"],"sourceRoot":""}