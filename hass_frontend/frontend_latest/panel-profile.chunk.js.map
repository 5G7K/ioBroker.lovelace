{"version":3,"sources":["webpack:///./src/common/config/is_component_loaded.ts","webpack:///./src/common/datetime/format_date_time.ts","webpack:///./src/components/ha-paper-dropdown-menu.ts","webpack:///./src/components/ha-push-notifications-toggle.js","webpack:///./src/data/notify_html5.ts","webpack:///./src/mixins/events-mixin.js","webpack:///./src/mixins/localize-mixin.js","webpack:///./src/panels/profile/ha-change-password-card.js","webpack:///./src/panels/profile/ha-long-lived-access-tokens-card.js","webpack:///./src/panels/profile/ha-mfa-modules-card.js","webpack:///./src/panels/profile/ha-panel-profile.js","webpack:///./src/panels/profile/ha-pick-language-row.js","webpack:///./src/panels/profile/ha-pick-theme-row.js","webpack:///./src/panels/profile/ha-push-notifications-row.js","webpack:///./src/panels/profile/ha-refresh-tokens-card.js","webpack:///./src/panels/profile/ha-settings-row.js"],"names":["isComponentLoaded","hass","component","config","components","indexOf","toLocaleStringSupportsOptions","Date","toLocaleString","e","name","dateObj","locales","year","month","day","hour","minute","fecha","format","paperDropdownClass","customElements","get","HaPaperDropdownClass","ready","setTimeout","window","getComputedStyle","direction","style","textAlign","define","pushSupported","navigator","document","location","protocol","hostname","HaPushNotificationsToggle","EventsMixin","PolymerElement","template","html","properties","type","Object","value","disabled","Boolean","pushChecked","Notification","permission","loading","connectedCallback","reg","serviceWorker","pushManager","getSubscription","then","subscription","err","handlePushChange","event","target","checked","subscribePushNotifications","unsubscribePushNotifications","sub","browserName","userAgent","toLowerCase","prompt","applicationServerKey","getAppKey","ex","subscribe","userVisibleOnly","callApi","browser","message","unsubscribe","console","error","fire","_compDisabled","urlBase64ToUint8Array","base64String","padding","repeat","length","base64","replace","rawData","atob","outputArray","Uint8Array","i","charCodeAt","res","callWS","dedupingMixin","superClass","detail","options","fireEvent","node","localize","Function","computed","__computeLocalize","HaChangePasswordCard","LocalizeMixin","_loading","_statusMsg","String","_errorMsg","_currentPassword","_password1","_password2","addEventListener","ev","keyCode","_changePassword","current_password","new_password","setProperties","HaLongLivedTokens","refreshTokens","Array","_tokens","_computeTokens","filter","tkn","reverse","_formatTitle","_formatCreatedAt","created","formatDateTime","language","_handleCreate","token","lifespan","client_name","alert","_handleDelete","confirm","model","item","refresh_token_id","id","registeredDialog","HaMfaModulesCard","mfaModules","dialogShowEvent","dialogTag","dialogImport","_enable","mfaModuleId","module","dialogClosedCallback","_refreshCurrentUser","_disable","mfa_module_id","HaPanelProfile","narrow","_refreshTokens","_refreshRefreshTokens","_handleLogOut","_canChangePassword","user","credentials","some","cred","auth_provider_type","HaPickLanguageRow","languageSelection","observer","languages","observers","computeLanguages","translationMetadata","translations","keys","map","key","setLanguageSelection","languageSelectionChanged","newVal","HaPickThemeRow","_hasThemes","themes","selectedTheme","Number","_compHasThemes","_computeThemes","concat","sort","selectionChanged","selection","HaPushNotificationsRow","_platformLoaded","_pushSupported","_error","_compPlatformLoaded","_compError","platformLoaded","pushSupported_","_description","HaRefreshTokens","clientId","_formatLastUsed","last_used_at","last_used_ip","client_id","HaSettingsRow","reflectToAttribute","threeLine"],"mappings":"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","file":"panel-profile.chunk.js","sourcesContent":["import { HomeAssistant } from \"../../types\";\n\n/** Return if a component is loaded. */\nexport default function isComponentLoaded(\n  hass: HomeAssistant,\n  component: string\n): boolean {\n  return hass && hass.config.components.indexOf(component) !== -1;\n}\n","import fecha from \"fecha\";\n\n// Check for support of native locale string options\nfunction toLocaleStringSupportsOptions() {\n  try {\n    new Date().toLocaleString(\"i\");\n  } catch (e) {\n    return e.name === \"RangeError\";\n  }\n  return false;\n}\n\nexport default (toLocaleStringSupportsOptions()\n  ? (dateObj: Date, locales: string) =>\n      dateObj.toLocaleString(locales, {\n        year: \"numeric\",\n        month: \"long\",\n        day: \"numeric\",\n        hour: \"numeric\",\n        minute: \"2-digit\",\n      })\n  : (dateObj: Date) => fecha.format(dateObj, \"haDateTime\"));\n","import \"@polymer/paper-dropdown-menu/paper-dropdown-menu\";\nimport { Constructor } from \"lit-element\";\nimport { PolymerElement } from \"@polymer/polymer\";\n\nconst paperDropdownClass = customElements.get(\n  \"paper-dropdown-menu\"\n) as Constructor<PolymerElement>;\n\n// patches paper drop down to properly support RTL - https://github.com/PolymerElements/paper-dropdown-menu/issues/183\nexport class HaPaperDropdownClass extends paperDropdownClass {\n  public ready() {\n    super.ready();\n    // wait to check for direction since otherwise direction is wrong even though top level is RTL\n    setTimeout(() => {\n      if (window.getComputedStyle(this).direction === \"rtl\") {\n        this.style.textAlign = \"right\";\n      }\n    }, 100);\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-paper-dropdown-menu\": HaPaperDropdownClass;\n  }\n}\n\ncustomElements.define(\"ha-paper-dropdown-menu\", HaPaperDropdownClass);\n","import \"@polymer/paper-toggle-button/paper-toggle-button\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport { getAppKey } from \"../data/notify_html5\";\n\nimport { EventsMixin } from \"../mixins/events-mixin\";\n\nexport const pushSupported =\n  \"serviceWorker\" in navigator &&\n  \"PushManager\" in window &&\n  (document.location.protocol === \"https:\" ||\n    document.location.hostname === \"localhost\" ||\n    document.location.hostname === \"127.0.0.1\");\n\n/*\n * @appliesMixin EventsMixin\n */\nclass HaPushNotificationsToggle extends EventsMixin(PolymerElement) {\n  static get template() {\n    return html`\n      <paper-toggle-button\n        disabled=\"[[_compDisabled(disabled, loading)]]\"\n        checked=\"{{pushChecked}}\"\n        on-change=\"handlePushChange\"\n      ></paper-toggle-button>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: { type: Object, value: null },\n      disabled: {\n        type: Boolean,\n        value: false,\n      },\n      pushChecked: {\n        type: Boolean,\n        value:\n          \"Notification\" in window && Notification.permission === \"granted\",\n      },\n      loading: {\n        type: Boolean,\n        value: true,\n      },\n    };\n  }\n\n  async connectedCallback() {\n    super.connectedCallback();\n\n    if (!pushSupported) return;\n\n    try {\n      const reg = await navigator.serviceWorker.ready;\n      if (!reg.pushManager) {\n        return;\n      }\n      reg.pushManager.getSubscription().then((subscription) => {\n        this.loading = false;\n        this.pushChecked = !!subscription;\n      });\n    } catch (err) {\n      // We don't set loading to `false` so we remain disabled\n    }\n  }\n\n  handlePushChange(event) {\n    // Somehow this is triggered on Safari on page load causing\n    // it to get into a loop and crash the page.\n    if (!pushSupported) return;\n\n    if (event.target.checked) {\n      this.subscribePushNotifications();\n    } else {\n      this.unsubscribePushNotifications();\n    }\n  }\n\n  async subscribePushNotifications() {\n    const reg = await navigator.serviceWorker.ready;\n    let sub;\n\n    try {\n      let browserName;\n      if (navigator.userAgent.toLowerCase().indexOf(\"firefox\") > -1) {\n        browserName = \"firefox\";\n      } else {\n        browserName = \"chrome\";\n      }\n\n      const name = prompt(\"What should this device be called ?\");\n      if (name == null) {\n        this.pushChecked = false;\n        return;\n      }\n\n      let applicationServerKey;\n      try {\n        applicationServerKey = await getAppKey(this.hass);\n      } catch (ex) {\n        applicationServerKey = null;\n      }\n\n      if (applicationServerKey) {\n        sub = await reg.pushManager.subscribe({\n          userVisibleOnly: true,\n          applicationServerKey,\n        });\n      } else {\n        sub = await reg.pushManager.subscribe({ userVisibleOnly: true });\n      }\n\n      await this.hass.callApi(\"POST\", \"notify.html5\", {\n        subscription: sub,\n        browser: browserName,\n        name,\n      });\n    } catch (err) {\n      const message = err.message || \"Notification registration failed.\";\n      if (sub) {\n        await sub.unsubscribe();\n      }\n\n      // eslint-disable-next-line\n      console.error(err);\n\n      this.fire(\"hass-notification\", { message });\n      this.pushChecked = false;\n    }\n  }\n\n  async unsubscribePushNotifications() {\n    const reg = await navigator.serviceWorker.ready;\n\n    try {\n      const sub = await reg.pushManager.getSubscription();\n\n      if (!sub) return;\n\n      await this.hass.callApi(\"DELETE\", \"notify.html5\", { subscription: sub });\n      await sub.unsubscribe();\n    } catch (err) {\n      const message =\n        err.message || \"Failed unsubscribing for push notifications.\";\n\n      // eslint-disable-next-line\n      console.error(\"Error in unsub push\", err);\n\n      this.fire(\"hass-notification\", { message });\n      this.pushChecked = true;\n    }\n  }\n\n  _compDisabled(disabled, loading) {\n    return disabled || loading;\n  }\n}\n\ncustomElements.define(\n  \"ha-push-notifications-toggle\",\n  HaPushNotificationsToggle\n);\n","import { HomeAssistant } from \"../types\";\n\nfunction urlBase64ToUint8Array(base64String) {\n  const padding = \"=\".repeat((4 - (base64String.length % 4)) % 4);\n  const base64 = (base64String + padding).replace(/-/g, \"+\").replace(/_/g, \"/\");\n\n  const rawData = window.atob(base64);\n  const outputArray = new Uint8Array(rawData.length);\n\n  for (let i = 0; i < rawData.length; ++i) {\n    outputArray[i] = rawData.charCodeAt(i);\n  }\n  return outputArray;\n}\n\nexport const getAppKey = async (hass: HomeAssistant) => {\n  const res = await hass.callWS<string>({\n    type: \"notify/html5/appkey\",\n  });\n  return res ? urlBase64ToUint8Array(res) : null;\n};\n","import { dedupingMixin } from \"@polymer/polymer/lib/utils/mixin\";\n\nimport { fireEvent } from \"../common/dom/fire_event\";\n\n// Polymer legacy event helpers used courtesy of the Polymer project.\n//\n// Copyright (c) 2017 The Polymer Authors. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without\n// modification, are permitted provided that the following conditions are\n// met:\n//\n//    * Redistributions of source code must retain the above copyright\n// notice, this list of conditions and the following disclaimer.\n//    * Redistributions in binary form must reproduce the above\n// copyright notice, this list of conditions and the following disclaimer\n// in the documentation and/or other materials provided with the\n// distribution.\n//    * Neither the name of Google Inc. nor the names of its\n// contributors may be used to endorse or promote products derived from\n// this software without specific prior written permission.\n//\n// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n// \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n// LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n// A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n// OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n// SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n// LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n// DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n// THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n// (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n// OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n\n/* @polymerMixin */\nexport const EventsMixin = dedupingMixin(\n  (superClass) =>\n    class extends superClass {\n      /**\n   * Dispatches a custom event with an optional detail value.\n   *\n   * @param {string} type Name of event type.\n   * @param {*=} detail Detail value containing event-specific\n   *   payload.\n   * @param {{ bubbles: (boolean|undefined),\n               cancelable: (boolean|undefined),\n                composed: (boolean|undefined) }=}\n    *  options Object specifying options.  These may include:\n    *  `bubbles` (boolean, defaults to `true`),\n    *  `cancelable` (boolean, defaults to false), and\n    *  `node` on which to fire the event (HTMLElement, defaults to `this`).\n    * @return {Event} The new event that was fired.\n    */\n      fire(type, detail, options) {\n        options = options || {};\n        return fireEvent(options.node || this, type, detail, options);\n      }\n    }\n);\n","import { dedupingMixin } from \"@polymer/polymer/lib/utils/mixin\";\n/**\n * Polymer Mixin to enable a localize function powered by language/resources from hass object.\n *\n * @polymerMixin\n */\nexport default dedupingMixin(\n  (superClass) =>\n    class extends superClass {\n      static get properties() {\n        return {\n          hass: Object,\n\n          /**\n           * Translates a string to the current `language`. Any parameters to the\n           * string should be passed in order, as follows:\n           * `localize(stringKey, param1Name, param1Value, param2Name, param2Value)`\n           */\n          localize: {\n            type: Function,\n            computed: \"__computeLocalize(hass.localize)\",\n          },\n        };\n      }\n\n      __computeLocalize(localize) {\n        return localize;\n      }\n    }\n);\n","import \"@material/mwc-button\";\nimport \"@polymer/paper-dialog/paper-dialog\";\nimport \"@polymer/paper-spinner/paper-spinner\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\nimport \"../../components/ha-card\";\n\nimport LocalizeMixin from \"../../mixins/localize-mixin\";\n\nimport \"../../resources/ha-style\";\n\n/*\n * @appliesMixin LocalizeMixin\n */\nclass HaChangePasswordCard extends LocalizeMixin(PolymerElement) {\n  static get template() {\n    return html`\n      <style include=\"ha-style\">\n        .error {\n          color: red;\n        }\n        .status {\n          color: var(--primary-color);\n        }\n        .error,\n        .status {\n          position: absolute;\n          top: -4px;\n        }\n        .currentPassword {\n          margin-top: -4px;\n        }\n      </style>\n      <div>\n        <ha-card\n          header=\"[[localize('ui.panel.profile.change_password.header')]]\"\n        >\n          <div class=\"card-content\">\n            <template is=\"dom-if\" if=\"[[_errorMsg]]\">\n              <div class=\"error\">[[_errorMsg]]</div>\n            </template>\n            <template is=\"dom-if\" if=\"[[_statusMsg]]\">\n              <div class=\"status\">[[_statusMsg]]</div>\n            </template>\n            <paper-input\n              class=\"currentPassword\"\n              label=\"[[localize('ui.panel.profile.change_password.current_password')]]\"\n              type=\"password\"\n              value=\"{{_currentPassword}}\"\n              required\n              auto-validate\n              error-message=\"[[localize('ui.panel.profile.change_password.error_required')]]\"\n            ></paper-input>\n            <template is=\"dom-if\" if=\"[[_currentPassword]]\">\n              <paper-input\n                label=\"[[localize('ui.panel.profile.change_password.new_password')]]\"\n                type=\"password\"\n                value=\"{{_password1}}\"\n                required\n                auto-validate\n                error-message=\"[[localize('ui.panel.profile.change_password.error_required')]]\"\n              ></paper-input>\n              <paper-input\n                label=\"[[localize('ui.panel.profile.change_password.confirm_new_password')]]\"\n                type=\"password\"\n                value=\"{{_password2}}\"\n                required\n                auto-validate\n                error-message=\"[[localize('ui.panel.profile.change_password.error_required')]]\"\n              ></paper-input>\n            </template>\n          </div>\n          <div class=\"card-actions\">\n            <template is=\"dom-if\" if=\"[[_loading]]\">\n              <div><paper-spinner active></paper-spinner></div>\n            </template>\n            <template is=\"dom-if\" if=\"[[!_loading]]\">\n              <mwc-button on-click=\"_changePassword\"\n                >[[localize('ui.panel.profile.change_password.submit')]]</mwc-button\n              >\n            </template>\n          </div>\n        </ha-card>\n      </div>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n\n      _loading: {\n        type: Boolean,\n        value: false,\n      },\n\n      // Error message when can't talk to server etc\n      _statusMsg: String,\n      _errorMsg: String,\n\n      _currentPassword: String,\n      _password1: String,\n      _password2: String,\n    };\n  }\n\n  ready() {\n    super.ready();\n    this.addEventListener(\"keypress\", (ev) => {\n      this._statusMsg = null;\n      if (ev.keyCode === 13) {\n        this._changePassword();\n      }\n    });\n  }\n\n  async _changePassword() {\n    this._statusMsg = null;\n    if (!this._currentPassword || !this._password1 || !this._password2) return;\n\n    if (this._password1 !== this._password2) {\n      this._errorMsg = \"New password confirmation doesn't match\";\n      return;\n    }\n\n    if (this._currentPassword === this._password1) {\n      this._errorMsg = \"New password must be different than current password\";\n      return;\n    }\n\n    this._loading = true;\n    this._errorMsg = null;\n\n    try {\n      await this.hass.callWS({\n        type: \"config/auth_provider/homeassistant/change_password\",\n        current_password: this._currentPassword,\n        new_password: this._password1,\n      });\n\n      this.setProperties({\n        _statusMsg: \"Password changed successfully\",\n        _currentPassword: null,\n        _password1: null,\n        _password2: null,\n      });\n    } catch (err) {\n      this._errorMsg = err.message;\n    }\n\n    this._loading = false;\n  }\n}\n\ncustomElements.define(\"ha-change-password-card\", HaChangePasswordCard);\n","import \"@material/mwc-button\";\n\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\nimport { EventsMixin } from \"../../mixins/events-mixin\";\nimport LocalizeMixin from \"../../mixins/localize-mixin\";\nimport formatDateTime from \"../../common/datetime/format_date_time\";\nimport \"../../components/ha-card\";\n\nimport \"../../resources/ha-style\";\n\nimport \"./ha-settings-row\";\n\n/*\n * @appliesMixin EventsMixin\n * @appliesMixin LocalizeMixin\n */\nclass HaLongLivedTokens extends LocalizeMixin(EventsMixin(PolymerElement)) {\n  static get template() {\n    return html`\n      <style include=\"ha-style\">\n        .card-content {\n          margin: -1em 0;\n        }\n        a {\n          color: var(--primary-color);\n        }\n        paper-icon-button {\n          color: var(--primary-text-color);\n        }\n      </style>\n      <ha-card\n        header=\"[[localize('ui.panel.profile.long_lived_access_tokens.header')]]\"\n      >\n        <div class=\"card-content\">\n          <p>\n            [[localize('ui.panel.profile.long_lived_access_tokens.description')]]\n            <a\n              href=\"https://developers.home-assistant.io/docs/en/auth_api.html#making-authenticated-requests\"\n              target=\"_blank\"\n            >\n              [[localize('ui.panel.profile.long_lived_access_tokens.learn_auth_requests')]]\n            </a>\n          </p>\n          <template is=\"dom-if\" if=\"[[!_tokens.length]]\">\n            <p>\n              [[localize('ui.panel.profile.long_lived_access_tokens.empty_state')]]\n            </p>\n          </template>\n        </div>\n        <template is=\"dom-repeat\" items=\"[[_tokens]]\">\n          <ha-settings-row two-line>\n            <span slot=\"heading\">[[item.client_name]]</span>\n            <div slot=\"description\">[[_formatCreatedAt(item.created_at)]]</div>\n            <paper-icon-button\n              icon=\"hass:delete\"\n              on-click=\"_handleDelete\"\n            ></paper-icon-button>\n          </ha-settings-row>\n        </template>\n        <div class=\"card-actions\">\n          <mwc-button on-click=\"_handleCreate\">\n            [[localize('ui.panel.profile.long_lived_access_tokens.create')]]\n          </mwc-button>\n        </div>\n      </ha-card>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      refreshTokens: Array,\n      _tokens: {\n        type: Array,\n        computed: \"_computeTokens(refreshTokens)\",\n      },\n    };\n  }\n\n  _computeTokens(refreshTokens) {\n    return refreshTokens\n      .filter((tkn) => tkn.type === \"long_lived_access_token\")\n      .reverse();\n  }\n\n  _formatTitle(name) {\n    return this.localize(\n      \"ui.panel.profile.long_lived_access_tokens.token_title\",\n      \"name\",\n      name\n    );\n  }\n\n  _formatCreatedAt(created) {\n    return this.localize(\n      \"ui.panel.profile.long_lived_access_tokens.created_at\",\n      \"date\",\n      formatDateTime(new Date(created), this.hass.language)\n    );\n  }\n\n  async _handleCreate() {\n    const name = prompt(\n      this.localize(\"ui.panel.profile.long_lived_access_tokens.prompt_name\")\n    );\n    if (!name) return;\n    try {\n      const token = await this.hass.callWS({\n        type: \"auth/long_lived_access_token\",\n        lifespan: 3650,\n        client_name: name,\n      });\n      prompt(\n        this.localize(\n          \"ui.panel.profile.long_lived_access_tokens.prompt_copy_token\"\n        ),\n        token\n      );\n      this.fire(\"hass-refresh-tokens\");\n    } catch (err) {\n      // eslint-disable-next-line\n      console.error(err);\n      alert(\n        this.localize(\"ui.panel.profile.long_lived_access_tokens.create_failed\")\n      );\n    }\n  }\n\n  async _handleDelete(ev) {\n    if (\n      !confirm(\n        this.localize(\n          \"ui.panel.profile.long_lived_access_tokens.confirm_delete\",\n          \"name\",\n          ev.model.item.client_name\n        )\n      )\n    ) {\n      return;\n    }\n    try {\n      await this.hass.callWS({\n        type: \"auth/delete_refresh_token\",\n        refresh_token_id: ev.model.item.id,\n      });\n      this.fire(\"hass-refresh-tokens\");\n    } catch (err) {\n      // eslint-disable-next-line\n      console.error(err);\n      alert(\n        this.localize(\"ui.panel.profile.long_lived_access_tokens.delete_failed\")\n      );\n    }\n  }\n}\n\ncustomElements.define(\"ha-long-lived-access-tokens-card\", HaLongLivedTokens);\n","import \"@material/mwc-button\";\nimport \"@polymer/paper-item/paper-item-body\";\nimport \"@polymer/paper-item/paper-item\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\nimport \"../../components/ha-card\";\n\nimport \"../../resources/ha-style\";\n\nimport { EventsMixin } from \"../../mixins/events-mixin\";\nimport LocalizeMixin from \"../../mixins/localize-mixin\";\n\nlet registeredDialog = false;\n\n/*\n * @appliesMixin EventsMixin\n * @appliesMixin LocalizeMixin\n */\nclass HaMfaModulesCard extends EventsMixin(LocalizeMixin(PolymerElement)) {\n  static get template() {\n    return html`\n      <style include=\"iron-flex ha-style\">\n        .error {\n          color: red;\n        }\n        .status {\n          color: var(--primary-color);\n        }\n        .error,\n        .status {\n          position: absolute;\n          top: -4px;\n        }\n        mwc-button {\n          margin-right: -0.57em;\n        }\n      </style>\n      <ha-card header=\"[[localize('ui.panel.profile.mfa.header')]]\">\n        <template is=\"dom-repeat\" items=\"[[mfaModules]]\" as=\"module\">\n          <paper-item>\n            <paper-item-body two-line=\"\">\n              <div>[[module.name]]</div>\n              <div secondary=\"\">[[module.id]]</div>\n            </paper-item-body>\n            <template is=\"dom-if\" if=\"[[module.enabled]]\">\n              <mwc-button on-click=\"_disable\"\n                >[[localize('ui.panel.profile.mfa.disable')]]</mwc-button\n              >\n            </template>\n            <template is=\"dom-if\" if=\"[[!module.enabled]]\">\n              <mwc-button on-click=\"_enable\"\n                >[[localize('ui.panel.profile.mfa.enable')]]</mwc-button\n              >\n            </template>\n          </paper-item>\n        </template>\n      </ha-card>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n\n      _loading: {\n        type: Boolean,\n        value: false,\n      },\n\n      // Error message when can't talk to server etc\n      _statusMsg: String,\n      _errorMsg: String,\n\n      mfaModules: Array,\n    };\n  }\n\n  connectedCallback() {\n    super.connectedCallback();\n\n    if (!registeredDialog) {\n      registeredDialog = true;\n      this.fire(\"register-dialog\", {\n        dialogShowEvent: \"show-mfa-module-setup-flow\",\n        dialogTag: \"ha-mfa-module-setup-flow\",\n        dialogImport: () =>\n          import(/* webpackChunkName: \"ha-mfa-module-setup-flow\" */ \"./ha-mfa-module-setup-flow\"),\n      });\n    }\n  }\n\n  _enable(ev) {\n    this.fire(\"show-mfa-module-setup-flow\", {\n      hass: this.hass,\n      mfaModuleId: ev.model.module.id,\n      dialogClosedCallback: () => this._refreshCurrentUser(),\n    });\n  }\n\n  _disable(ev) {\n    if (\n      !confirm(\n        this.localize(\n          \"ui.panel.profile.mfa.confirm_disable\",\n          \"name\",\n          ev.model.module.name\n        )\n      )\n    ) {\n      return;\n    }\n\n    const mfaModuleId = ev.model.module.id;\n\n    this.hass\n      .callWS({\n        type: \"auth/depose_mfa\",\n        mfa_module_id: mfaModuleId,\n      })\n      .then(() => {\n        this._refreshCurrentUser();\n      });\n  }\n\n  _refreshCurrentUser() {\n    this.fire(\"hass-refresh-current-user\");\n  }\n}\n\ncustomElements.define(\"ha-mfa-modules-card\", HaMfaModulesCard);\n","import \"@polymer/app-layout/app-header-layout/app-header-layout\";\nimport \"@polymer/app-layout/app-header/app-header\";\nimport \"@polymer/paper-item/paper-item-body\";\nimport \"@polymer/paper-item/paper-item\";\nimport \"@material/mwc-button\";\nimport \"@polymer/app-layout/app-toolbar/app-toolbar\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport \"../../components/ha-card\";\nimport \"../../components/ha-menu-button\";\nimport \"../../resources/ha-style\";\n\nimport { EventsMixin } from \"../../mixins/events-mixin\";\nimport LocalizeMixin from \"../../mixins/localize-mixin\";\n\nimport \"./ha-change-password-card\";\nimport \"./ha-mfa-modules-card\";\nimport \"./ha-refresh-tokens-card\";\nimport \"./ha-long-lived-access-tokens-card\";\n\nimport \"./ha-pick-language-row\";\nimport \"./ha-pick-theme-row\";\nimport \"./ha-push-notifications-row\";\n\n/*\n * @appliesMixin EventsMixin\n * @appliesMixin LocalizeMixin\n */\nclass HaPanelProfile extends EventsMixin(LocalizeMixin(PolymerElement)) {\n  static get template() {\n    return html`\n      <style include=\"ha-style\">\n        :host {\n          -ms-user-select: initial;\n          -webkit-user-select: initial;\n          -moz-user-select: initial;\n        }\n\n        .content {\n          display: block;\n          max-width: 600px;\n          margin: 0 auto;\n        }\n\n        .content > * {\n          display: block;\n          margin: 24px 0;\n        }\n      </style>\n\n      <app-header-layout has-scrolling-region>\n        <app-header slot=\"header\" fixed>\n          <app-toolbar>\n            <ha-menu-button></ha-menu-button>\n            <div main-title>[[localize('panel.profile')]]</div>\n          </app-toolbar>\n        </app-header>\n\n        <div class=\"content\">\n          <ha-card header=\"[[hass.user.name]]\">\n            <div class=\"card-content\">\n              [[localize('ui.panel.profile.current_user', 'fullName',\n              hass.user.name)]]\n              <template is=\"dom-if\" if=\"[[hass.user.is_owner]]\"\n                >[[localize('ui.panel.profile.is_owner')]]</template\n              >\n            </div>\n\n            <hello-world hass=\"[[hass]]\"></hello-world>\n\n            <ha-pick-language-row\n              narrow=\"[[narrow]]\"\n              hass=\"[[hass]]\"\n            ></ha-pick-language-row>\n            <ha-pick-theme-row\n              narrow=\"[[narrow]]\"\n              hass=\"[[hass]]\"\n            ></ha-pick-theme-row>\n            <ha-push-notifications-row\n              narrow=\"[[narrow]]\"\n              hass=\"[[hass]]\"\n            ></ha-push-notifications-row>\n\n            <div class=\"card-actions\">\n              <mwc-button class=\"warning\" on-click=\"_handleLogOut\"\n                >[[localize('ui.panel.profile.logout')]]</mwc-button\n              >\n            </div>\n          </ha-card>\n\n          <template is=\"dom-if\" if=\"[[_canChangePassword(hass.user)]]\">\n            <ha-change-password-card hass=\"[[hass]]\"></ha-change-password-card>\n          </template>\n\n          <ha-mfa-modules-card\n            hass=\"[[hass]]\"\n            mfa-modules=\"[[hass.user.mfa_modules]]\"\n          ></ha-mfa-modules-card>\n\n          <ha-refresh-tokens-card\n            hass=\"[[hass]]\"\n            refresh-tokens=\"[[_refreshTokens]]\"\n            on-hass-refresh-tokens=\"_refreshRefreshTokens\"\n          ></ha-refresh-tokens-card>\n\n          <ha-long-lived-access-tokens-card\n            hass=\"[[hass]]\"\n            refresh-tokens=\"[[_refreshTokens]]\"\n            on-hass-refresh-tokens=\"_refreshRefreshTokens\"\n          ></ha-long-lived-access-tokens-card>\n        </div>\n      </app-header-layout>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      narrow: Boolean,\n      _refreshTokens: Array,\n    };\n  }\n\n  connectedCallback() {\n    super.connectedCallback();\n    this._refreshRefreshTokens();\n  }\n\n  async _refreshRefreshTokens() {\n    this._refreshTokens = await this.hass.callWS({\n      type: \"auth/refresh_tokens\",\n    });\n  }\n\n  _handleLogOut() {\n    this.fire(\"hass-logout\");\n  }\n\n  _canChangePassword(user) {\n    return user.credentials.some(\n      (cred) => cred.auth_provider_type === \"homeassistant\"\n    );\n  }\n}\n\ncustomElements.define(\"ha-panel-profile\", HaPanelProfile);\n","import \"@polymer/paper-item/paper-item\";\nimport \"@polymer/paper-listbox/paper-listbox\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport \"../../components/ha-paper-dropdown-menu\";\n\nimport { EventsMixin } from \"../../mixins/events-mixin\";\nimport LocalizeMixin from \"../../mixins/localize-mixin\";\n\nimport \"./ha-settings-row\";\n\n/*\n * @appliesMixin LocalizeMixin\n * @appliesMixin EventsMixin\n */\nclass HaPickLanguageRow extends LocalizeMixin(EventsMixin(PolymerElement)) {\n  static get template() {\n    return html`\n      <style>\n        a {\n          color: var(--primary-color);\n        }\n        paper-item {\n          direction: ltr;\n        }\n        paper-item[is-rtl] {\n          direction: rtl;\n        }\n      </style>\n      <ha-settings-row narrow=\"[[narrow]]\">\n        <span slot=\"heading\"\n          >[[localize('ui.panel.profile.language.header')]]</span\n        >\n        <span slot=\"description\">\n          <a\n            href=\"https://developers.home-assistant.io/docs/en/internationalization_translation.html\"\n            target=\"_blank\"\n            >[[localize('ui.panel.profile.language.link_promo')]]</a\n          >\n        </span>\n        <ha-paper-dropdown-menu\n          label=\"[[localize('ui.panel.profile.language.dropdown_label')]]\"\n          dynamic-align=\"\"\n        >\n          <paper-listbox\n            slot=\"dropdown-content\"\n            attr-for-selected=\"language-tag\"\n            selected=\"{{languageSelection}}\"\n          >\n            <template is=\"dom-repeat\" items=\"[[languages]]\">\n              <paper-item language-tag$=\"[[item.key]]\" is-rtl$=\"[[item.isRTL]]\">\n                [[item.nativeName]]\n              </paper-item>\n            </template>\n          </paper-listbox>\n        </ha-paper-dropdown-menu>\n      </ha-settings-row>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      narrow: Boolean,\n      languageSelection: {\n        type: String,\n        observer: \"languageSelectionChanged\",\n      },\n      languages: {\n        type: Array,\n        computed: \"computeLanguages(hass)\",\n      },\n    };\n  }\n\n  static get observers() {\n    return [\"setLanguageSelection(language)\"];\n  }\n\n  computeLanguages(hass) {\n    if (!hass || !hass.translationMetadata) {\n      return [];\n    }\n    const translations = hass.translationMetadata.translations;\n    return Object.keys(translations).map((key) => ({\n      key,\n      ...translations[key],\n    }));\n  }\n\n  setLanguageSelection(language) {\n    this.languageSelection = language;\n  }\n\n  languageSelectionChanged(newVal) {\n    // Only fire event if language was changed. This prevents select updates when\n    // responding to hass changes.\n    if (newVal !== this.hass.language) {\n      this.fire(\"hass-language-select\", { language: newVal });\n    }\n  }\n\n  ready() {\n    super.ready();\n    if (this.hass && this.hass.language) {\n      this.setLanguageSelection(this.hass.language);\n    }\n  }\n}\n\ncustomElements.define(\"ha-pick-language-row\", HaPickLanguageRow);\n","import \"@polymer/paper-item/paper-item\";\nimport \"@polymer/paper-listbox/paper-listbox\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport \"../../components/ha-paper-dropdown-menu\";\n\nimport { EventsMixin } from \"../../mixins/events-mixin\";\nimport LocalizeMixin from \"../../mixins/localize-mixin\";\n\n/*\n * @appliesMixin LocalizeMixin\n * @appliesMixin EventsMixin\n */\nclass HaPickThemeRow extends LocalizeMixin(EventsMixin(PolymerElement)) {\n  static get template() {\n    return html`\n      <style>\n        a {\n          color: var(--primary-color);\n        }\n      </style>\n      <ha-settings-row narrow=\"[[narrow]]\">\n        <span slot=\"heading\"\n          >[[localize('ui.panel.profile.themes.header')]]</span\n        >\n        <span slot=\"description\">\n          <template is=\"dom-if\" if=\"[[!_hasThemes]]\">\n            [[localize('ui.panel.profile.themes.error_no_theme')]]\n          </template>\n          <a\n            href=\"https://www.home-assistant.io/components/frontend/#defining-themes\"\n            target=\"_blank\"\n            >[[localize('ui.panel.profile.themes.link_promo')]]</a\n          >\n        </span>\n        <ha-paper-dropdown-menu\n          label=\"[[localize('ui.panel.profile.themes.dropdown_label')]]\"\n          dynamic-align\n          disabled=\"[[!_hasThemes]]\"\n        >\n          <paper-listbox slot=\"dropdown-content\" selected=\"{{selectedTheme}}\">\n            <template is=\"dom-repeat\" items=\"[[themes]]\" as=\"theme\">\n              <paper-item>[[theme]]</paper-item>\n            </template>\n          </paper-listbox>\n        </ha-paper-dropdown-menu>\n      </ha-settings-row>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      narrow: Boolean,\n      _hasThemes: {\n        type: Boolean,\n        computed: \"_compHasThemes(hass)\",\n      },\n      themes: {\n        type: Array,\n        computed: \"_computeThemes(hass)\",\n      },\n      selectedTheme: {\n        type: Number,\n      },\n    };\n  }\n\n  static get observers() {\n    return [\"selectionChanged(hass, selectedTheme)\"];\n  }\n\n  _compHasThemes(hass) {\n    return (\n      hass.themes &&\n      hass.themes.themes &&\n      Object.keys(hass.themes.themes).length\n    );\n  }\n\n  ready() {\n    super.ready();\n    if (\n      this.hass.selectedTheme &&\n      this.themes.indexOf(this.hass.selectedTheme) > 0\n    ) {\n      this.selectedTheme = this.themes.indexOf(this.hass.selectedTheme);\n    } else if (!this.hass.selectedTheme) {\n      this.selectedTheme = 0;\n    }\n  }\n\n  _computeThemes(hass) {\n    if (!hass) return [];\n    return [\"Backend-selected\", \"default\"].concat(\n      Object.keys(hass.themes.themes).sort()\n    );\n  }\n\n  selectionChanged(hass, selection) {\n    if (selection > 0 && selection < this.themes.length) {\n      if (hass.selectedTheme !== this.themes[selection]) {\n        this.fire(\"settheme\", this.themes[selection]);\n      }\n    } else if (selection === 0 && hass.selectedTheme !== \"\") {\n      this.fire(\"settheme\", \"\");\n    }\n  }\n}\n\ncustomElements.define(\"ha-pick-theme-row\", HaPickThemeRow);\n","import \"@polymer/iron-flex-layout/iron-flex-layout-classes\";\nimport \"@polymer/iron-label/iron-label\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport isComponentLoaded from \"../../common/config/is_component_loaded\";\nimport { pushSupported } from \"../../components/ha-push-notifications-toggle\";\n\nimport LocalizeMixin from \"../../mixins/localize-mixin\";\n\nimport \"./ha-settings-row\";\n\n/*\n * @appliesMixin LocalizeMixin\n */\nclass HaPushNotificationsRow extends LocalizeMixin(PolymerElement) {\n  static get template() {\n    return html`\n      <style>\n        a {\n          color: var(--primary-color);\n        }\n      </style>\n      <ha-settings-row narrow=\"[[narrow]]\">\n        <span slot=\"heading\"\n          >[[localize('ui.panel.profile.push_notifications.header')]]</span\n        >\n        <span slot=\"description\">\n          [[_description(_platformLoaded, _pushSupported)]]\n          <a\n            href=\"https://www.home-assistant.io/components/notify.html5/\"\n            target=\"_blank\"\n            >[[localize('ui.panel.profile.push_notifications.link_promo')]]</a\n          >\n        </span>\n        <ha-push-notifications-toggle\n          hass=\"[[hass]]\"\n          disabled=\"[[_error]]\"\n        ></ha-push-notifications-toggle>\n      </ha-settings-row>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      narrow: Boolean,\n      _platformLoaded: {\n        type: Boolean,\n        computed: \"_compPlatformLoaded(hass)\",\n      },\n      _pushSupported: {\n        type: Boolean,\n        value: pushSupported,\n      },\n      _error: {\n        type: Boolean,\n        computed: \"_compError(_platformLoaded, _pushSupported)\",\n      },\n    };\n  }\n\n  _compPlatformLoaded(hass) {\n    return isComponentLoaded(hass, \"notify.html5\");\n  }\n\n  _compError(platformLoaded, pushSupported_) {\n    return !platformLoaded || !pushSupported_;\n  }\n\n  _description(platformLoaded, pushSupported_) {\n    let key;\n    if (!pushSupported_) {\n      key = \"error_use_https\";\n    } else if (!platformLoaded) {\n      key = \"error_load_platform\";\n    } else {\n      key = \"description\";\n    }\n    return this.localize(`ui.panel.profile.push_notifications.${key}`);\n  }\n}\n\ncustomElements.define(\"ha-push-notifications-row\", HaPushNotificationsRow);\n","import \"@polymer/paper-icon-button/paper-icon-button\";\nimport \"@polymer/paper-tooltip/paper-tooltip\";\n\nimport \"../../components/ha-card\";\n\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\nimport { EventsMixin } from \"../../mixins/events-mixin\";\nimport LocalizeMixin from \"../../mixins/localize-mixin\";\nimport formatDateTime from \"../../common/datetime/format_date_time\";\n\nimport \"./ha-settings-row\";\n\n/*\n * @appliesMixin EventsMixin\n * @appliesMixin LocalizeMixin\n */\nclass HaRefreshTokens extends LocalizeMixin(EventsMixin(PolymerElement)) {\n  static get template() {\n    return html`\n      <style>\n        paper-icon-button {\n          color: var(--primary-text-color);\n        }\n        paper-icon-button[disabled] {\n          color: var(--disabled-text-color);\n        }\n      </style>\n      <ha-card header=\"[[localize('ui.panel.profile.refresh_tokens.header')]]\">\n        <div class=\"card-content\">\n          [[localize('ui.panel.profile.refresh_tokens.description')]]\n        </div>\n        <template is=\"dom-repeat\" items=\"[[_computeTokens(refreshTokens)]]\">\n          <ha-settings-row three-line>\n            <span slot=\"heading\">[[_formatTitle(item.client_id)]]</span>\n            <div slot=\"description\">[[_formatCreatedAt(item.created_at)]]</div>\n            <div slot=\"description\">[[_formatLastUsed(item)]]</div>\n            <div>\n              <template is=\"dom-if\" if=\"[[item.is_current]]\">\n                <paper-tooltip position=\"left\"\n                  >[[localize('ui.panel.profile.refresh_tokens.current_token_tooltip')]]</paper-tooltip\n                >\n              </template>\n              <paper-icon-button\n                icon=\"hass:delete\"\n                on-click=\"_handleDelete\"\n                disabled=\"[[item.is_current]]\"\n              ></paper-icon-button>\n            </div>\n          </ha-settings-row>\n        </template>\n      </ha-card>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      refreshTokens: Array,\n    };\n  }\n\n  _computeTokens(refreshTokens) {\n    return refreshTokens.filter((tkn) => tkn.type === \"normal\").reverse();\n  }\n\n  _formatTitle(clientId) {\n    return this.localize(\n      \"ui.panel.profile.refresh_tokens.token_title\",\n      \"clientId\",\n      clientId\n    );\n  }\n\n  _formatCreatedAt(created) {\n    return this.localize(\n      \"ui.panel.profile.refresh_tokens.created_at\",\n      \"date\",\n      formatDateTime(new Date(created), this.hass.language)\n    );\n  }\n\n  _formatLastUsed(item) {\n    return item.last_used_at\n      ? this.localize(\n          \"ui.panel.profile.refresh_tokens.last_used\",\n          \"date\",\n          formatDateTime(new Date(item.last_used_at), this.hass.language),\n          \"location\",\n          item.last_used_ip\n        )\n      : this.localize(\"ui.panel.profile.refresh_tokens.not_used\");\n  }\n\n  async _handleDelete(ev) {\n    if (\n      !confirm(\n        this.localize(\n          \"ui.panel.profile.refresh_tokens.confirm_delete\",\n          \"name\",\n          ev.model.item.client_id\n        )\n      )\n    ) {\n      return;\n    }\n    try {\n      await this.hass.callWS({\n        type: \"auth/delete_refresh_token\",\n        refresh_token_id: ev.model.item.id,\n      });\n      this.fire(\"hass-refresh-tokens\");\n    } catch (err) {\n      // eslint-disable-next-line\n      console.error(err);\n      alert(this.localize(\"ui.panel.profile.refresh_tokens.delete_failed\"));\n    }\n  }\n}\n\ncustomElements.define(\"ha-refresh-tokens-card\", HaRefreshTokens);\n","import { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nclass HaSettingsRow extends PolymerElement {\n  static get template() {\n    return html`\n      <style>\n        :host {\n          display: flex;\n          padding: 0 16px;\n          align-content: normal;\n          align-self: auto;\n          align-items: center;\n        }\n        :host([narrow]) {\n          align-items: normal;\n          flex-direction: column;\n          border-top: 1px solid var(--divider-color);\n          padding-bottom: 8px;\n        }\n        paper-item-body {\n          padding-right: 16px;\n        }\n      </style>\n      <paper-item-body two-line$=\"[[!threeLine]]\" three-line$=\"[[threeLine]]\">\n        <slot name=\"heading\"></slot>\n        <div secondary><slot name=\"description\"></slot></div>\n      </paper-item-body>\n      <slot></slot>\n    `;\n  }\n\n  static get properties() {\n    return {\n      narrow: {\n        type: Boolean,\n        reflectToAttribute: true,\n      },\n      threeLine: {\n        type: Boolean,\n        value: false,\n      },\n    };\n  }\n}\n\ncustomElements.define(\"ha-settings-row\", HaSettingsRow);\n"],"sourceRoot":""}