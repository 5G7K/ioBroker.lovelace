{"version":3,"sources":["webpack:///./src/common/entity/binary_sensor_icon.ts","webpack:///./src/common/entity/compute_domain.ts","webpack:///./src/common/entity/compute_object_id.ts","webpack:///./src/common/entity/compute_state_name.ts","webpack:///./src/common/entity/cover_icon.ts","webpack:///./src/common/entity/domain_icon.ts","webpack:///./src/common/entity/input_dateteime_icon.ts","webpack:///./src/common/entity/sensor_icon.ts","webpack:///./src/common/entity/state_icon.ts","webpack:///./src/common/entity/valid_entity_id.ts","webpack:///./src/components/dialog/ha-iron-focusables-helper.js","webpack:///./src/components/dialog/ha-paper-dialog.ts","webpack:///./src/components/entity/ha-entities-picker.ts","webpack:///./src/components/ha-icon.ts","webpack:///./src/components/user/ha-user-picker.ts","webpack:///./src/panels/config/person/dialog-person-detail.ts"],"names":["binarySensorIcon","state","activated","attributes","device_class","computeDomain","entityId","substr","indexOf","computeObjectId","stateObj","friendly_name","undefined","entity_id","replace","coverIcon","open","domainIcon","fixedIcons","alert","automation","calendar","camera","climate","configurator","conversation","device_tracker","fan","group","history_graph","homeassistant","homekit","image_processing","input_boolean","input_datetime","input_number","input_select","input_text","light","mailbox","notify","person","plant","proximity","remote","scene","script","sensor","simple_alarm","sun","switch","timer","updater","vacuum","water_heater","weblink","domain","console","warn","DEFAULT_DOMAIN_ICON","inputDateTimeIcon","has_date","has_time","fixedDeviceClassIcons","humidity","illuminance","temperature","pressure","power","signal_strength","sensorIcon","dclass","battery","Number","isNaN","batteryRound","Math","round","unit","unit_of_measurement","UNIT_C","UNIT_F","domainIcons","binary_sensor","cover","stateIcon","icon","validEntityId","test","HaIronFocusablesHelper","getTabbableNodes","node","result","needsSortByTabIndex","_collectTabbableNodes","IronFocusablesHelper","_sortByTabIndex","nodeType","Node","ELEMENT_NODE","_isVisible","element","tabIndex","_normalizedTabIndex","needsSort","push","children","localName","dom","getDistributedNodes","shadowRoot","root","i","length","paperDialogClass","customElements","get","haTabFixBehaviorImpl","_focusableNodes","HaPaperDialog","mixinBehaviors","define","HaEntitiesPickerLight","customElement","property","attribute","hass","currentEntities","_currentEntities","html","map","domainFilter","_entityFilter","pickedEntityLabel","_entityChanged","pickEntityLabel","_addEntity","value","includes","entities","fireEvent","event","stopPropagation","curValue","currentTarget","newValue","detail","isValidEntityId","_updateEntities","filter","ent","toAdd","LitElement","ironIconClass","loaded","HaIcon","listen","eventName","methodName","_iconsetName","HaEntityPicker","memoizeOne","users","sorted","sort","a","b","compare","name","label","_value","_userChanged","_sortedUsers","user","id","changedProps","fetchUsers","then","ev","item","dataset","userId","setTimeout","css","DialogPersonDetail","params","_params","_error","entry","_name","_userId","user_id","_deviceTrackers","device_trackers","updateComplete","nameInvalid","trim","_openedChanged","_nameChanged","localize","_deviceTrackersChanged","_deleteEntry","_submitting","_updateEntry","values","updateEntry","createEntry","err","message","removeEntry","haStyleDialog"],"mappings":"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","file":"person-detail-dialog.chunk.js","sourcesContent":["import { HassEntity } from \"home-assistant-js-websocket\";\n\n/** Return an icon representing a binary sensor state. */\n\nexport default function binarySensorIcon(state: HassEntity) {\n  const activated = state.state && state.state === \"off\";\n  switch (state.attributes.device_class) {\n    case \"battery\":\n      return activated ? \"hass:battery\" : \"hass:battery-outline\";\n    case \"cold\":\n      return activated ? \"hass:thermometer\" : \"hass:snowflake\";\n    case \"connectivity\":\n      return activated ? \"hass:server-network-off\" : \"hass:server-network\";\n    case \"door\":\n      return activated ? \"hass:door-closed\" : \"hass:door-open\";\n    case \"garage_door\":\n      return activated ? \"hass:garage\" : \"hass:garage-open\";\n    case \"gas\":\n    case \"power\":\n    case \"problem\":\n    case \"safety\":\n    case \"smoke\":\n      return activated ? \"hass:shield-check\" : \"hass:alert\";\n    case \"heat\":\n      return activated ? \"hass:thermometer\" : \"hass:fire\";\n    case \"light\":\n      return activated ? \"hass:brightness-5\" : \"hass:brightness-7\";\n    case \"lock\":\n      return activated ? \"hass:lock\" : \"hass:lock-open\";\n    case \"moisture\":\n      return activated ? \"hass:water-off\" : \"hass:water\";\n    case \"motion\":\n      return activated ? \"hass:walk\" : \"hass:run\";\n    case \"occupancy\":\n      return activated ? \"hass:home-outline\" : \"hass:home\";\n    case \"opening\":\n      return activated ? \"hass:square\" : \"hass:square-outline\";\n    case \"plug\":\n      return activated ? \"hass:power-plug-off\" : \"hass:power-plug\";\n    case \"presence\":\n      return activated ? \"hass:home-outline\" : \"hass:home\";\n    case \"sound\":\n      return activated ? \"hass:music-note-off\" : \"hass:music-note\";\n    case \"vibration\":\n      return activated ? \"hass:crop-portrait\" : \"hass:vibrate\";\n    case \"window\":\n      return activated ? \"hass:window-closed\" : \"hass:window-open\";\n    default:\n      return activated ? \"hass:radiobox-blank\" : \"hass:checkbox-marked-circle\";\n  }\n}\n","export default function computeDomain(entityId: string): string {\n  return entityId.substr(0, entityId.indexOf(\".\"));\n}\n","/** Compute the object ID of a state. */\nexport default function computeObjectId(entityId: string): string {\n  return entityId.substr(entityId.indexOf(\".\") + 1);\n}\n","import { HassEntity } from \"home-assistant-js-websocket\";\nimport computeObjectId from \"./compute_object_id\";\n\nexport default (stateObj: HassEntity): string =>\n  stateObj.attributes.friendly_name === undefined\n    ? computeObjectId(stateObj.entity_id).replace(/_/g, \" \")\n    : stateObj.attributes.friendly_name || \"\";\n","/** Return an icon representing a cover state. */\nimport { HassEntity } from \"home-assistant-js-websocket\";\nimport domainIcon from \"./domain_icon\";\n\nexport default function coverIcon(state: HassEntity): string {\n  const open = state.state !== \"closed\";\n  switch (state.attributes.device_class) {\n    case \"garage\":\n      return open ? \"hass:garage-open\" : \"hass:garage\";\n    default:\n      return domainIcon(\"cover\", state.state);\n  }\n}\n","/**\n * Return the icon to be used for a domain.\n *\n * Optionally pass in a state to influence the domain icon.\n */\nimport { DEFAULT_DOMAIN_ICON } from \"../const\";\n\nconst fixedIcons = {\n  alert: \"hass:alert\",\n  automation: \"hass:playlist-play\",\n  calendar: \"hass:calendar\",\n  camera: \"hass:video\",\n  climate: \"hass:thermostat\",\n  configurator: \"hass:settings\",\n  conversation: \"hass:text-to-speech\",\n  device_tracker: \"hass:account\",\n  fan: \"hass:fan\",\n  group: \"hass:google-circles-communities\",\n  history_graph: \"hass:chart-line\",\n  homeassistant: \"hass:home-assistant\",\n  homekit: \"hass:home-automation\",\n  image_processing: \"hass:image-filter-frames\",\n  input_boolean: \"hass:drawing\",\n  input_datetime: \"hass:calendar-clock\",\n  input_number: \"hass:ray-vertex\",\n  input_select: \"hass:format-list-bulleted\",\n  input_text: \"hass:textbox\",\n  light: \"hass:lightbulb\",\n  mailbox: \"hass:mailbox\",\n  notify: \"hass:comment-alert\",\n  person: \"hass:account\",\n  plant: \"hass:flower\",\n  proximity: \"hass:apple-safari\",\n  remote: \"hass:remote\",\n  scene: \"hass:google-pages\",\n  script: \"hass:file-document\",\n  sensor: \"hass:eye\",\n  simple_alarm: \"hass:bell\",\n  sun: \"hass:white-balance-sunny\",\n  switch: \"hass:flash\",\n  timer: \"hass:timer\",\n  updater: \"hass:cloud-upload\",\n  vacuum: \"hass:robot-vacuum\",\n  water_heater: \"hass:thermometer\",\n  weblink: \"hass:open-in-new\",\n};\n\nexport default function domainIcon(domain: string, state?: string): string {\n  if (domain in fixedIcons) {\n    return fixedIcons[domain];\n  }\n\n  switch (domain) {\n    case \"alarm_control_panel\":\n      switch (state) {\n        case \"armed_home\":\n          return \"hass:bell-plus\";\n        case \"armed_night\":\n          return \"hass:bell-sleep\";\n        case \"disarmed\":\n          return \"hass:bell-outline\";\n        case \"triggered\":\n          return \"hass:bell-ring\";\n        default:\n          return \"hass:bell\";\n      }\n\n    case \"binary_sensor\":\n      return state && state === \"off\"\n        ? \"hass:radiobox-blank\"\n        : \"hass:checkbox-marked-circle\";\n\n    case \"cover\":\n      return state === \"closed\" ? \"hass:window-closed\" : \"hass:window-open\";\n\n    case \"lock\":\n      return state && state === \"unlocked\" ? \"hass:lock-open\" : \"hass:lock\";\n\n    case \"media_player\":\n      return state && state !== \"off\" && state !== \"idle\"\n        ? \"hass:cast-connected\"\n        : \"hass:cast\";\n\n    case \"zwave\":\n      switch (state) {\n        case \"dead\":\n          return \"hass:emoticon-dead\";\n        case \"sleeping\":\n          return \"hass:sleep\";\n        case \"initializing\":\n          return \"hass:timer-sand\";\n        default:\n          return \"hass:z-wave\";\n      }\n\n    default:\n      // tslint:disable-next-line\n      console.warn(\n        \"Unable to find icon for domain \" + domain + \" (\" + state + \")\"\n      );\n      return DEFAULT_DOMAIN_ICON;\n  }\n}\n","/** Return an icon representing an input datetime state. */\nimport domainIcon from \"./domain_icon\";\nimport { HassEntity } from \"home-assistant-js-websocket\";\n\nexport default function inputDateTimeIcon(state: HassEntity): string {\n  if (!state.attributes.has_date) {\n    return \"hass:clock\";\n  }\n  if (!state.attributes.has_time) {\n    return \"hass:calendar\";\n  }\n  return domainIcon(\"input_datetime\");\n}\n","/** Return an icon representing a sensor state. */\nimport { HassEntity } from \"home-assistant-js-websocket\";\nimport { UNIT_C, UNIT_F } from \"../const\";\nimport domainIcon from \"./domain_icon\";\n\nconst fixedDeviceClassIcons = {\n  humidity: \"hass:water-percent\",\n  illuminance: \"hass:brightness-5\",\n  temperature: \"hass:thermometer\",\n  pressure: \"hass:gauge\",\n  power: \"hass:flash\",\n  signal_strength: \"hass:wifi\",\n};\n\nexport default function sensorIcon(state: HassEntity) {\n  const dclass = state.attributes.device_class;\n\n  if (dclass && dclass in fixedDeviceClassIcons) {\n    return fixedDeviceClassIcons[dclass];\n  }\n  if (dclass === \"battery\") {\n    const battery = Number(state.state);\n    if (isNaN(battery)) {\n      return \"hass:battery-unknown\";\n    }\n    const batteryRound = Math.round(battery / 10) * 10;\n    if (batteryRound >= 100) {\n      return \"hass:battery\";\n    }\n    if (batteryRound <= 0) {\n      return \"hass:battery-alert\";\n    }\n    // Will return one of the following icons: (listed so extractor picks up)\n    // hass:battery-10\n    // hass:battery-20\n    // hass:battery-30\n    // hass:battery-40\n    // hass:battery-50\n    // hass:battery-60\n    // hass:battery-70\n    // hass:battery-80\n    // hass:battery-90\n    // We obscure 'hass' in iconname so this name does not get picked up\n    return `${\"hass\"}:battery-${batteryRound}`;\n  }\n\n  const unit = state.attributes.unit_of_measurement;\n  if (unit === UNIT_C || unit === UNIT_F) {\n    return \"hass:thermometer\";\n  }\n  return domainIcon(\"sensor\");\n}\n","/** Return an icon representing a state. */\nimport { HassEntity } from \"home-assistant-js-websocket\";\nimport { DEFAULT_DOMAIN_ICON } from \"../const\";\n\nimport computeDomain from \"./compute_domain\";\nimport domainIcon from \"./domain_icon\";\n\nimport binarySensorIcon from \"./binary_sensor_icon\";\nimport coverIcon from \"./cover_icon\";\nimport sensorIcon from \"./sensor_icon\";\nimport inputDateTimeIcon from \"./input_dateteime_icon\";\n\nconst domainIcons = {\n  binary_sensor: binarySensorIcon,\n  cover: coverIcon,\n  sensor: sensorIcon,\n  input_datetime: inputDateTimeIcon,\n};\n\nexport default function stateIcon(state: HassEntity) {\n  if (!state) {\n    return DEFAULT_DOMAIN_ICON;\n  }\n  if (state.attributes.icon) {\n    return state.attributes.icon;\n  }\n\n  const domain = computeDomain(state.entity_id);\n\n  if (domain in domainIcons) {\n    return domainIcons[domain](state);\n  }\n  return domainIcon(domain, state.state);\n}\n","const validEntityId = /^(\\w+)\\.(\\w+)$/;\nexport default (entityId: string) => validEntityId.test(entityId);\n","/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at\nhttp://polymer.github.io/LICENSE.txt The complete set of authors may be found at\nhttp://polymer.github.io/AUTHORS.txt The complete set of contributors may be\nfound at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as\npart of the polymer project is also subject to an additional IP rights grant\nfound at http://polymer.github.io/PATENTS.txt\n*/\n/*\n  Fixes issue with not using shadow dom properly in iron-overlay-behavior/icon-focusables-helper.js\n*/\nimport { dom } from \"@polymer/polymer/lib/legacy/polymer.dom.js\";\n\nimport { IronFocusablesHelper } from \"@polymer/iron-overlay-behavior/iron-focusables-helper.js\";\n\nexport const HaIronFocusablesHelper = {\n  /**\n   * Returns a sorted array of tabbable nodes, including the root node.\n   * It searches the tabbable nodes in the light and shadow dom of the chidren,\n   * sorting the result by tabindex.\n   * @param {!Node} node\n   * @return {!Array<!HTMLElement>}\n   */\n  getTabbableNodes: function(node) {\n    var result = [];\n    // If there is at least one element with tabindex > 0, we need to sort\n    // the final array by tabindex.\n    var needsSortByTabIndex = this._collectTabbableNodes(node, result);\n    if (needsSortByTabIndex) {\n      return IronFocusablesHelper._sortByTabIndex(result);\n    }\n    return result;\n  },\n\n  /**\n   * Searches for nodes that are tabbable and adds them to the `result` array.\n   * Returns if the `result` array needs to be sorted by tabindex.\n   * @param {!Node} node The starting point for the search; added to `result`\n   * if tabbable.\n   * @param {!Array<!HTMLElement>} result\n   * @return {boolean}\n   * @private\n   */\n  _collectTabbableNodes: function(node, result) {\n    // If not an element or not visible, no need to explore children.\n    if (\n      node.nodeType !== Node.ELEMENT_NODE ||\n      !IronFocusablesHelper._isVisible(node)\n    ) {\n      return false;\n    }\n    var element = /** @type {!HTMLElement} */ (node);\n    var tabIndex = IronFocusablesHelper._normalizedTabIndex(element);\n    var needsSort = tabIndex > 0;\n    if (tabIndex >= 0) {\n      result.push(element);\n    }\n\n    // In ShadowDOM v1, tab order is affected by the order of distrubution.\n    // E.g. getTabbableNodes(#root) in ShadowDOM v1 should return [#A, #B];\n    // in ShadowDOM v0 tab order is not affected by the distrubution order,\n    // in fact getTabbableNodes(#root) returns [#B, #A].\n    //  <div id=\"root\">\n    //   <!-- shadow -->\n    //     <slot name=\"a\">\n    //     <slot name=\"b\">\n    //   <!-- /shadow -->\n    //   <input id=\"A\" slot=\"a\">\n    //   <input id=\"B\" slot=\"b\" tabindex=\"1\">\n    //  </div>\n    // TODO(valdrin) support ShadowDOM v1 when upgrading to Polymer v2.0.\n    var children;\n    if (element.localName === \"content\" || element.localName === \"slot\") {\n      children = dom(element).getDistributedNodes();\n    } else {\n      // /////////////////////////\n      // Use shadow root if possible, will check for distributed nodes.\n      // THIS IS THE CHANGED LINE\n      children = dom(element.shadowRoot || element.root || element).children;\n      // /////////////////////////\n    }\n    for (var i = 0; i < children.length; i++) {\n      // Ensure method is always invoked to collect tabbable children.\n      needsSort = this._collectTabbableNodes(children[i], result) || needsSort;\n    }\n    return needsSort;\n  },\n};\n","import \"@polymer/paper-dialog/paper-dialog\";\nimport { mixinBehaviors } from \"@polymer/polymer/lib/legacy/class\";\nimport { HaIronFocusablesHelper } from \"./ha-iron-focusables-helper.js\";\n// tslint:disable-next-line\nimport { PaperDialogElement } from \"@polymer/paper-dialog/paper-dialog\";\n\nconst paperDialogClass = customElements.get(\"paper-dialog\");\n\n// behavior that will override existing iron-overlay-behavior and call the fixed implementation\nconst haTabFixBehaviorImpl = {\n  get _focusableNodes() {\n    return HaIronFocusablesHelper.getTabbableNodes(this);\n  },\n};\n\n// paper-dialog that uses the haTabFixBehaviorImpl behvaior\n// export class HaPaperDialog extends paperDialogClass {}\n// @ts-ignore\nexport class HaPaperDialog\n  extends mixinBehaviors([haTabFixBehaviorImpl], paperDialogClass)\n  implements PaperDialogElement {}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-paper-dialog\": HaPaperDialog;\n  }\n}\ncustomElements.define(\"ha-paper-dialog\", HaPaperDialog);\n","import {\n  LitElement,\n  TemplateResult,\n  property,\n  html,\n  customElement,\n} from \"lit-element\";\nimport \"@polymer/paper-icon-button/paper-icon-button-light\";\n\nimport { HomeAssistant } from \"../../types\";\nimport { PolymerChangedEvent } from \"../../polymer-types\";\nimport { fireEvent } from \"../../common/dom/fire_event\";\nimport isValidEntityId from \"../../common/entity/valid_entity_id\";\n\nimport \"./ha-entity-picker\";\n// Not a duplicate, type import\n// tslint:disable-next-line\nimport { HaEntityPickerEntityFilterFunc } from \"./ha-entity-picker\";\nimport { HassEntity } from \"home-assistant-js-websocket\";\n\n@customElement(\"ha-entities-picker\")\nclass HaEntitiesPickerLight extends LitElement {\n  @property() public hass?: HomeAssistant;\n  @property() public value?: string[];\n  @property({ attribute: \"domain-filter\" }) public domainFilter?: string;\n  @property({ attribute: \"picked-entity-label\" })\n  public pickedEntityLabel?: string;\n  @property({ attribute: \"pick-entity-label\" }) public pickEntityLabel?: string;\n\n  protected render(): TemplateResult | void {\n    if (!this.hass) {\n      return;\n    }\n    const currentEntities = this._currentEntities;\n    return html`\n      ${currentEntities.map(\n        (entityId) => html`\n          <div>\n            <ha-entity-picker\n              allow-custom-entity\n              .curValue=${entityId}\n              .hass=${this.hass}\n              .domainFilter=${this.domainFilter}\n              .entityFilter=${this._entityFilter}\n              .value=${entityId}\n              .label=${this.pickedEntityLabel}\n              @value-changed=${this._entityChanged}\n            ></ha-entity-picker>\n          </div>\n        `\n      )}\n      <div>\n        <ha-entity-picker\n          .hass=${this.hass}\n          .domainFilter=${this.domainFilter}\n          .entityFilter=${this._entityFilter}\n          .label=${this.pickEntityLabel}\n          @value-changed=${this._addEntity}\n        ></ha-entity-picker>\n      </div>\n    `;\n  }\n\n  private _entityFilter: HaEntityPickerEntityFilterFunc = (\n    stateObj: HassEntity\n  ) => !this.value || !this.value.includes(stateObj.entity_id);\n\n  private get _currentEntities() {\n    return this.value || [];\n  }\n\n  private async _updateEntities(entities) {\n    fireEvent(this, \"value-changed\", {\n      value: entities,\n    });\n\n    this.value = entities;\n  }\n\n  private _entityChanged(event: PolymerChangedEvent<string>) {\n    event.stopPropagation();\n    const curValue = (event.currentTarget as any).curValue;\n    const newValue = event.detail.value;\n    if (\n      newValue === curValue ||\n      (newValue !== \"\" && !isValidEntityId(newValue))\n    ) {\n      return;\n    }\n    if (newValue === \"\") {\n      this._updateEntities(\n        this._currentEntities.filter((ent) => ent !== curValue)\n      );\n    } else {\n      this._updateEntities(\n        this._currentEntities.map((ent) => (ent === curValue ? newValue : ent))\n      );\n    }\n  }\n\n  private async _addEntity(event: PolymerChangedEvent<string>) {\n    event.stopPropagation();\n    const toAdd = event.detail.value;\n    (event.currentTarget as any).value = \"\";\n    if (!toAdd) {\n      return;\n    }\n    const currentEntities = this._currentEntities;\n    if (currentEntities.includes(toAdd)) {\n      return;\n    }\n\n    this._updateEntities([...currentEntities, toAdd]);\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-entities-picker\": HaEntitiesPickerLight;\n  }\n}\n","import { Constructor } from \"lit-element\";\nimport \"@polymer/iron-icon/iron-icon\";\n// Not duplicate, this is for typing.\n// tslint:disable-next-line\nimport { IronIconElement } from \"@polymer/iron-icon/iron-icon\";\n\nconst ironIconClass = customElements.get(\"iron-icon\") as Constructor<\n  IronIconElement\n>;\n\nlet loaded = false;\n\nexport class HaIcon extends ironIconClass {\n  private _iconsetName?: string;\n\n  public listen(\n    node: EventTarget | null,\n    eventName: string,\n    methodName: string\n  ): void {\n    super.listen(node, eventName, methodName);\n\n    if (!loaded && this._iconsetName === \"mdi\") {\n      loaded = true;\n      import(/* webpackChunkName: \"mdi-icons\" */ \"../resources/mdi-icons\");\n    }\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-icon\": HaIcon;\n  }\n}\n\ncustomElements.define(\"ha-icon\", HaIcon);\n","import \"@polymer/paper-icon-button/paper-icon-button\";\nimport \"@polymer/paper-input/paper-input\";\nimport \"@polymer/paper-item/paper-icon-item\";\nimport \"@polymer/paper-item/paper-item-body\";\nimport \"@polymer/paper-dropdown-menu/paper-dropdown-menu-light\";\nimport \"@polymer/paper-listbox/paper-listbox\";\nimport memoizeOne from \"memoize-one\";\nimport {\n  LitElement,\n  TemplateResult,\n  html,\n  css,\n  CSSResult,\n  property,\n} from \"lit-element\";\nimport { HomeAssistant } from \"../../types\";\nimport { fireEvent } from \"../../common/dom/fire_event\";\nimport { User, fetchUsers } from \"../../data/user\";\nimport { compare } from \"../../common/string/compare\";\n\nclass HaEntityPicker extends LitElement {\n  public hass?: HomeAssistant;\n  @property() public label?: string;\n  @property() public value?: string;\n  @property() public users?: User[];\n\n  private _sortedUsers = memoizeOne((users?: User[]) => {\n    if (!users || users.length === 1) {\n      return users || [];\n    }\n    const sorted = [...users];\n    sorted.sort((a, b) => compare(a.name, b.name));\n    return sorted;\n  });\n\n  protected render(): TemplateResult | void {\n    return html`\n      <paper-dropdown-menu-light .label=${this.label}>\n        <paper-listbox\n          slot=\"dropdown-content\"\n          .selected=${this._value}\n          attr-for-selected=\"data-user-id\"\n          @iron-select=${this._userChanged}\n        >\n          <paper-icon-item data-user-id=\"\">\n            No user\n          </paper-icon-item>\n          ${this._sortedUsers(this.users).map(\n            (user) => html`\n              <paper-icon-item data-user-id=${user.id}>\n                <ha-user-badge .user=${user} slot=\"item-icon\"></ha-user-badge>\n                ${user.name}\n              </paper-icon-item>\n            `\n          )}\n        </paper-listbox>\n      </paper-dropdown-menu-light>\n    `;\n  }\n\n  private get _value() {\n    return this.value || \"\";\n  }\n\n  protected firstUpdated(changedProps) {\n    super.firstUpdated(changedProps);\n    if (this.users === undefined) {\n      fetchUsers(this.hass!).then((users) => {\n        this.users = users;\n      });\n    }\n  }\n\n  private _userChanged(ev) {\n    const newValue = ev.detail.item.dataset.userId;\n\n    if (newValue !== this._value) {\n      this.value = ev.detail.value;\n      setTimeout(() => {\n        fireEvent(this, \"value-changed\", { value: newValue });\n        fireEvent(this, \"change\");\n      }, 0);\n    }\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      :host {\n        display: inline-block;\n      }\n      paper-dropdown-menu-light {\n        display: block;\n      }\n      paper-listbox {\n        min-width: 200px;\n      }\n      paper-icon-item {\n        cursor: pointer;\n      }\n    `;\n  }\n}\n\ncustomElements.define(\"ha-user-picker\", HaEntityPicker);\n","import {\n  LitElement,\n  html,\n  css,\n  CSSResult,\n  TemplateResult,\n  property,\n} from \"lit-element\";\nimport \"@polymer/paper-dialog-scrollable/paper-dialog-scrollable\";\nimport \"@polymer/paper-input/paper-input\";\nimport \"@material/mwc-button\";\n\nimport \"../../../components/dialog/ha-paper-dialog\";\n\nimport \"../../../components/entity/ha-entities-picker\";\nimport \"../../../components/user/ha-user-picker\";\nimport { PersonDetailDialogParams } from \"./show-dialog-person-detail\";\nimport { PolymerChangedEvent } from \"../../../polymer-types\";\nimport { haStyleDialog } from \"../../../resources/styles\";\nimport { HomeAssistant } from \"../../../types\";\nimport { PersonMutableParams } from \"../../../data/person\";\n\nclass DialogPersonDetail extends LitElement {\n  @property() public hass!: HomeAssistant;\n  @property() private _name!: string;\n  @property() private _userId?: string;\n  @property() private _deviceTrackers!: string[];\n  @property() private _error?: string;\n  @property() private _params?: PersonDetailDialogParams;\n  @property() private _submitting: boolean = false;\n\n  public async showDialog(params: PersonDetailDialogParams): Promise<void> {\n    this._params = params;\n    this._error = undefined;\n    if (this._params.entry) {\n      this._name = this._params.entry.name || \"\";\n      this._userId = this._params.entry.user_id || undefined;\n      this._deviceTrackers = this._params.entry.device_trackers || [];\n    } else {\n      this._name = \"\";\n      this._userId = undefined;\n      this._deviceTrackers = [];\n    }\n    await this.updateComplete;\n  }\n\n  protected render(): TemplateResult | void {\n    if (!this._params) {\n      return html``;\n    }\n    const nameInvalid = this._name.trim() === \"\";\n    return html`\n      <ha-paper-dialog\n        with-backdrop\n        opened\n        @opened-changed=\"${this._openedChanged}\"\n      >\n        <h2>${this._params.entry ? this._params.entry.name : \"New Person\"}</h2>\n        <paper-dialog-scrollable>\n          ${this._error\n            ? html`\n                <div class=\"error\">${this._error}</div>\n              `\n            : \"\"}\n          <div class=\"form\">\n            <paper-input\n              .value=${this._name}\n              @value-changed=${this._nameChanged}\n              label=\"Name\"\n              error-message=\"Name is required\"\n              .invalid=${nameInvalid}\n            ></paper-input>\n            <ha-user-picker\n              label=\"Linked User\"\n              .hass=${this.hass}\n              .value=${this._userId}\n              .users=${this._params.users}\n              @value-changed=${this._userChanged}\n            ></ha-user-picker>\n            <p>\n              ${this.hass.localize(\n                \"ui.panel.config.person.detail.device_tracker_intro\"\n              )}\n            </p>\n            <ha-entities-picker\n              .hass=${this.hass}\n              .value=${this._deviceTrackers}\n              domain-filter=\"device_tracker\"\n              .pickedEntityLabel=${this.hass.localize(\n                \"ui.panel.config.person.detail.device_tracker_picked\"\n              )}\n              .pickEntityLabel=${this.hass.localize(\n                \"ui.panel.config.person.detail.device_tracker_pick\"\n              )}\n              @value-changed=${this._deviceTrackersChanged}\n            ></ha-entities-picker>\n          </div>\n        </paper-dialog-scrollable>\n        <div class=\"paper-dialog-buttons\">\n          ${this._params.entry\n            ? html`\n                <mwc-button\n                  class=\"warning\"\n                  @click=\"${this._deleteEntry}\"\n                  .disabled=${this._submitting}\n                >\n                  DELETE\n                </mwc-button>\n              `\n            : html``}\n          <mwc-button\n            @click=\"${this._updateEntry}\"\n            .disabled=${nameInvalid || this._submitting}\n          >\n            ${this._params.entry ? \"UPDATE\" : \"CREATE\"}\n          </mwc-button>\n        </div>\n      </ha-paper-dialog>\n    `;\n  }\n\n  private _nameChanged(ev: PolymerChangedEvent<string>) {\n    this._error = undefined;\n    this._name = ev.detail.value;\n  }\n\n  private _userChanged(ev: PolymerChangedEvent<string>) {\n    this._error = undefined;\n    this._userId = ev.detail.value;\n  }\n\n  private _deviceTrackersChanged(ev: PolymerChangedEvent<string[]>) {\n    this._error = undefined;\n    this._deviceTrackers = ev.detail.value;\n  }\n\n  private async _updateEntry() {\n    this._submitting = true;\n    try {\n      const values: PersonMutableParams = {\n        name: this._name.trim(),\n        device_trackers: this._deviceTrackers,\n        user_id: this._userId || null,\n      };\n      if (this._params!.entry) {\n        await this._params!.updateEntry(values);\n      } else {\n        await this._params!.createEntry(values);\n      }\n      this._params = undefined;\n    } catch (err) {\n      this._error = err ? err.message : \"Unknown error\";\n    } finally {\n      this._submitting = false;\n    }\n  }\n\n  private async _deleteEntry() {\n    this._submitting = true;\n    try {\n      if (await this._params!.removeEntry()) {\n        this._params = undefined;\n      }\n    } finally {\n      this._submitting = false;\n    }\n  }\n\n  private _openedChanged(ev: PolymerChangedEvent<boolean>): void {\n    if (!(ev.detail as any).value) {\n      this._params = undefined;\n    }\n  }\n\n  static get styles(): CSSResult[] {\n    return [\n      haStyleDialog,\n      css`\n        ha-paper-dialog {\n          min-width: 400px;\n        }\n        .form {\n          padding-bottom: 24px;\n        }\n        ha-user-picker {\n          margin-top: 16px;\n        }\n        mwc-button.warning {\n          margin-right: auto;\n        }\n        .error {\n          color: var(--google-red-500);\n        }\n      `,\n    ];\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"dialog-person-detail\": DialogPersonDetail;\n  }\n}\n\ncustomElements.define(\"dialog-person-detail\", DialogPersonDetail);\n"],"sourceRoot":""}