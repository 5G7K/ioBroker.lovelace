{"version":3,"sources":["webpack:///./node_modules/@vaadin/vaadin-button/src/vaadin-button.js","webpack:///./node_modules/@vaadin/vaadin-button/theme/lumo/vaadin-button-styles.js","webpack:///./node_modules/@vaadin/vaadin-button/theme/lumo/vaadin-button.js","webpack:///./node_modules/@vaadin/vaadin-control-state-mixin/vaadin-control-state-mixin.js","webpack:///./node_modules/@vaadin/vaadin-date-picker/src/vaadin-date-picker-helper.js","webpack:///./node_modules/@vaadin/vaadin-date-picker/src/vaadin-date-picker-mixin.js","webpack:///./node_modules/@vaadin/vaadin-date-picker/src/vaadin-date-picker-overlay-content.js","webpack:///./node_modules/@vaadin/vaadin-date-picker/src/vaadin-date-picker-overlay.js","webpack:///./node_modules/@vaadin/vaadin-date-picker/src/vaadin-date-picker-styles.js","webpack:///./node_modules/@vaadin/vaadin-date-picker/src/vaadin-date-picker.js","webpack:///./node_modules/@vaadin/vaadin-date-picker/src/vaadin-infinite-scroller.js","webpack:///./node_modules/@vaadin/vaadin-date-picker/src/vaadin-month-calendar.js","webpack:///./node_modules/@vaadin/vaadin-date-picker/theme/lumo/vaadin-date-picker-overlay-content-styles.js","webpack:///./node_modules/@vaadin/vaadin-date-picker/theme/lumo/vaadin-date-picker-overlay-styles.js","webpack:///./node_modules/@vaadin/vaadin-date-picker/theme/lumo/vaadin-date-picker-styles.js","webpack:///./node_modules/@vaadin/vaadin-date-picker/theme/lumo/vaadin-date-picker.js","webpack:///./node_modules/@vaadin/vaadin-date-picker/theme/lumo/vaadin-month-calendar-styles.js","webpack:///./node_modules/@vaadin/vaadin-date-picker/vaadin-date-picker.js","webpack:///./node_modules/@vaadin/vaadin-development-mode-detector/vaadin-development-mode-detector.js","webpack:///./node_modules/@vaadin/vaadin-element-mixin/vaadin-element-mixin.js","webpack:///./node_modules/@vaadin/vaadin-lumo-styles/mixins/field-button.js","webpack:///./node_modules/@vaadin/vaadin-lumo-styles/mixins/required-field.js","webpack:///./node_modules/@vaadin/vaadin-text-field/src/vaadin-text-field-mixin.js","webpack:///./node_modules/@vaadin/vaadin-text-field/src/vaadin-text-field.js","webpack:///./node_modules/@vaadin/vaadin-text-field/theme/lumo/vaadin-text-field-styles.js","webpack:///./node_modules/@vaadin/vaadin-text-field/theme/lumo/vaadin-text-field.js","webpack:///./node_modules/@vaadin/vaadin-usage-statistics/vaadin-usage-statistics.js"],"names":["ButtonElement","ElementMixin","ControlStateMixin","ThemableMixin","GestureEventListeners","PolymerElement","template","html","is","version","ready","setAttribute","$","button","_addActiveListeners","disconnectedCallback","hasAttribute","removeAttribute","addListener","disabled","addEventListener","e","indexOf","keyCode","focusElement","customElements","define","$_documentContainer","document","head","appendChild","content","TabIndexMixin","superClass","VaadinTabIndexMixin","properties","tabindex","type","Number","value","reflectToAttribute","observer","window","ShadyDOM","VaadinControlStateMixin","autofocus","Boolean","_previousTabIndex","_isShiftTabbing","composedPath","_focus","_setFocused","ensureEventComposed","composed","target","dispatchEvent","CustomEvent","bubbles","cancelable","shadowRoot","defaultPrevented","shiftKey","HTMLElement","prototype","focus","apply","setTimeout","firefox","navigator","userAgent","match","parseFloat","parentNode","nextSibling","fakeTarget","createElement","style","position","opacity","tabIndex","insertBefore","removeChild","focused","requestAnimationFrame","_boundKeydownListener","_bodyKeydownListener","bind","_boundKeyupListener","_bodyKeyupListener","connectedCallback","body","removeEventListener","_tabPressed","console","warn","localName","blur","_disabledChanged","_tabindexChanged","undefined","setProperties","click","DatePickerHelper","VaadinDatePickerHelper","_getISOWeekNumber","date","dayOfWeek","getDay","nearestThursdayDiff","nearestThursday","Date","getTime","firstOfJanuary","setFullYear","getFullYear","timeDiff","daysSinceFirstOfJanuary","Math","round","floor","_dateEquals","date1","date2","getMonth","getDate","_dateAllowed","min","max","_getClosestDate","dates","filter","reduce","closestDate","candidate","candidateDiff","abs","closestDateDiff","_extractDateParts","day","month","year","DatePickerMixin","subclass","VaadinDatePickerMixin","mixinBehaviors","IronResizableBehavior","_selectedDate","_focusedDate","String","notify","required","name","initialPosition","label","opened","showWeekNumbers","_fullscreen","_fullscreenMediaQuery","_touchPrevented","Array","i18n","Object","monthNames","weekdays","weekdaysShort","firstDayOfWeek","week","calendar","clear","today","cancel","formatDate","d","yearStr","replace","y","substr","length","join","parseDate","text","parts","split","parseInt","formatTitle","monthName","fullYear","_minDate","_maxDate","_noInput","computed","_ios","_webkitOverflowScroll","webkitOverflowScrolling","_ignoreAnnounce","_focusOverlayOnOpen","_overlayInitialized","observers","_boundOnScroll","_onScroll","_boundFocus","_boundUpdateAlignmentAndPosition","_updateAlignmentAndPosition","open","_preventDefault","_onKeydown","_onUserInput","_initOverlay","overlay","detail","_overlayContent","_close","_focusAndSelect","_onVaadinOverlayClose","readonly","stopPropagation","close","_inputElement","_input","_nativeInput","inputElement","unwrap","_parseDate","str","exec","setMonth","setDate","_isNoInput","fullscreen","ios","_formatISO","pad","num","fmt","yearSign","yearFmt","yearAbs","_openedChanged","_selectedDateChanged","selectedDate","__userInputOccurred","__dispatchChange","inputValue","validate","_inputValue","_focusedDateChanged","focusedDate","_ignoreFocusedDateChange","_updateHasValue","__getOverlayTheme","theme","overlayInitialized","_handleDateChange","property","oldValue","_valueChanged","_minChanged","_maxChanged","inputRect","getBoundingClientRect","bottomAlign","top","innerHeight","rightAlign","left","clientWidth","innerWidth","viewportWidth","documentElement","removeProperty","right","viewportHeight","clientHeight","bottom","getComputedStyle","getPropertyValue","_repositionYearScroller","_fullscreenChanged","_onOverlayOpened","_openedWithFocusRing","parsedInitialPosition","scrollToDate","_preventWebkitOverflowScrollingTouch","parentElement","updateStyles","element","result","oldInlineValue","push","_onOverlayClosed","forEach","prevented","dateObject","parsedDate","_isValidDate","selectionStart","selectionEnd","invalid","checkValidity","inputValid","minMaxValid","inputValidity","contains","_setSelectionRange","a","b","setSelectionRange","preventDefault","_eventKey","keys","i","k","IronA11yKeysBehavior","keyboardEventMatchesKeys","isNaN","allowedKeys","focusCancel","revealDate","_validateInput","_userInputValueChanged","_announceFocusedDate","announceFocusedDate","querySelector","DatePickerOverlayContentElement","ThemePropertyMixin","_focusedMonthDate","_originDate","_visibleMonthIndex","_desktopMode","_translateX","_yearScrollerWidth","_ignoreTaps","_notTapping","minDate","maxDate","_focused","_stopPropagation","_onOverlayFocus","_onOverlayBlur","_closeYearScroller","_toggleAnimateClass","setTouchAction","scrollers","IronA11yAnnouncer","requestAvailability","_currentlyFocusedDate","announce","concat","cancelButton","animate","_scrollToPosition","_differenceInMonths","_isCurrentYear","yearsFromNow","_isSelectedYear","diff","scrolledAboveViewport","monthScroller","visibleItems","itemHeight","scrolledBelowViewport","_initialPositionChanged","yearScroller","_repositionMonthScroller","_onMonthScroll","_doIgnoreTaps","_onYearScroll","_onYearScrollTouchStart","_onMonthScrollTouchStart","_debouncer","Debouncer","debounce","timeOut","after","_formatDisplayed","_onTodayTap","_scrollToCurrentMonth","_showClear","_onYearTap","scrollDelta","yearDelta","targetPosition","_targetPosition","easingFunction","t","c","duration","start","smoothScroll","timestamp","currentTime","currentPos","oldPosition","_limit","range","_handleTrack","dx","ddy","ddx","newTranslateX","_track","state","_openYearScroller","enable","classList","add","remove","_toggleYearScroller","_isYearScrollerVisible","_translateXChanged","x","transform","_yearAfterXYears","index","_yearAfterXMonths","months","_dateAfterXMonths","_differenceInYears","_clear","overlayContent","getRootNode","host","_cancel","isToday","todayButton","isCancel","isScroller","eventKey","isFullscreen","isShift","_moveFocusByDays","_moveFocusInsideMonth","_moveFocusByMonths","_focusDate","dateToFocus","_focusClosestDate","days","targetMonth","_isTodayAllowed","todayMidnight","DatePickerOverlayElement","DisableUpgradeMixin","OverlayElement","innerHTML","DatePickerElement","errorMessage","placeholder","_userInputValue","afterNextRender","sourceEvent","prevent","_clearTouchend","_toggle","input","_getAriaExpanded","toString","InfiniteScrollerElement","bufferSize","_initialScroll","_initialIndex","_buffers","_preventScrollEvent","_mayHaveMomentum","_initialized","active","slice","call","root","querySelectorAll","fullHeight","height","tpl","_TemplateClass","templatize","forwardHostProp","prop","buffer","children","insertionPoint","_itemWrapper","instance","isFirefox","toLowerCase","scroller","_activated","_createPool","_finishInit","_initDone","_ensureStampedInstance","translateY","_reset","_translateBuffer","up","_bufferHeight","updated","reverse","_scroll","_scrollDisabled","scrollTop","bufferOffset","offsetTop","upperThresholdReached","lowerThresholdReached","_updateClones","_debouncerScrollFinish","scrollerRect","_isVisible","_firstIndex","_itemHeightVal","ShadyCSS","nativeCss","getComputedStyleValue","tmpStyleProp","setProperty","itemHeightPx","_debouncerUpdateClones","container","itemWrapper","contentId","_contentIndex","slotName","flush","firstElementChild","tmpInstance","set","viewPortOnly","bufferIndex","firstIndex","rect","MonthCalendarElement","ignoreTaps","_days","_isDisabled","firstDate","lastDate","_getTitle","_onMonthGridTouchStart","_dateAdd","delta","_applyFirstDayOfWeek","weekDayNames","_getWeekDayNames","weekDayNamesShort","map","weekDay","weekDayShort","_getDate","_showWeekNumbersChanged","_showWeekSeparator","_isToday","_getDays","startMonth","_getWeekNumber","acc","_getWeekNumbers","arr","_handleTap","_getRole","_getAriaLabel","ariaLabel","_getAriaDisabled","DEV_MODE_CODE_REGEXP","isMinified","test","uncommentAndRun","isDevelopmentMode","isForcedDevelopmentMode","isLocalhost","isFlowProductionMode","localStorage","getItem","location","hostname","Vaadin","Flow","clients","productionModeApps","key","client","productionMode","callback","args","Function","log","runIfDevelopmentMode","developmentMode","registrations","developmentModeCallback","usageStatistics","statsJob","VaadinElementMixin","_finalizeClass","idlePeriod","enqueueDebouncer","doctype","HOST_PROPS","default","accessible","PROP_TYPE","DEFAULT","ACCESSIBLE","TextFieldMixin","VaadinTextFieldMixin","autocomplete","autocorrect","autocapitalize","autoselect","clearButtonVisible","maxlength","minlength","hasValue","preventInvalidInput","_labelId","_errorId","slotted","_slottedTagName","_onInput","__preventInput","stopImmediatePropagation","_inputDebouncer","__fromClearButton","__userInput","_stateChanged","clearButton","_onChange","_valueClearing","changeEvent","newVal","oldVal","_labelChanged","_onSlotChange","_slottedInput","_validateSlottedValue","_addInputListeners","_addIEListeners","_removeInputListeners","_removeIEListeners","_propagateHostAttributes","attr","_hostPropsChanged","attributesValues","_hostAccessiblePropsChanged","attributeNames","_setOrToggleAttribute","node","pattern","_boundOnInput","_boundOnChange","_boundOnBlur","_boundOnFocus","_onBlur","_onFocus","defaultInput","_onClearButtonClick","_onKeyDown","uniqueId","_uniqueId","constructor","select","inputEvent","Event","_shouldPreventInput","_createPropertyObserver","_getActiveErrorId","errorId","_getActiveLabelId","labelId","_getErrorMessageAriaHidden","attributeChangedCallback","isSafari","WEBKIT_PROPERTY","el","TextFieldElement","list","title","maybeGatherAndSendStats"],"mappings":"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","file":"vendors~more-info-dialog~panel-history~panel-logbook.chunk.js","sourcesContent":["/**\n@license\nCopyright (c) 2017 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport { GestureEventListeners } from '@polymer/polymer/lib/mixins/gesture-event-listeners.js';\nimport { ThemableMixin } from '@vaadin/vaadin-themable-mixin/vaadin-themable-mixin.js';\nimport { ControlStateMixin } from '@vaadin/vaadin-control-state-mixin/vaadin-control-state-mixin.js';\nimport { ElementMixin } from '@vaadin/vaadin-element-mixin/vaadin-element-mixin.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { addListener } from '@polymer/polymer/lib/utils/gestures.js';\n/**\n * `<vaadin-button>` is a Web Component providing an accessible and customizable button.\n *\n * ```html\n * <vaadin-button>\n * </vaadin-button>\n * ```\n *\n * ```js\n * document.querySelector('vaadin-button').addEventListener('click', () => alert('Hello World!'));\n * ```\n *\n * ### Styling\n *\n * The following shadow DOM parts are exposed for styling:\n *\n * Part name | Description\n * ----------------|----------------\n * `label` | The label (text) inside the button\n * `prefix` | A slot for e.g. an icon before the label\n * `suffix` | A slot for e.g. an icon after the label\n *\n *\n * The following attributes are exposed for styling:\n *\n * Attribute | Description\n * --------- | -----------\n * `active` | Set when the button is pressed down, either with mouse, touch or the keyboard.\n * `disabled` | Set when the button is disabled.\n * `focus-ring` | Set when the button is focused using the keyboard.\n * `focused` | Set when the button is focused.\n *\n * See [ThemableMixin – how to apply styles for shadow parts](https://github.com/vaadin/vaadin-themable-mixin/wiki)\n *\n * @memberof Vaadin\n * @mixes Vaadin.ElementMixin\n * @mixes Vaadin.ControlStateMixin\n * @mixes Vaadin.ThemableMixin\n * @mixes Polymer.GestureEventListeners\n * @demo demo/index.html\n */\nclass ButtonElement extends\n  ElementMixin(\n    ControlStateMixin(\n      ThemableMixin(\n        GestureEventListeners(PolymerElement)))) {\n  static get template() {\n    return html`\n    <style>\n      :host {\n        display: inline-block;\n        position: relative;\n        outline: none;\n        white-space: nowrap;\n      }\n\n      :host([hidden]) {\n        display: none !important;\n      }\n\n      /* Ensure the button is always aligned on the baseline */\n      .vaadin-button-container::before {\n        content: \"\\\\2003\";\n        display: inline-block;\n        width: 0;\n      }\n\n      .vaadin-button-container {\n        display: inline-flex;\n        align-items: center;\n        justify-content: center;\n        text-align: center;\n        width: 100%;\n        height: 100%;\n        min-height: inherit;\n        text-shadow: inherit;\n        -webkit-user-select: none;\n        -moz-user-select: none;\n        user-select: none;\n      }\n\n      [part=\"prefix\"],\n      [part=\"suffix\"] {\n        flex: none;\n      }\n\n      [part=\"label\"] {\n        white-space: nowrap;\n        overflow: hidden;\n        text-overflow: ellipsis;\n      }\n\n      #button {\n        position: absolute;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        opacity: 0;\n        cursor: inherit;\n      }\n    </style>\n    <div class=\"vaadin-button-container\">\n      <div part=\"prefix\">\n        <slot name=\"prefix\"></slot>\n      </div>\n      <div part=\"label\">\n        <slot></slot>\n      </div>\n      <div part=\"suffix\">\n        <slot name=\"suffix\"></slot>\n      </div>\n    </div>\n    <button id=\"button\" type=\"button\"></button>\n`;\n  }\n\n  static get is() {\n    return 'vaadin-button';\n  }\n\n  static get version() {\n    return '2.2.0';\n  }\n\n  ready() {\n    super.ready();\n\n    // Leaving default role in the native button, makes navigation announcement\n    // being different when using focus navigation (tab) versus using normal\n    // navigation (arrows). The first way announces the label on a button\n    // since the focus is moved programmatically, and the second on a group.\n    this.setAttribute('role', 'button');\n    this.$.button.setAttribute('role', 'presentation');\n\n    this._addActiveListeners();\n  }\n\n  /**\n   * @protected\n   */\n  disconnectedCallback() {\n    super.disconnectedCallback();\n\n    // `active` state is preserved when the element is disconnected between keydown and keyup events.\n    // reproducible in `<vaadin-date-picker>` when closing on `Cancel` or `Today` click.\n    if (this.hasAttribute('active')) {\n      this.removeAttribute('active');\n    }\n  }\n\n  _addActiveListeners() {\n    addListener(this, 'down', () => !this.disabled && this.setAttribute('active', ''));\n    addListener(this, 'up', () => this.removeAttribute('active'));\n    this.addEventListener('keydown', e => !this.disabled && [13, 32].indexOf(e.keyCode) >= 0 && this.setAttribute('active', ''));\n    this.addEventListener('keyup', () => this.removeAttribute('active'));\n    this.addEventListener('blur', () => this.removeAttribute('active'));\n  }\n\n  /**\n   * @protected\n   */\n  get focusElement() {\n    return this.$.button;\n  }\n}\n\ncustomElements.define(ButtonElement.is, ButtonElement);\n\nexport { ButtonElement };\n","import '@vaadin/vaadin-lumo-styles/color.js';\nimport '@vaadin/vaadin-lumo-styles/sizing.js';\nimport '@vaadin/vaadin-lumo-styles/spacing.js';\nimport '@vaadin/vaadin-lumo-styles/style.js';\nimport '@vaadin/vaadin-lumo-styles/typography.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\n\nconst $_documentContainer = html`<dom-module id=\"lumo-button\" theme-for=\"vaadin-button\">\n  <template>\n    <style>\n      :host {\n        /* Sizing */\n        --lumo-button-size: var(--lumo-size-m);\n        min-width: calc(var(--lumo-button-size) * 2);\n        height: var(--lumo-button-size);\n        padding: 0 calc(var(--lumo-button-size) / 3 + var(--lumo-border-radius) / 2);\n        margin: var(--lumo-space-xs) 0;\n        box-sizing: border-box;\n        /* Style */\n        font-family: var(--lumo-font-family);\n        font-size: var(--lumo-font-size-m);\n        font-weight: 500;\n        color: var(--_lumo-button-color, var(--lumo-primary-text-color));\n        background-color: var(--_lumo-button-background-color, var(--lumo-contrast-5pct));\n        border-radius: var(--lumo-border-radius);\n        cursor: default;\n        -webkit-tap-highlight-color: transparent;\n        -webkit-font-smoothing: antialiased;\n        -moz-osx-font-smoothing: grayscale;\n      }\n\n      /* Set only for the internal parts so we don’t affect the host vertical alignment */\n      [part=\"label\"],\n      [part=\"prefix\"],\n      [part=\"suffix\"] {\n        line-height: var(--lumo-line-height-xs);\n      }\n\n      [part=\"label\"] {\n        padding: calc(var(--lumo-button-size) / 6) 0;\n      }\n\n      :host([theme~=\"small\"]) {\n        font-size: var(--lumo-font-size-s);\n        --lumo-button-size: var(--lumo-size-s);\n      }\n\n      :host([theme~=\"large\"]) {\n        font-size: var(--lumo-font-size-l);\n        --lumo-button-size: var(--lumo-size-l);\n      }\n\n      /* This needs to be the last selector for it to take priority */\n      :host([disabled][disabled]) {\n        pointer-events: none;\n        color: var(--lumo-disabled-text-color);\n        background-color: var(--lumo-contrast-5pct);\n      }\n\n      /* For interaction states */\n      :host::before,\n      :host::after {\n        content: \"\";\n        /* We rely on the host always being relative */\n        position: absolute;\n        z-index: 1;\n        top: 0;\n        right: 0;\n        bottom: 0;\n        left: 0;\n        background-color: currentColor;\n        border-radius: inherit;\n        opacity: 0;\n        transition: opacity 0.2s;\n        pointer-events: none;\n      }\n\n      /* Hover */\n\n      :host(:hover)::before {\n        opacity: 0.05;\n      }\n\n      /* Disable hover for touch devices */\n      @media (pointer: coarse) {\n        :host(:not([active]):hover)::before {\n          opacity: 0;\n        }\n      }\n\n      /* Active */\n\n      :host::after {\n        transition: opacity 1.4s, transform 0.1s;\n        filter: blur(8px);\n      }\n\n      :host([active])::before {\n        opacity: 0.1;\n        transition-duration: 0s;\n      }\n\n      :host([active])::after {\n        opacity: 0.1;\n        transition-duration: 0s, 0s;\n        transform: scale(0);\n      }\n\n      /* Keyboard focus */\n\n      :host([focus-ring]) {\n        box-shadow: 0 0 0 2px var(--lumo-primary-color-50pct);\n      }\n\n      /* Types (primary, tertiary, tertiary-inline */\n\n      :host([theme~=\"tertiary\"]),\n      :host([theme~=\"tertiary-inline\"]) {\n        background-color: transparent !important;\n        transition: opacity 0.2s;\n        min-width: 0;\n      }\n\n      :host([theme~=\"tertiary\"])::before,\n      :host([theme~=\"tertiary-inline\"])::before {\n        display: none;\n      }\n\n      :host([theme~=\"tertiary\"]) {\n        padding: 0 calc(var(--lumo-button-size) / 6);\n      }\n\n      @media (hover: hover) {\n        :host([theme*=\"tertiary\"]:not([active]):hover) {\n          opacity: 0.8;\n        }\n      }\n\n      :host([theme~=\"tertiary\"][active]),\n      :host([theme~=\"tertiary-inline\"][active]) {\n        opacity: 0.5;\n        transition-duration: 0s;\n      }\n\n      :host([theme~=\"tertiary-inline\"]) {\n        margin: 0;\n        height: auto;\n        padding: 0;\n        line-height: inherit;\n        font-size: inherit;\n      }\n\n      :host([theme~=\"tertiary-inline\"]) [part=\"label\"] {\n        padding: 0;\n        overflow: visible;\n        line-height: inherit;\n      }\n\n      :host([theme~=\"primary\"]) {\n        background-color: var(--_lumo-button-primary-background-color, var(--lumo-primary-color));\n        color: var(--_lumo-button-primary-color, var(--lumo-primary-contrast-color));\n        font-weight: 600;\n        min-width: calc(var(--lumo-button-size) * 2.5);\n      }\n\n      :host([theme~=\"primary\"][disabled]) {\n        background-color: var(--lumo-primary-color-50pct);\n        color: var(--lumo-primary-contrast-color);\n      }\n\n      :host([theme~=\"primary\"]:hover)::before {\n        opacity: 0.1;\n      }\n\n      :host([theme~=\"primary\"][active])::before {\n        background-color: var(--lumo-shade-20pct);\n      }\n\n      @media (pointer: coarse) {\n        :host([theme~=\"primary\"][active])::before {\n          background-color: var(--lumo-shade-60pct);\n        }\n\n        :host([theme~=\"primary\"]:not([active]):hover)::before {\n          opacity: 0;\n        }\n      }\n\n      :host([theme~=\"primary\"][active])::after {\n        opacity: 0.2;\n      }\n\n      /* Colors (success, error, contrast) */\n\n      :host([theme~=\"success\"]) {\n        color: var(--lumo-success-text-color);\n      }\n\n      :host([theme~=\"success\"][theme~=\"primary\"]) {\n        background-color: var(--lumo-success-color);\n        color: var(--lumo-success-contrast-color);\n      }\n\n      :host([theme~=\"success\"][theme~=\"primary\"][disabled]) {\n        background-color: var(--lumo-success-color-50pct);\n      }\n\n      :host([theme~=\"error\"]) {\n        color: var(--lumo-error-text-color);\n      }\n\n      :host([theme~=\"error\"][theme~=\"primary\"]) {\n        background-color: var(--lumo-error-color);\n        color: var(--lumo-error-contrast-color);\n      }\n\n      :host([theme~=\"error\"][theme~=\"primary\"][disabled]) {\n        background-color: var(--lumo-error-color-50pct);\n      }\n\n      :host([theme~=\"contrast\"]) {\n        color: var(--lumo-contrast);\n      }\n\n      :host([theme~=\"contrast\"][theme~=\"primary\"]) {\n        background-color: var(--lumo-contrast);\n        color: var(--lumo-base-color);\n      }\n\n      :host([theme~=\"contrast\"][theme~=\"primary\"][disabled]) {\n        background-color: var(--lumo-contrast-50pct);\n      }\n\n      /* Icons */\n\n      [part] ::slotted(iron-icon) {\n        display: inline-block;\n        width: var(--lumo-icon-size-m);\n        height: var(--lumo-icon-size-m);\n      }\n\n      /* Vaadin icons are based on a 16x16 grid (unlike Lumo and Material icons with 24x24), so they look too big by default */\n      [part] ::slotted(iron-icon[icon^=\"vaadin:\"]) {\n        padding: 0.25em;\n        box-sizing: border-box !important;\n      }\n\n      [part=\"prefix\"] {\n        margin-left: -0.25em;\n        margin-right: 0.25em;\n      }\n\n      [part=\"suffix\"] {\n        margin-left: 0.25em;\n        margin-right: -0.25em;\n      }\n\n      /* Icon-only */\n\n      :host([theme~=\"icon\"]) {\n        min-width: var(--lumo-button-size);\n        padding-left: calc(var(--lumo-button-size) / 4);\n        padding-right: calc(var(--lumo-button-size) / 4);\n      }\n\n      :host([theme~=\"icon\"]) [part=\"prefix\"],\n      :host([theme~=\"icon\"]) [part=\"suffix\"] {\n        margin-left: 0;\n        margin-right: 0;\n      }\n    </style>\n  </template>\n</dom-module>`;\n\ndocument.head.appendChild($_documentContainer.content);\n","import './vaadin-button-styles.js';\nimport '../../src/vaadin-button.js';\n","/**\n@license\nCopyright (c) 2017 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\n/**\n * A private mixin to avoid problems with dynamic properties and Polymer Analyzer.\n * No need to expose these properties in the API docs.\n * @polymerMixin\n */\nconst TabIndexMixin = superClass => class VaadinTabIndexMixin extends superClass {\n  static get properties() {\n    var properties = {\n      /**\n       * Internal property needed to listen to `tabindex` attribute changes.\n       *\n       * For changing the tabindex of this component use the native `tabIndex` property.\n       * @private\n       */\n      tabindex: {\n        type: Number,\n        value: 0,\n        reflectToAttribute: true,\n        observer: '_tabindexChanged'\n      }\n    };\n\n    if (window.ShadyDOM) {\n      // ShadyDOM browsers need the `tabIndex` in order to notify when the user changes it programmatically.\n      properties['tabIndex'] = properties.tabindex;\n    }\n\n    return properties;\n  }\n};\n\n/**\n * Polymer.IronControlState is not a proper 2.0 class, also, its tabindex\n * implementation fails in the shadow dom, so we have this for vaadin elements.\n * @polymerMixin\n */\nexport const ControlStateMixin = superClass => class VaadinControlStateMixin extends TabIndexMixin(superClass) {\n  static get properties() {\n    return {\n      /**\n       * Specify that this control should have input focus when the page loads.\n       */\n      autofocus: {\n        type: Boolean\n      },\n\n      /**\n       * Stores the previous value of tabindex attribute of the disabled element\n       */\n      _previousTabIndex: {\n        type: Number\n      },\n\n      /**\n       * If true, the user cannot interact with this element.\n       */\n      disabled: {\n        type: Boolean,\n        observer: '_disabledChanged',\n        reflectToAttribute: true\n      },\n\n      _isShiftTabbing: {\n        type: Boolean\n      }\n    };\n  }\n\n  ready() {\n    this.addEventListener('focusin', e => {\n      if (e.composedPath()[0] === this) {\n        this._focus(e);\n      } else if (e.composedPath().indexOf(this.focusElement) !== -1 && !this.disabled) {\n        this._setFocused(true);\n      }\n    });\n    this.addEventListener('focusout', e => this._setFocused(false));\n\n    // In super.ready() other 'focusin' and 'focusout' listeners might be\n    // added, so we call it after our own ones to ensure they execute first.\n    // Issue to watch out: when incorrect, <vaadin-combo-box> refocuses the\n    // input field on iOS after “Done” is pressed.\n    super.ready();\n\n    // This fixes the bug in Firefox 61 (https://bugzilla.mozilla.org/show_bug.cgi?id=1472887)\n    // where focusout event does not go out of shady DOM because composed property in the event is not true\n    const ensureEventComposed = e => {\n      if (!e.composed) {\n        e.target.dispatchEvent(new CustomEvent(e.type, {\n          bubbles: true,\n          composed: true,\n          cancelable: false\n        }));\n      }\n    };\n    this.shadowRoot.addEventListener('focusin', ensureEventComposed);\n    this.shadowRoot.addEventListener('focusout', ensureEventComposed);\n\n    this.addEventListener('keydown', e => {\n      if (!e.defaultPrevented && e.keyCode === 9) {\n        if (e.shiftKey) {\n          // Flag is checked in _focus event handler.\n          this._isShiftTabbing = true;\n          HTMLElement.prototype.focus.apply(this);\n          this._setFocused(false);\n          // Event handling in IE is asynchronous and the flag is removed asynchronously as well\n          setTimeout(() => this._isShiftTabbing = false, 0);\n        } else {\n          // Workaround for FF63-65 bug that causes the focus to get lost when\n          // blurring a slotted component with focusable shadow root content\n          // https://bugzilla.mozilla.org/show_bug.cgi?id=1528686\n          // TODO: Remove when safe\n          const firefox = window.navigator.userAgent.match(/Firefox\\/(\\d\\d\\.\\d)/);\n          if (firefox\n            && parseFloat(firefox[1]) >= 63\n            && parseFloat(firefox[1]) < 66\n            && this.parentNode\n            && this.nextSibling) {\n            const fakeTarget = document.createElement('input');\n            fakeTarget.style.position = 'absolute';\n            fakeTarget.style.opacity = 0;\n            fakeTarget.tabIndex = this.tabIndex;\n\n            this.parentNode.insertBefore(fakeTarget, this.nextSibling);\n            fakeTarget.focus();\n            fakeTarget.addEventListener('focusout', () => this.parentNode.removeChild(fakeTarget));\n          }\n        }\n\n      }\n    });\n\n    if (this.autofocus && !this.focused && !this.disabled) {\n      window.requestAnimationFrame(() => {\n        this._focus();\n        this._setFocused(true);\n        this.setAttribute('focus-ring', '');\n      });\n    }\n\n    this._boundKeydownListener = this._bodyKeydownListener.bind(this);\n    this._boundKeyupListener = this._bodyKeyupListener.bind(this);\n  }\n\n  /**\n   * @protected\n   */\n  connectedCallback() {\n    super.connectedCallback();\n\n    document.body.addEventListener('keydown', this._boundKeydownListener, true);\n    document.body.addEventListener('keyup', this._boundKeyupListener, true);\n  }\n\n  /**\n   * @protected\n   */\n  disconnectedCallback() {\n    super.disconnectedCallback();\n\n    document.body.removeEventListener('keydown', this._boundKeydownListener, true);\n    document.body.removeEventListener('keyup', this._boundKeyupListener, true);\n\n    // in non-Chrome browsers, blur does not fire on the element when it is disconnected.\n    // reproducible in `<vaadin-date-picker>` when closing on `Cancel` or `Today` click.\n    if (this.hasAttribute('focused')) {\n      this._setFocused(false);\n    }\n  }\n\n  _setFocused(focused) {\n    if (focused) {\n      this.setAttribute('focused', '');\n    } else {\n      this.removeAttribute('focused');\n    }\n\n    // focus-ring is true when the element was focused from the keyboard.\n    // Focus Ring [A11ycasts]: https://youtu.be/ilj2P5-5CjI\n    if (focused && this._tabPressed) {\n      this.setAttribute('focus-ring', '');\n    } else {\n      this.removeAttribute('focus-ring');\n    }\n  }\n\n  _bodyKeydownListener(e) {\n    this._tabPressed = e.keyCode === 9;\n  }\n\n  _bodyKeyupListener() {\n    this._tabPressed = false;\n  }\n\n  /**\n   * Any element extending this mixin is required to implement this getter.\n   * It returns the actual focusable element in the component.\n   */\n  get focusElement() {\n    window.console.warn(`Please implement the 'focusElement' property in <${this.localName}>`);\n    return this;\n  }\n\n  _focus(e) {\n    if (this._isShiftTabbing) {\n      return;\n    }\n\n    this.focusElement.focus();\n    this._setFocused(true);\n  }\n\n  /**\n   * Moving the focus from the host element causes firing of the blur event what leads to problems in IE.\n   * @private\n   */\n  focus() {\n    if (!this.focusElement || this.disabled) {\n      return;\n    }\n\n    this.focusElement.focus();\n    this._setFocused(true);\n  }\n\n  /**\n   * Native bluring in the host element does nothing because it does not have the focus.\n   * In chrome it works, but not in FF.\n   * @private\n   */\n  blur() {\n    this.focusElement.blur();\n    this._setFocused(false);\n  }\n\n  _disabledChanged(disabled) {\n    this.focusElement.disabled = disabled;\n    if (disabled) {\n      this.blur();\n      this._previousTabIndex = this.tabindex;\n      this.tabindex = -1;\n      this.setAttribute('aria-disabled', 'true');\n    } else {\n      if (typeof this._previousTabIndex !== 'undefined') {\n        this.tabindex = this._previousTabIndex;\n      }\n      this.removeAttribute('aria-disabled');\n    }\n  }\n\n  _tabindexChanged(tabindex) {\n    if (tabindex !== undefined) {\n      this.focusElement.tabIndex = tabindex;\n    }\n\n    if (this.disabled && this.tabindex) {\n      // If tabindex attribute was changed while checkbox was disabled\n      if (this.tabindex !== -1) {\n        this._previousTabIndex = this.tabindex;\n      }\n      this.tabindex = tabindex = undefined;\n    }\n\n    if (window.ShadyDOM) {\n      this.setProperties({tabIndex: tabindex, tabindex: tabindex});\n    }\n  }\n\n  /**\n   * @protected\n   */\n  click() {\n    if (!this.disabled) {\n      super.click();\n    }\n  }\n};\n","/**\n@license\nCopyright (c) 2017 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\nexport const DatePickerHelper = class VaadinDatePickerHelper {\n  /**\n   * Get ISO 8601 week number for the given date.\n   *\n   * @param {Date} Date object\n   * @return {Number} Week number\n   */\n  static _getISOWeekNumber(date) {\n    // Ported from Vaadin Framework method com.vaadin.client.DateTimeService.getISOWeekNumber(date)\n    var dayOfWeek = date.getDay(); // 0 == sunday\n\n    // ISO 8601 use weeks that start on monday so we use\n    // mon=1,tue=2,...sun=7;\n    if (dayOfWeek === 0) {\n      dayOfWeek = 7;\n    }\n    // Find nearest thursday (defines the week in ISO 8601). The week number\n    // for the nearest thursday is the same as for the target date.\n    var nearestThursdayDiff = 4 - dayOfWeek; // 4 is thursday\n    var nearestThursday = new Date(date.getTime() + nearestThursdayDiff * 24 * 3600 * 1000);\n\n    var firstOfJanuary = new Date(0, 0);\n    firstOfJanuary.setFullYear(nearestThursday.getFullYear());\n\n    var timeDiff = nearestThursday.getTime() - firstOfJanuary.getTime();\n\n    // Rounding the result, as the division doesn't result in an integer\n    // when the given date is inside daylight saving time period.\n    var daysSinceFirstOfJanuary = Math.round(timeDiff / (24 * 3600 * 1000));\n\n    return Math.floor((daysSinceFirstOfJanuary) / 7 + 1);\n  }\n\n  /**\n   * Check if two dates are equal.\n   *\n   * @param {Date} date1\n   * @param {Date} date2\n   * @return {Boolean} True if the given date objects refer to the same date\n   */\n  static _dateEquals(date1, date2) {\n    return date1 instanceof Date && date2 instanceof Date &&\n        date1.getFullYear() === date2.getFullYear() &&\n        date1.getMonth() === date2.getMonth() &&\n        date1.getDate() === date2.getDate();\n  }\n\n  /**\n   * Check if the given date is in the range of allowed dates.\n   *\n   * @param {Date} date The date to check\n   * @param {Date} min Range start\n   * @param {Date} max Range end\n   * @return {Boolean} True if the date is in the range\n   */\n  static _dateAllowed(date, min, max) {\n    return (!min || date >= min) && (!max || date <= max);\n  }\n\n  /**\n   * Get closest date from array of dates.\n   *\n   * @param {Date} date The date to compare dates with\n   * @param {Array} dates Array of date objects\n   * @return {Date} Closest date\n   */\n  static _getClosestDate(date, dates) {\n    return dates.filter(date => date !== undefined)\n      .reduce((closestDate, candidate) => {\n        if (!candidate) {\n          return closestDate;\n        }\n\n        if (!closestDate) {\n          return candidate;\n        }\n\n        var candidateDiff = Math.abs(date.getTime() - candidate.getTime());\n        var closestDateDiff = Math.abs(closestDate.getTime() - date.getTime());\n        return candidateDiff < closestDateDiff ? candidate : closestDate;\n      });\n  }\n\n  /**\n   * Extracts the basic component parts of a date (day, month and year)\n   * to the expected format.\n   */\n  static _extractDateParts(date) {\n    return {\n      day: date.getDate(),\n      month: date.getMonth(),\n      year: date.getFullYear()\n    };\n  }\n};\n","/**\n@license\nCopyright (c) 2017 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\nimport { IronA11yKeysBehavior } from '@polymer/iron-a11y-keys-behavior/iron-a11y-keys-behavior.js';\n\nimport { IronResizableBehavior } from '@polymer/iron-resizable-behavior/iron-resizable-behavior.js';\nimport { DatePickerHelper } from './vaadin-date-picker-helper.js';\nimport { addListener } from '@polymer/polymer/lib/utils/gestures.js';\nimport { mixinBehaviors } from '@polymer/polymer/lib/legacy/class.js';\n\n/**\n * @polymerMixin\n */\nexport const DatePickerMixin = subclass => class VaadinDatePickerMixin extends mixinBehaviors(\n  [IronResizableBehavior], subclass\n) {\n\n  static get properties() {\n    return {\n      /**\n       * The current selected date.\n       */\n      _selectedDate: {\n        type: Date\n      },\n\n      _focusedDate: Date,\n\n      /**\n       * The value for this element.\n       *\n       * Supported date formats:\n       * - ISO 8601 `\"YYYY-MM-DD\"` (default)\n       * - 6-digit extended ISO 8601 `\"+YYYYYY-MM-DD\"`, `\"-YYYYYY-MM-DD\"`\n       *\n       * @type {String}\n       */\n      value: {\n        type: String,\n        observer: '_valueChanged',\n        notify: true,\n        value: ''\n      },\n\n      /**\n       * Set to true to mark the input as required.\n       */\n      required: {\n        type: Boolean,\n        value: false\n      },\n\n      /**\n       * The name of this element.\n       */\n      name: {\n        type: String\n      },\n\n      /**\n       * Date which should be visible when there is no value selected.\n       *\n       * The same date formats as for the `value` property are supported.\n       */\n      initialPosition: String,\n\n      /**\n       * The label for this element.\n       */\n      label: String,\n\n      /**\n       * Set true to open the date selector overlay.\n       */\n      opened: {\n        type: Boolean,\n        reflectToAttribute: true,\n        notify: true,\n        observer: '_openedChanged'\n      },\n\n      /**\n       * Set true to display ISO-8601 week numbers in the calendar. Notice that\n       * displaying week numbers is only supported when `i18n.firstDayOfWeek`\n       * is 1 (Monday).\n       */\n      showWeekNumbers: {\n        type: Boolean\n      },\n\n      _fullscreen: {\n        value: false,\n        observer: '_fullscreenChanged'\n      },\n\n      _fullscreenMediaQuery: {\n        value: '(max-width: 420px), (max-height: 420px)'\n      },\n\n      // An array of ancestor elements whose -webkit-overflow-scrolling is forced from value\n      // 'touch' to value 'auto' in order to prevent them from clipping the dropdown. iOS only.\n      _touchPrevented: Array,\n\n      /**\n       * The object used to localize this component.\n       * To change the default localization, replace the entire\n       * _i18n_ object or just the property you want to modify.\n       *\n       * The object has the following JSON structure and default values:\n\n          {\n            // An array with the full names of months starting\n            // with January.\n            monthNames: [\n              'January', 'February', 'March', 'April', 'May',\n              'June', 'July', 'August', 'September',\n              'October', 'November', 'December'\n            ],\n\n            // An array of weekday names starting with Sunday. Used\n            // in screen reader announcements.\n            weekdays: [\n              'Sunday', 'Monday', 'Tuesday', 'Wednesday',\n              'Thursday', 'Friday', 'Saturday'\n            ],\n\n            // An array of short weekday names starting with Sunday.\n            // Displayed in the calendar.\n            weekdaysShort: [\n              'Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'\n            ],\n\n            // An integer indicating the first day of the week\n            // (0 = Sunday, 1 = Monday, etc.).\n            firstDayOfWeek: 0,\n\n            // Used in screen reader announcements along with week\n            // numbers, if they are displayed.\n            week: 'Week',\n\n            // Translation of the Calendar icon button title.\n            calendar: 'Calendar',\n\n            // Translation of the Clear icon button title.\n            clear: 'Clear',\n\n            // Translation of the Today shortcut button text.\n            today: 'Today',\n\n            // Translation of the Cancel button text.\n            cancel: 'Cancel',\n\n            // A function to format given `Object` as\n            // date string. Object is in the format `{ day: ..., month: ..., year: ... }`\n            // Note: The argument month is 0-based. This means that January = 0 and December = 11.\n            formatDate: d => {\n              // returns a string representation of the given\n              // object in 'MM/DD/YYYY' -format\n            },\n\n            // A function to parse the given text to an `Object` in the format `{ day: ..., month: ..., year: ... }`.\n            // Must properly parse (at least) text formatted by `formatDate`.\n            // Setting the property to null will disable keyboard input feature.\n            // Note: The argument month is 0-based. This means that January = 0 and December = 11.\n            parseDate: text => {\n              // Parses a string in 'MM/DD/YY', 'MM/DD' or 'DD' -format to\n              // an `Object` in the format `{ day: ..., month: ..., year: ... }`.\n            }\n\n            // A function to format given `monthName` and\n            // `fullYear` integer as calendar title string.\n            formatTitle: (monthName, fullYear) => {\n              return monthName + ' ' + fullYear;\n            }\n          }\n\n       *\n       * @default {English/US}\n       */\n      i18n: {\n        type: Object,\n        value: () => {\n          return {\n            monthNames: [\n              'January', 'February', 'March', 'April', 'May',\n              'June', 'July', 'August', 'September', 'October', 'November', 'December'\n            ],\n            weekdays: ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'],\n            weekdaysShort: ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'],\n            firstDayOfWeek: 0,\n            week: 'Week',\n            calendar: 'Calendar',\n            clear: 'Clear',\n            today: 'Today',\n            cancel: 'Cancel',\n            formatDate: d => {\n              const yearStr = String(d.year).replace(/\\d+/, y => '0000'.substr(y.length) + y);\n              return [d.month + 1, d.day, yearStr].join('/');\n            },\n            parseDate: text => {\n              const parts = text.split('/');\n              const today = new Date();\n              let date, month = today.getMonth(), year = today.getFullYear();\n\n              if (parts.length === 3) {\n                year = parseInt(parts[2]);\n                if (parts[2].length < 3 && year >= 0) {\n                  year += year < 50 ? 2000 : 1900;\n                }\n                month = parseInt(parts[0]) - 1;\n                date = parseInt(parts[1]);\n              } else if (parts.length === 2) {\n                month = parseInt(parts[0]) - 1;\n                date = parseInt(parts[1]);\n              } else if (parts.length === 1) {\n                date = parseInt(parts[0]);\n              }\n\n              if (date !== undefined) {\n                return {day: date, month, year};\n              }\n            },\n            formatTitle: (monthName, fullYear) => {\n              return monthName + ' ' + fullYear;\n            }\n          };\n        }\n      },\n\n      /**\n       * The earliest date that can be selected. All earlier dates will be disabled.\n       *\n       * Supported date formats:\n       * - ISO 8601 `\"YYYY-MM-DD\"` (default)\n       * - 6-digit extended ISO 8601 `\"+YYYYYY-MM-DD\"`, `\"-YYYYYY-MM-DD\"`\n       *\n       * @type {String}\n       */\n      min: {\n        type: String,\n        observer: '_minChanged'\n      },\n\n      /**\n       * The latest date that can be selected. All later dates will be disabled.\n       *\n       * Supported date formats:\n       * - ISO 8601 `\"YYYY-MM-DD\"` (default)\n       * - 6-digit extended ISO 8601 `\"+YYYYYY-MM-DD\"`, `\"-YYYYYY-MM-DD\"`\n       *\n       * @type {String}\n       */\n      max: {\n        type: String,\n        observer: '_maxChanged'\n      },\n\n      /**\n       * The earliest date that can be selected. All earlier dates will be disabled.\n       */\n      _minDate: {\n        type: Date,\n        // null does not work here because minimizer passes undefined to overlay (#351)\n        value: ''\n      },\n\n      /**\n       * The latest date that can be selected. All later dates will be disabled.\n       */\n      _maxDate: {\n        type: Date,\n        value: ''\n      },\n\n      _noInput: {\n        type: Boolean,\n        computed: '_isNoInput(_fullscreen, _ios, i18n, i18n.*)'\n      },\n\n      _ios: {\n        type: Boolean,\n        value: navigator.userAgent.match(/iP(?:hone|ad;(?: U;)? CPU) OS (\\d+)/)\n      },\n\n      _webkitOverflowScroll: {\n        type: Boolean,\n        value: document.createElement('div').style.webkitOverflowScrolling === ''\n      },\n\n      _ignoreAnnounce: {\n        value: true\n      },\n\n      _focusOverlayOnOpen: Boolean,\n\n      _overlayInitialized: Boolean\n    };\n  }\n\n  static get observers() {\n    return [\n      '_updateHasValue(value)',\n      '_validateInput(_selectedDate, _minDate, _maxDate)',\n      '_selectedDateChanged(_selectedDate, i18n.formatDate)',\n      '_focusedDateChanged(_focusedDate, i18n.formatDate)',\n      '_announceFocusedDate(_focusedDate, opened, _ignoreAnnounce)'\n    ];\n  }\n\n  ready() {\n    super.ready();\n    this._boundOnScroll = this._onScroll.bind(this);\n    this._boundFocus = this._focus.bind(this);\n    this._boundUpdateAlignmentAndPosition = this._updateAlignmentAndPosition.bind(this);\n    addListener(this, 'tap', this.open);\n    this.addEventListener('touchend', this._preventDefault.bind(this));\n    this.addEventListener('keydown', this._onKeydown.bind(this));\n    this.addEventListener('input', this._onUserInput.bind(this));\n    this.addEventListener('focus', e => this._noInput && e.target.blur());\n  }\n\n  _initOverlay() {\n    this.$.overlay.removeAttribute('disable-upgrade');\n    this._overlayInitialized = true;\n\n    this.$.overlay.addEventListener('opened-changed', e => this.opened = e.detail.value);\n\n    this._overlayContent.addEventListener('close', this._close.bind(this));\n    this._overlayContent.addEventListener('focus-input', this._focusAndSelect.bind(this));\n    this.$.overlay.addEventListener('vaadin-overlay-escape-press', this._boundFocus);\n\n    // Keep focus attribute in focusElement for styling\n    this._overlayContent.addEventListener('focus', () => this.focusElement._setFocused(true));\n\n    this.$.overlay.addEventListener('vaadin-overlay-close', this._onVaadinOverlayClose.bind(this));\n  }\n\n  /**\n   * @protected\n   */\n  disconnectedCallback() {\n    super.disconnectedCallback();\n\n    if (this._overlayInitialized) {\n      this.$.overlay.removeEventListener('vaadin-overlay-escape-press', this._boundFocus);\n    }\n\n    this.opened = false;\n  }\n\n  /**\n   * Opens the dropdown.\n   */\n  open() {\n    if (!this.disabled && !this.readonly) {\n      this.opened = true;\n    }\n  }\n\n  _close(e) {\n    if (e) {\n      e.stopPropagation();\n    }\n    this._focus();\n    this.close();\n  }\n\n  /**\n   * Closes the dropdown.\n   */\n  close() {\n    if (this._overlayInitialized) {\n      this.$.overlay.close();\n    }\n  }\n\n  get _inputElement() {\n    return this._input();\n  }\n\n  get _nativeInput() {\n    if (this._inputElement) {\n      // vaadin-text-field's input is focusElement\n      // iron-input's input is inputElement\n      return this._inputElement.focusElement ? this._inputElement.focusElement :\n        this._inputElement.inputElement ? this._inputElement.inputElement :\n          window.unwrap ? window.unwrap(this._inputElement) : this._inputElement;\n    }\n  }\n\n  _parseDate(str) {\n    // Parsing with RegExp to ensure correct format\n    var parts = /^([-+]\\d{1}|\\d{2,4}|[-+]\\d{6})-(\\d{1,2})-(\\d{1,2})$/.exec(str);\n    if (!parts) {\n      return;\n    }\n\n    var date = new Date(0, 0); // Wrong date (1900-01-01), but with midnight in local time\n    date.setFullYear(parseInt(parts[1], 10));\n    date.setMonth(parseInt(parts[2], 10) - 1);\n    date.setDate(parseInt(parts[3], 10));\n    return date;\n  }\n\n  _isNoInput(fullscreen, ios, i18n) {\n    return !this._inputElement || fullscreen || ios || !i18n.parseDate;\n  }\n\n  _formatISO(date) {\n    if (!(date instanceof Date)) {\n      return '';\n    }\n\n    const pad = (num, fmt = '00') => (fmt + num).substr((fmt + num).length - fmt.length);\n\n    let yearSign = '';\n    let yearFmt = '0000';\n    let yearAbs = date.getFullYear();\n    if (yearAbs < 0) {\n      yearAbs = -yearAbs;\n      yearSign = '-';\n      yearFmt = '000000';\n    } else if (date.getFullYear() >= 10000) {\n      yearSign = '+';\n      yearFmt = '000000';\n    }\n\n    const year = yearSign + pad(yearAbs, yearFmt);\n    const month = pad(date.getMonth() + 1);\n    const day = pad(date.getDate());\n    return [year, month, day].join('-');\n  }\n\n  _openedChanged(opened) {\n    if (opened && !this._overlayInitialized) {\n      this._initOverlay();\n    }\n    if (this._overlayInitialized) {\n      this.$.overlay.opened = opened;\n    }\n    if (opened) {\n      this._updateAlignmentAndPosition();\n    }\n  }\n\n  _selectedDateChanged(selectedDate, formatDate) {\n    if (selectedDate === undefined || formatDate === undefined) {\n      return;\n    }\n    if (this.__userInputOccurred) {\n      this.__dispatchChange = true;\n    }\n    const inputValue = selectedDate && formatDate(DatePickerHelper._extractDateParts(selectedDate));\n    const value = this._formatISO(selectedDate);\n    if (value !== this.value) {\n      this.validate(inputValue);\n      this.value = value;\n    }\n    this.__userInputOccurred = false;\n    this.__dispatchChange = false;\n    this._focusedDate = selectedDate;\n    this._inputValue = selectedDate ? inputValue : '';\n  }\n\n  _focusedDateChanged(focusedDate, formatDate) {\n    if (focusedDate === undefined || formatDate === undefined) {\n      return;\n    }\n    this.__userInputOccurred = true;\n    if (!this._ignoreFocusedDateChange && !this._noInput) {\n      this._inputValue = focusedDate ? formatDate(DatePickerHelper._extractDateParts(focusedDate)) : '';\n    }\n  }\n\n  _updateHasValue(value) {\n    if (value) {\n      this.setAttribute('has-value', '');\n    } else {\n      this.removeAttribute('has-value');\n    }\n  }\n\n\n  __getOverlayTheme(theme, overlayInitialized) {\n    if (overlayInitialized) {\n      return theme;\n    }\n  }\n\n  _handleDateChange(property, value, oldValue) {\n    if (!value) {\n      this[property] = '';\n      return;\n    }\n\n    var date = this._parseDate(value);\n    if (!date) {\n      this.value = oldValue;\n      return;\n    }\n    if (!DatePickerHelper._dateEquals(this[property], date)) {\n      this[property] = date;\n    }\n  }\n\n  _valueChanged(value, oldValue) {\n    if (this.__dispatchChange) {\n      this.dispatchEvent(new CustomEvent('change', {bubbles: true}));\n    }\n    this._handleDateChange('_selectedDate', value, oldValue);\n  }\n\n  _minChanged(value, oldValue) {\n    this._handleDateChange('_minDate', value, oldValue);\n  }\n\n  _maxChanged(value, oldValue) {\n    this._handleDateChange('_maxDate', value, oldValue);\n  }\n\n  _updateAlignmentAndPosition() {\n    if (!this._overlayInitialized) {\n      return;\n    }\n    if (!this._fullscreen) {\n      const inputRect = this._inputElement.getBoundingClientRect();\n\n      const bottomAlign = inputRect.top > window.innerHeight / 2;\n      const rightAlign = inputRect.left + this.clientWidth / 2 > window.innerWidth / 2;\n\n      if (rightAlign) {\n        const viewportWidth = Math.min(window.innerWidth, document.documentElement.clientWidth);\n        this.$.overlay.setAttribute('right-aligned', '');\n        this.$.overlay.style.removeProperty('left');\n        this.$.overlay.style.right = (viewportWidth - inputRect.right) + 'px';\n      } else {\n        this.$.overlay.removeAttribute('right-aligned');\n        this.$.overlay.style.removeProperty('right');\n        this.$.overlay.style.left = inputRect.left + 'px';\n      }\n\n      if (bottomAlign) {\n        const viewportHeight = Math.min(window.innerHeight, document.documentElement.clientHeight);\n        this.$.overlay.setAttribute('bottom-aligned', '');\n        this.$.overlay.style.removeProperty('top');\n        this.$.overlay.style.bottom = (viewportHeight - inputRect.top) + 'px';\n      } else {\n        this.$.overlay.removeAttribute('bottom-aligned');\n        this.$.overlay.style.removeProperty('bottom');\n        this.$.overlay.style.top = inputRect.bottom + 'px';\n      }\n    }\n\n    this.$.overlay.setAttribute('dir',\n      getComputedStyle(this._inputElement).getPropertyValue('direction')\n    );\n    this._overlayContent._repositionYearScroller();\n  }\n\n  _fullscreenChanged() {\n    if (this._overlayInitialized && this.$.overlay.opened) {\n      this._updateAlignmentAndPosition();\n    }\n  }\n\n  _onOverlayOpened() {\n    this._openedWithFocusRing = this.hasAttribute('focus-ring') || (this.focusElement && this.focusElement.hasAttribute('focus-ring'));\n\n    var parsedInitialPosition = this._parseDate(this.initialPosition);\n\n    var initialPosition = this._selectedDate || this._overlayContent.initialPosition ||\n      parsedInitialPosition || new Date();\n\n    if (parsedInitialPosition ||\n      DatePickerHelper._dateAllowed(initialPosition, this._minDate, this._maxDate)) {\n      this._overlayContent.initialPosition = initialPosition;\n    } else {\n      this._overlayContent.initialPosition =\n        DatePickerHelper._getClosestDate(initialPosition, [this._minDate, this._maxDate]);\n    }\n\n    this._overlayContent.scrollToDate(this._overlayContent.focusedDate || this._overlayContent.initialPosition);\n    // Have a default focused date\n    this._ignoreFocusedDateChange = true;\n    this._overlayContent.focusedDate = this._overlayContent.focusedDate || this._overlayContent.initialPosition;\n    this._ignoreFocusedDateChange = false;\n\n    window.addEventListener('scroll', this._boundOnScroll, true);\n    this.addEventListener('iron-resize', this._boundUpdateAlignmentAndPosition);\n\n    if (this._webkitOverflowScroll) {\n      this._touchPrevented = this._preventWebkitOverflowScrollingTouch(this.parentElement);\n    }\n\n    if (this._focusOverlayOnOpen) {\n      this._overlayContent.focus();\n      this._focusOverlayOnOpen = false;\n    } else {\n      this._focus();\n    }\n\n    if (this._noInput && this.focusElement) {\n      this.focusElement.blur();\n    }\n\n    this.updateStyles();\n\n    this._ignoreAnnounce = false;\n  }\n\n  // A hack needed for iOS to prevent dropdown from being clipped in an\n  // ancestor container with -webkit-overflow-scrolling: touch;\n  _preventWebkitOverflowScrollingTouch(element) {\n    var result = [];\n    while (element) {\n      if (window.getComputedStyle(element).webkitOverflowScrolling === 'touch') {\n        var oldInlineValue = element.style.webkitOverflowScrolling;\n        element.style.webkitOverflowScrolling = 'auto';\n        result.push({\n          element: element,\n          oldInlineValue: oldInlineValue\n        });\n      }\n      element = element.parentElement;\n    }\n    return result;\n  }\n\n  _onOverlayClosed() {\n    this._ignoreAnnounce = true;\n\n    window.removeEventListener('scroll', this._boundOnScroll, true);\n    this.removeEventListener('iron-resize', this._boundUpdateAlignmentAndPosition);\n\n    if (this._touchPrevented) {\n      this._touchPrevented.forEach(prevented =>\n        prevented.element.style.webkitOverflowScrolling = prevented.oldInlineValue);\n      this._touchPrevented = [];\n    }\n\n    this.updateStyles();\n\n    // Select the parsed input or focused date\n    this._ignoreFocusedDateChange = true;\n    if (this.i18n.parseDate) {\n      var inputValue = this._inputValue || '';\n      const dateObject = this.i18n.parseDate(inputValue);\n      const parsedDate = dateObject &&\n        this._parseDate(`${dateObject.year}-${dateObject.month + 1}-${dateObject.day}`);\n\n      if (this._isValidDate(parsedDate)) {\n        this._selectedDate = parsedDate;\n      } else {\n        this._selectedDate = null;\n        this._inputValue = inputValue;\n      }\n    } else if (this._focusedDate) {\n      this._selectedDate = this._focusedDate;\n    }\n    this._ignoreFocusedDateChange = false;\n\n    if (this._nativeInput && this._nativeInput.selectionStart) {\n      this._nativeInput.selectionStart = this._nativeInput.selectionEnd;\n    }\n    this.validate();\n  }\n\n  /**\n   * Returns true if `value` is valid, and sets the `invalid` flag appropriately.\n   *\n   * @param {string} value Value to validate. Optional, defaults to user's input value.\n   * @return {boolean} True if the value is valid and sets the `invalid` flag appropriately\n   */\n  validate(value) {\n    // reset invalid state on the underlying text field\n    this.invalid = false;\n    value = value !== undefined ? value : this._inputValue;\n    return !(this.invalid = !this.checkValidity(value));\n  }\n\n  /**\n   * Returns true if the current input value satisfies all constraints (if any)\n   *\n   * Override the `checkValidity` method for custom validations.\n   *\n   * @param {string} value Value to validate. Optional, defaults to the selected date.\n   * @return {boolean} True if the value is valid\n   */\n  checkValidity(value) {\n    var inputValid = !value ||\n      (this._selectedDate && value === this.i18n.formatDate(DatePickerHelper._extractDateParts(this._selectedDate)));\n    var minMaxValid = !this._selectedDate ||\n      DatePickerHelper._dateAllowed(this._selectedDate, this._minDate, this._maxDate);\n\n    var inputValidity = true;\n    if (this._inputElement) {\n      if (this._inputElement.checkValidity) {\n        // vaadin native input elements have the checkValidity method\n        inputValidity = this._inputElement.checkValidity(value);\n      } else if (this._inputElement.validate) {\n        // iron-form-elements have the validate API\n        inputValidity = this._inputElement.validate(value);\n      }\n    }\n\n    return inputValid && minMaxValid && inputValidity;\n  }\n\n  _onScroll(e) {\n    if (e.target === window || !this._overlayContent.contains(e.target)) {\n      this._updateAlignmentAndPosition();\n    }\n  }\n\n  _focus() {\n    if (this._noInput) {\n      this._overlayInitialized && this._overlayContent.focus();\n    } else {\n      this._inputElement.focus();\n    }\n  }\n\n  _focusAndSelect() {\n    this._focus();\n    this._setSelectionRange(0, this._inputValue.length);\n  }\n\n  _setSelectionRange(a, b) {\n    if (this._nativeInput && this._nativeInput.setSelectionRange) {\n      this._nativeInput.setSelectionRange(a, b);\n    }\n  }\n\n  _preventDefault(e) {\n    e.preventDefault();\n  }\n\n  /**\n   * Keyboard Navigation\n   */\n  _eventKey(e) {\n    var keys = ['down', 'up', 'enter', 'esc', 'tab'];\n\n    for (var i = 0; i < keys.length; i++) {\n      var k = keys[i];\n      if (IronA11yKeysBehavior.keyboardEventMatchesKeys(e, k)) {\n        return k;\n      }\n    }\n  }\n\n  _isValidDate(d) {\n    return d && !isNaN(d.getTime());\n  }\n\n  _onKeydown(e) {\n    if (this._noInput) {\n      // The input element cannot be readonly as it would conflict with\n      // the required attribute. Both are not allowed on an input element.\n      // Therefore we prevent default on most keydown events.\n      var allowedKeys = [\n        9 // tab\n      ];\n      if (allowedKeys.indexOf(e.keyCode) === -1) {\n        e.preventDefault();\n      }\n    }\n\n    switch (this._eventKey(e)) {\n      case 'down':\n      case 'up':\n        // prevent scrolling the page with arrows\n        e.preventDefault();\n\n        if (this.opened) {\n          this._overlayContent.focus();\n          this._overlayContent._onKeydown(e);\n        } else {\n          this._focusOverlayOnOpen = true;\n          this.open();\n        }\n\n        break;\n      case 'enter': {\n        const dateObject = this.i18n.parseDate(this._inputValue);\n        const parsedDate = dateObject &&\n          this._parseDate(dateObject.year + '-' + (dateObject.month + 1) + '-' + dateObject.day);\n\n        if (this._overlayContent.focusedDate && this._isValidDate(parsedDate)) {\n          this._selectedDate = this._overlayContent.focusedDate;\n        }\n        this.close();\n        break;\n      }\n      case 'esc':\n        this._focusedDate = this._selectedDate;\n        this._close();\n        break;\n      case 'tab':\n        if (this.opened) {\n          e.preventDefault();\n          // Clear the selection range (remains visible on IE)\n          this._setSelectionRange(0, 0);\n          if (e.shiftKey) {\n            this._overlayContent.focusCancel();\n          } else {\n            this._overlayContent.focus();\n            this._overlayContent.revealDate(this._focusedDate);\n          }\n\n        }\n        break;\n    }\n  }\n\n  _validateInput(date, min, max) {\n    if (date && (min || max)) {\n      this.invalid = !DatePickerHelper._dateAllowed(date, min, max);\n    }\n  }\n\n  _onUserInput(e) {\n    if (!this.opened) {\n      this.open();\n    }\n    this._userInputValueChanged();\n  }\n\n  _userInputValueChanged(value) {\n    if (this.opened && this._inputValue) {\n      const dateObject = this.i18n.parseDate && this.i18n.parseDate(this._inputValue);\n      const parsedDate = dateObject &&\n        this._parseDate(`${dateObject.year}-${dateObject.month + 1}-${dateObject.day}`);\n\n      if (this._isValidDate(parsedDate)) {\n        this._ignoreFocusedDateChange = true;\n        if (!DatePickerHelper._dateEquals(parsedDate, this._focusedDate)) {\n          this._focusedDate = parsedDate;\n        }\n        this._ignoreFocusedDateChange = false;\n      }\n    }\n  }\n\n  _announceFocusedDate(_focusedDate, opened, _ignoreAnnounce) {\n    if (opened && !_ignoreAnnounce) {\n      this._overlayContent.announceFocusedDate();\n    }\n  }\n\n  get _overlayContent() {\n    return this.$.overlay.content.querySelector('#overlay-content');\n  }\n\n  /**\n   * Fired when the user commits a value change.\n   *\n   * @event change\n   */\n};\n","/**\n@license\nCopyright (c) 2017 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport { GestureEventListeners } from '@polymer/polymer/lib/mixins/gesture-event-listeners.js';\nimport '@polymer/iron-media-query/iron-media-query.js';\nimport { IronA11yKeysBehavior } from '@polymer/iron-a11y-keys-behavior/iron-a11y-keys-behavior.js';\nimport { IronA11yAnnouncer } from '@polymer/iron-a11y-announcer/iron-a11y-announcer.js';\nimport '@vaadin/vaadin-button/src/vaadin-button.js';\nimport { ThemableMixin } from '@vaadin/vaadin-themable-mixin/vaadin-themable-mixin.js';\nimport { ThemePropertyMixin } from '@vaadin/vaadin-themable-mixin/vaadin-theme-property-mixin.js';\nimport './vaadin-month-calendar.js';\nimport './vaadin-infinite-scroller.js';\nimport { DatePickerHelper } from './vaadin-date-picker-helper.js';\nimport './vaadin-date-picker-styles.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { addListener, setTouchAction } from '@polymer/polymer/lib/utils/gestures.js';\nimport { Debouncer } from '@polymer/polymer/lib/utils/debounce.js';\nimport { timeOut } from '@polymer/polymer/lib/utils/async.js';\n/**\n * @memberof Vaadin\n * @private\n */\nclass DatePickerOverlayContentElement extends\n  ThemableMixin(\n    ThemePropertyMixin(\n      GestureEventListeners(PolymerElement))) {\n  static get template() {\n    return html`\n    <style>\n      :host {\n        display: flex;\n        flex-direction: column;\n        height: 100%;\n        width: 100%;\n        outline: none;\n        background: #fff;\n      }\n\n      [part=\"overlay-header\"] {\n        display: flex;\n        flex-shrink: 0;\n        flex-wrap: nowrap;\n        align-items: center;\n      }\n\n      :host(:not([fullscreen])) [part=\"overlay-header\"] {\n        display: none;\n      }\n\n      [part=\"label\"] {\n        flex-grow: 1;\n      }\n\n      [part=\"clear-button\"]:not([showclear]) {\n        display: none;\n      }\n\n      [part=\"years-toggle-button\"] {\n        display: flex;\n      }\n\n      [part=\"years-toggle-button\"][desktop] {\n        display: none;\n      }\n\n      :host(:not([years-visible])) [part=\"years-toggle-button\"]::before {\n        transform: rotate(180deg);\n      }\n\n      #scrollers {\n        display: flex;\n        height: 100%;\n        width: 100%;\n        position: relative;\n        overflow: hidden;\n      }\n\n      [part=\"months\"],\n      [part=\"years\"] {\n        height: 100%;\n      }\n\n      [part=\"months\"] {\n        --vaadin-infinite-scroller-item-height: 270px;\n        position: absolute;\n        top: 0;\n        left: 0;\n        right: 0;\n        bottom: 0;\n      }\n\n      #scrollers[desktop] [part=\"months\"] {\n        right: 50px;\n        transform: none !important;\n      }\n\n      [part=\"years\"] {\n        --vaadin-infinite-scroller-item-height: 80px;\n        width: 50px;\n        position: absolute;\n        right: 0;\n        transform: translateX(100%);\n        -webkit-tap-highlight-color: transparent;\n        -webkit-user-select: none;\n        -moz-user-select: none;\n        -ms-user-select: none;\n        user-select: none;\n        /* Center the year scroller position. */\n        --vaadin-infinite-scroller-buffer-offset: 50%;\n      }\n\n      #scrollers[desktop] [part=\"years\"] {\n        position: absolute;\n        transform: none !important;\n      }\n\n      [part=\"years\"]::before {\n        content: '';\n        display: block;\n        background: transparent;\n        width: 0;\n        height: 0;\n        position: absolute;\n        left: 0;\n        top: 50%;\n        transform: translateY(-50%);\n        border-width: 6px;\n        border-style: solid;\n        border-color: transparent;\n        border-left-color: #000;\n      }\n\n      :host(.animate) [part=\"months\"],\n      :host(.animate) [part=\"years\"] {\n        transition: all 200ms;\n      }\n\n      [part=\"toolbar\"] {\n        display: flex;\n        justify-content: space-between;\n        z-index: 2;\n        flex-shrink: 0;\n      }\n\n      [part~=\"overlay-header\"]:not([desktop]) {\n        padding-bottom: 40px;\n      }\n\n      [part~=\"years-toggle-button\"] {\n        position: absolute;\n        top: auto;\n        right: 8px;\n        bottom: 0;\n        z-index: 1;\n        padding: 8px;\n      }\n\n      #announcer {\n        display: inline-block;\n        position: fixed;\n        clip: rect(0, 0, 0, 0);\n        clip-path: inset(100%);\n      }\n    </style>\n\n    <div id=\"announcer\" role=\"alert\" aria-live=\"polite\">\n      [[i18n.calendar]]\n    </div>\n\n    <div part=\"overlay-header\" on-touchend=\"_preventDefault\" desktop\\$=\"[[_desktopMode]]\" aria-hidden=\"true\">\n      <div part=\"label\">[[_formatDisplayed(selectedDate, i18n.formatDate, label)]]</div>\n      <div part=\"clear-button\" on-tap=\"_clear\" showclear\\$=\"[[_showClear(selectedDate)]]\"></div>\n      <div part=\"toggle-button\" on-tap=\"_cancel\"></div>\n\n      <div part=\"years-toggle-button\" desktop\\$=\"[[_desktopMode]]\" on-tap=\"_toggleYearScroller\" aria-hidden=\"true\">\n        [[_yearAfterXMonths(_visibleMonthIndex)]]\n      </div>\n    </div>\n\n    <div id=\"scrollers\" desktop\\$=\"[[_desktopMode]]\" on-track=\"_track\">\n      <vaadin-infinite-scroller id=\"monthScroller\" on-custom-scroll=\"_onMonthScroll\" on-touchstart=\"_onMonthScrollTouchStart\" buffer-size=\"3\" active=\"[[initialPosition]]\" part=\"months\">\n        <template>\n          <vaadin-month-calendar i18n=\"[[i18n]]\" month=\"[[_dateAfterXMonths(index)]]\" selected-date=\"{{selectedDate}}\" focused-date=\"[[focusedDate]]\" ignore-taps=\"[[_ignoreTaps]]\" show-week-numbers=\"[[showWeekNumbers]]\" min-date=\"[[minDate]]\" max-date=\"[[maxDate]]\" focused\\$=\"[[_focused]]\" part=\"month\" theme\\$=\"[[theme]]\">\n          </vaadin-month-calendar>\n        </template>\n      </vaadin-infinite-scroller>\n      <vaadin-infinite-scroller id=\"yearScroller\" on-tap=\"_onYearTap\" on-custom-scroll=\"_onYearScroll\" on-touchstart=\"_onYearScrollTouchStart\" buffer-size=\"12\" active=\"[[initialPosition]]\" part=\"years\">\n        <template>\n          <div part=\"year-number\" role=\"button\" current\\$=\"[[_isCurrentYear(index)]]\" selected\\$=\"[[_isSelectedYear(index, selectedDate)]]\">\n            [[_yearAfterXYears(index)]]\n          </div>\n          <div part=\"year-separator\" aria-hidden=\"true\"></div>\n        </template>\n      </vaadin-infinite-scroller>\n    </div>\n\n    <div on-touchend=\"_preventDefault\" role=\"toolbar\" part=\"toolbar\">\n      <vaadin-button id=\"todayButton\" part=\"today-button\" disabled=\"[[!_isTodayAllowed(minDate, maxDate)]]\" on-tap=\"_onTodayTap\">\n        [[i18n.today]]\n      </vaadin-button>\n      <vaadin-button id=\"cancelButton\" part=\"cancel-button\" on-tap=\"_cancel\">\n        [[i18n.cancel]]\n      </vaadin-button>\n    </div>\n\n    <iron-media-query query=\"(min-width: 375px)\" query-matches=\"{{_desktopMode}}\"></iron-media-query>\n`;\n  }\n\n  static get is() {\n    return 'vaadin-date-picker-overlay-content';\n  }\n\n  static get properties() {\n    return {\n      /**\n       * The value for this element.\n       */\n      selectedDate: {\n        type: Date,\n        notify: true\n      },\n\n      /**\n       * Date value which is focused using keyboard.\n       */\n      focusedDate: {\n        type: Date,\n        notify: true,\n        observer: '_focusedDateChanged'\n      },\n\n      _focusedMonthDate: Number,\n\n      /**\n       * Date which should be visible when there is no value selected.\n       */\n      initialPosition: {\n        type: Date,\n        observer: '_initialPositionChanged'\n      },\n\n      _originDate: {\n        value: new Date()\n      },\n\n      _visibleMonthIndex: Number,\n\n      _desktopMode: Boolean,\n\n      _translateX: {\n        observer: '_translateXChanged'\n      },\n\n      _yearScrollerWidth: {\n        value: 50\n      },\n\n      i18n: {\n        type: Object\n      },\n\n      showWeekNumbers: {\n        type: Boolean\n      },\n\n      _ignoreTaps: Boolean,\n\n      _notTapping: Boolean,\n\n      /**\n       * The earliest date that can be selected. All earlier dates will be disabled.\n       */\n      minDate: Date,\n\n      /**\n       * The latest date that can be selected. All later dates will be disabled.\n       */\n      maxDate: Date,\n\n      _focused: Boolean,\n\n      /**\n       * Input label\n       */\n      label: String\n    };\n  }\n\n  ready() {\n    super.ready();\n    this.setAttribute('tabindex', 0);\n    this.addEventListener('keydown', this._onKeydown.bind(this));\n    addListener(this, 'tap', this._stopPropagation);\n    this.addEventListener('focus', this._onOverlayFocus.bind(this));\n    this.addEventListener('blur', this._onOverlayBlur.bind(this));\n  }\n\n  /**\n   * Fired when the scroller reaches the target scrolling position.\n   * @event scroll-animation-finished\n   * @param {Number} detail.position new position\n   * @param {Number} detail.oldPosition old position\n   */\n\n  connectedCallback() {\n    super.connectedCallback();\n    this._closeYearScroller();\n    this._toggleAnimateClass(true);\n    setTouchAction(this.$.scrollers, 'pan-y');\n    IronA11yAnnouncer.requestAvailability();\n  }\n\n  announceFocusedDate() {\n    var focusedDate = this._currentlyFocusedDate();\n    var announce = [];\n    if (DatePickerHelper._dateEquals(focusedDate, new Date())) {\n      announce.push(this.i18n.today);\n    }\n    announce = announce.concat([\n      this.i18n.weekdays[focusedDate.getDay()],\n      focusedDate.getDate(),\n      this.i18n.monthNames[focusedDate.getMonth()],\n      focusedDate.getFullYear()\n    ]);\n    if (this.showWeekNumbers && this.i18n.firstDayOfWeek === 1) {\n      announce.push(this.i18n.week);\n      announce.push(DatePickerHelper._getISOWeekNumber(focusedDate));\n    }\n    this.dispatchEvent(new CustomEvent('iron-announce', {\n      bubbles: true,\n      composed: true,\n      detail: {\n        text: announce.join(' ')\n      }\n    }));\n    return;\n  }\n\n  /**\n   * Focuses the cancel button\n   */\n  focusCancel() {\n    this.$.cancelButton.focus();\n  }\n\n  /**\n   * Scrolls the list to the given Date.\n   */\n  scrollToDate(date, animate) {\n    this._scrollToPosition(this._differenceInMonths(date, this._originDate), animate);\n  }\n\n  _focusedDateChanged(focusedDate) {\n    this.revealDate(focusedDate);\n  }\n\n  _isCurrentYear(yearsFromNow) {\n    return yearsFromNow === 0;\n  }\n\n  _isSelectedYear(yearsFromNow, selectedDate) {\n    if (selectedDate) {\n      return selectedDate.getFullYear() === this._originDate.getFullYear() + yearsFromNow;\n    }\n  }\n\n  /**\n   * Scrolls the month and year scrollers enough to reveal the given date.\n   */\n  revealDate(date) {\n    if (date) {\n      var diff = this._differenceInMonths(date, this._originDate);\n      var scrolledAboveViewport = this.$.monthScroller.position > diff;\n\n      var visibleItems = this.$.monthScroller.clientHeight / this.$.monthScroller.itemHeight;\n      var scrolledBelowViewport = this.$.monthScroller.position + visibleItems - 1 < diff;\n\n      if (scrolledAboveViewport) {\n        this._scrollToPosition(diff, true);\n      } else if (scrolledBelowViewport) {\n        this._scrollToPosition(diff - visibleItems + 1, true);\n      }\n    }\n  }\n\n  _onOverlayFocus() {\n    this._focused = true;\n  }\n\n  _onOverlayBlur() {\n    this._focused = false;\n  }\n\n  _initialPositionChanged(initialPosition) {\n    this.scrollToDate(initialPosition);\n  }\n\n  _repositionYearScroller() {\n    this._visibleMonthIndex = Math.floor(this.$.monthScroller.position);\n    this.$.yearScroller.position = (this.$.monthScroller.position + this._originDate.getMonth()) / 12;\n  }\n\n  _repositionMonthScroller() {\n    this.$.monthScroller.position = this.$.yearScroller.position * 12 - this._originDate.getMonth();\n    this._visibleMonthIndex = Math.floor(this.$.monthScroller.position);\n  }\n\n  _onMonthScroll() {\n    this._repositionYearScroller();\n    this._doIgnoreTaps();\n  }\n\n  _onYearScroll() {\n    this._repositionMonthScroller();\n    this._doIgnoreTaps();\n  }\n\n  _onYearScrollTouchStart() {\n    this._notTapping = false;\n    setTimeout(() => this._notTapping = true, 300);\n\n    this._repositionMonthScroller();\n  }\n\n  _onMonthScrollTouchStart() {\n    this._repositionYearScroller();\n  }\n\n  _doIgnoreTaps() {\n    this._ignoreTaps = true;\n    this._debouncer = Debouncer.debounce(this._debouncer,\n      timeOut.after(300), () => this._ignoreTaps = false);\n  }\n\n  _formatDisplayed(date, formatDate, label) {\n    if (date) {\n      return formatDate(DatePickerHelper._extractDateParts(date));\n    } else {\n      return label;\n    }\n  }\n\n  _onTodayTap() {\n    var today = new Date();\n\n    if (Math.abs(this.$.monthScroller.position - this._differenceInMonths(today, this._originDate)) < 0.001) {\n      // Select today only if the month scroller is positioned approximately\n      // at the beginning of the current month\n      this.selectedDate = today;\n      this._close();\n    } else {\n      this._scrollToCurrentMonth();\n    }\n  }\n\n  _scrollToCurrentMonth() {\n    if (this.focusedDate) {\n      this.focusedDate = new Date();\n    }\n\n    this.scrollToDate(new Date(), true);\n  }\n\n  _showClear(selectedDate) {\n    return !!selectedDate;\n  }\n\n  _onYearTap(e) {\n    if (!this._ignoreTaps && !this._notTapping) {\n      var scrollDelta = e.detail.y - (this.$.yearScroller.getBoundingClientRect().top + this.$.yearScroller.clientHeight / 2);\n      var yearDelta = scrollDelta / this.$.yearScroller.itemHeight;\n      this._scrollToPosition(this.$.monthScroller.position + yearDelta * 12, true);\n    }\n  }\n\n  _scrollToPosition(targetPosition, animate) {\n    if (this._targetPosition !== undefined) {\n      this._targetPosition = targetPosition;\n      return;\n    }\n\n    if (!animate) {\n      this.$.monthScroller.position = targetPosition;\n      this._targetPosition = undefined;\n      this._repositionYearScroller();\n      return;\n    }\n\n    this._targetPosition = targetPosition;\n\n    // http://gizma.com/easing/\n    var easingFunction = (t, b, c, d) => {\n      t /= d / 2;\n      if (t < 1) {\n        return c / 2 * t * t + b;\n      }\n      t--;\n      return -c / 2 * (t * (t - 2) - 1) + b;\n    };\n\n    var duration = animate ? 300 : 0;\n    var start = 0;\n    var initialPosition = this.$.monthScroller.position;\n\n    var smoothScroll = timestamp => {\n      start = start || timestamp;\n      var currentTime = timestamp - start;\n\n      if (currentTime < duration) {\n        var currentPos = easingFunction(currentTime, initialPosition, this._targetPosition - initialPosition, duration);\n        this.$.monthScroller.position = currentPos;\n        window.requestAnimationFrame(smoothScroll);\n      } else {\n        this.dispatchEvent(new CustomEvent('scroll-animation-finished', {\n          bubbles: true,\n          composed: true,\n          detail: {\n            position: this._targetPosition,\n            oldPosition: initialPosition\n          }\n        }));\n\n        this.$.monthScroller.position = this._targetPosition;\n        this._targetPosition = undefined;\n      }\n\n      setTimeout(this._repositionYearScroller.bind(this), 1);\n    };\n\n    // Start the animation.\n    window.requestAnimationFrame(smoothScroll);\n  }\n\n  _limit(value, range) {\n    return Math.min(range.max, Math.max(range.min, value));\n  }\n\n  _handleTrack(e) {\n    // Check if horizontal movement threshold (dx) not exceeded or\n    // scrolling fast vertically (ddy).\n    if (Math.abs(e.detail.dx) < 10 || Math.abs(e.detail.ddy) > 10) {\n      return;\n    }\n\n    // If we're flinging quickly -> start animating already.\n    if (Math.abs(e.detail.ddx) > this._yearScrollerWidth / 3) {\n      this._toggleAnimateClass(true);\n    }\n\n    var newTranslateX = this._translateX + e.detail.ddx;\n    this._translateX = this._limit(newTranslateX, {\n      min: 0,\n      max: this._yearScrollerWidth\n    });\n  }\n\n  _track(e) {\n    if (this._desktopMode) {\n      // No need to track for swipe gestures on desktop.\n      return;\n    }\n\n    switch (e.detail.state) {\n      case 'start':\n        this._toggleAnimateClass(false);\n        break;\n\n      case 'track':\n        this._handleTrack(e);\n        break;\n\n      case 'end':\n        this._toggleAnimateClass(true);\n        if (this._translateX >= this._yearScrollerWidth / 2) {\n          this._closeYearScroller();\n        } else {\n          this._openYearScroller();\n        }\n        break;\n    }\n  }\n\n  _toggleAnimateClass(enable) {\n    if (enable) {\n      this.classList.add('animate');\n    } else {\n      this.classList.remove('animate');\n    }\n  }\n\n  _toggleYearScroller() {\n    this._isYearScrollerVisible() ? this._closeYearScroller() : this._openYearScroller();\n  }\n\n  _openYearScroller() {\n    this._translateX = 0;\n    this.setAttribute('years-visible', '');\n  }\n\n  _closeYearScroller() {\n    this.removeAttribute('years-visible');\n    this._translateX = this._yearScrollerWidth;\n  }\n\n  _isYearScrollerVisible() {\n    return this._translateX < this._yearScrollerWidth / 2;\n  }\n\n  _translateXChanged(x) {\n    if (!this._desktopMode) {\n      this.$.monthScroller.style.transform = 'translateX(' + (x - this._yearScrollerWidth) + 'px)';\n      this.$.yearScroller.style.transform = 'translateX(' + x + 'px)';\n    }\n  }\n\n  _yearAfterXYears(index) {\n    var result = new Date(this._originDate);\n    result.setFullYear(parseInt(index) + this._originDate.getFullYear());\n    return result.getFullYear();\n  }\n\n  _yearAfterXMonths(months) {\n    return this._dateAfterXMonths(months).getFullYear();\n  }\n\n  _dateAfterXMonths(months) {\n    var result = new Date(this._originDate);\n    result.setDate(1);\n    result.setMonth(parseInt(months) + this._originDate.getMonth());\n    return result;\n  }\n\n  _differenceInMonths(date1, date2) {\n    var months = (date1.getFullYear() - date2.getFullYear()) * 12;\n    return months - date2.getMonth() + date1.getMonth();\n  }\n\n  _differenceInYears(date1, date2) {\n    return this._differenceInMonths(date1, date2) / 12;\n  }\n\n  _clear() {\n    this.selectedDate = '';\n  }\n\n  _close() {\n    const overlayContent = this.getRootNode().host;\n    const overlay = overlayContent ? overlayContent.getRootNode().host : null;\n    if (overlay) {\n      overlay.opened = false;\n    }\n\n    this.dispatchEvent(new CustomEvent('close', {bubbles: true, composed: true}));\n  }\n\n  _cancel() {\n    this.focusedDate = this.selectedDate;\n    this._close();\n  }\n\n  _preventDefault(e) {\n    e.preventDefault();\n  }\n\n  /**\n   * Keyboard Navigation\n   */\n  _eventKey(e) {\n    var keys = ['down', 'up', 'right', 'left', 'enter', 'space', 'home', 'end', 'pageup', 'pagedown', 'tab', 'esc'];\n\n    for (var i = 0; i < keys.length; i++) {\n      var k = keys[i];\n      if (IronA11yKeysBehavior.keyboardEventMatchesKeys(e, k)) {\n        return k;\n      }\n    }\n  }\n\n  _onKeydown(e) {\n    var focus = this._currentlyFocusedDate();\n\n    // Cannot use (today/cancel).focused flag because vaadin-text-field removes it\n    // previously in the keydown event.\n    const isToday = e.composedPath().indexOf(this.$.todayButton) >= 0;\n    const isCancel = e.composedPath().indexOf(this.$.cancelButton) >= 0;\n    const isScroller = !isToday && !isCancel;\n\n    var eventKey = this._eventKey(e);\n    if (eventKey === 'tab') {\n      // We handle tabs here and don't want to bubble up.\n      e.stopPropagation();\n\n      const isFullscreen = this.hasAttribute('fullscreen');\n      const isShift = e.shiftKey;\n\n      if (isFullscreen) {\n        e.preventDefault();\n      } else if (isShift && isScroller || !isShift && isCancel) {\n        // Return focus back to the input field\n        e.preventDefault();\n        this.dispatchEvent(new CustomEvent('focus-input', {bubbles: true, composed: true}));\n      } else if (isShift && isToday) {\n        // Browser returns focus back to the scrollable area. We need to set\n        // the focused flag, and move the scroll to focused date.\n        this._focused = true;\n        setTimeout(() => this.revealDate(this.focusedDate), 1);\n      } else {\n        // Browser moves the focus out of the scroller, hence focused flag must\n        // set to false.\n        this._focused = false;\n      }\n    } else if (eventKey) {\n      e.preventDefault();\n      e.stopPropagation();\n      switch (eventKey) {\n        case 'down':\n          this._moveFocusByDays(7);\n          this.focus();\n          break;\n        case 'up':\n          this._moveFocusByDays(-7);\n          this.focus();\n          break;\n        case 'right':\n          if (isScroller) {\n            this._moveFocusByDays(1);\n          }\n          break;\n        case 'left':\n          if (isScroller) {\n            this._moveFocusByDays(-1);\n          }\n          break;\n        case 'enter':\n          if (isScroller || isCancel) {\n            this._close();\n          } else if (isToday) {\n            this._onTodayTap();\n          }\n          break;\n        case 'space':\n          if (isCancel) {\n            this._close();\n          } else if (isToday) {\n            this._onTodayTap();\n          } else {\n            var focusedDate = this.focusedDate;\n            if (DatePickerHelper._dateEquals(focusedDate, this.selectedDate)) {\n              this.selectedDate = '';\n              this.focusedDate = focusedDate;\n            } else {\n              this.selectedDate = focusedDate;\n            }\n          }\n          break;\n        case 'home':\n          this._moveFocusInsideMonth(focus, 'minDate');\n          break;\n        case 'end':\n          this._moveFocusInsideMonth(focus, 'maxDate');\n          break;\n        case 'pagedown':\n          this._moveFocusByMonths(e.shiftKey ? 12 : 1);\n          break;\n        case 'pageup':\n          this._moveFocusByMonths(e.shiftKey ? -12 : -1);\n          break;\n        case 'esc':\n          this._cancel();\n          break;\n      }\n    }\n  }\n\n  _currentlyFocusedDate() {\n    return this.focusedDate || this.selectedDate || this.initialPosition || new Date();\n  }\n\n  _focusDate(dateToFocus) {\n    this.focusedDate = dateToFocus;\n    this._focusedMonthDate = dateToFocus.getDate();\n  }\n\n  _focusClosestDate(focus) {\n    this._focusDate(DatePickerHelper._getClosestDate(focus, [this.minDate, this.maxDate]));\n  }\n\n  _moveFocusByDays(days) {\n    var focus = this._currentlyFocusedDate();\n    var dateToFocus = new Date(0, 0);\n    dateToFocus.setFullYear(focus.getFullYear());\n    dateToFocus.setMonth(focus.getMonth());\n    dateToFocus.setDate(focus.getDate() + days);\n\n    if (this._dateAllowed(dateToFocus, this.minDate, this.maxDate)) {\n      this._focusDate(dateToFocus);\n    } else {\n      if (this._dateAllowed(focus, this.minDate, this.maxDate)) {\n        // Move to min or max date\n        if (days > 0) { // down or right\n          this._focusDate(this.maxDate);\n        } else { // up or left\n          this._focusDate(this.minDate);\n        }\n      } else {\n        // Move to closest allowed date\n        this._focusClosestDate(focus);\n      }\n    }\n  }\n\n  _moveFocusByMonths(months) {\n    var focus = this._currentlyFocusedDate();\n    var dateToFocus = new Date(0, 0);\n    dateToFocus.setFullYear(focus.getFullYear());\n    dateToFocus.setMonth(focus.getMonth() + months);\n\n    var targetMonth = dateToFocus.getMonth();\n\n    dateToFocus.setDate(this._focusedMonthDate || (this._focusedMonthDate = focus.getDate()));\n    if (dateToFocus.getMonth() !== targetMonth) {\n      dateToFocus.setDate(0);\n    }\n\n    if (this._dateAllowed(dateToFocus, this.minDate, this.maxDate)) {\n      this.focusedDate = dateToFocus;\n    } else {\n      if (this._dateAllowed(focus, this.minDate, this.maxDate)) {\n        // Move to min or max date\n        if (months > 0) { // pagedown\n          this._focusDate(this.maxDate);\n        } else { // pageup\n          this._focusDate(this.minDate);\n        }\n      } else {\n        // Move to closest allowed date\n        this._focusClosestDate(focus);\n      }\n    }\n  }\n\n  _moveFocusInsideMonth(focusedDate, property) {\n    var dateToFocus = new Date(0, 0);\n    dateToFocus.setFullYear(focusedDate.getFullYear());\n\n    if (property === 'minDate') {\n      dateToFocus.setMonth(focusedDate.getMonth());\n      dateToFocus.setDate(1);\n    } else {\n      dateToFocus.setMonth(focusedDate.getMonth() + 1);\n      dateToFocus.setDate(0);\n    }\n\n    if (this._dateAllowed(dateToFocus, this.minDate, this.maxDate)) {\n      this._focusDate(dateToFocus);\n    } else {\n      if (this._dateAllowed(focusedDate, this.minDate, this.maxDate)) {\n        // Move to minDate or maxDate\n        this._focusDate(this[property]);\n      } else {\n        // Move to closest allowed date\n        this._focusClosestDate(focusedDate);\n      }\n    }\n  }\n\n  _dateAllowed(date, min, max) {\n    return (!min || date >= min) && (!max || date <= max);\n  }\n\n  _isTodayAllowed(min, max) {\n    var today = new Date();\n    var todayMidnight = new Date(0, 0);\n    todayMidnight.setFullYear(today.getFullYear());\n    todayMidnight.setMonth(today.getMonth());\n    todayMidnight.setDate(today.getDate());\n    return this._dateAllowed(todayMidnight, min, max);\n  }\n\n  _stopPropagation(e) {\n    e.stopPropagation();\n  }\n}\n\ncustomElements.define(DatePickerOverlayContentElement.is, DatePickerOverlayContentElement);\n","/**\n@license\nCopyright (c) 2017 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\nimport { OverlayElement } from '@vaadin/vaadin-overlay/src/vaadin-overlay.js';\n\nimport { DisableUpgradeMixin } from '@polymer/polymer/lib/mixins/disable-upgrade-mixin.js';\n/**\n * The overlay element.\n *\n * ### Styling\n *\n * See [`<vaadin-overlay>` documentation](https://github.com/vaadin/vaadin-overlay/blob/master/src/vaadin-overlay.html)\n * for `<vaadin-date-picker-overlay>` parts.\n *\n * See [ThemableMixin – how to apply styles for shadow parts](https://github.com/vaadin/vaadin-themable-mixin/wiki)\n *\n * @extends Vaadin.OverlayElement\n * @memberof Vaadin\n * @private\n */\nclass DatePickerOverlayElement extends DisableUpgradeMixin(OverlayElement) {\n  static get is() {\n    return 'vaadin-date-picker-overlay';\n  }\n}\n\ncustomElements.define(DatePickerOverlayElement.is, DatePickerOverlayElement);\n","import '@polymer/polymer/lib/elements/custom-style.js';\nconst $_documentContainer = document.createElement('template');\n\n$_documentContainer.innerHTML = `<dom-module id=\"vaadin-date-picker-overlay-styles\" theme-for=\"vaadin-date-picker-overlay\">\n  <template>\n    <style>\n      :host {\n        align-items: flex-start;\n        justify-content: flex-start;\n      }\n\n      :host([bottom-aligned]) {\n        justify-content: flex-end;\n      }\n\n      :host([right-aligned]) {\n        align-items: flex-end;\n      }\n\n      :host([right-aligned][dir=\"rtl\"]) {\n        align-items: flex-start;\n      }\n\n      [part=\"overlay\"] {\n        display: flex;\n        flex: auto;\n      }\n\n      [part~=\"content\"] {\n        flex: auto;\n      }\n    </style>\n  </template>\n</dom-module>`;\n\ndocument.head.appendChild($_documentContainer.content);\n","/**\n@license\nCopyright (c) 2017 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport { GestureEventListeners } from '@polymer/polymer/lib/mixins/gesture-event-listeners.js';\nimport '@polymer/iron-media-query/iron-media-query.js';\nimport { ThemableMixin } from '@vaadin/vaadin-themable-mixin/vaadin-themable-mixin.js';\nimport { ThemePropertyMixin } from '@vaadin/vaadin-themable-mixin/vaadin-theme-property-mixin.js';\nimport { ControlStateMixin } from '@vaadin/vaadin-control-state-mixin/vaadin-control-state-mixin.js';\nimport './vaadin-date-picker-overlay.js';\nimport './vaadin-date-picker-overlay-content.js';\nimport { DatePickerMixin } from './vaadin-date-picker-mixin.js';\nimport '@vaadin/vaadin-text-field/src/vaadin-text-field.js';\nimport { ElementMixin } from '@vaadin/vaadin-element-mixin/vaadin-element-mixin.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { afterNextRender } from '@polymer/polymer/lib/utils/render-status.js';\nimport { prevent } from '@polymer/polymer/lib/utils/gestures.js';\n/**\n *\n * `<vaadin-date-picker>` is a date selection field which includes a scrollable\n * month calendar view.\n * ```html\n * <vaadin-date-picker label=\"Birthday\"></vaadin-date-picker>\n * ```\n * ```js\n * datePicker.value = '2016-03-02';\n * ```\n * When the selected `value` is changed, a `value-changed` event is triggered.\n *\n *\n * ### Styling\n *\n * The following shadow DOM parts are available for styling:\n *\n * Part name | Description | Theme for Element\n * ----------------|----------------|----------------\n * `text-field` | Input element | vaadin-date-picker\n * `clear-button` | Clear button | vaadin-date-picker\n * `toggle-button` | Toggle button | vaadin-date-picker\n * `overlay-content` | The overlay element | vaadin-date-picker\n * `overlay-header` | Fullscreen mode header | vaadin-date-picker-overlay-content\n * `label` | Fullscreen mode value/label | vaadin-date-picker-overlay-content\n * `clear-button` | Fullscreen mode clear button | vaadin-date-picker-overlay-content\n * `toggle-button` | Fullscreen mode toggle button | vaadin-date-picker-overlay-content\n * `years-toggle-button` | Fullscreen mode years scroller toggle | vaadin-date-picker-overlay-content\n * `months` | Months scroller | vaadin-date-picker-overlay-content\n * `years` | Years scroller | vaadin-date-picker-overlay-content\n * `toolbar` | Footer bar with buttons | vaadin-date-picker-overlay-content\n * `today-button` | Today button | vaadin-date-picker-overlay-content\n * `cancel-button` | Cancel button | vaadin-date-picker-overlay-content\n * `month` | Month calendar | vaadin-date-picker-overlay-content\n * `year-number` | Year number | vaadin-date-picker-overlay-content\n * `year-separator` | Year separator | vaadin-date-picker-overlay-content\n * `month-header` | Month title | vaadin-month-calendar\n * `weekdays` | Weekday container | vaadin-month-calendar\n * `weekday` | Weekday element | vaadin-month-calendar\n * `week-numbers` | Week numbers container | vaadin-month-calendar\n * `week-number` | Week number element | vaadin-month-calendar\n * `date` | Date element | vaadin-month-calendar\n *\n * See [ThemableMixin – how to apply styles for shadow parts](https://github.com/vaadin/vaadin-themable-mixin/wiki)\n *\n * The following state attributes are available for styling:\n *\n * Attribute    | Description | Part name\n * -------------|-------------|------------\n * `invalid` | Set when the element is invalid | :host\n * `opened` | Set when the date selector overlay is opened | :host\n * `readonly` | Set when the element is readonly | :host\n * `disabled` | Set when the element is disabled | :host\n * `today` | Set on the date corresponding to the current day | date\n * `focused` | Set on the focused date | date\n * `disabled` | Set on the date out of the allowed range | date\n * `selected` | Set on the selected date | date\n *\n * If you want to replace the default input field with a custom implementation, you should use the\n * [`<vaadin-date-picker-light>`](#vaadin-date-picker-light) element.\n *\n * In addition to `<vaadin-date-picker>` itself, the following internal\n * components are themable:\n *\n * - `<vaadin-text-field>`\n * - `<vaadin-date-picker-overlay>`\n * - `<vaadin-date-picker-overlay-content>`\n * - `<vaadin-month-calendar>`\n *\n * Note: the `theme` attribute value set on `<vaadin-date-picker>` is\n * propagated to the internal themable components listed above.\n *\n * @memberof Vaadin\n * @mixes Vaadin.ElementMixin\n * @mixes Vaadin.ControlStateMixin\n * @mixes Vaadin.ThemableMixin\n * @mixes Vaadin.ThemePropertyMixin\n * @mixes Vaadin.DatePickerMixin\n * @mixes Polymer.GestureEventListeners\n * @demo demo/index.html\n */\nclass DatePickerElement extends\n  ElementMixin(\n    ControlStateMixin(\n      ThemableMixin(\n        ThemePropertyMixin(\n          DatePickerMixin(\n            GestureEventListeners(PolymerElement)))))) {\n  static get template() {\n    return html`\n    <style>\n      :host {\n        display: inline-block;\n      }\n\n      :host([hidden]) {\n        display: none !important;\n      }\n\n      :host([opened]) {\n        pointer-events: auto;\n      }\n\n      [part=\"text-field\"] {\n        width: 100%;\n        min-width: 0;\n      }\n\n      :host([disabled]) [part=\"clear-button\"],\n      :host([readonly]) [part=\"clear-button\"],\n      :host(:not([has-value])) [part=\"clear-button\"] {\n        display: none;\n      }\n    </style>\n\n\n    <vaadin-text-field id=\"input\" role=\"application\" autocomplete=\"off\" on-focus=\"_focus\" value=\"{{_userInputValue}}\" invalid=\"[[invalid]]\" label=\"[[label]]\" name=\"[[name]]\" placeholder=\"[[placeholder]]\" required=\"[[required]]\" disabled=\"[[disabled]]\" readonly=\"[[readonly]]\" error-message=\"[[errorMessage]]\" aria-label\\$=\"[[label]]\" part=\"text-field\" theme\\$=\"[[theme]]\">\n      <slot name=\"prefix\" slot=\"prefix\"></slot>\n      <div part=\"clear-button\" slot=\"suffix\" on-touchend=\"_clearTouchend\" on-click=\"_clear\" role=\"button\" aria-label\\$=\"[[i18n.clear]]\"></div>\n      <div part=\"toggle-button\" slot=\"suffix\" on-tap=\"_toggle\" role=\"button\" aria-label\\$=\"[[i18n.calendar]]\" aria-expanded\\$=\"[[_getAriaExpanded(opened)]]\"></div>\n    </vaadin-text-field>\n\n    <vaadin-date-picker-overlay id=\"overlay\" fullscreen\\$=\"[[_fullscreen]]\" theme\\$=\"[[__getOverlayTheme(theme, _overlayInitialized)]]\" on-vaadin-overlay-open=\"_onOverlayOpened\" on-vaadin-overlay-close=\"_onOverlayClosed\" disable-upgrade=\"\">\n      <template>\n        <vaadin-date-picker-overlay-content id=\"overlay-content\" i18n=\"[[i18n]]\" fullscreen\\$=\"[[_fullscreen]]\" label=\"[[label]]\" selected-date=\"{{_selectedDate}}\" slot=\"dropdown-content\" focused-date=\"{{_focusedDate}}\" show-week-numbers=\"[[showWeekNumbers]]\" min-date=\"[[_minDate]]\" max-date=\"[[_maxDate]]\" role=\"dialog\" on-date-tap=\"_close\" part=\"overlay-content\" theme\\$=\"[[__getOverlayTheme(theme, _overlayInitialized)]]\">\n        </vaadin-date-picker-overlay-content>\n      </template>\n    </vaadin-date-picker-overlay>\n\n    <iron-media-query query=\"[[_fullscreenMediaQuery]]\" query-matches=\"{{_fullscreen}}\">\n    </iron-media-query>\n`;\n  }\n\n  static get is() {\n    return 'vaadin-date-picker';\n  }\n\n  static get version() {\n    return '3.3.4';\n  }\n\n  static get properties() {\n    return {\n      /**\n       * Set to true to disable this element.\n       */\n      disabled: {\n        type: Boolean,\n        value: false,\n        reflectToAttribute: true\n      },\n\n      /**\n       * The error message to display when the input is invalid.\n       */\n      errorMessage: String,\n\n      /**\n       * A placeholder string in addition to the label. If this is set, the label will always float.\n       */\n      placeholder: String,\n\n      /**\n       * Set to true to make this element read-only.\n       */\n      readonly: {\n        type: Boolean,\n        value: false,\n        reflectToAttribute: true\n      },\n\n      /**\n       * This property is set to true when the control value invalid.\n       */\n      invalid: {\n        type: Boolean,\n        reflectToAttribute: true,\n        notify: true,\n        value: false\n      },\n\n      _userInputValue: String\n    };\n  }\n\n  static get observers() {\n    return [\n      '_userInputValueChanged(_userInputValue)'\n    ];\n  }\n\n  ready() {\n    super.ready();\n\n    // In order to have synchronized invalid property, we need to use the same validate logic.\n    afterNextRender(this, () => this._inputElement.validate = () => {});\n  }\n\n  _onVaadinOverlayClose(e) {\n    if (this._openedWithFocusRing && this.hasAttribute('focused')) {\n      this.focusElement.setAttribute('focus-ring', '');\n    } else if (!this.hasAttribute('focused')) {\n      this.focusElement.blur();\n    }\n    if (e.detail.sourceEvent && e.detail.sourceEvent.composedPath().indexOf(this) !== -1) {\n      e.preventDefault();\n    }\n  }\n\n  _clear() {\n    this.__dispatchChange = true;\n    this.value = '';\n    this.validate();\n    this.focus();\n    prevent('tap');\n    this.__dispatchChange = false;\n  }\n\n  _clearTouchend(e) {\n    this._clear();\n    e.preventDefault();\n    prevent('tap');\n  }\n\n  _toggle(e) {\n    e.stopPropagation();\n    this[(this._overlayInitialized && this.$.overlay.opened) ? 'close' : 'open']();\n  }\n\n  _input() {\n    return this.$.input;\n  }\n\n  set _inputValue(value) {\n    this._inputElement.value = value;\n  }\n\n  get _inputValue() {\n    return this._inputElement.value;\n  }\n\n  _getAriaExpanded(opened) {\n    return Boolean(opened).toString();\n  }\n\n  /**\n   * Focussable element used by vaadin-control-state-mixin\n   */\n  get focusElement() {\n    return this._input() || this;\n  }\n}\n\ncustomElements.define(DatePickerElement.is, DatePickerElement);\n\nexport { DatePickerElement };\n","/**\n@license\nCopyright (c) 2017 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport { timeOut } from '@polymer/polymer/lib/utils/async.js';\nimport { Debouncer } from '@polymer/polymer/lib/utils/debounce.js';\nimport { flush } from '@polymer/polymer/lib/utils/flush.js';\nimport { templatize } from '@polymer/polymer/lib/utils/templatize.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { afterNextRender } from '@polymer/polymer/lib/utils/render-status.js';\n/**\n * @memberof Vaadin\n * @private\n */\nclass InfiniteScrollerElement extends PolymerElement {\n  static get template() {\n    return html`\n    <style>\n      :host {\n        display: block;\n        overflow: hidden;\n        height: 500px;\n      }\n\n      #scroller {\n        position: relative;\n        height: 100%;\n        overflow: auto;\n        outline: none;\n        margin-right: -40px;\n        -webkit-overflow-scrolling: touch;\n        -ms-overflow-style: none;\n        overflow-x: hidden;\n      }\n\n      #scroller.notouchscroll {\n        -webkit-overflow-scrolling: auto;\n      }\n\n      #scroller::-webkit-scrollbar {\n        display: none;\n      }\n\n      .buffer {\n        position: absolute;\n        width: var(--vaadin-infinite-scroller-buffer-width, 100%);\n        box-sizing: border-box;\n        padding-right: 40px;\n        top: var(--vaadin-infinite-scroller-buffer-offset, 0);\n        animation: fadein 0.2s;\n      }\n\n      @keyframes fadein {\n        from { opacity: 0; }\n        to { opacity: 1; }\n      }\n    </style>\n\n    <div id=\"scroller\" on-scroll=\"_scroll\">\n      <div class=\"buffer\"></div>\n      <div class=\"buffer\"></div>\n      <div id=\"fullHeight\"></div>\n    </div>\n`;\n  }\n\n  static get is() {\n    return 'vaadin-infinite-scroller';\n  }\n\n  static get properties() {\n    return {\n\n      /**\n       * Count of individual items in each buffer.\n       * The scroller has 2 buffers altogether so bufferSize of 20\n       * will result in 40 buffered DOM items in total.\n       * Changing after initialization not supported.\n       */\n      bufferSize: {\n        type: Number,\n        value: 20\n      },\n\n      /**\n       * The amount of initial scroll top. Needed in order for the\n       * user to be able to scroll backwards.\n       */\n      _initialScroll: {\n        value: 500000\n      },\n\n      /**\n       * The index/position mapped at _initialScroll point.\n       */\n      _initialIndex: {\n        value: 0\n      },\n\n      _buffers: Array,\n\n      _preventScrollEvent: Boolean,\n\n      _mayHaveMomentum: Boolean,\n\n      _initialized: Boolean,\n\n      active: {\n        type: Boolean,\n        observer: '_activated'\n      }\n    };\n  }\n\n  ready() {\n    super.ready();\n\n    this._buffers = Array.prototype.slice.call(this.root.querySelectorAll('.buffer'));\n\n    this.$.fullHeight.style.height = this._initialScroll * 2 + 'px';\n\n    var tpl = this.querySelector('template');\n    this._TemplateClass = templatize(tpl, this, {\n      forwardHostProp: function(prop, value) {\n        if (prop !== 'index') {\n          this._buffers.forEach(buffer => {\n            [].forEach.call(buffer.children, insertionPoint => {\n              insertionPoint._itemWrapper.instance[prop] = value;\n            });\n          });\n        }\n      }\n    });\n\n    // Firefox interprets elements with overflow:auto as focusable\n    // https://bugzilla.mozilla.org/show_bug.cgi?id=1069739\n    var isFirefox = navigator.userAgent.toLowerCase().indexOf('firefox') > -1;\n    if (isFirefox) {\n      this.$.scroller.tabIndex = -1;\n    }\n  }\n\n  _activated(active) {\n    if (active && !this._initialized) {\n      this._createPool();\n      this._initialized = true;\n    }\n  }\n\n  _finishInit() {\n    if (!this._initDone) {\n      // Once the first set of items start fading in, stamp the rest\n      this._buffers.forEach(buffer => {\n        [].forEach.call(buffer.children,\n          insertionPoint => this._ensureStampedInstance(insertionPoint._itemWrapper));\n      }, this);\n\n      if (!this._buffers[0].translateY) {\n        this._reset();\n      }\n\n      this._initDone = true;\n    }\n  }\n\n  _translateBuffer(up) {\n    var index = up ? 1 : 0;\n    this._buffers[index].translateY = this._buffers[(index ? 0 : 1)].translateY + this._bufferHeight * (index ? -1 : 1);\n    this._buffers[index].style.transform = 'translate3d(0, ' + this._buffers[index].translateY + 'px, 0)';\n    this._buffers[index].updated = false;\n    this._buffers.reverse();\n  }\n\n  _scroll() {\n    if (this._scrollDisabled) {\n      return;\n    }\n\n    var scrollTop = this.$.scroller.scrollTop;\n    if (scrollTop < this._bufferHeight || scrollTop > this._initialScroll * 2 - this._bufferHeight) {\n      // Scrolled near the end/beginning of the scrollable area -> reset.\n      this._initialIndex = ~~this.position;\n      this._reset();\n    }\n\n    // Check if we scrolled enough to translate the buffer positions.\n    var bufferOffset = this.root.querySelector('.buffer').offsetTop;\n    var upperThresholdReached = scrollTop > this._buffers[1].translateY + this.itemHeight + bufferOffset;\n    var lowerThresholdReached = scrollTop < this._buffers[0].translateY + this.itemHeight + bufferOffset;\n\n    if (upperThresholdReached || lowerThresholdReached) {\n      this._translateBuffer(lowerThresholdReached);\n      this._updateClones();\n    }\n\n    if (!this._preventScrollEvent) {\n      this.dispatchEvent(new CustomEvent('custom-scroll', {bubbles: false, composed: true}));\n      this._mayHaveMomentum = true;\n    }\n    this._preventScrollEvent = false;\n\n    this._debouncerScrollFinish = Debouncer.debounce(this._debouncerScrollFinish,\n      timeOut.after(200), () => {\n        var scrollerRect = this.$.scroller.getBoundingClientRect();\n        if (!this._isVisible(this._buffers[0], scrollerRect) && !this._isVisible(this._buffers[1], scrollerRect)) {\n          this.position = this.position;\n        }\n      });\n  }\n\n  /**\n   * Current scroller position as index. Can be a fractional number.\n   *\n   * @type {Number}\n   */\n  set position(index) {\n    this._preventScrollEvent = true;\n    if (index > this._firstIndex && index < this._firstIndex + this.bufferSize * 2) {\n      this.$.scroller.scrollTop = this.itemHeight * (index - this._firstIndex) + this._buffers[0].translateY;\n    } else {\n      this._initialIndex = ~~index;\n      this._reset();\n      this._scrollDisabled = true;\n      this.$.scroller.scrollTop += index % 1 * this.itemHeight;\n      this._scrollDisabled = false;\n    }\n\n    if (this._mayHaveMomentum) {\n      // Stop the possible iOS Safari momentum with -webkit-overflow-scrolling: auto;\n      this.$.scroller.classList.add('notouchscroll');\n      this._mayHaveMomentum = false;\n\n      setTimeout(() => {\n        // Restore -webkit-overflow-scrolling: touch; after a small delay.\n        this.$.scroller.classList.remove('notouchscroll');\n      }, 10);\n    }\n\n  }\n\n  /**\n   * @private\n   */\n  get position() {\n    return (this.$.scroller.scrollTop - this._buffers[0].translateY) / this.itemHeight + this._firstIndex;\n  }\n\n  get itemHeight() {\n    if (!this._itemHeightVal) {\n      if (!(window.ShadyCSS && window.ShadyCSS.nativeCss)) {\n        this.updateStyles();\n      }\n\n      const itemHeight = window.ShadyCSS\n        ? window.ShadyCSS.getComputedStyleValue(this, '--vaadin-infinite-scroller-item-height')\n        : getComputedStyle(this).getPropertyValue('--vaadin-infinite-scroller-item-height');\n      // Use background-position temp inline style for unit conversion\n      const tmpStyleProp = 'background-position';\n      this.$.fullHeight.style.setProperty(tmpStyleProp, itemHeight);\n      const itemHeightPx = getComputedStyle(this.$.fullHeight).getPropertyValue(tmpStyleProp);\n      this.$.fullHeight.style.removeProperty(tmpStyleProp);\n      this._itemHeightVal = parseFloat(itemHeightPx);\n    }\n\n    return this._itemHeightVal;\n  }\n\n  get _bufferHeight() {\n    return this.itemHeight * this.bufferSize;\n  }\n\n  _reset() {\n    this._scrollDisabled = true;\n    this.$.scroller.scrollTop = this._initialScroll;\n    this._buffers[0].translateY = this._initialScroll - this._bufferHeight;\n    this._buffers[1].translateY = this._initialScroll;\n    this._buffers.forEach(buffer => {\n      buffer.style.transform = 'translate3d(0, ' + buffer.translateY + 'px, 0)';\n    });\n    this._buffers[0].updated = this._buffers[1].updated = false;\n    this._updateClones(true);\n\n    this._debouncerUpdateClones = Debouncer.debounce(\n      this._debouncerUpdateClones,\n      timeOut.after(200), () => {\n        this._buffers[0].updated = this._buffers[1].updated = false;\n        this._updateClones();\n      });\n\n    this._scrollDisabled = false;\n  }\n\n  _createPool() {\n    var container = this.getBoundingClientRect();\n    this._buffers.forEach(buffer => {\n      for (var i = 0; i < this.bufferSize; i++) {\n        const itemWrapper = document.createElement('div');\n        itemWrapper.style.height = this.itemHeight + 'px';\n        itemWrapper.instance = {};\n\n        const contentId = InfiniteScrollerElement._contentIndex = InfiniteScrollerElement._contentIndex + 1 || 0;\n        const slotName = 'vaadin-infinite-scroller-item-content-' + contentId;\n\n        const insertionPoint = document.createElement('slot');\n        insertionPoint.setAttribute('name', slotName);\n        insertionPoint._itemWrapper = itemWrapper;\n        buffer.appendChild(insertionPoint);\n\n        itemWrapper.setAttribute('slot', slotName);\n        this.appendChild(itemWrapper);\n\n        // This is needed by IE\n        flush();\n\n        setTimeout(() => {\n          // Only stamp the visible instances first\n          if (this._isVisible(itemWrapper, container)) {\n            this._ensureStampedInstance(itemWrapper);\n          }\n        }, 1); // Wait for first reset\n      }\n    }, this);\n\n    setTimeout(() => {\n      afterNextRender(this, this._finishInit.bind(this));\n    }, 1);\n  }\n\n  _ensureStampedInstance(itemWrapper) {\n    if (itemWrapper.firstElementChild) {\n      return;\n    }\n\n    var tmpInstance = itemWrapper.instance;\n\n    itemWrapper.instance = new this._TemplateClass({});\n    itemWrapper.appendChild(itemWrapper.instance.root);\n\n    Object.keys(tmpInstance).forEach(prop => {\n      itemWrapper.instance.set(prop, tmpInstance[prop]);\n    });\n  }\n\n  _updateClones(viewPortOnly) {\n    this._firstIndex = ~~((this._buffers[0].translateY - this._initialScroll) / this.itemHeight) + this._initialIndex;\n\n    var scrollerRect = viewPortOnly ? this.$.scroller.getBoundingClientRect() : undefined;\n    this._buffers.forEach((buffer, bufferIndex) => {\n      if (!buffer.updated) {\n        var firstIndex = this._firstIndex + this.bufferSize * bufferIndex;\n\n        [].forEach.call(buffer.children, (insertionPoint, index) => {\n          const itemWrapper = insertionPoint._itemWrapper;\n          if (!viewPortOnly || this._isVisible(itemWrapper, scrollerRect)) {\n            itemWrapper.instance.index = firstIndex + index;\n          }\n        });\n        buffer.updated = true;\n      }\n    }, this);\n  }\n\n  _isVisible(element, container) {\n    var rect = element.getBoundingClientRect();\n    return rect.bottom > container.top && rect.top < container.bottom;\n  }\n}\n\ncustomElements.define(InfiniteScrollerElement.is, InfiniteScrollerElement);\n","/**\n@license\nCopyright (c) 2017 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport '@polymer/polymer/lib/elements/dom-repeat.js';\nimport { GestureEventListeners } from '@polymer/polymer/lib/mixins/gesture-event-listeners.js';\nimport { DatePickerHelper } from './vaadin-date-picker-helper.js';\nimport { ThemableMixin } from '@vaadin/vaadin-themable-mixin/vaadin-themable-mixin.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\n/**\n * @memberof Vaadin\n * @private\n */\nclass MonthCalendarElement extends ThemableMixin(GestureEventListeners(PolymerElement)) {\n  static get template() {\n    return html`\n    <style>\n      :host {\n        display: block;\n      }\n\n      [part=\"weekdays\"],\n      #days {\n        display: flex;\n        flex-wrap: wrap;\n        flex-grow: 1;\n      }\n\n      #days-container,\n      #weekdays-container {\n        display: flex;\n      }\n\n      [part=\"week-numbers\"] {\n        display: flex;\n        flex-direction: column;\n        justify-content: space-between;\n        flex-shrink: 0;\n      }\n\n      [part=\"week-numbers\"][hidden],\n      [part=\"weekday\"][hidden] {\n        display: none;\n      }\n\n      [part=\"weekday\"],\n      [part=\"date\"] {\n        /* Would use calc(100% / 7) but it doesn't work nice on IE */\n        width: 14.285714286%;\n      }\n\n      [part=\"weekday\"]:empty,\n      [part=\"week-numbers\"] {\n        width: 12.5%;\n        flex-shrink: 0;\n      }\n    </style>\n\n    <div part=\"month-header\" role=\"heading\">[[_getTitle(month, i18n.monthNames)]]</div>\n    <div id=\"monthGrid\" on-tap=\"_handleTap\" on-touchend=\"_preventDefault\" on-touchstart=\"_onMonthGridTouchStart\">\n      <div id=\"weekdays-container\">\n        <div hidden=\"[[!_showWeekSeparator(showWeekNumbers, i18n.firstDayOfWeek)]]\" part=\"weekday\"></div>\n        <div part=\"weekdays\">\n          <template is=\"dom-repeat\" items=\"[[_getWeekDayNames(i18n.weekdays, i18n.weekdaysShort, showWeekNumbers, i18n.firstDayOfWeek)]]\">\n            <div part=\"weekday\" role=\"heading\" aria-label\\$=\"[[item.weekDay]]\">[[item.weekDayShort]]</div>\n          </template>\n        </div>\n      </div>\n      <div id=\"days-container\">\n        <div part=\"week-numbers\" hidden=\"[[!_showWeekSeparator(showWeekNumbers, i18n.firstDayOfWeek)]]\">\n          <template is=\"dom-repeat\" items=\"[[_getWeekNumbers(_days)]]\">\n            <div part=\"week-number\" role=\"heading\" aria-label\\$=\"[[i18n.week]] [[item]]\">[[item]]</div>\n          </template>\n        </div>\n        <div id=\"days\">\n          <template is=\"dom-repeat\" items=\"[[_days]]\">\n            <div part=\"date\" today\\$=\"[[_isToday(item)]]\" selected\\$=\"[[_dateEquals(item, selectedDate)]]\" focused\\$=\"[[_dateEquals(item, focusedDate)]]\" date=\"[[item]]\" disabled\\$=\"[[!_dateAllowed(item, minDate, maxDate)]]\" role\\$=\"[[_getRole(item)]]\" aria-label\\$=\"[[_getAriaLabel(item)]]\" aria-disabled\\$=\"[[_getAriaDisabled(item, minDate, maxDate)]]\">[[_getDate(item)]]</div>\n          </template>\n        </div>\n      </div>\n    </div>\n`;\n  }\n\n  static get is() {\n    return 'vaadin-month-calendar';\n  }\n\n  static get properties() {\n    return {\n      /**\n       * A `Date` object defining the month to be displayed. Only year and\n       * month properties are actually used.\n       */\n      month: {\n        type: Date,\n        value: new Date()\n      },\n\n      /**\n       * A `Date` object for the currently selected date.\n       */\n      selectedDate: {\n        type: Date,\n        notify: true\n      },\n\n      /**\n       * A `Date` object for the currently focused date.\n       */\n      focusedDate: Date,\n\n      showWeekNumbers: {\n        type: Boolean,\n        value: false\n      },\n\n      i18n: {\n        type: Object\n      },\n\n      /**\n       * Flag stating whether taps on the component should be ignored.\n       */\n      ignoreTaps: Boolean,\n\n      _notTapping: Boolean,\n\n      /**\n       * The earliest date that can be selected. All earlier dates will be disabled.\n       */\n      minDate: {\n        type: Date,\n        value: null\n      },\n\n      /**\n       * The latest date that can be selected. All later dates will be disabled.\n       */\n      maxDate: {\n        type: Date,\n        value: null\n      },\n\n      _days: {\n        type: Array,\n        computed: '_getDays(month, i18n.firstDayOfWeek, minDate, maxDate)'\n      },\n\n      disabled: {\n        type: Boolean,\n        reflectToAttribute: true,\n        computed: '_isDisabled(month, minDate, maxDate)'\n      }\n    };\n  }\n\n  static get observers() {\n    return [\n      '_showWeekNumbersChanged(showWeekNumbers, i18n.firstDayOfWeek)'\n    ];\n  }\n\n  _dateEquals(date1, date2) {\n    return DatePickerHelper._dateEquals(date1, date2);\n  }\n\n  _dateAllowed(date, min, max) {\n    return DatePickerHelper._dateAllowed(date, min, max);\n  }\n\n  /* Returns true if all the dates in the month are out of the allowed range */\n  _isDisabled(month, minDate, maxDate) {\n    // First day of the month\n    var firstDate = new Date(0, 0);\n    firstDate.setFullYear(month.getFullYear());\n    firstDate.setMonth(month.getMonth());\n    firstDate.setDate(1);\n\n    // Last day of the month\n    var lastDate = new Date(0, 0);\n    lastDate.setFullYear(month.getFullYear());\n    lastDate.setMonth(month.getMonth() + 1);\n    lastDate.setDate(-1);\n\n    if ((minDate && maxDate)\n      && minDate.getMonth() === maxDate.getMonth()\n      && minDate.getMonth() === month.getMonth()\n      && maxDate.getDate() - minDate.getDate() >= 0) {\n      return false;\n    }\n\n    return !this._dateAllowed(firstDate, minDate, maxDate)\n      && !this._dateAllowed(lastDate, minDate, maxDate);\n  }\n\n  _getTitle(month, monthNames) {\n    if (month === undefined || monthNames === undefined) {\n      return;\n    }\n    return this.i18n.formatTitle(monthNames[month.getMonth()], month.getFullYear());\n  }\n\n  _onMonthGridTouchStart() {\n    this._notTapping = false;\n    setTimeout(() => this._notTapping = true, 300);\n  }\n\n  _dateAdd(date, delta) {\n    date.setDate(date.getDate() + delta);\n  }\n\n  _applyFirstDayOfWeek(weekDayNames, firstDayOfWeek) {\n    if (weekDayNames === undefined || firstDayOfWeek === undefined) {\n      return;\n    }\n\n    return weekDayNames.slice(firstDayOfWeek).concat(weekDayNames.slice(0, firstDayOfWeek));\n  }\n\n  _getWeekDayNames(weekDayNames, weekDayNamesShort, showWeekNumbers, firstDayOfWeek) {\n    if (weekDayNames === undefined || weekDayNamesShort === undefined ||\n      showWeekNumbers === undefined || firstDayOfWeek === undefined) {\n      return;\n    }\n    weekDayNames = this._applyFirstDayOfWeek(weekDayNames, firstDayOfWeek);\n    weekDayNamesShort = this._applyFirstDayOfWeek(weekDayNamesShort, firstDayOfWeek);\n    weekDayNames = weekDayNames.map((day, index) => {\n      return {\n        weekDay: day,\n        weekDayShort: weekDayNamesShort[index]\n      };\n    });\n\n    return weekDayNames;\n  }\n\n  _getDate(date) {\n    return date ? date.getDate() : '';\n  }\n\n  _showWeekNumbersChanged(showWeekNumbers, firstDayOfWeek) {\n    if (showWeekNumbers && firstDayOfWeek === 1) {\n      this.setAttribute('week-numbers', '');\n    } else {\n      this.removeAttribute('week-numbers');\n    }\n  }\n\n  _showWeekSeparator(showWeekNumbers, firstDayOfWeek) {\n    // Currently only supported for locales that start the week on Monday.\n    return showWeekNumbers && firstDayOfWeek === 1;\n  }\n\n  _isToday(date) {\n    return this._dateEquals(new Date(), date);\n  }\n\n  _getDays(month, firstDayOfWeek) {\n    if (month === undefined || firstDayOfWeek === undefined) {\n      return;\n    }\n    // First day of the month (at midnight).\n    var date = new Date(0, 0);\n    date.setFullYear(month.getFullYear());\n    date.setMonth(month.getMonth());\n    date.setDate(1);\n\n    // Rewind to first day of the week.\n    while (date.getDay() !== firstDayOfWeek) {\n      this._dateAdd(date, -1);\n    }\n\n    var days = [];\n    var startMonth = date.getMonth();\n    var targetMonth = month.getMonth();\n    while (date.getMonth() === targetMonth || date.getMonth() === startMonth) {\n      days.push(date.getMonth() === targetMonth ? new Date(date.getTime()) : null);\n\n      // Advance to next day.\n      this._dateAdd(date, 1);\n    }\n    return days;\n  }\n\n  _getWeekNumber(date, days) {\n    if (date === undefined || days === undefined) {\n      return;\n    }\n\n    if (!date) {\n      // Get the first non-null date from the days array.\n      date = days.reduce((acc, d) => {\n        return !acc && d ? d : acc;\n      });\n    }\n\n    return DatePickerHelper._getISOWeekNumber(date);\n  }\n\n  _getWeekNumbers(dates) {\n    return dates\n      .map(date => this._getWeekNumber(date, dates))\n      .filter((week, index, arr) => arr.indexOf(week) === index);\n  }\n\n  _handleTap(e) {\n    if (!this.ignoreTaps && !this._notTapping && e.target.date && !e.target.hasAttribute('disabled')) {\n      this.selectedDate = e.target.date;\n      this.dispatchEvent(new CustomEvent('date-tap', {bubbles: true, composed: true}));\n    }\n  }\n\n  _preventDefault(e) {\n    e.preventDefault();\n  }\n\n  _getRole(date) {\n    return date ? 'button' : 'presentation';\n  }\n\n  _getAriaLabel(date) {\n    if (!date) {\n      return '';\n    }\n\n    var ariaLabel = this._getDate(date) + ' ' +\n      this.i18n.monthNames[date.getMonth()] + ' ' +\n      date.getFullYear() + ', ' +\n      this.i18n.weekdays[date.getDay()];\n\n    if (this._isToday(date)) {\n      ariaLabel += ', ' + this.i18n.today;\n    }\n\n    return ariaLabel;\n  }\n\n  _getAriaDisabled(date, min, max) {\n    if (date === undefined || min === undefined || max === undefined) {\n      return;\n    }\n    return this._dateAllowed(date, min, max) ? 'false' : 'true';\n  }\n}\n\ncustomElements.define(MonthCalendarElement.is, MonthCalendarElement);\n","import '@vaadin/vaadin-lumo-styles/color.js';\nimport '@vaadin/vaadin-lumo-styles/sizing.js';\nimport '@vaadin/vaadin-lumo-styles/spacing.js';\nimport '@vaadin/vaadin-lumo-styles/style.js';\nimport '@vaadin/vaadin-lumo-styles/typography.js';\nimport '@vaadin/vaadin-button/theme/lumo/vaadin-button.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\n\nconst $_documentContainer = html`<dom-module id=\"lumo-date-picker-overlay-content\" theme-for=\"vaadin-date-picker-overlay-content\">\n  <template>\n    <style>\n      :host {\n        position: relative;\n        background-color: transparent;\n        /* Background for the year scroller, placed here as we are using a mask image on the actual years part */\n        background-image: linear-gradient(var(--lumo-shade-5pct), var(--lumo-shade-5pct));\n        background-size: 57px 100%;\n        background-position: top right;\n        background-repeat: no-repeat;\n        cursor: default;\n      }\n\n      /* Month scroller */\n\n      [part=\"months\"] {\n        /* Month calendar height:\n              header height + margin-bottom\n            + weekdays height + margin-bottom\n            + date cell heights\n            + small margin between month calendars\n        */\n        --vaadin-infinite-scroller-item-height:\n          calc(\n              var(--lumo-font-size-l) + var(--lumo-space-m)\n            + var(--lumo-font-size-xs) + var(--lumo-space-s)\n            + var(--lumo-size-m) * 6\n            + var(--lumo-space-s)\n          );\n        --vaadin-infinite-scroller-buffer-offset: 20%;\n        -webkit-mask-image: linear-gradient(transparent, #000 10%, #000 85%, transparent);\n        mask-image: linear-gradient(transparent, #000 10%, #000 85%, transparent);\n        position: relative;\n        margin-right: 57px;\n      }\n\n      /* Year scroller */\n\n      [part=\"years\"] {\n        /* TODO get rid of fixed magic number */\n        --vaadin-infinite-scroller-buffer-width: 97px;\n        width: 57px;\n        height: auto;\n        top: 0;\n        bottom: 0;\n        font-size: var(--lumo-font-size-s);\n        box-shadow: inset 2px 0 4px 0 var(--lumo-shade-5pct);\n        -webkit-mask-image: linear-gradient(transparent, #000 35%, #000 65%, transparent);\n        mask-image: linear-gradient(transparent, #000 35%, #000 65%, transparent);\n      }\n\n      [part=\"year-number\"],\n      [part=\"year-separator\"] {\n        opacity: 0.5;\n        transition: 0.2s opacity;\n      }\n\n      [part=\"years\"]:hover [part=\"year-number\"],\n      [part=\"years\"]:hover [part=\"year-separator\"] {\n        opacity: 1;\n      }\n\n      /* TODO unsupported selector */\n      #scrollers {\n        position: static;\n        display: block;\n      }\n\n      /* TODO unsupported selector, should fix this in vaadin-date-picker that it adapts to the\n       * width of the year scroller */\n      #scrollers[desktop] [part=\"months\"] {\n        right: auto;\n      }\n\n      /* Year scroller position indicator */\n      [part=\"years\"]::before {\n        border: none;\n        width: 1em;\n        height: 1em;\n        background-color: var(--lumo-base-color);\n        background-image: linear-gradient(var(--lumo-tint-5pct), var(--lumo-tint-5pct));\n        transform: translate(-75%, -50%) rotate(45deg);\n        border-top-right-radius: calc(var(--lumo-border-radius) / 2);\n        box-shadow: 2px -2px 6px 0 var(--lumo-shade-5pct);\n        z-index: 1;\n      }\n\n      [part=\"year-number\"],\n      [part=\"year-separator\"] {\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        height: 50%;\n        transform: translateY(-50%);\n      }\n\n      [part=\"years\"] [part=\"year-separator\"]::after {\n        color: var(--lumo-disabled-text-color);\n        content: \"•\";\n      }\n\n      /* Current year */\n\n      [part=\"years\"] [part=\"year-number\"][current] {\n        color: var(--lumo-primary-text-color);\n      }\n\n      /* Toolbar (footer) */\n\n      [part=\"toolbar\"] {\n        padding: var(--lumo-space-s);\n        box-shadow: 0 -1px 0 0 var(--lumo-contrast-10pct);\n        border-bottom-left-radius: var(--lumo-border-radius);\n        margin-right: 57px;\n      }\n\n      @supports (mask-image: linear-gradient(#000, #000)) or (-webkit-mask-image: linear-gradient(#000, #000)) {\n        [part=\"toolbar\"] {\n          box-shadow: none;\n        }\n      }\n\n      /* Today and Cancel buttons */\n\n      /* TODO: Would be great if I could apply the \"tertiary\" theme from here instead of copying those styles */\n      [part=\"toolbar\"] [part\\$=\"button\"] {\n        background-color: transparent;\n        margin: 0;\n        min-width: 0;\n        padding: 0 0.75em;\n      }\n\n      /* Narrow viewport mode (fullscreen) */\n\n      :host([fullscreen]) [part=\"toolbar\"] {\n        order: -1;\n        background-color: var(--lumo-base-color);\n      }\n\n      :host([fullscreen]) [part=\"overlay-header\"] {\n        order: -2;\n        height: var(--lumo-size-m);\n        padding: var(--lumo-space-s);\n        position: absolute;\n        left: 0;\n        right: 0;\n        justify-content: center;\n      }\n\n      :host([fullscreen]) [part=\"toggle-button\"],\n      :host([fullscreen]) [part=\"clear-button\"],\n      [part=\"overlay-header\"] [part=\"label\"] {\n        display: none;\n      }\n\n      /* Very narrow screen (year scroller initially hidden) */\n\n      [part=\"years-toggle-button\"] {\n        position: relative;\n        right: auto;\n        display: flex;\n        align-items: center;\n        height: var(--lumo-size-s);\n        padding: 0 0.5em;\n        border-radius: var(--lumo-border-radius);\n        z-index: 3;\n        color: var(--lumo-primary-text-color);\n        font-weight: 500;\n        -webkit-font-smoothing: antialiased;\n        -moz-osx-font-smoothing: grayscale;\n      }\n\n      :host([years-visible]) [part=\"years-toggle-button\"] {\n        background-color: var(--lumo-primary-color);\n        color: var(--lumo-primary-contrast-color);\n      }\n\n      [part=\"years-toggle-button\"]::before {\n        content: none;\n      }\n\n      /* TODO magic number (same as used for iron-media-query in vaadin-date-picker-overlay-content) */\n      @media screen and (max-width: 374px) {\n        :host {\n          background-image: none;\n        }\n\n        [part=\"years\"] {\n          background-color: var(--lumo-shade-5pct);\n        }\n\n        [part=\"toolbar\"],\n        [part=\"months\"] {\n          margin-right: 0;\n        }\n\n        /* TODO make date-picker adapt to the width of the years part */\n        [part=\"years\"] {\n          --vaadin-infinite-scroller-buffer-width: 90px;\n          width: 50px;\n        }\n\n        :host([years-visible]) [part=\"months\"] {\n          padding-left: 50px;\n        }\n      }\n    </style>\n  </template>\n</dom-module>`;\n\ndocument.head.appendChild($_documentContainer.content);\n","import '@vaadin/vaadin-lumo-styles/sizing.js';\nimport '@vaadin/vaadin-lumo-styles/spacing.js';\nimport '@vaadin/vaadin-lumo-styles/mixins/menu-overlay.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\n\nconst $_documentContainer = html`<dom-module id=\"lumo-date-picker-overlay\" theme-for=\"vaadin-date-picker-overlay\">\n  <template>\n    <style include=\"lumo-menu-overlay\">\n      [part=\"overlay\"] {\n        /*\n        Width:\n            date cell widths\n          + month calendar side padding\n          + year scroller width\n        */\n        width:\n          calc(\n              var(--lumo-size-m) * 7\n            + var(--lumo-space-xs) * 2\n            + 57px\n          );\n        height: 100%;\n        max-height: calc(var(--lumo-size-m) * 14);\n        overflow: hidden;\n        -webkit-tap-highlight-color: transparent;\n      }\n\n      [part=\"content\"] {\n        padding: 0;\n        height: 100%;\n        overflow: hidden;\n        -webkit-mask-image: none;\n        mask-image: none;\n      }\n\n      @media (max-width: 420px), (max-height: 420px) {\n        [part=\"overlay\"] {\n          width: 100vw;\n          height: 70vh;\n          max-height: 70vh;\n        }\n      }\n    </style>\n  </template>\n</dom-module>`;\n\ndocument.head.appendChild($_documentContainer.content);\n","import '@vaadin/vaadin-lumo-styles/font-icons.js';\nimport '@vaadin/vaadin-lumo-styles/mixins/field-button.js';\nimport '@vaadin/vaadin-text-field/theme/lumo/vaadin-text-field.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\n\nconst $_documentContainer = html`<dom-module id=\"lumo-date-picker\" theme-for=\"vaadin-date-picker\">\n  <template>\n    <style include=\"lumo-field-button\">\n      :host {\n        outline: none;\n      }\n\n      [part=\"toggle-button\"]::before {\n        content: var(--lumo-icons-calendar);\n      }\n\n      [part=\"clear-button\"]::before {\n        content: var(--lumo-icons-cross);\n      }\n    </style>\n  </template>\n</dom-module>`;\n\ndocument.head.appendChild($_documentContainer.content);\n","import './vaadin-date-picker-overlay-styles.js';\nimport './vaadin-date-picker-overlay-content-styles.js';\nimport './vaadin-month-calendar-styles.js';\nimport './vaadin-date-picker-styles.js';\nimport '../../src/vaadin-date-picker.js';\n","import '@vaadin/vaadin-lumo-styles/color.js';\nimport '@vaadin/vaadin-lumo-styles/sizing.js';\nimport '@vaadin/vaadin-lumo-styles/spacing.js';\nimport '@vaadin/vaadin-lumo-styles/style.js';\nimport '@vaadin/vaadin-lumo-styles/typography.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\n\nconst $_documentContainer = html`<dom-module id=\"lumo-month-calendar\" theme-for=\"vaadin-month-calendar\">\n  <template>\n    <style>\n      :host {\n        -moz-user-select: none;\n        -ms-user-select: none;\n        -webkit-user-select: none;\n        -webkit-tap-highlight-color: transparent;\n        user-select: none;\n        font-size: var(--lumo-font-size-m);\n        color: var(--lumo-body-text-color);\n        text-align: center;\n        padding: 0 var(--lumo-space-xs);\n      }\n\n      /* Month header */\n\n      [part=\"month-header\"] {\n        color: var(--lumo-header-text-color);\n        font-size: var(--lumo-font-size-l);\n        line-height: 1;\n        font-weight: 500;\n        margin-bottom: var(--lumo-space-m);\n      }\n\n      /* Week days and numbers */\n\n      [part=\"weekdays\"],\n      [part=\"weekday\"],\n      [part=\"week-numbers\"] {\n        font-size: var(--lumo-font-size-xs);\n        line-height: 1;\n        color: var(--lumo-tertiary-text-color);\n      }\n\n      [part=\"weekdays\"] {\n        margin-bottom: var(--lumo-space-s);\n      }\n\n      /* TODO should have part=\"week-number\" for the cell in weekdays-container */\n      [part=\"weekday\"]:empty,\n      [part=\"week-numbers\"] {\n        width: var(--lumo-size-xs);\n      }\n\n      /* Date and week number cells */\n\n      [part=\"date\"],\n      [part=\"week-number\"] {\n        box-sizing: border-box;\n        display: inline-flex;\n        align-items: center;\n        justify-content: center;\n        height: var(--lumo-size-m);\n        position: relative;\n      }\n\n      [part=\"date\"] {\n        transition: color 0.1s;\n      }\n\n      /* Today date */\n\n      [part=\"date\"][today] {\n        color: var(--lumo-primary-text-color);\n      }\n\n      /* Focused date */\n\n      [part=\"date\"]::before {\n        content: \"\";\n        position: absolute;\n        z-index: -1;\n        top: 50%;\n        left: 50%;\n        transform: translate(-50%, -50%);\n        min-width: 2em;\n        min-height: 2em;\n        width: 80%;\n        height: 80%;\n        max-height: 100%;\n        max-width: 100%;\n        border-radius: var(--lumo-border-radius);\n      }\n\n      [part=\"date\"][focused]::before {\n        box-shadow: 0 0 0 2px var(--lumo-primary-color-50pct);\n      }\n\n      :host(:not([focused])) [part=\"date\"][focused]::before {\n        animation: vaadin-date-picker-month-calendar-focus-date 1.4s infinite;\n      }\n\n      @keyframes vaadin-date-picker-month-calendar-focus-date {\n        50% {\n          box-shadow: 0 0 0 2px transparent;\n        }\n      }\n\n      /* TODO should not rely on the role attribute */\n      [part=\"date\"][role=\"button\"]:not([disabled]):not([selected]):hover::before {\n        background-color: var(--lumo-primary-color-10pct);\n      }\n\n      [part=\"date\"][selected] {\n        color: var(--lumo-primary-contrast-color);\n      }\n\n      [part=\"date\"][selected]::before {\n        background-color: var(--lumo-primary-color);\n      }\n\n      [part=\"date\"][disabled] {\n        color: var(--lumo-disabled-text-color);\n      }\n\n      @media (pointer: coarse) {\n        [part=\"date\"]:hover:not([selected])::before,\n        [part=\"date\"][focused]:not([selected])::before {\n          display: none;\n        }\n\n        [part=\"date\"][role=\"button\"]:not([disabled]):active::before {\n          display: block;\n        }\n\n        [part=\"date\"][selected]::before {\n          box-shadow: none;\n        }\n      }\n\n      /* Disabled */\n\n      :host([disabled]) * {\n        color: var(--lumo-disabled-text-color) !important;\n      }\n    </style>\n  </template>\n</dom-module><custom-style>\n  <style>\n    @keyframes vaadin-date-picker-month-calendar-focus-date {\n      50% {\n        box-shadow: 0 0 0 2px transparent;\n      }\n    }\n  </style>\n</custom-style>`;\n\ndocument.head.appendChild($_documentContainer.content);\n","import './theme/lumo/vaadin-date-picker.js';\n","const DEV_MODE_CODE_REGEXP =\n  /\\/\\*\\*\\s+vaadin-dev-mode:start([\\s\\S]*)vaadin-dev-mode:end\\s+\\*\\*\\//i;\n\nfunction isMinified() {\n  function test() {\n    /** vaadin-dev-mode:start\n    return false;\n    vaadin-dev-mode:end **/\n    return true;\n  }\n  return uncommentAndRun(test);\n}\n\nfunction isDevelopmentMode() {\n  try {\n    return isForcedDevelopmentMode() || (isLocalhost() && !isMinified() && !isFlowProductionMode());\n  } catch (e) {\n    // Some error in this code, assume production so no further actions will be taken\n    return false;\n  }\n}\n\nfunction isForcedDevelopmentMode() {\n  return localStorage.getItem(\"vaadin.developmentmode.force\");\n}\n\nfunction isLocalhost() {\n  return ([\"localhost\",\"127.0.0.1\"].indexOf(window.location.hostname) >= 0);\n}\n\nfunction isFlowProductionMode() {\n  if (window.Vaadin && window.Vaadin.Flow && window.Vaadin.Flow.clients) {\n    const productionModeApps = Object.keys(window.Vaadin.Flow.clients)\n    .map(key => window.Vaadin.Flow.clients[key])\n    .filter(client => client.productionMode);\n    if (productionModeApps.length > 0) {\n      return true;\n    }\n  }\n  return false;\n}\n\nfunction uncommentAndRun(callback, args) {\n  if (typeof callback !== 'function') {\n    return;\n  }\n\n  const match = DEV_MODE_CODE_REGEXP.exec(callback.toString());\n  if (match) {\n    try {\n      // requires CSP: script-src 'unsafe-eval'\n      callback = new Function(match[1]);\n    } catch (e) {\n      // eat the exception\n      console.log('vaadin-development-mode-detector: uncommentAndRun() failed', e)\n    }\n  }\n\n  return callback(args);\n}\n\n// A guard against polymer-modulizer removing the window.Vaadin\n// initialization above.\nwindow['Vaadin'] = window['Vaadin'] || {};\n\n/**\n * Inspects the source code of the given `callback` function for\n * specially-marked _commented_ code. If such commented code is found in the\n * callback source, uncomments and runs that code instead of the callback\n * itself. Otherwise runs the callback as is.\n *\n * The optional arguments are passed into the callback / uncommented code,\n * the result is returned.\n *\n * See the `isMinified()` function source code in this file for an example.\n *\n */\nexport const runIfDevelopmentMode = function(callback, args) {\n  if (window.Vaadin.developmentMode) {\n    return uncommentAndRun(callback, args);\n  }\n};\n\nif (window.Vaadin.developmentMode === undefined) {\n  window.Vaadin.developmentMode = isDevelopmentMode();\n}\n","import { idlePeriod } from '@polymer/polymer/lib/utils/async.js';\nimport { Debouncer } from '@polymer/polymer/lib/utils/debounce.js';\nimport { enqueueDebouncer } from '@polymer/polymer/lib/utils/flush.js';\nimport { usageStatistics } from '@vaadin/vaadin-usage-statistics/vaadin-usage-statistics.js';\nif (!window.Vaadin) {\n  window['Vaadin'] = {};\n}\n\n/**\n * Array of Vaadin custom element classes that have been finalized.\n */\nwindow['Vaadin'].registrations = window.Vaadin.registrations || [];\n\n// Use the hack to prevent polymer-modulizer from converting to exports\nwindow['Vaadin'].developmentModeCallback = window.Vaadin.developmentModeCallback || {};\nwindow['Vaadin'].developmentModeCallback['vaadin-usage-statistics'] = function() {\n  if (usageStatistics) {\n    usageStatistics();\n  }\n};\n\nlet statsJob;\n\n/**\n * @polymerMixin\n */\nexport const ElementMixin = superClass => class VaadinElementMixin extends superClass {\n  /** @protected */\n  static _finalizeClass() {\n    super._finalizeClass();\n\n    // Registers a class prototype for telemetry purposes.\n    if (this.is) {\n      window.Vaadin.registrations.push(this);\n\n      if (window.Vaadin.developmentModeCallback) {\n        statsJob = Debouncer.debounce(statsJob,\n          idlePeriod, () => {\n            window.Vaadin.developmentModeCallback['vaadin-usage-statistics']();\n          }\n        );\n        enqueueDebouncer(statsJob);\n      }\n    }\n  }\n  ready() {\n    super.ready();\n    if (document.doctype === null) {\n      console.warn(\n        'Vaadin components require the \"standards mode\" declaration. Please add <!DOCTYPE html> to the HTML document.'\n      );\n    }\n  }\n};\n","import '../color.js';\nimport '../font-icons.js';\nimport '../sizing.js';\nimport '../style.js';\nconst $_documentContainer = document.createElement('template');\n\n$_documentContainer.innerHTML = `<dom-module id=\"lumo-field-button\">\n  <template>\n    <style>\n      [part\\$=\"button\"] {\n        flex: none;\n        width: 1em;\n        height: 1em;\n        line-height: 1;\n        font-size: var(--lumo-icon-size-m);\n        text-align: center;\n        color: var(--lumo-contrast-60pct);\n        transition: 0.2s color;\n        cursor: var(--lumo-clickable-cursor);\n      }\n\n      :host(:not([readonly])) [part\\$=\"button\"]:hover {\n        color: var(--lumo-contrast-90pct);\n      }\n\n      :host([disabled]) [part\\$=\"button\"],\n      :host([readonly]) [part\\$=\"button\"] {\n        color: var(--lumo-contrast-20pct);\n      }\n\n      [part\\$=\"button\"]::before {\n        font-family: \"lumo-icons\";\n        display: block;\n      }\n    </style>\n  </template>\n</dom-module>`;\n\ndocument.head.appendChild($_documentContainer.content);\n","import '../color.js';\nimport '../spacing.js';\nimport '../style.js';\nimport '../typography.js';\nconst $_documentContainer = document.createElement('template');\n\n$_documentContainer.innerHTML = `<dom-module id=\"lumo-required-field\">\n  <template>\n    <style>\n      [part=\"label\"] {\n        align-self: flex-start;\n        color: var(--lumo-secondary-text-color);\n        font-weight: 500;\n        font-size: var(--lumo-font-size-s);\n        margin-left: calc(var(--lumo-border-radius-m) / 4);\n        transition: color 0.2s;\n        line-height: 1;\n        padding-bottom: 0.5em;\n        overflow: hidden;\n        white-space: nowrap;\n        text-overflow: ellipsis;\n        position: relative;\n        max-width: 100%;\n        box-sizing: border-box;\n      }\n\n      :host([has-label])::before {\n        margin-top: calc(var(--lumo-font-size-s) * 1.5);\n      }\n\n      :host([has-label]) {\n        padding-top: var(--lumo-space-m);\n      }\n\n      :host([required]) [part=\"label\"] {\n        padding-right: 1em;\n      }\n\n      [part=\"label\"]::after {\n        content: var(--lumo-required-field-indicator, \"•\");\n        transition: opacity 0.2s;\n        opacity: 0;\n        color: var(--lumo-primary-text-color);\n        position: absolute;\n        right: 0;\n        width: 1em;\n        text-align: center;\n      }\n\n      :host([required]:not([has-value])) [part=\"label\"]::after {\n        opacity: 1;\n      }\n\n      :host([invalid]) [part=\"label\"]::after {\n        color: var(--lumo-error-text-color);\n      }\n\n      [part=\"error-message\"] {\n        margin-left: calc(var(--lumo-border-radius-m) / 4);\n        font-size: var(--lumo-font-size-xs);\n        line-height: var(--lumo-line-height-xs);\n        color: var(--lumo-error-text-color);\n        will-change: max-height;\n        transition: 0.4s max-height;\n        max-height: 5em;\n      }\n\n      /* Margin that doesn’t reserve space when there’s no error message */\n      [part=\"error-message\"]:not(:empty)::before,\n      [part=\"error-message\"]:not(:empty)::after {\n        content: \"\";\n        display: block;\n        height: 0.4em;\n      }\n\n      :host(:not([invalid])) [part=\"error-message\"] {\n        max-height: 0;\n        overflow: hidden;\n      }\n    </style>\n  </template>\n</dom-module>`;\n\ndocument.head.appendChild($_documentContainer.content);\n","/**\n@license\nCopyright (c) 2017 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\nimport '@vaadin/vaadin-themable-mixin/vaadin-themable-mixin.js';\n\nimport { ControlStateMixin } from '@vaadin/vaadin-control-state-mixin/vaadin-control-state-mixin.js';\nimport { timeOut } from '@polymer/polymer/lib/utils/async.js';\nimport { Debouncer } from '@polymer/polymer/lib/utils/debounce.js';\nconst $_documentContainer = document.createElement('template');\n\n$_documentContainer.innerHTML = `<dom-module id=\"vaadin-text-field-shared-styles\">\n  <template>\n    <style>\n      :host {\n        display: inline-flex;\n        outline: none;\n      }\n\n      :host::before {\n        content: \"\\\\2003\";\n        width: 0;\n        display: inline-block;\n        /* Size and position this element on the same vertical position as the input-field element\n           to make vertical align for the host element work as expected */\n      }\n\n      :host([hidden]) {\n        display: none !important;\n      }\n\n      .vaadin-text-field-container,\n      .vaadin-text-area-container {\n        display: flex;\n        flex-direction: column;\n        min-width: 100%;\n        max-width: 100%;\n        width: var(--vaadin-text-field-default-width, 12em);\n      }\n\n      [part=\"label\"]:empty {\n        display: none;\n      }\n\n      [part=\"input-field\"] {\n        display: flex;\n        align-items: center;\n        flex: auto;\n      }\n\n      .vaadin-text-field-container [part=\"input-field\"] {\n        flex-grow: 0;\n      }\n\n      /* Reset the native input styles */\n      [part=\"value\"],\n      [part=\"input-field\"] ::slotted(input),\n      [part=\"input-field\"] ::slotted(textarea) {\n        -webkit-appearance: none;\n        -moz-appearance: none;\n        outline: none;\n        margin: 0;\n        padding: 0;\n        border: 0;\n        border-radius: 0;\n        min-width: 0;\n        font: inherit;\n        font-size: 1em;\n        line-height: normal;\n        color: inherit;\n        background-color: transparent;\n        /* Disable default invalid style in Firefox */\n        box-shadow: none;\n      }\n\n      [part=\"input-field\"] ::slotted(*) {\n        flex: none;\n      }\n\n      [part=\"value\"],\n      [part=\"input-field\"] ::slotted(input),\n      [part=\"input-field\"] ::slotted(textarea),\n      /* Slotted by vaadin-select-text-field */\n      [part=\"input-field\"] ::slotted([part=\"value\"]) {\n        flex: auto;\n        white-space: nowrap;\n        overflow: hidden;\n        width: 100%;\n        height: 100%;\n      }\n\n      [part=\"input-field\"] ::slotted(textarea) {\n        resize: none;\n      }\n\n      [part=\"value\"]::-ms-clear,\n      [part=\"input-field\"] ::slotted(input)::-ms-clear {\n        display: none;\n      }\n\n      [part=\"clear-button\"] {\n        cursor: default;\n      }\n\n      [part=\"clear-button\"]::before {\n        content: \"✕\";\n      }\n    </style>\n  </template>\n</dom-module>`;\n\ndocument.head.appendChild($_documentContainer.content);\n\nconst HOST_PROPS = {\n  default: ['list', 'autofocus', 'pattern', 'autocapitalize', 'autocorrect', 'maxlength',\n    'minlength', 'name', 'placeholder', 'autocomplete', 'title'],\n  accessible: ['disabled', 'readonly', 'required', 'invalid']\n};\n\nconst PROP_TYPE = {\n  DEFAULT: 'default',\n  ACCESSIBLE: 'accessible'\n};\n\n\n/**\n * @polymerMixin\n * @mixes Vaadin.ControlStateMixin\n */\nexport const TextFieldMixin = subclass => class VaadinTextFieldMixin extends ControlStateMixin(subclass) {\n  static get properties() {\n    return {\n      /**\n       * Whether the value of the control can be automatically completed by the browser.\n       * List of available options at:\n       * https://developer.mozilla.org/en/docs/Web/HTML/Element/input#attr-autocomplete\n       */\n      autocomplete: {\n        type: String\n      },\n\n      /**\n       * This is a property supported by Safari that is used to control whether\n       * autocorrection should be enabled when the user is entering/editing the text.\n       * Possible values are:\n       * on: Enable autocorrection.\n       * off: Disable autocorrection.\n       */\n      autocorrect: {\n        type: String\n      },\n\n      /**\n       * This is a property supported by Safari and Chrome that is used to control whether\n       * autocapitalization should be enabled when the user is entering/editing the text.\n       * Possible values are:\n       * characters: Characters capitalization.\n       * words: Words capitalization.\n       * sentences: Sentences capitalization.\n       * none: No capitalization.\n       */\n      autocapitalize: {\n        type: String\n      },\n\n      /**\n       * Specify that the value should be automatically selected when the field gains focus.\n       */\n      autoselect: {\n        type: Boolean,\n        value: false\n      },\n\n      /**\n       * Set to true to display the clear icon which clears the input.\n       */\n      clearButtonVisible: {\n        type: Boolean,\n        value: false\n      },\n\n      /**\n       * Error to show when the input value is invalid.\n       */\n      errorMessage: {\n        type: String,\n        value: ''\n      },\n\n      /**\n       * Object with translated strings used for localization. Has\n       * the following structure and default values:\n       *\n       * ```\n       * {\n       *   // Translation of the clear icon button accessible label\n       *   clear: 'Clear'\n       * }\n       * ```\n       */\n      i18n: {\n        type: Object,\n        value: () => {\n          return {\n            clear: 'Clear'\n          };\n        }\n      },\n\n      /**\n       * String used for the label element.\n       */\n      label: {\n        type: String,\n        value: '',\n        observer: '_labelChanged'\n      },\n\n      /**\n       * Maximum number of characters (in Unicode code points) that the user can enter.\n       */\n      maxlength: {\n        type: Number\n      },\n\n      /**\n       * Minimum number of characters (in Unicode code points) that the user can enter.\n       */\n      minlength: {\n        type: Number\n      },\n\n      /**\n       * The name of the control, which is submitted with the form data.\n       */\n      name: {\n        type: String\n      },\n\n      /**\n       * A hint to the user of what can be entered in the control.\n       */\n      placeholder: {\n        type: String\n      },\n\n      /**\n       * This attribute indicates that the user cannot modify the value of the control.\n       */\n      readonly: {\n        type: Boolean,\n        reflectToAttribute: true\n      },\n\n      /**\n       * Specifies that the user must fill in a value.\n       */\n      required: {\n        type: Boolean,\n        reflectToAttribute: true\n      },\n\n\n      /**\n       * The initial value of the control.\n       * It can be used for two-way data binding.\n       */\n      value: {\n        type: String,\n        value: '',\n        observer: '_valueChanged',\n        notify: true\n      },\n\n      /**\n       * This property is set to true when the control value is invalid.\n       */\n      invalid: {\n        type: Boolean,\n        reflectToAttribute: true,\n        notify: true,\n        value: false\n      },\n\n      /**\n       * Specifies that the text field has value.\n       */\n      hasValue: {\n        type: Boolean,\n        reflectToAttribute: true\n      },\n\n      /**\n       * When set to true, user is prevented from typing a value that\n       * conflicts with the given `pattern`.\n       */\n      preventInvalidInput: {\n        type: Boolean\n      },\n\n      _labelId: {\n        type: String\n      },\n\n      _errorId: {\n        type: String\n      }\n    };\n  }\n\n  static get observers() {\n    return ['_stateChanged(disabled, readonly, clearButtonVisible, hasValue)',\n      '_hostPropsChanged(' + HOST_PROPS.default.join(', ') + ')',\n      '_hostAccessiblePropsChanged(' + HOST_PROPS.accessible.join(', ') + ')',\n      '_getActiveErrorId(invalid, errorMessage, _errorId)',\n      '_getActiveLabelId(label, _labelId)'];\n  }\n\n  get focusElement() {\n    if (!this.shadowRoot) {\n      return;\n    }\n    const slotted = this.querySelector(`${this._slottedTagName}[slot=\"${this._slottedTagName}\"]`);\n    if (slotted) {\n      return slotted;\n    }\n    return this.shadowRoot.querySelector('[part=\"value\"]');\n  }\n\n  /**\n   * @private\n   */\n  get inputElement() {\n    return this.focusElement;\n  }\n\n  get _slottedTagName() {\n    return 'input';\n  }\n\n  _onInput(e) {\n    if (this.__preventInput) {\n      e.stopImmediatePropagation();\n      this.__preventInput = false;\n      return;\n    }\n\n    if (this.preventInvalidInput) {\n      const input = this.inputElement;\n      if (input.value.length > 0 && !this.checkValidity()) {\n        input.value = this.value || '';\n        // add input-prevented attribute for 200ms\n        this.setAttribute('input-prevented', '');\n        this._inputDebouncer = Debouncer.debounce(\n          this._inputDebouncer,\n          timeOut.after(200), () => {\n            this.removeAttribute('input-prevented');\n          });\n        return;\n      }\n    }\n\n    if (!e.__fromClearButton) {\n      this.__userInput = true;\n    }\n    this.value = e.target.value;\n  }\n\n  // NOTE(yuriy): Workaround needed for IE11 and Edge for proper displaying\n  // of the clear button instead of setting display property for it depending on state.\n  _stateChanged(disabled, readonly, clearButtonVisible, hasValue) {\n    if (!disabled &&\n        !readonly &&\n        clearButtonVisible &&\n        hasValue\n    ) {\n      this.$.clearButton.removeAttribute('hidden');\n    } else {\n      this.$.clearButton.setAttribute('hidden', true);\n    }\n  }\n\n  _onChange(e) {\n    if (this._valueClearing) {\n      return;\n    }\n\n    // In the Shadow DOM, the `change` event is not leaked into the\n    // ancestor tree, so we must do this manually.\n    const changeEvent = new CustomEvent('change', {\n      detail: {\n        sourceEvent: e\n      },\n      bubbles: e.bubbles,\n      cancelable: e.cancelable,\n    });\n    this.dispatchEvent(changeEvent);\n  }\n\n  _valueChanged(newVal, oldVal) {\n    // setting initial value to empty string, skip validation\n    if (newVal === '' && oldVal === undefined) {\n      return;\n    }\n\n    if (newVal !== '' && newVal != null) {\n      this.hasValue = true;\n    } else {\n      this.hasValue = false;\n    }\n\n    if (this.__userInput) {\n      this.__userInput = false;\n      return;\n    } else if (newVal !== undefined) {\n      this.inputElement.value = newVal;\n    } else {\n      this.value = this.inputElement.value = '';\n    }\n\n    if (this.invalid) {\n      this.validate();\n    }\n  }\n\n  _labelChanged(label) {\n    if (label !== '' && label != null) {\n      this.setAttribute('has-label', '');\n    } else {\n      this.removeAttribute('has-label');\n    }\n  }\n\n  _onSlotChange() {\n    const slotted = this.querySelector(`${this._slottedTagName}[slot=\"${this._slottedTagName}\"]`);\n\n    if (this.value) {\n      this.inputElement.value = this.value;\n      this.validate();\n    }\n\n    if (slotted && !this._slottedInput) {\n      this._validateSlottedValue(slotted);\n      this._addInputListeners(slotted);\n      this._addIEListeners(slotted);\n      this._slottedInput = slotted;\n    } else if (!slotted && this._slottedInput) {\n      this._removeInputListeners(this._slottedInput);\n      this._removeIEListeners(this._slottedInput);\n      this._slottedInput = undefined;\n    }\n\n    Object.keys(PROP_TYPE).map(key => PROP_TYPE[key]).forEach(type =>\n      this._propagateHostAttributes(HOST_PROPS[type].map(attr => this[attr]), type));\n  }\n\n  _hostPropsChanged(...attributesValues) {\n    this._propagateHostAttributes(attributesValues, PROP_TYPE.DEFAULT);\n  }\n\n  _hostAccessiblePropsChanged(...attributesValues) {\n    this._propagateHostAttributes(attributesValues, PROP_TYPE.ACCESSIBLE);\n  }\n\n  _validateSlottedValue(slotted) {\n    if (slotted.value !== this.value) {\n      console.warn('Please define value on the vaadin-text-field component!');\n      slotted.value = '';\n    }\n  }\n\n  _propagateHostAttributes(attributesValues, type) {\n    const input = this.inputElement;\n    const attributeNames = HOST_PROPS[type];\n\n    if (type === 'accessible') {\n      attributeNames.forEach((attr, index) => {\n        this._setOrToggleAttribute(attr, attributesValues[index], input);\n        this._setOrToggleAttribute(`aria-${attr}`, attributesValues[index], input);\n      });\n    } else {\n      attributeNames.forEach((attr, index) => {\n        this._setOrToggleAttribute(attr, attributesValues[index], input);\n      });\n    }\n  }\n\n  _setOrToggleAttribute(name, value, node) {\n    if (!name || !node) {\n      return;\n    }\n\n    if (value) {\n      node.setAttribute(name, (typeof value === 'boolean') ? '' : value);\n    } else {\n      node.removeAttribute(name);\n    }\n  }\n\n  /**\n   * Returns true if the current input value satisfies all constraints (if any)\n   * @returns {boolean}\n   */\n  checkValidity() {\n    if (this.required || this.pattern || this.maxlength || this.minlength) {\n      return this.inputElement.checkValidity();\n    } else {\n      return !this.invalid;\n    }\n  }\n\n  _addInputListeners(node) {\n    node.addEventListener('input', this._boundOnInput);\n    node.addEventListener('change', this._boundOnChange);\n    node.addEventListener('blur', this._boundOnBlur);\n    node.addEventListener('focus', this._boundOnFocus);\n  }\n\n  _removeInputListeners(node) {\n    node.removeEventListener('input', this._boundOnInput);\n    node.removeEventListener('change', this._boundOnChange);\n    node.removeEventListener('blur', this._boundOnBlur);\n    node.removeEventListener('focus', this._boundOnFocus);\n  }\n\n  ready() {\n    super.ready();\n\n    this._boundOnInput = this._onInput.bind(this);\n    this._boundOnChange = this._onChange.bind(this);\n    this._boundOnBlur = this._onBlur.bind(this);\n    this._boundOnFocus = this._onFocus.bind(this);\n\n    const defaultInput = this.shadowRoot.querySelector('[part=\"value\"]');\n    this._slottedInput = this.querySelector(`${this._slottedTagName}[slot=\"${this._slottedTagName}\"]`);\n    this._addInputListeners(defaultInput);\n    this._addIEListeners(defaultInput);\n    if (this._slottedInput) {\n      this._addIEListeners(this._slottedInput);\n      this._addInputListeners(this._slottedInput);\n    }\n\n    this.shadowRoot.querySelector('[name=\"input\"], [name=\"textarea\"]')\n      .addEventListener('slotchange', this._onSlotChange.bind(this));\n\n    if (!(window.ShadyCSS && window.ShadyCSS.nativeCss)) {\n      this.updateStyles();\n    }\n\n    this.$.clearButton.addEventListener('mousedown', () => this._valueClearing = true);\n    this.$.clearButton.addEventListener('mouseleave', () => this._valueClearing = false);\n    this.$.clearButton.addEventListener('click', this._onClearButtonClick.bind(this));\n    this.addEventListener('keydown', this._onKeyDown.bind(this));\n\n    var uniqueId = TextFieldMixin._uniqueId = 1 + TextFieldMixin._uniqueId || 0;\n    this._errorId = `${this.constructor.is}-error-${uniqueId}`;\n    this._labelId = `${this.constructor.is}-label-${uniqueId}`;\n  }\n\n  /**\n   * Returns true if `value` is valid.\n   * `<iron-form>` uses this to check the validity or all its elements.\n   *\n   * @return {boolean} True if the value is valid.\n   */\n  validate() {\n    return !(this.invalid = !this.checkValidity());\n  }\n\n  clear() {\n    this.value = '';\n  }\n\n  _onBlur() {\n    this.validate();\n  }\n\n  _onFocus() {\n    if (this.autoselect) {\n      this.inputElement.select();\n      // iOS 9 workaround: https://stackoverflow.com/a/7436574\n      setTimeout(() => {\n        this.inputElement.setSelectionRange(0, 9999);\n      });\n    }\n  }\n\n  _onClearButtonClick(e) {\n    e.preventDefault();\n    // NOTE(yuriy): This line won't affect focus on the host. Cannot be properly tested.\n    this.inputElement.focus();\n    this.clear();\n    this._valueClearing = false;\n    if (navigator.userAgent.match(/Trident/)) {\n      // Disable IE input\" event prevention here, we want the input event from\n      // below to propagate normally.\n      this.__preventInput = false;\n    }\n    const inputEvent = new Event('input', {bubbles: true, composed: true});\n    inputEvent.__fromClearButton = true;\n    const changeEvent = new Event('change', {bubbles: !this._slottedInput});\n    changeEvent.__fromClearButton = true;\n    this.inputElement.dispatchEvent(inputEvent);\n    this.inputElement.dispatchEvent(changeEvent);\n  }\n\n  _onKeyDown(e) {\n    if (e.keyCode === 27 && this.clearButtonVisible) {\n      this.clear();\n    }\n  }\n\n  _addIEListeners(node) {\n    /* istanbul ignore if */\n    if (navigator.userAgent.match(/Trident/)) {\n      // IE11 dispatches `input` event in following cases:\n      // - focus or blur, when placeholder attribute is set\n      // - placeholder attribute value changed\n      // https://developer.microsoft.com/en-us/microsoft-edge/platform/issues/101220/\n      this._shouldPreventInput = () => {\n        this.__preventInput = true;\n        requestAnimationFrame(() => {\n          this.__preventInput = false;\n        });\n      };\n      node.addEventListener('focusin', this._shouldPreventInput);\n      node.addEventListener('focusout', this._shouldPreventInput);\n      this._createPropertyObserver('placeholder', this._shouldPreventInput);\n    }\n  }\n\n  _removeIEListeners(node) {\n    /* istanbul ignore if */\n    if (navigator.userAgent.match(/Trident/)) {\n      node.removeEventListener('focusin', this._shouldPreventInput);\n      node.removeEventListener('focusout', this._shouldPreventInput);\n    }\n  }\n\n  _getActiveErrorId(invalid, errorMessage, errorId) {\n    this._setOrToggleAttribute('aria-describedby',\n      (errorMessage && invalid ? errorId : undefined),\n      this.inputElement);\n  }\n\n  _getActiveLabelId(label, labelId) {\n    this._setOrToggleAttribute('aria-labelledby',\n      (label ? labelId : undefined),\n      this.inputElement);\n  }\n\n  _getErrorMessageAriaHidden(invalid, errorMessage, errorId) {\n    return (!(errorMessage && invalid ? errorId : undefined)).toString();\n  }\n\n  /**\n   * @protected\n   */\n  attributeChangedCallback(prop, oldVal, newVal) {\n    super.attributeChangedCallback(prop, oldVal, newVal);\n    // Needed until Edge has CSS Custom Properties (present in Edge Preview)\n    /* istanbul ignore if */\n    if (!(window.ShadyCSS && window.ShadyCSS.nativeCss) &&\n      /^(focused|focus-ring|invalid|disabled|placeholder|has-value)$/.test(prop)) {\n      this.updateStyles();\n    }\n\n    // Safari has an issue with repainting shadow root element styles when a host attribute changes.\n    // Need this workaround (toggle any inline css property on and off) until the issue gets fixed.\n    const isSafari = /^((?!chrome|android).)*safari/i.test(navigator.userAgent);\n    /* istanbul ignore if */\n    if (isSafari && this.root) {\n      const WEBKIT_PROPERTY = '-webkit-backface-visibility';\n      this.root.querySelectorAll('*').forEach(el => {\n        el.style[WEBKIT_PROPERTY] = 'visible';\n        el.style[WEBKIT_PROPERTY] = '';\n      });\n    }\n  }\n\n  /**\n   * Fired when the user commits a value change.\n   *\n   * @event change\n   */\n\n  /**\n   * Fired when the value is changed by the user: on every typing keystroke,\n   * and the value is cleared using the clear button.\n   *\n   * @event input\n   */\n};\n","/**\n@license\nCopyright (c) 2017 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport { TextFieldMixin } from './vaadin-text-field-mixin.js';\nimport { ElementMixin } from '@vaadin/vaadin-element-mixin/vaadin-element-mixin.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { ThemableMixin } from '@vaadin/vaadin-themable-mixin/vaadin-themable-mixin.js';\n/**\n * `<vaadin-text-field>` is a Web Component for text field control in forms.\n *\n * ```html\n * <vaadin-text-field label=\"First Name\">\n * </vaadin-text-field>\n * ```\n *\n * ### Prefixes and suffixes\n *\n * These are child elements of a `<vaadin-text-field>` that are displayed\n * inline with the input, before or after.\n * In order for an element to be considered as a prefix, it must have the slot\n * attribute set to `prefix` (and similarly for `suffix`).\n *\n * ```html\n * <vaadin-text-field label=\"Email address\">\n *   <div slot=\"prefix\">Sent to:</div>\n *   <div slot=\"suffix\">@vaadin.com</div>\n * </vaadin-text-area>\n * ```\n *\n * ### Styling\n *\n * The following custom properties are available for styling:\n *\n * Custom property | Description | Default\n * ----------------|-------------|-------------\n * `--vaadin-text-field-default-width` | Set the default width of the input field | `12em`\n *\n * The following shadow DOM parts are available for styling:\n *\n * Part name | Description\n * ----------------|----------------\n * `label` | The label element\n * `input-field` | The element that wraps prefix, value and suffix\n * `value` | The text value element inside the `input-field` element\n * `error-message` | The error message element\n *\n * The following state attributes are available for styling:\n *\n * Attribute    | Description | Part name\n * -------------|-------------|------------\n * `disabled` | Set to a disabled text field | :host\n * `has-value` | Set when the element has a value | :host\n * `has-label` | Set when the element has a label | :host\n * `invalid` | Set when the element is invalid | :host\n * `input-prevented` | Temporarily set when invalid input is prevented | :host\n * `focused` | Set when the element is focused | :host\n * `focus-ring` | Set when the element is keyboard focused | :host\n * `readonly` | Set to a readonly text field | :host\n *\n * See [ThemableMixin – how to apply styles for shadow parts](https://github.com/vaadin/vaadin-themable-mixin/wiki)\n *\n * @memberof Vaadin\n * @mixes Vaadin.TextFieldMixin\n * @mixes Vaadin.ThemableMixin\n * @demo demo/index.html\n */\nclass TextFieldElement extends ElementMixin(TextFieldMixin(ThemableMixin(PolymerElement))) {\n  static get template() {\n    return html`\n    <style include=\"vaadin-text-field-shared-styles\">\n      /* polymer-cli linter breaks with empty line */\n    </style>\n\n    <div class=\"vaadin-text-field-container\">\n\n      <label part=\"label\" on-click=\"focus\" id=\"[[_labelId]]\">[[label]]</label>\n\n      <div part=\"input-field\">\n\n        <slot name=\"prefix\"></slot>\n\n        <slot name=\"input\">\n          <input part=\"value\">\n        </slot>\n\n        <div part=\"clear-button\" id=\"clearButton\" role=\"button\" aria-label\\$=\"[[i18n.clear]]\"></div>\n        <slot name=\"suffix\"></slot>\n\n      </div>\n\n      <div part=\"error-message\" id=\"[[_errorId]]\" aria-live=\"assertive\" aria-hidden\\$=\"[[_getErrorMessageAriaHidden(invalid, errorMessage, _errorId)]]\">[[errorMessage]]</div>\n\n    </div>\n`;\n  }\n\n  static get is() {\n    return 'vaadin-text-field';\n  }\n\n  static get version() {\n    return '2.4.4';\n  }\n\n  static get properties() {\n    return {\n      /**\n       * Identifies a list of pre-defined options to suggest to the user.\n       * The value must be the id of a <datalist> element in the same document.\n       */\n      list: {\n        type: String\n      },\n\n      /**\n       * A regular expression that the value is checked against.\n       * The pattern must match the entire value, not just some subset.\n       */\n      pattern: {\n        type: String\n      },\n\n      /**\n       * Message to show to the user when validation fails.\n       */\n      title: {\n        type: String\n      }\n    };\n  }\n}\n\ncustomElements.define(TextFieldElement.is, TextFieldElement);\n\nexport { TextFieldElement };\n","import '@vaadin/vaadin-lumo-styles/color.js';\nimport '@vaadin/vaadin-lumo-styles/sizing.js';\nimport '@vaadin/vaadin-lumo-styles/spacing.js';\nimport '@vaadin/vaadin-lumo-styles/style.js';\nimport '@vaadin/vaadin-lumo-styles/typography.js';\nimport '@vaadin/vaadin-lumo-styles/mixins/required-field.js';\nimport '@vaadin/vaadin-lumo-styles/font-icons.js';\nimport '@vaadin/vaadin-lumo-styles/mixins/field-button.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\n\nconst $_documentContainer = html`<dom-module id=\"lumo-text-field\" theme-for=\"vaadin-text-field\">\n  <template>\n    <style include=\"lumo-required-field lumo-field-button\">\n      :host {\n        --lumo-text-field-size: var(--lumo-size-m);\n        color: var(--lumo-body-text-color);\n        font-size: var(--lumo-font-size-m);\n        font-family: var(--lumo-font-family);\n        -webkit-font-smoothing: antialiased;\n        -moz-osx-font-smoothing: grayscale;\n        -webkit-tap-highlight-color: transparent;\n        padding: var(--lumo-space-xs) 0;\n      }\n\n      :host::before {\n        height: var(--lumo-text-field-size);\n        box-sizing: border-box;\n        display: inline-flex;\n        align-items: center;\n      }\n\n      :host([focused]:not([readonly])) [part=\"label\"] {\n        color: var(--lumo-primary-text-color);\n      }\n\n      [part=\"value\"],\n      [part=\"input-field\"] ::slotted(input),\n      [part=\"input-field\"] ::slotted(textarea),\n      /* Slotted by vaadin-select-text-field */\n      [part=\"input-field\"] ::slotted([part=\"value\"]) {\n        cursor: inherit;\n        min-height: var(--lumo-text-field-size);\n        padding: 0 0.25em;\n        --_lumo-text-field-overflow-mask-image: linear-gradient(to left, transparent, #000 1.25em);\n        -webkit-mask-image: var(--_lumo-text-field-overflow-mask-image);\n      }\n\n      [part=\"value\"]:focus,\n      [part=\"input-field\"] ::slotted(input):focus,\n      [part=\"input-field\"] ::slotted(textarea):focus {\n        -webkit-mask-image: none;\n        mask-image: none;\n      }\n\n      /*\n        TODO: CSS custom property in \\`mask-image\\` causes crash in Edge\n        see https://developer.microsoft.com/en-us/microsoft-edge/platform/issues/15415089/\n      */\n      @-moz-document url-prefix() {\n        [part=\"value\"],\n        [part=\"input-field\"] ::slotted(input),\n        [part=\"input-field\"] ::slotted(textarea),\n        [part=\"input-field\"] ::slotted([part=\"value\"]) {\n          mask-image: var(--_lumo-text-field-overflow-mask-image);\n        }\n      }\n\n      [part=\"value\"]::-webkit-input-placeholder {\n        color: inherit;\n        transition: opacity 0.175s 0.05s;\n        opacity: 0.5;\n      }\n\n      [part=\"value\"]:-ms-input-placeholder {\n        color: inherit;\n        opacity: 0.5;\n      }\n\n      [part=\"value\"]::-moz-placeholder {\n        color: inherit;\n        transition: opacity 0.175s 0.05s;\n        opacity: 0.5;\n      }\n\n      [part=\"value\"]::placeholder {\n        color: inherit;\n        transition: opacity 0.175s 0.1s;\n        opacity: 0.5;\n      }\n\n      [part=\"input-field\"] {\n        border-radius: var(--lumo-border-radius);\n        background-color: var(--lumo-contrast-10pct);\n        padding: 0 calc(0.375em + var(--lumo-border-radius) / 4 - 1px);\n        font-weight: 500;\n        line-height: 1;\n        position: relative;\n        cursor: text;\n        box-sizing: border-box;\n      }\n\n      /* Used for hover and activation effects */\n      [part=\"input-field\"]::after {\n        content: \"\";\n        position: absolute;\n        top: 0;\n        right: 0;\n        bottom: 0;\n        left: 0;\n        border-radius: inherit;\n        pointer-events: none;\n        background-color: var(--lumo-contrast-50pct);\n        opacity: 0;\n        transition: transform 0.15s, opacity 0.2s;\n        transform-origin: 100% 0;\n      }\n\n      /* Hover */\n\n      :host(:hover:not([readonly]):not([focused])) [part=\"label\"] {\n        color: var(--lumo-body-text-color);\n      }\n\n      :host(:hover:not([readonly]):not([focused])) [part=\"input-field\"]::after {\n        opacity: 0.1;\n      }\n\n      /* Touch device adjustment */\n      @media (pointer: coarse) {\n        :host(:hover:not([readonly]):not([focused])) [part=\"label\"] {\n          color: var(--lumo-secondary-text-color);\n        }\n\n        :host(:hover:not([readonly]):not([focused])) [part=\"input-field\"]::after {\n          opacity: 0;\n        }\n\n        :host(:active:not([readonly]):not([focused])) [part=\"input-field\"]::after {\n          opacity: 0.2;\n        }\n      }\n\n      /* Trigger when not focusing using the keyboard */\n      :host([focused]:not([focus-ring]):not([readonly])) [part=\"input-field\"]::after {\n        transform: scaleX(0);\n        transition-duration: 0.15s, 1s;\n      }\n\n      /* Focus-ring */\n\n      :host([focus-ring]) [part=\"input-field\"] {\n        box-shadow: 0 0 0 2px var(--lumo-primary-color-50pct);\n      }\n\n      /* Read-only and disabled */\n      :host([readonly]) [part=\"value\"]::-webkit-input-placeholder,\n      :host([disabled]) [part=\"value\"]::-webkit-input-placeholder {\n        opacity: 0;\n      }\n\n      :host([readonly]) [part=\"value\"]:-ms-input-placeholder,\n      :host([disabled]) [part=\"value\"]:-ms-input-placeholder {\n        opacity: 0;\n      }\n\n      :host([readonly]) [part=\"value\"]::-moz-placeholder,\n      :host([disabled]) [part=\"value\"]::-moz-placeholder {\n        opacity: 0;\n      }\n\n      :host([readonly]) [part=\"value\"]::placeholder,\n      :host([disabled]) [part=\"value\"]::placeholder {\n        opacity: 0;\n      }\n\n      /* Read-only */\n\n      :host([readonly]) [part=\"input-field\"] {\n        color: var(--lumo-secondary-text-color);\n        background-color: transparent;\n        cursor: default;\n      }\n\n      :host([readonly]) [part=\"input-field\"]::after {\n        background-color: transparent;\n        opacity: 1;\n        border: 1px dashed var(--lumo-contrast-30pct);\n      }\n\n      /* Disabled style */\n\n      :host([disabled]) {\n        pointer-events: none;\n      }\n\n      :host([disabled]) [part=\"input-field\"] {\n        background-color: var(--lumo-contrast-5pct);\n      }\n\n      :host([disabled]) [part=\"label\"],\n      :host([disabled]) [part=\"value\"],\n      :host([disabled]) [part=\"input-field\"] ::slotted(*) {\n        color: var(--lumo-disabled-text-color);\n        -webkit-text-fill-color: var(--lumo-disabled-text-color);\n      }\n\n      /* Invalid style */\n\n      :host([invalid]) [part=\"input-field\"] {\n        background-color: var(--lumo-error-color-10pct);\n      }\n\n      :host([invalid]) [part=\"input-field\"]::after {\n        background-color: var(--lumo-error-color-50pct);\n      }\n\n      :host([invalid][focus-ring]) [part=\"input-field\"] {\n        box-shadow: 0 0 0 2px var(--lumo-error-color-50pct);\n      }\n\n      :host([input-prevented]) [part=\"input-field\"] {\n        color: var(--lumo-error-text-color);\n      }\n\n      /* Small theme */\n\n      :host([theme~=\"small\"]) {\n        font-size: var(--lumo-font-size-s);\n        --lumo-text-field-size: var(--lumo-size-s);\n      }\n\n      :host([theme~=\"small\"][has-label]) [part=\"label\"] {\n        font-size: var(--lumo-font-size-xs);\n      }\n\n      :host([theme~=\"small\"][has-label]) [part=\"error-message\"] {\n        font-size: var(--lumo-font-size-xxs);\n      }\n\n      /* Text align */\n\n      :host([theme~=\"align-center\"]) [part=\"value\"] {\n        text-align: center;\n        --_lumo-text-field-overflow-mask-image: none;\n      }\n\n      :host([theme~=\"align-right\"]) [part=\"value\"] {\n        text-align: right;\n        --_lumo-text-field-overflow-mask-image: none;\n      }\n\n      @-moz-document url-prefix() {\n        /* Firefox is smart enough to align overflowing text to right */\n        :host([theme~=\"align-right\"]) [part=\"value\"] {\n          --_lumo-text-field-overflow-mask-image: linear-gradient(to right, transparent 0.25em, #000 1.5em);\n        }\n      }\n\n      /* Slotted content */\n\n      [part=\"input-field\"] ::slotted(:not([part]):not(iron-icon):not(input):not(textarea)) {\n        color: var(--lumo-secondary-text-color);\n        font-weight: 400;\n      }\n\n      /* Slotted icons */\n\n      [part=\"input-field\"] ::slotted(iron-icon) {\n        color: var(--lumo-contrast-60pct);\n        width: var(--lumo-icon-size-m);\n        height: var(--lumo-icon-size-m);\n      }\n\n      /* Vaadin icons are based on a 16x16 grid (unlike Lumo and Material icons with 24x24), so they look too big by default */\n      [part=\"input-field\"] ::slotted(iron-icon[icon^=\"vaadin:\"]) {\n        padding: 0.25em;\n        box-sizing: border-box !important;\n      }\n\n      [part=\"clear-button\"]::before {\n        content: var(--lumo-icons-cross);\n      }\n    </style>\n  </template>\n</dom-module>`;\n\ndocument.head.appendChild($_documentContainer.content);\n","import './vaadin-text-field-styles.js';\nimport '../../src/vaadin-text-field.js';\n","/* This file is autogenerated from src/vaadin-usage-statistics.tpl.html */\n/*\n\nThis script gathers usage statistics from the application running in development mode.\n\nStatistics gathering is automatically disabled and excluded from production builds.\n\nFor details and to opt-out, see https://github.com/vaadin/vaadin-usage-statistics.\n\n*/\n/*\n  FIXME(polymer-modulizer): the above comments were extracted\n  from HTML and may be out of place here. Review them and\n  then delete this comment!\n*/\nimport { runIfDevelopmentMode } from '@vaadin/vaadin-development-mode-detector/vaadin-development-mode-detector.js';\n\nfunction maybeGatherAndSendStats() {\n  /** vaadin-dev-mode:start\n  (function () {\n'use strict';\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) {\n  return typeof obj;\n} : function (obj) {\n  return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n};\n\nvar classCallCheck = function (instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};\n\nvar createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar getPolymerVersion = function getPolymerVersion() {\n  return window.Polymer && window.Polymer.version;\n};\n\nvar StatisticsGatherer = function () {\n  function StatisticsGatherer(logger) {\n    classCallCheck(this, StatisticsGatherer);\n\n    this.now = new Date().getTime();\n    this.logger = logger;\n  }\n\n  createClass(StatisticsGatherer, [{\n    key: 'frameworkVersionDetectors',\n    value: function frameworkVersionDetectors() {\n      return {\n        'Flow': function Flow() {\n          if (window.Vaadin && window.Vaadin.Flow && window.Vaadin.Flow.clients) {\n            var flowVersions = Object.keys(window.Vaadin.Flow.clients).map(function (key) {\n              return window.Vaadin.Flow.clients[key];\n            }).filter(function (client) {\n              return client.getVersionInfo;\n            }).map(function (client) {\n              return client.getVersionInfo().flow;\n            });\n            if (flowVersions.length > 0) {\n              return flowVersions[0];\n            }\n          }\n        },\n        'Vaadin Framework': function VaadinFramework() {\n          if (window.vaadin && window.vaadin.clients) {\n            var frameworkVersions = Object.values(window.vaadin.clients).filter(function (client) {\n              return client.getVersionInfo;\n            }).map(function (client) {\n              return client.getVersionInfo().vaadinVersion;\n            });\n            if (frameworkVersions.length > 0) {\n              return frameworkVersions[0];\n            }\n          }\n        },\n        'AngularJs': function AngularJs() {\n          if (window.angular && window.angular.version && window.angular.version) {\n            return window.angular.version.full;\n          }\n        },\n        'Angular': function Angular() {\n          if (window.ng) {\n            var tags = document.querySelectorAll(\"[ng-version]\");\n            if (tags.length > 0) {\n              return tags[0].getAttribute(\"ng-version\");\n            }\n            return \"Unknown\";\n          }\n        },\n        'Backbone.js': function BackboneJs() {\n          if (window.Backbone) {\n            return window.Backbone.VERSION;\n          }\n        },\n        'React': function React() {\n          var reactSelector = '[data-reactroot], [data-reactid]';\n          if (!!document.querySelector(reactSelector)) {\n            // React does not publish the version by default\n            return \"unknown\";\n          }\n        },\n        'Ember': function Ember() {\n          if (window.Em && window.Em.VERSION) {\n            return window.Em.VERSION;\n          } else if (window.Ember && window.Ember.VERSION) {\n            return window.Ember.VERSION;\n          }\n        },\n        'jQuery': function (_jQuery) {\n          function jQuery() {\n            return _jQuery.apply(this, arguments);\n          }\n\n          jQuery.toString = function () {\n            return _jQuery.toString();\n          };\n\n          return jQuery;\n        }(function () {\n          if (typeof jQuery === 'function' && jQuery.prototype.jquery !== undefined) {\n            return jQuery.prototype.jquery;\n          }\n        }),\n        'Polymer': function Polymer() {\n          var version = getPolymerVersion();\n          if (version) {\n            return version;\n          }\n        },\n        'LitElement': function LitElement() {\n          var version = window.litElementVersions && window.litElementVersions[0];\n          if (version) {\n            return version;\n          }\n        },\n        'LitHtml': function LitHtml() {\n          var version = window.litHtmlVersions && window.litHtmlVersions[0];\n          if (version) {\n            return version;\n          }\n        },\n        'Vue.js': function VueJs() {\n          if (window.Vue) {\n            return window.Vue.version;\n          }\n        }\n      };\n    }\n  }, {\n    key: 'getUsedVaadinElements',\n    value: function getUsedVaadinElements(elements) {\n      var version = getPolymerVersion();\n      var elementClasses = void 0;\n      if (version && version.indexOf('2') === 0) {\n        // Polymer 2: components classes are stored in window.Vaadin\n        elementClasses = Object.keys(window.Vaadin).map(function (c) {\n          return window.Vaadin[c];\n        }).filter(function (c) {\n          return c.is;\n        });\n      } else {\n        // Polymer 3: components classes are stored in window.Vaadin.registrations\n        elementClasses = window.Vaadin.registrations || [];\n      }\n      elementClasses.forEach(function (klass) {\n        var version = klass.version ? klass.version : \"0.0.0\";\n        elements[klass.is] = { version: version };\n      });\n    }\n  }, {\n    key: 'getUsedVaadinThemes',\n    value: function getUsedVaadinThemes(themes) {\n      ['Lumo', 'Material'].forEach(function (themeName) {\n        var theme;\n        var version = getPolymerVersion();\n        if (version && version.indexOf('2') === 0) {\n          // Polymer 2: themes are stored in window.Vaadin\n          theme = window.Vaadin[themeName];\n        } else {\n          // Polymer 3: themes are stored in custom element registry\n          theme = customElements.get('vaadin-' + themeName.toLowerCase() + '-styles');\n        }\n        if (theme && theme.version) {\n          themes[themeName] = { version: theme.version };\n        }\n      });\n    }\n  }, {\n    key: 'getFrameworks',\n    value: function getFrameworks(frameworks) {\n      var detectors = this.frameworkVersionDetectors();\n      Object.keys(detectors).forEach(function (framework) {\n        var detector = detectors[framework];\n        try {\n          var version = detector();\n          if (version) {\n            frameworks[framework] = { \"version\": version };\n          }\n        } catch (e) {}\n      });\n    }\n  }, {\n    key: 'gather',\n    value: function gather(storage) {\n      var storedStats = storage.read();\n      var gatheredStats = {};\n      var types = [\"elements\", \"frameworks\", \"themes\"];\n\n      types.forEach(function (type) {\n        gatheredStats[type] = {};\n        if (!storedStats[type]) {\n          storedStats[type] = {};\n        }\n      });\n\n      var previousStats = JSON.stringify(storedStats);\n\n      this.getUsedVaadinElements(gatheredStats.elements);\n      this.getFrameworks(gatheredStats.frameworks);\n      this.getUsedVaadinThemes(gatheredStats.themes);\n\n      var now = this.now;\n      types.forEach(function (type) {\n        var keys = Object.keys(gatheredStats[type]);\n        keys.forEach(function (key) {\n          if (!storedStats[type][key] || _typeof(storedStats[type][key]) != _typeof({})) {\n            storedStats[type][key] = { \"firstUsed\": now };\n          }\n          // Discards any previously logged version numebr\n          storedStats[type][key].version = gatheredStats[type][key].version;\n          storedStats[type][key].lastUsed = now;\n        });\n      });\n\n      var newStats = JSON.stringify(storedStats);\n      storage.write(newStats);\n      if (newStats != previousStats && Object.keys(storedStats).length > 0) {\n        this.logger.debug(\"New stats: \" + newStats);\n      }\n    }\n  }]);\n  return StatisticsGatherer;\n}();\n\nvar StatisticsStorage = function () {\n  function StatisticsStorage(key) {\n    classCallCheck(this, StatisticsStorage);\n\n    this.key = key;\n  }\n\n  createClass(StatisticsStorage, [{\n    key: 'read',\n    value: function read() {\n      var localStorageStatsString = localStorage.getItem(this.key);\n      try {\n        return JSON.parse(localStorageStatsString ? localStorageStatsString : '{}');\n      } catch (e) {\n        return {};\n      }\n    }\n  }, {\n    key: 'write',\n    value: function write(data) {\n      localStorage.setItem(this.key, data);\n    }\n  }, {\n    key: 'clear',\n    value: function clear() {\n      localStorage.removeItem(this.key);\n    }\n  }, {\n    key: 'isEmpty',\n    value: function isEmpty() {\n      var storedStats = this.read();\n      var empty = true;\n      Object.keys(storedStats).forEach(function (key) {\n        if (Object.keys(storedStats[key]).length > 0) {\n          empty = false;\n        }\n      });\n\n      return empty;\n    }\n  }]);\n  return StatisticsStorage;\n}();\n\nvar StatisticsSender = function () {\n  function StatisticsSender(url, logger) {\n    classCallCheck(this, StatisticsSender);\n\n    this.url = url;\n    this.logger = logger;\n  }\n\n  createClass(StatisticsSender, [{\n    key: 'send',\n    value: function send(data, errorHandler) {\n      var logger = this.logger;\n\n      if (navigator.onLine === false) {\n        logger.debug(\"Offline, can't send\");\n        errorHandler();\n        return;\n      }\n      logger.debug(\"Sending data to \" + this.url);\n\n      var req = new XMLHttpRequest();\n      req.withCredentials = true;\n      req.addEventListener(\"load\", function () {\n        // Stats sent, nothing more to do\n        logger.debug(\"Response: \" + req.responseText);\n      });\n      req.addEventListener(\"error\", function () {\n        logger.debug(\"Send failed\");\n        errorHandler();\n      });\n      req.addEventListener(\"abort\", function () {\n        logger.debug(\"Send aborted\");\n        errorHandler();\n      });\n      req.open(\"POST\", this.url);\n      req.setRequestHeader(\"Content-Type\", \"application/json\");\n      req.send(data);\n    }\n  }]);\n  return StatisticsSender;\n}();\n\nvar StatisticsLogger = function () {\n  function StatisticsLogger(id) {\n    classCallCheck(this, StatisticsLogger);\n\n    this.id = id;\n  }\n\n  createClass(StatisticsLogger, [{\n    key: '_isDebug',\n    value: function _isDebug() {\n      return localStorage.getItem(\"vaadin.\" + this.id + \".debug\");\n    }\n  }, {\n    key: 'debug',\n    value: function debug(msg) {\n      if (this._isDebug()) {\n        console.info(this.id + \": \" + msg);\n      }\n    }\n  }]);\n  return StatisticsLogger;\n}();\n\nvar UsageStatistics = function () {\n  function UsageStatistics() {\n    classCallCheck(this, UsageStatistics);\n\n    this.now = new Date();\n    this.timeNow = this.now.getTime();\n    this.gatherDelay = 10; // Delay between loading this file and gathering stats\n    this.initialDelay = 24 * 60 * 60;\n\n    this.logger = new StatisticsLogger(\"statistics\");\n    this.storage = new StatisticsStorage(\"vaadin.statistics.basket\");\n    this.gatherer = new StatisticsGatherer(this.logger);\n    this.sender = new StatisticsSender(\"https://tools.vaadin.com/usage-stats/submit\", this.logger);\n  }\n\n  createClass(UsageStatistics, [{\n    key: 'maybeGatherAndSend',\n    value: function maybeGatherAndSend() {\n      var _this = this;\n\n      if (localStorage.getItem(UsageStatistics.optOutKey)) {\n        return;\n      }\n      this.gatherer.gather(this.storage);\n      setTimeout(function () {\n        _this.maybeSend();\n      }, this.gatherDelay * 1000);\n    }\n  }, {\n    key: 'lottery',\n    value: function lottery() {\n      return Math.random() <= 0.05;\n    }\n  }, {\n    key: 'currentMonth',\n    value: function currentMonth() {\n      return this.now.getYear() * 12 + this.now.getMonth();\n    }\n  }, {\n    key: 'maybeSend',\n    value: function maybeSend() {\n      var firstUse = Number(localStorage.getItem(UsageStatistics.firstUseKey));\n      var monthProcessed = Number(localStorage.getItem(UsageStatistics.monthProcessedKey));\n\n      if (!firstUse) {\n        // Use a grace period to avoid interfering with tests, incognito mode etc\n        firstUse = this.timeNow;\n        localStorage.setItem(UsageStatistics.firstUseKey, firstUse);\n      }\n\n      if (this.timeNow < firstUse + this.initialDelay * 1000) {\n        this.logger.debug(\"No statistics will be sent until the initial delay of \" + this.initialDelay + \"s has passed\");\n        return;\n      }\n      if (this.currentMonth() <= monthProcessed) {\n        this.logger.debug(\"This month has already been processed\");\n        return;\n      }\n      localStorage.setItem(UsageStatistics.monthProcessedKey, this.currentMonth());\n      // Use random sampling\n      if (this.lottery()) {\n        this.logger.debug(\"Congratulations, we have a winner!\");\n      } else {\n        this.logger.debug(\"Sorry, no stats from you this time\");\n        return;\n      }\n\n      this.send();\n    }\n  }, {\n    key: 'send',\n    value: function send() {\n      // Ensure we have the latest data\n      this.gatherer.gather(this.storage);\n\n      // Read, send and clean up\n      var data = this.storage.read();\n      data[\"firstUse\"] = Number(localStorage.getItem(UsageStatistics.firstUseKey));\n      data[\"usageStatisticsVersion\"] = UsageStatistics.version;\n      var info = 'This request contains usage statistics gathered from the application running in development mode. \\n\\nStatistics gathering is automatically disabled and excluded from production builds.\\n\\nFor details and to opt-out, see https://github.com/vaadin/vaadin-usage-statistics.\\n\\n\\n\\n';\n      var self = this;\n      this.sender.send(info + JSON.stringify(data), function () {\n        // Revert the 'month processed' flag\n        localStorage.setItem(UsageStatistics.monthProcessedKey, self.currentMonth() - 1);\n      });\n    }\n  }], [{\n    key: 'version',\n    get: function get$1() {\n      return '2.0.1';\n    }\n  }, {\n    key: 'firstUseKey',\n    get: function get$1() {\n      return 'vaadin.statistics.firstuse';\n    }\n  }, {\n    key: 'monthProcessedKey',\n    get: function get$1() {\n      return 'vaadin.statistics.monthProcessed';\n    }\n  }, {\n    key: 'optOutKey',\n    get: function get$1() {\n      return 'vaadin.statistics.optout';\n    }\n  }]);\n  return UsageStatistics;\n}();\n\ntry {\n  window.Vaadin = window.Vaadin || {};\n  window.Vaadin.usageStatsChecker = window.Vaadin.usageStatsChecker || new UsageStatistics();\n  window.Vaadin.usageStatsChecker.maybeGatherAndSend();\n} catch (e) {\n  // Intentionally ignored as this is not a problem in the app being developed\n}\n\n}());\n\n  vaadin-dev-mode:end **/\n}\n\nexport const usageStatistics = function() {\n  if (typeof runIfDevelopmentMode === 'function') {\n    return runIfDevelopmentMode(maybeGatherAndSendStats);\n  }\n};\n"],"sourceRoot":""}