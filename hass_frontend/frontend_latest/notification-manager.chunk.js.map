{"version":3,"sources":["webpack:///./src/components/ha-toast.ts","webpack:///./src/managers/notification-manager.ts"],"names":["PaperToast","customElements","get","HaToast","connectedCallback","_resizeListener","ev","classList","toggle","matches","_mediaq","window","matchMedia","addListener","disconnectedCallback","removeListener","define","NotificationManager","property","query","message","action","duration","dismissable","toast","_toast","updateComplete","setAttribute","computeRTL","hass","_action","undefined","_noCancelOnOutsideClick","hide","show","text","html","buttonClicked","css","LitElement"],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;CAEA;;AACA,MAAMA,UAAU,GAAGC,cAAc,CAACC,GAAf,CAAmB,aAAnB,CAAnB;AAEO,MAAMC,OAAN,SAAsBH,UAAtB,CAAiC;AAC/BI,mBAAP,GAA2B;AACzB,UAAMA,iBAAN;;AAEA,QAAI,CAAC,KAAKC,eAAV,EAA2B;AACzB,WAAKA,eAAL,GAAwBC,EAAD,IACrB,KAAKC,SAAL,CAAeC,MAAf,CAAsB,YAAtB,EAAoCF,EAAE,CAACG,OAAvC,CADF;;AAEA,WAAKC,OAAL,GAAeC,MAAM,CAACC,UAAP,CAAkB,mBAAlB,CAAf;AACD;;AACD,SAAKF,OAAL,CAAaG,WAAb,CAAyB,KAAKR,eAA9B;;AACA,SAAKA,eAAL,CAAqB,KAAKK,OAA1B;AACD;;AAEMI,sBAAP,GAA8B;AAC5B,UAAMA,oBAAN;;AACA,SAAKJ,OAAL,CAAaK,cAAb,CAA4B,KAAKV,eAAjC;AACD;;AAhBqC;AAyBxCJ,cAAc,CAACe,MAAf,CAAsB,UAAtB,EAAkCb,OAAlC,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC9BA;AASA;AAEA;CAEA;AACA;;IAeMc,mB;AAAN,QAAMA,mBAAN,qBAA6C;AAAA;AAAA;;AAAA;AAAA;;AAAA;;;OAAvCA,mB;;;mBACHC,4DAAQ,E;;;;;mBAERA,4DAAQ,E;;;;;mBACRA,4DAAQ,E;;;;eAA8C,K;;;;;mBAEtDC,yDAAK,CAAC,UAAD,C;;;;;;aAEN,0BAAwB;AACtBC,eADsB;AAEtBC,cAFsB;AAGtBC,gBAHsB;AAItBC;AAJsB,OAAxB,EAKoB;AAClB,YAAIC,KAAK,GAAG,KAAKC,MAAjB,CADkB,CAElB;;AACA,YAAI,CAACD,KAAL,EAAY;AACV,gBAAM,KAAKE,cAAX;AACAF,eAAK,GAAG,KAAKC,MAAb;AACD;;AACDD,aAAK,CAACG,YAAN,CAAmB,KAAnB,EAA0BC,2EAAU,CAAC,KAAKC,IAAN,CAAV,GAAwB,KAAxB,GAAgC,KAA1D;AACA,aAAKC,OAAL,GAAeT,MAAM,IAAIU,SAAzB;AACA,aAAKC,uBAAL,GACET,WAAW,KAAKQ,SAAhB,GAA4B,KAA5B,GAAoC,CAACR,WADvC;AAEAC,aAAK,CAACS,IAAN;AACAT,aAAK,CAACU,IAAN,CAAW;AACTC,cAAI,EAAEf,OADG;AAETE,kBAAQ,EAAEA,QAAQ,KAAKS,SAAb,GAAyB,IAAzB,GAAgCT;AAFjC,SAAX;AAID;;;;aAED,kBAA0C;AACxC,eAAOc,gDAAK;0CAC0B,KAAKJ,uBAAwB;UAC7D,KAAKF,OAAL,GACEM,gDAAK;;yBAEQ,KAAKN,OAAL,CAAaK,IAAK;yBAClB,KAAKE,aAAc;;aAJlC,GAOE,EAAG;;KATX;AAYD;;;;aAED,yBAAwB;AACtB,aAAKZ,MAAL,CAAYQ,IAAZ;;AACA,YAAI,KAAKH,OAAT,EAAkB;AAChB,eAAKA,OAAL,CAAaT,MAAb;AACD;AACF;;;;;aAED,kBAA+B;AAC7B,eAAOiB,+CAAI;;;;;KAAX;AAMD;;;GA5D+BC,sD;;AA+DlCtC,cAAc,CAACe,MAAf,CAAsB,sBAAtB,EAA8CC,mBAA9C,E","file":"notification-manager.chunk.js","sourcesContent":["import \"@polymer/paper-toast/paper-toast\";\n\n// tslint:disable-next-line\nconst PaperToast = customElements.get(\"paper-toast\");\n\nexport class HaToast extends PaperToast {\n  public connectedCallback() {\n    super.connectedCallback();\n\n    if (!this._resizeListener) {\n      this._resizeListener = (ev) =>\n        this.classList.toggle(\"fit-bottom\", ev.matches);\n      this._mediaq = window.matchMedia(\"(max-width: 599px\");\n    }\n    this._mediaq.addListener(this._resizeListener);\n    this._resizeListener(this._mediaq);\n  }\n\n  public disconnectedCallback() {\n    super.disconnectedCallback();\n    this._mediaq.removeListener(this._resizeListener);\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-toast\": HaToast;\n  }\n}\n\ncustomElements.define(\"ha-toast\", HaToast);\n","import {\n  LitElement,\n  query,\n  property,\n  TemplateResult,\n  html,\n  css,\n  CSSResult,\n} from \"lit-element\";\nimport { computeRTL } from \"../common/util/compute_rtl\";\nimport { HomeAssistant } from \"../types\";\nimport \"@material/mwc-button\";\nimport \"../components/ha-toast\";\n// Typing\n// tslint:disable-next-line: no-duplicate-imports\nimport { HaToast } from \"../components/ha-toast\";\n\nexport interface ShowToastParams {\n  message: string;\n  action?: ToastActionParams;\n  duration?: number;\n  dismissable?: boolean;\n}\n\nexport interface ToastActionParams {\n  action: () => void;\n  text: string;\n}\n\nclass NotificationManager extends LitElement {\n  @property() public hass!: HomeAssistant;\n\n  @property() private _action?: ToastActionParams;\n  @property() private _noCancelOnOutsideClick: boolean = false;\n\n  @query(\"ha-toast\") private _toast!: HaToast;\n\n  public async showDialog({\n    message,\n    action,\n    duration,\n    dismissable,\n  }: ShowToastParams) {\n    let toast = this._toast;\n    // Can happen on initial load\n    if (!toast) {\n      await this.updateComplete;\n      toast = this._toast;\n    }\n    toast.setAttribute(\"dir\", computeRTL(this.hass) ? \"rtl\" : \"ltr\");\n    this._action = action || undefined;\n    this._noCancelOnOutsideClick =\n      dismissable === undefined ? false : !dismissable;\n    toast.hide();\n    toast.show({\n      text: message,\n      duration: duration === undefined ? 3000 : duration,\n    });\n  }\n\n  protected render(): TemplateResult | void {\n    return html`\n      <ha-toast .noCancelOnOutsideClick=${this._noCancelOnOutsideClick}>\n        ${this._action\n          ? html`\n              <mwc-button\n                .label=${this._action.text}\n                @click=${this.buttonClicked}\n              ></mwc-button>\n            `\n          : \"\"}\n      </ha-toast>\n    `;\n  }\n\n  private buttonClicked() {\n    this._toast.hide();\n    if (this._action) {\n      this._action.action();\n    }\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      mwc-button {\n        color: var(--primary-color);\n        font-weight: bold;\n      }\n    `;\n  }\n}\n\ncustomElements.define(\"notification-manager\", NotificationManager);\n\ndeclare global {\n  // for fire event\n  interface HASSDomEvents {\n    \"hass-notification\": ShowToastParams;\n  }\n}\n"],"sourceRoot":""}