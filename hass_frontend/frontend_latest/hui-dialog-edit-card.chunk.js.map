{"version":3,"sources":["webpack:///./node_modules/@polymer/paper-dialog-scrollable/paper-dialog-scrollable.js","webpack:///./src/components/dialog/ha-iron-focusables-helper.js","webpack:///./src/components/dialog/ha-paper-dialog.ts","webpack:///./src/panels/lovelace/common/get-card-element-tag.ts","webpack:///./src/panels/lovelace/editor/card-editor/hui-card-picker.ts","webpack:///./src/panels/lovelace/editor/card-editor/hui-card-preview.ts","webpack:///./src/panels/lovelace/editor/card-editor/hui-dialog-edit-card.ts","webpack:///./src/panels/lovelace/editor/card-editor/hui-dialog-pick-card.ts","webpack:///./src/panels/lovelace/editor/card-editor/hui-edit-card.ts"],"names":["Polymer","_template","html","is","properties","dialogElement","type","Object","scrollTarget","$","scrollable","ready","_ensureTarget","classList","add","attached","requestAnimationFrame","updateScrollState","bind","toggleClass","scrollTop","offsetHeight","scrollHeight","parentElement","behaviors","indexOf","PaperDialogBehaviorImpl","sizingTarget","remove","HaIronFocusablesHelper","getTabbableNodes","node","result","needsSortByTabIndex","_collectTabbableNodes","IronFocusablesHelper","_sortByTabIndex","nodeType","Node","ELEMENT_NODE","_isVisible","element","tabIndex","_normalizedTabIndex","needsSort","push","children","localName","dom","getDistributedNodes","shadowRoot","root","i","length","paperDialogClass","customElements","get","haTabFixBehaviorImpl","_focusableNodes","HaPaperDialog","mixinBehaviors","define","CUSTOM_TYPE_PREFIX","getCardElementTag","startsWith","substr","cards","name","HuiCardPicker","customElement","hass","localize","map","card","_cardPicked","css","ev","currentTarget","tag","elClass","config","getStubConfig","cardConfig","cardPicked","LitElement","HuiCardPreview","HTMLElement","_hass","language","style","direction","computeRTL","_element","error","configValue","createErrorCardConfig","message","undefined","_createCard","_cleanup","toUpperCase","tagName","setConfig","deepClone","err","createCardElement","appendChild","removeChild","HuiDialogEditCard","constructor","_cancel","_save","property","params","_params","view","path","_newCard","_cardConfig","lovelace","views","cardConf","saveConfig","addCard","replaceCard","HuiDialogPickCard","_openedChanged","_skipPick","detail","value","closeDialog","haStyleDialog","HuiEditCard","_saving","querySelector","__cardYaml","yaml","safeDump","yml","changedProperties","has","_cardYaml","_configState","_uiEditor","_errorMsg","_configElement","_loading","_loadConfigElement","content","preview","_handleYamlChanged","classMap","hidden","_toggleEditor","updateComplete","_resizeDialog","afterNextRender","yamlEditor","codemirror","refresh","focus","fireEvent","_dialog","_isConfigValid","alert","_isConfigChanged","saveCard","safeLoad","_updatePreview","_setPreviewError","_previewEl","_loadedDialog","success","newCard","JSON","stringify","conf","configElement","getConfigElement","addEventListener","_handleUIConfigChanged"],"mappings":"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","file":"hui-dialog-edit-card.chunk.js","sourcesContent":["/**\n@license\nCopyright (c) 2015 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at\nhttp://polymer.github.io/LICENSE.txt The complete set of authors may be found at\nhttp://polymer.github.io/AUTHORS.txt The complete set of contributors may be\nfound at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as\npart of the polymer project is also subject to an additional IP rights grant\nfound at http://polymer.github.io/PATENTS.txt\n*/\nimport '@polymer/polymer/polymer-legacy.js';\nimport '@polymer/iron-flex-layout/iron-flex-layout.js';\nimport '@polymer/paper-styles/default-theme.js';\n\nimport {PaperDialogBehaviorImpl} from '@polymer/paper-dialog-behavior/paper-dialog-behavior.js';\nimport {Polymer} from '@polymer/polymer/lib/legacy/polymer-fn.js';\nimport {html} from '@polymer/polymer/lib/utils/html-tag.js';\n\n/**\nMaterial design:\n[Dialogs](https://www.google.com/design/spec/components/dialogs.html)\n\n`paper-dialog-scrollable` implements a scrolling area used in a Material Design\ndialog. It shows a divider at the top and/or bottom indicating more content,\ndepending on scroll position. Use this together with elements implementing\n`Polymer.PaperDialogBehavior`.\n\n    <paper-dialog-impl>\n      <h2>Header</h2>\n      <paper-dialog-scrollable>\n        Lorem ipsum...\n      </paper-dialog-scrollable>\n      <div class=\"buttons\">\n        <paper-button>OK</paper-button>\n      </div>\n    </paper-dialog-impl>\n\nIt shows a top divider after scrolling if it is not the first child in its\nparent container, indicating there is more content above. It shows a bottom\ndivider if it is scrollable and it is not the last child in its parent\ncontainer, indicating there is more content below. The bottom divider is hidden\nif it is scrolled to the bottom.\n\nIf `paper-dialog-scrollable` is not a direct child of the element implementing\n`Polymer.PaperDialogBehavior`, remember to set the `dialogElement`:\n\n    <paper-dialog-impl id=\"myDialog\">\n      <h2>Header</h2>\n      <div class=\"my-content-wrapper\">\n        <h4>Sub-header</h4>\n        <paper-dialog-scrollable>\n          Lorem ipsum...\n        </paper-dialog-scrollable>\n      </div>\n      <div class=\"buttons\">\n        <paper-button>OK</paper-button>\n      </div>\n    </paper-dialog-impl>\n\n    <script>\n      var scrollable =\nPolymer.dom(myDialog).querySelector('paper-dialog-scrollable');\n      scrollable.dialogElement = myDialog;\n    </script>\n\n### Styling\nThe following custom properties and mixins are available for styling:\n\nCustom property | Description | Default\n----------------|-------------|----------\n`--paper-dialog-scrollable` | Mixin for the scrollable content | {}\n\n@group Paper Elements\n@element paper-dialog-scrollable\n@demo demo/index.html\n@hero hero.svg\n*/\nPolymer({\n  _template: html`\n    <style>\n\n      :host {\n        display: block;\n        @apply --layout-relative;\n      }\n\n      :host(.is-scrolled:not(:first-child))::before {\n        content: '';\n        position: absolute;\n        top: 0;\n        left: 0;\n        right: 0;\n        height: 1px;\n        background: var(--divider-color);\n      }\n\n      :host(.can-scroll:not(.scrolled-to-bottom):not(:last-child))::after {\n        content: '';\n        position: absolute;\n        bottom: 0;\n        left: 0;\n        right: 0;\n        height: 1px;\n        background: var(--divider-color);\n      }\n\n      .scrollable {\n        padding: 0 24px;\n\n        @apply --layout-scroll;\n        @apply --paper-dialog-scrollable;\n      }\n\n      .fit {\n        @apply --layout-fit;\n      }\n    </style>\n\n    <div id=\"scrollable\" class=\"scrollable\" on-scroll=\"updateScrollState\">\n      <slot></slot>\n    </div>\n`,\n\n  is: 'paper-dialog-scrollable',\n\n  properties: {\n\n    /**\n     * The dialog element that implements `Polymer.PaperDialogBehavior`\n     * containing this element.\n     * @type {?Node}\n     */\n    dialogElement: {type: Object}\n\n  },\n\n  /**\n   * Returns the scrolling element.\n   */\n  get scrollTarget() {\n    return this.$.scrollable;\n  },\n\n  ready: function() {\n    this._ensureTarget();\n    this.classList.add('no-padding');\n  },\n\n  attached: function() {\n    this._ensureTarget();\n    requestAnimationFrame(this.updateScrollState.bind(this));\n  },\n\n  updateScrollState: function() {\n    this.toggleClass('is-scrolled', this.scrollTarget.scrollTop > 0);\n    this.toggleClass(\n        'can-scroll',\n        this.scrollTarget.offsetHeight < this.scrollTarget.scrollHeight);\n    this.toggleClass(\n        'scrolled-to-bottom',\n        this.scrollTarget.scrollTop + this.scrollTarget.offsetHeight >=\n            this.scrollTarget.scrollHeight);\n  },\n\n  _ensureTarget: function() {\n    // Read parentElement instead of parentNode in order to skip shadowRoots.\n    this.dialogElement = this.dialogElement || this.parentElement;\n    // Check if dialog implements paper-dialog-behavior. If not, fit\n    // scrollTarget to host.\n    if (this.dialogElement && this.dialogElement.behaviors &&\n        this.dialogElement.behaviors.indexOf(PaperDialogBehaviorImpl) >= 0) {\n      this.dialogElement.sizingTarget = this.scrollTarget;\n      this.scrollTarget.classList.remove('fit');\n    } else if (this.dialogElement) {\n      this.scrollTarget.classList.add('fit');\n    }\n  }\n});\n","/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at\nhttp://polymer.github.io/LICENSE.txt The complete set of authors may be found at\nhttp://polymer.github.io/AUTHORS.txt The complete set of contributors may be\nfound at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as\npart of the polymer project is also subject to an additional IP rights grant\nfound at http://polymer.github.io/PATENTS.txt\n*/\n/*\n  Fixes issue with not using shadow dom properly in iron-overlay-behavior/icon-focusables-helper.js\n*/\nimport { dom } from \"@polymer/polymer/lib/legacy/polymer.dom.js\";\n\nimport { IronFocusablesHelper } from \"@polymer/iron-overlay-behavior/iron-focusables-helper.js\";\n\nexport const HaIronFocusablesHelper = {\n  /**\n   * Returns a sorted array of tabbable nodes, including the root node.\n   * It searches the tabbable nodes in the light and shadow dom of the chidren,\n   * sorting the result by tabindex.\n   * @param {!Node} node\n   * @return {!Array<!HTMLElement>}\n   */\n  getTabbableNodes: function(node) {\n    var result = [];\n    // If there is at least one element with tabindex > 0, we need to sort\n    // the final array by tabindex.\n    var needsSortByTabIndex = this._collectTabbableNodes(node, result);\n    if (needsSortByTabIndex) {\n      return IronFocusablesHelper._sortByTabIndex(result);\n    }\n    return result;\n  },\n\n  /**\n   * Searches for nodes that are tabbable and adds them to the `result` array.\n   * Returns if the `result` array needs to be sorted by tabindex.\n   * @param {!Node} node The starting point for the search; added to `result`\n   * if tabbable.\n   * @param {!Array<!HTMLElement>} result\n   * @return {boolean}\n   * @private\n   */\n  _collectTabbableNodes: function(node, result) {\n    // If not an element or not visible, no need to explore children.\n    if (\n      node.nodeType !== Node.ELEMENT_NODE ||\n      !IronFocusablesHelper._isVisible(node)\n    ) {\n      return false;\n    }\n    var element = /** @type {!HTMLElement} */ (node);\n    var tabIndex = IronFocusablesHelper._normalizedTabIndex(element);\n    var needsSort = tabIndex > 0;\n    if (tabIndex >= 0) {\n      result.push(element);\n    }\n\n    // In ShadowDOM v1, tab order is affected by the order of distrubution.\n    // E.g. getTabbableNodes(#root) in ShadowDOM v1 should return [#A, #B];\n    // in ShadowDOM v0 tab order is not affected by the distrubution order,\n    // in fact getTabbableNodes(#root) returns [#B, #A].\n    //  <div id=\"root\">\n    //   <!-- shadow -->\n    //     <slot name=\"a\">\n    //     <slot name=\"b\">\n    //   <!-- /shadow -->\n    //   <input id=\"A\" slot=\"a\">\n    //   <input id=\"B\" slot=\"b\" tabindex=\"1\">\n    //  </div>\n    // TODO(valdrin) support ShadowDOM v1 when upgrading to Polymer v2.0.\n    var children;\n    if (element.localName === \"content\" || element.localName === \"slot\") {\n      children = dom(element).getDistributedNodes();\n    } else {\n      // /////////////////////////\n      // Use shadow root if possible, will check for distributed nodes.\n      // THIS IS THE CHANGED LINE\n      children = dom(element.shadowRoot || element.root || element).children;\n      // /////////////////////////\n    }\n    for (var i = 0; i < children.length; i++) {\n      // Ensure method is always invoked to collect tabbable children.\n      needsSort = this._collectTabbableNodes(children[i], result) || needsSort;\n    }\n    return needsSort;\n  },\n};\n","import \"@polymer/paper-dialog/paper-dialog\";\nimport { mixinBehaviors } from \"@polymer/polymer/lib/legacy/class\";\nimport { HaIronFocusablesHelper } from \"./ha-iron-focusables-helper.js\";\n// tslint:disable-next-line\nimport { PaperDialogElement } from \"@polymer/paper-dialog/paper-dialog\";\n\nconst paperDialogClass = customElements.get(\"paper-dialog\");\n\n// behavior that will override existing iron-overlay-behavior and call the fixed implementation\nconst haTabFixBehaviorImpl = {\n  get _focusableNodes() {\n    return HaIronFocusablesHelper.getTabbableNodes(this);\n  },\n};\n\n// paper-dialog that uses the haTabFixBehaviorImpl behvaior\n// export class HaPaperDialog extends paperDialogClass {}\n// @ts-ignore\nexport class HaPaperDialog\n  extends mixinBehaviors([haTabFixBehaviorImpl], paperDialogClass)\n  implements PaperDialogElement {}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-paper-dialog\": HaPaperDialog;\n  }\n}\ncustomElements.define(\"ha-paper-dialog\", HaPaperDialog);\n","const CUSTOM_TYPE_PREFIX = \"custom:\";\n\nexport function getCardElementTag(type: string): string {\n  return type.startsWith(CUSTOM_TYPE_PREFIX)\n    ? type.substr(CUSTOM_TYPE_PREFIX.length)\n    : `hui-${type}-card`;\n}\n","import {\n  html,\n  css,\n  LitElement,\n  TemplateResult,\n  CSSResult,\n  customElement,\n} from \"lit-element\";\nimport \"@material/mwc-button\";\n\nimport { HomeAssistant } from \"../../../../types\";\nimport { LovelaceCardConfig } from \"../../../../data/lovelace\";\nimport { getCardElementTag } from \"../../common/get-card-element-tag\";\nimport { CardPickTarget } from \"../types\";\n\nconst cards = [\n  { name: \"Alarm panel\", type: \"alarm-panel\" },\n  { name: \"Conditional\", type: \"conditional\" },\n  { name: \"Entities\", type: \"entities\" },\n  { name: \"Entity Button\", type: \"entity-button\" },\n  { name: \"Entity Filter\", type: \"entity-filter\" },\n  { name: \"Gauge\", type: \"gauge\" },\n  { name: \"Glance\", type: \"glance\" },\n  { name: \"History Graph\", type: \"history-graph\" },\n  { name: \"Horizontal Stack\", type: \"horizontal-stack\" },\n  { name: \"iFrame\", type: \"iframe\" },\n  { name: \"Light\", type: \"light\" },\n  { name: \"Map\", type: \"map\" },\n  { name: \"Markdown\", type: \"markdown\" },\n  { name: \"Media Control\", type: \"media-control\" },\n  { name: \"Picture\", type: \"picture\" },\n  { name: \"Picture Elements\", type: \"picture-elements\" },\n  { name: \"Picture Entity\", type: \"picture-entity\" },\n  { name: \"Picture Glance\", type: \"picture-glance\" },\n  { name: \"Plant Status\", type: \"plant-status\" },\n  { name: \"Sensor\", type: \"sensor\" },\n  { name: \"Shopping List\", type: \"shopping-list\" },\n  { name: \"Thermostat\", type: \"thermostat\" },\n  { name: \"Vertical Stack\", type: \"vertical-stack\" },\n  { name: \"Weather Forecast\", type: \"weather-forecast\" },\n];\n\n@customElement(\"hui-card-picker\")\nexport class HuiCardPicker extends LitElement {\n  public hass?: HomeAssistant;\n\n  public cardPicked?: (cardConf: LovelaceCardConfig) => void;\n\n  protected render(): TemplateResult | void {\n    return html`\n      <h3>\n        ${this.hass!.localize(\"ui.panel.lovelace.editor.edit_card.pick_card\")}\n      </h3>\n      <div class=\"cards-container\">\n        ${cards.map((card) => {\n          return html`\n            <mwc-button @click=\"${this._cardPicked}\" .type=\"${card.type}\">\n              ${card.name}\n            </mwc-button>\n          `;\n        })}\n      </div>\n    `;\n  }\n\n  static get styles(): CSSResult[] {\n    return [\n      css`\n        .cards-container {\n          display: flex;\n          flex-wrap: wrap;\n          margin-bottom: 10px;\n        }\n        .cards-container mwc-button {\n          flex: 1 0 25%;\n          margin: 4px;\n        }\n\n        @media all and (max-width: 450px), all and (max-height: 500px) {\n          .cards-container mwc-button {\n            flex: 1 0 33%;\n          }\n        }\n      `,\n    ];\n  }\n\n  private _cardPicked(ev: Event): void {\n    const type = (ev.currentTarget! as CardPickTarget).type;\n    const tag = getCardElementTag(type);\n\n    const elClass = customElements.get(tag);\n    let config: LovelaceCardConfig = { type };\n\n    if (elClass && elClass.getStubConfig) {\n      const cardConfig = elClass.getStubConfig(this.hass);\n      config = { ...config, ...cardConfig };\n    }\n\n    this.cardPicked!(config);\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-card-picker\": HuiCardPicker;\n  }\n}\n","import \"@polymer/paper-input/paper-textarea\";\n\nimport deepClone from \"deep-clone-simple\";\n\nimport { createCardElement } from \"../../common/create-card-element\";\nimport { HomeAssistant } from \"../../../../types\";\nimport { LovelaceCardConfig } from \"../../../../data/lovelace\";\nimport { LovelaceCard } from \"../../types\";\nimport { ConfigError } from \"../types\";\nimport { getCardElementTag } from \"../../common/get-card-element-tag\";\nimport { createErrorCardConfig } from \"../../cards/hui-error-card\";\nimport { computeRTL } from \"../../../../common/util/compute_rtl\";\n\nexport class HuiCardPreview extends HTMLElement {\n  private _hass?: HomeAssistant;\n  private _element?: LovelaceCard;\n\n  set hass(hass: HomeAssistant) {\n    if (!this._hass || this._hass.language !== hass.language) {\n      this.style.direction = computeRTL(hass) ? \"rtl\" : \"ltr\";\n    }\n\n    this._hass = hass;\n    if (this._element) {\n      this._element.hass = hass;\n    }\n  }\n\n  set error(error: ConfigError) {\n    const configValue = createErrorCardConfig(\n      `${error.type}: ${error.message}`,\n      undefined\n    );\n\n    this._createCard(configValue);\n  }\n\n  set config(configValue: LovelaceCardConfig) {\n    if (!configValue) {\n      this._cleanup();\n      return;\n    }\n\n    if (!configValue.type) {\n      this._createCard(\n        createErrorCardConfig(\"No card type found\", configValue)\n      );\n      return;\n    }\n\n    if (!this._element) {\n      this._createCard(configValue);\n      return;\n    }\n\n    const tag = getCardElementTag(configValue.type);\n\n    if (tag.toUpperCase() === this._element.tagName) {\n      try {\n        this._element.setConfig(deepClone(configValue));\n      } catch (err) {\n        this._createCard(createErrorCardConfig(err.message, configValue));\n      }\n    } else {\n      this._createCard(configValue);\n    }\n  }\n\n  private _createCard(configValue: LovelaceCardConfig): void {\n    this._cleanup();\n    this._element = createCardElement(configValue);\n\n    if (this._hass) {\n      this._element!.hass = this._hass;\n    }\n\n    this.appendChild(this._element!);\n  }\n\n  private _cleanup() {\n    if (!this._element) {\n      return;\n    }\n    this.removeChild(this._element);\n    this._element = undefined;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-card-preview\": HuiCardPreview;\n  }\n}\n\ncustomElements.define(\"hui-card-preview\", HuiCardPreview);\n","import {\n  html,\n  LitElement,\n  TemplateResult,\n  customElement,\n  property,\n} from \"lit-element\";\n\nimport { HomeAssistant } from \"../../../../types\";\nimport { HASSDomEvent } from \"../../../../common/dom/fire_event\";\nimport { LovelaceCardConfig } from \"../../../../data/lovelace\";\nimport \"./hui-edit-card\";\nimport \"./hui-dialog-pick-card\";\nimport { EditCardDialogParams } from \"./show-edit-card-dialog\";\nimport { addCard, replaceCard } from \"../config-util\";\n\ndeclare global {\n  // for fire event\n  interface HASSDomEvents {\n    \"reload-lovelace\": undefined;\n  }\n  // for add event listener\n  interface HTMLElementEventMap {\n    \"reload-lovelace\": HASSDomEvent<undefined>;\n  }\n}\n\n@customElement(\"hui-dialog-edit-card\")\nexport class HuiDialogEditCard extends LitElement {\n  @property() protected hass?: HomeAssistant;\n\n  @property() private _params?: EditCardDialogParams;\n\n  @property() private _cardConfig?: LovelaceCardConfig;\n\n  @property() private _newCard?: boolean;\n\n  constructor() {\n    super();\n    this._cardPicked = this._cardPicked.bind(this);\n    this._cancel = this._cancel.bind(this);\n    this._save = this._save.bind(this);\n  }\n\n  public async showDialog(params: EditCardDialogParams): Promise<void> {\n    this._params = params;\n    const [view, card] = params.path;\n    this._newCard = card !== undefined ? false : true;\n    this._cardConfig =\n      card !== undefined\n        ? params.lovelace.config.views[view].cards![card]\n        : undefined;\n  }\n\n  protected render(): TemplateResult | void {\n    if (!this._params) {\n      return html``;\n    }\n    if (!this._cardConfig) {\n      // Card picker\n      return html`\n        <hui-dialog-pick-card\n          .hass=\"${this.hass}\"\n          .cardPicked=\"${this._cardPicked}\"\n          .closeDialog=\"${this._cancel}\"\n        ></hui-dialog-pick-card>\n      `;\n    }\n    return html`\n      <hui-edit-card\n        .hass=\"${this.hass}\"\n        .lovelace=\"${this._params.lovelace}\"\n        .cardConfig=\"${this._cardConfig}\"\n        .closeDialog=\"${this._cancel}\"\n        .saveCard=\"${this._save}\"\n        .newCard=\"${this._newCard}\"\n      >\n      </hui-edit-card>\n    `;\n  }\n\n  private _cardPicked(cardConf: LovelaceCardConfig): void {\n    this._cardConfig = cardConf;\n  }\n\n  private _cancel(): void {\n    this._params = undefined;\n    this._cardConfig = undefined;\n  }\n\n  private async _save(cardConf: LovelaceCardConfig): Promise<void> {\n    const lovelace = this._params!.lovelace;\n    await lovelace.saveConfig(\n      this._params!.path.length === 1\n        ? addCard(lovelace.config, this._params!.path as [number], cardConf)\n        : replaceCard(\n            lovelace.config,\n            this._params!.path as [number, number],\n            cardConf\n          )\n    );\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-dialog-edit-card\": HuiDialogEditCard;\n  }\n}\n","import {\n  html,\n  css,\n  LitElement,\n  TemplateResult,\n  CSSResult,\n  customElement,\n} from \"lit-element\";\nimport \"@polymer/paper-dialog-scrollable/paper-dialog-scrollable\";\n\nimport \"../../../../components/dialog/ha-paper-dialog\";\n\nimport { haStyleDialog } from \"../../../../resources/styles\";\n\nimport \"./hui-card-picker\";\nimport { HomeAssistant } from \"../../../../types\";\nimport { LovelaceCardConfig } from \"../../../../data/lovelace\";\n\n@customElement(\"hui-dialog-pick-card\")\nexport class HuiDialogPickCard extends LitElement {\n  public hass?: HomeAssistant;\n  public cardPicked?: (cardConf: LovelaceCardConfig) => void;\n  public closeDialog?: () => void;\n\n  protected render(): TemplateResult | void {\n    return html`\n      <ha-paper-dialog\n        with-backdrop\n        opened\n        @opened-changed=\"${this._openedChanged}\"\n      >\n        <h2>\n          ${this.hass!.localize(\"ui.panel.lovelace.editor.edit_card.header\")}\n        </h2>\n        <paper-dialog-scrollable>\n          <hui-card-picker\n            .hass=\"${this.hass}\"\n            .cardPicked=\"${this.cardPicked}\"\n          ></hui-card-picker>\n        </paper-dialog-scrollable>\n        <div class=\"paper-dialog-buttons\">\n          <mwc-button @click=\"${this._skipPick}\">MANUAL CARD</mwc-button>\n        </div>\n      </ha-paper-dialog>\n    `;\n  }\n\n  private _openedChanged(ev): void {\n    if (!ev.detail.value) {\n      this.closeDialog!();\n    }\n  }\n\n  private _skipPick() {\n    this.cardPicked!({ type: \"\" });\n  }\n\n  static get styles(): CSSResult[] {\n    return [\n      haStyleDialog,\n      css`\n        @media all and (max-width: 450px), all and (max-height: 500px) {\n          /* overrule the ha-style-dialog max-height on small screens */\n          ha-paper-dialog {\n            max-height: 100%;\n            height: 100%;\n          }\n        }\n\n        @media all and (min-width: 660px) {\n          ha-paper-dialog {\n            width: 650px;\n          }\n        }\n\n        ha-paper-dialog {\n          max-width: 650px;\n        }\n      `,\n    ];\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-dialog-pick-card\": HuiDialogPickCard;\n  }\n}\n","import {\n  html,\n  css,\n  LitElement,\n  PropertyValues,\n  TemplateResult,\n  CSSResult,\n  customElement,\n  property,\n} from \"lit-element\";\nimport { classMap } from \"lit-html/directives/class-map\";\nimport yaml from \"js-yaml\";\n\nimport { haStyleDialog } from \"../../../../resources/styles\";\n\nimport \"@polymer/paper-spinner/paper-spinner\";\nimport \"@polymer/paper-dialog/paper-dialog\";\nimport \"../../../../components/dialog/ha-paper-dialog\";\n// This is not a duplicate import, one is for types, one is for element.\n// tslint:disable-next-line\nimport { HaPaperDialog } from \"../../../../components/dialog/ha-paper-dialog\";\nimport \"@material/mwc-button\";\nimport \"@polymer/paper-dialog-scrollable/paper-dialog-scrollable\";\nimport { HomeAssistant } from \"../../../../types\";\nimport { LovelaceCardConfig } from \"../../../../data/lovelace\";\nimport { fireEvent } from \"../../../../common/dom/fire_event\";\n\nimport \"../../components/hui-yaml-editor\";\n// This is not a duplicate import, one is for types, one is for element.\n// tslint:disable-next-line\nimport { HuiYamlEditor } from \"../../components/hui-yaml-editor\";\nimport \"./hui-card-preview\";\n// This is not a duplicate import, one is for types, one is for element.\n// tslint:disable-next-line\nimport { HuiCardPreview } from \"./hui-card-preview\";\nimport { LovelaceCardEditor, Lovelace } from \"../../types\";\nimport { ConfigError } from \"../types\";\nimport { EntityConfig } from \"../../entity-rows/types\";\nimport { getCardElementTag } from \"../../common/get-card-element-tag\";\nimport { afterNextRender } from \"../../../../common/util/render-status\";\n\ndeclare global {\n  interface HASSDomEvents {\n    \"entities-changed\": {\n      entities: EntityConfig[];\n    };\n    \"config-changed\": {\n      config: LovelaceCardConfig;\n    };\n  }\n}\n\n@customElement(\"hui-edit-card\")\nexport class HuiEditCard extends LitElement {\n  @property() public hass?: HomeAssistant;\n\n  @property() public cardConfig?: LovelaceCardConfig;\n\n  public lovelace?: Lovelace;\n\n  public closeDialog?: () => void;\n\n  public saveCard?: (cardConf: LovelaceCardConfig) => Promise<void>;\n\n  public newCard?: boolean;\n\n  @property() private _configElement?: LovelaceCardEditor | null;\n\n  @property() private _uiEditor?: boolean;\n\n  @property() private _cardConfig?: LovelaceCardConfig;\n\n  @property() private _configState?: string;\n\n  @property() private _loading?: boolean;\n\n  @property() private _saving: boolean;\n\n  @property() private _errorMsg?: TemplateResult;\n\n  private get _dialog(): HaPaperDialog {\n    return this.shadowRoot!.querySelector(\"ha-paper-dialog\")!;\n  }\n\n  private get _previewEl(): HuiCardPreview {\n    return this.shadowRoot!.querySelector(\"hui-card-preview\")!;\n  }\n\n  // tslint:disable-next-line\n  private __cardYaml: string | undefined;\n\n  private get _cardYaml(): string | undefined {\n    if (!this.__cardYaml) {\n      this.__cardYaml = yaml.safeDump(this._cardConfig);\n    }\n    return this.__cardYaml;\n  }\n\n  private set _cardYaml(yml: string | undefined) {\n    this.__cardYaml = yml;\n  }\n\n  public constructor() {\n    super();\n    this._saving = false;\n  }\n\n  protected updated(changedProperties: PropertyValues): void {\n    super.updated(changedProperties);\n\n    if (!changedProperties.has(\"cardConfig\")) {\n      return;\n    }\n\n    this._cardConfig = undefined;\n    this._cardYaml = undefined;\n    this._configState = \"OK\";\n    this._uiEditor = true;\n    this._errorMsg = undefined;\n    this._configElement = undefined;\n\n    this._loading = true;\n    this._loadConfigElement(this.cardConfig!);\n  }\n\n  protected render(): TemplateResult | void {\n    let content;\n    let preview;\n    if (this._configElement !== undefined) {\n      content = html`\n        <div class=\"element-editor\">\n          ${this._uiEditor\n            ? this._configElement\n            : html`\n                <hui-yaml-editor\n                  .hass=\"${this.hass}\"\n                  .value=\"${this._cardYaml}\"\n                  @yaml-changed=\"${this._handleYamlChanged}\"\n                  @yaml-save=\"${this._save}\"\n                ></hui-yaml-editor>\n              `}\n        </div>\n      `;\n\n      preview = html`\n        <hui-card-preview .hass=\"${this.hass}\"> </hui-card-preview>\n      `;\n    }\n\n    return html`\n      <ha-paper-dialog\n        with-backdrop\n        opened\n        modal\n        @opened-changed=\"${this._openedChanged}\"\n      >\n        <h2>\n          ${this.hass!.localize(\"ui.panel.lovelace.editor.edit_card.header\")}\n        </h2>\n        <paper-spinner\n          ?active=\"${this._loading}\"\n          alt=\"Loading\"\n          class=\"center margin-bot\"\n        ></paper-spinner>\n        <paper-dialog-scrollable\n          class=\"${classMap({ hidden: this._loading! })}\"\n        >\n          ${this._errorMsg\n            ? html`\n                <div class=\"error\">${this._errorMsg}</div>\n              `\n            : \"\"}\n          <div class=\"content\">${content}${preview}</div>\n        </paper-dialog-scrollable>\n        ${!this._loading\n          ? html`\n              <div class=\"paper-dialog-buttons\">\n                <mwc-button\n                  class=\"toggle-button\"\n                  ?disabled=\"${this._configElement === null ||\n                    this._configState !== \"OK\"}\"\n                  @click=\"${this._toggleEditor}\"\n                  >${this.hass!.localize(\n                    \"ui.panel.lovelace.editor.edit_card.toggle_editor\"\n                  )}</mwc-button\n                >\n                <mwc-button @click=\"${this.closeDialog}\"\n                  >${this.hass!.localize(\"ui.common.cancel\")}</mwc-button\n                >\n                <mwc-button\n                  ?disabled=\"${this._saving || this._configState !== \"OK\"}\"\n                  @click=\"${this._save}\"\n                >\n                  <paper-spinner\n                    ?active=\"${this._saving}\"\n                    alt=\"Saving\"\n                  ></paper-spinner>\n                  ${this.hass!.localize(\"ui.common.save\")}\n                </mwc-button>\n              </div>\n            `\n          : \"\"}\n      </ha-paper-dialog>\n    `;\n  }\n\n  private async _loadedDialog(): Promise<void> {\n    await this.updateComplete;\n    this._loading = false;\n    this._resizeDialog();\n    if (!this._uiEditor) {\n      afterNextRender(() => {\n        this.yamlEditor.codemirror.refresh();\n        this._resizeDialog();\n        this.yamlEditor.codemirror.focus();\n      });\n    }\n  }\n\n  private async _resizeDialog(): Promise<void> {\n    await this.updateComplete;\n    fireEvent(this._dialog as HTMLElement, \"iron-resize\");\n  }\n\n  private async _save(): Promise<void> {\n    if (!this._isConfigValid()) {\n      alert(\"Your config is not valid, please fix your config before saving.\");\n      return;\n    }\n\n    if (!this._isConfigChanged()) {\n      this.closeDialog!();\n      return;\n    }\n\n    this._saving = true;\n\n    try {\n      await this.saveCard!(this._cardConfig!);\n      this._cardYaml = undefined;\n      this.closeDialog!();\n    } catch (err) {\n      alert(`Saving failed: ${err.message}`);\n    } finally {\n      this._saving = false;\n    }\n  }\n\n  private _handleYamlChanged(ev: CustomEvent): void {\n    try {\n      this._cardConfig = yaml.safeLoad(ev.detail.value);\n      this._updatePreview(this._cardConfig!);\n      this._configState = \"OK\";\n    } catch (err) {\n      this._configState = \"YAML_ERROR\";\n      this._setPreviewError({\n        type: \"YAML Error\",\n        message: err,\n      });\n    }\n  }\n\n  private _handleUIConfigChanged(value: LovelaceCardConfig): void {\n    this._cardConfig = value;\n    this._updatePreview(value);\n  }\n\n  private async _updatePreview(config: LovelaceCardConfig): Promise<void> {\n    await this.updateComplete;\n\n    if (!this._previewEl) {\n      return;\n    }\n\n    this._previewEl.config = config;\n\n    if (this._loading) {\n      this._loadedDialog();\n    } else {\n      this._resizeDialog();\n    }\n  }\n\n  private _setPreviewError(error: ConfigError): void {\n    if (!this._previewEl) {\n      return;\n    }\n    this._previewEl.error = error;\n\n    this._resizeDialog();\n  }\n\n  private async _toggleEditor(): Promise<void> {\n    this._cardYaml = undefined;\n    if (this._uiEditor) {\n      this._uiEditor = false;\n    } else if (this._configElement) {\n      const success = await this._loadConfigElement(this._cardConfig!);\n      if (!success) {\n        this._loadedDialog();\n      } else {\n        this._uiEditor = true;\n        this._configElement.setConfig(this._cardConfig!);\n      }\n    }\n    this._resizeDialog();\n  }\n\n  private _isConfigValid(): boolean {\n    if (!this._cardConfig) {\n      return false;\n    }\n    if (this._configState === \"OK\") {\n      return true;\n    } else {\n      return false;\n    }\n  }\n\n  private _isConfigChanged(): boolean {\n    if (this.newCard) {\n      return true;\n    }\n    return JSON.stringify(this._cardConfig) !== JSON.stringify(this.cardConfig);\n  }\n\n  private async _loadConfigElement(conf: LovelaceCardConfig): Promise<boolean> {\n    if (!conf) {\n      return false;\n    }\n\n    this._errorMsg = undefined;\n    this._loading = true;\n    this._configElement = undefined;\n\n    const tag = getCardElementTag(conf.type);\n\n    const elClass = customElements.get(tag);\n    let configElement;\n\n    this._cardConfig = conf;\n\n    if (elClass && elClass.getConfigElement) {\n      configElement = await elClass.getConfigElement();\n    } else {\n      this._updatePreview(conf);\n      this._uiEditor = false;\n      this._configElement = null;\n      return false;\n    }\n\n    try {\n      configElement.setConfig(conf);\n    } catch (err) {\n      this._errorMsg = html`\n        Your config is not supported by the UI editor:<br /><b>${err.message}</b\n        ><br />Falling back to YAML editor.\n      `;\n      this._updatePreview(conf);\n      this._uiEditor = false;\n      this._configElement = null;\n      return false;\n    }\n\n    configElement.hass = this.hass;\n    configElement.addEventListener(\"config-changed\", (ev) =>\n      this._handleUIConfigChanged(ev.detail.config)\n    );\n    this._configElement = configElement;\n    await this.updateComplete;\n    this._updatePreview(conf);\n    return true;\n  }\n\n  private _openedChanged(ev): void {\n    if (!ev.detail.value) {\n      this.closeDialog!();\n    }\n  }\n\n  private get yamlEditor(): HuiYamlEditor {\n    return this.shadowRoot!.querySelector(\"hui-yaml-editor\")!;\n  }\n\n  static get styles(): CSSResult[] {\n    return [\n      haStyleDialog,\n      css`\n        :host {\n          --code-mirror-max-height: calc(100vh - 176px);\n        }\n\n        @media all and (max-width: 450px), all and (max-height: 500px) {\n          /* overrule the ha-style-dialog max-height on small screens */\n          ha-paper-dialog {\n            max-height: 100%;\n            height: 100%;\n          }\n        }\n\n        @media all and (min-width: 660px) {\n          ha-paper-dialog {\n            width: 845px;\n          }\n        }\n\n        ha-paper-dialog {\n          max-width: 845px;\n        }\n\n        .center {\n          margin-left: auto;\n          margin-right: auto;\n        }\n\n        .content {\n          display: flex;\n          flex-direction: column;\n          margin: 0 -10px;\n        }\n        .content hui-card-preview {\n          margin-top: 16px;\n          margin: 0 auto;\n          max-width: 390px;\n        }\n        .content .element-editor {\n          margin: 0 10px;\n        }\n\n        @media (min-width: 1200px) {\n          ha-paper-dialog {\n            max-width: none;\n            width: 1000px;\n          }\n\n          .content {\n            flex-direction: row;\n          }\n          .content > * {\n            flex-basis: 0;\n            flex-grow: 1;\n            flex-shrink: 1;\n            min-width: 0;\n          }\n          .content hui-card-preview {\n            padding-top: 0;\n            margin: 0 10px;\n            max-width: 490px;\n          }\n        }\n\n        .margin-bot {\n          margin-bottom: 24px;\n        }\n        mwc-button paper-spinner {\n          width: 14px;\n          height: 14px;\n          margin-right: 20px;\n        }\n        paper-spinner {\n          display: none;\n        }\n        paper-spinner[active] {\n          display: block;\n        }\n        .hidden {\n          display: none;\n        }\n        .element-editor {\n          margin-bottom: 8px;\n        }\n        .error {\n          color: #ef5350;\n          border-bottom: 1px solid #ef5350;\n        }\n        hui-card-preview {\n          padding-top: 8px;\n          margin-bottom: 4px;\n          display: block;\n        }\n        .toggle-button {\n          margin-right: auto;\n        }\n      `,\n    ];\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-edit-card\": HuiEditCard;\n  }\n}\n"],"sourceRoot":""}