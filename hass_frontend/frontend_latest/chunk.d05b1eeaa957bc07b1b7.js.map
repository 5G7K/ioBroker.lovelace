{"version":3,"sources":["webpack:///./node_modules/@polymer/iron-input/iron-input.js","webpack:///./node_modules/@polymer/paper-item/paper-item-behavior.js","webpack:///./node_modules/@polymer/paper-item/paper-item-shared-styles.js","webpack:///./src/common/entity/compute_state_name.ts","webpack:///./src/mixins/localize-mixin.js","webpack:///./src/common/entity/domain_icon.ts","webpack:///./src/common/entity/compute_state_domain.ts","webpack:///./src/components/ha-icon.ts","webpack:///./node_modules/@polymer/paper-item/paper-item-body.js","webpack:///./node_modules/@polymer/paper-spinner/paper-spinner.js","webpack:///./src/components/entity/state-badge.ts","webpack:///./node_modules/@polymer/paper-item/paper-icon-item.js","webpack:///./src/common/entity/cover_icon.ts","webpack:///./src/common/entity/sensor_icon.ts","webpack:///./src/common/entity/state_icon.ts","webpack:///./src/common/entity/binary_sensor_icon.ts","webpack:///./src/common/entity/input_dateteime_icon.ts","webpack:///./src/common/entity/compute_object_id.ts","webpack:///./src/components/entity/ha-entity-picker.ts","webpack:///./node_modules/fecha/src/fecha.js","webpack:///./node_modules/@polymer/app-layout/app-header-layout/app-header-layout.js","webpack:///./src/common/datetime/format_time.ts","webpack:///./src/common/datetime/format_date.ts","webpack:///./node_modules/@vaadin/vaadin-date-picker/theme/material/vaadin-date-picker-overlay-styles.js","webpack:///./node_modules/@vaadin/vaadin-date-picker/src/vaadin-date-picker-overlay.js","webpack:///./node_modules/@vaadin/vaadin-button/theme/material/vaadin-button-styles.js","webpack:///./node_modules/@vaadin/vaadin-control-state-mixin/vaadin-control-state-mixin.js","webpack:///./node_modules/@vaadin/vaadin-development-mode-detector/vaadin-development-mode-detector.js","webpack:///./node_modules/@vaadin/vaadin-usage-statistics/vaadin-usage-statistics-collect.js","webpack:///./node_modules/@vaadin/vaadin-element-mixin/vaadin-element-mixin.js","webpack:///./node_modules/@vaadin/vaadin-button/src/vaadin-button.js","webpack:///./node_modules/@vaadin/vaadin-date-picker/theme/material/vaadin-date-picker-overlay-content-styles.js","webpack:///./node_modules/@vaadin/vaadin-date-picker/src/vaadin-date-picker-helper.js","webpack:///./node_modules/@vaadin/vaadin-date-picker/src/vaadin-month-calendar.js","webpack:///./node_modules/@vaadin/vaadin-date-picker/src/vaadin-infinite-scroller.js","webpack:///./node_modules/@vaadin/vaadin-date-picker/src/vaadin-date-picker-styles.js","webpack:///./node_modules/@vaadin/vaadin-date-picker/src/vaadin-date-picker-overlay-content.js","webpack:///./node_modules/@vaadin/vaadin-date-picker/theme/material/vaadin-month-calendar-styles.js","webpack:///./node_modules/@vaadin/vaadin-material-styles/mixins/required-field.js","webpack:///./node_modules/@vaadin/vaadin-material-styles/mixins/field-button.js","webpack:///./node_modules/@vaadin/vaadin-text-field/theme/material/vaadin-text-field-styles.js","webpack:///./node_modules/@vaadin/vaadin-text-field/src/vaadin-text-field-mixin.js","webpack:///./node_modules/@vaadin/vaadin-text-field/src/vaadin-text-field.js","webpack:///./node_modules/@vaadin/vaadin-date-picker/theme/material/vaadin-date-picker-styles.js","webpack:///./node_modules/@vaadin/vaadin-date-picker/src/vaadin-date-picker-mixin.js","webpack:///./node_modules/@vaadin/vaadin-date-picker/src/vaadin-date-picker.js","webpack:///./src/resources/ha-date-picker-style.js","webpack:///./node_modules/lit-virtualizer/lib/uni-virtualizer/lib/layouts/Layout1d.js","webpack:///./node_modules/lit-virtualizer/lib/uni-virtualizer/lib/polyfillLoaders/EventTarget.js","webpack:///./node_modules/lit-virtualizer/lib/uni-virtualizer/lib/layouts/Layout1dBase.js","webpack:///./src/panels/logbook/ha-logbook-data.js","webpack:///./node_modules/lit-virtualizer/lib/uni-virtualizer/lib/VirtualRepeater.js","webpack:///./node_modules/lit-virtualizer/lib/repeat.js","webpack:///./node_modules/lit-virtualizer/lib/uni-virtualizer/lib/polyfillLoaders/ResizeObserver.js","webpack:///./node_modules/lit-virtualizer/lib/uni-virtualizer/lib/VirtualScroller.js","webpack:///./node_modules/lit-virtualizer/lib/scroll.js","webpack:///./node_modules/lit-virtualizer/lib/lit-virtualizer.js","webpack:///./src/panels/logbook/ha-logbook.ts","webpack:///./src/panels/logbook/ha-panel-logbook.js","webpack:///./node_modules/@polymer/paper-input/paper-input.js","webpack:///./node_modules/@polymer/iron-a11y-announcer/iron-a11y-announcer.js"],"names":["__webpack_require__","_polymer_iron_a11y_announcer_iron_a11y_announcer_js__WEBPACK_IMPORTED_MODULE_1__","_polymer_iron_validatable_behavior_iron_validatable_behavior_js__WEBPACK_IMPORTED_MODULE_2__","_polymer_polymer_lib_legacy_polymer_fn_js__WEBPACK_IMPORTED_MODULE_3__","_polymer_polymer_lib_legacy_polymer_dom_js__WEBPACK_IMPORTED_MODULE_4__","_polymer_polymer_lib_utils_html_tag_js__WEBPACK_IMPORTED_MODULE_5__","Polymer","_template","html","is","behaviors","IronValidatableBehavior","properties","bindValue","type","String","value","computed","allowedPattern","autoValidate","Boolean","_inputElement","Object","observers","listeners","input","keypress","created","IronA11yAnnouncer","requestAvailability","this","_previousValidInput","_patternAlreadyChecked","attached","_observer","dom","observeNodes","info","_initSlottedInput","bind","detached","unobserveNodes","inputElement","getEffectiveChildren","fire","_patternRegExp","pattern","RegExp","_bindValueChanged","undefined","validate","_onInput","_checkPatternValidity","_announceInvalidCharacter","_isPrintable","event","anyNonPrintable","keyCode","mozNonPrintable","charCode","_onKeypress","regexp","metaKey","ctrlKey","altKey","thisChar","fromCharCode","test","preventDefault","i","length","invalid","valid","checkValidity","required","hasValidator","call","message","text","_computeValue","d","__webpack_exports__","PaperItemBehavior","_polymer_iron_behaviors_iron_button_state_js__WEBPACK_IMPORTED_MODULE_1__","_polymer_iron_behaviors_iron_control_state_js__WEBPACK_IMPORTED_MODULE_2__","IronButtonState","IronControlState","hostAttributes","role","tabindex","$_documentContainer","document","createElement","setAttribute","innerHTML","head","appendChild","content","computeStateName","_compute_object_id__WEBPACK_IMPORTED_MODULE_0__","stateObj","attributes","friendly_name","computeObjectId","entity_id","replace","_polymer_polymer_lib_utils_mixin__WEBPACK_IMPORTED_MODULE_0__","dedupingMixin","superClass","hass","localize","Function","__computeLocalize","domainIcon","_const__WEBPACK_IMPORTED_MODULE_0__","fixedIcons","alert","alexa","automation","calendar","camera","climate","configurator","conversation","counter","device_tracker","fan","google_assistant","group","history_graph","homeassistant","homekit","image_processing","input_boolean","input_datetime","input_number","input_select","input_text","light","mailbox","notify","persistent_notification","person","plant","proximity","remote","scene","script","sensor","simple_alarm","sun","switch","timer","updater","vacuum","water_heater","weather","weblink","zone","domain","state","console","warn","DEFAULT_DOMAIN_ICON","computeStateDomain","_compute_domain__WEBPACK_IMPORTED_MODULE_0__","computeDomain","ironIconClass","customElements","get","loaded","HaIcon","[object Object]","args","super","listen","node","eventName","methodName","_iconsetName","e","then","define","_polymer_polymer_lib_legacy_polymer_fn_js__WEBPACK_IMPORTED_MODULE_4__","_polymer_polymer_lib_utils_html_tag_js__WEBPACK_IMPORTED_MODULE_4__","_paper_spinner_behavior_js__WEBPACK_IMPORTED_MODULE_5__","template","PaperSpinnerBehavior","StateBadge","_LitElement","_initialize","property","query","overrideIcon","stateIcon","changedProps","has","iconStyle","color","filter","hostStyle","backgroundImage","entity_picture","overrideImage","imageUrl","hassUrl","display","hs_color","hue","sat","brightness","errorMessage","assign","_icon","style","css","LitElement","_paper_item_behavior_js__WEBPACK_IMPORTED_MODULE_6__","fixedDeviceClassIcons","humidity","illuminance","temperature","pressure","power","signal_strength","domainIcons","binary_sensor","activated","device_class","cover","open","dclass","battery","Number","isNaN","batteryRound","Math","round","unit","unit_of_measurement","UNIT_C","UNIT_F","has_date","has_time","icon","entityId","substr","indexOf","HaEntityPicker","attribute","Array","memoizeOne","includeDomains","excludeDomains","entityFilter","includeDeviceClasses","states","entityIds","keys","eid","includes","sort","map","key","_get","_getPrototypeOf","prototype","_opened","_hass","_getStates","_value","allowCustomEntity","root","_owner","model","firstElementChild","querySelector","item","textContent","_openedChanged","_valueChanged","autofocus","label","disabled","_clearValue","ev","stopPropagation","_setValue","detail","newValue","setTimeout","fireEvent","fecha","token","word","literal","noop","shorten","arr","sLen","newArr","len","push","monthUpdate","arrName","v","i18n","index","charAt","toUpperCase","toLowerCase","month","pad","val","dayNames","monthNames","monthNamesShort","dayNamesShort","amPm","DoFn","D","formatFlags","dateObj","getDate","DD","Do","getDay","dd","ddd","dddd","M","getMonth","MM","MMM","MMMM","YY","getFullYear","YYYY","h","getHours","hh","H","HH","m","getMinutes","mm","s","getSeconds","ss","S","getMilliseconds","SS","SSS","a","A","ZZ","o","getTimezoneOffset","floor","abs","parseFlags","day","parseInt","cent","Date","year","hour","minute","second","millisecond","isPm","minutes","parts","match","timezoneOffset","masks","default","shortDate","mediumDate","longDate","fullDate","shortTime","mediumTime","longTime","format","mask","i18nSettings","toString","getTime","Error","literals","$0","$1","slice","shift","parse","dateStr","dateInfo","parseInfo","str","newFormat","matches","date","today","UTC","_polymer_polymer_lib_legacy_polymer_fn_js__WEBPACK_IMPORTED_MODULE_2__","_polymer_polymer_lib_legacy_polymer_dom_js__WEBPACK_IMPORTED_MODULE_3__","_app_layout_behavior_app_layout_behavior_js__WEBPACK_IMPORTED_MODULE_5__","AppLayoutBehavior","hasScrollingRegion","reflectToAttribute","header","$","headerSlot","getDistributedNodes","_updateLayoutStates","isAttached","wrapper","classList","remove","scrollTarget","contentContainer","ownerDocument","documentElement","headerHeight","offsetHeight","left","right","requestAnimationFrame","rect","getBoundingClientRect","rightOffset","clientWidth","containerStyle","fixed","condenses","marginTop","paddingTop","fecha__WEBPACK_IMPORTED_MODULE_0__","toLocaleTimeStringSupportsOptions","toLocaleTimeString","name","locales","toLocaleDateStringSupportsOptions","toLocaleDateString","DatePickerOverlayElement","DisableUpgradeMixin","OverlayElement","ControlStateMixin","observer","window","ShadyDOM","TabIndexMixin","_previousTabIndex","_isShiftTabbing","ready","addEventListener","composedPath","_focus","focusElement","_setFocused","ensureEventComposed","composed","target","dispatchEvent","CustomEvent","bubbles","cancelable","shadowRoot","defaultPrevented","shiftKey","HTMLElement","focus","apply","firefox","navigator","userAgent","parseFloat","parentNode","nextSibling","fakeTarget","position","opacity","tabIndex","insertBefore","removeChild","focused","_boundKeydownListener","_bodyKeydownListener","_boundKeyupListener","_bodyKeyupListener","connectedCallback","body","disconnectedCallback","removeEventListener","hasAttribute","removeAttribute","_tabPressed","localName","blur","_disabledChanged","_tabindexChanged","setProperties","click","DEV_MODE_CODE_REGEXP","FlowClients","Vaadin","Flow","clients","uncommentAndRun","callback","exec","log","runIfDevelopmentMode","developmentMode","maybeGatherAndSendStats","localStorage","getItem","location","hostname","productionModeApps","client","productionMode","isFlowProductionMode","isDevelopmentMode","usageStatistics","statsJob","registrations","developmentModeCallback","registered","Set","ElementMixin","finalize","add","Debouncer","debounce","idlePeriod","enqueueDebouncer","constructor","doctype","ButtonElement","ThemableMixin","GestureEventListeners","PolymerElement","version","button","_addActiveListeners","addListener","DatePickerHelper","dayOfWeek","nearestThursdayDiff","nearestThursday","firstOfJanuary","setFullYear","timeDiff","daysSinceFirstOfJanuary","date1","date2","min","max","dates","reduce","closestDate","candidate","MonthCalendarElement","selectedDate","focusedDate","showWeekNumbers","ignoreTaps","_notTapping","minDate","maxDate","_days","_dateEquals","_dateAllowed","_isDisabled","firstDate","setMonth","setDate","lastDate","_getTitle","formatTitle","_onMonthGridTouchStart","_dateAdd","delta","_applyFirstDayOfWeek","weekDayNames","firstDayOfWeek","concat","_getWeekDayNames","weekDayNamesShort","weekDay","weekDayShort","_getDate","_showWeekNumbersChanged","_showWeekSeparator","_isToday","_getDays","days","startMonth","targetMonth","_getWeekNumber","acc","_getISOWeekNumber","_getWeekNumbers","week","_handleTap","_preventDefault","_getRole","_getAriaLabel","ariaLabel","weekdays","_getAriaDisabled","InfiniteScrollerElement","bufferSize","_initialScroll","_initialIndex","_buffers","_preventScrollEvent","_mayHaveMomentum","_initialized","active","querySelectorAll","fullHeight","height","tpl","_TemplateClass","templatize","forwardHostProp","prop","forEach","buffer","children","insertionPoint","_itemWrapper","instance","scroller","_activated","_createPool","_finishInit","_initDone","_ensureStampedInstance","translateY","_reset","_translateBuffer","up","_bufferHeight","transform","updated","reverse","_scroll","_scrollDisabled","scrollTop","bufferOffset","offsetTop","upperThresholdReached","itemHeight","lowerThresholdReached","_updateClones","_debouncerScrollFinish","timeOut","after","scrollerRect","_isVisible","_firstIndex","_itemHeightVal","ShadyCSS","nativeCss","updateStyles","getComputedStyleValue","getComputedStyle","getPropertyValue","tmpStyleProp","setProperty","itemHeightPx","removeProperty","_debouncerUpdateClones","container","itemWrapper","slotName","_contentIndex","flush","afterNextRender","tmpInstance","set","viewPortOnly","bufferIndex","firstIndex","element","bottom","top","DatePickerOverlayContentElement","ThemePropertyMixin","_focusedMonthDate","initialPosition","_originDate","_visibleMonthIndex","_desktopMode","_translateX","_yearScrollerWidth","_ignoreTaps","_focused","_onKeydown","_stopPropagation","_onOverlayFocus","_onOverlayBlur","_closeYearScroller","_toggleAnimateClass","setTouchAction","scrollers","announceFocusedDate","_currentlyFocusedDate","announce","join","focusCancel","cancelButton","scrollToDate","animate","_scrollToPosition","_differenceInMonths","_focusedDateChanged","revealDate","_isCurrentYear","yearsFromNow","_isSelectedYear","diff","scrolledAboveViewport","monthScroller","visibleItems","clientHeight","scrolledBelowViewport","_initialPositionChanged","_repositionYearScroller","yearScroller","_repositionMonthScroller","_onMonthScroll","_doIgnoreTaps","_onYearScroll","_onYearScrollTouchStart","_onMonthScrollTouchStart","_debouncer","_formatDisplayed","formatDate","_extractDateParts","_onTodayTap","_close","_scrollToCurrentMonth","_showClear","_onYearTap","yearDelta","y","targetPosition","_targetPosition","duration","start","smoothScroll","timestamp","currentTime","currentPos","t","b","c","easingFunction","oldPosition","_limit","range","_handleTrack","dx","ddy","ddx","newTranslateX","_track","_openYearScroller","enable","_toggleYearScroller","_isYearScrollerVisible","_translateXChanged","x","_yearAfterXYears","result","_yearAfterXMonths","months","_dateAfterXMonths","_differenceInYears","_clear","overlayContent","getRootNode","host","overlay","opened","_cancel","_eventKey","k","IronA11yKeysBehavior","keyboardEventMatchesKeys","isToday","todayButton","isCancel","isScroller","eventKey","isFullscreen","isShift","_moveFocusByDays","_moveFocusInsideMonth","_moveFocusByMonths","_focusDate","dateToFocus","_focusClosestDate","_getClosestDate","_isTodayAllowed","todayMidnight","HOST_PROPS","accessible","PROP_TYPE","DEFAULT","ACCESSIBLE","TextFieldMixin","subclass","autocomplete","autocorrect","autocapitalize","autoselect","clearButtonVisible","clear","maxlength","minlength","placeholder","readonly","hasValue","preventInvalidInput","_labelId","_errorId","_inputId","slotted","_slottedTagName","_createConstraintsObserver","_createMethodObserver","__preventInput","stopImmediatePropagation","_inputDebouncer","__fromClearButton","__userInput","_stateChanged","clearButton","_onChange","_valueClearing","changeEvent","sourceEvent","newVal","oldVal","_labelChanged","_onSlotChange","_slottedInput","_validateSlottedValue","_addInputListeners","_addIEListeners","_removeInputListeners","_removeIEListeners","_propagateHostAttributes","attr","_hostPropsChanged","attributesValues","_hostAccessiblePropsChanged","attributeNames","_setOrToggleAttribute","_constraintsChanged","_boundOnInput","_boundOnChange","_boundOnBlur","_boundOnFocus","_onBlur","_onFocus","defaultInput","_onClearButtonClick","_onKeyDown","uniqueId","_uniqueId","__observeOffsetHeight","select","setSelectionRange","inputEvent","Event","dispatchChange","_shouldPreventInput","_createPropertyObserver","_getActiveErrorId","errorId","_getActiveLabelId","ids","_getErrorMessageAriaHidden","_dispatchIronResizeEventIfNeeded","sizePropertyName","previousSizePropertyName","attributeChangedCallback","WEBKIT_PROPERTY","el","TextFieldElement","list","title","DatePickerMixin","mixinBehaviors","IronResizableBehavior","_selectedDate","_focusedDate","_fullscreen","_fullscreenMediaQuery","_touchPrevented","weekdaysShort","cancel","yearStr","parseDate","split","monthName","fullYear","_minDate","_maxDate","_noInput","_ios","_webkitOverflowScroll","webkitOverflowScrolling","_ignoreAnnounce","_focusOverlayOnOpen","_overlayInitialized","_boundOnScroll","_onScroll","_boundFocus","_boundUpdateAlignmentAndPosition","_updateAlignmentAndPosition","isClearButton","path","inputIndex","getAttribute","_onUserInput","_initOverlay","_overlayContent","_focusAndSelect","_onVaadinOverlayClose","close","_input","_nativeInput","unwrap","_parseDate","_isNoInput","fullscreen","ios","_formatISO","num","fmt","yearSign","yearFmt","yearAbs","_selectedDateChanged","__userInputOccurred","__dispatchChange","inputValue","_ignoreFocusedDateChange","_inputValue","_updateHasValue","__getOverlayTheme","theme","overlayInitialized","_handleDateChange","oldValue","_minChanged","_maxChanged","inputRect","bottomAlign","innerHeight","innerWidth","viewportWidth","viewportHeight","_fullscreenChanged","_onOverlayOpened","_openedWithFocusRing","parsedInitialPosition","_preventWebkitOverflowScrollingTouch","parentElement","oldInlineValue","_onOverlayClosed","prevented","dateObject","parsedDate","_isValidDate","selectionStart","selectionEnd","inputValid","minMaxValid","inputValidity","contains","_setSelectionRange","_validateInput","_userInputValueChanged","_announceFocusedDate","DatePickerElement","_userInputValue","_toggle","_getAriaExpanded","_setClearButtonLabel","i18nClear","documentContainer","r","Layout1d","_Layout1dBase_js__WEBPACK_IMPORTED_MODULE_0__","Layout1dBase","config","_physicalItems","Map","_newPhysicalItems","_metrics","_anchorIdx","_anchorPos","_stable","_needsRemeasure","_nMeasured","_tMeasured","_estimate","updateItemSizes","sizes","metrics","mi","_getMetrics","prevSize","_sizeDim","width","marginLeft","marginRight","marginBottom","size","_getPhysicalItem","_updateItemSize","_scheduleReflow","_itemSize","idx","_getSize","_getPosition","pos","_delta","_spacing","_calculateAnchor","lower","upper","_scrollSize","_viewDim1","_totalItems","_getAnchor","_first","error","_last","firstItem","lastItem","firstMin","firstMax","lastMin","lastMax","maxIdx","minIdx","candidateIdx","cMin","cMax","_getActiveItems","_clearItems","_scrollPosition","_overhang","_getItems","_physicalMin","_physicalMax","items","anchorSize","_itemDim1","anchorErr","_scrollError","extentErr","_calculateError","_updateScrollSize","_reflow","_scrollIfNeeded","_emitScrollSize","_updateVisibleIndices","_emitRange","_resetReflowState","_emitChildPositions","_emitScrollError","_getItemPosition","_positionDim","_secondaryPositionDim","_getItemSize","_secondarySizeDim","_itemDim2","_viewDim2Changed","remeasure","stable","ET","async","EventTarget","_a","init","Layout1dBase_Layout1dBase","_latestCoords","_direction","_viewportSize","_pendingReflow","_scrollToIndex","_scrollToAnchor","_eventTargetPromise","Ctor","_eventTarget","totalItems","direction","dir","itemSize","dims","_itemDim2Changed","spacing","px","viewportSize","_viewDim2","_checkThresholds","viewportScroll","coords","oldPos","_scrollPositionChanged","reflowIfNeeded","scrollToIndex","isFinite","_num","TypeError","_sizes","_idx","_spacingChanged","anchor","curAnchorPos","newAnchorPos","scrollPosition","inProps","first","last","firstVisible","_firstVisible","lastVisible","_lastVisible","itemY","newPos","maxPos","DATA_CACHE","ALL_ENTITIES","filterDate","filterPeriod","filterEntity","isLoading","readOnly","entries","hassChanged","newHass","oldHass","updateData","filterDataChanged","_setIsLoading","logbookEntries","_setEntries","period","entities","entity","_getFromServer","url","callApi","refreshLogbook","VirtualRepeater","_createElementFn","_updateElementFn","_recycleElementFn","_elementKeyFn","_items","_needsReset","_active","_prevActive","_keyToChild","_childToKey","WeakMap","_indexToMeasure","__incremental","_measureCallback","Infinity","_prevFirst","_prevLast","_pendingRender","_container","_ordered","child","_removeChild","_insertBefore","requestReset","fn","updateElement","recycleElement","elementKey","newFirst","_scheduleRender","n","isArray","_incremental","inc","requestRemeasure","_shouldRender","Promise","resolve","_render","_toMeasure","toMeasure","indices","_measureChild","out","cur","rangeChanged","_prevNum","_discardHead","_discardTail","_addHead","_addTail","_unassignChild","_didRender","_measureChildren","pop","_assignChild","_firstChild","unshift","end","prevActive","currentMarker","_node","_nextSibling","_childIsAttached","delete","_showChild","_hideChild","referenceNode","getMarginValue","getMargins","float","NaN","LitMixin","Superclass","part","renderItem","useShadowDOM","layout","startNode","_pool","_renderItem","_hostPart","NodePart","options","setValue","commit","_kids","p","nextElementSibling","endNode","boundary","createMarker","LitRepeater","partToRepeater","directive","repeater","isConnected","RO","ResizeObserver","HOST_CLASSNAME","globalContainerStylesheet","containerStyles","hostSel","childSel","RangeChangeEvent","VirtualScroller","_needsUpdateView","_layout","_lazyLoadDefaultLayout","_scrollTarget","_sizer","_scrollErr","_childrenPos","_containerElement","_containerInlineStyle","_containerStylesheet","_useShadowDOM","_containerSize","_containerRO","_childrenRO","_skipNextChildrenSizeChanged","_initResizeObservers","oldEl","newEl","nodeType","Node","DOCUMENT_FRAGMENT_NODE","disconnect","passive","_applyContainerStyles","_createContainerSizer","prepend","_scheduleUpdateView","observe","_sizeContainer","_updateView","_correctScrollError","_positionChildren","handleEvent","_adjustRange","getResizeObserver","_containerSizeChanged","contentRect","_childrenSizeChanged","attachShadow","mode","slot","sizer","margin","padding","visibility","fontSize","scrollLeft","containerBounds","scrollBounds","scrollY","scrollX","scrollerWidth","scrollerHeight","xMin","yMin","minWidth","minHeight","kids","visiblityChanged","_notifyRange","err","scroll","LitScroller","partToScroller","LitVirtualizer","renderRoot","requestUpdate","updateComplete","render","tslib_1","customElement","HaLogbook","reflect","language","_rtl","computeRTL","_this$entries","_renderLogbookItem","previous","when","toDateString","formatTime","_entityClicked","LocalizeMixin","narrow","_currentDate","toISOString","_periodIndex","_entityId","datePicker","rtl","picker","_computeFilterDate","_computeFilterDays","periodIndex","_entityPicked","_setEntityId","_computeRTL","_polymer_iron_form_element_behavior_iron_form_element_behavior_js__WEBPACK_IMPORTED_MODULE_5__","_polymer_polymer_lib_legacy_polymer_fn_js__WEBPACK_IMPORTED_MODULE_7__","_polymer_polymer_lib_utils_html_tag_js__WEBPACK_IMPORTED_MODULE_8__","_paper_input_behavior_js__WEBPACK_IMPORTED_MODULE_9__","PaperInputBehavior","IronFormElementBehavior","_focusableElement","iron-input-ready","_onIronInputReady","nativeInput","$$","_typesThatHaveText","alwaysFloatLabel","_handleValueAndAutoValidate","_polymer_polymer_lib_legacy_polymer_fn_js__WEBPACK_IMPORTED_MODULE_1__","_polymer_polymer_lib_utils_html_tag_js__WEBPACK_IMPORTED_MODULE_2__","_text","_onIronAnnounce"],"mappings":";4FAAAA,EAAA,OAAAC,EAAAD,EAAA,IAAAE,EAAAF,EAAA,IAAAG,EAAAH,EAAA,GAAAI,EAAAJ,EAAA,GAAAK,EAAAL,EAAA,GAoGAM,YAAQ,CACNC,UAAWC;;;;;;;EASXC,GAAI,aACJC,UAAW,CAACC,KAQZC,WAAY,CAOVC,UAAW,CAACC,KAAMC,OAAQC,MAAO,IAOjCA,MAAO,CAACF,KAAMC,OAAQE,SAAU,4BAqBhCC,eAAgB,CAACJ,KAAMC,QAKvBI,aAAc,CAACL,KAAMM,QAASJ,OAAO,GAKrCK,cAAeC,QAGjBC,UAAW,CAAC,+CACZC,UAAW,CAACC,MAAS,WAAYC,SAAY,eAE7CC,QAAS,WACPC,IAAkBC,sBAClBC,KAAKC,oBAAsB,GAC3BD,KAAKE,wBAAyB,GAGhCC,SAAU,WAERH,KAAKI,UAAYC,YAAIL,MAAMM,aAAa,SAASC,GAC/CP,KAAKQ,qBACLC,KAAKT,QAGTU,SAAU,WACJV,KAAKI,YACPC,YAAIL,MAAMW,eAAeX,KAAKI,WAC9BJ,KAAKI,UAAY,OAOrBQ,mBACE,OAAOZ,KAAKT,eAGdiB,kBAAmB,WACjBR,KAAKT,cAAgBS,KAAKa,uBAAuB,GAE7Cb,KAAKY,cAAgBZ,KAAKY,aAAa1B,QACzCc,KAAKjB,UAAYiB,KAAKY,aAAa1B,OAGrCc,KAAKc,KAAK,qBAGZC,qBACE,IAAIC,EACJ,GAAIhB,KAAKZ,eACP4B,EAAU,IAAIC,OAAOjB,KAAKZ,qBAE1B,OAAQY,KAAKY,aAAa5B,MACxB,IAAK,SACHgC,EAAU,YAIhB,OAAOA,GAMTE,kBAAmB,SAASnC,EAAW6B,GAGhCA,SAIaO,IAAdpC,EACF6B,EAAa1B,MAAQ,KACZH,IAAc6B,EAAa1B,QACpCc,KAAKY,aAAa1B,MAAQH,GAGxBiB,KAAKX,cACPW,KAAKoB,WAIPpB,KAAKc,KAAK,qBAAsB,CAAC5B,MAAOH,MAG1CsC,SAAU,WAGJrB,KAAKZ,iBAAmBY,KAAKE,yBACnBF,KAAKsB,0BAEftB,KAAKuB,0BACD,6CACJvB,KAAKY,aAAa1B,MAAQc,KAAKC,sBAGnCD,KAAKjB,UAAYiB,KAAKC,oBAAsBD,KAAKY,aAAa1B,MAC9Dc,KAAKE,wBAAyB,GAGhCsB,aAAc,SAASC,GAcrB,IAAIC,EAAoC,GAAjBD,EAAME,SACP,GAAjBF,EAAME,SACW,IAAjBF,EAAME,SACW,IAAjBF,EAAME,QAGPC,EAAoC,IAAjBH,EAAME,SACP,IAAjBF,EAAME,SACW,IAAjBF,EAAME,SACW,IAAjBF,EAAME,SACW,KAAjBF,EAAME,SACW,KAAjBF,EAAME,SACNF,EAAME,QAAU,IAChBF,EAAME,QAAU,IAChBF,EAAME,QAAU,KAAOF,EAAME,QAAU,IAE5C,QAAQD,GAAuC,GAAlBD,EAAMI,UAAiBD,IAGtDE,YAAa,SAASL,GACpB,GAAKzB,KAAKZ,gBAA6C,WAA3BY,KAAKY,aAAa5B,KAA9C,CAGA,IAAI+C,EAAS/B,KAAKe,eAClB,GAAKgB,KAKDN,EAAMO,SAAWP,EAAMQ,SAAWR,EAAMS,QAA5C,CAKAlC,KAAKE,wBAAyB,EAE9B,IAAIiC,EAAWlD,OAAOmD,aAAaX,EAAMI,UACrC7B,KAAKwB,aAAaC,KAAWM,EAAOM,KAAKF,KAC3CV,EAAMa,iBACNtC,KAAKuB,0BACD,qBAAuBY,EAAW,qBAI1Cb,sBAAuB,WACrB,IAAIS,EAAS/B,KAAKe,eAClB,IAAKgB,EACH,OAAO,EAET,IAAK,IAAIQ,EAAI,EAAGA,EAAIvC,KAAKY,aAAa1B,MAAMsD,OAAQD,IAClD,IAAKR,EAAOM,KAAKrC,KAAKY,aAAa1B,MAAMqD,IACvC,OAAO,EAGX,OAAO,GAQTnB,SAAU,WACR,IAAKpB,KAAKY,aAER,OADAZ,KAAKyC,SAAU,GACR,EAIT,IAAIC,EAAQ1C,KAAKY,aAAa+B,gBAc9B,OAXID,IAEE1C,KAAK4C,UAA+B,KAAnB5C,KAAKjB,UACxB2D,GAAQ,EACC1C,KAAK6C,iBACdH,EAAQ7D,IAAwBuC,SAAS0B,KAAK9C,KAAMA,KAAKjB,aAI7DiB,KAAKyC,SAAWC,EAChB1C,KAAKc,KAAK,uBACH4B,GAGTnB,0BAA2B,SAASwB,GAClC/C,KAAKc,KAAK,gBAAiB,CAACkC,KAAMD,KAGpCE,cAAe,SAASlE,GACtB,OAAOA,uCC7WXb,EAAAgF,EAAAC,EAAA,sBAAAC,IAAAlF,EAAA,OAAAmF,EAAAnF,EAAA,IAAAoF,EAAApF,EAAA,IAqBO,MAKMkF,EACT,CAACG,IAAiBC,IANe,CACnCC,eAAgB,CAACC,KAAM,SAAUC,SAAU,yCCtB7CzF,EAAA,IAAAA,EAAA,IAAAA,EAAA,IAAAA,EAAA,IAcA,MAAM0F,EAAsBC,SAASC,cAAc,YACnDF,EAAoBG,aAAa,QAAS,kBAE1CH,EAAoBI,UAAa,40CAwDjCH,SAASI,KAAKC,YAAYN,EAAoBO,2CCxE9CjG,EAAAgF,EAAAC,EAAA,sBAAAiB,IAAA,IAAAC,EAAAnG,EAAA,KAEO,MAAMkG,EAAoBE,QACcnD,IAAtCmD,EAASC,WAAWC,cACvBC,YAAgBH,EAASI,WAAWC,QAAQ,KAAM,KAClDL,EAASC,WAAWC,eAAiB,qCCN3C,IAAAI,EAAA1G,EAAA,GAMe2G,gBACZC,IACC,cAAcA,EACZhG,wBACE,MAAO,CACLiG,KAAMvF,OAONwF,SAAU,CACRhG,KAAMiG,SACN9F,SAAU,qCAKhB+F,kBAAkBF,GAChB,OAAOA,wCC1Bf9G,EAAAgF,EAAAC,EAAA,sBAAAgC,IAAA,IAAAC,EAAAlH,EAAA,KAOA,MAAMmH,EAAa,CACjBC,MAAO,aACPC,MAAO,oBACPC,WAAY,qBACZC,SAAU,gBACVC,OAAQ,aACRC,QAAS,kBACTC,aAAc,gBACdC,aAAc,sBACdC,QAAS,eACTC,eAAgB,eAChBC,IAAK,WACLC,iBAAkB,wBAClBC,MAAO,kCACPC,cAAe,kBACfC,cAAe,sBACfC,QAAS,uBACTC,iBAAkB,2BAClBC,cAAe,eACfC,eAAgB,sBAChBC,aAAc,kBACdC,aAAc,4BACdC,WAAY,eACZC,MAAO,iBACPC,QAAS,eACTC,OAAQ,qBACRC,wBAAyB,YACzBC,OAAQ,eACRC,MAAO,cACPC,UAAW,oBACXC,OAAQ,cACRC,MAAO,oBACPC,OAAQ,qBACRC,OAAQ,WACRC,aAAc,YACdC,IAAK,2BACLC,OAAQ,aACRC,MAAO,aACPC,QAAS,oBACTC,OAAQ,oBACRC,aAAc,mBACdC,QAAS,sBACTC,QAAS,mBACTC,KAAM,mBAGK7C,EAAa,CAAC8C,EAAgBC,KACzC,GAAID,KAAU5C,EACZ,OAAOA,EAAW4C,GAGpB,OAAQA,GACN,IAAK,sBACH,OAAQC,GACN,IAAK,aACH,MAAO,iBACT,IAAK,cACH,MAAO,kBACT,IAAK,WACH,MAAO,oBACT,IAAK,YACH,MAAO,iBACT,QACE,MAAO,YAGb,IAAK,gBACH,OAAOA,GAAmB,QAAVA,EACZ,sBACA,8BAEN,IAAK,QACH,MAAiB,WAAVA,EAAqB,qBAAuB,mBAErD,IAAK,OACH,OAAOA,GAAmB,aAAVA,EAAuB,iBAAmB,YAE5D,IAAK,eACH,OAAOA,GAAmB,QAAVA,GAA6B,SAAVA,EAC/B,sBACA,YAEN,IAAK,QACH,OAAQA,GACN,IAAK,OACH,MAAO,qBACT,IAAK,WACH,MAAO,aACT,IAAK,eACH,MAAO,kBACT,QACE,MAAO,cAGb,QAKE,OAHAC,QAAQC,KACN,kCAAoCH,EAAS,KAAOC,EAAQ,KAEvDG,wCCzGbnK,EAAAgF,EAAAC,EAAA,sBAAAmF,IAAA,IAAAC,EAAArK,EAAA,KAEO,MAAMoK,EAAsBhE,GAC1BkE,YAAclE,EAASI,oFCGhC,MAAM+D,EAAgBC,eAAeC,IAAI,aAIzC,IAAIC,GAAS,EAEN,MAAMC,UAAeJ,EAAcK,eAAAC,aAAAC,SAAAD,UAAA,yBAAA/I,4FAGjCiJ,OACLC,EACAC,EACAC,GAEAJ,MAAMC,OAAOC,EAAMC,EAAWC,GAEzBR,GAAgC,QAAtB5I,KAAKqJ,eAClBT,GAAS,EACT1K,EAAAoL,EAAA,IAAAC,KAAArL,EAAAuC,KAAA,aAWNiI,eAAec,OAAO,UAAWX,qCCpCjC3K,EAAA,GAAAA,EAAA,IAAAA,EAAA,IAAAA,EAAA,QAAAuL,EAAAvL,EAAA,GAAAK,EAAAL,EAAA,GA4CAM,YAAQ,CACNC,UAAWC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;EAmCXC,GAAI,sDChFNT,EAAA,GAAAA,EAAA,IAAAA,EAAA,SAAAG,EAAAH,EAAA,GAAAwL,EAAAxL,EAAA,GAAAyL,EAAAzL,EAAA,KAmBA,MAAM0L,EAAWlL;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;EAyCjBkL,EAAS7F,aAAa,mBAAoB,IAwC1CvF,YAAQ,CACNC,UAAWmL,EAEXjL,GAAI,gBAEJC,UAAW,CAACiL,wxCCtFRC,22LAAN,cAAAC,EAAoCjB,eAAAC,GAAAC,SAAAD,GAAAiB,EAAAhK,4EAEjCiK,sEACAA,0EACAA,2EACAC,YAAM,wEAEP,WACE,MAAM5F,EAAWtE,KAAKsE,SAEtB,OAAKA,EAIE5F;;;sBAGW4J,YAAmBhE;qBACpBA,EAAS4D;gBACdlI,KAAKmK,cAAgBC,YAAU9F;;MARlC5F,2CAaX,SAAkB2L,GAChB,IAAKA,EAAaC,IAAI,cAAgBtK,KAAKsE,SACzC,OAEF,MAAMA,EAAWtE,KAAKsE,SAEhBiG,EAA0C,CAC9CC,MAAO,GACPC,OAAQ,IAEJC,EAA0C,CAC9CC,gBAAiB,IAEnB,GAAIrG,EAEF,GACGA,EAASC,WAAWqG,iBAAmB5K,KAAKmK,cAC7CnK,KAAK6K,cACL,CACA,IAAIC,EAAW9K,KAAK6K,eAAiBvG,EAASC,WAAWqG,eACrD5K,KAAK+E,OACP+F,EAAW9K,KAAK+E,KAAKgG,QAAQD,IAE/BJ,EAAUC,uBAAyBG,KACnCP,EAAUS,QAAU,WACf,CACL,GAAI1G,EAASC,WAAW0G,SAAU,CAChC,MAAMC,EAAM5G,EAASC,WAAW0G,SAAS,GACnCE,EAAM7G,EAASC,WAAW0G,SAAS,GACrCE,EAAM,KACRZ,EAAUC,aAAeU,YAAc,IAAMC,EAAM,OAGvD,GAAI7G,EAASC,WAAW6G,WAAY,CAClC,MAAMA,EAAa9G,EAASC,WAAW6G,WACvC,GAA0B,iBAAfA,EAAyB,CAClC,MAAMC,0DACJ/G,EAASI,6CACyB0G,MAAeA,KAEnDjD,QAAQC,KAAKiD,GAGfd,EAAUE,sBAAwBW,EAAa,KAAO,OAI5D5L,OAAO8L,OAAOtL,KAAKuL,MAAMC,MAAOjB,GAChC/K,OAAO8L,OAAOtL,KAAKwL,MAAOd,8CAG5B,WACE,OAAOe;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;WA5EcC,KAqHzBhD,eAAec,OAAO,cAAeM,qCCxIrC5L,EAAA,GAAAA,EAAA,IAAAA,EAAA,IAAAA,EAAA,SAAAuL,EAAAvL,EAAA,GAAAK,EAAAL,EAAA,GAAAyN,EAAAzN,EAAA,KAqDAM,YAAQ,CACNC,UAAWC;;;;;;;;;;;;;;;;;;;;;;;;;EA2BXC,GAAI,kBACJC,UAAW,CAACwE,4EC9EP,MCCDwI,EAAwB,CAC5BC,SAAU,qBACVC,YAAa,oBACbC,YAAa,mBACbC,SAAU,aACVC,MAAO,aACPC,gBAAiB,aCXnBhO,EAAAgF,EAAAC,EAAA,sBAAAiH,IAWA,MAAM+B,EAAc,CAClBC,cCR+BlE,IAC/B,MAAMmE,EAAYnE,EAAMA,OAAyB,QAAhBA,EAAMA,MACvC,OAAQA,EAAM3D,WAAW+H,cACvB,IAAK,UACH,OAAOD,EAAY,eAAiB,uBACtC,IAAK,OACH,OAAOA,EAAY,mBAAqB,iBAC1C,IAAK,eACH,OAAOA,EAAY,0BAA4B,sBACjD,IAAK,OACH,OAAOA,EAAY,mBAAqB,iBAC1C,IAAK,cACH,OAAOA,EAAY,cAAgB,mBACrC,IAAK,MACL,IAAK,QACL,IAAK,UACL,IAAK,SACL,IAAK,QACH,OAAOA,EAAY,oBAAsB,aAC3C,IAAK,OACH,OAAOA,EAAY,mBAAqB,YAC1C,IAAK,QACH,OAAOA,EAAY,oBAAsB,oBAC3C,IAAK,OACH,OAAOA,EAAY,YAAc,iBACnC,IAAK,WACH,OAAOA,EAAY,iBAAmB,aACxC,IAAK,SACH,OAAOA,EAAY,YAAc,WACnC,IAAK,YACH,OAAOA,EAAY,oBAAsB,YAC3C,IAAK,UACH,OAAOA,EAAY,cAAgB,sBACrC,IAAK,OACH,OAAOA,EAAY,sBAAwB,kBAC7C,IAAK,WACH,OAAOA,EAAY,oBAAsB,YAC3C,IAAK,QACH,OAAOA,EAAY,sBAAwB,kBAC7C,IAAK,YACH,OAAOA,EAAY,qBAAuB,eAC5C,IAAK,SACH,OAAOA,EAAY,qBAAuB,mBAC5C,QACE,OAAOA,EAAY,sBAAwB,gCDnC/CE,MFTwBrE,IACxB,MAAMsE,EAAuB,WAAhBtE,EAAMA,MACnB,OAAQA,EAAM3D,WAAW+H,cACvB,IAAK,SACH,OAAOE,EAAO,mBAAqB,cACrC,IAAK,OACH,OAAOA,EAAO,iBAAmB,mBACnC,IAAK,UACH,OAAOA,EAAO,2BAA6B,sBAC7C,IAAK,QACH,OAAOA,EAAO,mBAAqB,cACrC,IAAK,SACH,OAAOA,EAAO,mBAAqB,qBACrC,QACE,OAAOrH,YAAW,QAAS+C,EAAMA,SEJrCZ,ODAyBY,IACzB,MAAMuE,EAASvE,EAAM3D,WAAW+H,aAEhC,GAAIG,GAAUA,KAAUb,EACtB,OAAOA,EAAsBa,GAE/B,GAAe,YAAXA,EAAsB,CACxB,MAAMC,EAAUC,OAAOzE,EAAMA,OAC7B,GAAI0E,MAAMF,GACR,MAAO,uBAET,MAAMG,EAA0C,GAA3BC,KAAKC,MAAML,EAAU,IAC1C,OAAIG,GAAgB,IACX,eAELA,GAAgB,EACX,qCAamBA,IAG9B,MAAMG,EAAO9E,EAAM3D,WAAW0I,oBAC9B,OAAID,IAASE,KAAUF,IAASG,IACvB,mBAEFhI,YAAW,WCnClBqB,eEXgC0B,GAC3BA,EAAM3D,WAAW6I,SAGjBlF,EAAM3D,WAAW8I,SAGflI,YAAW,kBAFT,gBAHA,cFYEiF,EAAalC,IACxB,IAAKA,EACH,OAAOG,IAET,GAAIH,EAAM3D,WAAW+I,KACnB,OAAOpF,EAAM3D,WAAW+I,KAG1B,MAAMrF,EAASO,YAAcN,EAAMxD,WAEnC,OAAIuD,KAAUkE,EACLA,EAAYlE,GAAQC,GAEtB/C,YAAW8C,EAAQC,EAAMA,0CG/BlChK,EAAAgF,EAAAC,EAAA,sBAAAsB,IACO,MAAMA,EAAmB8I,GACvBA,EAASC,OAAOD,EAASE,QAAQ,KAAO,+uDCqD3CC,k2LAAN,MAAMA,UAAN3D,EAAwCjB,eAAAC,GAAAC,SAAAD,GAAAiB,EAAAhK,gBAAlC0N,+BACHzD,YAAS,CAAEjL,KAAMM,mEACjB2K,YAAS,CAAEjL,KAAMM,kEACjB2K,YAAS,CAAEjL,KAAMM,QAASqO,UAAW,yFAErC1D,kEACAA,mEACAA,mEAMAA,YAAS,CAAEjL,KAAM4O,MAAOD,UAAW,kFAOnC1D,YAAS,CAAEjL,KAAM4O,MAAOD,UAAW,kFAOnC1D,YAAS,CAAEjL,KAAM4O,MAAOD,UAAW,+FAEnC1D,0EACAA,YAAS,CAAEjL,KAAMM,iEACjB2K,uFAEoB4D,YACnB,CACE9I,EACA+I,EACAC,EACAC,EACAC,KAEA,IAAIC,EAAuB,GAE3B,IAAKnJ,EACH,MAAO,GAET,IAAIoJ,EAAY3O,OAAO4O,KAAKrJ,EAAKmJ,QAkCjC,OAhCIJ,IACFK,EAAYA,EAAU1D,OAAQ4D,GAC5BP,EAAeQ,SAAS9F,YAAc6F,MAItCN,IACFI,EAAYA,EAAU1D,OACnB4D,IAASN,EAAeO,SAAS9F,YAAc6F,MAIpDH,EAASC,EAAUI,OAAOC,IAAKC,GAAQ1J,EAAMmJ,OAAOO,IAEhDR,IACFC,EAASA,EAAOzD,OACbnG,GAECA,EAASI,YAAc1E,KAAKd,OAC3BoF,EAASC,WAAW+H,cACnB2B,EAAqBK,SAAShK,EAASC,WAAW+H,gBAItD0B,IACFE,EAASA,EAAOzD,OACbnG,GAECA,EAASI,YAAc1E,KAAKd,OAAS8O,EAAc1J,KAIlD4J,yCAIX,SAAkB7D,GAChBqE,EAAAC,EArFEjB,EAqFFkB,WAAA,UAAA5O,MAAA8C,KAAA9C,KAAcqK,GAEVA,EAAaC,IAAI,UAAYtK,KAAK6O,UACpC7O,KAAK8O,MAAQ9O,KAAK+E,0CAItB,WACE,MAAMmJ,EAASlO,KAAK+O,WAClB/O,KAAK8O,MACL9O,KAAK8N,eACL9N,KAAK+N,eACL/N,KAAKgO,aACLhO,KAAKiO,sBAGP,OAAOvP;;;;iBAIMwP;iBACAlO,KAAKgP;4BACMhP,KAAKiP;oBAvIb,CAClBC,EACAC,EACAC,KAEKF,EAAKG,oBACRH,EAAKlL,UAAa,qbAiBpBkL,EAAKI,cAAc,eAAgBhL,SAAW8K,EAAMG,KACpDL,EAAKI,cAAc,SAAUE,YAAcpL,YAAiBgL,EAAMG,MAClEL,EAAKI,cAAc,eAAgBE,YAAcJ,EAAMG,KAAK7K;0BAgHpC1E,KAAKyP;yBACNzP,KAAK0P;;;uBAGP1P,KAAK2P;wBACMxO,IAAfnB,KAAK4P,OAAuB5P,KAAK8O,MACtC9O,KAAK8O,MAAM9J,SAAS,6CACpBhF,KAAK4P;mBACA5P,KAAKgP;sBACFhP,KAAK6P;;;;;;;YAOf7P,KAAKd,MACHR;;+BAEiBsB,KAAK+E,KAAMC,SACtB;;;;2BAKOhF,KAAK8P;;;;;gBAMlB;YACF5B,EAAO1L,OAAS,EACd9D;;+BAEiBsB,KAAK+E,KAAMC,SACtB;;;0BAIMhF,KAAK6O,QAAU,eAAiB;;;;gBAK5C;;;+CAMZ,SAAoBkB,GAClBA,EAAGC,kBACHhQ,KAAKiQ,UAAU,qCAGjB,WACE,OAAOjQ,KAAKd,OAAS,+CAGvB,SAAuB6Q,GACrB/P,KAAK6O,QAAUkB,EAAGG,OAAOhR,iDAG3B,SAAsB6Q,GACpB,MAAMI,EAAWJ,EAAGG,OAAOhR,MACvBiR,IAAanQ,KAAKgP,QACpBhP,KAAKiQ,UAAUE,0CAInB,SAAkBjR,GAChBc,KAAKd,MAAQA,EACbkR,WAAW,KACTC,YAAUrQ,KAAM,gBAAiB,CAAEd,UACnCmR,YAAUrQ,KAAM,WACf,8CAGL,WACE,OAAOyL;;;;;;;;;;WA7LkBC,KA2M7BhD,eAAec,OAAO,mBAAoBkE,qCC9P1C,IAAI4C,EAAQ,GACRC,EAAQ,2EAIRC,EAAO,UACPC,EAAU,gBACVC,EAAO,aAOX,SAASC,EAAQC,EAAKC,GAEpB,IADA,IAAIC,EAAS,GACJvO,EAAI,EAAGwO,EAAMH,EAAIpO,OAAQD,EAAIwO,EAAKxO,IACzCuO,EAAOE,KAAKJ,EAAIrO,GAAGiL,OAAO,EAAGqD,IAE/B,OAAOC,EAGT,SAASG,EAAYC,GACnB,OAAO,SAAUhO,EAAGiO,EAAGC,GACrB,IAAIC,EAAQD,EAAKF,GAASzD,QAAQ0D,EAAEG,OAAO,GAAGC,cAAgBJ,EAAE3D,OAAO,GAAGgE,gBACrEH,IACHnO,EAAEuO,MAAQJ,IAKhB,SAASK,EAAIC,EAAKZ,GAGhB,IAFAY,EAAM1S,OAAO0S,GACbZ,EAAMA,GAAO,EACNY,EAAInP,OAASuO,GAClBY,EAAM,IAAMA,EAEd,OAAOA,EAGT,IAAIC,EAAW,CAAC,SAAU,SAAU,UAAW,YAAa,WAAY,SAAU,YAC9EC,EAAa,CAAC,UAAW,WAAY,QAAS,QAAS,MAAO,OAAQ,OAAQ,SAAU,YAAa,UAAW,WAAY,YAC5HC,EAAkBnB,EAAQkB,EAAY,GACtCE,EAAgBpB,EAAQiB,EAAU,GACtCtB,EAAMc,KAAO,CACXW,cAAeA,EACfH,SAAUA,EACVE,gBAAiBA,EACjBD,WAAYA,EACZG,KAAM,CAAC,KAAM,MACbC,KAAM,SAAcC,GAClB,OAAOA,EAAI,CAAC,KAAM,KAAM,KAAM,MAAMA,EAAI,GAAK,EAAI,GAAKA,EAAIA,EAAI,IAAO,IAAMA,EAAI,MAInF,IAAIC,EAAc,CAChBD,EAAG,SAASE,GACV,OAAOA,EAAQC,WAEjBC,GAAI,SAASF,GACX,OAAOV,EAAIU,EAAQC,YAErBE,GAAI,SAASH,EAAShB,GACpB,OAAOA,EAAKa,KAAKG,EAAQC,YAE3BnP,EAAG,SAASkP,GACV,OAAOA,EAAQI,UAEjBC,GAAI,SAASL,GACX,OAAOV,EAAIU,EAAQI,WAErBE,IAAK,SAASN,EAAShB,GACrB,OAAOA,EAAKW,cAAcK,EAAQI,WAEpCG,KAAM,SAASP,EAAShB,GACtB,OAAOA,EAAKQ,SAASQ,EAAQI,WAE/BI,EAAG,SAASR,GACV,OAAOA,EAAQS,WAAa,GAE9BC,GAAI,SAASV,GACX,OAAOV,EAAIU,EAAQS,WAAa,IAElCE,IAAK,SAASX,EAAShB,GACrB,OAAOA,EAAKU,gBAAgBM,EAAQS,aAEtCG,KAAM,SAASZ,EAAShB,GACtB,OAAOA,EAAKS,WAAWO,EAAQS,aAEjCI,GAAI,SAASb,GACX,OAAOV,EAAIzS,OAAOmT,EAAQc,eAAgB,GAAG1F,OAAO,IAEtD2F,KAAM,SAASf,GACb,OAAOV,EAAIU,EAAQc,cAAe,IAEpCE,EAAG,SAAShB,GACV,OAAOA,EAAQiB,WAAa,IAAM,IAEpCC,GAAI,SAASlB,GACX,OAAOV,EAAIU,EAAQiB,WAAa,IAAM,KAExCE,EAAG,SAASnB,GACV,OAAOA,EAAQiB,YAEjBG,GAAI,SAASpB,GACX,OAAOV,EAAIU,EAAQiB,aAErBI,EAAG,SAASrB,GACV,OAAOA,EAAQsB,cAEjBC,GAAI,SAASvB,GACX,OAAOV,EAAIU,EAAQsB,eAErBE,EAAG,SAASxB,GACV,OAAOA,EAAQyB,cAEjBC,GAAI,SAAS1B,GACX,OAAOV,EAAIU,EAAQyB,eAErBE,EAAG,SAAS3B,GACV,OAAOtF,KAAKC,MAAMqF,EAAQ4B,kBAAoB,MAEhDC,GAAI,SAAS7B,GACX,OAAOV,EAAI5E,KAAKC,MAAMqF,EAAQ4B,kBAAoB,IAAK,IAEzDE,IAAK,SAAS9B,GACZ,OAAOV,EAAIU,EAAQ4B,kBAAmB,IAExCG,EAAG,SAAS/B,EAAShB,GACnB,OAAOgB,EAAQiB,WAAa,GAAKjC,EAAKY,KAAK,GAAKZ,EAAKY,KAAK,IAE5DoC,EAAG,SAAShC,EAAShB,GACnB,OAAOgB,EAAQiB,WAAa,GAAKjC,EAAKY,KAAK,GAAGT,cAAgBH,EAAKY,KAAK,GAAGT,eAE7E8C,GAAI,SAASjC,GACX,IAAIkC,EAAIlC,EAAQmC,oBAChB,OAAQD,EAAI,EAAI,IAAM,KAAO5C,EAAmC,IAA/B5E,KAAK0H,MAAM1H,KAAK2H,IAAIH,GAAK,IAAYxH,KAAK2H,IAAIH,GAAK,GAAI,KAIxFI,EAAa,CACfxC,EAAG,CA3IW,UA2IC,SAAUhP,EAAGiO,GAC1BjO,EAAEyR,IAAMxD,IAEVoB,GAAI,CA9IU,UA8IG/B,EAAM,SAAUtN,EAAGiO,GAClCjO,EAAEyR,IAAMC,SAASzD,EAAG,MAEtByB,EAAG,CAjJW,UAiJC,SAAU1P,EAAGiO,GAC1BjO,EAAEuO,MAAQN,EAAI,IAEhB8B,GAAI,CApJU,UAoJE,SAAU/P,EAAGiO,GAC3B,IAAqB0D,IAAS,IAArB,IAAIC,MAAyB5B,eAAe1F,OAAO,EAAG,GAC/DtK,EAAE6R,KAAO,IAAM5D,EAAI,GAAK0D,EAAO,EAAIA,GAAQ1D,IAE7CiC,EAAG,CAxJW,UAwJC,SAAUlQ,EAAGiO,GAC1BjO,EAAE8R,KAAO7D,IAEXsC,EAAG,CA3JW,UA2JC,SAAUvQ,EAAGiO,GAC1BjO,EAAE+R,OAAS9D,IAEbyC,EAAG,CA9JW,UA8JC,SAAU1Q,EAAGiO,GAC1BjO,EAAEgS,OAAS/D,IAEbgC,KAAM,CA/JS,SA+JI,SAAUjQ,EAAGiO,GAC9BjO,EAAE6R,KAAO5D,IAEX4C,EAAG,CAAC,MAAO,SAAU7Q,EAAGiO,GACtBjO,EAAEiS,YAAkB,IAAJhE,IAElB8C,GAAI,CAAC,SAAU,SAAU/Q,EAAGiO,GAC1BjO,EAAEiS,YAAkB,GAAJhE,IAElB+C,IAAK,CAzKW,SAyKG,SAAUhR,EAAGiO,GAC9BjO,EAAEiS,YAAchE,IAElBjO,EAAG,CA7KW,UA6KCwN,GACfgC,IAAK,CAAClC,EAAME,GACZqC,IAAK,CAACvC,EAAMS,EAAY,oBACxB+B,KAAM,CAACxC,EAAMS,EAAY,eACzBkD,EAAG,CAAC3D,EAAM,SAAUtN,EAAGiO,EAAGC,GACxB,IAAIO,EAAMR,EAAEK,cACRG,IAAQP,EAAKY,KAAK,GACpB9O,EAAEkS,MAAO,EACAzD,IAAQP,EAAKY,KAAK,KAC3B9O,EAAEkS,MAAO,KAGbf,GAAI,CAAC,2CAA4C,SAAUnR,EAAGiO,GAC5D,IAA6CkE,EAAzCC,GAASnE,EAAI,IAAIoE,MAAM,iBAEvBD,IACFD,EAAuB,GAAXC,EAAM,GAAWV,SAASU,EAAM,GAAI,IAChDpS,EAAEsS,eAA8B,MAAbF,EAAM,GAAaD,GAAWA,MAIvDX,EAAWjC,GAAKiC,EAAWxR,EAC3BwR,EAAW/B,KAAO+B,EAAWhC,IAC7BgC,EAAWpC,GAAKoC,EAAWxC,EAC3BwC,EAAWf,GAAKe,EAAWjB,EAC3BiB,EAAWpB,GAAKoB,EAAWnB,EAAImB,EAAWlB,GAAKkB,EAAWtB,EAC1DsB,EAAW5B,GAAK4B,EAAW9B,EAC3B8B,EAAWZ,GAAKY,EAAWd,EAC3Bc,EAAWN,EAAIM,EAAWP,EAI1B7D,EAAMmF,MAAQ,CACZC,QAAS,2BACTC,UAAW,SACXC,WAAY,cACZC,SAAU,eACVC,SAAU,qBACVC,UAAW,QACXC,WAAY,WACZC,SAAU,gBASZ3F,EAAM4F,OAAS,SAAU9D,EAAS+D,EAAMC,GACtC,IAAIhF,EAAOgF,GAAgB9F,EAAMc,KAMjC,GAJuB,iBAAZgB,IACTA,EAAU,IAAI0C,KAAK1C,IAG2B,kBAA5C5S,OAAOoP,UAAUyH,SAASvT,KAAKsP,IAAgCxF,MAAMwF,EAAQkE,WAC/E,MAAM,IAAIC,MAAM,gCAGlBJ,EAAO7F,EAAMmF,MAAMU,IAASA,GAAQ7F,EAAMmF,MAAN,QAEpC,IAAIe,EAAW,GAYf,OAJAL,GALAA,EAAOA,EAAKxR,QAAQ8L,EAAS,SAASgG,EAAIC,GAExC,OADAF,EAASxF,KAAK0F,GACP,SAGG/R,QAAQ4L,EAAO,SAAUkG,GACnC,OAAOA,KAAMtE,EAAcA,EAAYsE,GAAIrE,EAAShB,GAAQqF,EAAGE,MAAM,EAAGF,EAAGjU,OAAS,MAG1EmC,QAAQ,OAAQ,WAC1B,OAAO6R,EAASI,WAWpBtG,EAAMuG,MAAQ,SAAUC,EAASZ,EAAQE,GACvC,IAAIhF,EAAOgF,GAAgB9F,EAAMc,KAEjC,GAAsB,iBAAX8E,EACT,MAAM,IAAIK,MAAM,iCAOlB,GAJAL,EAAS5F,EAAMmF,MAAMS,IAAWA,EAI5BY,EAAQtU,OAAS,IACnB,OAAO,KAGT,IAAIuU,EAAW,GACXC,EAAY,GACZR,EAAW,GACfN,EAASA,EAAOvR,QAAQ8L,EAAS,SAASgG,EAAIC,GAE5C,OADAF,EAASxF,KAAK0F,GACP,QAET,IAjRmBO,EAiRfC,GAjReD,EAiRSf,EAhRrBe,EAAItS,QAAS,oBAAqB,SAgRLA,QAAQ4L,EAAO,SAAUkG,GAC3D,GAAI/B,EAAW+B,GAAK,CAClB,IAAIlW,EAAOmU,EAAW+B,GAEtB,OADAO,EAAUhG,KAAKzQ,EAAK,IACb,IAAMA,EAAK,GAAK,IAGzB,OAAOkW,IAETS,EAAYA,EAAUvS,QAAQ,OAAQ,WACpC,OAAO6R,EAASI,UAElB,IAAIO,EAAUL,EAAQvB,MAAM,IAAItU,OAAOiW,EAAW,MAClD,IAAKC,EACH,OAAO,KAGT,IAAK,IAAI5U,EAAI,EAAGA,EAAI4U,EAAQ3U,OAAQD,IAClCyU,EAAUzU,EAAI,GAAGwU,EAAUI,EAAQ5U,GAAI6O,GAGzC,IAOIgG,EAPAC,EAAQ,IAAIvC,KAgBhB,OAfsB,IAAlBiC,EAAS3B,MAAkC,MAAjB2B,EAAS/B,MAAmC,KAAlB+B,EAAS/B,KAC/D+B,EAAS/B,MAAQ+B,EAAS/B,KAAO,IACN,IAAlB+B,EAAS3B,MAAqC,KAAlB2B,EAAS/B,OAC9C+B,EAAS/B,KAAO,GAIa,MAA3B+B,EAASvB,gBACXuB,EAAS9B,SAAW8B,EAAS9B,QAAU,IAAM8B,EAASvB,eACtD4B,EAAO,IAAItC,KAAKA,KAAKwC,IAAIP,EAAShC,MAAQsC,EAAMnE,cAAe6D,EAAStF,OAAS,EAAGsF,EAASpC,KAAO,EAClGoC,EAAS/B,MAAQ,EAAG+B,EAAS9B,QAAU,EAAG8B,EAAS7B,QAAU,EAAG6B,EAAS5B,aAAe,KAE1FiC,EAAO,IAAItC,KAAKiC,EAAShC,MAAQsC,EAAMnE,cAAe6D,EAAStF,OAAS,EAAGsF,EAASpC,KAAO,EACzFoC,EAAS/B,MAAQ,EAAG+B,EAAS9B,QAAU,EAAG8B,EAAS7B,QAAU,EAAG6B,EAAS5B,aAAe,GAErFiC,GAGM9G,wCCvUfpS,EAAA,GAAAA,EAAA,QAAAqZ,EAAArZ,EAAA,GAAAsZ,EAAAtZ,EAAA,GAAAwL,EAAAxL,EAAA,GAAAuZ,EAAAvZ,EAAA,KAsEAM,YAAQ,CACNC,UAAWC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;EA+EXC,GAAI,oBACJC,UAAW,CAAC8Y,KAEZ5Y,WAAY,CAKV6Y,mBAAoB,CAAC3Y,KAAMM,QAASJ,OAAO,EAAO0Y,oBAAoB,IAGxEnY,UAAW,CAAC,+CAOZoY,aACE,OAAOxX,YAAIL,KAAK8X,EAAEC,YAAYC,sBAAsB,IAGtDC,oBAAqB,WACnB,IAAIJ,EAAS7X,KAAK6X,OAClB,GAAK7X,KAAKkY,YAAeL,EAAzB,CAKA7X,KAAK8X,EAAEK,QAAQC,UAAUC,OAAO,gBAEhCR,EAAOS,aAAetY,KAAK2X,mBACvB3X,KAAK8X,EAAES,iBACPvY,KAAKwY,cAAcC,gBAGvB,IAAIC,EAAeb,EAAOc,aAErB3Y,KAAK2X,oBAQRE,EAAOrM,MAAMoN,KAAO,GACpBf,EAAOrM,MAAMqN,MAAQ,IARrBC,sBAAsB,WACpB,IAAIC,EAAO/Y,KAAKgZ,wBACZC,EAAcpV,SAAS4U,gBAAgBS,YAAcH,EAAKF,MAC9DhB,EAAOrM,MAAMoN,KAAOG,EAAKH,KAAO,KAChCf,EAAOrM,MAAMqN,MAAQI,EAAc,MACnCxY,KAAKT,OAMT,IAAImZ,EAAiBnZ,KAAK8X,EAAES,iBAAiB/M,MACzCqM,EAAOuB,QAAUvB,EAAOwB,WAAarZ,KAAK2X,oBAI5CwB,EAAeG,UAAYZ,EAAe,KAC1CS,EAAeI,WAAa,KAE5BJ,EAAeI,WAAab,EAAe,KAC3CS,EAAeG,UAAY,0CCjNjC,IAAAE,EAAAtb,EAAA,KAYeub,IATf,WACE,KACE,IAAI3E,MAAO4E,mBAAmB,KAC9B,MAAOpQ,GACP,MAAkB,eAAXA,EAAEqQ,KAEX,OAAO,EAGMF,GACX,CAACrH,EAAewH,IACdxH,EAAQsH,mBAAmBE,EAAS,CAClC5E,KAAM,UACNC,OAAQ,YAEX7C,GAAkB9B,IAAM4F,OAAO9D,EAAS,+CClB7C,IAAAoH,EAAAtb,EAAA,KAYe2b,IATf,WACE,KACE,IAAI/E,MAAOgF,mBAAmB,KAC9B,MAAOxQ,GACP,MAAkB,eAAXA,EAAEqQ,KAEX,OAAO,EAGME,GACX,CAACzH,EAAewH,IACdxH,EAAQ0H,mBAAmBF,EAAS,CAClC7E,KAAM,UACNtD,MAAO,OACPkD,IAAK,YAERvC,GAAkB9B,IAAM4F,OAAO9D,EAAS,kEChB7C,MAAMxO,EAAsBlF;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;eA0C5BmF,SAASI,KAAKC,YAAYN,EAAoBO,+BCxB9C,MAAM4V,UAAiCC,YAAoBC,MACzDtb,gBACE,MAAO,8BAIX+J,eAAec,OAAOuQ,EAAyBpb,GAAIob,+BCtBnD,MAAMnW,EAAsBlF;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;eA4I5BmF,SAASI,KAAKC,YAAYN,EAAoBO,sCCvI9C,MA+Ba+V,EAAoBpV,IAAc,cA/BzBA,KAAc,cAAkCA,EACpEhG,wBACE,IAAIA,EAAa,CAOf6E,SAAU,CACR3E,KAAM2N,OACNzN,MAAO,EACP0Y,oBAAoB,EACpBuC,SAAU,qBASd,OALIC,OAAOC,WAETvb,EAAU,SAAeA,EAAW6E,UAG/B7E,KAS0Ewb,CAAcxV,IACjGhG,wBACE,MAAO,CAIL6Q,UAAW,CACT3Q,KAAMM,SAMRib,kBAAmB,CACjBvb,KAAM2N,QAMRkD,SAAU,CACR7Q,KAAMM,QACN6a,SAAU,mBACVvC,oBAAoB,GAGtB4C,gBAAiB,CACfxb,KAAMM,UAKZmb,QACEza,KAAK0a,iBAAiB,UAAWpR,IAC3BA,EAAEqR,eAAe,KAAO3a,KAC1BA,KAAK4a,OAAOtR,IAC8C,IAAjDA,EAAEqR,eAAelN,QAAQzN,KAAK6a,eAAyB7a,KAAK6P,UACrE7P,KAAK8a,aAAY,KAGrB9a,KAAK0a,iBAAiB,WAAYpR,GAAKtJ,KAAK8a,aAAY,IAMxD9R,MAAMyR,QAIN,MAAMM,EAAsBzR,IACrBA,EAAE0R,UACL1R,EAAE2R,OAAOC,cAAc,IAAIC,YAAY7R,EAAEtK,KAAM,CAC7Coc,SAAS,EACTJ,UAAU,EACVK,YAAY,MAIlBrb,KAAKsb,WAAWZ,iBAAiB,UAAWK,GAC5C/a,KAAKsb,WAAWZ,iBAAiB,WAAYK,GAE7C/a,KAAK0a,iBAAiB,UAAWpR,IAC/B,IAAKA,EAAEiS,kBAAkC,IAAdjS,EAAE3H,QAC3B,GAAI2H,EAAEkS,SAEJxb,KAAKwa,iBAAkB,EACvBiB,YAAY7M,UAAU8M,MAAMC,MAAM3b,MAClCA,KAAK8a,aAAY,GAEjB1K,WAAW,IAAMpQ,KAAKwa,iBAAkB,EAAO,OAC1C,CAKL,MAAMoB,EAAUxB,OAAOyB,UAAUC,UAAUvG,MAAM,uBACjD,GAAIqG,GACCG,WAAWH,EAAQ,KAAO,IAC1BG,WAAWH,EAAQ,IAAM,IACzB5b,KAAKgc,YACLhc,KAAKic,YAAa,CACrB,MAAMC,EAAarY,SAASC,cAAc,SAC1CoY,EAAW1Q,MAAM2Q,SAAW,WAC5BD,EAAW1Q,MAAM4Q,QAAU,EAC3BF,EAAWG,SAAWrc,KAAKqc,SAE3Brc,KAAKgc,WAAWM,aAAaJ,EAAYlc,KAAKic,aAC9CC,EAAWR,QACXQ,EAAWxB,iBAAiB,WAAY,IAAM1a,KAAKgc,WAAWO,YAAYL,SAO9Elc,KAAK2P,WAAc3P,KAAKwc,SAAYxc,KAAK6P,UAC3CuK,OAAOtB,sBAAsB,KAC3B9Y,KAAK4a,SACL5a,KAAK8a,aAAY,GACjB9a,KAAK+D,aAAa,aAAc,MAIpC/D,KAAKyc,sBAAwBzc,KAAK0c,qBAAqBjc,KAAKT,MAC5DA,KAAK2c,oBAAsB3c,KAAK4c,mBAAmBnc,KAAKT,MAM1D6c,oBACE7T,MAAM6T,oBAENhZ,SAASiZ,KAAKpC,iBAAiB,UAAW1a,KAAKyc,uBAAuB,GACtE5Y,SAASiZ,KAAKpC,iBAAiB,QAAS1a,KAAK2c,qBAAqB,GAMpEI,uBACE/T,MAAM+T,uBAENlZ,SAASiZ,KAAKE,oBAAoB,UAAWhd,KAAKyc,uBAAuB,GACzE5Y,SAASiZ,KAAKE,oBAAoB,QAAShd,KAAK2c,qBAAqB,GAIjE3c,KAAKid,aAAa,YACpBjd,KAAK8a,aAAY,GAIrBA,YAAY0B,GACNA,EACFxc,KAAK+D,aAAa,UAAW,IAE7B/D,KAAKkd,gBAAgB,WAKnBV,GAAWxc,KAAKmd,YAClBnd,KAAK+D,aAAa,aAAc,IAEhC/D,KAAKkd,gBAAgB,cAIzBR,qBAAqBpT,GACnBtJ,KAAKmd,YAA4B,IAAd7T,EAAE3H,QAGvBib,qBACE5c,KAAKmd,aAAc,EAOrBtC,mBAEE,OADAT,OAAOjS,QAAQC,yDAAyDpI,KAAKod,cACtEpd,KAGT4a,OAAOtR,GACDtJ,KAAKwa,kBAITxa,KAAK6a,aAAaa,QAClB1b,KAAK8a,aAAY,IAOnBY,QACO1b,KAAK6a,eAAgB7a,KAAK6P,WAI/B7P,KAAK6a,aAAaa,QAClB1b,KAAK8a,aAAY,IAQnBuC,OACErd,KAAK6a,aAAawC,OAClBrd,KAAK8a,aAAY,GAGnBwC,iBAAiBzN,GACf7P,KAAK6a,aAAahL,SAAWA,EACzBA,GACF7P,KAAKqd,OACLrd,KAAKua,kBAAoBva,KAAK2D,SAC9B3D,KAAK2D,UAAY,EACjB3D,KAAK+D,aAAa,gBAAiB,eAEG,IAA3B/D,KAAKua,oBACdva,KAAK2D,SAAW3D,KAAKua,mBAEvBva,KAAKkd,gBAAgB,kBAIzBK,iBAAiB5Z,QACExC,IAAbwC,IACF3D,KAAK6a,aAAawB,SAAW1Y,GAG3B3D,KAAK6P,UAAY7P,KAAK2D,YAED,IAAnB3D,KAAK2D,WACP3D,KAAKua,kBAAoBva,KAAK2D,UAEhC3D,KAAK2D,SAAWA,OAAWxC,GAGzBiZ,OAAOC,UACTra,KAAKwd,cAAc,CAACnB,SAAU1Y,EAAUA,SAAUA,IAOtD8Z,QACOzd,KAAK6P,UACR7G,MAAMyU,uCCtRZ,MAAMC,EACJ,uEAEIC,EAAcvD,OAAOwD,QAAUxD,OAAOwD,OAAOC,MAAQzD,OAAOwD,OAAOC,KAAKC,QAqD9E,SAASC,EAAgBC,EAAUjV,GACjC,GAAwB,mBAAbiV,EACT,OAGF,MAAMzI,EAAQmI,EAAqBO,KAAKD,EAAS3H,YACjD,GAAId,EACF,IAEEyI,EAAW,IAAI/Y,SAASsQ,EAAM,IAC9B,MAAOjM,GAEPnB,QAAQ+V,IAAI,6DAA8D5U,GAI9E,OAAO0U,EAASjV,GAKlBqR,OAAM,OAAaA,OAAM,QAAc,GAchC,MAAM+D,EAAuB,SAASH,EAAUjV,GACrD,GAAIqR,OAAOwD,OAAOQ,gBAChB,OAAOL,EAAgBC,EAAUjV,IC5ErC,SAASsV,UDgF6Bld,IAAlCiZ,OAAOwD,OAAOQ,kBAChBhE,OAAOwD,OAAOQ,gBAnFhB,WACE,IACE,QAoBKE,aAAaC,QAAQ,iCAIpB,CAAC,YAAY,aAAa9Q,QAAQ2M,OAAOoE,SAASC,WAAa,IAhBjEd,GAmBR,WACE,GAAIA,EAAa,CACf,MAAMe,EAAqBlf,OAAO4O,KAAKuP,GACpCnP,IAAIC,GAAOkP,EAAYlP,IACvBhE,OAAOkU,GAAUA,EAAOC,gBAC3B,GAAIF,EAAmBlc,OAAS,EAC9B,OAAO,EAGX,OAAO,EA3BKqc,IAdLd,EANP,WAIE,OAAO,KAoBP,MAAOzU,GAEP,OAAO,GAkEuBwV,ICiZ3B,MAAMC,EAAkB,WAE3B,OAAOZ,EAAqBE,IC/dhC,IAAIW,EAjBC5E,OAAOwD,SACVxD,OAAM,OAAa,IAMrBA,OAAM,OAAW6E,cAAgB7E,OAAOwD,OAAOqB,eAAiB,GAGhE7E,OAAM,OAAW8E,wBAA0B9E,OAAOwD,OAAOsB,yBAA2B,GACpF9E,OAAM,OAAW8E,wBAAwB,2BAA6B,WAChEH,GACFA,KAMJ,MAAMI,EAAa,IAAIC,IAKVC,EAAeva,IAAc,cAAiCA,EAEzEgE,kBACEE,MAAMsW,WAEN,MAAM3gB,GAACA,GAAMqB,KAGTrB,IAAOwgB,EAAW7U,IAAI3L,KACxByb,OAAOwD,OAAOqB,cAAcjO,KAAKhR,MACjCmf,EAAWI,IAAI5gB,GAEXyb,OAAOwD,OAAOsB,0BAChBF,EAAWQ,IAAUC,SAAST,EAC5BU,IAAY,KACVtF,OAAOwD,OAAOsB,wBAAwB,+BAG1CS,YAAiBX,KAIvBY,cACE5W,QACyB,OAArBnF,SAASgc,SACX1X,QAAQC,KACN,+HCDR,MAAM0X,UACJT,EACEnF,EACE6F,YACEC,YAAsBC,SAC5BrW,sBACE,OAAOlL;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;EAsETC,gBACE,MAAO,gBAGTuhB,qBACE,MAAO,QAGTzF,QACEzR,MAAMyR,QAMNza,KAAK+D,aAAa,OAAQ,UAC1B/D,KAAK8X,EAAEqI,OAAOpc,aAAa,OAAQ,gBAEnC/D,KAAKogB,sBAMPrD,uBACE/T,MAAM+T,uBAIF/c,KAAKid,aAAa,WACpBjd,KAAKkd,gBAAgB,UAIzBkD,sBACEC,YAAYrgB,KAAM,OAAQ,KAAOA,KAAK6P,UAAY7P,KAAK+D,aAAa,SAAU,KAC9Esc,YAAYrgB,KAAM,KAAM,IAAMA,KAAKkd,gBAAgB,WACnDld,KAAK0a,iBAAiB,UAAWpR,IAAMtJ,KAAK6P,UAAY,CAAC,GAAI,IAAIpC,QAAQnE,EAAE3H,UAAY,GAAK3B,KAAK+D,aAAa,SAAU,KACxH/D,KAAK0a,iBAAiB,QAAS,IAAM1a,KAAKkd,gBAAgB,WAC1Dld,KAAK0a,iBAAiB,OAAQ,IAAM1a,KAAKkd,gBAAgB,WAM3DrC,mBACE,OAAO7a,KAAK8X,EAAEqI,QAIlBzX,eAAec,OAAOsW,EAAcnhB,GAAImhB,GC7KxC,MAAMlc,EAAsBlF;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;eA0K5BmF,SAASI,KAAKC,YAAYN,EAAoBO,mDC5KvC,MAAMmc,EAAmB,MAO9BxX,yBAAyBsO,GAEvB,IAAImJ,EAAYnJ,EAAK5E,SAIH,IAAd+N,IACFA,EAAY,GAId,IAAIC,EAAsB,EAAID,EAC1BE,EAAkB,IAAI3L,KAAKsC,EAAKd,UAAkC,GAAtBkK,EAA2B,KAAO,KAE9EE,EAAiB,IAAI5L,KAAK,EAAG,GACjC4L,EAAeC,YAAYF,EAAgBvN,eAE3C,IAAI0N,EAAWH,EAAgBnK,UAAYoK,EAAepK,UAItDuK,EAA0B/T,KAAKC,MAAM6T,EAAQ,OAEjD,OAAO9T,KAAK0H,MAAOqM,EAA2B,EAAI,GAUpD/X,mBAAmBgY,EAAOC,GACxB,OAAOD,aAAiBhM,MAAQiM,aAAiBjM,MAC7CgM,EAAM5N,gBAAkB6N,EAAM7N,eAC9B4N,EAAMjO,aAAekO,EAAMlO,YAC3BiO,EAAMzO,YAAc0O,EAAM1O,UAWhCvJ,oBAAoBsO,EAAM4J,EAAKC,GAC7B,QAASD,GAAO5J,GAAQ4J,MAAUC,GAAO7J,GAAQ6J,GAUnDnY,uBAAuBsO,EAAM8J,GAC3B,OAAOA,EAAMzW,OAAO2M,QAAiBjW,IAATiW,GACzB+J,OAAO,CAACC,EAAaC,KACpB,OAAKA,EAIAD,EAIetU,KAAK2H,IAAI2C,EAAKd,UAAY+K,EAAU/K,WAClCxJ,KAAK2H,IAAI2M,EAAY9K,UAAYc,EAAKd,WACnB+K,EAAYD,EAL5CC,EAJAD,IAiBftY,yBAAyBsO,GACvB,MAAO,CACLzC,IAAKyC,EAAK/E,UACVZ,MAAO2F,EAAKvE,WACZkC,KAAMqC,EAAKlE,iBChFjB,MAAMoO,UAA6BvB,YAAcC,YAAsBC,OACrErW,sBACE,OAAOlL;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;EAqETC,gBACE,MAAO,wBAGTG,wBACE,MAAO,CAKL2S,MAAO,CACLzS,KAAM8V,KACN5V,MAAO,IAAI4V,MAMbyM,aAAc,CACZviB,KAAM8V,KACNhO,QAAQ,GAMV0a,YAAa1M,KAEb2M,gBAAiB,CACfziB,KAAMM,QACNJ,OAAO,GAGTkS,KAAM,CACJpS,KAAMQ,QAMRkiB,WAAYpiB,QAEZqiB,YAAariB,QAKbsiB,QAAS,CACP5iB,KAAM8V,KACN5V,MAAO,MAMT2iB,QAAS,CACP7iB,KAAM8V,KACN5V,MAAO,MAGT4iB,MAAO,CACL9iB,KAAM4O,MACNzO,SAAU,0DAGZ0Q,SAAU,CACR7Q,KAAMM,QACNsY,oBAAoB,EACpBzY,SAAU,yCAKhBM,uBACE,MAAO,CACL,iEAIJsiB,YAAYjB,EAAOC,GACjB,OAAOT,EAAiByB,YAAYjB,EAAOC,GAG7CiB,aAAa5K,EAAM4J,EAAKC,GACtB,OAAOX,EAAiB0B,aAAa5K,EAAM4J,EAAKC,GAIlDgB,YAAYxQ,EAAOmQ,EAASC,GAE1B,IAAIK,EAAY,IAAIpN,KAAK,EAAG,GAC5BoN,EAAUvB,YAAYlP,EAAMyB,eAC5BgP,EAAUC,SAAS1Q,EAAMoB,YACzBqP,EAAUE,QAAQ,GAGlB,IAAIC,EAAW,IAAIvN,KAAK,EAAG,GAK3B,OAJAuN,EAAS1B,YAAYlP,EAAMyB,eAC3BmP,EAASF,SAAS1Q,EAAMoB,WAAa,GACrCwP,EAASD,QAAQ,KAEZR,GAAWC,GACXD,EAAQ/O,aAAegP,EAAQhP,YAC/B+O,EAAQ/O,aAAepB,EAAMoB,YAC7BgP,EAAQxP,UAAYuP,EAAQvP,WAAa,MAItCrS,KAAKgiB,aAAaE,EAAWN,EAASC,KACxC7hB,KAAKgiB,aAAaK,EAAUT,EAASC,IAG7CS,UAAU7Q,EAAOI,GACf,QAAc1Q,IAAVsQ,QAAsCtQ,IAAf0Q,EAG3B,OAAO7R,KAAKoR,KAAKmR,YAAY1Q,EAAWJ,EAAMoB,YAAapB,EAAMyB,eAGnEsP,yBACExiB,KAAK2hB,aAAc,EACnBvR,WAAW,IAAMpQ,KAAK2hB,aAAc,EAAM,KAG5Cc,SAASrL,EAAMsL,GACbtL,EAAKgL,QAAQhL,EAAK/E,UAAYqQ,GAGhCC,qBAAqBC,EAAcC,GACjC,QAAqB1hB,IAAjByhB,QAAiDzhB,IAAnB0hB,EAIlC,OAAOD,EAAajM,MAAMkM,GAAgBC,OAAOF,EAAajM,MAAM,EAAGkM,IAGzEE,iBAAiBH,EAAcI,EAAmBvB,EAAiBoB,GACjE,QAAqB1hB,IAAjByhB,QAAoDzhB,IAAtB6hB,QACZ7hB,IAApBsgB,QAAoDtgB,IAAnB0hB,EAYnC,OATAD,EAAe5iB,KAAK2iB,qBAAqBC,EAAcC,GACvDG,EAAoBhjB,KAAK2iB,qBAAqBK,EAAmBH,GACjED,EAAeA,EAAapU,IAAI,CAACmG,EAAKtD,KAC7B,CACL4R,QAAStO,EACTuO,aAAcF,EAAkB3R,MAOtC8R,SAAS/L,GACP,OAAOA,EAAOA,EAAK/E,UAAY,GAGjC+Q,wBAAwB3B,EAAiBoB,GACnCpB,GAAsC,IAAnBoB,EACrB7iB,KAAK+D,aAAa,eAAgB,IAElC/D,KAAKkd,gBAAgB,gBAIzBmG,mBAAmB5B,EAAiBoB,GAElC,OAAOpB,GAAsC,IAAnBoB,EAG5BS,SAASlM,GACP,OAAOpX,KAAK+hB,YAAY,IAAIjN,KAAQsC,GAGtCmM,SAAS9R,EAAOoR,GACd,QAAc1hB,IAAVsQ,QAA0CtQ,IAAnB0hB,EAA3B,CAIA,IAAIzL,EAAO,IAAItC,KAAK,EAAG,GAMvB,IALAsC,EAAKuJ,YAAYlP,EAAMyB,eACvBkE,EAAK+K,SAAS1Q,EAAMoB,YACpBuE,EAAKgL,QAAQ,GAGNhL,EAAK5E,WAAaqQ,GACvB7iB,KAAKyiB,SAASrL,GAAO,GAMvB,IAHA,IAAIoM,EAAO,GACPC,EAAarM,EAAKvE,WAClB6Q,EAAcjS,EAAMoB,WACjBuE,EAAKvE,aAAe6Q,GAAetM,EAAKvE,aAAe4Q,GAC5DD,EAAKxS,KAAKoG,EAAKvE,aAAe6Q,EAAc,IAAI5O,KAAKsC,EAAKd,WAAa,MAGvEtW,KAAKyiB,SAASrL,EAAM,GAEtB,OAAOoM,GAGTG,eAAevM,EAAMoM,GACnB,QAAariB,IAATiW,QAA+BjW,IAATqiB,EAW1B,OAPKpM,IAEHA,EAAOoM,EAAKrC,OAAO,CAACyC,EAAK1gB,KACf0gB,GAAO1gB,EAAIA,EAAI0gB,IAIpBtD,EAAiBuD,kBAAkBzM,GAG5C0M,gBAAgB5C,GACd,OAAOA,EACJ1S,IAAI4I,GAAQpX,KAAK2jB,eAAevM,EAAM8J,IACtCzW,OAAO,CAACsZ,EAAM1S,EAAOT,IAAQA,EAAInD,QAAQsW,KAAU1S,GAGxD2S,WAAW1a,GACJtJ,KAAK0hB,YAAe1hB,KAAK2hB,cAAerY,EAAE2R,OAAO7D,MAAS9N,EAAE2R,OAAOgC,aAAa,cACnFjd,KAAKuhB,aAAejY,EAAE2R,OAAO7D,KAC7BpX,KAAKkb,cAAc,IAAIC,YAAY,WAAY,CAACC,SAAS,EAAMJ,UAAU,MAI7EiJ,gBAAgB3a,GACdA,EAAEhH,iBAGJ4hB,SAAS9M,GACP,OAAOA,EAAO,SAAW,eAG3B+M,cAAc/M,GACZ,IAAKA,EACH,MAAO,GAGT,IAAIgN,EAAYpkB,KAAKmjB,SAAS/L,GAAQ,IACpCpX,KAAKoR,KAAKS,WAAWuF,EAAKvE,YAAc,IACxCuE,EAAKlE,cAAgB,KACrBlT,KAAKoR,KAAKiT,SAASjN,EAAK5E,UAM1B,OAJIxS,KAAKsjB,SAASlM,KAChBgN,GAAa,KAAOpkB,KAAKoR,KAAKiG,OAGzB+M,EAGTE,iBAAiBlN,EAAM4J,EAAKC,GAC1B,QAAa9f,IAATiW,QAA8BjW,IAAR6f,QAA6B7f,IAAR8f,EAG/C,OAAOjhB,KAAKgiB,aAAa5K,EAAM4J,EAAKC,GAAO,QAAU,QAIzDvY,eAAec,OAAO8X,EAAqB3iB,GAAI2iB,uBC5U/C,MAAMiD,UAAgCtE,IACpCrW,sBACE,OAAOlL;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;EAkDTC,gBACE,MAAO,2BAGTG,wBACE,MAAO,CAQL0lB,WAAY,CACVxlB,KAAM2N,OACNzN,MAAO,IAOTulB,eAAgB,CACdvlB,MAAO,KAMTwlB,cAAe,CACbxlB,MAAO,GAGTylB,SAAU/W,MAEVgX,oBAAqBtlB,QAErBulB,iBAAkBvlB,QAElBwlB,aAAcxlB,QAEdylB,OAAQ,CACN/lB,KAAMM,QACN6a,SAAU,eAKhBM,QACEzR,MAAMyR,QAENza,KAAK2kB,SAAW/W,MAAMgB,UAAU+H,MAAM7T,KAAK9C,KAAKkP,KAAK8V,iBAAiB,YAEtEhlB,KAAK8X,EAAEmN,WAAWzZ,MAAM0Z,OAA+B,EAAtBllB,KAAKykB,eAAqB,KAE3D,IAAIU,EAAMnlB,KAAKsP,cAAc,YAC7BtP,KAAKolB,eAAiBC,YAAWF,EAAKnlB,KAAM,CAC1CslB,gBAAiB,SAASC,EAAMrmB,GACjB,UAATqmB,GACFvlB,KAAK2kB,SAASa,QAAQC,IACpB,GAAGD,QAAQ1iB,KAAK2iB,EAAOC,SAAUC,IAC/BA,EAAeC,aAAaC,SAASN,GAAQrmB,SASvC2c,UAAUC,UAAUtK,cAAc/D,QAAQ,YAAc,IAEtEzN,KAAK8X,EAAEgO,SAASzJ,UAAY,GAIhC0J,WAAWhB,GACLA,IAAW/kB,KAAK8kB,eAClB9kB,KAAKgmB,cACLhmB,KAAK8kB,cAAe,GAIxBmB,cACOjmB,KAAKkmB,YAERlmB,KAAK2kB,SAASa,QAAQC,IACpB,GAAGD,QAAQ1iB,KAAK2iB,EAAOC,SACrBC,GAAkB3lB,KAAKmmB,uBAAuBR,EAAeC,gBAC9D5lB,MAEEA,KAAK2kB,SAAS,GAAGyB,YACpBpmB,KAAKqmB,SAGPrmB,KAAKkmB,WAAY,GAIrBI,iBAAiBC,GACf,IAAIlV,EAAQkV,EAAK,EAAI,EACrBvmB,KAAK2kB,SAAStT,GAAO+U,WAAapmB,KAAK2kB,SAAUtT,EAAQ,EAAI,GAAI+U,WAAapmB,KAAKwmB,eAAiBnV,GAAS,EAAI,GACjHrR,KAAK2kB,SAAStT,GAAO7F,MAAMib,UAAY,kBAAoBzmB,KAAK2kB,SAAStT,GAAO+U,WAAa,SAC7FpmB,KAAK2kB,SAAStT,GAAOqV,SAAU,EAC/B1mB,KAAK2kB,SAASgC,UAGhBC,UACE,IAAI5mB,KAAK6mB,gBAAT,CAIA,IAAIC,EAAY9mB,KAAK8X,EAAEgO,SAASgB,WAC5BA,EAAY9mB,KAAKwmB,eAAiBM,EAAkC,EAAtB9mB,KAAKykB,eAAqBzkB,KAAKwmB,iBAE/ExmB,KAAK0kB,gBAAkB1kB,KAAKmc,SAC5Bnc,KAAKqmB,UAIP,IAAIU,EAAe/mB,KAAKkP,KAAKI,cAAc,WAAW0X,UAClDC,EAAwBH,EAAY9mB,KAAK2kB,SAAS,GAAGyB,WAAapmB,KAAKknB,WAAaH,EACpFI,EAAwBL,EAAY9mB,KAAK2kB,SAAS,GAAGyB,WAAapmB,KAAKknB,WAAaH,GAEpFE,GAAyBE,KAC3BnnB,KAAKsmB,iBAAiBa,GACtBnnB,KAAKonB,iBAGFpnB,KAAK4kB,sBACR5kB,KAAKkb,cAAc,IAAIC,YAAY,gBAAiB,CAACC,SAAS,EAAOJ,UAAU,KAC/Ehb,KAAK6kB,kBAAmB,GAE1B7kB,KAAK4kB,qBAAsB,EAE3B5kB,KAAKqnB,uBAAyB7H,IAAUC,SAASzf,KAAKqnB,uBACpDC,IAAQC,MAAM,KAAM,KAClB,IAAIC,EAAexnB,KAAK8X,EAAEgO,SAAS9M,wBAC9BhZ,KAAKynB,WAAWznB,KAAK2kB,SAAS,GAAI6C,IAAkBxnB,KAAKynB,WAAWznB,KAAK2kB,SAAS,GAAI6C,KACzFxnB,KAAKmc,SAAWnc,KAAKmc,aAU7BA,aAAa9K,GACXrR,KAAK4kB,qBAAsB,EACvBvT,EAAQrR,KAAK0nB,aAAerW,EAAQrR,KAAK0nB,YAAgC,EAAlB1nB,KAAKwkB,WAC9DxkB,KAAK8X,EAAEgO,SAASgB,UAAY9mB,KAAKknB,YAAc7V,EAAQrR,KAAK0nB,aAAe1nB,KAAK2kB,SAAS,GAAGyB,YAE5FpmB,KAAK0kB,gBAAkBrT,EACvBrR,KAAKqmB,SACLrmB,KAAK6mB,iBAAkB,EACvB7mB,KAAK8X,EAAEgO,SAASgB,WAAazV,EAAQ,EAAIrR,KAAKknB,WAC9ClnB,KAAK6mB,iBAAkB,GAGrB7mB,KAAK6kB,mBAEP7kB,KAAK8X,EAAEgO,SAAS1N,UAAUmH,IAAI,iBAC9Bvf,KAAK6kB,kBAAmB,EAExBzU,WAAW,KAETpQ,KAAK8X,EAAEgO,SAAS1N,UAAUC,OAAO,kBAChC,KAQP8D,eACE,OAAQnc,KAAK8X,EAAEgO,SAASgB,UAAY9mB,KAAK2kB,SAAS,GAAGyB,YAAcpmB,KAAKknB,WAAalnB,KAAK0nB,YAG5FR,iBACE,IAAKlnB,KAAK2nB,eAAgB,CAClBvN,OAAOwN,UAAYxN,OAAOwN,SAASC,WACvC7nB,KAAK8nB,eAGP,MAAMZ,EAAa9M,OAAOwN,SACtBxN,OAAOwN,SAASG,sBAAsB/nB,KAAM,0CAC5CgoB,iBAAiBhoB,MAAMioB,iBAAiB,0CAEtCC,EAAe,sBACrBloB,KAAK8X,EAAEmN,WAAWzZ,MAAM2c,YAAYD,EAAchB,GAClD,MAAMkB,EAAeJ,iBAAiBhoB,KAAK8X,EAAEmN,YAAYgD,iBAAiBC,GAC1EloB,KAAK8X,EAAEmN,WAAWzZ,MAAM6c,eAAeH,GACvCloB,KAAK2nB,eAAiB5L,WAAWqM,GAGnC,OAAOpoB,KAAK2nB,eAGdnB,oBACE,OAAOxmB,KAAKknB,WAAalnB,KAAKwkB,WAGhC6B,SACErmB,KAAK6mB,iBAAkB,EACvB7mB,KAAK8X,EAAEgO,SAASgB,UAAY9mB,KAAKykB,eACjCzkB,KAAK2kB,SAAS,GAAGyB,WAAapmB,KAAKykB,eAAiBzkB,KAAKwmB,cACzDxmB,KAAK2kB,SAAS,GAAGyB,WAAapmB,KAAKykB,eACnCzkB,KAAK2kB,SAASa,QAAQC,IACpBA,EAAOja,MAAMib,UAAY,kBAAoBhB,EAAOW,WAAa,WAEnEpmB,KAAK2kB,SAAS,GAAG+B,QAAU1mB,KAAK2kB,SAAS,GAAG+B,SAAU,EACtD1mB,KAAKonB,eAAc,GAEnBpnB,KAAKsoB,uBAAyB9I,IAAUC,SACtCzf,KAAKsoB,uBACLhB,IAAQC,MAAM,KAAM,KAClBvnB,KAAK2kB,SAAS,GAAG+B,QAAU1mB,KAAK2kB,SAAS,GAAG+B,SAAU,EACtD1mB,KAAKonB,kBAGTpnB,KAAK6mB,iBAAkB,EAGzBb,cACE,IAAIuC,EAAYvoB,KAAKgZ,wBACrBhZ,KAAK2kB,SAASa,QAAQC,IACpB,IAAK,IAAIljB,EAAI,EAAGA,EAAIvC,KAAKwkB,WAAYjiB,IAAK,CACxC,MAAMimB,EAAc3kB,SAASC,cAAc,OAC3C0kB,EAAYhd,MAAM0Z,OAASllB,KAAKknB,WAAa,KAC7CsB,EAAY3C,SAAW,GAEvB,MACM4C,EAAW,0CADClE,EAAwBmE,cAAgBnE,EAAwBmE,cAAgB,GAAK,GAGjG/C,EAAiB9hB,SAASC,cAAc,QAC9C6hB,EAAe5hB,aAAa,OAAQ0kB,GACpC9C,EAAeC,aAAe4C,EAC9B/C,EAAOvhB,YAAYyhB,GAEnB6C,EAAYzkB,aAAa,OAAQ0kB,GACjCzoB,KAAKkE,YAAYskB,GAGjBG,cAEAvY,WAAW,KAELpQ,KAAKynB,WAAWe,EAAaD,IAC/BvoB,KAAKmmB,uBAAuBqC,IAE7B,KAEJxoB,MAEHoQ,WAAW,KACTwY,YAAgB5oB,KAAMA,KAAKimB,YAAYxlB,KAAKT,QAC3C,GAGLmmB,uBAAuBqC,GACrB,IAAIA,EAAYnZ,kBAAhB,CAIA,IAAIwZ,EAAcL,EAAY3C,SAE9B2C,EAAY3C,SAAW,IAAI7lB,KAAKolB,eAAe,IAC/CoD,EAAYtkB,YAAYskB,EAAY3C,SAAS3W,MAE7C1P,OAAO4O,KAAKya,GAAarD,QAAQD,IAC/BiD,EAAY3C,SAASiD,IAAIvD,EAAMsD,EAAYtD,OAI/C6B,cAAc2B,GACZ/oB,KAAK0nB,gBAAkB1nB,KAAK2kB,SAAS,GAAGyB,WAAapmB,KAAKykB,gBAAkBzkB,KAAKknB,YAAclnB,KAAK0kB,cAEpG,IAAI8C,EAAeuB,EAAe/oB,KAAK8X,EAAEgO,SAAS9M,6BAA0B7X,EAC5EnB,KAAK2kB,SAASa,QAAQ,CAACC,EAAQuD,KAC7B,IAAKvD,EAAOiB,QAAS,CACnB,IAAIuC,EAAajpB,KAAK0nB,YAAc1nB,KAAKwkB,WAAawE,EAEtD,GAAGxD,QAAQ1iB,KAAK2iB,EAAOC,SAAU,CAACC,EAAgBtU,KAChD,MAAMmX,EAAc7C,EAAeC,aAC9BmD,IAAgB/oB,KAAKynB,WAAWe,EAAahB,KAChDgB,EAAY3C,SAASxU,MAAQ4X,EAAa5X,KAG9CoU,EAAOiB,SAAU,IAElB1mB,MAGLynB,WAAWyB,EAASX,GAClB,IAAIxP,EAAOmQ,EAAQlQ,wBACnB,OAAOD,EAAKoQ,OAASZ,EAAUa,KAAOrQ,EAAKqQ,IAAMb,EAAUY,QAI/DzgB,eAAec,OAAO+a,EAAwB5lB,GAAI4lB,SClXlD,MAAM3gB,EAAsBC,SAASC,cAAc,YAEnDF,EAAoBI,UAAa,ooBAgCjCH,SAASI,KAAKC,YAAYN,EAAoBO,SCT9C,MAAMklB,UACJtJ,YACEuJ,YACEtJ,YAAsBC,QAC1BrW,sBACE,OAAOlL;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;EAsLTC,gBACE,MAAO,qCAGTG,wBACE,MAAO,CAILyiB,aAAc,CACZviB,KAAM8V,KACNhO,QAAQ,GAMV0a,YAAa,CACXxiB,KAAM8V,KACNhO,QAAQ,EACRqT,SAAU,uBAGZoP,kBAAmB5c,OAKnB6c,gBAAiB,CACfxqB,KAAM8V,KACNqF,SAAU,2BAGZsP,YAAa,CACXvqB,MAAO,IAAI4V,MAGb4U,mBAAoB/c,OAEpBgd,aAAcrqB,QAEdsqB,YAAa,CACXzP,SAAU,sBAGZ0P,mBAAoB,CAClB3qB,MAAO,IAGTkS,KAAM,CACJpS,KAAMQ,QAGRiiB,gBAAiB,CACfziB,KAAMM,SAGRwqB,YAAaxqB,QAEbqiB,YAAariB,QAKbsiB,QAAS9M,KAKT+M,QAAS/M,KAETiV,SAAUzqB,QAKVsQ,MAAO3Q,QAIXwb,QACEzR,MAAMyR,QACNza,KAAK+D,aAAa,WAAY,GAC9B/D,KAAK0a,iBAAiB,UAAW1a,KAAKgqB,WAAWvpB,KAAKT,OACtDqgB,YAAYrgB,KAAM,MAAOA,KAAKiqB,kBAC9BjqB,KAAK0a,iBAAiB,QAAS1a,KAAKkqB,gBAAgBzpB,KAAKT,OACzDA,KAAK0a,iBAAiB,OAAQ1a,KAAKmqB,eAAe1pB,KAAKT,OAUzD6c,oBACE7T,MAAM6T,oBACN7c,KAAKoqB,qBACLpqB,KAAKqqB,qBAAoB,GACzBC,YAAetqB,KAAK8X,EAAEyS,UAAW,SACjCzqB,IAAkBC,sBAGpByqB,sBACE,IAAIhJ,EAAcxhB,KAAKyqB,wBACnBC,EAAW,GACXpK,EAAiByB,YAAYP,EAAa,IAAI1M,OAChD4V,EAAS1Z,KAAKhR,KAAKoR,KAAKiG,OAE1BqT,EAAWA,EAAS5H,OAAO,CACzB9iB,KAAKoR,KAAKiT,SAAS7C,EAAYhP,UAC/BgP,EAAYnP,UACZrS,KAAKoR,KAAKS,WAAW2P,EAAY3O,YACjC2O,EAAYtO,gBAEVlT,KAAKyhB,iBAAgD,IAA7BzhB,KAAKoR,KAAKyR,iBACpC6H,EAAS1Z,KAAKhR,KAAKoR,KAAK2S,MACxB2G,EAAS1Z,KAAKsP,EAAiBuD,kBAAkBrC,KAEnDxhB,KAAKkb,cAAc,IAAIC,YAAY,gBAAiB,CAClDC,SAAS,EACTJ,UAAU,EACV9K,OAAQ,CACNlN,KAAM0nB,EAASC,KAAK,SAS1BC,cACE5qB,KAAK8X,EAAE+S,aAAanP,QAMtBoP,aAAa1T,EAAM2T,GACjB/qB,KAAKgrB,kBAAkBhrB,KAAKirB,oBAAoB7T,EAAMpX,KAAKypB,aAAcsB,GAG3EG,oBAAoB1J,GAClBxhB,KAAKmrB,WAAW3J,GAGlB4J,eAAeC,GACb,OAAwB,IAAjBA,EAGTC,gBAAgBD,EAAc9J,GAC5B,GAAIA,EACF,OAAOA,EAAarO,gBAAkBlT,KAAKypB,YAAYvW,cAAgBmY,EAO3EF,WAAW/T,GACT,GAAIA,EAAM,CACR,IAAImU,EAAOvrB,KAAKirB,oBAAoB7T,EAAMpX,KAAKypB,aAC3C+B,EAAwBxrB,KAAK8X,EAAE2T,cAActP,SAAWoP,EAExDG,EAAe1rB,KAAK8X,EAAE2T,cAAcE,aAAe3rB,KAAK8X,EAAE2T,cAAcvE,WACxE0E,EAAwB5rB,KAAK8X,EAAE2T,cAActP,SAAWuP,EAAe,EAAIH,EAE3EC,EACFxrB,KAAKgrB,kBAAkBO,GAAM,GACpBK,GACT5rB,KAAKgrB,kBAAkBO,EAAOG,EAAe,GAAG,IAKtDxB,kBACElqB,KAAK+pB,UAAW,EAGlBI,iBACEnqB,KAAK+pB,UAAW,EAGlB8B,wBAAwBrC,GACtBxpB,KAAK8qB,aAAatB,GAGpBsC,0BACE9rB,KAAK0pB,mBAAqB5c,KAAK0H,MAAMxU,KAAK8X,EAAE2T,cAActP,UAC1Dnc,KAAK8X,EAAEiU,aAAa5P,UAAYnc,KAAK8X,EAAE2T,cAActP,SAAWnc,KAAKypB,YAAY5W,YAAc,GAGjGmZ,2BACEhsB,KAAK8X,EAAE2T,cAActP,SAA0C,GAA/Bnc,KAAK8X,EAAEiU,aAAa5P,SAAgBnc,KAAKypB,YAAY5W,WACrF7S,KAAK0pB,mBAAqB5c,KAAK0H,MAAMxU,KAAK8X,EAAE2T,cAActP,UAG5D8P,iBACEjsB,KAAK8rB,0BACL9rB,KAAKksB,gBAGPC,gBACEnsB,KAAKgsB,2BACLhsB,KAAKksB,gBAGPE,0BACEpsB,KAAK2hB,aAAc,EACnBvR,WAAW,IAAMpQ,KAAK2hB,aAAc,EAAM,KAE1C3hB,KAAKgsB,2BAGPK,2BACErsB,KAAK8rB,0BAGPI,gBACElsB,KAAK8pB,aAAc,EACnB9pB,KAAKssB,WAAa9M,IAAUC,SAASzf,KAAKssB,WACxChF,IAAQC,MAAM,KAAM,IAAMvnB,KAAK8pB,aAAc,GAGjDyC,iBAAiBnV,EAAMoV,EAAY5c,GACjC,OAAIwH,EACKoV,EAAWlM,EAAiBmM,kBAAkBrV,IAE9CxH,EAIX8c,cACE,IAAIrV,EAAQ,IAAIvC,KAEZhI,KAAK2H,IAAIzU,KAAK8X,EAAE2T,cAActP,SAAWnc,KAAKirB,oBAAoB5T,EAAOrX,KAAKypB,cAAgB,MAGhGzpB,KAAKuhB,aAAelK,EACpBrX,KAAK2sB,UAEL3sB,KAAK4sB,wBAITA,wBACM5sB,KAAKwhB,cACPxhB,KAAKwhB,YAAc,IAAI1M,MAGzB9U,KAAK8qB,aAAa,IAAIhW,MAAQ,GAGhC+X,WAAWtL,GACT,QAASA,EAGXuL,WAAWxjB,GACT,IAAKtJ,KAAK8pB,cAAgB9pB,KAAK2hB,YAAa,CAC1C,IACIoL,GADczjB,EAAE4G,OAAO8c,GAAKhtB,KAAK8X,EAAEiU,aAAa/S,wBAAwBoQ,IAAMppB,KAAK8X,EAAEiU,aAAaJ,aAAe,IACvF3rB,KAAK8X,EAAEiU,aAAa7E,WAClDlnB,KAAKgrB,kBAAkBhrB,KAAK8X,EAAE2T,cAActP,SAAuB,GAAZ4Q,GAAgB,IAI3E/B,kBAAkBiC,EAAgBlC,GAChC,QAA6B5pB,IAAzBnB,KAAKktB,gBAAT,CAKA,IAAKnC,EAIH,OAHA/qB,KAAK8X,EAAE2T,cAActP,SAAW8Q,EAChCjtB,KAAKktB,qBAAkB/rB,OACvBnB,KAAK8rB,0BAIP9rB,KAAKktB,gBAAkBD,EAGvB,IASIE,EAAWpC,EAAU,IAAM,EAC3BqC,EAAQ,EACR5D,EAAkBxpB,KAAK8X,EAAE2T,cAActP,SAEvCkR,EAAeC,IAEjB,IAAIC,EAAcD,GADlBF,EAAQA,GAASE,GAGjB,GAAIC,EAAcJ,EAAU,CAC1B,IAAIK,EAlBa,EAACC,EAAGC,EAAGC,EAAGzqB,KAC7BuqB,GAAKvqB,EAAI,GACD,EACCyqB,EAAI,EAAIF,EAAIA,EAAIC,GAGjBC,EAAI,KADZF,GACsBA,EAAI,GAAK,GAAKC,EAYjBE,CAAeL,EAAa/D,EAAiBxpB,KAAKktB,gBAAkB1D,EAAiB2D,GACtGntB,KAAK8X,EAAE2T,cAActP,SAAWqR,EAChCpT,OAAOtB,sBAAsBuU,QAE7BrtB,KAAKkb,cAAc,IAAIC,YAAY,4BAA6B,CAC9DC,SAAS,EACTJ,UAAU,EACV9K,OAAQ,CACNiM,SAAUnc,KAAKktB,gBACfW,YAAarE,MAIjBxpB,KAAK8X,EAAE2T,cAActP,SAAWnc,KAAKktB,gBACrCltB,KAAKktB,qBAAkB/rB,EAGzBiP,WAAWpQ,KAAK8rB,wBAAwBrrB,KAAKT,MAAO,IAItDoa,OAAOtB,sBAAsBuU,QArD3BrtB,KAAKktB,gBAAkBD,EAwD3Ba,OAAO5uB,EAAO6uB,GACZ,OAAOjhB,KAAKkU,IAAI+M,EAAM9M,IAAKnU,KAAKmU,IAAI8M,EAAM/M,IAAK9hB,IAGjD8uB,aAAa1kB,GAGX,KAAIwD,KAAK2H,IAAInL,EAAE4G,OAAO+d,IAAM,IAAMnhB,KAAK2H,IAAInL,EAAE4G,OAAOge,KAAO,IAA3D,CAKIphB,KAAK2H,IAAInL,EAAE4G,OAAOie,KAAOnuB,KAAK6pB,mBAAqB,GACrD7pB,KAAKqqB,qBAAoB,GAG3B,IAAI+D,EAAgBpuB,KAAK4pB,YAActgB,EAAE4G,OAAOie,IAChDnuB,KAAK4pB,YAAc5pB,KAAK8tB,OAAOM,EAAe,CAC5CpN,IAAK,EACLC,IAAKjhB,KAAK6pB,sBAIdwE,OAAO/kB,GACL,IAAItJ,KAAK2pB,aAKT,OAAQrgB,EAAE4G,OAAOhI,OACf,IAAK,QACHlI,KAAKqqB,qBAAoB,GACzB,MAEF,IAAK,QACHrqB,KAAKguB,aAAa1kB,GAClB,MAEF,IAAK,MACHtJ,KAAKqqB,qBAAoB,GACrBrqB,KAAK4pB,aAAe5pB,KAAK6pB,mBAAqB,EAChD7pB,KAAKoqB,qBAELpqB,KAAKsuB,qBAMbjE,oBAAoBkE,GACdA,EACFvuB,KAAKoY,UAAUmH,IAAI,WAEnBvf,KAAKoY,UAAUC,OAAO,WAI1BmW,sBACExuB,KAAKyuB,yBAA2BzuB,KAAKoqB,qBAAuBpqB,KAAKsuB,oBAGnEA,oBACEtuB,KAAK4pB,YAAc,EACnB5pB,KAAK+D,aAAa,gBAAiB,IAGrCqmB,qBACEpqB,KAAKkd,gBAAgB,iBACrBld,KAAK4pB,YAAc5pB,KAAK6pB,mBAG1B4E,yBACE,OAAOzuB,KAAK4pB,YAAc5pB,KAAK6pB,mBAAqB,EAGtD6E,mBAAmBC,GACZ3uB,KAAK2pB,eACR3pB,KAAK8X,EAAE2T,cAAcjgB,MAAMib,UAAY,eAAiBkI,EAAI3uB,KAAK6pB,oBAAsB,MACvF7pB,KAAK8X,EAAEiU,aAAavgB,MAAMib,UAAY,cAAgBkI,EAAI,OAI9DC,iBAAiBvd,GACf,IAAIwd,EAAS,IAAI/Z,KAAK9U,KAAKypB,aAE3B,OADAoF,EAAOlO,YAAY/L,SAASvD,GAASrR,KAAKypB,YAAYvW,eAC/C2b,EAAO3b,cAGhB4b,kBAAkBC,GAChB,OAAO/uB,KAAKgvB,kBAAkBD,GAAQ7b,cAGxC8b,kBAAkBD,GAChB,IAAIF,EAAS,IAAI/Z,KAAK9U,KAAKypB,aAG3B,OAFAoF,EAAOzM,QAAQ,GACfyM,EAAO1M,SAASvN,SAASma,GAAU/uB,KAAKypB,YAAY5W,YAC7Cgc,EAGT5D,oBAAoBnK,EAAOC,GAEzB,OAD2D,IAA7CD,EAAM5N,cAAgB6N,EAAM7N,eAC1B6N,EAAMlO,WAAaiO,EAAMjO,WAG3Coc,mBAAmBnO,EAAOC,GACxB,OAAO/gB,KAAKirB,oBAAoBnK,EAAOC,GAAS,GAGlDmO,SACElvB,KAAKuhB,aAAe,GAGtBoL,SACE,MAAMwC,EAAiBnvB,KAAKovB,cAAcC,KACpCC,EAAUH,EAAiBA,EAAeC,cAAcC,KAAO,KACjEC,IACFA,EAAQC,QAAS,GAGnBvvB,KAAKkb,cAAc,IAAIC,YAAY,QAAS,CAACC,SAAS,EAAMJ,UAAU,KAGxEwU,UACExvB,KAAKwhB,YAAcxhB,KAAKuhB,aACxBvhB,KAAK2sB,SAGP1I,gBAAgB3a,GACdA,EAAEhH,iBAMJmtB,UAAUnmB,GAGR,IAFA,IAAI8E,EAAO,CAAC,OAAQ,KAAM,QAAS,OAAQ,QAAS,QAAS,OAAQ,MAAO,SAAU,WAAY,MAAO,OAEhG7L,EAAI,EAAGA,EAAI6L,EAAK5L,OAAQD,IAAK,CACpC,IAAImtB,EAAIthB,EAAK7L,GACb,GAAIotB,IAAqBC,yBAAyBtmB,EAAGomB,GACnD,OAAOA,GAKb1F,WAAW1gB,GACT,IAAIoS,EAAQ1b,KAAKyqB,wBAIjB,MAAMoF,EAAUvmB,EAAEqR,eAAelN,QAAQzN,KAAK8X,EAAEgY,cAAgB,EAC1DC,EAAWzmB,EAAEqR,eAAelN,QAAQzN,KAAK8X,EAAE+S,eAAiB,EAC5DmF,GAAcH,IAAYE,EAEhC,IAAIE,EAAWjwB,KAAKyvB,UAAUnmB,GAC9B,GAAiB,QAAb2mB,EAAoB,CAEtB3mB,EAAE0G,kBAEF,MAAMkgB,EAAelwB,KAAKid,aAAa,cACjCkT,EAAU7mB,EAAEkS,SAEd0U,EACF5mB,EAAEhH,iBACO6tB,GAAWH,IAAeG,GAAWJ,GAE9CzmB,EAAEhH,iBACFtC,KAAKkb,cAAc,IAAIC,YAAY,cAAe,CAACC,SAAS,EAAMJ,UAAU,MACnEmV,GAAWN,GAGpB7vB,KAAK+pB,UAAW,EAChB3Z,WAAW,IAAMpQ,KAAKmrB,WAAWnrB,KAAKwhB,aAAc,IAIpDxhB,KAAK+pB,UAAW,OAEb,GAAIkG,EAGT,OAFA3mB,EAAEhH,iBACFgH,EAAE0G,kBACMigB,GACN,IAAK,OACHjwB,KAAKowB,iBAAiB,GACtBpwB,KAAK0b,QACL,MACF,IAAK,KACH1b,KAAKowB,kBAAkB,GACvBpwB,KAAK0b,QACL,MACF,IAAK,QACCsU,GACFhwB,KAAKowB,iBAAiB,GAExB,MACF,IAAK,OACCJ,GACFhwB,KAAKowB,kBAAkB,GAEzB,MACF,IAAK,QACCJ,GAAcD,EAChB/vB,KAAK2sB,SACIkD,GACT7vB,KAAK0sB,cAEP,MACF,IAAK,QACH,GAAIqD,EACF/vB,KAAK2sB,cACA,GAAIkD,EACT7vB,KAAK0sB,kBACA,CACL,IAAIlL,EAAcxhB,KAAKwhB,YACnBlB,EAAiByB,YAAYP,EAAaxhB,KAAKuhB,eACjDvhB,KAAKuhB,aAAe,GACpBvhB,KAAKwhB,YAAcA,GAEnBxhB,KAAKuhB,aAAeC,EAGxB,MACF,IAAK,OACHxhB,KAAKqwB,sBAAsB3U,EAAO,WAClC,MACF,IAAK,MACH1b,KAAKqwB,sBAAsB3U,EAAO,WAClC,MACF,IAAK,WACH1b,KAAKswB,mBAAmBhnB,EAAEkS,SAAW,GAAK,GAC1C,MACF,IAAK,SACHxb,KAAKswB,mBAAmBhnB,EAAEkS,UAAY,IAAM,GAC5C,MACF,IAAK,MACHxb,KAAKwvB,WAMb/E,wBACE,OAAOzqB,KAAKwhB,aAAexhB,KAAKuhB,cAAgBvhB,KAAKwpB,iBAAmB,IAAI1U,KAG9Eyb,WAAWC,GACTxwB,KAAKwhB,YAAcgP,EACnBxwB,KAAKupB,kBAAoBiH,EAAYne,UAGvCoe,kBAAkB/U,GAChB1b,KAAKuwB,WAAWjQ,EAAiBoQ,gBAAgBhV,EAAO,CAAC1b,KAAK4hB,QAAS5hB,KAAK6hB,WAG9EuO,iBAAiB5M,GACf,IAAI9H,EAAQ1b,KAAKyqB,wBACb+F,EAAc,IAAI1b,KAAK,EAAG,GAC9B0b,EAAY7P,YAAYjF,EAAMxI,eAC9Bsd,EAAYrO,SAASzG,EAAM7I,YAC3B2d,EAAYpO,QAAQ1G,EAAMrJ,UAAYmR,GAElCxjB,KAAKgiB,aAAawO,EAAaxwB,KAAK4hB,QAAS5hB,KAAK6hB,SACpD7hB,KAAKuwB,WAAWC,GAEZxwB,KAAKgiB,aAAatG,EAAO1b,KAAK4hB,QAAS5hB,KAAK6hB,SAE1C2B,EAAO,EACTxjB,KAAKuwB,WAAWvwB,KAAK6hB,SAErB7hB,KAAKuwB,WAAWvwB,KAAK4hB,SAIvB5hB,KAAKywB,kBAAkB/U,GAK7B4U,mBAAmBvB,GACjB,IAAIrT,EAAQ1b,KAAKyqB,wBACb+F,EAAc,IAAI1b,KAAK,EAAG,GAC9B0b,EAAY7P,YAAYjF,EAAMxI,eAC9Bsd,EAAYrO,SAASzG,EAAM7I,WAAakc,GAExC,IAAIrL,EAAc8M,EAAY3d,WAE9B2d,EAAYpO,QAAQpiB,KAAKupB,oBAAsBvpB,KAAKupB,kBAAoB7N,EAAMrJ,YAC1Eme,EAAY3d,aAAe6Q,GAC7B8M,EAAYpO,QAAQ,GAGlBpiB,KAAKgiB,aAAawO,EAAaxwB,KAAK4hB,QAAS5hB,KAAK6hB,SACpD7hB,KAAKwhB,YAAcgP,EAEfxwB,KAAKgiB,aAAatG,EAAO1b,KAAK4hB,QAAS5hB,KAAK6hB,SAE1CkN,EAAS,EACX/uB,KAAKuwB,WAAWvwB,KAAK6hB,SAErB7hB,KAAKuwB,WAAWvwB,KAAK4hB,SAIvB5hB,KAAKywB,kBAAkB/U,GAK7B2U,sBAAsB7O,EAAavX,GACjC,IAAIumB,EAAc,IAAI1b,KAAK,EAAG,GAC9B0b,EAAY7P,YAAYa,EAAYtO,eAEnB,YAAbjJ,GACFumB,EAAYrO,SAASX,EAAY3O,YACjC2d,EAAYpO,QAAQ,KAEpBoO,EAAYrO,SAASX,EAAY3O,WAAa,GAC9C2d,EAAYpO,QAAQ,IAGlBpiB,KAAKgiB,aAAawO,EAAaxwB,KAAK4hB,QAAS5hB,KAAK6hB,SACpD7hB,KAAKuwB,WAAWC,GAEZxwB,KAAKgiB,aAAaR,EAAaxhB,KAAK4hB,QAAS5hB,KAAK6hB,SAEpD7hB,KAAKuwB,WAAWvwB,KAAKiK,IAGrBjK,KAAKywB,kBAAkBjP,GAK7BQ,aAAa5K,EAAM4J,EAAKC,GACtB,QAASD,GAAO5J,GAAQ4J,MAAUC,GAAO7J,GAAQ6J,GAGnD0P,gBAAgB3P,EAAKC,GACnB,IAAI5J,EAAQ,IAAIvC,KACZ8b,EAAgB,IAAI9b,KAAK,EAAG,GAIhC,OAHA8b,EAAcjQ,YAAYtJ,EAAMnE,eAChC0d,EAAczO,SAAS9K,EAAMxE,YAC7B+d,EAAcxO,QAAQ/K,EAAMhF,WACrBrS,KAAKgiB,aAAa4O,EAAe5P,EAAKC,GAG/CgJ,iBAAiB3gB,GACfA,EAAE0G,mBAINtH,eAAec,OAAO6f,EAAgC1qB,GAAI0qB,GCr3B1D,MAAMzlB,EAAsBlF;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;eAqH5BmF,SAASI,KAAKC,YAAYN,EAAoBO,SCxH9C,MAAMP,EAAsBC,SAASC,cAAc,YAEnDF,EAAoBI,UAAa,+4CA4DjCH,SAASI,KAAKC,YAAYN,EAAoBO,SC9D9C,MAAMP,EAAsBC,SAASC,cAAc,YAEnDF,EAAoBI,UAAa,w9BAuCjCH,SAASI,KAAKC,YAAYN,EAAoBO,SCnC9C,MAAMP,EAAsBlF;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;eAgO5BmF,SAASI,KAAKC,YAAYN,EAAoBO,SC7N9C,MAAMP,EAAsBC,SAASC,cAAc,YAEnDF,EAAoBI,UAAa,86EAoGjCH,SAASI,KAAKC,YAAYN,EAAoBO,SAE9C,MAAM0sB,EAAa,CACjBnb,QAAS,CAAC,OAAQ,YAAa,UAAW,iBAAkB,cAAe,YACzE,YAAa,OAAQ,cAAe,eAAgB,SACtDob,WAAY,CAAC,WAAY,WAAY,WAAY,YAG7CC,EAAY,CAChBC,QAAS,UACTC,WAAY,cAQDC,EAAiBC,IAAY,cAAmCjX,EAAkBiX,IAC7FryB,wBACE,MAAO,CAMLsyB,aAAc,CACZpyB,KAAMC,QAURoyB,YAAa,CACXryB,KAAMC,QAYRqyB,eAAgB,CACdtyB,KAAMC,QAMRsyB,WAAY,CACVvyB,KAAMM,QACNJ,OAAO,GAMTsyB,mBAAoB,CAClBxyB,KAAMM,QACNJ,OAAO,GAMTmM,aAAc,CACZrM,KAAMC,OACNC,MAAO,IAcTkS,KAAM,CACJpS,KAAMQ,OACNN,MAAO,KACE,CACLuyB,MAAO,WAQb7hB,MAAO,CACL5Q,KAAMC,OACNC,MAAO,GACPib,SAAU,iBAMZuX,UAAW,CACT1yB,KAAM2N,QAMRglB,UAAW,CACT3yB,KAAM2N,QAMRgN,KAAM,CACJ3a,KAAMC,QAMR2yB,YAAa,CACX5yB,KAAMC,QAMR4yB,SAAU,CACR7yB,KAAMM,QACNsY,oBAAoB,GAMtBhV,SAAU,CACR5D,KAAMM,QACNsY,oBAAoB,GAQtB1Y,MAAO,CACLF,KAAMC,OACNC,MAAO,GACPib,SAAU,gBACVrT,QAAQ,GAMVrE,QAAS,CACPzD,KAAMM,QACNsY,oBAAoB,EACpB9Q,QAAQ,EACR5H,OAAO,GAMT4yB,SAAU,CACR9yB,KAAMM,QACNsY,oBAAoB,GAOtBma,oBAAqB,CACnB/yB,KAAMM,SAGR0yB,SAAU/yB,OAEVgzB,SAAUhzB,OAEVizB,SAAUjzB,QAIdQ,uBACE,MAAO,CAAC,kEACN,qBAAuBoxB,EAAWnb,QAAQiV,KAAK,MAAQ,IACvD,+BAAiCkG,EAAWC,WAAWnG,KAAK,MAAQ,IACpE,qDACA,+CACA,uDAIJ9P,mBACE,IAAK7a,KAAKsb,WACR,OAEF,MAAM6W,EAAUnyB,KAAKsP,iBAAiBtP,KAAKoyB,yBAAyBpyB,KAAKoyB,qBACzE,OAAID,GAGGnyB,KAAKsb,WAAWhM,cAAc,kBAMvC1O,mBACE,OAAOZ,KAAK6a,aAGduX,sBACE,MAAO,QAGTC,6BAKEryB,KAAKsyB,sBAAsB,gEAG7BjxB,SAASiI,GACP,GAAItJ,KAAKuyB,eAGP,OAFAjpB,EAAEkpB,gCACFxyB,KAAKuyB,gBAAiB,GAIxB,GAAIvyB,KAAK+xB,oBAAqB,CAC5B,MAAMpyB,EAAQK,KAAKY,aACnB,GAAIjB,EAAMT,MAAMsD,OAAS,IAAMxC,KAAK2C,gBASlC,OARAhD,EAAMT,MAAQc,KAAKd,OAAS,GAE5Bc,KAAK+D,aAAa,kBAAmB,SACrC/D,KAAKyyB,gBAAkBjT,IAAUC,SAC/Bzf,KAAKyyB,gBACLnL,IAAQC,MAAM,KAAM,KAClBvnB,KAAKkd,gBAAgB,sBAMxB5T,EAAEopB,oBACL1yB,KAAK2yB,aAAc,GAErB3yB,KAAKd,MAAQoK,EAAE2R,OAAO/b,MAKxB0zB,cAAc/iB,EAAUgiB,EAAUL,EAAoBM,IAC/CjiB,IACAgiB,GACDL,GACAM,EAEF9xB,KAAK8X,EAAE+a,YAAY3V,gBAAgB,UAEnCld,KAAK8X,EAAE+a,YAAY9uB,aAAa,UAAU,GAI9C+uB,UAAUxpB,GACR,GAAItJ,KAAK+yB,eACP,OAKF,MAAMC,EAAc,IAAI7X,YAAY,SAAU,CAC5CjL,OAAQ,CACN+iB,YAAa3pB,GAEf8R,QAAS9R,EAAE8R,QACXC,WAAY/R,EAAE+R,aAEhBrb,KAAKkb,cAAc8X,GAGrBtjB,cAAcwjB,EAAQC,GAEL,KAAXD,QAA4B/xB,IAAXgyB,IAKnBnzB,KAAK8xB,SADQ,KAAXoB,GAA2B,MAAVA,EAMjBlzB,KAAK2yB,YACP3yB,KAAK2yB,aAAc,QAECxxB,IAAX+xB,EACTlzB,KAAKY,aAAa1B,MAAQg0B,EAE1BlzB,KAAKd,MAAQc,KAAKY,aAAa1B,MAAQ,GAGrCc,KAAKyC,SACPzC,KAAKoB,aAITgyB,cAAcxjB,GACE,KAAVA,GAAyB,MAATA,EAClB5P,KAAK+D,aAAa,YAAa,IAE/B/D,KAAKkd,gBAAgB,aAIzBmW,gBACE,MAAMlB,EAAUnyB,KAAKsP,iBAAiBtP,KAAKoyB,yBAAyBpyB,KAAKoyB,qBAErEpyB,KAAKd,QACPc,KAAKY,aAAa1B,MAAQc,KAAKd,MAC/Bc,KAAKoB,YAGH+wB,IAAYnyB,KAAKszB,eACnBtzB,KAAKuzB,sBAAsBpB,GAC3BnyB,KAAKwzB,mBAAmBrB,GACxBnyB,KAAKyzB,gBAAgBtB,GACrBnyB,KAAKszB,cAAgBnB,IACXA,GAAWnyB,KAAKszB,gBAC1BtzB,KAAK0zB,sBAAsB1zB,KAAKszB,eAChCtzB,KAAK2zB,mBAAmB3zB,KAAKszB,eAC7BtzB,KAAKszB,mBAAgBnyB,GAGvB3B,OAAO4O,KAAK2iB,GAAWviB,IAAIC,GAAOsiB,EAAUtiB,IAAM+W,QAAQxmB,GACxDgB,KAAK4zB,yBAAyB/C,EAAW7xB,GAAMwP,IAAIqlB,GAAQ7zB,KAAK6zB,IAAQ70B,IAG5E80B,qBAAqBC,GACnB/zB,KAAK4zB,yBAAyBG,EAAkBhD,EAAUC,SAG5DgD,+BAA+BD,GAC7B/zB,KAAK4zB,yBAAyBG,EAAkBhD,EAAUE,YAG5DsC,sBAAsBpB,GAChBA,EAAQjzB,QAAUc,KAAKd,QACzBiJ,QAAQC,KAAK,2DACb+pB,EAAQjzB,MAAQ,IAIpB00B,yBAAyBG,EAAkB/0B,GACzC,MAAMW,EAAQK,KAAKY,aACbqzB,EAAiBpD,EAAW7xB,GAErB,eAATA,EACFi1B,EAAezO,QAAQ,CAACqO,EAAMxiB,KAC5BrR,KAAKk0B,sBAAsBL,EAAME,EAAiB1iB,GAAQ1R,GAC1DK,KAAKk0B,8BAA8BL,IAAQE,EAAiB1iB,GAAQ1R,KAGtEs0B,EAAezO,QAAQ,CAACqO,EAAMxiB,KAC5BrR,KAAKk0B,sBAAsBL,EAAME,EAAiB1iB,GAAQ1R,KAKhEu0B,sBAAsBva,EAAMza,EAAOgK,GAC5ByQ,GAASzQ,IAIVhK,EACFgK,EAAKnF,aAAa4V,EAAwB,kBAAVza,EAAuB,GAAKA,GAE5DgK,EAAKgU,gBAAgBvD,IAIzBwa,oBAAoBvxB,EAAU+uB,EAAWD,EAAW1wB,GAC7ChB,KAAKyC,UAILG,GAAa+uB,GAAcD,GAAc1wB,EAG5ChB,KAAKoB,WAFLpB,KAAKyC,SAAU,GAUnBE,gBACE,OAAI3C,KAAK4C,UAAY5C,KAAKgB,SAAWhB,KAAK0xB,WAAa1xB,KAAK2xB,UACnD3xB,KAAKY,aAAa+B,iBAEjB3C,KAAKyC,QAIjB+wB,mBAAmBtqB,GACjBA,EAAKwR,iBAAiB,QAAS1a,KAAKo0B,eACpClrB,EAAKwR,iBAAiB,SAAU1a,KAAKq0B,gBACrCnrB,EAAKwR,iBAAiB,OAAQ1a,KAAKs0B,cACnCprB,EAAKwR,iBAAiB,QAAS1a,KAAKu0B,eAGtCb,sBAAsBxqB,GACpBA,EAAK8T,oBAAoB,QAAShd,KAAKo0B,eACvClrB,EAAK8T,oBAAoB,SAAUhd,KAAKq0B,gBACxCnrB,EAAK8T,oBAAoB,OAAQhd,KAAKs0B,cACtCprB,EAAK8T,oBAAoB,QAAShd,KAAKu0B,eAGzC9Z,QACEzR,MAAMyR,QAENza,KAAKqyB,6BAELryB,KAAKo0B,cAAgBp0B,KAAKqB,SAASZ,KAAKT,MACxCA,KAAKq0B,eAAiBr0B,KAAK8yB,UAAUryB,KAAKT,MAC1CA,KAAKs0B,aAAet0B,KAAKw0B,QAAQ/zB,KAAKT,MACtCA,KAAKu0B,cAAgBv0B,KAAKy0B,SAASh0B,KAAKT,MAExC,MAAM00B,EAAe10B,KAAKsb,WAAWhM,cAAc,kBACnDtP,KAAKszB,cAAgBtzB,KAAKsP,iBAAiBtP,KAAKoyB,yBAAyBpyB,KAAKoyB,qBAC9EpyB,KAAKwzB,mBAAmBkB,GACxB10B,KAAKyzB,gBAAgBiB,GACjB10B,KAAKszB,gBACPtzB,KAAKyzB,gBAAgBzzB,KAAKszB,eAC1BtzB,KAAKwzB,mBAAmBxzB,KAAKszB,gBAG/BtzB,KAAKsb,WAAWhM,cAAc,qCAC3BoL,iBAAiB,aAAc1a,KAAKqzB,cAAc5yB,KAAKT,OAEpDoa,OAAOwN,UAAYxN,OAAOwN,SAASC,WACvC7nB,KAAK8nB,eAGP9nB,KAAK8X,EAAE+a,YAAYnY,iBAAiB,YAAa,IAAM1a,KAAK+yB,gBAAiB,GAC7E/yB,KAAK8X,EAAE+a,YAAYnY,iBAAiB,aAAc,IAAM1a,KAAK+yB,gBAAiB,GAC9E/yB,KAAK8X,EAAE+a,YAAYnY,iBAAiB,QAAS1a,KAAK20B,oBAAoBl0B,KAAKT,OAC3EA,KAAK0a,iBAAiB,UAAW1a,KAAK40B,WAAWn0B,KAAKT,OAEtD,IAAI60B,EAAW3D,EAAe4D,UAAY,EAAI5D,EAAe4D,WAAa,EAC1E90B,KAAKiyB,YAAcjyB,KAAK4f,YAAYjhB,YAAYk2B,IAChD70B,KAAKgyB,YAAchyB,KAAK4f,YAAYjhB,YAAYk2B,IAChD70B,KAAKkyB,YAAclyB,KAAK4f,YAAYjhB,YAAYk2B,IAIhD70B,KAAKsb,WAAWhM,cAAc,0BAC3BoL,iBAAiB,gBAAiB,KACjC1a,KAAK+0B,0BAUX3zB,WACE,QAASpB,KAAKyC,SAAWzC,KAAK2C,iBAGhC8uB,QACEzxB,KAAKd,MAAQ,GAGfs1B,UACEx0B,KAAKoB,WAGPqzB,WACMz0B,KAAKuxB,aACPvxB,KAAKY,aAAao0B,SAElB5kB,WAAW,KACT,IACEpQ,KAAKY,aAAaq0B,kBAAkB,EAAG,MACvC,MAAO3rB,QAQfqrB,oBAAoBrrB,GAClBA,EAAEhH,iBAEFtC,KAAKY,aAAa8a,QAClB1b,KAAKyxB,QACLzxB,KAAK+yB,gBAAiB,EAClBlX,UAAUC,UAAUvG,MAAM,aAG5BvV,KAAKuyB,gBAAiB,GAExB,MAAM2C,EAAa,IAAIC,MAAM,QAAS,CAAC/Z,SAAS,EAAMJ,UAAU,IAChEka,EAAWxC,mBAAoB,EAC/B,MAAMM,EAAc,IAAImC,MAAM,SAAU,CAAC/Z,SAAUpb,KAAKszB,gBACxDN,EAAYN,mBAAoB,EAChC1yB,KAAKY,aAAasa,cAAcga,GAChCl1B,KAAKY,aAAasa,cAAc8X,GAGlC4B,WAAWtrB,GACT,GAAkB,KAAdA,EAAE3H,SAAkB3B,KAAKwxB,mBAAoB,CAC/C,MAAM4D,IAAmBp1B,KAAKd,MAC9Bc,KAAKyxB,QACL2D,GAAkBp1B,KAAKY,aAAasa,cAAc,IAAIia,MAAM,SAAU,CAAC/Z,SAAUpb,KAAKszB,kBAI1FG,gBAAgBvqB,GAEV2S,UAAUC,UAAUvG,MAAM,aAK5BvV,KAAKq1B,oBAAsB,KACzBr1B,KAAKuyB,gBAAiB,EACtBzZ,sBAAsB,KACpB9Y,KAAKuyB,gBAAiB,KAG1BrpB,EAAKwR,iBAAiB,UAAW1a,KAAKq1B,qBACtCnsB,EAAKwR,iBAAiB,WAAY1a,KAAKq1B,qBACvCr1B,KAAKs1B,wBAAwB,cAAet1B,KAAKq1B,sBAIrD1B,mBAAmBzqB,GAEb2S,UAAUC,UAAUvG,MAAM,aAC5BrM,EAAK8T,oBAAoB,UAAWhd,KAAKq1B,qBACzCnsB,EAAK8T,oBAAoB,WAAYhd,KAAKq1B,sBAI9CE,kBAAkB9yB,EAAS4I,EAAcmqB,GACvCx1B,KAAKk0B,sBAAsB,mBACxB7oB,GAAgB5I,EAAU+yB,OAAUr0B,EACrCnB,KAAK6a,cAGT4a,kBAAkB7lB,EAAOoiB,EAAUE,GACjC,IAAIwD,EAAMxD,EACNtiB,IACF8lB,KAAS1D,KAAYE,KAEvBlyB,KAAK6a,aAAa9W,aAAa,kBAAmB2xB,GAGpDC,2BAA2BlzB,EAAS4I,EAAcmqB,GAChD,SAAUnqB,GAAgB5I,EAAU+yB,OAAUr0B,IAAYkV,WAG5Duf,iCAAiCC,EAAkB32B,GACjD,MAAM42B,EAA2B,aAAeD,OACT10B,IAAnCnB,KAAK81B,IACF91B,KAAK81B,KAA8B52B,GACxCc,KAAKkb,cACH,IAAIC,YAAY,cAAe,CAACC,SAAS,KAI7Cpb,KAAK81B,GAA4B52B,EAGnC61B,wBACE/0B,KAAK41B,iCAAiC,SAAU51B,KAAK2Y,cAMvDod,yBAAyBxQ,EAAM4N,EAAQD,GAarC,GAZAlqB,MAAM+sB,yBAAyBxQ,EAAM4N,EAAQD,GAGvC9Y,OAAOwN,UAAYxN,OAAOwN,SAASC,YACvC,gEAAgExlB,KAAKkjB,IACrEvlB,KAAK8nB,eAKU,iCAAiCzlB,KAAKwZ,UAAUC,YAEjD9b,KAAKkP,KAAM,CACzB,MAAM8mB,EAAkB,8BACxBh2B,KAAKkP,KAAK8V,iBAAiB,KAAKQ,QAAQyQ,IACtCA,EAAGzqB,MAAMwqB,GAAmB,UAC5BC,EAAGzqB,MAAMwqB,GAAmB,SCrpBpC,MAAME,UAAyB7W,EAAa6R,EAAenR,YAAcE,QACvErW,sBACE,OAAOlL;;;;;;;;;;;;;;;;;;;;;;;;;EA4BTC,gBACE,MAAO,oBAGTuhB,qBACE,MAAO,SAGTphB,wBACE,MAAO,CAKLq3B,KAAM,CACJn3B,KAAMC,QAOR+B,QAAS,CACPhC,KAAMC,QAMRm3B,MAAO,CACLp3B,KAAMC,UAMdyJ,eAAec,OAAO0sB,EAAiBv3B,GAAIu3B,GC/H3C,MAAMtyB,EAAsBlF;;;;;;;;;;;;;;;;;eAmB5BmF,SAASI,KAAKC,YAAYN,EAAoBO,6BCbvC,MAAMkyB,EAAkBlF,IAAY,cAAoCmF,YAC7E,CAACC,KAAwBpF,IAGzBryB,wBACE,MAAO,CAIL03B,cAAe,CACbx3B,KAAM8V,MAGR2hB,aAAc3hB,KAWd5V,MAAO,CACLF,KAAMC,OACNkb,SAAU,gBACVrT,QAAQ,EACR5H,MAAO,IAMT0D,SAAU,CACR5D,KAAMM,QACNJ,OAAO,GAMTya,KAAM,CACJ3a,KAAMC,QAQRuqB,gBAAiBvqB,OAKjB2Q,MAAO3Q,OAKPswB,OAAQ,CACNvwB,KAAMM,QACNsY,oBAAoB,EACpB9Q,QAAQ,EACRqT,SAAU,kBAQZsH,gBAAiB,CACfziB,KAAMM,SAGRo3B,YAAa,CACXx3B,OAAO,EACPib,SAAU,sBAGZwc,sBAAuB,CACrBz3B,MAAO,2CAKT03B,gBAAiBhpB,MA8EjBwD,KAAM,CACJpS,KAAMQ,OACNN,MAAO,KACE,CACL2S,WAAY,CACV,UAAW,WAAY,QAAS,QAAS,MACzC,OAAQ,OAAQ,SAAU,YAAa,UAAW,WAAY,YAEhEwS,SAAU,CAAC,SAAU,SAAU,UAAW,YAAa,WAAY,SAAU,YAC7EwS,cAAe,CAAC,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,OAC1DhU,eAAgB,EAChBkB,KAAM,OACNte,SAAU,WACVgsB,MAAO,QACPpa,MAAO,QACPyf,OAAQ,SACRtK,WAAYtpB,IACV,MAAM6zB,EAAU93B,OAAOiE,EAAE6R,MAAMpQ,QAAQ,MAAOqoB,GAAK,OAAOxf,OAAOwf,EAAExqB,QAAUwqB,GAC7E,MAAO,CAAC9pB,EAAEuO,MAAQ,EAAGvO,EAAEyR,IAAKoiB,GAASpM,KAAK,MAE5CqM,UAAWh0B,IACT,MAAMsS,EAAQtS,EAAKi0B,MAAM,KACnB5f,EAAQ,IAAIvC,KAClB,IAAIsC,EAAM3F,EAAQ4F,EAAMxE,WAAYkC,EAAOsC,EAAMnE,cAgBjD,GAdqB,IAAjBoC,EAAM9S,QACRuS,EAAOH,SAASU,EAAM,IAClBA,EAAM,GAAG9S,OAAS,GAAKuS,GAAQ,IACjCA,GAAQA,EAAO,GAAK,IAAO,MAE7BtD,EAAQmD,SAASU,EAAM,IAAM,EAC7B8B,EAAOxC,SAASU,EAAM,KACI,IAAjBA,EAAM9S,QACfiP,EAAQmD,SAASU,EAAM,IAAM,EAC7B8B,EAAOxC,SAASU,EAAM,KACI,IAAjBA,EAAM9S,SACf4U,EAAOxC,SAASU,EAAM,UAGXnU,IAATiW,EACF,MAAO,CAACzC,IAAKyC,EAAM3F,QAAOsD,SAG9BwN,YAAa,CAAC2U,EAAWC,IAChBD,EAAY,IAAMC,KAejCnW,IAAK,CACHhiB,KAAMC,OACNkb,SAAU,eAYZ8G,IAAK,CACHjiB,KAAMC,OACNkb,SAAU,eAMZid,SAAU,CACRp4B,KAAM8V,KAEN5V,MAAO,IAMTm4B,SAAU,CACRr4B,KAAM8V,KACN5V,MAAO,IAGTo4B,SAAU,CACRt4B,KAAMM,QACNH,SAAU,+CAGZo4B,KAAM,CACJv4B,KAAMM,QACNJ,MAAO2c,UAAUC,UAAUvG,MAAM,wCAGnCiiB,sBAAuB,CACrBx4B,KAAMM,QACNJ,MAAuE,KAAhE2E,SAASC,cAAc,OAAO0H,MAAMisB,yBAG7CC,gBAAiB,CACfx4B,OAAO,GAGTy4B,oBAAqBr4B,QAErBs4B,oBAAqBt4B,SAIzBG,uBACE,MAAO,CACL,yBACA,oDACA,uDACA,qDACA,+DAIJgb,QACEzR,MAAMyR,QACNza,KAAK63B,eAAiB73B,KAAK83B,UAAUr3B,KAAKT,MAC1CA,KAAK+3B,YAAc/3B,KAAK4a,OAAOna,KAAKT,MACpCA,KAAKg4B,iCAAmCh4B,KAAKi4B,4BAA4Bx3B,KAAKT,MAE9E,MAAMk4B,EAAgB5uB,IACpB,MAAM6uB,EAAO7uB,EAAEqR,eACTyd,EAAaD,EAAK1qB,QAAQzN,KAAKT,eACrC,OAEc,IAFP44B,EAAKxhB,MAAM,EAAGyhB,GAClB3tB,OAAOwrB,GAAMA,EAAGoC,cAA4C,iBAA5BpC,EAAGoC,aAAa,SAChD71B,QAGL6d,YAAYrgB,KAAM,MAAOsJ,IAKlB4uB,EAAc5uB,IACjBtJ,KAAKwM,SAITxM,KAAK0a,iBAAiB,WAAYpR,IAC3B4uB,EAAc5uB,IACjBA,EAAEhH,mBAGNtC,KAAK0a,iBAAiB,UAAW1a,KAAKgqB,WAAWvpB,KAAKT,OACtDA,KAAK0a,iBAAiB,QAAS1a,KAAKs4B,aAAa73B,KAAKT,OACtDA,KAAK0a,iBAAiB,QAASpR,GAAKtJ,KAAKs3B,UAAYhuB,EAAE2R,OAAOoC,QAC9Drd,KAAK0a,iBAAiB,OAAQpR,IAAMtJ,KAAKuvB,QAAUvvB,KAAKoB,YAG1Dm3B,eACEv4B,KAAK8X,EAAEwX,QAAQpS,gBAAgB,mBAC/Bld,KAAK43B,qBAAsB,EAE3B53B,KAAK8X,EAAEwX,QAAQ5U,iBAAiB,iBAAkBpR,GAAKtJ,KAAKuvB,OAASjmB,EAAE4G,OAAOhR,OAE9Ec,KAAKw4B,gBAAgB9d,iBAAiB,QAAS1a,KAAK2sB,OAAOlsB,KAAKT,OAChEA,KAAKw4B,gBAAgB9d,iBAAiB,cAAe1a,KAAKy4B,gBAAgBh4B,KAAKT,OAC/EA,KAAK8X,EAAEwX,QAAQ5U,iBAAiB,8BAA+B1a,KAAK+3B,aAGpE/3B,KAAKw4B,gBAAgB9d,iBAAiB,QAAS,IAAM1a,KAAK6a,aAAaC,aAAY,IAEnF9a,KAAK8X,EAAEwX,QAAQ5U,iBAAiB,uBAAwB1a,KAAK04B,sBAAsBj4B,KAAKT,OAM1F+c,uBACE/T,MAAM+T,uBAEF/c,KAAK43B,qBACP53B,KAAK8X,EAAEwX,QAAQtS,oBAAoB,8BAA+Bhd,KAAK+3B,aAGzE/3B,KAAKuvB,QAAS,EAMhB/iB,OACOxM,KAAK6P,UAAa7P,KAAK6xB,WAC1B7xB,KAAKuvB,QAAS,GAIlB5C,OAAOrjB,GACDA,GACFA,EAAE0G,kBAEJhQ,KAAK4a,SACL5a,KAAK24B,QAMPA,QACM34B,KAAK43B,qBACP53B,KAAK8X,EAAEwX,QAAQqJ,QAInBp5B,oBACE,OAAOS,KAAK44B,SAGdC,mBACE,GAAI74B,KAAKT,cAGP,OAAOS,KAAKT,cAAcsb,aAAe7a,KAAKT,cAAcsb,aAC1D7a,KAAKT,cAAcqB,aAAeZ,KAAKT,cAAcqB,aACnDwZ,OAAO0e,OAAS1e,OAAO0e,OAAO94B,KAAKT,eAAiBS,KAAKT,cAIjEw5B,WAAW9hB,GAET,IAAI3B,EAAQ,sDAAsD2I,KAAKhH,GACvE,GAAK3B,EAAL,CAIA,IAAI8B,EAAO,IAAItC,KAAK,EAAG,GAIvB,OAHAsC,EAAKuJ,YAAY/L,SAASU,EAAM,GAAI,KACpC8B,EAAK+K,SAASvN,SAASU,EAAM,GAAI,IAAM,GACvC8B,EAAKgL,QAAQxN,SAASU,EAAM,GAAI,KACzB8B,GAGT4hB,WAAWC,EAAYC,EAAK9nB,GAC1B,OAAQpR,KAAKT,eAAiB05B,GAAcC,IAAQ9nB,EAAK4lB,UAG3DmC,WAAW/hB,GACT,KAAMA,aAAgBtC,MACpB,MAAO,GAGT,MAAMpD,EAAM,CAAC0nB,EAAKC,EAAM,QAAUA,EAAMD,GAAK5rB,QAAQ6rB,EAAMD,GAAK52B,OAAS62B,EAAI72B,QAE7E,IAAI82B,EAAW,GACXC,EAAU,OACVC,EAAUpiB,EAAKlE,cAanB,OAZIsmB,EAAU,GACZA,GAAWA,EACXF,EAAW,IACXC,EAAU,UACDniB,EAAKlE,eAAiB,MAC/BomB,EAAW,IACXC,EAAU,UAML,CAHMD,EAAW5nB,EAAI8nB,EAASD,GACvB7nB,EAAI0F,EAAKvE,WAAa,GACxBnB,EAAI0F,EAAK/E,YACKsY,KAAK,KAGjClb,eAAe8f,GACTA,IAAWvvB,KAAK43B,qBAClB53B,KAAKu4B,eAEHv4B,KAAK43B,sBACP53B,KAAK8X,EAAEwX,QAAQC,OAASA,GAEtBA,GACFvvB,KAAKi4B,8BAITwB,qBAAqBlY,EAAciL,GACjC,QAAqBrrB,IAAjBogB,QAA6CpgB,IAAfqrB,EAChC,OAEExsB,KAAK05B,sBACP15B,KAAK25B,kBAAmB,GAE1B,MAAMC,EAAarY,GAAgBiL,EAAWlM,EAAiBmM,kBAAkBlL,IAC3EriB,EAAQc,KAAKm5B,WAAW5X,GAC1BriB,IAAUc,KAAKd,QACjBc,KAAKoB,SAASw4B,GACd55B,KAAKd,MAAQA,GAEfc,KAAK05B,qBAAsB,EAC3B15B,KAAK25B,kBAAmB,EACxB35B,KAAK65B,0BAA2B,EAChC75B,KAAKy2B,aAAelV,EACpBvhB,KAAK65B,0BAA2B,EAChC75B,KAAK85B,YAAcvY,EAAeqY,EAAa,GAGjD1O,oBAAoB1J,EAAagL,QACXrrB,IAAhBqgB,QAA4CrgB,IAAfqrB,IAGjCxsB,KAAK05B,qBAAsB,EACtB15B,KAAK65B,0BAA6B75B,KAAKs3B,WAC1Ct3B,KAAK85B,YAActY,EAAcgL,EAAWlM,EAAiBmM,kBAAkBjL,IAAgB,KAInGuY,gBAAgB76B,GACVA,EACFc,KAAK+D,aAAa,YAAa,IAE/B/D,KAAKkd,gBAAgB,aAKzB8c,kBAAkBC,EAAOC,GACvB,GAAIA,EACF,OAAOD,EAIXE,kBAAkBlwB,EAAU/K,EAAOk7B,GACjC,GAAKl7B,EAAL,CAKA,IAAIkY,EAAOpX,KAAK+4B,WAAW75B,GACtBkY,EAIAkJ,EAAiByB,YAAY/hB,KAAKiK,GAAWmN,KAChDpX,KAAKiK,GAAYmN,GAJjBpX,KAAKd,MAAQk7B,OANbp6B,KAAKiK,GAAY,GAcrByF,cAAcxQ,EAAOk7B,GACfp6B,KAAK25B,kBACP35B,KAAKkb,cAAc,IAAIC,YAAY,SAAU,CAACC,SAAS,KAEzDpb,KAAKm6B,kBAAkB,gBAAiBj7B,EAAOk7B,GAGjDC,YAAYn7B,EAAOk7B,GACjBp6B,KAAKm6B,kBAAkB,WAAYj7B,EAAOk7B,GAG5CE,YAAYp7B,EAAOk7B,GACjBp6B,KAAKm6B,kBAAkB,WAAYj7B,EAAOk7B,GAG5CnC,8BACE,GAAKj4B,KAAK43B,oBAAV,CAGA,IAAK53B,KAAK02B,YAAa,CACrB,MAAM6D,EAAYv6B,KAAKT,cAAcyZ,wBAE/BwhB,EAAcD,EAAUnR,IAAMhP,OAAOqgB,YAAc,EAGzD,GAFmBF,EAAU3hB,KAAO5Y,KAAKkZ,YAAc,EAAIkB,OAAOsgB,WAAa,EAE/D,CACd,MAAMC,EAAgB7tB,KAAKkU,IAAI5G,OAAOsgB,WAAY72B,SAAS4U,gBAAgBS,aAC3ElZ,KAAK8X,EAAEwX,QAAQvrB,aAAa,gBAAiB,IAC7C/D,KAAK8X,EAAEwX,QAAQ9jB,MAAM6c,eAAe,QACpCroB,KAAK8X,EAAEwX,QAAQ9jB,MAAMqN,MAAS8hB,EAAgBJ,EAAU1hB,MAAS,UAEjE7Y,KAAK8X,EAAEwX,QAAQpS,gBAAgB,iBAC/Bld,KAAK8X,EAAEwX,QAAQ9jB,MAAM6c,eAAe,SACpCroB,KAAK8X,EAAEwX,QAAQ9jB,MAAMoN,KAAO2hB,EAAU3hB,KAAO,KAG/C,GAAI4hB,EAAa,CACf,MAAMI,EAAiB9tB,KAAKkU,IAAI5G,OAAOqgB,YAAa52B,SAAS4U,gBAAgBkT,cAC7E3rB,KAAK8X,EAAEwX,QAAQvrB,aAAa,iBAAkB,IAC9C/D,KAAK8X,EAAEwX,QAAQ9jB,MAAM6c,eAAe,OACpCroB,KAAK8X,EAAEwX,QAAQ9jB,MAAM2d,OAAUyR,EAAiBL,EAAUnR,IAAO,UAEjEppB,KAAK8X,EAAEwX,QAAQpS,gBAAgB,kBAC/Bld,KAAK8X,EAAEwX,QAAQ9jB,MAAM6c,eAAe,UACpCroB,KAAK8X,EAAEwX,QAAQ9jB,MAAM4d,IAAMmR,EAAUpR,OAAS,KAIlDnpB,KAAK8X,EAAEwX,QAAQvrB,aAAa,MAC1BikB,iBAAiBhoB,KAAKT,eAAe0oB,iBAAiB,cAExDjoB,KAAKw4B,gBAAgB1M,2BAGvB+O,qBACM76B,KAAK43B,qBAAuB53B,KAAK8X,EAAEwX,QAAQC,QAC7CvvB,KAAKi4B,8BAIT6C,mBACE96B,KAAK+6B,qBAAuB/6B,KAAKid,aAAa,eAAkBjd,KAAK6a,cAAgB7a,KAAK6a,aAAaoC,aAAa,cAEpH,IAAI+d,EAAwBh7B,KAAK+4B,WAAW/4B,KAAKwpB,iBAE7CA,EAAkBxpB,KAAKw2B,eAAiBx2B,KAAKw4B,gBAAgBhP,iBAC/DwR,GAAyB,IAAIlmB,KAE3BkmB,GACF1a,EAAiB0B,aAAawH,EAAiBxpB,KAAKo3B,SAAUp3B,KAAKq3B,UACnEr3B,KAAKw4B,gBAAgBhP,gBAAkBA,EAEvCxpB,KAAKw4B,gBAAgBhP,gBACnBlJ,EAAiBoQ,gBAAgBlH,EAAiB,CAACxpB,KAAKo3B,SAAUp3B,KAAKq3B,WAG3Er3B,KAAKw4B,gBAAgB1N,aAAa9qB,KAAKw4B,gBAAgBhX,aAAexhB,KAAKw4B,gBAAgBhP,iBAE3FxpB,KAAK65B,0BAA2B,EAChC75B,KAAKw4B,gBAAgBhX,YAAcxhB,KAAKw4B,gBAAgBhX,aAAexhB,KAAKw4B,gBAAgBhP,gBAC5FxpB,KAAK65B,0BAA2B,EAEhCzf,OAAOM,iBAAiB,SAAU1a,KAAK63B,gBAAgB,GACvD73B,KAAK0a,iBAAiB,cAAe1a,KAAKg4B,kCAEtCh4B,KAAKw3B,wBACPx3B,KAAK42B,gBAAkB52B,KAAKi7B,qCAAqCj7B,KAAKk7B,gBAGpEl7B,KAAK23B,qBACP33B,KAAKw4B,gBAAgB9c,QACrB1b,KAAK23B,qBAAsB,GAE3B33B,KAAK4a,SAGH5a,KAAKs3B,UAAYt3B,KAAK6a,cACxB7a,KAAK6a,aAAawC,OAGpBrd,KAAK8nB,eAEL9nB,KAAK03B,iBAAkB,EAKzBuD,qCAAqC/R,GAEnC,IADA,IAAI2F,EAAS,GACN3F,GAAS,CACd,GAAiE,UAA7D9O,OAAO4N,iBAAiBkB,GAASuO,wBAAqC,CACxE,IAAI0D,EAAiBjS,EAAQ1d,MAAMisB,wBACnCvO,EAAQ1d,MAAMisB,wBAA0B,OACxC5I,EAAO7d,KAAK,CACVkY,QAASA,EACTiS,eAAgBA,IAGpBjS,EAAUA,EAAQgS,cAEpB,OAAOrM,EAGTuM,mBAgBE,GAfAp7B,KAAK03B,iBAAkB,EAEvBtd,OAAO4C,oBAAoB,SAAUhd,KAAK63B,gBAAgB,GAC1D73B,KAAKgd,oBAAoB,cAAehd,KAAKg4B,kCAEzCh4B,KAAK42B,kBACP52B,KAAK42B,gBAAgBpR,QAAQ6V,GAC3BA,EAAUnS,QAAQ1d,MAAMisB,wBAA0B4D,EAAUF,gBAC9Dn7B,KAAK42B,gBAAkB,IAGzB52B,KAAK8nB,eAGL9nB,KAAK65B,0BAA2B,EAC5B75B,KAAKoR,KAAK4lB,UAAW,CACvB,IAAI4C,EAAa55B,KAAK85B,aAAe,GACrC,MAAMwB,EAAat7B,KAAKoR,KAAK4lB,UAAU4C,GACjC2B,EAAaD,GACjBt7B,KAAK+4B,cAAcuC,EAAWvmB,QAAQumB,EAAW7pB,MAAQ,KAAK6pB,EAAW3mB,OAEvE3U,KAAKw7B,aAAaD,GACpBv7B,KAAKw2B,cAAgB+E,GAErBv7B,KAAKw2B,cAAgB,KACrBx2B,KAAK85B,YAAcF,QAEZ55B,KAAKy2B,eACdz2B,KAAKw2B,cAAgBx2B,KAAKy2B,cAE5Bz2B,KAAK65B,0BAA2B,EAE5B75B,KAAK64B,cAAgB74B,KAAK64B,aAAa4C,iBACzCz7B,KAAK64B,aAAa4C,eAAiBz7B,KAAK64B,aAAa6C,cAEvD17B,KAAKoB,WASPA,SAASlC,GAIP,OAFAc,KAAKyC,SAAU,EACfvD,OAAkBiC,IAAVjC,EAAsBA,EAAQc,KAAK85B,cAClC95B,KAAKyC,SAAWzC,KAAK2C,cAAczD,IAW9CyD,cAAczD,GACZ,IAAIy8B,GAAcz8B,GACfc,KAAKw2B,eAAiBt3B,IAAUc,KAAKoR,KAAKob,WAAWlM,EAAiBmM,kBAAkBzsB,KAAKw2B,gBAC5FoF,GAAe57B,KAAKw2B,eACtBlW,EAAiB0B,aAAahiB,KAAKw2B,cAAex2B,KAAKo3B,SAAUp3B,KAAKq3B,UAEpEwE,GAAgB,EAWpB,OAVI77B,KAAKT,gBACHS,KAAKT,cAAcoD,cAErBk5B,EAAgB77B,KAAKT,cAAcoD,cAAczD,GACxCc,KAAKT,cAAc6B,WAE5By6B,EAAgB77B,KAAKT,cAAc6B,SAASlC,KAIzCy8B,GAAcC,GAAeC,EAGtC/D,UAAUxuB,GACJA,EAAE2R,SAAWb,QAAWpa,KAAKw4B,gBAAgBsD,SAASxyB,EAAE2R,SAC1Djb,KAAKi4B,8BAITrd,SACM5a,KAAKs3B,SACPt3B,KAAK43B,qBAAuB53B,KAAKw4B,gBAAgB9c,QAEjD1b,KAAKT,cAAcmc,QAIvB+c,kBACEz4B,KAAK4a,SACL5a,KAAK+7B,mBAAmB,EAAG/7B,KAAK85B,YAAYt3B,QAG9Cu5B,mBAAmB5nB,EAAGuZ,GAChB1tB,KAAK64B,cAAgB74B,KAAK64B,aAAa5D,mBACzCj1B,KAAK64B,aAAa5D,kBAAkB9gB,EAAGuZ,GAO3C+B,UAAUnmB,GAGR,IAFA,IAAI8E,EAAO,CAAC,OAAQ,KAAM,QAAS,MAAO,OAEjC7L,EAAI,EAAGA,EAAI6L,EAAK5L,OAAQD,IAAK,CACpC,IAAImtB,EAAIthB,EAAK7L,GACb,GAAIotB,IAAqBC,yBAAyBtmB,EAAGomB,GACnD,OAAOA,GAKb8L,aAAat4B,GACX,OAAOA,IAAM0J,MAAM1J,EAAEoT,WAGvB0T,WAAW1gB,GACT,GAAItJ,KAAKs3B,SAAU,EAOuB,IAHtB,CAChB,GAEc7pB,QAAQnE,EAAE3H,UACxB2H,EAAEhH,iBAIN,OAAQtC,KAAKyvB,UAAUnmB,IACrB,IAAK,OACL,IAAK,KAEHA,EAAEhH,iBAEEtC,KAAKuvB,QACPvvB,KAAKw4B,gBAAgB9c,QACrB1b,KAAKw4B,gBAAgBxO,WAAW1gB,KAEhCtJ,KAAK23B,qBAAsB,EAC3B33B,KAAKwM,QAGP,MACF,IAAK,QAAS,CACZ,MAAM8uB,EAAat7B,KAAKoR,KAAK4lB,UAAUh3B,KAAK85B,aACtCyB,EAAaD,GACjBt7B,KAAK+4B,WAAWuC,EAAWvmB,KAAO,KAAOumB,EAAW7pB,MAAQ,GAAK,IAAM6pB,EAAW3mB,KAEhF3U,KAAK43B,qBAAuB53B,KAAKw4B,gBAAgBhX,aAAexhB,KAAKw7B,aAAaD,KACpFv7B,KAAKw2B,cAAgBx2B,KAAKw4B,gBAAgBhX,aAE5CxhB,KAAK24B,QACL,MAEF,IAAK,MACH34B,KAAKy2B,aAAez2B,KAAKw2B,cACzBx2B,KAAK2sB,SACL,MACF,IAAK,MACC3sB,KAAKuvB,SACPjmB,EAAEhH,iBAEFtC,KAAK+7B,mBAAmB,EAAG,GACvBzyB,EAAEkS,SACJxb,KAAKw4B,gBAAgB5N,eAErB5qB,KAAKw4B,gBAAgB9c,QACrB1b,KAAKw4B,gBAAgBrN,WAAWnrB,KAAKy2B,iBAQ/CuF,eAAe5kB,EAAM4J,EAAKC,GACpB7J,IAAS4J,GAAOC,KAClBjhB,KAAKyC,SAAW6d,EAAiB0B,aAAa5K,EAAM4J,EAAKC,IAI7DqX,aAAahvB,IACNtJ,KAAKuvB,QAAUvvB,KAAKT,cAAcL,OACrCc,KAAKwM,OAEPxM,KAAKi8B,yBAGPA,uBAAuB/8B,GACrB,GAAIc,KAAKuvB,QAAUvvB,KAAK85B,YAAa,CACnC,MAAMwB,EAAat7B,KAAKoR,KAAK4lB,WAAah3B,KAAKoR,KAAK4lB,UAAUh3B,KAAK85B,aAC7DyB,EAAaD,GACjBt7B,KAAK+4B,cAAcuC,EAAWvmB,QAAQumB,EAAW7pB,MAAQ,KAAK6pB,EAAW3mB,OAEvE3U,KAAKw7B,aAAaD,KACpBv7B,KAAK65B,0BAA2B,EAC3BvZ,EAAiByB,YAAYwZ,EAAYv7B,KAAKy2B,gBACjDz2B,KAAKy2B,aAAe8E,GAEtBv7B,KAAK65B,0BAA2B,IAKtCqC,qBAAqBzF,EAAclH,EAAQmI,GACrCnI,IAAWmI,GACb13B,KAAKw4B,gBAAgBhO,sBAIzBgO,sBACE,OAAOx4B,KAAK8X,EAAEwX,QAAQnrB,QAAQmL,cAAc,uBCtwBhD,MAAM6sB,UACJ9c,EACEnF,EACE6F,YACEuJ,YACE+M,EACErW,YAAsBC,WAChCrW,sBACE,OAAOlL;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;EAsCTC,gBACE,MAAO,qBAGTuhB,qBACE,MAAO,QAGTphB,wBACE,MAAO,CAIL0yB,mBAAoB,CAClBxyB,KAAMM,QACNJ,OAAO,GAMT2Q,SAAU,CACR7Q,KAAMM,QACNJ,OAAO,EACP0Y,oBAAoB,GAMtBvM,aAAcpM,OAKd2yB,YAAa3yB,OAKb4yB,SAAU,CACR7yB,KAAMM,QACNJ,OAAO,EACP0Y,oBAAoB,GAMtBnV,QAAS,CACPzD,KAAMM,QACNsY,oBAAoB,EACpB9Q,QAAQ,EACR5H,OAAO,GAGTk9B,gBAAiBn9B,QAIrBQ,uBACE,MAAO,CACL,0CACA,oCAIJgb,QACEzR,MAAMyR,QAGNmO,YAAgB5oB,KAAM,IAAMA,KAAKT,cAAc6B,SAAW,QAK1DpB,KAAKT,cAAcmb,iBAAiB,SAAU,KACX,KAA7B1a,KAAKT,cAAcL,QACrBc,KAAK25B,kBAAmB,EACxB35B,KAAKd,MAAQ,GACbc,KAAKoB,WACLpB,KAAK25B,kBAAmB,KAK9BjB,sBAAsBpvB,GAChBtJ,KAAK+6B,sBAAwB/6B,KAAKid,aAAa,WACjDjd,KAAK6a,aAAa9W,aAAa,aAAc,IACnC/D,KAAKid,aAAa,YAC5Bjd,KAAK6a,aAAawC,OAEhB/T,EAAE4G,OAAO+iB,cAAsE,IAAvD3pB,EAAE4G,OAAO+iB,YAAYtY,eAAelN,QAAQzN,OACtEsJ,EAAEhH,iBAIN+5B,QAAQ/yB,GACNA,EAAE0G,kBACFhQ,KAAMA,KAAK43B,qBAAuB53B,KAAK8X,EAAEwX,QAAQC,OAAU,QAAU,UAGvEqJ,SACE,OAAO54B,KAAK8X,EAAEnY,MAGhBm6B,gBAAgB56B,GACdc,KAAKT,cAAcL,MAAQA,EAG7B46B,kBACE,OAAO95B,KAAKT,cAAcL,MAG5Bo9B,iBAAiB/M,GACf,OAAOjwB,QAAQiwB,GAAQlZ,WAMzBwE,mBACE,OAAO7a,KAAK44B,UAAY54B,KAG1Bu8B,qBAAqBC,GAGnBx8B,KAAKT,cAAc+b,WAAWhM,cAAc,yBACzCvL,aAAa,aAAcy4B,IAIlC9zB,eAAec,OAAO2yB,EAAkBx9B,GAAIw9B,sBCvR5C,MAAMM,EAAoB54B,SAASC,cAAc,YACjD24B,EAAkB14B,aAAa,QAAS,kBAExC04B,EAAkBz4B,UAAa,4qFA+F/BH,SAASI,KAAKC,YAAYu4B,EAAkBt4B,2CClG5CjG,EAAAw+B,EAAAv5B,GAAAjF,EAAAgF,EAAAC,EAAA,6BAAAw5B,IAAA,IAAAC,EAAA1+B,EAAA,KACO,MAAMy+B,UAAiBE,IAC1Bjd,YAAYkd,GACR9zB,MAAM8zB,GAKN98B,KAAK+8B,eAAiB,IAAIC,IAK1Bh9B,KAAKi9B,kBAAoB,IAAID,IAI7Bh9B,KAAKk9B,SAAW,IAAIF,IAMpBh9B,KAAKm9B,WAAa,KAIlBn9B,KAAKo9B,WAAa,KAIlBp9B,KAAKq9B,SAAU,EAIfr9B,KAAKs9B,iBAAkB,EAIvBt9B,KAAKu9B,WAAa,EAIlBv9B,KAAKw9B,WAAa,EAClBx9B,KAAKy9B,WAAY,EAMrBC,gBAAgBC,GACZn+B,OAAO4O,KAAKuvB,GAAOnY,QAAS/W,IACxB,MAAMmvB,EAAUD,EAAMlvB,GAAMovB,EAAK79B,KAAK89B,YAAYnxB,OAAO8B,IAAOsvB,EAAWF,EAAG79B,KAAKg+B,UAGnFH,EAAGI,MAAQL,EAAQK,OAASL,EAAQM,YAAc,IAC7CN,EAAQO,aAAe,GAC5BN,EAAG3Y,OAAS0Y,EAAQ1Y,QAAU0Y,EAAQtkB,WAAa,IAC9CskB,EAAQQ,cAAgB,GAC7B,MAAMC,EAAOR,EAAG79B,KAAKg+B,UACfzuB,EAAOvP,KAAKs+B,iBAAiB3xB,OAAO8B,IAC1C,GAAIc,EAAM,CACN,IAAImT,OACSvhB,IAATk9B,IACA9uB,EAAK8uB,KAAOA,OACKl9B,IAAb48B,GACArb,EAAQ2b,EACRr+B,KAAKu9B,cAGL7a,EAAQ2b,EAAON,GAGvB/9B,KAAKw9B,WAAax9B,KAAKw9B,WAAa9a,KAGvC1iB,KAAKu9B,YAINv9B,KAAKu+B,kBACLv+B,KAAKw+B,mBAJLr2B,QAAQC,KAAM,0BAWtBm2B,kBAEIv+B,KAAKy+B,UAAUz+B,KAAKg+B,UAChBlxB,KAAKC,MAAM/M,KAAKw9B,WAAax9B,KAAKu9B,YAE1CO,YAAYY,GACR,OAAQ1+B,KAAKk9B,SAASwB,GAAO1+B,KAAKk9B,SAASwB,IAAQ,GAEvDJ,iBAAiBI,GACb,OAAO1+B,KAAKi9B,kBAAkBt0B,IAAI+1B,IAAQ1+B,KAAK+8B,eAAep0B,IAAI+1B,GAEtEC,SAASD,GACL,MAAMnvB,EAAOvP,KAAKs+B,iBAAiBI,GACnC,OAAOnvB,GAAQA,EAAK8uB,KAMxBO,aAAaF,GACT,MAAMnvB,EAAOvP,KAAK+8B,eAAep0B,IAAI+1B,GACrC,OAAOnvB,EAAOA,EAAKsvB,IAAOH,EAAO1+B,KAAK8+B,OAAW9+B,KAAK++B,SAE1DC,iBAAiBC,EAAOC,GACpB,OAAc,IAAVD,EACO,EAEPC,EAAQl/B,KAAKm/B,YAAcn/B,KAAKo/B,UACzBp/B,KAAKq/B,YAAc,EAEvBvyB,KAAKmU,IAAI,EAAGnU,KAAKkU,IAAIhhB,KAAKq/B,YAAc,EAAGvyB,KAAK0H,OAAQyqB,EAAQC,GAAS,EAAKl/B,KAAK8+B,UAE9FQ,WAAWL,EAAOC,GACd,GAAiC,IAA7Bl/B,KAAK+8B,eAAesB,KACpB,OAAOr+B,KAAKg/B,iBAAiBC,EAAOC,GAExC,GAAIl/B,KAAKu/B,OAAS,EAEd,OADAp3B,QAAQq3B,MAAM,+BACPx/B,KAAKg/B,iBAAiBC,EAAOC,GAExC,GAAIl/B,KAAKy/B,MAAQ,EAEb,OADAt3B,QAAQq3B,MAAM,8BACPx/B,KAAKg/B,iBAAiBC,EAAOC,GAExC,MAAMQ,EAAY1/B,KAAKs+B,iBAAiBt+B,KAAKu/B,QAASI,EAAW3/B,KAAKs+B,iBAAiBt+B,KAAKy/B,OAAQG,EAAWF,EAAUb,IAAKgB,EAAWD,EAAWF,EAAUrB,KAAMyB,EAAUH,EAASd,IAAKkB,EAAUD,EAAUH,EAAStB,KACzN,GAAI0B,EAAUd,EAEV,OAAOj/B,KAAKg/B,iBAAiBC,EAAOC,GAExC,GAAIU,EAAWV,EAEX,OAAOl/B,KAAKg/B,iBAAiBC,EAAOC,GAExC,GAAIU,GAAYX,GAASY,GAAYZ,EAEjC,OAAOj/B,KAAKu/B,OAEhB,GAAIQ,GAAWb,GAASY,GAAWZ,EAE/B,OAAOl/B,KAAKy/B,MAGhB,IAAIO,EAAShgC,KAAKy/B,MAAOQ,EAASjgC,KAAKu/B,OACvC,OAAa,CACT,MAAMW,EAAepzB,KAAKC,OAAOizB,EAASC,GAAU,GAAI5e,EAAYrhB,KAAK+8B,eAAep0B,IAAIu3B,GAAeC,EAAO9e,EAAUwd,IAAKuB,EAAOD,EAAO9e,EAAUgd,KACzJ,GAAK8B,GAAQlB,GAASkB,GAAQjB,GACzBkB,GAAQnB,GAASmB,GAAQlB,EAC1B,OAAOgB,EAEFE,EAAOnB,EACZgB,EAASC,EAAe,EAEnBC,EAAOjB,IACZc,EAASE,EAAe,IAQpCG,kBACI,GAAuB,IAAnBrgC,KAAKo/B,WAAwC,IAArBp/B,KAAKq/B,YAC7Br/B,KAAKsgC,kBAEJ,CACD,MAAMpB,EAAQpyB,KAAKkU,IAAIhhB,KAAKm/B,YAAan/B,KAAKugC,gBAAkBvgC,KAAKo/B,UAAYp/B,KAAKwgC,WAAYvB,EAAQnyB,KAAKmU,IAAI,EAAGie,EAAQl/B,KAAKo/B,UAAa,EAAIp/B,KAAKwgC,WACzJxgC,KAAKygC,UAAUxB,EAAOC,IAM9BoB,cACItgC,KAAKu/B,QAAU,EACfv/B,KAAKy/B,OAAS,EACdz/B,KAAK0gC,aAAe,EACpB1gC,KAAK2gC,aAAe,EACpB,MAAMC,EAAQ5gC,KAAKi9B,kBACnBj9B,KAAKi9B,kBAAoBj9B,KAAK+8B,eAC9B/8B,KAAKi9B,kBAAkBxL,QACvBzxB,KAAK+8B,eAAiB6D,EACtB5gC,KAAKq9B,SAAU,EAKnBoD,UAAUxB,EAAOC,GACb,MAAM0B,EAAQ5gC,KAAKi9B,kBAIK,OAApBj9B,KAAKm9B,YAA2C,OAApBn9B,KAAKo9B,aACjCp9B,KAAKm9B,WAAan9B,KAAKs/B,WAAWL,EAAOC,GACzCl/B,KAAKo9B,WAAap9B,KAAK4+B,aAAa5+B,KAAKm9B,aAE7C,IAAI0D,EAAa7gC,KAAK2+B,SAAS3+B,KAAKm9B,iBACjBh8B,IAAf0/B,IACAA,EAAa7gC,KAAK8gC,WAItB,IAAIC,EAAY,EAkBhB,IAjBI/gC,KAAKo9B,WAAayD,EAAa7gC,KAAK++B,SAAWE,IAC/C8B,EAAY9B,GAASj/B,KAAKo9B,WAAayD,EAAa7gC,KAAK++B,WAEzD/+B,KAAKo9B,WAAa8B,IAClB6B,EAAY7B,EAAQl/B,KAAKo9B,YAEzB2D,IACA/gC,KAAKugC,iBAAmBQ,EACxB9B,GAAS8B,EACT7B,GAAS6B,EACT/gC,KAAKghC,cAAgBD,GAGzBH,EAAM9X,IAAI9oB,KAAKm9B,WAAY,CAAE0B,IAAK7+B,KAAKo9B,WAAYiB,KAAMwC,IACzD7gC,KAAKu/B,OAAUv/B,KAAKy/B,MAAQz/B,KAAKm9B,WACjCn9B,KAAK0gC,aAAgB1gC,KAAK2gC,aAAe3gC,KAAKo9B,WAC9Cp9B,KAAKq9B,SAAU,EACRr9B,KAAK0gC,aAAezB,GAASj/B,KAAKu/B,OAAS,GAAG,CACjD,IAAIlB,EAAOr+B,KAAK2+B,WAAW3+B,KAAKu/B,aACnBp+B,IAATk9B,IACAr+B,KAAKq9B,SAAU,EACfgB,EAAOr+B,KAAK8gC,WAEhB,MAAMjC,EAAO7+B,KAAK0gC,cAAgBrC,EAAOr+B,KAAK++B,SAE9C,GADA6B,EAAM9X,IAAI9oB,KAAKu/B,OAAQ,CAAEV,MAAKR,UACT,IAAjBr+B,KAAKq9B,UAAwC,IAAnBr9B,KAAKy9B,UAC/B,MAGR,KAAOz9B,KAAK2gC,aAAezB,GAASl/B,KAAKy/B,MAAQz/B,KAAKq/B,aAAa,CAC/D,IAAIhB,EAAOr+B,KAAK2+B,SAAS3+B,KAAKy/B,OAM9B,QALat+B,IAATk9B,IACAr+B,KAAKq9B,SAAU,EACfgB,EAAOr+B,KAAK8gC,WAEhBF,EAAM9X,IAAI9oB,KAAKy/B,QAAS,CAAEZ,IAAK7+B,KAAK2gC,aAActC,UAC7B,IAAjBr+B,KAAKq9B,UAAwC,IAAnBr9B,KAAKy9B,UAC/B,MAGAz9B,KAAK2gC,cAAgBtC,EAAOr+B,KAAK++B,SAGzC/+B,KAAKy/B,QAEL,MAAMwB,EAAYjhC,KAAKkhC,kBACnBD,IACAjhC,KAAK0gC,cAAgBO,EACrBjhC,KAAK2gC,cAAgBM,EACrBjhC,KAAKo9B,YAAc6D,EACnBjhC,KAAKugC,iBAAmBU,EACxBL,EAAMpb,QAASjW,GAASA,EAAKsvB,KAAOoC,GACpCjhC,KAAKghC,cAAgBC,GAErBjhC,KAAKq9B,UACLr9B,KAAKi9B,kBAAoBj9B,KAAK+8B,eAC9B/8B,KAAKi9B,kBAAkBxL,QACvBzxB,KAAK+8B,eAAiB6D,GAG9BM,kBACI,OAAoB,IAAhBlhC,KAAKu/B,OACEv/B,KAAK0gC,aAEP1gC,KAAK0gC,cAAgB,EACnB1gC,KAAK0gC,aAAgB1gC,KAAKu/B,OAASv/B,KAAK8+B,OAE1C9+B,KAAKy/B,QAAUz/B,KAAKq/B,YAAc,EAChCr/B,KAAK2gC,aAAe3gC,KAAKm/B,YAE3Bn/B,KAAK2gC,cAAgB3gC,KAAKm/B,YACtBn/B,KAAK2gC,aAAe3gC,KAAKm/B,aAC5Bn/B,KAAKq/B,YAAc,EAAIr/B,KAAKy/B,OAASz/B,KAAK8+B,OAE7C,EAEXqC,oBAGIn4B,MAAMm4B,oBACNnhC,KAAKm/B,YAAcryB,KAAKmU,IAAIjhB,KAAK2gC,aAAc3gC,KAAKm/B,aAGxDiC,UACI,MAAM7B,OAAEA,EAAFE,MAAUA,EAAVN,YAAiBA,GAAgBn/B,KACvCA,KAAKmhC,oBACLnhC,KAAKqgC,kBACLrgC,KAAKqhC,kBACDrhC,KAAKm/B,cAAgBA,GACrBn/B,KAAKshC,kBAETthC,KAAKuhC,wBACLvhC,KAAKwhC,cACgB,IAAjBxhC,KAAKu/B,SAAiC,IAAhBv/B,KAAKy/B,MAC3Bz/B,KAAKyhC,oBAEAzhC,KAAKu/B,SAAWA,GAAUv/B,KAAKy/B,QAAUA,GAC9Cz/B,KAAKs9B,iBACLt9B,KAAK0hC,sBACL1hC,KAAK2hC,qBAGL3hC,KAAK0hC,sBACL1hC,KAAK2hC,mBACL3hC,KAAKyhC,qBAGbA,oBACIzhC,KAAKm9B,WAAa,KAClBn9B,KAAKo9B,WAAa,KAClBp9B,KAAKq9B,SAAU,EAKnBuE,iBAAiBlD,GACb,MAAO,CACH51B,CAAC9I,KAAK6hC,cAAe7hC,KAAK4+B,aAAaF,GACvC51B,CAAC9I,KAAK8hC,uBAAwB,GAMtCC,aAAarD,GACT,MAAO,CACH51B,CAAC9I,KAAKg+B,UAAWh+B,KAAK2+B,SAASD,IAAQ1+B,KAAK8gC,UAC5Ch4B,CAAC9I,KAAKgiC,mBAAoBhiC,KAAKiiC,WAGvCC,mBACIliC,KAAKs9B,iBAAkB,EACvBt9B,KAAKw+B,kBAETgD,aACI,MAAMW,EAAYniC,KAAKs9B,gBACjB8E,EAASpiC,KAAKq9B,QACpBr9B,KAAKs9B,iBAAkB,EACvBt0B,MAAMw4B,WAAW,CAAEW,YAAWC,+CC7VtC,IAAIC,EACWC,eAAeC,IAC1B,OAAOF,GAEXC,iBACID,EAAKjoB,OAAOmoB,YACZ,IACI,IAAIF,EAER,MAAOG,GACHH,SAAYnkC,EAAAoL,EAAA,KAAAC,KAAArL,EAAAuvB,EAAAhtB,KAAA,cAA6B8hC,YAE7C,OAAOF,EAVMI,GCFjBvkC,EAAAgF,EAAAC,EAAA,sBAAAu/B,IACO,MAAM7F,EACTjd,YAAYkd,GAIR98B,KAAK2iC,cAAgB,CAAE/pB,KAAM,EAAGwQ,IAAK,GAIrCppB,KAAK4iC,WAAa,WAIlB5iC,KAAK6iC,cAAgB,CAAE5E,MAAO,EAAG/Y,OAAQ,GAIzCllB,KAAK8iC,gBAAiB,EAKtB9iC,KAAK+iC,gBAAkB,EAKvB/iC,KAAKgjC,gBAAkB,EACvBhjC,KAAKijC,oBAAuBV,IAAch5B,KAAM25B,GAASljC,KAAKmjC,aAAe,IAAID,GAIjFljC,KAAK0gC,aAAe,EAIpB1gC,KAAK2gC,aAAe,EAIpB3gC,KAAKu/B,QAAU,EAIfv/B,KAAKy/B,OAAS,EAIdz/B,KAAKy+B,UAAY,CAAER,MAAO,IAAK/Y,OAAQ,KAIvCllB,KAAK++B,SAAW,EAIhB/+B,KAAKg+B,SAAW,SAIhBh+B,KAAKgiC,kBAAoB,QAIzBhiC,KAAK6hC,aAAe,MAIpB7hC,KAAK8hC,sBAAwB,OAI7B9hC,KAAKugC,gBAAkB,EAKvBvgC,KAAKghC,aAAe,EAKpBhhC,KAAKq/B,YAAc,EAInBr/B,KAAKm/B,YAAc,EAKnBn/B,KAAKwgC,UAAY,IACjBhhC,OAAO8L,OAAOtL,KAAM88B,GAMxBsG,iBACI,OAAOpjC,KAAKq/B,YAEhB+D,eAAehK,GACPA,IAAQp5B,KAAKq/B,cACbr/B,KAAKq/B,YAAcjG,EACnBp5B,KAAKw+B,mBAMb6E,gBACI,OAAOrjC,KAAK4iC,WAEhBS,cAAcC,IAEVA,EAAe,eAARA,EAAwBA,EAAM,cACzBtjC,KAAK4iC,aACb5iC,KAAK4iC,WAAaU,EAClBtjC,KAAKg+B,SAAoB,eAARsF,EAAwB,QAAU,SACnDtjC,KAAKgiC,kBAA6B,eAARsB,EAAwB,SAAW,QAC7DtjC,KAAK6hC,aAAwB,eAARyB,EAAwB,OAAS,MACtDtjC,KAAK8hC,sBAAiC,eAARwB,EAAwB,MAAQ,OAC9DtjC,KAAKw+B,mBAMb+E,eACI,OAAOvjC,KAAKy+B,UAEhB8E,aAAaC,GACT,MAAM1C,UAAEA,EAAFmB,UAAaA,GAAcjiC,KACjCR,OAAO8L,OAAOtL,KAAKy+B,UAAW+E,GAC1B1C,IAAc9gC,KAAK8gC,WAAamB,IAAcjiC,KAAKiiC,YAC/CA,IAAcjiC,KAAKiiC,UACnBjiC,KAAKyjC,mBAGLzjC,KAAKw+B,mBAOjBkF,cACI,OAAO1jC,KAAK++B,SAEhB2E,YAAYC,GACJA,IAAO3jC,KAAK++B,WACZ/+B,KAAK++B,SAAW4E,EAChB3jC,KAAKw+B,mBAMboF,mBACI,OAAO5jC,KAAK6iC,cAEhBe,iBAAiBJ,GACb,MAAMpE,UAAEA,EAAFyE,UAAaA,GAAc7jC,KACjCR,OAAO8L,OAAOtL,KAAK6iC,cAAeW,GAC9BK,IAAc7jC,KAAK6jC,UACnB7jC,KAAKkiC,mBAEA9C,IAAcp/B,KAAKo/B,WACxBp/B,KAAK8jC,mBAMbC,qBACI,OAAO/jC,KAAK2iC,cAEhBoB,mBAAmBC,GACfxkC,OAAO8L,OAAOtL,KAAK2iC,cAAeqB,GAClC,MAAMC,EAASjkC,KAAKugC,gBACpBvgC,KAAKugC,gBAAkBvgC,KAAK2iC,cAAc3iC,KAAK6hC,cAC3CoC,IAAWjkC,KAAKugC,kBAChBvgC,KAAKkkC,uBAAuBD,EAAQjkC,KAAKugC,iBACzCvgC,KAAKuhC,yBAETvhC,KAAK8jC,mBAKTK,iBACQnkC,KAAK8iC,iBACL9iC,KAAK8iC,gBAAiB,EACtB9iC,KAAKohC,WAObgD,cAAc/yB,EAAO8K,EAAW,SAC5B,GAAKxP,OAAO03B,SAAShzB,GAArB,CAOA,OALAA,EAAQvE,KAAKkU,IAAIhhB,KAAKojC,WAAYt2B,KAAKmU,IAAI,EAAG5P,IAC9CrR,KAAK+iC,eAAiB1xB,EACL,YAAb8K,IACAA,EAAW9K,EAAQrR,KAAKu/B,OAASv/B,KAAKskC,KAAO,EAAI,MAAQ,SAErDnoB,GACJ,IAAK,QACDnc,KAAKgjC,gBAAkB,EACvB,MACJ,IAAK,SACDhjC,KAAKgjC,gBAAkB,GACvB,MACJ,IAAK,MACDhjC,KAAKgjC,gBAAkB,EACvB,MACJ,QACI,MAAM,IAAIuB,UAAU,wDAE5BvkC,KAAKw+B,kBACLx+B,KAAKmkC,kBAETr7B,uBAAuBC,SACb/I,KAAKijC,oBACXjjC,KAAKmjC,aAAajoB,iBAAiBnS,GAEvCD,0BAA0BC,SAChB/I,KAAKijC,oBACXjjC,KAAKmjC,aAAazoB,oBAAoB3R,GAE1CD,6BAA6BC,SACnB/I,KAAKijC,oBACXjjC,KAAKmjC,aAAanmB,uBAAuBjU,GAE7C20B,gBAAgB8G,IAGhBf,oBAGAvB,oBAGAH,aAAa0C,GACT,MAAO,CACH37B,CAAC9I,KAAKg+B,UAAWh+B,KAAK8gC,UACtBh4B,CAAC9I,KAAKgiC,mBAAoBhiC,KAAKiiC,WAMvCnD,aACI,OAAO9+B,KAAK8gC,UAAY9gC,KAAK++B,SAKjC+B,gBACI,OAAO9gC,KAAKy+B,UAAUz+B,KAAKg+B,UAK/BiE,gBACI,OAAOjiC,KAAKy+B,UAAUz+B,KAAKgiC,mBAK/B5C,gBACI,OAAOp/B,KAAK6iC,cAAc7iC,KAAKg+B,UAKnC6F,gBACI,OAAO7jC,KAAK6iC,cAAc7iC,KAAKgiC,mBAEnCxD,kBACIx+B,KAAK8iC,gBAAiB,EAE1B1B,UACI,MAAM7B,OAAEA,EAAFE,MAAUA,EAAVN,YAAiBA,GAAgBn/B,KACvCA,KAAKmhC,oBACLnhC,KAAKqgC,kBACLrgC,KAAKqhC,kBACDrhC,KAAKm/B,cAAgBA,GACrBn/B,KAAKshC,mBAEY,IAAjBthC,KAAKu/B,SAAiC,IAAhBv/B,KAAKy/B,MAE3Bz/B,KAAKwhC,cAEAxhC,KAAKu/B,SAAWA,GAAUv/B,KAAKy/B,QAAUA,GAC9Cz/B,KAAK0kC,mBAEL1kC,KAAKwhC,aACLxhC,KAAK0hC,uBAET1hC,KAAK2hC,mBAKTR,oBAGInhC,KAAKm/B,YAAcryB,KAAKmU,IAAI,EAAGjhB,KAAKq/B,YAAcr/B,KAAK8+B,QAE3DuC,kBACI,IAA6B,IAAzBrhC,KAAK+iC,eACL,OAEJ,MAAM1xB,EAAQrR,KAAK+iC,eACb4B,EAAS3kC,KAAKgjC,gBACdnE,EAAM7+B,KAAK4hC,iBAAiBvwB,GAAOrR,KAAK6hC,cACxCxD,EAAOr+B,KAAK+hC,aAAa1wB,GAAOrR,KAAKg+B,UACrC4G,EAAe5kC,KAAKugC,gBAAkBvgC,KAAKo/B,UAAYuF,EACvDE,EAAehG,EAAMR,EAAOsG,EAE5BG,EAAiBh4B,KAAK0H,MAAM1H,KAAKkU,IAAIhhB,KAAKm/B,YAAcn/B,KAAKo/B,UAAWtyB,KAAKmU,IAAI,EAAGjhB,KAAKugC,gBAAkBqE,EAAeC,KAChI7kC,KAAKghC,cAAgBhhC,KAAKugC,gBAAkBuE,EAC5C9kC,KAAKugC,gBAAkBuE,EAE3BtD,WAAWuD,GACP,MAAM70B,EAAS1Q,OAAO8L,OAAO,CACzB05B,MAAOhlC,KAAKu/B,OACZ0F,KAAMjlC,KAAKy/B,MACXrG,IAAKp5B,KAAKskC,KACVlC,QAAQ,EACR8C,aAAcllC,KAAKmlC,cACnBC,YAAaplC,KAAKqlC,cACnBN,GACH/kC,KAAKkb,cAAc,IAAIC,YAAY,cAAe,CAAEjL,YAExDoxB,kBACI,MAAMpxB,EAAS,CACXpH,CAAC9I,KAAKg+B,UAAWh+B,KAAKm/B,aAE1Bn/B,KAAKkb,cAAc,IAAIC,YAAY,mBAAoB,CAAEjL,YAE7DyxB,mBACI,GAAI3hC,KAAKghC,aAAc,CACnB,MAAM9wB,EAAS,CACXpH,CAAC9I,KAAK6hC,cAAe7hC,KAAKghC,aAC1Bl4B,CAAC9I,KAAK8hC,uBAAwB,GAElC9hC,KAAKkb,cAAc,IAAIC,YAAY,oBAAqB,CAAEjL,YAC1DlQ,KAAKghC,aAAe,GAO5BU,sBACI,MAAMxxB,EAAS,GACf,IAAK,IAAIwuB,EAAM1+B,KAAKu/B,OAAQb,GAAO1+B,KAAKy/B,MAAOf,IAC3CxuB,EAAOwuB,GAAO1+B,KAAK4hC,iBAAiBlD,GAExC1+B,KAAKkb,cAAc,IAAIC,YAAY,qBAAsB,CAAEjL,YAK/Do0B,WACI,OAAqB,IAAjBtkC,KAAKu/B,SAAiC,IAAhBv/B,KAAKy/B,MACpB,EAEJz/B,KAAKy/B,MAAQz/B,KAAKu/B,OAAS,EAEtCuE,mBACI,GAAuB,IAAnB9jC,KAAKo/B,WAAmBp/B,KAAKskC,KAAO,EACpCtkC,KAAKw+B,sBAEJ,CACD,MAAMxd,EAAMlU,KAAKmU,IAAI,EAAGjhB,KAAKugC,gBAAkBvgC,KAAKwgC,WAC9Cvf,EAAMnU,KAAKkU,IAAIhhB,KAAKm/B,YAAan/B,KAAKugC,gBAAkBvgC,KAAKo/B,UAAYp/B,KAAKwgC,YAChFxgC,KAAK0gC,aAAe1f,GAAOhhB,KAAK2gC,aAAe1f,IAC/CjhB,KAAKw+B,mBAQjB+C,wBACI,IAAI2D,EAAellC,KAAKmlC,cACpBC,EAAcplC,KAAKqlC,aACvB,IAAK,IAAI9iC,EAAIvC,KAAKu/B,OAAQh9B,GAAKvC,KAAKy/B,MAAOl9B,IAAK,CAC5C,MAAM+iC,EAAQtlC,KAAK4hC,iBAAiBr/B,GAAGvC,KAAK6hC,cACxCyD,GAAStlC,KAAKugC,kBACd2E,EAAe3iC,GAEf+iC,EAAQtlC,KAAKugC,gBAAkBvgC,KAAKo/B,YACpCgG,EAAc7iC,GAKlB2iC,EAAeE,GAGfF,IAAiBllC,KAAKmlC,eAAiBC,IAAgBplC,KAAKqlC,eAC5DrlC,KAAKmlC,cAAgBD,EACrBllC,KAAKqlC,aAAeD,EACpBplC,KAAKwhC,cAGb0C,uBAAuBD,EAAQsB,GAG3B,MAAMC,EAASxlC,KAAKm/B,YAAcn/B,KAAKo/B,WACnC6E,EAASuB,GAAUD,EAASC,KAC5BxlC,KAAK+iC,gBAAkB,4ICjanC,MAAM0C,EAAa,GACbC,EAAe,IAmHrBh9B,eAAec,OAAO,kBAjHtB,cAA4ByW,IAC1BnhB,wBACE,MAAO,CACLiG,KAAM,CACJ/F,KAAMQ,OACN2a,SAAU,eAGZwrB,WAAY,CACV3mC,KAAMC,OACNkb,SAAU,qBAGZyrB,aAAc,CACZ5mC,KAAM2N,OACNwN,SAAU,qBAGZ0rB,aAAc,CACZ7mC,KAAMC,OACNkb,SAAU,qBAGZ2rB,UAAW,CACT9mC,KAAMM,QACNJ,OAAO,EACP6mC,UAAU,EACVj/B,QAAQ,GAGVk/B,QAAS,CACPhnC,KAAMQ,OACNN,MAAO,KACP6mC,UAAU,EACVj/B,QAAQ,IAKdm/B,YAAYC,EAASC,IACdA,GAAWnmC,KAAK2lC,YACnB3lC,KAAKomC,aAITC,kBAAkBl2B,EAAUiqB,QACTj5B,IAAbi5B,GACFp6B,KAAKomC,aAITA,aACOpmC,KAAK+E,OAEV/E,KAAKsmC,eAAc,GAEnBtmC,KAAKqS,QAAQrS,KAAK2lC,WAAY3lC,KAAK4lC,aAAc5lC,KAAK6lC,cAAct8B,KACjEg9B,IACCvmC,KAAKwmC,YAAYD,GACjBvmC,KAAKsmC,eAAc,MAKzBj0B,QAAQ+E,EAAMqvB,EAAQl5B,GAMpB,OALKA,IAAUA,EAAWm4B,GAErBD,EAAWgB,KAAShB,EAAWgB,GAAU,IACzChB,EAAWgB,GAAQrvB,KAAOquB,EAAWgB,GAAQrvB,GAAQ,IAEtDquB,EAAWgB,GAAQrvB,GAAM7J,GACpBk4B,EAAWgB,GAAQrvB,GAAM7J,GAG9BA,IAAam4B,GAAgBD,EAAWgB,GAAQrvB,GAAMsuB,GACjDD,EAAWgB,GAAQrvB,GAAMsuB,GAAcn8B,KAAK,SAASm9B,GAC1D,OAAOA,EAASj8B,OAAO,SAASk8B,GAC9B,OAAOA,EAAOjiC,YAAc6I,OAKlCk4B,EAAWgB,GAAQrvB,GAAM7J,GAAYvN,KAAK4mC,eACxCxvB,EACAqvB,EACAl5B,GAEKk4B,EAAWgB,GAAQrvB,GAAM7J,IAGlCq5B,eAAexvB,EAAMqvB,EAAQl5B,GAC3B,IAAIs5B,EAAM,WAAazvB,EAAO,WAAaqvB,EAK3C,OAJIl5B,IAAam4B,IACfmB,GAAO,WAAat5B,GAGfvN,KAAK+E,KAAK+hC,QAAQ,MAAOD,GAAKt9B,KACnC,SAASg9B,GAEP,OADAA,EAAe5f,UACR4f,GAET,WACE,OAAO,OAKbQ,iBACEtB,EAAWzlC,KAAK4lC,cAAc5lC,KAAK2lC,YAAc,GACjD3lC,KAAKomC,qFClHF,MAAMY,EACTpnB,YAAYkd,GAKR98B,KAAKinC,iBAAmB,KAKxBjnC,KAAKknC,iBAAmB,KAIxBlnC,KAAKmnC,kBAAoB,KAIzBnnC,KAAKonC,cAAgB,KAIrBpnC,KAAKqnC,OAAS,GAIdrnC,KAAKq/B,YAAc,KAKnBr/B,KAAKsnC,aAAc,EAKnBtnC,KAAKs9B,iBAAkB,EAIvBt9B,KAAKunC,QAAU,IAAIvK,IACnBh9B,KAAKwnC,YAAc,IAAIxK,IAIvBh9B,KAAKynC,YAAc,IAAIzK,IACvBh9B,KAAK0nC,YAAc,IAAIC,QAIvB3nC,KAAK4nC,gBAAkB,GACvB5nC,KAAK6nC,eAAgB,EAMrB7nC,KAAK8nC,iBAAmB,KAKxB9nC,KAAKskC,KAAOyD,IAKZ/nC,KAAKu/B,OAAS,EAIdv/B,KAAKy/B,MAAQ,EAIbz/B,KAAKgoC,WAAa,EAIlBhoC,KAAKioC,UAAY,EAKjBjoC,KAAKkoC,eAAiB,KAItBloC,KAAKmoC,WAAa,KAIlBnoC,KAAKooC,SAAW,GACZtL,GACAt9B,OAAO8L,OAAOtL,KAAM88B,GAO5BvU,gBACI,OAAOvoB,KAAKmoC,WAEhB5f,cAAcA,GACNA,IAAcvoB,KAAKmoC,aAGnBnoC,KAAKmoC,YAELnoC,KAAKooC,SAAS5iB,QAAS6iB,GAAUroC,KAAKsoC,aAAaD,IAEvDroC,KAAKmoC,WAAa5f,EACdA,EAEAvoB,KAAKooC,SAAS5iB,QAAS6iB,GAAUroC,KAAKuoC,cAAcF,EAAO,QAG3DroC,KAAKooC,SAAS5lC,OAAS,EACvBxC,KAAKunC,QAAQ9V,QACbzxB,KAAKwnC,YAAY/V,SAErBzxB,KAAKwoC,gBAMT1kC,oBACI,OAAO9D,KAAKinC,iBAEhBnjC,kBAAkB2kC,GACVA,IAAOzoC,KAAKinC,mBACZjnC,KAAKinC,iBAAmBwB,EACxBzoC,KAAKynC,YAAYhW,QACjBzxB,KAAKwoC,gBAObE,oBACI,OAAO1oC,KAAKknC,iBAEhBwB,kBAAkBD,GACVA,IAAOzoC,KAAKknC,mBACZlnC,KAAKknC,iBAAmBuB,EACxBzoC,KAAKwoC,gBAObG,qBACI,OAAO3oC,KAAKmnC,kBAEhBwB,mBAAmBF,GACXA,IAAOzoC,KAAKmnC,oBACZnnC,KAAKmnC,kBAAoBsB,EACzBzoC,KAAKwoC,gBAObI,iBACI,OAAO5oC,KAAKonC,cAEhBwB,eAAeH,GACPA,IAAOzoC,KAAKonC,gBACZpnC,KAAKonC,cAAgBqB,EACrBzoC,KAAKynC,YAAYhW,QACjBzxB,KAAKwoC,gBAMbxD,YACI,OAAOhlC,KAAKu/B,OAEhByF,UAAUtG,GACN,GAAmB,iBAARA,EACP,MAAM,IAAInoB,MAAM,+BAEpB,MAAMsyB,EAAW/7B,KAAKmU,IAAI,EAAGnU,KAAKkU,IAAI0d,EAAK1+B,KAAKojC,WAAapjC,KAAKskC,OAC9DuE,IAAa7oC,KAAKu/B,SAClBv/B,KAAKu/B,OAASsJ,EACd7oC,KAAK8oC,mBAMb1P,UACI,OAAOp5B,KAAKskC,KAEhBlL,QAAQ2P,GACJ,GAAiB,iBAANA,EACP,MAAM,IAAIxyB,MAAM,+BAEhBwyB,IAAM/oC,KAAKskC,OACXtkC,KAAKskC,KAAOyE,EACZ/oC,KAAKglC,MAAQhlC,KAAKu/B,OAClBv/B,KAAK8oC,mBAMblI,YACI,OAAO5gC,KAAKqnC,OAEhBzG,UAAUA,GACFA,IAAU5gC,KAAKqnC,QAAUz5B,MAAMo7B,QAAQpI,KACvC5gC,KAAKqnC,OAASzG,EACd5gC,KAAKwoC,gBAObpF,iBACI,OAA6B,OAArBpjC,KAAKq/B,YAAuBr/B,KAAKqnC,OAAO7kC,OAASxC,KAAKq/B,YAElE+D,eAAehK,GACX,GAAmB,iBAARA,GAA4B,OAARA,EAC3B,MAAM,IAAI7iB,MAAM,+BAIhB6iB,IAAQp5B,KAAKq/B,cACbr/B,KAAKq/B,YAAcjG,EACnBp5B,KAAKglC,MAAQhlC,KAAKu/B,OAClBv/B,KAAKwoC,gBAMbS,mBACI,OAAOjpC,KAAK6nC,cAEhBoB,iBAAiBC,GACTA,IAAQlpC,KAAK6nC,gBACb7nC,KAAK6nC,cAAgBqB,EACrBlpC,KAAK8oC,mBAMbK,mBACInpC,KAAKs9B,iBAAkB,EACvBt9B,KAAK8oC,kBAGTM,gBACI,OAAO9pC,QAAQU,KAAKuoB,WAAavoB,KAAK8D,eAK1CgF,wBACS9I,KAAKkoC,iBACNloC,KAAKkoC,gBAAiB,QAChBmB,QAAQC,UACdtpC,KAAKkoC,gBAAiB,EAClBloC,KAAKopC,iBACLppC,KAAKupC,WAajBf,eACIxoC,KAAKsnC,aAAc,EACnBtnC,KAAK8oC,kBAOTU,iBACI,OAAOxpC,KAAKooC,SAASjnB,OAAO,CAACsoB,EAAW9b,EAAGprB,KACvC,MAAMm8B,EAAM1+B,KAAKu/B,OAASh9B,EAM1B,OALIvC,KAAKsnC,aAAetnC,KAAKs9B,iBAAmBoB,EAAM1+B,KAAKgoC,YACvDtJ,EAAM1+B,KAAKioC,aACXwB,EAAUC,QAAQ14B,KAAK0tB,GACvB+K,EAAU/jB,SAAS1U,KAAK2c,IAErB8b,GACR,CAAEC,QAAS,GAAIhkB,SAAU,KAMhC5c,wBAAuB4gC,QAAEA,EAAFhkB,SAAWA,UACvB,IAAI2jB,QAASC,IAChBxwB,sBAAsBwwB,KAE1B,MACM31B,EADK+R,EAASlX,IAAKmf,GAAM3tB,KAAK2pC,cAAchc,IACsBxM,OAAO,CAACyoB,EAAKC,EAAKtnC,KACtFqnC,EAAIF,EAAQnnC,IAAMvC,KAAK4nC,gBAAgB8B,EAAQnnC,IAAMsnC,EAC9CD,GACR,IACH5pC,KAAK8nC,iBAAiBn0B,GAK1B7K,gBACI,MAAMghC,EAAe9pC,KAAKu/B,SAAWv/B,KAAKgoC,YAAchoC,KAAKskC,OAAStkC,KAAK+pC,UAEvED,GAAgB9pC,KAAKsnC,eACrBtnC,KAAKy/B,MACDz/B,KAAKu/B,OAASzyB,KAAKkU,IAAIhhB,KAAKskC,KAAMtkC,KAAKojC,WAAapjC,KAAKu/B,QAAU,GACnEv/B,KAAKskC,MAAQtkC,KAAK+pC,YACd/pC,KAAKsnC,YACLtnC,KAAKqmB,OAAOrmB,KAAKu/B,OAAQv/B,KAAKy/B,QAK9Bz/B,KAAKgqC,eACLhqC,KAAKiqC,eACLjqC,KAAKkqC,WACLlqC,KAAKmqC,eAIbnqC,KAAKs9B,iBAAmBt9B,KAAKsnC,eAC7BtnC,KAAK4nC,gBAAkB,IAI3B,MAEM6B,EAFgBzpC,KAAKskC,KAAO,GAAKtkC,KAAK8nC,mBACvCgC,GAAgB9pC,KAAKs9B,iBAAmBt9B,KAAKsnC,aAChBtnC,KAAKwpC,WAAa,KAE/CxpC,KAAKipC,eACNjpC,KAAKwnC,YAAYhiB,QAAQ,CAACkZ,EAAK2J,IAAUroC,KAAKoqC,eAAe/B,EAAO3J,IACpE1+B,KAAKwnC,YAAY/V,SAGrBzxB,KAAKgoC,WAAahoC,KAAKu/B,OACvBv/B,KAAKioC,UAAYjoC,KAAKy/B,MACtBz/B,KAAK+pC,SAAW/pC,KAAKskC,KACrBtkC,KAAKsnC,aAAc,EACnBtnC,KAAKs9B,iBAAkB,EAEvBt9B,KAAKqqC,aAEDZ,SACMzpC,KAAKsqC,iBAAiBb,GAMpCY,cAMAL,eACI,MAAM11B,EAAItU,KAAKooC,SACf,IAAK,IAAI1J,EAAM1+B,KAAKgoC,WAAY1zB,EAAE9R,QAAUk8B,EAAM1+B,KAAKu/B,OAAQb,IAC3D1+B,KAAKoqC,eAAe91B,EAAEsC,QAAS8nB,GAOvCuL,eACI,MAAM31B,EAAItU,KAAKooC,SACf,IAAK,IAAI1J,EAAM1+B,KAAKioC,UAAW3zB,EAAE9R,QAAUk8B,EAAM1+B,KAAKy/B,MAAOf,IACzD1+B,KAAKoqC,eAAe91B,EAAEi2B,MAAO7L,GAOrCwL,WACI,MAAM9c,EAAQptB,KAAKu/B,OAEnB,IAAK,IAAIb,EADG5xB,KAAKkU,IAAIhhB,KAAKy/B,MAAOz/B,KAAKgoC,WAAa,GAC/BtJ,GAAOtR,EAAOsR,IAAO,CACrC,MAAM2J,EAAQroC,KAAKwqC,aAAa9L,GAEhC1+B,KAAKuoC,cAAcF,EAAOroC,KAAKyqC,aAC3BzqC,KAAK0oC,eACL1oC,KAAK0oC,cAAcL,EAAOroC,KAAKqnC,OAAO3I,GAAMA,GAEhD1+B,KAAKooC,SAASsC,QAAQrC,IAO9B8B,WACI,MAAM/c,EAAQtgB,KAAKmU,IAAIjhB,KAAKu/B,OAAQv/B,KAAKioC,UAAY,GAC/C0C,EAAM3qC,KAAKy/B,MACjB,IAAK,IAAIf,EAAMtR,EAAOsR,GAAOiM,EAAKjM,IAAO,CACrC,MAAM2J,EAAQroC,KAAKwqC,aAAa9L,GAEhC1+B,KAAKuoC,cAAcF,EAAO,MACtBroC,KAAK0oC,eACL1oC,KAAK0oC,cAAcL,EAAOroC,KAAKqnC,OAAO3I,GAAMA,GAEhD1+B,KAAKooC,SAASp3B,KAAKq3B,IAM3BhiB,OAAO2e,EAAOC,GAIV,MAAM2F,EAAa5qC,KAAKunC,QACxBvnC,KAAKunC,QAAUvnC,KAAKwnC,YACpBxnC,KAAKwnC,YAAcoD,EACnB5qC,KAAKooC,SAAS5lC,OAAS,EACvB,IAAIqoC,EAAgB7qC,KAAKyqC,YACzB,IAAK,IAAIloC,EAAIyiC,EAAOziC,GAAK0iC,EAAM1iC,IAAK,CAChC,MAAM8lC,EAAQroC,KAAKwqC,aAAajoC,GAChCvC,KAAKooC,SAASp3B,KAAKq3B,GACfwC,EACIA,IAAkB7qC,KAAK8qC,MAAMzC,GAC7BwC,EAAgB7qC,KAAK+qC,aAAa1C,GAGlCroC,KAAKuoC,cAAcF,EAAOwC,GAGxB7qC,KAAKgrC,iBAAiB3C,IAC5BroC,KAAKuoC,cAAcF,EAAO,MAE1BroC,KAAK0oC,eACL1oC,KAAK0oC,cAAcL,EAAOroC,KAAKqnC,OAAO9kC,GAAIA,IAStDioC,aAAa9L,GACT,MAAMjwB,EAAMzO,KAAK4oC,WAAa5oC,KAAK4oC,WAAWlK,GAAOA,EACrD,IAAI2J,EAWJ,OAVIA,EAAQroC,KAAKynC,YAAY9+B,IAAI8F,IAC7BzO,KAAKwnC,YAAYyD,OAAO5C,IAGxBA,EAAQroC,KAAK8D,cAAc9D,KAAKqnC,OAAO3I,GAAMA,GAC7C1+B,KAAKynC,YAAY3e,IAAIra,EAAK45B,GAC1BroC,KAAK0nC,YAAY5e,IAAIuf,EAAO55B,IAEhCzO,KAAKkrC,WAAW7C,GAChBroC,KAAKunC,QAAQze,IAAIuf,EAAO3J,GACjB2J,EAKX+B,eAAe/B,EAAO3J,GAElB,GADA1+B,KAAKmrC,WAAW9C,GACZroC,KAAKipC,aACLjpC,KAAKunC,QAAQ0D,OAAO5C,GACpBroC,KAAKwnC,YAAY1e,IAAIuf,EAAO3J,OAE3B,CACD,MAAMjwB,EAAMzO,KAAK0nC,YAAY/+B,IAAI0/B,GACjCroC,KAAK0nC,YAAYuD,OAAO5C,GACxBroC,KAAKynC,YAAYwD,OAAOx8B,GACxBzO,KAAKunC,QAAQ0D,OAAO5C,GAChBroC,KAAK2oC,eACL3oC,KAAK2oC,eAAeN,EAAO3J,GAEtB1+B,KAAK8qC,MAAMzC,GAAOrsB,YACvBhc,KAAKsoC,aAAaD,IAS9BoC,kBACI,OAAOzqC,KAAKooC,SAAS5lC,QAAUxC,KAAKgrC,iBAAiBhrC,KAAKooC,SAAS,IAC/DpoC,KAAK8qC,MAAM9qC,KAAKooC,SAAS,IACzB,KASR0C,MAAMzC,GACF,OAAOA,EAKX0C,aAAa1C,GACT,OAAOA,EAAMpsB,YAMjBssB,cAAcF,EAAO+C,GACjBprC,KAAKmoC,WAAW7rB,aAAa+rB,EAAO+C,GAOxC9C,aAAaD,GACTA,EAAMrsB,WAAWO,YAAY8rB,GAMjC2C,iBAAiB3C,GACb,MAAMn/B,EAAOlJ,KAAK8qC,MAAMzC,GACxB,OAAOn/B,GAAQA,EAAK8S,aAAehc,KAAKmoC,WAK5CgD,WAAW9C,GACHA,aAAiB5sB,cACjB4sB,EAAM78B,MAAMR,QAAU,QAM9BkgC,WAAW7C,GACHA,aAAiB5sB,cACjB4sB,EAAM78B,MAAMR,QAAU,MAO9B2+B,cAActB,GAGV,MAAMpK,MAAEA,EAAF/Y,OAASA,GAAWmjB,EAAMrvB,wBAChC,OAAOxZ,OAAO8L,OAAO,CAAE2yB,QAAO/Y,UAGtC,SAAoB+Q,GAChB,MAAMzqB,EAAQ4O,OAAO4N,iBAAiBiO,GACtC,MAAO,CACH3c,UAAW+xB,EAAe7/B,EAAM8N,WAChC6kB,YAAakN,EAAe7/B,EAAM2yB,aAClCC,aAAciN,EAAe7/B,EAAM4yB,cACnCF,WAAYmN,EAAe7/B,EAAM0yB,aATOoN,CAAWjD,KAY3D,SAASgD,EAAensC,GACpB,MAAMqsC,EAAQrsC,EAAQ6c,WAAW7c,GAASssC,IAC1C,OAAO7+B,OAAOC,MAAM2+B,GAAS,EAAIA,ECpkB9B,MAAME,EAAYC,IAAe,cAAcA,EAClD9rB,YAAYkd,GACR,MAAM6O,KAAEA,EAAFC,WAAQA,EAARC,aAAoBA,EAApBC,OAAkCA,GAAWhP,EAC7CvU,EAAYojB,EAAKI,UAAU/vB,WAEjChT,MAAM,CAAEuf,YAAWjQ,aADEwkB,EAAOxkB,cAAgBiQ,EACXsjB,eAAcC,WAC/C9rC,KAAKgsC,MAAQ,GACbhsC,KAAKisC,YAAcL,EACnB5rC,KAAKksC,UAAYP,EAErB7nC,gBACI,OAAO9D,KAAKgsC,MAAMzB,OAAS,IAAI4B,IAASnsC,KAAKksC,UAAUE,SAE3D1D,cAAciD,EAAMp8B,EAAMmvB,GACtBiN,EAAKU,SAASrsC,KAAKisC,YAAY18B,EAAMmvB,IACrCiN,EAAKW,SAET3D,eAAegD,GACX3rC,KAAKgsC,MAAMh7B,KAAK26B,GAKpBY,YACI,OAAOvsC,KAAKooC,SAAS55B,IAAKg+B,GAAMA,EAAET,UAAUU,oBAEhD3B,MAAMa,GACF,OAAOA,EAAKI,UAEhBhB,aAAaY,GACT,OAAOA,EAAKe,QAAQzwB,YAExBssB,cAAcoD,EAAMP,GAIhB,GAHsB,OAAlBA,IACAA,EAAgBprC,KAAKksC,UAAUQ,SAE9B1sC,KAAKgrC,iBAAiBW,GAOtB,CAED,MAAMgB,EAAWhB,EAAKe,QAAQzwB,YAC9B,GAAImvB,IAAkBO,EAAKI,WAAaX,IAAkBuB,EAEtD,IAAK,IAAIzjC,EAAOyiC,EAAKI,UAAW7iC,IAASyjC,GAAW,CAChD,MAAM5D,EAAI7/B,EAAK+S,YACfjT,MAAMu/B,cAAcr/B,EAAMkiC,GAC1BliC,EAAO6/B,QAbf4C,EAAKI,UAAYa,cACjBjB,EAAKe,QAAUE,cACf5jC,MAAMu/B,cAAcoD,EAAKI,UAAWX,GACpCpiC,MAAMu/B,cAAcoD,EAAKe,QAAStB,GAe1CD,WAAWQ,GACP,IAAIziC,EAAOyiC,EAAKI,UAChB,KAAO7iC,GAAQA,IAASyiC,EAAKe,SACzB1jC,MAAMmiC,WAAWjiC,GACjBA,EAAOA,EAAK+S,YAGpBivB,WAAWS,GACP,IAAIziC,EAAOyiC,EAAKI,UAChB,KAAO7iC,GAAQA,IAASyiC,EAAKe,SACzB1jC,MAAMkiC,WAAWhiC,GACjBA,EAAOA,EAAK+S,YAGpB0tB,cAAcgC,GAGV,OAAO3iC,MAAM2gC,cAAcgC,EAAKI,UAAUU,uBAG3C,MAAMI,UAAoBpB,EAASzE,KAG1C,MAAM8F,EAAiB,IAAInF,QACLoF,YAAWjQ,GAAWwF,UAGxC,IAAI0K,EAAWF,EAAenkC,IAAIgjC,GAC7BqB,IACIrB,EAAKI,UAAUkB,mBACV5D,QAAQC,UAElB0D,EAAW,IAAIH,EAAY,CAAElB,OAAMC,WAAY9O,EAAO8O,aACtDkB,EAAehkB,IAAI6iB,EAAMqB,IAE7B,MAAMhI,MAAEA,EAAF5L,IAASA,EAATgK,WAAcA,GAAetG,EACnCt9B,OAAO8L,OAAO0hC,EAAU,CAAEhI,QAAO5L,MAAKgK,iBCtG1C,IAAI8J,EACW5K,eAAe6K,IAC1B,OAAOD,GAEX5K,iBACI4K,EAAK9yB,OAAO+yB,eACZ,IACI,IAAID,EAAG,cAEX,MAAO5jC,GACH4jC,SAAYhvC,EAAAoL,EAAA,KAAAC,KAAArL,EAAAuC,KAAA,YAAoCiV,QAEpD,OAAOw3B,EAVMzK,GCAjB,MAAM2K,EAAiB,uBACvB,IAAIC,EAA4B,KAChC,SAASC,EAAgBC,EAASC,GAC9B,eACED,0IAOAC,4CAWC,MAAMC,UAAyBtY,MAClCvV,YAAY5gB,EAAMyjC,GACdz5B,MAAMhK,EAAMyjC,GACZziC,KAAKu/B,OAASzyB,KAAK0H,MAAMiuB,EAAKuC,OAAS,GACvChlC,KAAKy/B,MAAQ3yB,KAAK0H,MAAMiuB,EAAKwC,MAAQ,GACrCjlC,KAAKmlC,cAAgBr4B,KAAK0H,MAAMiuB,EAAKyC,cAAgB,GACrDllC,KAAKqlC,aAAev4B,KAAK0H,MAAMiuB,EAAK2C,aAAe,GAEvDJ,YACI,OAAOhlC,KAAKu/B,OAEhB0F,WACI,OAAOjlC,KAAKy/B,MAEhByF,mBACI,OAAOllC,KAAKmlC,cAEhBC,kBACI,OAAOplC,KAAKqlC,cAYb,MAAMqI,UAAwB1G,EACjCpnB,YAAYkd,GACR9zB,MAAM,IAKNhJ,KAAK2tC,kBAAmB,EACxB3tC,KAAK4tC,QAAU,KAIf5tC,KAAK6tC,wBAAyB,EAK9B7tC,KAAK8tC,cAAgB,KAMrB9tC,KAAK+tC,OAAS,KAKd/tC,KAAKm/B,YAAc,KAKnBn/B,KAAKguC,WAAa,KAIlBhuC,KAAKiuC,aAAe,KAIpBjuC,KAAKkuC,kBAAoB,KAKzBluC,KAAKmuC,sBAAwB,KAK7BnuC,KAAKouC,qBAAuB,KAI5BpuC,KAAKquC,eAAgB,EAIrBruC,KAAKsuC,eAAiB,KAItBtuC,KAAKuuC,aAAe,KAIpBvuC,KAAKwuC,YAAc,KAKnBxuC,KAAKyuC,8BAA+B,EAIpCzuC,KAAK+iC,eAAiB,KACtB/iC,KAAKskC,KAAO,EACZtkC,KAAKu/B,QAAU,EACfv/B,KAAKy/B,OAAS,EACdz/B,KAAKgoC,YAAc,EACnBhoC,KAAKioC,WAAa,EACdnL,GACAt9B,OAAO8L,OAAOtL,KAAM88B,GAG5BvU,gBACI,OAAOvf,MAAMuf,UAEjBA,cAAcA,GACVvf,MAAMuf,UAAYA,EAClBvoB,KAAK0uC,uBAAuBnlC,KAAK,KAC7B,MAAMolC,EAAQ3uC,KAAKkuC,kBAEbU,EAASrmB,GAAaA,EAAUsmB,WAAaC,KAAKC,uBACpDxmB,EAAU8G,KACV9G,EACAomB,IAAUC,IAGd5uC,KAAKuuC,aAAaS,aAClBhvC,KAAKsuC,eAAiB,KAClBK,GACI3uC,KAAKmuC,sBACLQ,EAAM5qC,aAAa,QAAS/D,KAAKmuC,uBAGjCQ,EAAMzxB,gBAAgB,SAE1Bld,KAAKmuC,sBAAwB,KACzBQ,IAAU3uC,KAAK8tC,gBACfa,EAAM3xB,oBAAoB,SAAUhd,KAAM,CAAEivC,SAAS,IACrDjvC,KAAK+tC,QAAU/tC,KAAK+tC,OAAO11B,WAK/BqC,iBAAiB,SAAU1a,KAAM,CAAEivC,SAAS,IAEhDjvC,KAAKkuC,kBAAoBU,EACrBA,IACA5uC,KAAKmuC,sBAAwBS,EAAMvW,aAAa,UAAY,KAC5Dr4B,KAAKkvC,wBACDN,IAAU5uC,KAAK8tC,gBACf9tC,KAAK+tC,OAAS/tC,KAAK+tC,QAAU/tC,KAAKmvC,wBAClCnvC,KAAKmoC,WAAWiH,QAAQpvC,KAAK+tC,SAEjC/tC,KAAKqvC,sBACLrvC,KAAKuuC,aAAae,QAAQV,OAItC9C,aACI,OAAO9rC,KAAK4tC,QAEhB9B,WAAWA,GACHA,IAAW9rC,KAAK4tC,UAGhB5tC,KAAK4tC,UACL5tC,KAAK8nC,iBAAmB,KACxB9nC,KAAK4tC,QAAQ5wB,oBAAoB,mBAAoBhd,MACrDA,KAAK4tC,QAAQ5wB,oBAAoB,oBAAqBhd,MACtDA,KAAK4tC,QAAQ5wB,oBAAoB,qBAAsBhd,MACvDA,KAAK4tC,QAAQ5wB,oBAAoB,cAAehd,MAE5CA,KAAKkuC,mBACLluC,KAAKuvC,oBAAepuC,IAG5BnB,KAAK4tC,QAAU9B,EACX9rC,KAAK4tC,UACuC,mBAAjC5tC,KAAK4tC,QAAQlQ,kBACpB19B,KAAK8nC,iBAAmB9nC,KAAK4tC,QAAQlQ,gBAAgBj9B,KAAKT,KAAK4tC,SAC/D5tC,KAAKmpC,oBAETnpC,KAAK4tC,QAAQlzB,iBAAiB,mBAAoB1a,MAClDA,KAAK4tC,QAAQlzB,iBAAiB,oBAAqB1a,MACnDA,KAAK4tC,QAAQlzB,iBAAiB,qBAAsB1a,MACpDA,KAAK4tC,QAAQlzB,iBAAiB,cAAe1a,MAC7CA,KAAKqvC,wBAQb/2B,mBACI,OAAOtY,KAAK8tC,cAEhBx1B,iBAAiB2C,GAETA,IAAWb,SACXa,EAAS,MAETjb,KAAK8tC,gBAAkB7yB,IAGvBjb,KAAK8tC,gBACL9tC,KAAK8tC,cAAc9wB,oBAAoB,SAAUhd,KAAM,CAAEivC,SAAS,IAC9DjvC,KAAK+tC,QAAU/tC,KAAK8tC,gBAAkB9tC,KAAKkuC,mBAC3CluC,KAAK+tC,OAAO11B,UAGpBrY,KAAK8tC,cAAgB7yB,EACjBA,IACAA,EAAOP,iBAAiB,SAAU1a,KAAM,CAAEivC,SAAS,IAC/Ch0B,IAAWjb,KAAKkuC,oBAChBluC,KAAK+tC,OAAS/tC,KAAK+tC,QAAU/tC,KAAKmvC,wBAClCnvC,KAAKmoC,WAAWiH,QAAQpvC,KAAK+tC,WAIzClC,mBACI,OAAO7rC,KAAKquC,cAEhBxC,iBAAiB3Y,GACTlzB,KAAKquC,gBAAkBnb,IACvBlzB,KAAKquC,cAAgB/uC,QAAQ4zB,GACzBlzB,KAAKouC,uBACLpuC,KAAKouC,qBAAqBlT,cAAc3e,YAAYvc,KAAKouC,sBACzDpuC,KAAKouC,qBAAuB,MAEhCpuC,KAAKkvC,yBAOb9K,kBAAkBj0B,GACdnQ,KAAK+iC,eAAiB5yB,EACtBnQ,KAAKqvC,sBAMTvmC,gBACI,IAAI9I,KAAK6tC,wBAA2B7tC,KAAK4tC,QAAzC,CAoBA,IAdA5tC,KAAKwuC,YAAYQ,aAGjBhvC,KAAK4tC,QAAQxK,WAAapjC,KAAKojC,WAC3BpjC,KAAK2tC,mBACL3tC,KAAK2tC,kBAAmB,EACxB3tC,KAAKwvC,eAEmB,OAAxBxvC,KAAK+iC,iBACL/iC,KAAK4tC,QAAQxJ,cAAcpkC,KAAK+iC,eAAe1xB,MAAOrR,KAAK+iC,eAAe5mB,UAC1Enc,KAAK+iC,eAAiB,MAE1B/iC,KAAK4tC,QAAQzJ,iBAGLnkC,KAAKkoC,iBAELloC,KAAKkoC,gBAAiB,GAG1BloC,KAAKuvC,eAAevvC,KAAKm/B,aACrBn/B,KAAKguC,aAGLhuC,KAAKyvC,oBAAoBzvC,KAAKguC,YAC9BhuC,KAAKguC,WAAa,YAGhBhlC,MAAMugC,UACZvpC,KAAK4tC,QAAQzJ,iBAERnkC,KAAKkoC,iBAMdloC,KAAKyuC,8BAA+B,EACpCzuC,KAAKusC,MAAM/mB,QAAS6iB,GAAUroC,KAAKwuC,YAAYc,QAAQjH,QA5CvD,CACIroC,KAAK6tC,wBAAyB,EAC9B,MAAMlR,SAAEA,SAAmB0M,QAAAC,UAAA//B,KAAArL,EAAAuC,KAAA,WAC3BT,KAAK8rC,OAAS,IAAInP,EAAS,KA+CnC0N,aACQrqC,KAAKiuC,eACLjuC,KAAK0vC,kBAAkB1vC,KAAKiuC,cAC5BjuC,KAAKiuC,aAAe,MAG5B0B,YAAYluC,GACR,OAAQA,EAAMzC,MACV,IAAK,SACIgB,KAAK8tC,eAAiBrsC,EAAMwZ,SAAWjb,KAAK8tC,eAC7C9tC,KAAKqvC,sBAET,MACJ,IAAK,mBACDrvC,KAAKm/B,YAAc19B,EAAMyO,OACzBlQ,KAAK8oC,kBACL,MACJ,IAAK,oBACD9oC,KAAKguC,WAAavsC,EAAMyO,OACxBlQ,KAAK8oC,kBACL,MACJ,IAAK,qBACD9oC,KAAKiuC,aAAexsC,EAAMyO,OAC1BlQ,KAAK8oC,kBACL,MACJ,IAAK,cACD9oC,KAAK4vC,aAAanuC,EAAMyO,QACxB,MACJ,QACI/H,QAAQC,KAAK,oBAAqB3G,IAG9CqH,6BACI,GAA0B,OAAtB9I,KAAKuuC,aAAuB,CAC5B,MAAMpB,QAAuB0C,IAC7B7vC,KAAKuuC,aAAe,IAAIpB,EAAgBnH,GAAYhmC,KAAK8vC,sBAAsB9J,EAAQ,GAAG+J,cAC1F/vC,KAAKwuC,YACD,IAAIrB,EAAe,IAAMntC,KAAKgwC,yBAG1Cd,wBACI,GAAIlvC,KAAKquC,cAAe,CACpB,GAAkC,OAA9BruC,KAAKouC,qBAA+B,EACrBpuC,KAAKouC,qBAAuBvqC,SAASC,cAAc,UAC5D0L,YAAc89B,EAAgB,QAAS,gBAEjD,MAAMp+B,EAAOlP,KAAKkuC,kBAAkB5yB,YAActb,KAAKkuC,kBAAkB+B,aAAa,CAAEC,KAAM,SACxFC,EAAOjhC,EAAKI,cAAc,oBAChCJ,EAAKhL,YAAYlE,KAAKouC,sBACjB+B,GACDjhC,EAAKhL,YAAYL,SAASC,cAAc,cApW/CupC,KACDA,EAA4BxpC,SAASC,cAAc,UACzB0L,YAAc89B,MAAoBF,QAAsBA,SAClFvpC,SAASI,KAAKC,YAAYmpC,IAsWlBrtC,KAAKkuC,mBACLluC,KAAKkuC,kBAAkB91B,UAAUmH,IAAI6tB,GAIjD+B,wBACI,MAAMiB,EAAQvsC,SAASC,cAAc,OAWrC,OARAtE,OAAO8L,OAAO8kC,EAAM5kC,MAAO,CACvB2Q,SAAU,WACVk0B,OAAQ,aACRC,QAAS,EACTC,WAAY,SACZC,SAAU,QAEdJ,EAAMpsC,UAAY,SACXosC,EAKX7D,YACI,OAAOvsC,KAAKooC,SAKhBiH,sBACIrvC,KAAK2tC,kBAAmB,EACxB3tC,KAAK8oC,kBAET0G,cACI,IAAIvR,EAAO/Y,EAAQkE,EAAKxQ,EACxB,GAAI5Y,KAAK8tC,gBAAkB9tC,KAAKkuC,kBAC5BjQ,EAAQj+B,KAAKsuC,eAAerQ,MAC5B/Y,EAASllB,KAAKsuC,eAAeppB,OAC7BtM,EAAO5Y,KAAKkuC,kBAAkBuC,WAC9BrnB,EAAMppB,KAAKkuC,kBAAkBpnB,cAE5B,CACD,MAAM4pB,EAAkB1wC,KAAKkuC,kBAAkBl1B,wBACzC23B,EAAe3wC,KAAK8tC,cACtB9tC,KAAK8tC,cAAc90B,wBACnB,CACIoQ,IAAKsnB,EAAgBtnB,IAAMwnB,QAC3Bh4B,KAAM83B,EAAgB93B,KAAOi4B,QAC7B5S,MAAOvD,WACPxV,OAAQuV,aAEVqW,EAAgBH,EAAa1S,MAC7B8S,EAAiBJ,EAAazrB,OAC9B8rB,EAAOlkC,KAAKmU,IAAI,EAAGnU,KAAKkU,IAAI8vB,EAAeJ,EAAgB93B,KAAO+3B,EAAa/3B,OAC/Eq4B,EAAOnkC,KAAKmU,IAAI,EAAGnU,KAAKkU,IAAI+vB,EAAgBL,EAAgBtnB,IAAMunB,EAAavnB,MASrF6U,GANwC,aAA3Bj+B,KAAK4tC,QAAQvK,UACtBv2B,KAAKmU,IAAI,EAAGnU,KAAKkU,IAAI8vB,EAAeJ,EAAgB73B,MAAQ83B,EAAa/3B,OACzEk4B,GAIWE,EACf9rB,GAJwC,aAA3BllB,KAAK4tC,QAAQvK,UACtB0N,EACAjkC,KAAKmU,IAAI,EAAGnU,KAAKkU,IAAI+vB,EAAgBL,EAAgBvnB,OAASwnB,EAAavnB,OAE/D6nB,EAChBr4B,EAAO9L,KAAKmU,IAAI,IAAKyvB,EAAgB93B,KAAO+3B,EAAa/3B,OACzDwQ,EAAMtc,KAAKmU,IAAI,IAAKyvB,EAAgBtnB,IAAMunB,EAAavnB,MAE3DppB,KAAK4tC,QAAQhK,aAAe,CAAE3F,QAAO/Y,UACrCllB,KAAK4tC,QAAQ7J,eAAiB,CAAE3a,MAAKxQ,QAMzC22B,eAAelR,GACX,GAAIr+B,KAAK8tC,gBAAkB9tC,KAAKkuC,kBAAmB,CAC/C,MAAMt1B,EAAOylB,GAAQA,EAAKJ,MAAQI,EAAKJ,MAAQ,EAAI,EAC7C7U,EAAMiV,GAAQA,EAAKnZ,OAASmZ,EAAKnZ,OAAS,EAAI,EACpDllB,KAAK+tC,OAAOviC,MAAMib,uBAAyB7N,QAAWwQ,WAErD,CACD,MAAM5d,EAAQxL,KAAKkuC,kBAAkB1iC,MACrCA,EAAM0lC,SAAW7S,GAAQA,EAAKJ,MAAQI,EAAKJ,MAAQ,KAAO,KAC1DzyB,EAAM2lC,UAAY9S,GAAQA,EAAKnZ,OAASmZ,EAAKnZ,OAAS,KAAO,MAOrEwqB,kBAAkB7Q,GACd,MAAMuS,EAAOpxC,KAAKusC,MAClB/sC,OAAO4O,KAAKywB,GAAKrZ,QAAS/W,IACtB,MAAMiwB,EAAMjwB,EAAMzO,KAAKu/B,OACjB8I,EAAQ+I,EAAK1S,GACnB,GAAI2J,EAAO,CACP,MAAMjf,IAAEA,EAAFxQ,KAAOA,GAASimB,EAAIpwB,GAC1B45B,EAAM78B,MAAM2Q,SAAW,WACvBksB,EAAM78B,MAAMib,uBAAyB7N,QAAWwQ,UAI5DwmB,aAAa7hB,GACT/tB,KAAKo5B,IAAMrL,EAAMqL,IACjBp5B,KAAKglC,MAAQjX,EAAMiX,MACnB,MAAMqM,EAAmBrxC,KAAKmlC,gBAAkBpX,EAAMmX,cAAgBllC,KAAKqlC,eAAiBtX,EAAMqX,YAClGplC,KAAKmlC,cAAgBpX,EAAMmX,aAC3BllC,KAAKqlC,aAAetX,EAAMqX,YAC1BplC,KAAKipC,cAAiBlb,EAAMqU,OACxBrU,EAAMoU,UACNniC,KAAKmpC,oBAEApb,EAAMqU,QAAUiP,IACrBrxC,KAAKsxC,eAGblI,gBACI,IAAKpgC,MAAMogC,kBAAoBppC,KAAKkuC,oBAAuBluC,KAAK4tC,UAAY5tC,KAAK6tC,uBAC7E,OAAO,EAKX,GAA4B,OAAxB7tC,KAAKsuC,eAAyB,CAC9B,MAAMrQ,MAAEA,EAAF/Y,OAASA,GAAWllB,KAAKkuC,kBAAkBl1B,wBACjDhZ,KAAKsuC,eAAiB,CAAErQ,QAAO/Y,UAEnC,OAAOllB,KAAKsuC,eAAerQ,MAAQ,GAAKj+B,KAAKsuC,eAAeppB,OAAS,EAEzEuqB,oBAAoB8B,GACZvxC,KAAK8tC,eACL9tC,KAAK8tC,cAAchnB,WAAayqB,EAAInoB,IACpCppB,KAAK8tC,cAAc2C,YAAcc,EAAI34B,MAGrCwB,OAAOo3B,OAAOp3B,OAAOy2B,QAAUU,EAAI34B,KAAMwB,OAAOw2B,QAAUW,EAAInoB,KAOtEkoB,eACI,MAAMtM,MAAEA,EAAF5L,IAASA,GAAQp5B,KACjBilC,EAAOD,EAAQ5L,EAAM,EAC3Bp5B,KAAKmoC,WAAWjtB,cAAc,IAAIuyB,EAAiB,cAAe,CAC9DzI,QACAC,OACAC,aAAcllC,KAAKmlC,cACnBC,YAAaplC,KAAKqlC,gBAO1ByK,sBAAsBzR,GAClB,MAAMJ,MAAEA,EAAF/Y,OAASA,GAAWmZ,EAC1Br+B,KAAKsuC,eAAiB,CAAErQ,QAAO/Y,UAC/BllB,KAAKqvC,sBAETW,uBACQhwC,KAAKyuC,6BACLzuC,KAAKyuC,8BAA+B,EAGpCzuC,KAAKmpC,oBC9hBV,MAAMsI,UAAoBhG,EAASiC,KAE1C,MAAMgE,EAAiB,IAAI/J,QAMd6J,EAASzE,YAAWjQ,GAAWwF,UAGxC,IAAIxc,EAAW4rB,EAAe/oC,IAAIgjC,GAClC,IAAK7lB,EAAU,CACN6lB,EAAKI,UAAUkB,mBACV5D,QAAQC,UAElB,MAAMsC,WAAEA,EAAFE,OAAcA,EAAdxzB,aAAsBA,EAAtBuzB,aAAoCA,GAAiB/O,EAC3DhX,EAAW,IAAI2rB,EAAY,CAAE9F,OAAMC,aAAYE,SAAQxzB,eAAcuzB,iBACrE6F,EAAe5oB,IAAI6iB,EAAM7lB,GAE7BtmB,OAAO8L,OAAOwa,EAAU,CACpB8a,MAAO9D,EAAO8D,MACdwC,gBAAkCjiC,IAAtB27B,EAAOsG,WAA2B,KAAOtG,EAAOsG,WAC5DgB,mBAAwCjjC,IAAzB27B,EAAOsH,cAA8B,KAAOtH,EAAOsH,4CChB1E,IAAIuN,EAAiB,cAA6BjmC,IAC9CkU,cACI5W,QACAhJ,KAAK4xC,WAAa5xC,KAKtB4rC,iBACI,OAAO5rC,KAAKisC,YAEhBL,eAAeA,GACPA,IAAe5rC,KAAK4rC,aACpB5rC,KAAKisC,YAAcL,EACnB5rC,KAAK6xC,iBAOb/oC,oBAAoBuI,EAAO8K,EAAW,SAClCnc,KAAK+iC,eAAiB,CAAE1xB,QAAO8K,YAC/Bnc,KAAK6xC,sBACC7xC,KAAK8xC,eACX9xC,KAAK+iC,eAAiB,KAE1BgP,SACI,OAAOrzC,MAAQ8yC,EAAO,CAClB5Q,MAAO5gC,KAAK4gC,MACZgL,WAAY5rC,KAAKisC,YACjB3zB,aAActY,KAAKsY,aACnB8rB,cAAepkC,KAAK+iC,eACpB8I,cAAc,qnDAK1BmG,IAAmB,CACf/nC,eACD0nC,EAAe/iC,UAAW,mBAAe,GAC5CojC,IAAmB,CACf/nC,eACD0nC,EAAe/iC,UAAW,aAAS,GACtCojC,IAAmB,CACf/nC,eACD0nC,EAAe/iC,UAAW,oBAAgB,GAC7C+iC,EAAiBK,IAAmB,CAChCC,YAAc,oBACfN,OCvCGO,k2LAAN,MAAMA,UAANnoC,EAAmCjB,eAAAC,GAAAC,SAAAD,GAAAiB,EAAAhK,gBAA7BkyC,+BACHjoC,kEACAA,uCAA4C,8BAC5CA,YAAS,CAAE0D,UAAW,MAAO3O,KAAMM,QAAS6yC,SAAS,2BAEvC,sCAEf,SAAkB9nC,GAEhB,GADAqE,EAAAC,EAREujC,EAQFtjC,WAAA,UAAA5O,MAAA8C,KAAA9C,KAAcqK,IACTA,EAAaC,IAAI,QACpB,OAEF,MAAM67B,EAAU97B,EAAa1B,IAAI,QAC7Bw9B,GAAWA,EAAQiM,WAAapyC,KAAK+E,KAAKqtC,WAC5CpyC,KAAKqyC,KAAOC,YAAWtyC,KAAK+E,iDAIhC,SAAuBsF,GACrBqE,EAAAC,EAnBEujC,EAmBFtjC,WAAA,eAAA5O,MAAA8C,KAAA9C,KAAmBqK,GACnBrK,KAAKqyC,KAAOC,YAAWtyC,KAAK+E,0CAG9B,WAA0C,IAAAwtC,EACxC,OAAI,QAAAA,EAACvyC,KAAKgmC,eAAN,IAAAuM,OAAA,EAACA,EAAc/vC,QAMZ9D;;iBAEMsB,KAAKgmC;sBACA,CAACz2B,EAAoB8B,IACjCrR,KAAKwyC,mBAAmBjjC,EAAM8B;;;MAT3B3S;UACHsB,KAAK+E,KAAKC,SAAS;wDAc3B,SACEuK,EACA8B,GAEA,MAAMohC,EAAWzyC,KAAKgmC,QAAQ30B,EAAQ,GACtC,OAAO3S;;UAES,IAAV2S,IACD9B,aAAA,EAAAA,EAAMmjC,QACLD,aADD,EACCA,EAAUC,OACV,IAAI59B,KAAKvF,EAAKmjC,MAAMC,iBAClB,IAAI79B,KAAK29B,EAASC,MAAMC,eACxBj0C;;kBAEM8tB,YAAW,IAAI1X,KAAKvF,EAAKmjC,MAAO1yC,KAAK+E,KAAKqtC;;cAGhD1zC;;;;cAIEk0C,YAAW,IAAI99B,KAAKvF,EAAKmjC,MAAO1yC,KAAK+E,KAAKqtC;;8BAE1BjtC,YAAWoK,EAAKtH;;cAE/BsH,EAAK7K,UAIJhG;;;6BAGasB,KAAK6yC;gCACFtjC,EAAK7K;;;sBAGf6K,EAAKoK;;kBAVXjb;uCACuB6Q,EAAKoK;;oBAYxBpK,EAAKxM;;;;kDAOvB,SAAuBgN,GACrBA,EAAGzN,iBACH+N,YAAUrQ,KAAM,iBAAkB,CAChCuN,SAAWwC,EAAGkL,OAAe1N,sDAIjC,WACE,OAAO9B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;WA9FaC,KAuIxBhD,eAAec,OAAO,aAAc0oC,gBCsHpCxpC,eAAec,OAAO,mBAxPtB,cAA6BspC,YAAc7yB,MACzCrW,sBACE,OAAOlL;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;MAwJTI,wBACE,MAAO,CACLiG,KAAMvF,OAENuzC,OAAQ,CAAE/zC,KAAMM,QAASsY,oBAAoB,GAG7Co7B,aAAc,CACZh0C,KAAMC,OACNC,MAAO,WACL,MAAMA,EAAQ,IAAI4V,KAIlB,OAHc,IAAIA,KAChBA,KAAKwC,IAAIpY,EAAMgU,cAAehU,EAAM2T,WAAY3T,EAAMmT,YAE3C4gC,cAAchc,MAAM,KAAK,KAI1Cic,aAAc,CACZl0C,KAAM2N,OACNzN,MAAO,GAGTi0C,UAAW,CACTn0C,KAAMC,OACNC,MAAO,IAGTqO,SAAU,CACRvO,KAAMC,OACNC,MAAO,GACP6mC,UAAU,GAGZD,UAAW,CACT9mC,KAAMM,SAGR0mC,QAAS,CACPhnC,KAAM4O,OAGRwlC,WAAY,CACVp0C,KAAMQ,QAGR6zC,IAAK,CACHr0C,KAAMM,QACNsY,oBAAoB,EACpBzY,SAAU,sBAKhB0d,oBACE7T,MAAM6T,oBAEN7c,KAAK8X,EAAEw7B,OAAOxqB,IAAI,iBAAkB,MACpC9oB,KAAK8X,EAAEw7B,OAAOxqB,IAAI,kBAAoB1R,GACpCoV,YAAW,IAAI1X,KAAKsC,EAAKrC,KAAMqC,EAAK3F,MAAO2F,EAAKzC,KAAM3U,KAAK+E,KAAKqtC,WAIpEmB,mBAAmBP,GACjB,GAAKA,EAAL,CACA,IAAI19B,EAAQ09B,EAAa/b,MAAM,KAE/B,OADA3hB,EAAM,GAAKV,SAASU,EAAM,IAAM,EACzB,IAAIR,KAAKQ,EAAM,GAAIA,EAAM,GAAIA,EAAM,IAAI29B,eAGhDO,mBAAmBC,GACjB,OAAQA,GACN,KAAK,EACH,OAAO,EACT,KAAK,EACH,OAAO,EACT,QACE,OAAO,GAIbC,cAAc3jC,GACZ/P,KAAK2zC,aAAa5jC,EAAGkL,OAAO/b,OAG9B6nC,iBACE/mC,KAAKsb,WAAWhM,cAAc,mBAAmBy3B,iBAGnD6M,YAAY7uC,GACV,OAAOutC,YAAWvtC,uCC7QtB7G,EAAA,GAAAA,EAAA,KAAAA,EAAA,KAAAA,EAAA,KAAAA,EAAA,SAAA21C,EAAA31C,EAAA,IAAA41C,GAAA51C,EAAA,IAAAA,EAAA,IAAA61C,EAAA71C,EAAA,GAAA81C,EAAA91C,EAAA,IA+EAM,YAAQ,CACNG,GAAI,cAEJF,UAAWC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IA0GXE,UAAW,CAACq1C,IAAoBC,KAEhCp1C,WAAY,CACVI,MAAO,CAELF,KAAMC,SAUVk1C,wBACE,OAAOn0C,KAAKY,aAAarB,eAM3BG,UAAW,CAAC00C,mBAAoB,qBAEhCC,kBAAmB,WAGZr0C,KAAK8X,EAAEw8B,cACVt0C,KAAK8X,EAAEw8B,YAAct0C,KAAKu0C,GAAG,UAE3Bv0C,KAAKY,eACyD,IAA9DZ,KAAKw0C,mBAAmB/mC,QAAQzN,KAAK8X,EAAEw8B,YAAYt1C,QACrDgB,KAAKy0C,kBAAmB,GAIpBz0C,KAAKY,aAAa7B,WACtBiB,KAAK8X,EAAEyQ,UAAUmsB,4BAA4B10C,KAAKY,kDCjOxD1C,EAAAgF,EAAAC,EAAA,sBAAArD,IAAA5B,EAAA,OAAAy2C,EAAAz2C,EAAA,GAAA02C,EAAA12C,EAAA,GAgDO,MAAM4B,EAAoBtB,YAAQ,CACvCC,UAAWC;;;;;;;;;EAWXC,GAAI,sBAEJG,WAAY,CAOVoxC,KAAM,CAAClxC,KAAMC,OAAQC,MAAO,UAE5B21C,MAAO,CAAC71C,KAAMC,OAAQC,MAAO,KAG/BW,QAAS,WACFC,EAAkB+lB,WACrB/lB,EAAkB+lB,SAAW7lB,MAG/B6D,SAASiZ,KAAKpC,iBACV,gBAAiB1a,KAAK80C,gBAAgBr0C,KAAKT,QAQjD0qB,SAAU,SAAS1nB,GACjBhD,KAAK60C,MAAQ,GACb70C,KAAKsiC,MAAM,WACTtiC,KAAK60C,MAAQ7xC,GACZ,MAGL8xC,gBAAiB,SAASrzC,GACpBA,EAAMyO,QAAUzO,EAAMyO,OAAOlN,MAC/BhD,KAAK0qB,SAASjpB,EAAMyO,OAAOlN,SAKjClD,EAAkB+lB,SAAW,KAE7B/lB,EAAkBC,oBAAsB,WACjCD,EAAkB+lB,WACrB/lB,EAAkB+lB,SAAWhiB,SAASC,cAAc,wBAGtDD,SAASiZ,KAAK5Y,YAAYpE,EAAkB+lB","file":"chunk.d05b1eeaa957bc07b1b7.js","sourcesContent":["/**\n@license\nCopyright (c) 2015 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at\nhttp://polymer.github.io/LICENSE.txt The complete set of authors may be found at\nhttp://polymer.github.io/AUTHORS.txt The complete set of contributors may be\nfound at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as\npart of the polymer project is also subject to an additional IP rights grant\nfound at http://polymer.github.io/PATENTS.txt\n*/\nimport '@polymer/polymer/polymer-legacy.js';\n\nimport {IronA11yAnnouncer} from '@polymer/iron-a11y-announcer/iron-a11y-announcer.js';\nimport {IronValidatableBehavior} from '@polymer/iron-validatable-behavior/iron-validatable-behavior.js';\nimport {Polymer} from '@polymer/polymer/lib/legacy/polymer-fn.js';\nimport {dom} from '@polymer/polymer/lib/legacy/polymer.dom.js';\nimport {html} from '@polymer/polymer/lib/utils/html-tag.js';\n\n/**\n`<iron-input>` is a wrapper to a native `<input>` element, that adds two-way\nbinding and prevention of invalid input. To use it, you must distribute a native\n`<input>` yourself. You can continue to use the native `input` as you would\nnormally:\n\n    <iron-input>\n      <input>\n    </iron-input>\n\n    <iron-input>\n      <input type=\"email\" disabled>\n    </iron-input>\n\n### Two-way binding\n\nBy default you can only get notified of changes to a native `<input>`'s `value`\ndue to user input:\n\n    <input value=\"{{myValue::input}}\">\n\nThis means that if you imperatively set the value (i.e. `someNativeInput.value =\n'foo'`), no events will be fired and this change cannot be observed.\n\n`iron-input` adds the `bind-value` property that mirrors the native `input`'s\n'`value` property; this property can be used for two-way data binding.\n`bind-value` will notify if it is changed either by user input or by script.\n\n    <iron-input bind-value=\"{{myValue}}\">\n      <input>\n    </iron-input>\n\nNote: this means that if you want to imperatively set the native `input`'s, you\n_must_ set `bind-value` instead, so that the wrapper `iron-input` can be\nnotified.\n\n### Validation\n\n`iron-input` uses the native `input`'s validation. For simplicity, `iron-input`\nhas a `validate()` method (which internally just checks the distributed\n`input`'s validity), which sets an `invalid` attribute that can also be used for\nstyling.\n\nTo validate automatically as you type, you can use the `auto-validate`\nattribute.\n\n`iron-input` also fires an `iron-input-validate` event after `validate()` is\ncalled. You can use it to implement a custom validator:\n\n    var CatsOnlyValidator = {\n      validate: function(ironInput) {\n        var valid = !ironInput.bindValue || ironInput.bindValue === 'cat';\n        ironInput.invalid = !valid;\n        return valid;\n      }\n    }\n    ironInput.addEventListener('iron-input-validate', function() {\n      CatsOnly.validate(input2);\n    });\n\nYou can also use an element implementing an\n[`IronValidatorBehavior`](/element/PolymerElements/iron-validatable-behavior).\nThis example can also be found in the demo for this element:\n\n    <iron-input validator=\"cats-only\">\n      <input>\n    </iron-input>\n\n### Preventing invalid input\n\nIt may be desirable to only allow users to enter certain characters. You can use\nthe `allowed-pattern` attribute to accomplish this. This feature is separate\nfrom validation, and `allowed-pattern` does not affect how the input is\nvalidated.\n\n    // Only allow typing digits, but a valid input has exactly 5 digits.\n    <iron-input allowed-pattern=\"[0-9]\">\n      <input pattern=\"\\d{5}\">\n    </iron-input>\n\n@demo demo/index.html\n*/\nPolymer({\n  _template: html`\n    <style>\n      :host {\n        display: inline-block;\n      }\n    </style>\n    <slot id=\"content\"></slot>\n`,\n\n  is: 'iron-input',\n  behaviors: [IronValidatableBehavior],\n\n  /**\n   * Fired whenever `validate()` is called.\n   *\n   * @event iron-input-validate\n   */\n\n  properties: {\n\n    /**\n     * Use this property instead of `value` for two-way data binding, or to\n     * set a default value for the input. **Do not** use the distributed\n     * input's `value` property to set a default value.\n     */\n    bindValue: {type: String, value: ''},\n\n    /**\n     * Computed property that echoes `bindValue` (mostly used for Polymer 1.0\n     * backcompatibility, if you were one-way binding to the Polymer 1.0\n     * `input is=\"iron-input\"` value attribute).\n     */\n    value: {type: String, computed: '_computeValue(bindValue)'},\n\n    /**\n     * Regex-like list of characters allowed as input; all characters not in the\n     * list will be rejected. The recommended format should be a list of allowed\n     * characters, for example, `[a-zA-Z0-9.+-!;:]`.\n     *\n     * This pattern represents the allowed characters for the field; as the user\n     * inputs text, each individual character will be checked against the\n     * pattern (rather than checking the entire value as a whole). If a\n     * character is not a match, it will be rejected.\n     *\n     * Pasted input will have each character checked individually; if any\n     * character doesn't match `allowedPattern`, the entire pasted string will\n     * be rejected.\n     *\n     * Note: if you were using `iron-input` in 1.0, you were also required to\n     * set `prevent-invalid-input`. This is no longer needed as of Polymer 2.0,\n     * and will be set automatically for you if an `allowedPattern` is provided.\n     *\n     */\n    allowedPattern: {type: String},\n\n    /**\n     * Set to true to auto-validate the input value as you type.\n     */\n    autoValidate: {type: Boolean, value: false},\n\n    /**\n     * The native input element.\n     */\n    _inputElement: Object,\n  },\n\n  observers: ['_bindValueChanged(bindValue, _inputElement)'],\n  listeners: {'input': '_onInput', 'keypress': '_onKeypress'},\n\n  created: function() {\n    IronA11yAnnouncer.requestAvailability();\n    this._previousValidInput = '';\n    this._patternAlreadyChecked = false;\n  },\n\n  attached: function() {\n    // If the input is added at a later time, update the internal reference.\n    this._observer = dom(this).observeNodes(function(info) {\n      this._initSlottedInput();\n    }.bind(this));\n  },\n\n  detached: function() {\n    if (this._observer) {\n      dom(this).unobserveNodes(this._observer);\n      this._observer = null;\n    }\n  },\n\n  /**\n   * Returns the distributed input element.\n   */\n  get inputElement() {\n    return this._inputElement;\n  },\n\n  _initSlottedInput: function() {\n    this._inputElement = this.getEffectiveChildren()[0];\n\n    if (this.inputElement && this.inputElement.value) {\n      this.bindValue = this.inputElement.value;\n    }\n\n    this.fire('iron-input-ready');\n  },\n\n  get _patternRegExp() {\n    var pattern;\n    if (this.allowedPattern) {\n      pattern = new RegExp(this.allowedPattern);\n    } else {\n      switch (this.inputElement.type) {\n        case 'number':\n          pattern = /[0-9.,e-]/;\n          break;\n      }\n    }\n    return pattern;\n  },\n\n  /**\n   * @suppress {checkTypes}\n   */\n  _bindValueChanged: function(bindValue, inputElement) {\n    // The observer could have run before attached() when we have actually\n    // initialized this property.\n    if (!inputElement) {\n      return;\n    }\n\n    if (bindValue === undefined) {\n      inputElement.value = null;\n    } else if (bindValue !== inputElement.value) {\n      this.inputElement.value = bindValue;\n    }\n\n    if (this.autoValidate) {\n      this.validate();\n    }\n\n    // manually notify because we don't want to notify until after setting value\n    this.fire('bind-value-changed', {value: bindValue});\n  },\n\n  _onInput: function() {\n    // Need to validate each of the characters pasted if they haven't\n    // been validated inside `_onKeypress` already.\n    if (this.allowedPattern && !this._patternAlreadyChecked) {\n      var valid = this._checkPatternValidity();\n      if (!valid) {\n        this._announceInvalidCharacter(\n            'Invalid string of characters not entered.');\n        this.inputElement.value = this._previousValidInput;\n      }\n    }\n    this.bindValue = this._previousValidInput = this.inputElement.value;\n    this._patternAlreadyChecked = false;\n  },\n\n  _isPrintable: function(event) {\n    // What a control/printable character is varies wildly based on the browser.\n    // - most control characters (arrows, backspace) do not send a `keypress`\n    // event\n    //   in Chrome, but the *do* on Firefox\n    // - in Firefox, when they do send a `keypress` event, control chars have\n    //   a charCode = 0, keyCode = xx (for ex. 40 for down arrow)\n    // - printable characters always send a keypress event.\n    // - in Firefox, printable chars always have a keyCode = 0. In Chrome, the\n    // keyCode\n    //   always matches the charCode.\n    // None of this makes any sense.\n\n    // For these keys, ASCII code == browser keycode.\n    var anyNonPrintable = (event.keyCode == 8) ||  // backspace\n        (event.keyCode == 9) ||                    // tab\n        (event.keyCode == 13) ||                   // enter\n        (event.keyCode == 27);                     // escape\n\n    // For these keys, make sure it's a browser keycode and not an ASCII code.\n    var mozNonPrintable = (event.keyCode == 19) ||  // pause\n        (event.keyCode == 20) ||                    // caps lock\n        (event.keyCode == 45) ||                    // insert\n        (event.keyCode == 46) ||                    // delete\n        (event.keyCode == 144) ||                   // num lock\n        (event.keyCode == 145) ||                   // scroll lock\n        (event.keyCode > 32 &&\n         event.keyCode < 41) ||  // page up/down, end, home, arrows\n        (event.keyCode > 111 && event.keyCode < 124);  // fn keys\n\n    return !anyNonPrintable && !(event.charCode == 0 && mozNonPrintable);\n  },\n\n  _onKeypress: function(event) {\n    if (!this.allowedPattern && this.inputElement.type !== 'number') {\n      return;\n    }\n    var regexp = this._patternRegExp;\n    if (!regexp) {\n      return;\n    }\n\n    // Handle special keys and backspace\n    if (event.metaKey || event.ctrlKey || event.altKey) {\n      return;\n    }\n\n    // Check the pattern either here or in `_onInput`, but not in both.\n    this._patternAlreadyChecked = true;\n\n    var thisChar = String.fromCharCode(event.charCode);\n    if (this._isPrintable(event) && !regexp.test(thisChar)) {\n      event.preventDefault();\n      this._announceInvalidCharacter(\n          'Invalid character ' + thisChar + ' not entered.');\n    }\n  },\n\n  _checkPatternValidity: function() {\n    var regexp = this._patternRegExp;\n    if (!regexp) {\n      return true;\n    }\n    for (var i = 0; i < this.inputElement.value.length; i++) {\n      if (!regexp.test(this.inputElement.value[i])) {\n        return false;\n      }\n    }\n    return true;\n  },\n\n  /**\n   * Returns true if `value` is valid. The validator provided in `validator`\n   * will be used first, then any constraints.\n   * @return {boolean} True if the value is valid.\n   */\n  validate: function() {\n    if (!this.inputElement) {\n      this.invalid = false;\n      return true;\n    }\n\n    // Use the nested input's native validity.\n    var valid = this.inputElement.checkValidity();\n\n    // Only do extra checking if the browser thought this was valid.\n    if (valid) {\n      // Empty, required input is invalid\n      if (this.required && this.bindValue === '') {\n        valid = false;\n      } else if (this.hasValidator()) {\n        valid = IronValidatableBehavior.validate.call(this, this.bindValue);\n      }\n    }\n\n    this.invalid = !valid;\n    this.fire('iron-input-validate');\n    return valid;\n  },\n\n  _announceInvalidCharacter: function(message) {\n    this.fire('iron-announce', {text: message});\n  },\n\n  _computeValue: function(bindValue) {\n    return bindValue;\n  }\n});\n","/**\n@license\nCopyright (c) 2015 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at\nhttp://polymer.github.io/LICENSE.txt The complete set of authors may be found at\nhttp://polymer.github.io/AUTHORS.txt The complete set of contributors may be\nfound at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as\npart of the polymer project is also subject to an additional IP rights grant\nfound at http://polymer.github.io/PATENTS.txt\n*/\nimport '@polymer/polymer/polymer-legacy.js';\n\nimport {IronButtonState} from '@polymer/iron-behaviors/iron-button-state.js';\nimport {IronControlState} from '@polymer/iron-behaviors/iron-control-state.js';\n\n/*\n`PaperItemBehavior` is a convenience behavior shared by <paper-item> and\n<paper-icon-item> that manages the shared control states and attributes of\nthe items.\n*/\n/** @polymerBehavior PaperItemBehavior */\nexport const PaperItemBehaviorImpl = {\n  hostAttributes: {role: 'option', tabindex: '0'}\n};\n\n/** @polymerBehavior */\nexport const PaperItemBehavior =\n    [IronButtonState, IronControlState, PaperItemBehaviorImpl];\n","/**\n@license\nCopyright (c) 2015 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at\nhttp://polymer.github.io/LICENSE.txt The complete set of authors may be found at\nhttp://polymer.github.io/AUTHORS.txt The complete set of contributors may be\nfound at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as\npart of the polymer project is also subject to an additional IP rights grant\nfound at http://polymer.github.io/PATENTS.txt\n*/\nimport '@polymer/iron-flex-layout/iron-flex-layout.js';\nimport '@polymer/paper-styles/color.js';\nimport '@polymer/paper-styles/default-theme.js';\nimport '@polymer/paper-styles/typography.js';\nconst $_documentContainer = document.createElement('template');\n$_documentContainer.setAttribute('style', 'display: none;');\n\n$_documentContainer.innerHTML = `<dom-module id=\"paper-item-shared-styles\">\n  <template>\n    <style>\n      :host, .paper-item {\n        display: block;\n        position: relative;\n        min-height: var(--paper-item-min-height, 48px);\n        padding: 0px 16px;\n      }\n\n      .paper-item {\n        @apply --paper-font-subhead;\n        border:none;\n        outline: none;\n        background: white;\n        width: 100%;\n        text-align: left;\n      }\n\n      :host([hidden]), .paper-item[hidden] {\n        display: none !important;\n      }\n\n      :host(.iron-selected), .paper-item.iron-selected {\n        font-weight: var(--paper-item-selected-weight, bold);\n\n        @apply --paper-item-selected;\n      }\n\n      :host([disabled]), .paper-item[disabled] {\n        color: var(--paper-item-disabled-color, var(--disabled-text-color));\n\n        @apply --paper-item-disabled;\n      }\n\n      :host(:focus), .paper-item:focus {\n        position: relative;\n        outline: 0;\n\n        @apply --paper-item-focused;\n      }\n\n      :host(:focus):before, .paper-item:focus:before {\n        @apply --layout-fit;\n\n        background: currentColor;\n        content: '';\n        opacity: var(--dark-divider-opacity);\n        pointer-events: none;\n\n        @apply --paper-item-focused-before;\n      }\n    </style>\n  </template>\n</dom-module>`;\n\ndocument.head.appendChild($_documentContainer.content);\n","import { HassEntity } from \"home-assistant-js-websocket\";\nimport { computeObjectId } from \"./compute_object_id\";\n\nexport const computeStateName = (stateObj: HassEntity): string => {\n  return stateObj.attributes.friendly_name === undefined\n    ? computeObjectId(stateObj.entity_id).replace(/_/g, \" \")\n    : stateObj.attributes.friendly_name || \"\";\n};\n","import { dedupingMixin } from \"@polymer/polymer/lib/utils/mixin\";\n/**\n * Polymer Mixin to enable a localize function powered by language/resources from hass object.\n *\n * @polymerMixin\n */\nexport default dedupingMixin(\n  (superClass) =>\n    class extends superClass {\n      static get properties() {\n        return {\n          hass: Object,\n\n          /**\n           * Translates a string to the current `language`. Any parameters to the\n           * string should be passed in order, as follows:\n           * `localize(stringKey, param1Name, param1Value, param2Name, param2Value)`\n           */\n          localize: {\n            type: Function,\n            computed: \"__computeLocalize(hass.localize)\",\n          },\n        };\n      }\n\n      __computeLocalize(localize) {\n        return localize;\n      }\n    }\n);\n","/**\n * Return the icon to be used for a domain.\n *\n * Optionally pass in a state to influence the domain icon.\n */\nimport { DEFAULT_DOMAIN_ICON } from \"../const\";\n\nconst fixedIcons = {\n  alert: \"hass:alert\",\n  alexa: \"hass:amazon-alexa\",\n  automation: \"hass:playlist-play\",\n  calendar: \"hass:calendar\",\n  camera: \"hass:video\",\n  climate: \"hass:thermostat\",\n  configurator: \"hass:settings\",\n  conversation: \"hass:text-to-speech\",\n  counter: \"hass:counter\",\n  device_tracker: \"hass:account\",\n  fan: \"hass:fan\",\n  google_assistant: \"hass:google-assistant\",\n  group: \"hass:google-circles-communities\",\n  history_graph: \"hass:chart-line\",\n  homeassistant: \"hass:home-assistant\",\n  homekit: \"hass:home-automation\",\n  image_processing: \"hass:image-filter-frames\",\n  input_boolean: \"hass:drawing\",\n  input_datetime: \"hass:calendar-clock\",\n  input_number: \"hass:ray-vertex\",\n  input_select: \"hass:format-list-bulleted\",\n  input_text: \"hass:textbox\",\n  light: \"hass:lightbulb\",\n  mailbox: \"hass:mailbox\",\n  notify: \"hass:comment-alert\",\n  persistent_notification: \"hass:bell\",\n  person: \"hass:account\",\n  plant: \"hass:flower\",\n  proximity: \"hass:apple-safari\",\n  remote: \"hass:remote\",\n  scene: \"hass:google-pages\",\n  script: \"hass:file-document\",\n  sensor: \"hass:eye\",\n  simple_alarm: \"hass:bell\",\n  sun: \"hass:white-balance-sunny\",\n  switch: \"hass:flash\",\n  timer: \"hass:timer\",\n  updater: \"hass:cloud-upload\",\n  vacuum: \"hass:robot-vacuum\",\n  water_heater: \"hass:thermometer\",\n  weather: \"hass:weather-cloudy\",\n  weblink: \"hass:open-in-new\",\n  zone: \"hass:map-marker\",\n};\n\nexport const domainIcon = (domain: string, state?: string): string => {\n  if (domain in fixedIcons) {\n    return fixedIcons[domain];\n  }\n\n  switch (domain) {\n    case \"alarm_control_panel\":\n      switch (state) {\n        case \"armed_home\":\n          return \"hass:bell-plus\";\n        case \"armed_night\":\n          return \"hass:bell-sleep\";\n        case \"disarmed\":\n          return \"hass:bell-outline\";\n        case \"triggered\":\n          return \"hass:bell-ring\";\n        default:\n          return \"hass:bell\";\n      }\n\n    case \"binary_sensor\":\n      return state && state === \"off\"\n        ? \"hass:radiobox-blank\"\n        : \"hass:checkbox-marked-circle\";\n\n    case \"cover\":\n      return state === \"closed\" ? \"hass:window-closed\" : \"hass:window-open\";\n\n    case \"lock\":\n      return state && state === \"unlocked\" ? \"hass:lock-open\" : \"hass:lock\";\n\n    case \"media_player\":\n      return state && state !== \"off\" && state !== \"idle\"\n        ? \"hass:cast-connected\"\n        : \"hass:cast\";\n\n    case \"zwave\":\n      switch (state) {\n        case \"dead\":\n          return \"hass:emoticon-dead\";\n        case \"sleeping\":\n          return \"hass:sleep\";\n        case \"initializing\":\n          return \"hass:timer-sand\";\n        default:\n          return \"hass:z-wave\";\n      }\n\n    default:\n      // tslint:disable-next-line\n      console.warn(\n        \"Unable to find icon for domain \" + domain + \" (\" + state + \")\"\n      );\n      return DEFAULT_DOMAIN_ICON;\n  }\n};\n","import { HassEntity } from \"home-assistant-js-websocket\";\nimport { computeDomain } from \"./compute_domain\";\n\nexport const computeStateDomain = (stateObj: HassEntity) => {\n  return computeDomain(stateObj.entity_id);\n};\n","import { Constructor } from \"../types\";\n\nimport \"@polymer/iron-icon/iron-icon\";\n// Not duplicate, this is for typing.\n// tslint:disable-next-line\nimport { IronIconElement } from \"@polymer/iron-icon/iron-icon\";\n\nconst ironIconClass = customElements.get(\"iron-icon\") as Constructor<\n  IronIconElement\n>;\n\nlet loaded = false;\n\nexport class HaIcon extends ironIconClass {\n  private _iconsetName?: string;\n\n  public listen(\n    node: EventTarget | null,\n    eventName: string,\n    methodName: string\n  ): void {\n    super.listen(node, eventName, methodName);\n\n    if (!loaded && this._iconsetName === \"mdi\") {\n      loaded = true;\n      import(/* webpackChunkName: \"mdi-icons\" */ \"../resources/mdi-icons\");\n    }\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-icon\": HaIcon;\n  }\n}\n\ncustomElements.define(\"ha-icon\", HaIcon);\n","/**\n@license\nCopyright (c) 2015 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at\nhttp://polymer.github.io/LICENSE.txt The complete set of authors may be found at\nhttp://polymer.github.io/AUTHORS.txt The complete set of contributors may be\nfound at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as\npart of the polymer project is also subject to an additional IP rights grant\nfound at http://polymer.github.io/PATENTS.txt\n*/\nimport '@polymer/polymer/polymer-legacy.js';\n\nimport '@polymer/iron-flex-layout/iron-flex-layout.js';\nimport '@polymer/paper-styles/default-theme.js';\nimport '@polymer/paper-styles/typography.js';\nimport {Polymer} from '@polymer/polymer/lib/legacy/polymer-fn.js';\nimport {html} from '@polymer/polymer/lib/utils/html-tag.js';\n\n/*\nUse `<paper-item-body>` in a `<paper-item>` or `<paper-icon-item>` to make two-\nor three- line items. It is a flex item that is a vertical flexbox.\n\n    <paper-item>\n      <paper-item-body two-line>\n        <div>Show your status</div>\n        <div secondary>Your status is visible to everyone</div>\n      </paper-item-body>\n    </paper-item>\n\nThe child elements with the `secondary` attribute is given secondary text\nstyling.\n\n### Styling\n\nThe following custom properties and mixins are available for styling:\n\nCustom property | Description | Default\n----------------|-------------|----------\n`--paper-item-body-two-line-min-height` | Minimum height of a two-line item | `72px`\n`--paper-item-body-three-line-min-height` | Minimum height of a three-line item | `88px`\n`--paper-item-body-secondary-color` | Foreground color for the `secondary` area | `--secondary-text-color`\n`--paper-item-body-secondary` | Mixin applied to the `secondary` area | `{}`\n\n*/\nPolymer({\n  _template: html`\n    <style>\n      :host {\n        overflow: hidden; /* needed for text-overflow: ellipsis to work on ff */\n        @apply --layout-vertical;\n        @apply --layout-center-justified;\n        @apply --layout-flex;\n      }\n\n      :host([two-line]) {\n        min-height: var(--paper-item-body-two-line-min-height, 72px);\n      }\n\n      :host([three-line]) {\n        min-height: var(--paper-item-body-three-line-min-height, 88px);\n      }\n\n      :host > ::slotted(*) {\n        overflow: hidden;\n        text-overflow: ellipsis;\n        white-space: nowrap;\n      }\n\n      :host > ::slotted([secondary]) {\n        @apply --paper-font-body1;\n\n        color: var(--paper-item-body-secondary-color, var(--secondary-text-color));\n\n        @apply --paper-item-body-secondary;\n      }\n    </style>\n\n    <slot></slot>\n`,\n\n  is: 'paper-item-body'\n});\n","/**\n@license\nCopyright (c) 2015 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at\nhttp://polymer.github.io/LICENSE.txt The complete set of authors may be found at\nhttp://polymer.github.io/AUTHORS.txt The complete set of contributors may be\nfound at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as\npart of the polymer project is also subject to an additional IP rights grant\nfound at http://polymer.github.io/PATENTS.txt\n*/\nimport '@polymer/polymer/polymer-legacy.js';\nimport '@polymer/paper-styles/color.js';\nimport './paper-spinner-styles.js';\n\nimport {Polymer} from '@polymer/polymer/lib/legacy/polymer-fn.js';\nimport {html} from '@polymer/polymer/lib/utils/html-tag.js';\n\nimport {PaperSpinnerBehavior} from './paper-spinner-behavior.js';\n\nconst template = html`\n  <style include=\"paper-spinner-styles\"></style>\n\n  <div id=\"spinnerContainer\" class-name=\"[[__computeContainerClasses(active, __coolingDown)]]\" on-animationend=\"__reset\" on-webkit-animation-end=\"__reset\">\n    <div class=\"spinner-layer layer-1\">\n      <div class=\"circle-clipper left\">\n        <div class=\"circle\"></div>\n      </div>\n      <div class=\"circle-clipper right\">\n        <div class=\"circle\"></div>\n      </div>\n    </div>\n\n    <div class=\"spinner-layer layer-2\">\n      <div class=\"circle-clipper left\">\n        <div class=\"circle\"></div>\n      </div>\n      <div class=\"circle-clipper right\">\n        <div class=\"circle\"></div>\n      </div>\n    </div>\n\n    <div class=\"spinner-layer layer-3\">\n      <div class=\"circle-clipper left\">\n        <div class=\"circle\"></div>\n      </div>\n      <div class=\"circle-clipper right\">\n        <div class=\"circle\"></div>\n      </div>\n    </div>\n\n    <div class=\"spinner-layer layer-4\">\n      <div class=\"circle-clipper left\">\n        <div class=\"circle\"></div>\n      </div>\n      <div class=\"circle-clipper right\">\n        <div class=\"circle\"></div>\n      </div>\n    </div>\n  </div>\n`;\ntemplate.setAttribute('strip-whitespace', '');\n\n/**\nMaterial design: [Progress &\nactivity](https://www.google.com/design/spec/components/progress-activity.html)\n\nElement providing a multiple color material design circular spinner.\n\n    <paper-spinner active></paper-spinner>\n\nThe default spinner cycles between four layers of colors; by default they are\nblue, red, yellow and green. It can be customized to cycle between four\ndifferent colors. Use <paper-spinner-lite> for single color spinners.\n\n### Accessibility\n\nAlt attribute should be set to provide adequate context for accessibility. If\nnot provided, it defaults to 'loading'. Empty alt can be provided to mark the\nelement as decorative if alternative content is provided in another form (e.g. a\ntext block following the spinner).\n\n    <paper-spinner alt=\"Loading contacts list\" active></paper-spinner>\n\n### Styling\n\nThe following custom properties and mixins are available for styling:\n\nCustom property | Description | Default\n----------------|-------------|----------\n`--paper-spinner-layer-1-color` | Color of the first spinner rotation | `--google-blue-500`\n`--paper-spinner-layer-2-color` | Color of the second spinner rotation | `--google-red-500`\n`--paper-spinner-layer-3-color` | Color of the third spinner rotation | `--google-yellow-500`\n`--paper-spinner-layer-4-color` | Color of the fourth spinner rotation | `--google-green-500`\n`--paper-spinner-stroke-width` | The width of the spinner stroke | 3px\n\n@group Paper Elements\n@element paper-spinner\n@hero hero.svg\n@demo demo/index.html\n*/\nPolymer({\n  _template: template,\n\n  is: 'paper-spinner',\n\n  behaviors: [PaperSpinnerBehavior]\n});\n","import {\n  LitElement,\n  TemplateResult,\n  css,\n  CSSResult,\n  html,\n  property,\n  PropertyValues,\n  query,\n} from \"lit-element\";\nimport \"../ha-icon\";\nimport { computeStateDomain } from \"../../common/entity/compute_state_domain\";\nimport { stateIcon } from \"../../common/entity/state_icon\";\nimport { HassEntity } from \"home-assistant-js-websocket\";\n// Not duplicate, this is for typing.\n// tslint:disable-next-line\nimport { HaIcon } from \"../ha-icon\";\nimport { HomeAssistant } from \"../../types\";\n\nclass StateBadge extends LitElement {\n  public hass?: HomeAssistant;\n  @property() public stateObj?: HassEntity;\n  @property() public overrideIcon?: string;\n  @property() public overrideImage?: string;\n  @query(\"ha-icon\") private _icon!: HaIcon;\n\n  protected render(): TemplateResult | void {\n    const stateObj = this.stateObj;\n\n    if (!stateObj) {\n      return html``;\n    }\n\n    return html`\n      <ha-icon\n        id=\"icon\"\n        data-domain=${computeStateDomain(stateObj)}\n        data-state=${stateObj.state}\n        .icon=${this.overrideIcon || stateIcon(stateObj)}\n      ></ha-icon>\n    `;\n  }\n\n  protected updated(changedProps: PropertyValues) {\n    if (!changedProps.has(\"stateObj\") || !this.stateObj) {\n      return;\n    }\n    const stateObj = this.stateObj;\n\n    const iconStyle: Partial<CSSStyleDeclaration> = {\n      color: \"\",\n      filter: \"\",\n    };\n    const hostStyle: Partial<CSSStyleDeclaration> = {\n      backgroundImage: \"\",\n    };\n    if (stateObj) {\n      // hide icon if we have entity picture\n      if (\n        (stateObj.attributes.entity_picture && !this.overrideIcon) ||\n        this.overrideImage\n      ) {\n        let imageUrl = this.overrideImage || stateObj.attributes.entity_picture;\n        if (this.hass) {\n          imageUrl = this.hass.hassUrl(imageUrl);\n        }\n        hostStyle.backgroundImage = `url(${imageUrl})`;\n        iconStyle.display = \"none\";\n      } else {\n        if (stateObj.attributes.hs_color) {\n          const hue = stateObj.attributes.hs_color[0];\n          const sat = stateObj.attributes.hs_color[1];\n          if (sat > 10) {\n            iconStyle.color = `hsl(${hue}, 100%, ${100 - sat / 2}%)`;\n          }\n        }\n        if (stateObj.attributes.brightness) {\n          const brightness = stateObj.attributes.brightness;\n          if (typeof brightness !== \"number\") {\n            const errorMessage = `Type error: state-badge expected number, but type of ${\n              stateObj.entity_id\n            }.attributes.brightness is ${typeof brightness} (${brightness})`;\n            // tslint:disable-next-line\n            console.warn(errorMessage);\n          }\n          // lowest brighntess will be around 50% (that's pretty dark)\n          iconStyle.filter = `brightness(${(brightness + 245) / 5}%)`;\n        }\n      }\n    }\n    Object.assign(this._icon.style, iconStyle);\n    Object.assign(this.style, hostStyle);\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      :host {\n        position: relative;\n        display: inline-block;\n        width: 40px;\n        color: var(--paper-item-icon-color, #44739e);\n        border-radius: 50%;\n        height: 40px;\n        text-align: center;\n        background-size: cover;\n        line-height: 40px;\n        vertical-align: middle;\n      }\n\n      ha-icon {\n        transition: color 0.3s ease-in-out, filter 0.3s ease-in-out;\n      }\n\n      /* Color the icon if light or sun is on */\n      ha-icon[data-domain=\"light\"][data-state=\"on\"],\n      ha-icon[data-domain=\"switch\"][data-state=\"on\"],\n      ha-icon[data-domain=\"binary_sensor\"][data-state=\"on\"],\n      ha-icon[data-domain=\"fan\"][data-state=\"on\"],\n      ha-icon[data-domain=\"sun\"][data-state=\"above_horizon\"] {\n        color: var(--paper-item-icon-active-color, #fdd835);\n      }\n\n      /* Color the icon if unavailable */\n      ha-icon[data-state=\"unavailable\"] {\n        color: var(--state-icon-unavailable-color);\n      }\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"state-badge\": StateBadge;\n  }\n}\n\ncustomElements.define(\"state-badge\", StateBadge);\n","/**\n@license\nCopyright (c) 2015 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at\nhttp://polymer.github.io/LICENSE.txt The complete set of authors may be found at\nhttp://polymer.github.io/AUTHORS.txt The complete set of contributors may be\nfound at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as\npart of the polymer project is also subject to an additional IP rights grant\nfound at http://polymer.github.io/PATENTS.txt\n*/\nimport '@polymer/polymer/polymer-legacy.js';\nimport '@polymer/iron-flex-layout/iron-flex-layout.js';\nimport '@polymer/paper-styles/typography.js';\nimport './paper-item-shared-styles.js';\n\nimport {Polymer} from '@polymer/polymer/lib/legacy/polymer-fn.js';\nimport {html} from '@polymer/polymer/lib/utils/html-tag.js';\n\nimport {PaperItemBehavior} from './paper-item-behavior.js';\n\n/*\n`<paper-icon-item>` is a convenience element to make an item with icon. It is an\ninteractive list item with a fixed-width icon area, according to Material\nDesign. This is useful if the icons are of varying widths, but you want the item\nbodies to line up. Use this like a `<paper-item>`. The child node with the slot\nname `item-icon` is placed in the icon area.\n\n    <paper-icon-item>\n      <iron-icon icon=\"favorite\" slot=\"item-icon\"></iron-icon>\n      Favorite\n    </paper-icon-item>\n    <paper-icon-item>\n      <div class=\"avatar\" slot=\"item-icon\"></div>\n      Avatar\n    </paper-icon-item>\n\n### Styling\n\nThe following custom properties and mixins are available for styling:\n\nCustom property | Description | Default\n----------------|-------------|----------\n`--paper-item-icon-width` | Width of the icon area | `56px`\n`--paper-item-icon` | Mixin applied to the icon area | `{}`\n`--paper-icon-item` | Mixin applied to the item | `{}`\n`--paper-item-selected-weight` | The font weight of a selected item | `bold`\n`--paper-item-selected` | Mixin applied to selected paper-items | `{}`\n`--paper-item-disabled-color` | The color for disabled paper-items | `--disabled-text-color`\n`--paper-item-disabled` | Mixin applied to disabled paper-items | `{}`\n`--paper-item-focused` | Mixin applied to focused paper-items | `{}`\n`--paper-item-focused-before` | Mixin applied to :before focused paper-items | `{}`\n\n*/\nPolymer({\n  _template: html`\n    <style include=\"paper-item-shared-styles\"></style>\n    <style>\n      :host {\n        @apply --layout-horizontal;\n        @apply --layout-center;\n        @apply --paper-font-subhead;\n\n        @apply --paper-item;\n        @apply --paper-icon-item;\n      }\n\n      .content-icon {\n        @apply --layout-horizontal;\n        @apply --layout-center;\n\n        width: var(--paper-item-icon-width, 56px);\n        @apply --paper-item-icon;\n      }\n    </style>\n\n    <div id=\"contentIcon\" class=\"content-icon\">\n      <slot name=\"item-icon\"></slot>\n    </div>\n    <slot></slot>\n`,\n\n  is: 'paper-icon-item',\n  behaviors: [PaperItemBehavior]\n});\n","/** Return an icon representing a cover state. */\nimport { HassEntity } from \"home-assistant-js-websocket\";\nimport { domainIcon } from \"./domain_icon\";\n\nexport const coverIcon = (state: HassEntity): string => {\n  const open = state.state !== \"closed\";\n  switch (state.attributes.device_class) {\n    case \"garage\":\n      return open ? \"hass:garage-open\" : \"hass:garage\";\n    case \"door\":\n      return open ? \"hass:door-open\" : \"hass:door-closed\";\n    case \"shutter\":\n      return open ? \"hass:window-shutter-open\" : \"hass:window-shutter\";\n    case \"blind\":\n      return open ? \"hass:blinds-open\" : \"hass:blinds\";\n    case \"window\":\n      return open ? \"hass:window-open\" : \"hass:window-closed\";\n    default:\n      return domainIcon(\"cover\", state.state);\n  }\n};\n","/** Return an icon representing a sensor state. */\nimport { HassEntity } from \"home-assistant-js-websocket\";\nimport { UNIT_C, UNIT_F } from \"../const\";\nimport { domainIcon } from \"./domain_icon\";\n\nconst fixedDeviceClassIcons = {\n  humidity: \"hass:water-percent\",\n  illuminance: \"hass:brightness-5\",\n  temperature: \"hass:thermometer\",\n  pressure: \"hass:gauge\",\n  power: \"hass:flash\",\n  signal_strength: \"hass:wifi\",\n};\n\nexport const sensorIcon = (state: HassEntity) => {\n  const dclass = state.attributes.device_class;\n\n  if (dclass && dclass in fixedDeviceClassIcons) {\n    return fixedDeviceClassIcons[dclass];\n  }\n  if (dclass === \"battery\") {\n    const battery = Number(state.state);\n    if (isNaN(battery)) {\n      return \"hass:battery-unknown\";\n    }\n    const batteryRound = Math.round(battery / 10) * 10;\n    if (batteryRound >= 100) {\n      return \"hass:battery\";\n    }\n    if (batteryRound <= 0) {\n      return \"hass:battery-alert\";\n    }\n    // Will return one of the following icons: (listed so extractor picks up)\n    // hass:battery-10\n    // hass:battery-20\n    // hass:battery-30\n    // hass:battery-40\n    // hass:battery-50\n    // hass:battery-60\n    // hass:battery-70\n    // hass:battery-80\n    // hass:battery-90\n    // We obscure 'hass' in iconname so this name does not get picked up\n    return `${\"hass\"}:battery-${batteryRound}`;\n  }\n\n  const unit = state.attributes.unit_of_measurement;\n  if (unit === UNIT_C || unit === UNIT_F) {\n    return \"hass:thermometer\";\n  }\n  return domainIcon(\"sensor\");\n};\n","/** Return an icon representing a state. */\nimport { HassEntity } from \"home-assistant-js-websocket\";\nimport { DEFAULT_DOMAIN_ICON } from \"../const\";\nimport { binarySensorIcon } from \"./binary_sensor_icon\";\n\nimport { computeDomain } from \"./compute_domain\";\nimport { domainIcon } from \"./domain_icon\";\nimport { coverIcon } from \"./cover_icon\";\nimport { sensorIcon } from \"./sensor_icon\";\nimport { inputDateTimeIcon } from \"./input_dateteime_icon\";\n\nconst domainIcons = {\n  binary_sensor: binarySensorIcon,\n  cover: coverIcon,\n  sensor: sensorIcon,\n  input_datetime: inputDateTimeIcon,\n};\n\nexport const stateIcon = (state: HassEntity) => {\n  if (!state) {\n    return DEFAULT_DOMAIN_ICON;\n  }\n  if (state.attributes.icon) {\n    return state.attributes.icon;\n  }\n\n  const domain = computeDomain(state.entity_id);\n\n  if (domain in domainIcons) {\n    return domainIcons[domain](state);\n  }\n  return domainIcon(domain, state.state);\n};\n","import { HassEntity } from \"home-assistant-js-websocket\";\n\n/** Return an icon representing a binary sensor state. */\n\nexport const binarySensorIcon = (state: HassEntity) => {\n  const activated = state.state && state.state === \"off\";\n  switch (state.attributes.device_class) {\n    case \"battery\":\n      return activated ? \"hass:battery\" : \"hass:battery-outline\";\n    case \"cold\":\n      return activated ? \"hass:thermometer\" : \"hass:snowflake\";\n    case \"connectivity\":\n      return activated ? \"hass:server-network-off\" : \"hass:server-network\";\n    case \"door\":\n      return activated ? \"hass:door-closed\" : \"hass:door-open\";\n    case \"garage_door\":\n      return activated ? \"hass:garage\" : \"hass:garage-open\";\n    case \"gas\":\n    case \"power\":\n    case \"problem\":\n    case \"safety\":\n    case \"smoke\":\n      return activated ? \"hass:shield-check\" : \"hass:alert\";\n    case \"heat\":\n      return activated ? \"hass:thermometer\" : \"hass:fire\";\n    case \"light\":\n      return activated ? \"hass:brightness-5\" : \"hass:brightness-7\";\n    case \"lock\":\n      return activated ? \"hass:lock\" : \"hass:lock-open\";\n    case \"moisture\":\n      return activated ? \"hass:water-off\" : \"hass:water\";\n    case \"motion\":\n      return activated ? \"hass:walk\" : \"hass:run\";\n    case \"occupancy\":\n      return activated ? \"hass:home-outline\" : \"hass:home\";\n    case \"opening\":\n      return activated ? \"hass:square\" : \"hass:square-outline\";\n    case \"plug\":\n      return activated ? \"hass:power-plug-off\" : \"hass:power-plug\";\n    case \"presence\":\n      return activated ? \"hass:home-outline\" : \"hass:home\";\n    case \"sound\":\n      return activated ? \"hass:music-note-off\" : \"hass:music-note\";\n    case \"vibration\":\n      return activated ? \"hass:crop-portrait\" : \"hass:vibrate\";\n    case \"window\":\n      return activated ? \"hass:window-closed\" : \"hass:window-open\";\n    default:\n      return activated ? \"hass:radiobox-blank\" : \"hass:checkbox-marked-circle\";\n  }\n};\n","/** Return an icon representing an input datetime state. */\nimport { domainIcon } from \"./domain_icon\";\nimport { HassEntity } from \"home-assistant-js-websocket\";\n\nexport const inputDateTimeIcon = (state: HassEntity): string => {\n  if (!state.attributes.has_date) {\n    return \"hass:clock\";\n  }\n  if (!state.attributes.has_time) {\n    return \"hass:calendar\";\n  }\n  return domainIcon(\"input_datetime\");\n};\n","/** Compute the object ID of a state. */\nexport const computeObjectId = (entityId: string): string => {\n  return entityId.substr(entityId.indexOf(\".\") + 1);\n};\n","import \"@polymer/paper-icon-button/paper-icon-button\";\nimport \"@polymer/paper-input/paper-input\";\nimport \"@polymer/paper-item/paper-icon-item\";\nimport \"@polymer/paper-item/paper-item-body\";\nimport \"@vaadin/vaadin-combo-box/theme/material/vaadin-combo-box-light\";\nimport memoizeOne from \"memoize-one\";\n\nimport \"./state-badge\";\n\nimport { computeStateName } from \"../../common/entity/compute_state_name\";\nimport {\n  LitElement,\n  TemplateResult,\n  html,\n  css,\n  CSSResult,\n  property,\n  PropertyValues,\n} from \"lit-element\";\nimport { HomeAssistant } from \"../../types\";\nimport { HassEntity } from \"home-assistant-js-websocket\";\nimport { PolymerChangedEvent } from \"../../polymer-types\";\nimport { fireEvent } from \"../../common/dom/fire_event\";\nimport { computeDomain } from \"../../common/entity/compute_domain\";\n\nexport type HaEntityPickerEntityFilterFunc = (entityId: HassEntity) => boolean;\n\nconst rowRenderer = (\n  root: HTMLElement,\n  _owner,\n  model: { item: HassEntity }\n) => {\n  if (!root.firstElementChild) {\n    root.innerHTML = `\n      <style>\n        paper-icon-item {\n          margin: -10px;\n          padding: 0;\n        }\n      </style>\n      <paper-icon-item>\n        <state-badge state-obj=\"[[item]]\" slot=\"item-icon\"></state-badge>\n        <paper-item-body two-line=\"\">\n          <div class='name'>[[_computeStateName(item)]]</div>\n          <div secondary>[[item.entity_id]]</div>\n        </paper-item-body>\n      </paper-icon-item>\n    `;\n  }\n\n  root.querySelector(\"state-badge\")!.stateObj = model.item;\n  root.querySelector(\".name\")!.textContent = computeStateName(model.item);\n  root.querySelector(\"[secondary]\")!.textContent = model.item.entity_id;\n};\n\nclass HaEntityPicker extends LitElement {\n  @property({ type: Boolean }) public autofocus?: boolean;\n  @property({ type: Boolean }) public disabled?: boolean;\n  @property({ type: Boolean, attribute: \"allow-custom-entity\" })\n  public allowCustomEntity;\n  @property() public hass?: HomeAssistant;\n  @property() public label?: string;\n  @property() public value?: string;\n  /**\n   * Show entities from specific domains.\n   * @type {Array}\n   * @attr include-domains\n   */\n  @property({ type: Array, attribute: \"include-domains\" })\n  public includeDomains?: string[];\n  /**\n   * Show no entities of these domains.\n   * @type {Array}\n   * @attr exclude-domains\n   */\n  @property({ type: Array, attribute: \"exclude-domains\" })\n  public excludeDomains?: string[];\n  /**\n   * Show only entities of these device classes.\n   * @type {Array}\n   * @attr include-device-classes\n   */\n  @property({ type: Array, attribute: \"include-device-classes\" })\n  public includeDeviceClasses?: string[];\n  @property() public entityFilter?: HaEntityPickerEntityFilterFunc;\n  @property({ type: Boolean }) private _opened?: boolean;\n  @property() private _hass?: HomeAssistant;\n\n  private _getStates = memoizeOne(\n    (\n      hass: this[\"hass\"],\n      includeDomains: this[\"includeDomains\"],\n      excludeDomains: this[\"excludeDomains\"],\n      entityFilter: this[\"entityFilter\"],\n      includeDeviceClasses: this[\"includeDeviceClasses\"]\n    ) => {\n      let states: HassEntity[] = [];\n\n      if (!hass) {\n        return [];\n      }\n      let entityIds = Object.keys(hass.states);\n\n      if (includeDomains) {\n        entityIds = entityIds.filter((eid) =>\n          includeDomains.includes(computeDomain(eid))\n        );\n      }\n\n      if (excludeDomains) {\n        entityIds = entityIds.filter(\n          (eid) => !excludeDomains.includes(computeDomain(eid))\n        );\n      }\n\n      states = entityIds.sort().map((key) => hass!.states[key]);\n\n      if (includeDeviceClasses) {\n        states = states.filter(\n          (stateObj) =>\n            // We always want to include the entity of the current value\n            stateObj.entity_id === this.value ||\n            (stateObj.attributes.device_class &&\n              includeDeviceClasses.includes(stateObj.attributes.device_class))\n        );\n      }\n\n      if (entityFilter) {\n        states = states.filter(\n          (stateObj) =>\n            // We always want to include the entity of the current value\n            stateObj.entity_id === this.value || entityFilter!(stateObj)\n        );\n      }\n\n      return states;\n    }\n  );\n\n  protected updated(changedProps: PropertyValues) {\n    super.updated(changedProps);\n\n    if (changedProps.has(\"hass\") && !this._opened) {\n      this._hass = this.hass;\n    }\n  }\n\n  protected render(): TemplateResult | void {\n    const states = this._getStates(\n      this._hass,\n      this.includeDomains,\n      this.excludeDomains,\n      this.entityFilter,\n      this.includeDeviceClasses\n    );\n\n    return html`\n      <vaadin-combo-box-light\n        item-value-path=\"entity_id\"\n        item-label-path=\"entity_id\"\n        .items=${states}\n        .value=${this._value}\n        .allowCustomValue=${this.allowCustomEntity}\n        .renderer=${rowRenderer}\n        @opened-changed=${this._openedChanged}\n        @value-changed=${this._valueChanged}\n      >\n        <paper-input\n          .autofocus=${this.autofocus}\n          .label=${this.label === undefined && this._hass\n            ? this._hass.localize(\"ui.components.entity.entity-picker.entity\")\n            : this.label}\n          .value=${this._value}\n          .disabled=${this.disabled}\n          class=\"input\"\n          autocapitalize=\"none\"\n          autocomplete=\"off\"\n          autocorrect=\"off\"\n          spellcheck=\"false\"\n        >\n          ${this.value\n            ? html`\n                <paper-icon-button\n                  aria-label=${this.hass!.localize(\n                    \"ui.components.entity.entity-picker.clear\"\n                  )}\n                  slot=\"suffix\"\n                  class=\"clear-button\"\n                  icon=\"hass:close\"\n                  @click=${this._clearValue}\n                  no-ripple\n                >\n                  Clear\n                </paper-icon-button>\n              `\n            : \"\"}\n          ${states.length > 0\n            ? html`\n                <paper-icon-button\n                  aria-label=${this.hass!.localize(\n                    \"ui.components.entity.entity-picker.show_entities\"\n                  )}\n                  slot=\"suffix\"\n                  class=\"toggle-button\"\n                  .icon=${this._opened ? \"hass:menu-up\" : \"hass:menu-down\"}\n                >\n                  Toggle\n                </paper-icon-button>\n              `\n            : \"\"}\n        </paper-input>\n      </vaadin-combo-box-light>\n    `;\n  }\n\n  private _clearValue(ev: Event) {\n    ev.stopPropagation();\n    this._setValue(\"\");\n  }\n\n  private get _value() {\n    return this.value || \"\";\n  }\n\n  private _openedChanged(ev: PolymerChangedEvent<boolean>) {\n    this._opened = ev.detail.value;\n  }\n\n  private _valueChanged(ev: PolymerChangedEvent<string>) {\n    const newValue = ev.detail.value;\n    if (newValue !== this._value) {\n      this._setValue(newValue);\n    }\n  }\n\n  private _setValue(value: string) {\n    this.value = value;\n    setTimeout(() => {\n      fireEvent(this, \"value-changed\", { value });\n      fireEvent(this, \"change\");\n    }, 0);\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      paper-input > paper-icon-button {\n        width: 24px;\n        height: 24px;\n        padding: 2px;\n        color: var(--secondary-text-color);\n      }\n      [hidden] {\n        display: none;\n      }\n    `;\n  }\n}\n\ncustomElements.define(\"ha-entity-picker\", HaEntityPicker);\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-entity-picker\": HaEntityPicker;\n  }\n}\n","/**\n * Parse or format dates\n * @class fecha\n */\nvar fecha = {};\nvar token = /d{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|ZZ|([HhMsDm])\\1?|[aA]|\"[^\"]*\"|'[^']*'/g;\nvar twoDigits = '\\\\d\\\\d?';\nvar threeDigits = '\\\\d{3}';\nvar fourDigits = '\\\\d{4}';\nvar word = '[^\\\\s]+';\nvar literal = /\\[([^]*?)\\]/gm;\nvar noop = function () {\n};\n\nfunction regexEscape(str) {\n  return str.replace( /[|\\\\{()[^$+*?.-]/g, '\\\\$&');\n}\n\nfunction shorten(arr, sLen) {\n  var newArr = [];\n  for (var i = 0, len = arr.length; i < len; i++) {\n    newArr.push(arr[i].substr(0, sLen));\n  }\n  return newArr;\n}\n\nfunction monthUpdate(arrName) {\n  return function (d, v, i18n) {\n    var index = i18n[arrName].indexOf(v.charAt(0).toUpperCase() + v.substr(1).toLowerCase());\n    if (~index) {\n      d.month = index;\n    }\n  };\n}\n\nfunction pad(val, len) {\n  val = String(val);\n  len = len || 2;\n  while (val.length < len) {\n    val = '0' + val;\n  }\n  return val;\n}\n\nvar dayNames = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];\nvar monthNames = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];\nvar monthNamesShort = shorten(monthNames, 3);\nvar dayNamesShort = shorten(dayNames, 3);\nfecha.i18n = {\n  dayNamesShort: dayNamesShort,\n  dayNames: dayNames,\n  monthNamesShort: monthNamesShort,\n  monthNames: monthNames,\n  amPm: ['am', 'pm'],\n  DoFn: function DoFn(D) {\n    return D + ['th', 'st', 'nd', 'rd'][D % 10 > 3 ? 0 : (D - D % 10 !== 10) * D % 10];\n  }\n};\n\nvar formatFlags = {\n  D: function(dateObj) {\n    return dateObj.getDate();\n  },\n  DD: function(dateObj) {\n    return pad(dateObj.getDate());\n  },\n  Do: function(dateObj, i18n) {\n    return i18n.DoFn(dateObj.getDate());\n  },\n  d: function(dateObj) {\n    return dateObj.getDay();\n  },\n  dd: function(dateObj) {\n    return pad(dateObj.getDay());\n  },\n  ddd: function(dateObj, i18n) {\n    return i18n.dayNamesShort[dateObj.getDay()];\n  },\n  dddd: function(dateObj, i18n) {\n    return i18n.dayNames[dateObj.getDay()];\n  },\n  M: function(dateObj) {\n    return dateObj.getMonth() + 1;\n  },\n  MM: function(dateObj) {\n    return pad(dateObj.getMonth() + 1);\n  },\n  MMM: function(dateObj, i18n) {\n    return i18n.monthNamesShort[dateObj.getMonth()];\n  },\n  MMMM: function(dateObj, i18n) {\n    return i18n.monthNames[dateObj.getMonth()];\n  },\n  YY: function(dateObj) {\n    return pad(String(dateObj.getFullYear()), 4).substr(2);\n  },\n  YYYY: function(dateObj) {\n    return pad(dateObj.getFullYear(), 4);\n  },\n  h: function(dateObj) {\n    return dateObj.getHours() % 12 || 12;\n  },\n  hh: function(dateObj) {\n    return pad(dateObj.getHours() % 12 || 12);\n  },\n  H: function(dateObj) {\n    return dateObj.getHours();\n  },\n  HH: function(dateObj) {\n    return pad(dateObj.getHours());\n  },\n  m: function(dateObj) {\n    return dateObj.getMinutes();\n  },\n  mm: function(dateObj) {\n    return pad(dateObj.getMinutes());\n  },\n  s: function(dateObj) {\n    return dateObj.getSeconds();\n  },\n  ss: function(dateObj) {\n    return pad(dateObj.getSeconds());\n  },\n  S: function(dateObj) {\n    return Math.round(dateObj.getMilliseconds() / 100);\n  },\n  SS: function(dateObj) {\n    return pad(Math.round(dateObj.getMilliseconds() / 10), 2);\n  },\n  SSS: function(dateObj) {\n    return pad(dateObj.getMilliseconds(), 3);\n  },\n  a: function(dateObj, i18n) {\n    return dateObj.getHours() < 12 ? i18n.amPm[0] : i18n.amPm[1];\n  },\n  A: function(dateObj, i18n) {\n    return dateObj.getHours() < 12 ? i18n.amPm[0].toUpperCase() : i18n.amPm[1].toUpperCase();\n  },\n  ZZ: function(dateObj) {\n    var o = dateObj.getTimezoneOffset();\n    return (o > 0 ? '-' : '+') + pad(Math.floor(Math.abs(o) / 60) * 100 + Math.abs(o) % 60, 4);\n  }\n};\n\nvar parseFlags = {\n  D: [twoDigits, function (d, v) {\n    d.day = v;\n  }],\n  Do: [twoDigits + word, function (d, v) {\n    d.day = parseInt(v, 10);\n  }],\n  M: [twoDigits, function (d, v) {\n    d.month = v - 1;\n  }],\n  YY: [twoDigits, function (d, v) {\n    var da = new Date(), cent = +('' + da.getFullYear()).substr(0, 2);\n    d.year = '' + (v > 68 ? cent - 1 : cent) + v;\n  }],\n  h: [twoDigits, function (d, v) {\n    d.hour = v;\n  }],\n  m: [twoDigits, function (d, v) {\n    d.minute = v;\n  }],\n  s: [twoDigits, function (d, v) {\n    d.second = v;\n  }],\n  YYYY: [fourDigits, function (d, v) {\n    d.year = v;\n  }],\n  S: ['\\\\d', function (d, v) {\n    d.millisecond = v * 100;\n  }],\n  SS: ['\\\\d{2}', function (d, v) {\n    d.millisecond = v * 10;\n  }],\n  SSS: [threeDigits, function (d, v) {\n    d.millisecond = v;\n  }],\n  d: [twoDigits, noop],\n  ddd: [word, noop],\n  MMM: [word, monthUpdate('monthNamesShort')],\n  MMMM: [word, monthUpdate('monthNames')],\n  a: [word, function (d, v, i18n) {\n    var val = v.toLowerCase();\n    if (val === i18n.amPm[0]) {\n      d.isPm = false;\n    } else if (val === i18n.amPm[1]) {\n      d.isPm = true;\n    }\n  }],\n  ZZ: ['[^\\\\s]*?[\\\\+\\\\-]\\\\d\\\\d:?\\\\d\\\\d|[^\\\\s]*?Z', function (d, v) {\n    var parts = (v + '').match(/([+-]|\\d\\d)/gi), minutes;\n\n    if (parts) {\n      minutes = +(parts[1] * 60) + parseInt(parts[2], 10);\n      d.timezoneOffset = parts[0] === '+' ? minutes : -minutes;\n    }\n  }]\n};\nparseFlags.dd = parseFlags.d;\nparseFlags.dddd = parseFlags.ddd;\nparseFlags.DD = parseFlags.D;\nparseFlags.mm = parseFlags.m;\nparseFlags.hh = parseFlags.H = parseFlags.HH = parseFlags.h;\nparseFlags.MM = parseFlags.M;\nparseFlags.ss = parseFlags.s;\nparseFlags.A = parseFlags.a;\n\n\n// Some common format strings\nfecha.masks = {\n  default: 'ddd MMM DD YYYY HH:mm:ss',\n  shortDate: 'M/D/YY',\n  mediumDate: 'MMM D, YYYY',\n  longDate: 'MMMM D, YYYY',\n  fullDate: 'dddd, MMMM D, YYYY',\n  shortTime: 'HH:mm',\n  mediumTime: 'HH:mm:ss',\n  longTime: 'HH:mm:ss.SSS'\n};\n\n/***\n * Format a date\n * @method format\n * @param {Date|number} dateObj\n * @param {string} mask Format of the date, i.e. 'mm-dd-yy' or 'shortDate'\n */\nfecha.format = function (dateObj, mask, i18nSettings) {\n  var i18n = i18nSettings || fecha.i18n;\n\n  if (typeof dateObj === 'number') {\n    dateObj = new Date(dateObj);\n  }\n\n  if (Object.prototype.toString.call(dateObj) !== '[object Date]' || isNaN(dateObj.getTime())) {\n    throw new Error('Invalid Date in fecha.format');\n  }\n\n  mask = fecha.masks[mask] || mask || fecha.masks['default'];\n\n  var literals = [];\n\n  // Make literals inactive by replacing them with ??\n  mask = mask.replace(literal, function($0, $1) {\n    literals.push($1);\n    return '@@@';\n  });\n  // Apply formatting rules\n  mask = mask.replace(token, function ($0) {\n    return $0 in formatFlags ? formatFlags[$0](dateObj, i18n) : $0.slice(1, $0.length - 1);\n  });\n  // Inline literal values back into the formatted value\n  return mask.replace(/@@@/g, function() {\n    return literals.shift();\n  });\n};\n\n/**\n * Parse a date string into an object, changes - into /\n * @method parse\n * @param {string} dateStr Date string\n * @param {string} format Date parse format\n * @returns {Date|boolean}\n */\nfecha.parse = function (dateStr, format, i18nSettings) {\n  var i18n = i18nSettings || fecha.i18n;\n\n  if (typeof format !== 'string') {\n    throw new Error('Invalid format in fecha.parse');\n  }\n\n  format = fecha.masks[format] || format;\n\n  // Avoid regular expression denial of service, fail early for really long strings\n  // https://www.owasp.org/index.php/Regular_expression_Denial_of_Service_-_ReDoS\n  if (dateStr.length > 1000) {\n    return null;\n  }\n\n  var dateInfo = {};\n  var parseInfo = [];\n  var literals = [];\n  format = format.replace(literal, function($0, $1) {\n    literals.push($1);\n    return '@@@';\n  });\n  var newFormat = regexEscape(format).replace(token, function ($0) {\n    if (parseFlags[$0]) {\n      var info = parseFlags[$0];\n      parseInfo.push(info[1]);\n      return '(' + info[0] + ')';\n    }\n\n    return $0;\n  });\n  newFormat = newFormat.replace(/@@@/g, function() {\n    return literals.shift();\n  });\n  var matches = dateStr.match(new RegExp(newFormat, 'i'));\n  if (!matches) {\n    return null;\n  }\n\n  for (var i = 1; i < matches.length; i++) {\n    parseInfo[i - 1](dateInfo, matches[i], i18n);\n  }\n\n  var today = new Date();\n  if (dateInfo.isPm === true && dateInfo.hour != null && +dateInfo.hour !== 12) {\n    dateInfo.hour = +dateInfo.hour + 12;\n  } else if (dateInfo.isPm === false && +dateInfo.hour === 12) {\n    dateInfo.hour = 0;\n  }\n\n  var date;\n  if (dateInfo.timezoneOffset != null) {\n    dateInfo.minute = +(dateInfo.minute || 0) - +dateInfo.timezoneOffset;\n    date = new Date(Date.UTC(dateInfo.year || today.getFullYear(), dateInfo.month || 0, dateInfo.day || 1,\n      dateInfo.hour || 0, dateInfo.minute || 0, dateInfo.second || 0, dateInfo.millisecond || 0));\n  } else {\n    date = new Date(dateInfo.year || today.getFullYear(), dateInfo.month || 0, dateInfo.day || 1,\n      dateInfo.hour || 0, dateInfo.minute || 0, dateInfo.second || 0, dateInfo.millisecond || 0);\n  }\n  return date;\n};\n\nexport default fecha;\n","/**\n@license\nCopyright (c) 2015 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at\nhttp://polymer.github.io/LICENSE.txt The complete set of authors may be found at\nhttp://polymer.github.io/AUTHORS.txt The complete set of contributors may be\nfound at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as\npart of the polymer project is also subject to an additional IP rights grant\nfound at http://polymer.github.io/PATENTS.txt\n*/\nimport '@polymer/polymer/polymer-legacy.js';\nimport '@polymer/iron-flex-layout/iron-flex-layout.js';\n\nimport {Polymer} from '@polymer/polymer/lib/legacy/polymer-fn.js';\nimport {dom} from '@polymer/polymer/lib/legacy/polymer.dom.js';\nimport {html} from '@polymer/polymer/lib/utils/html-tag.js';\n\nimport {AppLayoutBehavior} from '../app-layout-behavior/app-layout-behavior.js';\n\n/**\napp-header-layout is a wrapper element that positions an app-header and other\ncontent. This element uses the document scroll by default, but it can also\ndefine its own scrolling region.\n\nUsing the document scroll:\n\n```html\n<app-header-layout>\n  <app-header slot=\"header\" fixed condenses effects=\"waterfall\">\n    <app-toolbar>\n      <div main-title>App name</div>\n    </app-toolbar>\n  </app-header>\n  <div>\n    main content\n  </div>\n</app-header-layout>\n```\n\nUsing an own scrolling region:\n\n```html\n<app-header-layout has-scrolling-region style=\"width: 300px; height: 400px;\">\n  <app-header slot=\"header\" fixed condenses effects=\"waterfall\">\n    <app-toolbar>\n      <div main-title>App name</div>\n    </app-toolbar>\n  </app-header>\n  <div>\n    main content\n  </div>\n</app-header-layout>\n```\n\nAdd the `fullbleed` attribute to app-header-layout to make it fit the size of\nits container:\n\n```html\n<app-header-layout fullbleed>\n ...\n</app-header-layout>\n```\n\n@group App Elements\n@element app-header-layout\n@demo app-header-layout/demo/simple.html Simple Demo\n@demo app-header-layout/demo/scrolling-region.html Scrolling Region\n@demo app-header-layout/demo/music.html Music Demo\n@demo app-header-layout/demo/footer.html Footer Demo\n*/\nPolymer({\n  _template: html`\n    <style>\n      :host {\n        display: block;\n        /**\n         * Force app-header-layout to have its own stacking context so that its parent can\n         * control the stacking of it relative to other elements (e.g. app-drawer-layout).\n         * This could be done using \\`isolation: isolate\\`, but that's not well supported\n         * across browsers.\n         */\n        position: relative;\n        z-index: 0;\n      }\n\n      #wrapper ::slotted([slot=header]) {\n        @apply --layout-fixed-top;\n        z-index: 1;\n      }\n\n      #wrapper.initializing ::slotted([slot=header]) {\n        position: relative;\n      }\n\n      :host([has-scrolling-region]) {\n        height: 100%;\n      }\n\n      :host([has-scrolling-region]) #wrapper ::slotted([slot=header]) {\n        position: absolute;\n      }\n\n      :host([has-scrolling-region]) #wrapper.initializing ::slotted([slot=header]) {\n        position: relative;\n      }\n\n      :host([has-scrolling-region]) #wrapper #contentContainer {\n        @apply --layout-fit;\n        overflow-y: auto;\n        -webkit-overflow-scrolling: touch;\n      }\n\n      :host([has-scrolling-region]) #wrapper.initializing #contentContainer {\n        position: relative;\n      }\n\n      :host([fullbleed]) {\n        @apply --layout-vertical;\n        @apply --layout-fit;\n      }\n\n      :host([fullbleed]) #wrapper,\n      :host([fullbleed]) #wrapper #contentContainer {\n        @apply --layout-vertical;\n        @apply --layout-flex;\n      }\n\n      #contentContainer {\n        /* Create a stacking context here so that all children appear below the header. */\n        position: relative;\n        z-index: 0;\n      }\n\n      @media print {\n        :host([has-scrolling-region]) #wrapper #contentContainer {\n          overflow-y: visible;\n        }\n      }\n\n    </style>\n\n    <div id=\"wrapper\" class=\"initializing\">\n      <slot id=\"headerSlot\" name=\"header\"></slot>\n\n      <div id=\"contentContainer\">\n        <slot></slot>\n      </div>\n    </div>\n`,\n\n  is: 'app-header-layout',\n  behaviors: [AppLayoutBehavior],\n\n  properties: {\n    /**\n     * If true, the current element will have its own scrolling region.\n     * Otherwise, it will use the document scroll to control the header.\n     */\n    hasScrollingRegion: {type: Boolean, value: false, reflectToAttribute: true}\n  },\n\n  observers: ['resetLayout(isAttached, hasScrollingRegion)'],\n\n  /**\n   * A reference to the app-header element.\n   *\n   * @property header\n   */\n  get header() {\n    return dom(this.$.headerSlot).getDistributedNodes()[0];\n  },\n\n  _updateLayoutStates: function() {\n    var header = this.header;\n    if (!this.isAttached || !header) {\n      return;\n    }\n    // Remove the initializing class, which staticly positions the header and\n    // the content until the height of the header can be read.\n    this.$.wrapper.classList.remove('initializing');\n    // Update scroll target.\n    header.scrollTarget = this.hasScrollingRegion ?\n        this.$.contentContainer :\n        this.ownerDocument.documentElement;\n    // Get header height here so that style reads are batched together before\n    // style writes (i.e. getBoundingClientRect() below).\n    var headerHeight = header.offsetHeight;\n    // Update the header position.\n    if (!this.hasScrollingRegion) {\n      requestAnimationFrame(function() {\n        var rect = this.getBoundingClientRect();\n        var rightOffset = document.documentElement.clientWidth - rect.right;\n        header.style.left = rect.left + 'px';\n        header.style.right = rightOffset + 'px';\n      }.bind(this));\n    } else {\n      header.style.left = '';\n      header.style.right = '';\n    }\n    // Update the content container position.\n    var containerStyle = this.$.contentContainer.style;\n    if (header.fixed && !header.condenses && this.hasScrollingRegion) {\n      // If the header size does not change and we're using a scrolling region,\n      // exclude the header area from the scrolling region so that the header\n      // doesn't overlap the scrollbar.\n      containerStyle.marginTop = headerHeight + 'px';\n      containerStyle.paddingTop = '';\n    } else {\n      containerStyle.paddingTop = headerHeight + 'px';\n      containerStyle.marginTop = '';\n    }\n  }\n});\n","import fecha from \"fecha\";\n\n// Check for support of native locale string options\nfunction toLocaleTimeStringSupportsOptions() {\n  try {\n    new Date().toLocaleTimeString(\"i\");\n  } catch (e) {\n    return e.name === \"RangeError\";\n  }\n  return false;\n}\n\nexport default toLocaleTimeStringSupportsOptions()\n  ? (dateObj: Date, locales: string) =>\n      dateObj.toLocaleTimeString(locales, {\n        hour: \"numeric\",\n        minute: \"2-digit\",\n      })\n  : (dateObj: Date) => fecha.format(dateObj, \"shortTime\");\n","import fecha from \"fecha\";\n\n// Check for support of native locale string options\nfunction toLocaleDateStringSupportsOptions() {\n  try {\n    new Date().toLocaleDateString(\"i\");\n  } catch (e) {\n    return e.name === \"RangeError\";\n  }\n  return false;\n}\n\nexport default toLocaleDateStringSupportsOptions()\n  ? (dateObj: Date, locales: string) =>\n      dateObj.toLocaleDateString(locales, {\n        year: \"numeric\",\n        month: \"long\",\n        day: \"numeric\",\n      })\n  : (dateObj: Date) => fecha.format(dateObj, \"mediumDate\");\n","import '@vaadin/vaadin-material-styles/mixins/overlay.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\n\nconst $_documentContainer = html`<dom-module id=\"material-date-picker-overlay\" theme-for=\"vaadin-date-picker-overlay\">\n  <template>\n    <style include=\"material-overlay\">\n      :host([fullscreen]) {\n        top: 0 !important;\n        right: 0 !important;\n        bottom: var(--vaadin-overlay-viewport-bottom) !important;\n        left: 0 !important;\n        align-items: stretch;\n        justify-content: stretch;\n      }\n\n      [part=\"overlay\"] {\n        overflow: hidden;\n        -webkit-overflow-scrolling: auto;\n      }\n\n      :host(:not([fullscreen])) [part=\"overlay\"] {\n        width: 360px;\n        max-height: 500px;\n        border-radius: 0 4px 4px;\n      }\n\n      :host(:not([fullscreen])[right-aligned]) [part=\"overlay\"] {\n        border-radius: 4px 0 4px 4px;\n      }\n\n      :host(:not([fullscreen])[bottom-aligned]) [part=\"overlay\"] {\n        border-radius: 4px;\n      }\n\n      :host(:not([fullscreen])[show-week-numbers]) [part=\"overlay\"] {\n        width: 396px;\n      }\n\n      [part=\"content\"] {\n        padding: 0;\n      }\n    </style>\n  </template>\n</dom-module>`;\n\ndocument.head.appendChild($_documentContainer.content);\n","/**\n@license\nCopyright (c) 2017 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\nimport { OverlayElement } from '@vaadin/vaadin-overlay/src/vaadin-overlay.js';\n\nimport { DisableUpgradeMixin } from '@polymer/polymer/lib/mixins/disable-upgrade-mixin.js';\n/**\n * The overlay element.\n *\n * ### Styling\n *\n * See [`<vaadin-overlay>` documentation](https://github.com/vaadin/vaadin-overlay/blob/master/src/vaadin-overlay.html)\n * for `<vaadin-date-picker-overlay>` parts.\n *\n * See [ThemableMixin – how to apply styles for shadow parts](https://github.com/vaadin/vaadin-themable-mixin/wiki)\n *\n * @memberof Vaadin\n * @private\n */\nclass DatePickerOverlayElement extends DisableUpgradeMixin(OverlayElement) {\n  static get is() {\n    return 'vaadin-date-picker-overlay';\n  }\n}\n\ncustomElements.define(DatePickerOverlayElement.is, DatePickerOverlayElement);\n","import '@vaadin/vaadin-material-styles/color.js';\nimport '@vaadin/vaadin-material-styles/shadow.js';\nimport '@vaadin/vaadin-material-styles/typography.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\n\nconst $_documentContainer = html`<dom-module id=\"material-button\" theme-for=\"vaadin-button\">\n  <template>\n    <style>\n      :host {\n        padding: 8px;\n        min-width: 64px;\n        box-sizing: border-box;\n        display: inline-flex;\n        align-items: baseline;\n        justify-content: center;\n        border-radius: 4px;\n        color: var(--material-primary-text-color);\n        font-family: var(--material-font-family);\n        text-transform: uppercase;\n        font-size: var(--material-button-font-size);\n        line-height: 20px;\n        font-weight: 500;\n        letter-spacing: 0.05em;\n        white-space: nowrap;\n        overflow: hidden;\n        transition: box-shadow 0.2s;\n        -webkit-tap-highlight-color: transparent;\n        -webkit-font-smoothing: antialiased;\n        -moz-osx-font-smoothing: grayscale;\n      }\n\n      @-moz-document url-prefix() {\n        :host {\n          vertical-align: -13px;\n        }\n      }\n\n      :host::before,\n      :host::after {\n        content: \"\";\n        pointer-events: none;\n        position: absolute;\n        border-radius: inherit;\n        opacity: 0;\n        background-color: currentColor;\n      }\n\n      :host::before {\n        width: 100%;\n        height: 100%;\n        top: 0;\n        left: 0;\n        transition: opacity 0.5s;\n      }\n\n      :host::after {\n        border-radius: 50%;\n        width: 320px;\n        height: 320px;\n        top: 50%;\n        left: 50%;\n        transform: translate(-50%, -50%);\n        transition: all 0.9s;\n      }\n\n      [part=\"label\"] ::slotted(*) {\n        vertical-align: middle;\n      }\n\n      :host(:hover)::before,\n      :host([focus-ring])::before {\n        opacity: 0.08;\n        transition-duration: 0.2s;\n      }\n\n      :host([active])::before {\n        opacity: 0.16;\n        transition: opacity 0.4s;\n      }\n\n      :host([active])::after {\n        transform: translate(-50%, -50%) scale(0.0000001); /* animation works weirdly with scale(0) */\n        opacity: 0.1;\n        transition: 0s;\n      }\n\n      :host(:hover:not([active]))::after {\n        transform: translate(-50%, -50%) scale(1);\n        opacity: 0;\n      }\n\n      :host([disabled]) {\n        pointer-events: none;\n        color: var(--material-disabled-text-color);\n      }\n\n      /* Contained and outline variants */\n      :host([theme~=\"contained\"]),\n      :host([theme~=\"outlined\"]) {\n        padding: 8px 16px;\n      }\n\n      :host([theme~=\"outlined\"]) {\n        box-shadow: inset 0 0 0 1px var(--_material-button-outline-color, rgba(0, 0, 0, 0.2));\n      }\n\n      :host([theme~=\"contained\"]:not([disabled])) {\n        background-color: var(--material-primary-color);\n        color: var(--material-primary-contrast-color);\n        box-shadow: var(--material-shadow-elevation-2dp);\n      }\n\n      :host([theme~=\"contained\"][disabled]) {\n        background-color: var(--material-secondary-background-color);\n      }\n\n      :host([theme~=\"contained\"]:hover) {\n        box-shadow: var(--material-shadow-elevation-4dp);\n      }\n\n      :host([theme~=\"contained\"][active]) {\n        box-shadow: var(--material-shadow-elevation-8dp);\n      }\n\n      /* Icon alignment */\n\n      [part] ::slotted(iron-icon) {\n        display: block;\n        width: 18px;\n        height: 18px;\n      }\n\n      [part=\"prefix\"] ::slotted(iron-icon) {\n        margin-right: 8px;\n        margin-left: -4px;\n      }\n\n      [part=\"suffix\"] ::slotted(iron-icon) {\n        margin-left: 8px;\n        margin-right: -4px;\n      }\n    </style>\n  </template>\n</dom-module>`;\n\ndocument.head.appendChild($_documentContainer.content);\n","/**\n@license\nCopyright (c) 2017 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\n/**\n * A private mixin to avoid problems with dynamic properties and Polymer Analyzer.\n * No need to expose these properties in the API docs.\n * @polymerMixin\n */\nconst TabIndexMixin = superClass => class VaadinTabIndexMixin extends superClass {\n  static get properties() {\n    var properties = {\n      /**\n       * Internal property needed to listen to `tabindex` attribute changes.\n       *\n       * For changing the tabindex of this component use the native `tabIndex` property.\n       * @private\n       */\n      tabindex: {\n        type: Number,\n        value: 0,\n        reflectToAttribute: true,\n        observer: '_tabindexChanged'\n      }\n    };\n\n    if (window.ShadyDOM) {\n      // ShadyDOM browsers need the `tabIndex` in order to notify when the user changes it programmatically.\n      properties['tabIndex'] = properties.tabindex;\n    }\n\n    return properties;\n  }\n};\n\n/**\n * Polymer.IronControlState is not a proper 2.0 class, also, its tabindex\n * implementation fails in the shadow dom, so we have this for vaadin elements.\n * @polymerMixin\n */\nexport const ControlStateMixin = superClass => class VaadinControlStateMixin extends TabIndexMixin(superClass) {\n  static get properties() {\n    return {\n      /**\n       * Specify that this control should have input focus when the page loads.\n       */\n      autofocus: {\n        type: Boolean\n      },\n\n      /**\n       * Stores the previous value of tabindex attribute of the disabled element\n       */\n      _previousTabIndex: {\n        type: Number\n      },\n\n      /**\n       * If true, the user cannot interact with this element.\n       */\n      disabled: {\n        type: Boolean,\n        observer: '_disabledChanged',\n        reflectToAttribute: true\n      },\n\n      _isShiftTabbing: {\n        type: Boolean\n      }\n    };\n  }\n\n  ready() {\n    this.addEventListener('focusin', e => {\n      if (e.composedPath()[0] === this) {\n        this._focus(e);\n      } else if (e.composedPath().indexOf(this.focusElement) !== -1 && !this.disabled) {\n        this._setFocused(true);\n      }\n    });\n    this.addEventListener('focusout', e => this._setFocused(false));\n\n    // In super.ready() other 'focusin' and 'focusout' listeners might be\n    // added, so we call it after our own ones to ensure they execute first.\n    // Issue to watch out: when incorrect, <vaadin-combo-box> refocuses the\n    // input field on iOS after “Done” is pressed.\n    super.ready();\n\n    // This fixes the bug in Firefox 61 (https://bugzilla.mozilla.org/show_bug.cgi?id=1472887)\n    // where focusout event does not go out of shady DOM because composed property in the event is not true\n    const ensureEventComposed = e => {\n      if (!e.composed) {\n        e.target.dispatchEvent(new CustomEvent(e.type, {\n          bubbles: true,\n          composed: true,\n          cancelable: false\n        }));\n      }\n    };\n    this.shadowRoot.addEventListener('focusin', ensureEventComposed);\n    this.shadowRoot.addEventListener('focusout', ensureEventComposed);\n\n    this.addEventListener('keydown', e => {\n      if (!e.defaultPrevented && e.keyCode === 9) {\n        if (e.shiftKey) {\n          // Flag is checked in _focus event handler.\n          this._isShiftTabbing = true;\n          HTMLElement.prototype.focus.apply(this);\n          this._setFocused(false);\n          // Event handling in IE is asynchronous and the flag is removed asynchronously as well\n          setTimeout(() => this._isShiftTabbing = false, 0);\n        } else {\n          // Workaround for FF63-65 bug that causes the focus to get lost when\n          // blurring a slotted component with focusable shadow root content\n          // https://bugzilla.mozilla.org/show_bug.cgi?id=1528686\n          // TODO: Remove when safe\n          const firefox = window.navigator.userAgent.match(/Firefox\\/(\\d\\d\\.\\d)/);\n          if (firefox\n            && parseFloat(firefox[1]) >= 63\n            && parseFloat(firefox[1]) < 66\n            && this.parentNode\n            && this.nextSibling) {\n            const fakeTarget = document.createElement('input');\n            fakeTarget.style.position = 'absolute';\n            fakeTarget.style.opacity = 0;\n            fakeTarget.tabIndex = this.tabIndex;\n\n            this.parentNode.insertBefore(fakeTarget, this.nextSibling);\n            fakeTarget.focus();\n            fakeTarget.addEventListener('focusout', () => this.parentNode.removeChild(fakeTarget));\n          }\n        }\n\n      }\n    });\n\n    if (this.autofocus && !this.focused && !this.disabled) {\n      window.requestAnimationFrame(() => {\n        this._focus();\n        this._setFocused(true);\n        this.setAttribute('focus-ring', '');\n      });\n    }\n\n    this._boundKeydownListener = this._bodyKeydownListener.bind(this);\n    this._boundKeyupListener = this._bodyKeyupListener.bind(this);\n  }\n\n  /**\n   * @protected\n   */\n  connectedCallback() {\n    super.connectedCallback();\n\n    document.body.addEventListener('keydown', this._boundKeydownListener, true);\n    document.body.addEventListener('keyup', this._boundKeyupListener, true);\n  }\n\n  /**\n   * @protected\n   */\n  disconnectedCallback() {\n    super.disconnectedCallback();\n\n    document.body.removeEventListener('keydown', this._boundKeydownListener, true);\n    document.body.removeEventListener('keyup', this._boundKeyupListener, true);\n\n    // in non-Chrome browsers, blur does not fire on the element when it is disconnected.\n    // reproducible in `<vaadin-date-picker>` when closing on `Cancel` or `Today` click.\n    if (this.hasAttribute('focused')) {\n      this._setFocused(false);\n    }\n  }\n\n  _setFocused(focused) {\n    if (focused) {\n      this.setAttribute('focused', '');\n    } else {\n      this.removeAttribute('focused');\n    }\n\n    // focus-ring is true when the element was focused from the keyboard.\n    // Focus Ring [A11ycasts]: https://youtu.be/ilj2P5-5CjI\n    if (focused && this._tabPressed) {\n      this.setAttribute('focus-ring', '');\n    } else {\n      this.removeAttribute('focus-ring');\n    }\n  }\n\n  _bodyKeydownListener(e) {\n    this._tabPressed = e.keyCode === 9;\n  }\n\n  _bodyKeyupListener() {\n    this._tabPressed = false;\n  }\n\n  /**\n   * Any element extending this mixin is required to implement this getter.\n   * It returns the actual focusable element in the component.\n   */\n  get focusElement() {\n    window.console.warn(`Please implement the 'focusElement' property in <${this.localName}>`);\n    return this;\n  }\n\n  _focus(e) {\n    if (this._isShiftTabbing) {\n      return;\n    }\n\n    this.focusElement.focus();\n    this._setFocused(true);\n  }\n\n  /**\n   * Moving the focus from the host element causes firing of the blur event what leads to problems in IE.\n   * @private\n   */\n  focus() {\n    if (!this.focusElement || this.disabled) {\n      return;\n    }\n\n    this.focusElement.focus();\n    this._setFocused(true);\n  }\n\n  /**\n   * Native bluring in the host element does nothing because it does not have the focus.\n   * In chrome it works, but not in FF.\n   * @private\n   */\n  blur() {\n    this.focusElement.blur();\n    this._setFocused(false);\n  }\n\n  _disabledChanged(disabled) {\n    this.focusElement.disabled = disabled;\n    if (disabled) {\n      this.blur();\n      this._previousTabIndex = this.tabindex;\n      this.tabindex = -1;\n      this.setAttribute('aria-disabled', 'true');\n    } else {\n      if (typeof this._previousTabIndex !== 'undefined') {\n        this.tabindex = this._previousTabIndex;\n      }\n      this.removeAttribute('aria-disabled');\n    }\n  }\n\n  _tabindexChanged(tabindex) {\n    if (tabindex !== undefined) {\n      this.focusElement.tabIndex = tabindex;\n    }\n\n    if (this.disabled && this.tabindex) {\n      // If tabindex attribute was changed while checkbox was disabled\n      if (this.tabindex !== -1) {\n        this._previousTabIndex = this.tabindex;\n      }\n      this.tabindex = tabindex = undefined;\n    }\n\n    if (window.ShadyDOM) {\n      this.setProperties({tabIndex: tabindex, tabindex: tabindex});\n    }\n  }\n\n  /**\n   * @protected\n   */\n  click() {\n    if (!this.disabled) {\n      super.click();\n    }\n  }\n};\n","const DEV_MODE_CODE_REGEXP =\n  /\\/\\*\\*\\s+vaadin-dev-mode:start([\\s\\S]*)vaadin-dev-mode:end\\s+\\*\\*\\//i;\n\nconst FlowClients = window.Vaadin && window.Vaadin.Flow && window.Vaadin.Flow.clients;\n\nfunction isMinified() {\n  function test() {\n    /** vaadin-dev-mode:start\n    return false;\n    vaadin-dev-mode:end **/\n    return true;\n  }\n  return uncommentAndRun(test);\n}\n\nfunction isDevelopmentMode() {\n  try {\n    if (isForcedDevelopmentMode()) {\n      return true;\n    }\n\n    if (!isLocalhost()) {\n      return false;\n    }\n\n    if (FlowClients) {\n      return !isFlowProductionMode();\n    }\n\n    return !isMinified();\n  } catch (e) {\n    // Some error in this code, assume production so no further actions will be taken\n    return false;\n  }\n}\n\nfunction isForcedDevelopmentMode() {\n  return localStorage.getItem(\"vaadin.developmentmode.force\");\n}\n\nfunction isLocalhost() {\n  return ([\"localhost\",\"127.0.0.1\"].indexOf(window.location.hostname) >= 0);\n}\n\nfunction isFlowProductionMode() {\n  if (FlowClients) {\n    const productionModeApps = Object.keys(FlowClients)\n      .map(key => FlowClients[key])\n      .filter(client => client.productionMode);\n    if (productionModeApps.length > 0) {\n      return true;\n    }\n  }\n  return false;\n}\n\nfunction uncommentAndRun(callback, args) {\n  if (typeof callback !== 'function') {\n    return;\n  }\n\n  const match = DEV_MODE_CODE_REGEXP.exec(callback.toString());\n  if (match) {\n    try {\n      // requires CSP: script-src 'unsafe-eval'\n      callback = new Function(match[1]);\n    } catch (e) {\n      // eat the exception\n      console.log('vaadin-development-mode-detector: uncommentAndRun() failed', e)\n    }\n  }\n\n  return callback(args);\n}\n\n// A guard against polymer-modulizer removing the window.Vaadin\n// initialization above.\nwindow['Vaadin'] = window['Vaadin'] || {};\n\n/**\n * Inspects the source code of the given `callback` function for\n * specially-marked _commented_ code. If such commented code is found in the\n * callback source, uncomments and runs that code instead of the callback\n * itself. Otherwise runs the callback as is.\n *\n * The optional arguments are passed into the callback / uncommented code,\n * the result is returned.\n *\n * See the `isMinified()` function source code in this file for an example.\n *\n */\nexport const runIfDevelopmentMode = function(callback, args) {\n  if (window.Vaadin.developmentMode) {\n    return uncommentAndRun(callback, args);\n  }\n};\n\nif (window.Vaadin.developmentMode === undefined) {\n  window.Vaadin.developmentMode = isDevelopmentMode();\n}\n","/* This file is autogenerated from src/vaadin-usage-statistics.tpl.html */\n/*\n\nThis script gathers usage statistics from the application running in development mode.\n\nStatistics gathering is automatically disabled and excluded from production builds.\n\nFor details and to opt-out, see https://github.com/vaadin/vaadin-usage-statistics.\n\n*/\n/*\n  FIXME(polymer-modulizer): the above comments were extracted\n  from HTML and may be out of place here. Review them and\n  then delete this comment!\n*/\nimport { runIfDevelopmentMode } from '@vaadin/vaadin-development-mode-detector/vaadin-development-mode-detector.js';\n\nfunction maybeGatherAndSendStats() {\n  /** vaadin-dev-mode:start\n  (function () {\n'use strict';\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) {\n  return typeof obj;\n} : function (obj) {\n  return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n};\n\nvar classCallCheck = function (instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};\n\nvar createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar getPolymerVersion = function getPolymerVersion() {\n  return window.Polymer && window.Polymer.version;\n};\n\nvar StatisticsGatherer = function () {\n  function StatisticsGatherer(logger) {\n    classCallCheck(this, StatisticsGatherer);\n\n    this.now = new Date().getTime();\n    this.logger = logger;\n  }\n\n  createClass(StatisticsGatherer, [{\n    key: 'frameworkVersionDetectors',\n    value: function frameworkVersionDetectors() {\n      return {\n        'Flow': function Flow() {\n          if (window.Vaadin && window.Vaadin.Flow && window.Vaadin.Flow.clients) {\n            var flowVersions = Object.keys(window.Vaadin.Flow.clients).map(function (key) {\n              return window.Vaadin.Flow.clients[key];\n            }).filter(function (client) {\n              return client.getVersionInfo;\n            }).map(function (client) {\n              return client.getVersionInfo().flow;\n            });\n            if (flowVersions.length > 0) {\n              return flowVersions[0];\n            }\n          }\n        },\n        'Vaadin Framework': function VaadinFramework() {\n          if (window.vaadin && window.vaadin.clients) {\n            var frameworkVersions = Object.values(window.vaadin.clients).filter(function (client) {\n              return client.getVersionInfo;\n            }).map(function (client) {\n              return client.getVersionInfo().vaadinVersion;\n            });\n            if (frameworkVersions.length > 0) {\n              return frameworkVersions[0];\n            }\n          }\n        },\n        'AngularJs': function AngularJs() {\n          if (window.angular && window.angular.version && window.angular.version) {\n            return window.angular.version.full;\n          }\n        },\n        'Angular': function Angular() {\n          if (window.ng) {\n            var tags = document.querySelectorAll(\"[ng-version]\");\n            if (tags.length > 0) {\n              return tags[0].getAttribute(\"ng-version\");\n            }\n            return \"Unknown\";\n          }\n        },\n        'Backbone.js': function BackboneJs() {\n          if (window.Backbone) {\n            return window.Backbone.VERSION;\n          }\n        },\n        'React': function React() {\n          var reactSelector = '[data-reactroot], [data-reactid]';\n          if (!!document.querySelector(reactSelector)) {\n            // React does not publish the version by default\n            return \"unknown\";\n          }\n        },\n        'Ember': function Ember() {\n          if (window.Em && window.Em.VERSION) {\n            return window.Em.VERSION;\n          } else if (window.Ember && window.Ember.VERSION) {\n            return window.Ember.VERSION;\n          }\n        },\n        'jQuery': function (_jQuery) {\n          function jQuery() {\n            return _jQuery.apply(this, arguments);\n          }\n\n          jQuery.toString = function () {\n            return _jQuery.toString();\n          };\n\n          return jQuery;\n        }(function () {\n          if (typeof jQuery === 'function' && jQuery.prototype.jquery !== undefined) {\n            return jQuery.prototype.jquery;\n          }\n        }),\n        'Polymer': function Polymer() {\n          var version = getPolymerVersion();\n          if (version) {\n            return version;\n          }\n        },\n        'LitElement': function LitElement() {\n          var version = window.litElementVersions && window.litElementVersions[0];\n          if (version) {\n            return version;\n          }\n        },\n        'LitHtml': function LitHtml() {\n          var version = window.litHtmlVersions && window.litHtmlVersions[0];\n          if (version) {\n            return version;\n          }\n        },\n        'Vue.js': function VueJs() {\n          if (window.Vue) {\n            return window.Vue.version;\n          }\n        }\n      };\n    }\n  }, {\n    key: 'getUsedVaadinElements',\n    value: function getUsedVaadinElements(elements) {\n      var version = getPolymerVersion();\n      var elementClasses = void 0;\n      // NOTE: In case you edit the code here, YOU MUST UPDATE any statistics reporting code in Flow.\n      // Check all locations calling the method getEntries() in\n      // https://github.com/vaadin/flow/blob/master/flow-server/src/main/java/com/vaadin/flow/internal/UsageStatistics.java#L106\n      // Currently it is only used by BootstrapHandler.\n      if (version && version.indexOf('2') === 0) {\n        // Polymer 2: components classes are stored in window.Vaadin\n        elementClasses = Object.keys(window.Vaadin).map(function (c) {\n          return window.Vaadin[c];\n        }).filter(function (c) {\n          return c.is;\n        });\n      } else {\n        // Polymer 3: components classes are stored in window.Vaadin.registrations\n        elementClasses = window.Vaadin.registrations || [];\n      }\n      elementClasses.forEach(function (klass) {\n        var version = klass.version ? klass.version : \"0.0.0\";\n        elements[klass.is] = { version: version };\n      });\n    }\n  }, {\n    key: 'getUsedVaadinThemes',\n    value: function getUsedVaadinThemes(themes) {\n      ['Lumo', 'Material'].forEach(function (themeName) {\n        var theme;\n        var version = getPolymerVersion();\n        if (version && version.indexOf('2') === 0) {\n          // Polymer 2: themes are stored in window.Vaadin\n          theme = window.Vaadin[themeName];\n        } else {\n          // Polymer 3: themes are stored in custom element registry\n          theme = customElements.get('vaadin-' + themeName.toLowerCase() + '-styles');\n        }\n        if (theme && theme.version) {\n          themes[themeName] = { version: theme.version };\n        }\n      });\n    }\n  }, {\n    key: 'getFrameworks',\n    value: function getFrameworks(frameworks) {\n      var detectors = this.frameworkVersionDetectors();\n      Object.keys(detectors).forEach(function (framework) {\n        var detector = detectors[framework];\n        try {\n          var version = detector();\n          if (version) {\n            frameworks[framework] = { version: version };\n          }\n        } catch (e) {}\n      });\n    }\n  }, {\n    key: 'gather',\n    value: function gather(storage) {\n      var storedStats = storage.read();\n      var gatheredStats = {};\n      var types = [\"elements\", \"frameworks\", \"themes\"];\n\n      types.forEach(function (type) {\n        gatheredStats[type] = {};\n        if (!storedStats[type]) {\n          storedStats[type] = {};\n        }\n      });\n\n      var previousStats = JSON.stringify(storedStats);\n\n      this.getUsedVaadinElements(gatheredStats.elements);\n      this.getFrameworks(gatheredStats.frameworks);\n      this.getUsedVaadinThemes(gatheredStats.themes);\n\n      var now = this.now;\n      types.forEach(function (type) {\n        var keys = Object.keys(gatheredStats[type]);\n        keys.forEach(function (key) {\n          if (!storedStats[type][key] || _typeof(storedStats[type][key]) != _typeof({})) {\n            storedStats[type][key] = { firstUsed: now };\n          }\n          // Discards any previously logged version number\n          storedStats[type][key].version = gatheredStats[type][key].version;\n          storedStats[type][key].lastUsed = now;\n        });\n      });\n\n      var newStats = JSON.stringify(storedStats);\n      storage.write(newStats);\n      if (newStats != previousStats && Object.keys(storedStats).length > 0) {\n        this.logger.debug(\"New stats: \" + newStats);\n      }\n    }\n  }]);\n  return StatisticsGatherer;\n}();\n\nvar StatisticsStorage = function () {\n  function StatisticsStorage(key) {\n    classCallCheck(this, StatisticsStorage);\n\n    this.key = key;\n  }\n\n  createClass(StatisticsStorage, [{\n    key: 'read',\n    value: function read() {\n      var localStorageStatsString = localStorage.getItem(this.key);\n      try {\n        return JSON.parse(localStorageStatsString ? localStorageStatsString : '{}');\n      } catch (e) {\n        return {};\n      }\n    }\n  }, {\n    key: 'write',\n    value: function write(data) {\n      localStorage.setItem(this.key, data);\n    }\n  }, {\n    key: 'clear',\n    value: function clear() {\n      localStorage.removeItem(this.key);\n    }\n  }, {\n    key: 'isEmpty',\n    value: function isEmpty() {\n      var storedStats = this.read();\n      var empty = true;\n      Object.keys(storedStats).forEach(function (key) {\n        if (Object.keys(storedStats[key]).length > 0) {\n          empty = false;\n        }\n      });\n\n      return empty;\n    }\n  }]);\n  return StatisticsStorage;\n}();\n\nvar StatisticsSender = function () {\n  function StatisticsSender(url, logger) {\n    classCallCheck(this, StatisticsSender);\n\n    this.url = url;\n    this.logger = logger;\n  }\n\n  createClass(StatisticsSender, [{\n    key: 'send',\n    value: function send(data, errorHandler) {\n      var logger = this.logger;\n\n      if (navigator.onLine === false) {\n        logger.debug(\"Offline, can't send\");\n        errorHandler();\n        return;\n      }\n      logger.debug(\"Sending data to \" + this.url);\n\n      var req = new XMLHttpRequest();\n      req.withCredentials = true;\n      req.addEventListener(\"load\", function () {\n        // Stats sent, nothing more to do\n        logger.debug(\"Response: \" + req.responseText);\n      });\n      req.addEventListener(\"error\", function () {\n        logger.debug(\"Send failed\");\n        errorHandler();\n      });\n      req.addEventListener(\"abort\", function () {\n        logger.debug(\"Send aborted\");\n        errorHandler();\n      });\n      req.open(\"POST\", this.url);\n      req.setRequestHeader(\"Content-Type\", \"application/json\");\n      req.send(data);\n    }\n  }]);\n  return StatisticsSender;\n}();\n\nvar StatisticsLogger = function () {\n  function StatisticsLogger(id) {\n    classCallCheck(this, StatisticsLogger);\n\n    this.id = id;\n  }\n\n  createClass(StatisticsLogger, [{\n    key: '_isDebug',\n    value: function _isDebug() {\n      return localStorage.getItem(\"vaadin.\" + this.id + \".debug\");\n    }\n  }, {\n    key: 'debug',\n    value: function debug(msg) {\n      if (this._isDebug()) {\n        console.info(this.id + \": \" + msg);\n      }\n    }\n  }]);\n  return StatisticsLogger;\n}();\n\nvar UsageStatistics = function () {\n  function UsageStatistics() {\n    classCallCheck(this, UsageStatistics);\n\n    this.now = new Date();\n    this.timeNow = this.now.getTime();\n    this.gatherDelay = 10; // Delay between loading this file and gathering stats\n    this.initialDelay = 24 * 60 * 60;\n\n    this.logger = new StatisticsLogger(\"statistics\");\n    this.storage = new StatisticsStorage(\"vaadin.statistics.basket\");\n    this.gatherer = new StatisticsGatherer(this.logger);\n    this.sender = new StatisticsSender(\"https://tools.vaadin.com/usage-stats/submit\", this.logger);\n  }\n\n  createClass(UsageStatistics, [{\n    key: 'maybeGatherAndSend',\n    value: function maybeGatherAndSend() {\n      var _this = this;\n\n      if (localStorage.getItem(UsageStatistics.optOutKey)) {\n        return;\n      }\n      this.gatherer.gather(this.storage);\n      setTimeout(function () {\n        _this.maybeSend();\n      }, this.gatherDelay * 1000);\n    }\n  }, {\n    key: 'lottery',\n    value: function lottery() {\n      return true;\n    }\n  }, {\n    key: 'currentMonth',\n    value: function currentMonth() {\n      return this.now.getYear() * 12 + this.now.getMonth();\n    }\n  }, {\n    key: 'maybeSend',\n    value: function maybeSend() {\n      var firstUse = Number(localStorage.getItem(UsageStatistics.firstUseKey));\n      var monthProcessed = Number(localStorage.getItem(UsageStatistics.monthProcessedKey));\n\n      if (!firstUse) {\n        // Use a grace period to avoid interfering with tests, incognito mode etc\n        firstUse = this.timeNow;\n        localStorage.setItem(UsageStatistics.firstUseKey, firstUse);\n      }\n\n      if (this.timeNow < firstUse + this.initialDelay * 1000) {\n        this.logger.debug(\"No statistics will be sent until the initial delay of \" + this.initialDelay + \"s has passed\");\n        return;\n      }\n      if (this.currentMonth() <= monthProcessed) {\n        this.logger.debug(\"This month has already been processed\");\n        return;\n      }\n      localStorage.setItem(UsageStatistics.monthProcessedKey, this.currentMonth());\n      // Use random sampling\n      if (this.lottery()) {\n        this.logger.debug(\"Congratulations, we have a winner!\");\n      } else {\n        this.logger.debug(\"Sorry, no stats from you this time\");\n        return;\n      }\n\n      this.send();\n    }\n  }, {\n    key: 'send',\n    value: function send() {\n      // Ensure we have the latest data\n      this.gatherer.gather(this.storage);\n\n      // Read, send and clean up\n      var data = this.storage.read();\n      data[\"firstUse\"] = Number(localStorage.getItem(UsageStatistics.firstUseKey));\n      data[\"usageStatisticsVersion\"] = UsageStatistics.version;\n      var info = 'This request contains usage statistics gathered from the application running in development mode. \\n\\nStatistics gathering is automatically disabled and excluded from production builds.\\n\\nFor details and to opt-out, see https://github.com/vaadin/vaadin-usage-statistics.\\n\\n\\n\\n';\n      var self = this;\n      this.sender.send(info + JSON.stringify(data), function () {\n        // Revert the 'month processed' flag\n        localStorage.setItem(UsageStatistics.monthProcessedKey, self.currentMonth() - 1);\n      });\n    }\n  }], [{\n    key: 'version',\n    get: function get$1() {\n      return '2.1.0';\n    }\n  }, {\n    key: 'firstUseKey',\n    get: function get$1() {\n      return 'vaadin.statistics.firstuse';\n    }\n  }, {\n    key: 'monthProcessedKey',\n    get: function get$1() {\n      return 'vaadin.statistics.monthProcessed';\n    }\n  }, {\n    key: 'optOutKey',\n    get: function get$1() {\n      return 'vaadin.statistics.optout';\n    }\n  }]);\n  return UsageStatistics;\n}();\n\ntry {\n  window.Vaadin = window.Vaadin || {};\n  window.Vaadin.usageStatsChecker = window.Vaadin.usageStatsChecker || new UsageStatistics();\n  window.Vaadin.usageStatsChecker.maybeGatherAndSend();\n} catch (e) {\n  // Intentionally ignored as this is not a problem in the app being developed\n}\n\n}());\n\n  vaadin-dev-mode:end **/\n}\n\nexport const usageStatistics = function() {\n  if (typeof runIfDevelopmentMode === 'function') {\n    return runIfDevelopmentMode(maybeGatherAndSendStats);\n  }\n};\n","import { idlePeriod } from '@polymer/polymer/lib/utils/async.js';\nimport { Debouncer } from '@polymer/polymer/lib/utils/debounce.js';\nimport { enqueueDebouncer } from '@polymer/polymer/lib/utils/flush.js';\n\nimport { usageStatistics } from '@vaadin/vaadin-usage-statistics/vaadin-usage-statistics.js';\nif (!window.Vaadin) {\n  window['Vaadin'] = {};\n}\n\n/**\n * Array of Vaadin custom element classes that have been finalized.\n */\nwindow['Vaadin'].registrations = window.Vaadin.registrations || [];\n\n// Use the hack to prevent polymer-modulizer from converting to exports\nwindow['Vaadin'].developmentModeCallback = window.Vaadin.developmentModeCallback || {};\nwindow['Vaadin'].developmentModeCallback['vaadin-usage-statistics'] = function() {\n  if (usageStatistics) {\n    usageStatistics();\n  }\n};\n\nlet statsJob;\n\nconst registered = new Set();\n\n/**\n * @polymerMixin\n */\nexport const ElementMixin = superClass => class VaadinElementMixin extends superClass {\n  /** @protected */\n  static finalize() {\n    super.finalize();\n\n    const {is} = this;\n\n    // Registers a class prototype for telemetry purposes.\n    if (is && !registered.has(is)) {\n      window.Vaadin.registrations.push(this);\n      registered.add(is);\n\n      if (window.Vaadin.developmentModeCallback) {\n        statsJob = Debouncer.debounce(statsJob,\n          idlePeriod, () => {\n            window.Vaadin.developmentModeCallback['vaadin-usage-statistics']();\n          }\n        );\n        enqueueDebouncer(statsJob);\n      }\n    }\n  }\n  constructor() {\n    super();\n    if (document.doctype === null) {\n      console.warn(\n        'Vaadin components require the \"standards mode\" declaration. Please add <!DOCTYPE html> to the HTML document.'\n      );\n    }\n  }\n};\n","/**\n@license\nCopyright (c) 2017 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport { GestureEventListeners } from '@polymer/polymer/lib/mixins/gesture-event-listeners.js';\nimport { ThemableMixin } from '@vaadin/vaadin-themable-mixin/vaadin-themable-mixin.js';\nimport { ControlStateMixin } from '@vaadin/vaadin-control-state-mixin/vaadin-control-state-mixin.js';\nimport { ElementMixin } from '@vaadin/vaadin-element-mixin/vaadin-element-mixin.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { addListener } from '@polymer/polymer/lib/utils/gestures.js';\n/**\n * `<vaadin-button>` is a Web Component providing an accessible and customizable button.\n *\n * ```html\n * <vaadin-button>\n * </vaadin-button>\n * ```\n *\n * ```js\n * document.querySelector('vaadin-button').addEventListener('click', () => alert('Hello World!'));\n * ```\n *\n * ### Styling\n *\n * The following shadow DOM parts are exposed for styling:\n *\n * Part name | Description\n * ----------------|----------------\n * `label` | The label (text) inside the button\n * `prefix` | A slot for e.g. an icon before the label\n * `suffix` | A slot for e.g. an icon after the label\n *\n *\n * The following attributes are exposed for styling:\n *\n * Attribute | Description\n * --------- | -----------\n * `active` | Set when the button is pressed down, either with mouse, touch or the keyboard.\n * `disabled` | Set when the button is disabled.\n * `focus-ring` | Set when the button is focused using the keyboard.\n * `focused` | Set when the button is focused.\n *\n * See [ThemableMixin – how to apply styles for shadow parts](https://github.com/vaadin/vaadin-themable-mixin/wiki)\n *\n * @memberof Vaadin\n * @mixes Vaadin.ElementMixin\n * @mixes Vaadin.ControlStateMixin\n * @mixes Vaadin.ThemableMixin\n * @mixes Polymer.GestureEventListeners\n * @demo demo/index.html\n */\nclass ButtonElement extends\n  ElementMixin(\n    ControlStateMixin(\n      ThemableMixin(\n        GestureEventListeners(PolymerElement)))) {\n  static get template() {\n    return html`\n    <style>\n      :host {\n        display: inline-block;\n        position: relative;\n        outline: none;\n        white-space: nowrap;\n      }\n\n      :host([hidden]) {\n        display: none !important;\n      }\n\n      /* Ensure the button is always aligned on the baseline */\n      .vaadin-button-container::before {\n        content: \"\\\\2003\";\n        display: inline-block;\n        width: 0;\n      }\n\n      .vaadin-button-container {\n        display: inline-flex;\n        align-items: center;\n        justify-content: center;\n        text-align: center;\n        width: 100%;\n        height: 100%;\n        min-height: inherit;\n        text-shadow: inherit;\n        -webkit-user-select: none;\n        -moz-user-select: none;\n        user-select: none;\n      }\n\n      [part=\"prefix\"],\n      [part=\"suffix\"] {\n        flex: none;\n      }\n\n      [part=\"label\"] {\n        white-space: nowrap;\n        overflow: hidden;\n        text-overflow: ellipsis;\n      }\n\n      #button {\n        position: absolute;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        opacity: 0;\n        cursor: inherit;\n      }\n    </style>\n    <div class=\"vaadin-button-container\">\n      <div part=\"prefix\">\n        <slot name=\"prefix\"></slot>\n      </div>\n      <div part=\"label\">\n        <slot></slot>\n      </div>\n      <div part=\"suffix\">\n        <slot name=\"suffix\"></slot>\n      </div>\n    </div>\n    <button id=\"button\" type=\"button\"></button>\n`;\n  }\n\n  static get is() {\n    return 'vaadin-button';\n  }\n\n  static get version() {\n    return '2.2.1';\n  }\n\n  ready() {\n    super.ready();\n\n    // Leaving default role in the native button, makes navigation announcement\n    // being different when using focus navigation (tab) versus using normal\n    // navigation (arrows). The first way announces the label on a button\n    // since the focus is moved programmatically, and the second on a group.\n    this.setAttribute('role', 'button');\n    this.$.button.setAttribute('role', 'presentation');\n\n    this._addActiveListeners();\n  }\n\n  /**\n   * @protected\n   */\n  disconnectedCallback() {\n    super.disconnectedCallback();\n\n    // `active` state is preserved when the element is disconnected between keydown and keyup events.\n    // reproducible in `<vaadin-date-picker>` when closing on `Cancel` or `Today` click.\n    if (this.hasAttribute('active')) {\n      this.removeAttribute('active');\n    }\n  }\n\n  _addActiveListeners() {\n    addListener(this, 'down', () => !this.disabled && this.setAttribute('active', ''));\n    addListener(this, 'up', () => this.removeAttribute('active'));\n    this.addEventListener('keydown', e => !this.disabled && [13, 32].indexOf(e.keyCode) >= 0 && this.setAttribute('active', ''));\n    this.addEventListener('keyup', () => this.removeAttribute('active'));\n    this.addEventListener('blur', () => this.removeAttribute('active'));\n  }\n\n  /**\n   * @protected\n   */\n  get focusElement() {\n    return this.$.button;\n  }\n}\n\ncustomElements.define(ButtonElement.is, ButtonElement);\n\nexport { ButtonElement };\n","import '@vaadin/vaadin-material-styles/color.js';\nimport '@vaadin/vaadin-material-styles/font-icons.js';\nimport '@vaadin/vaadin-material-styles/typography.js';\nimport '@vaadin/vaadin-material-styles/shadow.js';\nimport '@vaadin/vaadin-button/theme/material/vaadin-button.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\n\nconst $_documentContainer = html`<dom-module id=\"material-date-picker-overlay-content\" theme-for=\"vaadin-date-picker-overlay-content\">\n  <template>\n    <style>\n      :host {\n        font-family: var(--material-font-family);\n        font-size: var(--material-body-font-size);\n        -webkit-text-size-adjust: 100%;\n        line-height: 1.4;\n\n        /* FIXME(platosha): fix the core styles and remove this override. */\n        background: transparent;\n      }\n\n      :host([fullscreen]) {\n        position: absolute;\n      }\n\n      /* Fullscreen Toolbar */\n\n      [part=\"overlay-header\"] {\n        display: flex;\n        align-items: baseline;\n        position: relative;\n        z-index: 2;\n        color: var(--material-body-text-color);\n        background: var(--material-secondary-background-color);\n        border-bottom: 2px solid var(--material-primary-color);\n        padding: 8px;\n        box-shadow: var(--material-shadow-elevation-4dp);\n      }\n\n      /* FIXME(platosha): fix the core styles and remove this override. */\n      [part=\"overlay-header\"]:not([desktop]) {\n        padding-bottom: 8px;\n      }\n\n      [part=\"label\"] {\n        padding: 0 8px;\n        flex: auto;\n      }\n\n      [part=\"clear-button\"],\n      [part=\"toggle-button\"] {\n        font-family: 'material-icons';\n        font-size: var(--material-icon-font-size);\n        line-height: 24px;\n        width: 24px;\n        height: 24px;\n        text-align: center;\n      }\n\n      [part=\"clear-button\"],\n      [part=\"toggle-button\"],\n      [part=\"years-toggle-button\"] {\n        padding: 8px;\n        color: var(--material-secondary-text-color);\n      }\n\n      [part=\"clear-button\"]:hover,\n      [part=\"toggle-button\"]:hover,\n      [part=\"years-toggle-button\"]:hover {\n        color: inherit;\n      }\n\n      [part=\"clear-button\"]::before {\n        content: var(--material-icons-clear);\n      }\n\n      [part=\"toggle-button\"]::before {\n        content: var(--material-icons-calendar);\n      }\n\n      [part=\"years-toggle-button\"] {\n        position: static;\n        padding: 4px 8px;\n        font-size: var(--material-body-font-size);\n        font-weight: 500;\n        line-height: 24px;\n        letter-spacing: 0.05em;\n        color: var(--material-secondary-text-color);\n      }\n\n      [part=\"years-toggle-button\"]::before {\n        content: '';\n        display: none;\n      }\n\n      [part=\"years-toggle-button\"]::after {\n        content: var(--material-icons-play);\n        display: inline-block;\n        width: 24px;\n        font-family: 'material-icons';\n        font-size: var(--material-icon-font-size);\n        line-height: 24px;\n        text-align: center;\n        transition: transform 100ms cubic-bezier(.4, 0, .2, 1);\n      }\n\n      :host([years-visible]) [part=\"years-toggle-button\"]::after {\n        transform: rotate(90deg);\n      }\n\n      /* Month scroller */\n\n      [part=\"months\"] {\n        --vaadin-infinite-scroller-item-height: 320px;\n        text-align: center;\n      }\n\n      /* Year scroller */\n\n      [part=\"years\"] {\n        z-index: 1;\n        background: var(--material-secondary-text-color);\n        color: var(--material-background-color);\n        text-align: center;\n      }\n\n      [part=\"years\"]::before {\n        z-index: 2;\n        border: 0;\n        width: 8px;\n        height: 8px;\n        transform: translateX(-50%) rotate(-45deg);\n        background: var(--material-background-color);\n      }\n\n      :host([years-visible]) [part=\"years\"]::after {\n        top: calc(20px + 16px);\n        height: calc(100% - 20px - 16px);\n      }\n\n      [part=\"year-number\"] {\n        font-size: var(--material-small-font-size);\n        line-height: 10px; /* NOTE(platosha): chosen to align years to months */\n      }\n\n      [part=\"year-separator\"] {\n        background-color: currentColor;\n        width: 4px;\n        height: 4px;\n        border-radius: 50%;\n        margin: calc(0.5 * var(--vaadin-infinite-scroller-item-height, 80px) - 0.5 * 10px - 0.5 * 4px) auto;\n      }\n\n      /* Bottom Bar */\n\n      [part=\"toolbar\"] {\n        display: flex;\n        justify-content: flex-end;\n        padding: 8px 4px;\n        border-top: 1px solid var(--material-divider-color);\n      }\n\n      [part=\"cancel-button\"] {\n        order: 1;\n      }\n\n      [part=\"today-button\"] {\n        order: 2;\n      }\n\n      [part=\"today-button\"],\n      [part=\"cancel-button\"] {\n        margin: 0 4px;\n      }\n    </style>\n  </template>\n</dom-module>`;\n\ndocument.head.appendChild($_documentContainer.content);\n","/**\n@license\nCopyright (c) 2017 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\nexport const DatePickerHelper = class VaadinDatePickerHelper {\n  /**\n   * Get ISO 8601 week number for the given date.\n   *\n   * @param {Date} Date object\n   * @return {Number} Week number\n   */\n  static _getISOWeekNumber(date) {\n    // Ported from Vaadin Framework method com.vaadin.client.DateTimeService.getISOWeekNumber(date)\n    var dayOfWeek = date.getDay(); // 0 == sunday\n\n    // ISO 8601 use weeks that start on monday so we use\n    // mon=1,tue=2,...sun=7;\n    if (dayOfWeek === 0) {\n      dayOfWeek = 7;\n    }\n    // Find nearest thursday (defines the week in ISO 8601). The week number\n    // for the nearest thursday is the same as for the target date.\n    var nearestThursdayDiff = 4 - dayOfWeek; // 4 is thursday\n    var nearestThursday = new Date(date.getTime() + nearestThursdayDiff * 24 * 3600 * 1000);\n\n    var firstOfJanuary = new Date(0, 0);\n    firstOfJanuary.setFullYear(nearestThursday.getFullYear());\n\n    var timeDiff = nearestThursday.getTime() - firstOfJanuary.getTime();\n\n    // Rounding the result, as the division doesn't result in an integer\n    // when the given date is inside daylight saving time period.\n    var daysSinceFirstOfJanuary = Math.round(timeDiff / (24 * 3600 * 1000));\n\n    return Math.floor((daysSinceFirstOfJanuary) / 7 + 1);\n  }\n\n  /**\n   * Check if two dates are equal.\n   *\n   * @param {Date} date1\n   * @param {Date} date2\n   * @return {Boolean} True if the given date objects refer to the same date\n   */\n  static _dateEquals(date1, date2) {\n    return date1 instanceof Date && date2 instanceof Date &&\n        date1.getFullYear() === date2.getFullYear() &&\n        date1.getMonth() === date2.getMonth() &&\n        date1.getDate() === date2.getDate();\n  }\n\n  /**\n   * Check if the given date is in the range of allowed dates.\n   *\n   * @param {Date} date The date to check\n   * @param {Date} min Range start\n   * @param {Date} max Range end\n   * @return {Boolean} True if the date is in the range\n   */\n  static _dateAllowed(date, min, max) {\n    return (!min || date >= min) && (!max || date <= max);\n  }\n\n  /**\n   * Get closest date from array of dates.\n   *\n   * @param {Date} date The date to compare dates with\n   * @param {Array} dates Array of date objects\n   * @return {Date} Closest date\n   */\n  static _getClosestDate(date, dates) {\n    return dates.filter(date => date !== undefined)\n      .reduce((closestDate, candidate) => {\n        if (!candidate) {\n          return closestDate;\n        }\n\n        if (!closestDate) {\n          return candidate;\n        }\n\n        var candidateDiff = Math.abs(date.getTime() - candidate.getTime());\n        var closestDateDiff = Math.abs(closestDate.getTime() - date.getTime());\n        return candidateDiff < closestDateDiff ? candidate : closestDate;\n      });\n  }\n\n  /**\n   * Extracts the basic component parts of a date (day, month and year)\n   * to the expected format.\n   */\n  static _extractDateParts(date) {\n    return {\n      day: date.getDate(),\n      month: date.getMonth(),\n      year: date.getFullYear()\n    };\n  }\n};\n","/**\n@license\nCopyright (c) 2017 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport '@polymer/polymer/lib/elements/dom-repeat.js';\nimport { GestureEventListeners } from '@polymer/polymer/lib/mixins/gesture-event-listeners.js';\nimport { DatePickerHelper } from './vaadin-date-picker-helper.js';\nimport { ThemableMixin } from '@vaadin/vaadin-themable-mixin/vaadin-themable-mixin.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\n/**\n * @memberof Vaadin\n * @private\n */\nclass MonthCalendarElement extends ThemableMixin(GestureEventListeners(PolymerElement)) {\n  static get template() {\n    return html`\n    <style>\n      :host {\n        display: block;\n      }\n\n      [part=\"weekdays\"],\n      #days {\n        display: flex;\n        flex-wrap: wrap;\n        flex-grow: 1;\n      }\n\n      #days-container,\n      #weekdays-container {\n        display: flex;\n      }\n\n      [part=\"week-numbers\"] {\n        display: flex;\n        flex-direction: column;\n        justify-content: space-between;\n        flex-shrink: 0;\n      }\n\n      [part=\"week-numbers\"][hidden],\n      [part=\"weekday\"][hidden] {\n        display: none;\n      }\n\n      [part=\"weekday\"],\n      [part=\"date\"] {\n        /* Would use calc(100% / 7) but it doesn't work nice on IE */\n        width: 14.285714286%;\n      }\n\n      [part=\"weekday\"]:empty,\n      [part=\"week-numbers\"] {\n        width: 12.5%;\n        flex-shrink: 0;\n      }\n    </style>\n\n    <div part=\"month-header\" role=\"heading\">[[_getTitle(month, i18n.monthNames)]]</div>\n    <div id=\"monthGrid\" on-tap=\"_handleTap\" on-touchend=\"_preventDefault\" on-touchstart=\"_onMonthGridTouchStart\">\n      <div id=\"weekdays-container\">\n        <div hidden=\"[[!_showWeekSeparator(showWeekNumbers, i18n.firstDayOfWeek)]]\" part=\"weekday\"></div>\n        <div part=\"weekdays\">\n          <template is=\"dom-repeat\" items=\"[[_getWeekDayNames(i18n.weekdays, i18n.weekdaysShort, showWeekNumbers, i18n.firstDayOfWeek)]]\">\n            <div part=\"weekday\" role=\"heading\" aria-label\\$=\"[[item.weekDay]]\">[[item.weekDayShort]]</div>\n          </template>\n        </div>\n      </div>\n      <div id=\"days-container\">\n        <div part=\"week-numbers\" hidden=\"[[!_showWeekSeparator(showWeekNumbers, i18n.firstDayOfWeek)]]\">\n          <template is=\"dom-repeat\" items=\"[[_getWeekNumbers(_days)]]\">\n            <div part=\"week-number\" role=\"heading\" aria-label\\$=\"[[i18n.week]] [[item]]\">[[item]]</div>\n          </template>\n        </div>\n        <div id=\"days\">\n          <template is=\"dom-repeat\" items=\"[[_days]]\">\n            <div part=\"date\" today\\$=\"[[_isToday(item)]]\" selected\\$=\"[[_dateEquals(item, selectedDate)]]\" focused\\$=\"[[_dateEquals(item, focusedDate)]]\" date=\"[[item]]\" disabled\\$=\"[[!_dateAllowed(item, minDate, maxDate)]]\" role\\$=\"[[_getRole(item)]]\" aria-label\\$=\"[[_getAriaLabel(item)]]\" aria-disabled\\$=\"[[_getAriaDisabled(item, minDate, maxDate)]]\">[[_getDate(item)]]</div>\n          </template>\n        </div>\n      </div>\n    </div>\n`;\n  }\n\n  static get is() {\n    return 'vaadin-month-calendar';\n  }\n\n  static get properties() {\n    return {\n      /**\n       * A `Date` object defining the month to be displayed. Only year and\n       * month properties are actually used.\n       */\n      month: {\n        type: Date,\n        value: new Date()\n      },\n\n      /**\n       * A `Date` object for the currently selected date.\n       */\n      selectedDate: {\n        type: Date,\n        notify: true\n      },\n\n      /**\n       * A `Date` object for the currently focused date.\n       */\n      focusedDate: Date,\n\n      showWeekNumbers: {\n        type: Boolean,\n        value: false\n      },\n\n      i18n: {\n        type: Object\n      },\n\n      /**\n       * Flag stating whether taps on the component should be ignored.\n       */\n      ignoreTaps: Boolean,\n\n      _notTapping: Boolean,\n\n      /**\n       * The earliest date that can be selected. All earlier dates will be disabled.\n       */\n      minDate: {\n        type: Date,\n        value: null\n      },\n\n      /**\n       * The latest date that can be selected. All later dates will be disabled.\n       */\n      maxDate: {\n        type: Date,\n        value: null\n      },\n\n      _days: {\n        type: Array,\n        computed: '_getDays(month, i18n.firstDayOfWeek, minDate, maxDate)'\n      },\n\n      disabled: {\n        type: Boolean,\n        reflectToAttribute: true,\n        computed: '_isDisabled(month, minDate, maxDate)'\n      }\n    };\n  }\n\n  static get observers() {\n    return [\n      '_showWeekNumbersChanged(showWeekNumbers, i18n.firstDayOfWeek)'\n    ];\n  }\n\n  _dateEquals(date1, date2) {\n    return DatePickerHelper._dateEquals(date1, date2);\n  }\n\n  _dateAllowed(date, min, max) {\n    return DatePickerHelper._dateAllowed(date, min, max);\n  }\n\n  /* Returns true if all the dates in the month are out of the allowed range */\n  _isDisabled(month, minDate, maxDate) {\n    // First day of the month\n    var firstDate = new Date(0, 0);\n    firstDate.setFullYear(month.getFullYear());\n    firstDate.setMonth(month.getMonth());\n    firstDate.setDate(1);\n\n    // Last day of the month\n    var lastDate = new Date(0, 0);\n    lastDate.setFullYear(month.getFullYear());\n    lastDate.setMonth(month.getMonth() + 1);\n    lastDate.setDate(0);\n\n    if ((minDate && maxDate)\n      && minDate.getMonth() === maxDate.getMonth()\n      && minDate.getMonth() === month.getMonth()\n      && maxDate.getDate() - minDate.getDate() >= 0) {\n      return false;\n    }\n\n    return !this._dateAllowed(firstDate, minDate, maxDate)\n      && !this._dateAllowed(lastDate, minDate, maxDate);\n  }\n\n  _getTitle(month, monthNames) {\n    if (month === undefined || monthNames === undefined) {\n      return;\n    }\n    return this.i18n.formatTitle(monthNames[month.getMonth()], month.getFullYear());\n  }\n\n  _onMonthGridTouchStart() {\n    this._notTapping = false;\n    setTimeout(() => this._notTapping = true, 300);\n  }\n\n  _dateAdd(date, delta) {\n    date.setDate(date.getDate() + delta);\n  }\n\n  _applyFirstDayOfWeek(weekDayNames, firstDayOfWeek) {\n    if (weekDayNames === undefined || firstDayOfWeek === undefined) {\n      return;\n    }\n\n    return weekDayNames.slice(firstDayOfWeek).concat(weekDayNames.slice(0, firstDayOfWeek));\n  }\n\n  _getWeekDayNames(weekDayNames, weekDayNamesShort, showWeekNumbers, firstDayOfWeek) {\n    if (weekDayNames === undefined || weekDayNamesShort === undefined ||\n      showWeekNumbers === undefined || firstDayOfWeek === undefined) {\n      return;\n    }\n    weekDayNames = this._applyFirstDayOfWeek(weekDayNames, firstDayOfWeek);\n    weekDayNamesShort = this._applyFirstDayOfWeek(weekDayNamesShort, firstDayOfWeek);\n    weekDayNames = weekDayNames.map((day, index) => {\n      return {\n        weekDay: day,\n        weekDayShort: weekDayNamesShort[index]\n      };\n    });\n\n    return weekDayNames;\n  }\n\n  _getDate(date) {\n    return date ? date.getDate() : '';\n  }\n\n  _showWeekNumbersChanged(showWeekNumbers, firstDayOfWeek) {\n    if (showWeekNumbers && firstDayOfWeek === 1) {\n      this.setAttribute('week-numbers', '');\n    } else {\n      this.removeAttribute('week-numbers');\n    }\n  }\n\n  _showWeekSeparator(showWeekNumbers, firstDayOfWeek) {\n    // Currently only supported for locales that start the week on Monday.\n    return showWeekNumbers && firstDayOfWeek === 1;\n  }\n\n  _isToday(date) {\n    return this._dateEquals(new Date(), date);\n  }\n\n  _getDays(month, firstDayOfWeek) {\n    if (month === undefined || firstDayOfWeek === undefined) {\n      return;\n    }\n    // First day of the month (at midnight).\n    var date = new Date(0, 0);\n    date.setFullYear(month.getFullYear());\n    date.setMonth(month.getMonth());\n    date.setDate(1);\n\n    // Rewind to first day of the week.\n    while (date.getDay() !== firstDayOfWeek) {\n      this._dateAdd(date, -1);\n    }\n\n    var days = [];\n    var startMonth = date.getMonth();\n    var targetMonth = month.getMonth();\n    while (date.getMonth() === targetMonth || date.getMonth() === startMonth) {\n      days.push(date.getMonth() === targetMonth ? new Date(date.getTime()) : null);\n\n      // Advance to next day.\n      this._dateAdd(date, 1);\n    }\n    return days;\n  }\n\n  _getWeekNumber(date, days) {\n    if (date === undefined || days === undefined) {\n      return;\n    }\n\n    if (!date) {\n      // Get the first non-null date from the days array.\n      date = days.reduce((acc, d) => {\n        return !acc && d ? d : acc;\n      });\n    }\n\n    return DatePickerHelper._getISOWeekNumber(date);\n  }\n\n  _getWeekNumbers(dates) {\n    return dates\n      .map(date => this._getWeekNumber(date, dates))\n      .filter((week, index, arr) => arr.indexOf(week) === index);\n  }\n\n  _handleTap(e) {\n    if (!this.ignoreTaps && !this._notTapping && e.target.date && !e.target.hasAttribute('disabled')) {\n      this.selectedDate = e.target.date;\n      this.dispatchEvent(new CustomEvent('date-tap', {bubbles: true, composed: true}));\n    }\n  }\n\n  _preventDefault(e) {\n    e.preventDefault();\n  }\n\n  _getRole(date) {\n    return date ? 'button' : 'presentation';\n  }\n\n  _getAriaLabel(date) {\n    if (!date) {\n      return '';\n    }\n\n    var ariaLabel = this._getDate(date) + ' ' +\n      this.i18n.monthNames[date.getMonth()] + ' ' +\n      date.getFullYear() + ', ' +\n      this.i18n.weekdays[date.getDay()];\n\n    if (this._isToday(date)) {\n      ariaLabel += ', ' + this.i18n.today;\n    }\n\n    return ariaLabel;\n  }\n\n  _getAriaDisabled(date, min, max) {\n    if (date === undefined || min === undefined || max === undefined) {\n      return;\n    }\n    return this._dateAllowed(date, min, max) ? 'false' : 'true';\n  }\n}\n\ncustomElements.define(MonthCalendarElement.is, MonthCalendarElement);\n","/**\n@license\nCopyright (c) 2017 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport { timeOut } from '@polymer/polymer/lib/utils/async.js';\nimport { Debouncer } from '@polymer/polymer/lib/utils/debounce.js';\nimport { flush } from '@polymer/polymer/lib/utils/flush.js';\nimport { templatize } from '@polymer/polymer/lib/utils/templatize.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { afterNextRender } from '@polymer/polymer/lib/utils/render-status.js';\n/**\n * @memberof Vaadin\n * @private\n */\nclass InfiniteScrollerElement extends PolymerElement {\n  static get template() {\n    return html`\n    <style>\n      :host {\n        display: block;\n        overflow: hidden;\n        height: 500px;\n      }\n\n      #scroller {\n        position: relative;\n        height: 100%;\n        overflow: auto;\n        outline: none;\n        margin-right: -40px;\n        -webkit-overflow-scrolling: touch;\n        -ms-overflow-style: none;\n        overflow-x: hidden;\n      }\n\n      #scroller.notouchscroll {\n        -webkit-overflow-scrolling: auto;\n      }\n\n      #scroller::-webkit-scrollbar {\n        display: none;\n      }\n\n      .buffer {\n        position: absolute;\n        width: var(--vaadin-infinite-scroller-buffer-width, 100%);\n        box-sizing: border-box;\n        padding-right: 40px;\n        top: var(--vaadin-infinite-scroller-buffer-offset, 0);\n        animation: fadein 0.2s;\n      }\n\n      @keyframes fadein {\n        from { opacity: 0; }\n        to { opacity: 1; }\n      }\n    </style>\n\n    <div id=\"scroller\" on-scroll=\"_scroll\">\n      <div class=\"buffer\"></div>\n      <div class=\"buffer\"></div>\n      <div id=\"fullHeight\"></div>\n    </div>\n`;\n  }\n\n  static get is() {\n    return 'vaadin-infinite-scroller';\n  }\n\n  static get properties() {\n    return {\n\n      /**\n       * Count of individual items in each buffer.\n       * The scroller has 2 buffers altogether so bufferSize of 20\n       * will result in 40 buffered DOM items in total.\n       * Changing after initialization not supported.\n       */\n      bufferSize: {\n        type: Number,\n        value: 20\n      },\n\n      /**\n       * The amount of initial scroll top. Needed in order for the\n       * user to be able to scroll backwards.\n       */\n      _initialScroll: {\n        value: 500000\n      },\n\n      /**\n       * The index/position mapped at _initialScroll point.\n       */\n      _initialIndex: {\n        value: 0\n      },\n\n      _buffers: Array,\n\n      _preventScrollEvent: Boolean,\n\n      _mayHaveMomentum: Boolean,\n\n      _initialized: Boolean,\n\n      active: {\n        type: Boolean,\n        observer: '_activated'\n      }\n    };\n  }\n\n  ready() {\n    super.ready();\n\n    this._buffers = Array.prototype.slice.call(this.root.querySelectorAll('.buffer'));\n\n    this.$.fullHeight.style.height = this._initialScroll * 2 + 'px';\n\n    var tpl = this.querySelector('template');\n    this._TemplateClass = templatize(tpl, this, {\n      forwardHostProp: function(prop, value) {\n        if (prop !== 'index') {\n          this._buffers.forEach(buffer => {\n            [].forEach.call(buffer.children, insertionPoint => {\n              insertionPoint._itemWrapper.instance[prop] = value;\n            });\n          });\n        }\n      }\n    });\n\n    // Firefox interprets elements with overflow:auto as focusable\n    // https://bugzilla.mozilla.org/show_bug.cgi?id=1069739\n    var isFirefox = navigator.userAgent.toLowerCase().indexOf('firefox') > -1;\n    if (isFirefox) {\n      this.$.scroller.tabIndex = -1;\n    }\n  }\n\n  _activated(active) {\n    if (active && !this._initialized) {\n      this._createPool();\n      this._initialized = true;\n    }\n  }\n\n  _finishInit() {\n    if (!this._initDone) {\n      // Once the first set of items start fading in, stamp the rest\n      this._buffers.forEach(buffer => {\n        [].forEach.call(buffer.children,\n          insertionPoint => this._ensureStampedInstance(insertionPoint._itemWrapper));\n      }, this);\n\n      if (!this._buffers[0].translateY) {\n        this._reset();\n      }\n\n      this._initDone = true;\n    }\n  }\n\n  _translateBuffer(up) {\n    var index = up ? 1 : 0;\n    this._buffers[index].translateY = this._buffers[(index ? 0 : 1)].translateY + this._bufferHeight * (index ? -1 : 1);\n    this._buffers[index].style.transform = 'translate3d(0, ' + this._buffers[index].translateY + 'px, 0)';\n    this._buffers[index].updated = false;\n    this._buffers.reverse();\n  }\n\n  _scroll() {\n    if (this._scrollDisabled) {\n      return;\n    }\n\n    var scrollTop = this.$.scroller.scrollTop;\n    if (scrollTop < this._bufferHeight || scrollTop > this._initialScroll * 2 - this._bufferHeight) {\n      // Scrolled near the end/beginning of the scrollable area -> reset.\n      this._initialIndex = ~~this.position;\n      this._reset();\n    }\n\n    // Check if we scrolled enough to translate the buffer positions.\n    var bufferOffset = this.root.querySelector('.buffer').offsetTop;\n    var upperThresholdReached = scrollTop > this._buffers[1].translateY + this.itemHeight + bufferOffset;\n    var lowerThresholdReached = scrollTop < this._buffers[0].translateY + this.itemHeight + bufferOffset;\n\n    if (upperThresholdReached || lowerThresholdReached) {\n      this._translateBuffer(lowerThresholdReached);\n      this._updateClones();\n    }\n\n    if (!this._preventScrollEvent) {\n      this.dispatchEvent(new CustomEvent('custom-scroll', {bubbles: false, composed: true}));\n      this._mayHaveMomentum = true;\n    }\n    this._preventScrollEvent = false;\n\n    this._debouncerScrollFinish = Debouncer.debounce(this._debouncerScrollFinish,\n      timeOut.after(200), () => {\n        var scrollerRect = this.$.scroller.getBoundingClientRect();\n        if (!this._isVisible(this._buffers[0], scrollerRect) && !this._isVisible(this._buffers[1], scrollerRect)) {\n          this.position = this.position;\n        }\n      });\n  }\n\n  /**\n   * Current scroller position as index. Can be a fractional number.\n   *\n   * @type {Number}\n   */\n  set position(index) {\n    this._preventScrollEvent = true;\n    if (index > this._firstIndex && index < this._firstIndex + this.bufferSize * 2) {\n      this.$.scroller.scrollTop = this.itemHeight * (index - this._firstIndex) + this._buffers[0].translateY;\n    } else {\n      this._initialIndex = ~~index;\n      this._reset();\n      this._scrollDisabled = true;\n      this.$.scroller.scrollTop += index % 1 * this.itemHeight;\n      this._scrollDisabled = false;\n    }\n\n    if (this._mayHaveMomentum) {\n      // Stop the possible iOS Safari momentum with -webkit-overflow-scrolling: auto;\n      this.$.scroller.classList.add('notouchscroll');\n      this._mayHaveMomentum = false;\n\n      setTimeout(() => {\n        // Restore -webkit-overflow-scrolling: touch; after a small delay.\n        this.$.scroller.classList.remove('notouchscroll');\n      }, 10);\n    }\n\n  }\n\n  /**\n   * @private\n   */\n  get position() {\n    return (this.$.scroller.scrollTop - this._buffers[0].translateY) / this.itemHeight + this._firstIndex;\n  }\n\n  get itemHeight() {\n    if (!this._itemHeightVal) {\n      if (!(window.ShadyCSS && window.ShadyCSS.nativeCss)) {\n        this.updateStyles();\n      }\n\n      const itemHeight = window.ShadyCSS\n        ? window.ShadyCSS.getComputedStyleValue(this, '--vaadin-infinite-scroller-item-height')\n        : getComputedStyle(this).getPropertyValue('--vaadin-infinite-scroller-item-height');\n      // Use background-position temp inline style for unit conversion\n      const tmpStyleProp = 'background-position';\n      this.$.fullHeight.style.setProperty(tmpStyleProp, itemHeight);\n      const itemHeightPx = getComputedStyle(this.$.fullHeight).getPropertyValue(tmpStyleProp);\n      this.$.fullHeight.style.removeProperty(tmpStyleProp);\n      this._itemHeightVal = parseFloat(itemHeightPx);\n    }\n\n    return this._itemHeightVal;\n  }\n\n  get _bufferHeight() {\n    return this.itemHeight * this.bufferSize;\n  }\n\n  _reset() {\n    this._scrollDisabled = true;\n    this.$.scroller.scrollTop = this._initialScroll;\n    this._buffers[0].translateY = this._initialScroll - this._bufferHeight;\n    this._buffers[1].translateY = this._initialScroll;\n    this._buffers.forEach(buffer => {\n      buffer.style.transform = 'translate3d(0, ' + buffer.translateY + 'px, 0)';\n    });\n    this._buffers[0].updated = this._buffers[1].updated = false;\n    this._updateClones(true);\n\n    this._debouncerUpdateClones = Debouncer.debounce(\n      this._debouncerUpdateClones,\n      timeOut.after(200), () => {\n        this._buffers[0].updated = this._buffers[1].updated = false;\n        this._updateClones();\n      });\n\n    this._scrollDisabled = false;\n  }\n\n  _createPool() {\n    var container = this.getBoundingClientRect();\n    this._buffers.forEach(buffer => {\n      for (var i = 0; i < this.bufferSize; i++) {\n        const itemWrapper = document.createElement('div');\n        itemWrapper.style.height = this.itemHeight + 'px';\n        itemWrapper.instance = {};\n\n        const contentId = InfiniteScrollerElement._contentIndex = InfiniteScrollerElement._contentIndex + 1 || 0;\n        const slotName = 'vaadin-infinite-scroller-item-content-' + contentId;\n\n        const insertionPoint = document.createElement('slot');\n        insertionPoint.setAttribute('name', slotName);\n        insertionPoint._itemWrapper = itemWrapper;\n        buffer.appendChild(insertionPoint);\n\n        itemWrapper.setAttribute('slot', slotName);\n        this.appendChild(itemWrapper);\n\n        // This is needed by IE\n        flush();\n\n        setTimeout(() => {\n          // Only stamp the visible instances first\n          if (this._isVisible(itemWrapper, container)) {\n            this._ensureStampedInstance(itemWrapper);\n          }\n        }, 1); // Wait for first reset\n      }\n    }, this);\n\n    setTimeout(() => {\n      afterNextRender(this, this._finishInit.bind(this));\n    }, 1);\n  }\n\n  _ensureStampedInstance(itemWrapper) {\n    if (itemWrapper.firstElementChild) {\n      return;\n    }\n\n    var tmpInstance = itemWrapper.instance;\n\n    itemWrapper.instance = new this._TemplateClass({});\n    itemWrapper.appendChild(itemWrapper.instance.root);\n\n    Object.keys(tmpInstance).forEach(prop => {\n      itemWrapper.instance.set(prop, tmpInstance[prop]);\n    });\n  }\n\n  _updateClones(viewPortOnly) {\n    this._firstIndex = ~~((this._buffers[0].translateY - this._initialScroll) / this.itemHeight) + this._initialIndex;\n\n    var scrollerRect = viewPortOnly ? this.$.scroller.getBoundingClientRect() : undefined;\n    this._buffers.forEach((buffer, bufferIndex) => {\n      if (!buffer.updated) {\n        var firstIndex = this._firstIndex + this.bufferSize * bufferIndex;\n\n        [].forEach.call(buffer.children, (insertionPoint, index) => {\n          const itemWrapper = insertionPoint._itemWrapper;\n          if (!viewPortOnly || this._isVisible(itemWrapper, scrollerRect)) {\n            itemWrapper.instance.index = firstIndex + index;\n          }\n        });\n        buffer.updated = true;\n      }\n    }, this);\n  }\n\n  _isVisible(element, container) {\n    var rect = element.getBoundingClientRect();\n    return rect.bottom > container.top && rect.top < container.bottom;\n  }\n}\n\ncustomElements.define(InfiniteScrollerElement.is, InfiniteScrollerElement);\n","import '@polymer/polymer/lib/elements/custom-style.js';\nconst $_documentContainer = document.createElement('template');\n\n$_documentContainer.innerHTML = `<dom-module id=\"vaadin-date-picker-overlay-styles\" theme-for=\"vaadin-date-picker-overlay\">\n  <template>\n    <style>\n      :host {\n        align-items: flex-start;\n        justify-content: flex-start;\n      }\n\n      :host([bottom-aligned]) {\n        justify-content: flex-end;\n      }\n\n      :host([right-aligned]) {\n        align-items: flex-end;\n      }\n\n      :host([right-aligned][dir=\"rtl\"]) {\n        align-items: flex-start;\n      }\n\n      [part=\"overlay\"] {\n        display: flex;\n        flex: auto;\n      }\n\n      [part~=\"content\"] {\n        flex: auto;\n      }\n    </style>\n  </template>\n</dom-module>`;\n\ndocument.head.appendChild($_documentContainer.content);\n","/**\n@license\nCopyright (c) 2017 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport { GestureEventListeners } from '@polymer/polymer/lib/mixins/gesture-event-listeners.js';\nimport '@polymer/iron-media-query/iron-media-query.js';\nimport { IronA11yKeysBehavior } from '@polymer/iron-a11y-keys-behavior/iron-a11y-keys-behavior.js';\nimport { IronA11yAnnouncer } from '@polymer/iron-a11y-announcer/iron-a11y-announcer.js';\nimport '@vaadin/vaadin-button/src/vaadin-button.js';\nimport { ThemableMixin } from '@vaadin/vaadin-themable-mixin/vaadin-themable-mixin.js';\nimport { ThemePropertyMixin } from '@vaadin/vaadin-themable-mixin/vaadin-theme-property-mixin.js';\nimport './vaadin-month-calendar.js';\nimport './vaadin-infinite-scroller.js';\nimport { DatePickerHelper } from './vaadin-date-picker-helper.js';\nimport './vaadin-date-picker-styles.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { addListener, setTouchAction } from '@polymer/polymer/lib/utils/gestures.js';\nimport { Debouncer } from '@polymer/polymer/lib/utils/debounce.js';\nimport { timeOut } from '@polymer/polymer/lib/utils/async.js';\n/**\n * @memberof Vaadin\n * @private\n */\nclass DatePickerOverlayContentElement extends\n  ThemableMixin(\n    ThemePropertyMixin(\n      GestureEventListeners(PolymerElement))) {\n  static get template() {\n    return html`\n    <style>\n      :host {\n        display: flex;\n        flex-direction: column;\n        height: 100%;\n        width: 100%;\n        outline: none;\n        background: #fff;\n      }\n\n      [part=\"overlay-header\"] {\n        display: flex;\n        flex-shrink: 0;\n        flex-wrap: nowrap;\n        align-items: center;\n      }\n\n      :host(:not([fullscreen])) [part=\"overlay-header\"] {\n        display: none;\n      }\n\n      [part=\"label\"] {\n        flex-grow: 1;\n      }\n\n      [part=\"clear-button\"]:not([showclear]) {\n        display: none;\n      }\n\n      [part=\"years-toggle-button\"] {\n        display: flex;\n      }\n\n      [part=\"years-toggle-button\"][desktop] {\n        display: none;\n      }\n\n      :host(:not([years-visible])) [part=\"years-toggle-button\"]::before {\n        transform: rotate(180deg);\n      }\n\n      #scrollers {\n        display: flex;\n        height: 100%;\n        width: 100%;\n        position: relative;\n        overflow: hidden;\n      }\n\n      [part=\"months\"],\n      [part=\"years\"] {\n        height: 100%;\n      }\n\n      [part=\"months\"] {\n        --vaadin-infinite-scroller-item-height: 270px;\n        position: absolute;\n        top: 0;\n        left: 0;\n        right: 0;\n        bottom: 0;\n      }\n\n      #scrollers[desktop] [part=\"months\"] {\n        right: 50px;\n        transform: none !important;\n      }\n\n      [part=\"years\"] {\n        --vaadin-infinite-scroller-item-height: 80px;\n        width: 50px;\n        position: absolute;\n        right: 0;\n        transform: translateX(100%);\n        -webkit-tap-highlight-color: transparent;\n        -webkit-user-select: none;\n        -moz-user-select: none;\n        -ms-user-select: none;\n        user-select: none;\n        /* Center the year scroller position. */\n        --vaadin-infinite-scroller-buffer-offset: 50%;\n      }\n\n      #scrollers[desktop] [part=\"years\"] {\n        position: absolute;\n        transform: none !important;\n      }\n\n      [part=\"years\"]::before {\n        content: '';\n        display: block;\n        background: transparent;\n        width: 0;\n        height: 0;\n        position: absolute;\n        left: 0;\n        top: 50%;\n        transform: translateY(-50%);\n        border-width: 6px;\n        border-style: solid;\n        border-color: transparent;\n        border-left-color: #000;\n      }\n\n      :host(.animate) [part=\"months\"],\n      :host(.animate) [part=\"years\"] {\n        transition: all 200ms;\n      }\n\n      [part=\"toolbar\"] {\n        display: flex;\n        justify-content: space-between;\n        z-index: 2;\n        flex-shrink: 0;\n      }\n\n      [part~=\"overlay-header\"]:not([desktop]) {\n        padding-bottom: 40px;\n      }\n\n      [part~=\"years-toggle-button\"] {\n        position: absolute;\n        top: auto;\n        right: 8px;\n        bottom: 0;\n        z-index: 1;\n        padding: 8px;\n      }\n\n      #announcer {\n        display: inline-block;\n        position: fixed;\n        clip: rect(0, 0, 0, 0);\n        clip-path: inset(100%);\n      }\n    </style>\n\n    <div id=\"announcer\" role=\"alert\" aria-live=\"polite\">\n      [[i18n.calendar]]\n    </div>\n\n    <div part=\"overlay-header\" on-touchend=\"_preventDefault\" desktop\\$=\"[[_desktopMode]]\" aria-hidden=\"true\">\n      <div part=\"label\">[[_formatDisplayed(selectedDate, i18n.formatDate, label)]]</div>\n      <div part=\"clear-button\" on-tap=\"_clear\" showclear\\$=\"[[_showClear(selectedDate)]]\"></div>\n      <div part=\"toggle-button\" on-tap=\"_cancel\"></div>\n\n      <div part=\"years-toggle-button\" desktop\\$=\"[[_desktopMode]]\" on-tap=\"_toggleYearScroller\" aria-hidden=\"true\">\n        [[_yearAfterXMonths(_visibleMonthIndex)]]\n      </div>\n    </div>\n\n    <div id=\"scrollers\" desktop\\$=\"[[_desktopMode]]\" on-track=\"_track\">\n      <vaadin-infinite-scroller id=\"monthScroller\" on-custom-scroll=\"_onMonthScroll\" on-touchstart=\"_onMonthScrollTouchStart\" buffer-size=\"3\" active=\"[[initialPosition]]\" part=\"months\">\n        <template>\n          <vaadin-month-calendar i18n=\"[[i18n]]\" month=\"[[_dateAfterXMonths(index)]]\" selected-date=\"{{selectedDate}}\" focused-date=\"[[focusedDate]]\" ignore-taps=\"[[_ignoreTaps]]\" show-week-numbers=\"[[showWeekNumbers]]\" min-date=\"[[minDate]]\" max-date=\"[[maxDate]]\" focused\\$=\"[[_focused]]\" part=\"month\" theme\\$=\"[[theme]]\">\n          </vaadin-month-calendar>\n        </template>\n      </vaadin-infinite-scroller>\n      <vaadin-infinite-scroller id=\"yearScroller\" on-tap=\"_onYearTap\" on-custom-scroll=\"_onYearScroll\" on-touchstart=\"_onYearScrollTouchStart\" buffer-size=\"12\" active=\"[[initialPosition]]\" part=\"years\">\n        <template>\n          <div part=\"year-number\" role=\"button\" current\\$=\"[[_isCurrentYear(index)]]\" selected\\$=\"[[_isSelectedYear(index, selectedDate)]]\">\n            [[_yearAfterXYears(index)]]\n          </div>\n          <div part=\"year-separator\" aria-hidden=\"true\"></div>\n        </template>\n      </vaadin-infinite-scroller>\n    </div>\n\n    <div on-touchend=\"_preventDefault\" role=\"toolbar\" part=\"toolbar\">\n      <vaadin-button id=\"todayButton\" part=\"today-button\" disabled=\"[[!_isTodayAllowed(minDate, maxDate)]]\" on-tap=\"_onTodayTap\">\n        [[i18n.today]]\n      </vaadin-button>\n      <vaadin-button id=\"cancelButton\" part=\"cancel-button\" on-tap=\"_cancel\">\n        [[i18n.cancel]]\n      </vaadin-button>\n    </div>\n\n    <iron-media-query query=\"(min-width: 375px)\" query-matches=\"{{_desktopMode}}\"></iron-media-query>\n`;\n  }\n\n  static get is() {\n    return 'vaadin-date-picker-overlay-content';\n  }\n\n  static get properties() {\n    return {\n      /**\n       * The value for this element.\n       */\n      selectedDate: {\n        type: Date,\n        notify: true\n      },\n\n      /**\n       * Date value which is focused using keyboard.\n       */\n      focusedDate: {\n        type: Date,\n        notify: true,\n        observer: '_focusedDateChanged'\n      },\n\n      _focusedMonthDate: Number,\n\n      /**\n       * Date which should be visible when there is no value selected.\n       */\n      initialPosition: {\n        type: Date,\n        observer: '_initialPositionChanged'\n      },\n\n      _originDate: {\n        value: new Date()\n      },\n\n      _visibleMonthIndex: Number,\n\n      _desktopMode: Boolean,\n\n      _translateX: {\n        observer: '_translateXChanged'\n      },\n\n      _yearScrollerWidth: {\n        value: 50\n      },\n\n      i18n: {\n        type: Object\n      },\n\n      showWeekNumbers: {\n        type: Boolean\n      },\n\n      _ignoreTaps: Boolean,\n\n      _notTapping: Boolean,\n\n      /**\n       * The earliest date that can be selected. All earlier dates will be disabled.\n       */\n      minDate: Date,\n\n      /**\n       * The latest date that can be selected. All later dates will be disabled.\n       */\n      maxDate: Date,\n\n      _focused: Boolean,\n\n      /**\n       * Input label\n       */\n      label: String\n    };\n  }\n\n  ready() {\n    super.ready();\n    this.setAttribute('tabindex', 0);\n    this.addEventListener('keydown', this._onKeydown.bind(this));\n    addListener(this, 'tap', this._stopPropagation);\n    this.addEventListener('focus', this._onOverlayFocus.bind(this));\n    this.addEventListener('blur', this._onOverlayBlur.bind(this));\n  }\n\n  /**\n   * Fired when the scroller reaches the target scrolling position.\n   * @event scroll-animation-finished\n   * @param {Number} detail.position new position\n   * @param {Number} detail.oldPosition old position\n   */\n\n  connectedCallback() {\n    super.connectedCallback();\n    this._closeYearScroller();\n    this._toggleAnimateClass(true);\n    setTouchAction(this.$.scrollers, 'pan-y');\n    IronA11yAnnouncer.requestAvailability();\n  }\n\n  announceFocusedDate() {\n    var focusedDate = this._currentlyFocusedDate();\n    var announce = [];\n    if (DatePickerHelper._dateEquals(focusedDate, new Date())) {\n      announce.push(this.i18n.today);\n    }\n    announce = announce.concat([\n      this.i18n.weekdays[focusedDate.getDay()],\n      focusedDate.getDate(),\n      this.i18n.monthNames[focusedDate.getMonth()],\n      focusedDate.getFullYear()\n    ]);\n    if (this.showWeekNumbers && this.i18n.firstDayOfWeek === 1) {\n      announce.push(this.i18n.week);\n      announce.push(DatePickerHelper._getISOWeekNumber(focusedDate));\n    }\n    this.dispatchEvent(new CustomEvent('iron-announce', {\n      bubbles: true,\n      composed: true,\n      detail: {\n        text: announce.join(' ')\n      }\n    }));\n    return;\n  }\n\n  /**\n   * Focuses the cancel button\n   */\n  focusCancel() {\n    this.$.cancelButton.focus();\n  }\n\n  /**\n   * Scrolls the list to the given Date.\n   */\n  scrollToDate(date, animate) {\n    this._scrollToPosition(this._differenceInMonths(date, this._originDate), animate);\n  }\n\n  _focusedDateChanged(focusedDate) {\n    this.revealDate(focusedDate);\n  }\n\n  _isCurrentYear(yearsFromNow) {\n    return yearsFromNow === 0;\n  }\n\n  _isSelectedYear(yearsFromNow, selectedDate) {\n    if (selectedDate) {\n      return selectedDate.getFullYear() === this._originDate.getFullYear() + yearsFromNow;\n    }\n  }\n\n  /**\n   * Scrolls the month and year scrollers enough to reveal the given date.\n   */\n  revealDate(date) {\n    if (date) {\n      var diff = this._differenceInMonths(date, this._originDate);\n      var scrolledAboveViewport = this.$.monthScroller.position > diff;\n\n      var visibleItems = this.$.monthScroller.clientHeight / this.$.monthScroller.itemHeight;\n      var scrolledBelowViewport = this.$.monthScroller.position + visibleItems - 1 < diff;\n\n      if (scrolledAboveViewport) {\n        this._scrollToPosition(diff, true);\n      } else if (scrolledBelowViewport) {\n        this._scrollToPosition(diff - visibleItems + 1, true);\n      }\n    }\n  }\n\n  _onOverlayFocus() {\n    this._focused = true;\n  }\n\n  _onOverlayBlur() {\n    this._focused = false;\n  }\n\n  _initialPositionChanged(initialPosition) {\n    this.scrollToDate(initialPosition);\n  }\n\n  _repositionYearScroller() {\n    this._visibleMonthIndex = Math.floor(this.$.monthScroller.position);\n    this.$.yearScroller.position = (this.$.monthScroller.position + this._originDate.getMonth()) / 12;\n  }\n\n  _repositionMonthScroller() {\n    this.$.monthScroller.position = this.$.yearScroller.position * 12 - this._originDate.getMonth();\n    this._visibleMonthIndex = Math.floor(this.$.monthScroller.position);\n  }\n\n  _onMonthScroll() {\n    this._repositionYearScroller();\n    this._doIgnoreTaps();\n  }\n\n  _onYearScroll() {\n    this._repositionMonthScroller();\n    this._doIgnoreTaps();\n  }\n\n  _onYearScrollTouchStart() {\n    this._notTapping = false;\n    setTimeout(() => this._notTapping = true, 300);\n\n    this._repositionMonthScroller();\n  }\n\n  _onMonthScrollTouchStart() {\n    this._repositionYearScroller();\n  }\n\n  _doIgnoreTaps() {\n    this._ignoreTaps = true;\n    this._debouncer = Debouncer.debounce(this._debouncer,\n      timeOut.after(300), () => this._ignoreTaps = false);\n  }\n\n  _formatDisplayed(date, formatDate, label) {\n    if (date) {\n      return formatDate(DatePickerHelper._extractDateParts(date));\n    } else {\n      return label;\n    }\n  }\n\n  _onTodayTap() {\n    var today = new Date();\n\n    if (Math.abs(this.$.monthScroller.position - this._differenceInMonths(today, this._originDate)) < 0.001) {\n      // Select today only if the month scroller is positioned approximately\n      // at the beginning of the current month\n      this.selectedDate = today;\n      this._close();\n    } else {\n      this._scrollToCurrentMonth();\n    }\n  }\n\n  _scrollToCurrentMonth() {\n    if (this.focusedDate) {\n      this.focusedDate = new Date();\n    }\n\n    this.scrollToDate(new Date(), true);\n  }\n\n  _showClear(selectedDate) {\n    return !!selectedDate;\n  }\n\n  _onYearTap(e) {\n    if (!this._ignoreTaps && !this._notTapping) {\n      var scrollDelta = e.detail.y - (this.$.yearScroller.getBoundingClientRect().top + this.$.yearScroller.clientHeight / 2);\n      var yearDelta = scrollDelta / this.$.yearScroller.itemHeight;\n      this._scrollToPosition(this.$.monthScroller.position + yearDelta * 12, true);\n    }\n  }\n\n  _scrollToPosition(targetPosition, animate) {\n    if (this._targetPosition !== undefined) {\n      this._targetPosition = targetPosition;\n      return;\n    }\n\n    if (!animate) {\n      this.$.monthScroller.position = targetPosition;\n      this._targetPosition = undefined;\n      this._repositionYearScroller();\n      return;\n    }\n\n    this._targetPosition = targetPosition;\n\n    // http://gizma.com/easing/\n    var easingFunction = (t, b, c, d) => {\n      t /= d / 2;\n      if (t < 1) {\n        return c / 2 * t * t + b;\n      }\n      t--;\n      return -c / 2 * (t * (t - 2) - 1) + b;\n    };\n\n    var duration = animate ? 300 : 0;\n    var start = 0;\n    var initialPosition = this.$.monthScroller.position;\n\n    var smoothScroll = timestamp => {\n      start = start || timestamp;\n      var currentTime = timestamp - start;\n\n      if (currentTime < duration) {\n        var currentPos = easingFunction(currentTime, initialPosition, this._targetPosition - initialPosition, duration);\n        this.$.monthScroller.position = currentPos;\n        window.requestAnimationFrame(smoothScroll);\n      } else {\n        this.dispatchEvent(new CustomEvent('scroll-animation-finished', {\n          bubbles: true,\n          composed: true,\n          detail: {\n            position: this._targetPosition,\n            oldPosition: initialPosition\n          }\n        }));\n\n        this.$.monthScroller.position = this._targetPosition;\n        this._targetPosition = undefined;\n      }\n\n      setTimeout(this._repositionYearScroller.bind(this), 1);\n    };\n\n    // Start the animation.\n    window.requestAnimationFrame(smoothScroll);\n  }\n\n  _limit(value, range) {\n    return Math.min(range.max, Math.max(range.min, value));\n  }\n\n  _handleTrack(e) {\n    // Check if horizontal movement threshold (dx) not exceeded or\n    // scrolling fast vertically (ddy).\n    if (Math.abs(e.detail.dx) < 10 || Math.abs(e.detail.ddy) > 10) {\n      return;\n    }\n\n    // If we're flinging quickly -> start animating already.\n    if (Math.abs(e.detail.ddx) > this._yearScrollerWidth / 3) {\n      this._toggleAnimateClass(true);\n    }\n\n    var newTranslateX = this._translateX + e.detail.ddx;\n    this._translateX = this._limit(newTranslateX, {\n      min: 0,\n      max: this._yearScrollerWidth\n    });\n  }\n\n  _track(e) {\n    if (this._desktopMode) {\n      // No need to track for swipe gestures on desktop.\n      return;\n    }\n\n    switch (e.detail.state) {\n      case 'start':\n        this._toggleAnimateClass(false);\n        break;\n\n      case 'track':\n        this._handleTrack(e);\n        break;\n\n      case 'end':\n        this._toggleAnimateClass(true);\n        if (this._translateX >= this._yearScrollerWidth / 2) {\n          this._closeYearScroller();\n        } else {\n          this._openYearScroller();\n        }\n        break;\n    }\n  }\n\n  _toggleAnimateClass(enable) {\n    if (enable) {\n      this.classList.add('animate');\n    } else {\n      this.classList.remove('animate');\n    }\n  }\n\n  _toggleYearScroller() {\n    this._isYearScrollerVisible() ? this._closeYearScroller() : this._openYearScroller();\n  }\n\n  _openYearScroller() {\n    this._translateX = 0;\n    this.setAttribute('years-visible', '');\n  }\n\n  _closeYearScroller() {\n    this.removeAttribute('years-visible');\n    this._translateX = this._yearScrollerWidth;\n  }\n\n  _isYearScrollerVisible() {\n    return this._translateX < this._yearScrollerWidth / 2;\n  }\n\n  _translateXChanged(x) {\n    if (!this._desktopMode) {\n      this.$.monthScroller.style.transform = 'translateX(' + (x - this._yearScrollerWidth) + 'px)';\n      this.$.yearScroller.style.transform = 'translateX(' + x + 'px)';\n    }\n  }\n\n  _yearAfterXYears(index) {\n    var result = new Date(this._originDate);\n    result.setFullYear(parseInt(index) + this._originDate.getFullYear());\n    return result.getFullYear();\n  }\n\n  _yearAfterXMonths(months) {\n    return this._dateAfterXMonths(months).getFullYear();\n  }\n\n  _dateAfterXMonths(months) {\n    var result = new Date(this._originDate);\n    result.setDate(1);\n    result.setMonth(parseInt(months) + this._originDate.getMonth());\n    return result;\n  }\n\n  _differenceInMonths(date1, date2) {\n    var months = (date1.getFullYear() - date2.getFullYear()) * 12;\n    return months - date2.getMonth() + date1.getMonth();\n  }\n\n  _differenceInYears(date1, date2) {\n    return this._differenceInMonths(date1, date2) / 12;\n  }\n\n  _clear() {\n    this.selectedDate = '';\n  }\n\n  _close() {\n    const overlayContent = this.getRootNode().host;\n    const overlay = overlayContent ? overlayContent.getRootNode().host : null;\n    if (overlay) {\n      overlay.opened = false;\n    }\n\n    this.dispatchEvent(new CustomEvent('close', {bubbles: true, composed: true}));\n  }\n\n  _cancel() {\n    this.focusedDate = this.selectedDate;\n    this._close();\n  }\n\n  _preventDefault(e) {\n    e.preventDefault();\n  }\n\n  /**\n   * Keyboard Navigation\n   */\n  _eventKey(e) {\n    var keys = ['down', 'up', 'right', 'left', 'enter', 'space', 'home', 'end', 'pageup', 'pagedown', 'tab', 'esc'];\n\n    for (var i = 0; i < keys.length; i++) {\n      var k = keys[i];\n      if (IronA11yKeysBehavior.keyboardEventMatchesKeys(e, k)) {\n        return k;\n      }\n    }\n  }\n\n  _onKeydown(e) {\n    var focus = this._currentlyFocusedDate();\n\n    // Cannot use (today/cancel).focused flag because vaadin-text-field removes it\n    // previously in the keydown event.\n    const isToday = e.composedPath().indexOf(this.$.todayButton) >= 0;\n    const isCancel = e.composedPath().indexOf(this.$.cancelButton) >= 0;\n    const isScroller = !isToday && !isCancel;\n\n    var eventKey = this._eventKey(e);\n    if (eventKey === 'tab') {\n      // We handle tabs here and don't want to bubble up.\n      e.stopPropagation();\n\n      const isFullscreen = this.hasAttribute('fullscreen');\n      const isShift = e.shiftKey;\n\n      if (isFullscreen) {\n        e.preventDefault();\n      } else if (isShift && isScroller || !isShift && isCancel) {\n        // Return focus back to the input field\n        e.preventDefault();\n        this.dispatchEvent(new CustomEvent('focus-input', {bubbles: true, composed: true}));\n      } else if (isShift && isToday) {\n        // Browser returns focus back to the scrollable area. We need to set\n        // the focused flag, and move the scroll to focused date.\n        this._focused = true;\n        setTimeout(() => this.revealDate(this.focusedDate), 1);\n      } else {\n        // Browser moves the focus out of the scroller, hence focused flag must\n        // set to false.\n        this._focused = false;\n      }\n    } else if (eventKey) {\n      e.preventDefault();\n      e.stopPropagation();\n      switch (eventKey) {\n        case 'down':\n          this._moveFocusByDays(7);\n          this.focus();\n          break;\n        case 'up':\n          this._moveFocusByDays(-7);\n          this.focus();\n          break;\n        case 'right':\n          if (isScroller) {\n            this._moveFocusByDays(1);\n          }\n          break;\n        case 'left':\n          if (isScroller) {\n            this._moveFocusByDays(-1);\n          }\n          break;\n        case 'enter':\n          if (isScroller || isCancel) {\n            this._close();\n          } else if (isToday) {\n            this._onTodayTap();\n          }\n          break;\n        case 'space':\n          if (isCancel) {\n            this._close();\n          } else if (isToday) {\n            this._onTodayTap();\n          } else {\n            var focusedDate = this.focusedDate;\n            if (DatePickerHelper._dateEquals(focusedDate, this.selectedDate)) {\n              this.selectedDate = '';\n              this.focusedDate = focusedDate;\n            } else {\n              this.selectedDate = focusedDate;\n            }\n          }\n          break;\n        case 'home':\n          this._moveFocusInsideMonth(focus, 'minDate');\n          break;\n        case 'end':\n          this._moveFocusInsideMonth(focus, 'maxDate');\n          break;\n        case 'pagedown':\n          this._moveFocusByMonths(e.shiftKey ? 12 : 1);\n          break;\n        case 'pageup':\n          this._moveFocusByMonths(e.shiftKey ? -12 : -1);\n          break;\n        case 'esc':\n          this._cancel();\n          break;\n      }\n    }\n  }\n\n  _currentlyFocusedDate() {\n    return this.focusedDate || this.selectedDate || this.initialPosition || new Date();\n  }\n\n  _focusDate(dateToFocus) {\n    this.focusedDate = dateToFocus;\n    this._focusedMonthDate = dateToFocus.getDate();\n  }\n\n  _focusClosestDate(focus) {\n    this._focusDate(DatePickerHelper._getClosestDate(focus, [this.minDate, this.maxDate]));\n  }\n\n  _moveFocusByDays(days) {\n    var focus = this._currentlyFocusedDate();\n    var dateToFocus = new Date(0, 0);\n    dateToFocus.setFullYear(focus.getFullYear());\n    dateToFocus.setMonth(focus.getMonth());\n    dateToFocus.setDate(focus.getDate() + days);\n\n    if (this._dateAllowed(dateToFocus, this.minDate, this.maxDate)) {\n      this._focusDate(dateToFocus);\n    } else {\n      if (this._dateAllowed(focus, this.minDate, this.maxDate)) {\n        // Move to min or max date\n        if (days > 0) { // down or right\n          this._focusDate(this.maxDate);\n        } else { // up or left\n          this._focusDate(this.minDate);\n        }\n      } else {\n        // Move to closest allowed date\n        this._focusClosestDate(focus);\n      }\n    }\n  }\n\n  _moveFocusByMonths(months) {\n    var focus = this._currentlyFocusedDate();\n    var dateToFocus = new Date(0, 0);\n    dateToFocus.setFullYear(focus.getFullYear());\n    dateToFocus.setMonth(focus.getMonth() + months);\n\n    var targetMonth = dateToFocus.getMonth();\n\n    dateToFocus.setDate(this._focusedMonthDate || (this._focusedMonthDate = focus.getDate()));\n    if (dateToFocus.getMonth() !== targetMonth) {\n      dateToFocus.setDate(0);\n    }\n\n    if (this._dateAllowed(dateToFocus, this.minDate, this.maxDate)) {\n      this.focusedDate = dateToFocus;\n    } else {\n      if (this._dateAllowed(focus, this.minDate, this.maxDate)) {\n        // Move to min or max date\n        if (months > 0) { // pagedown\n          this._focusDate(this.maxDate);\n        } else { // pageup\n          this._focusDate(this.minDate);\n        }\n      } else {\n        // Move to closest allowed date\n        this._focusClosestDate(focus);\n      }\n    }\n  }\n\n  _moveFocusInsideMonth(focusedDate, property) {\n    var dateToFocus = new Date(0, 0);\n    dateToFocus.setFullYear(focusedDate.getFullYear());\n\n    if (property === 'minDate') {\n      dateToFocus.setMonth(focusedDate.getMonth());\n      dateToFocus.setDate(1);\n    } else {\n      dateToFocus.setMonth(focusedDate.getMonth() + 1);\n      dateToFocus.setDate(0);\n    }\n\n    if (this._dateAllowed(dateToFocus, this.minDate, this.maxDate)) {\n      this._focusDate(dateToFocus);\n    } else {\n      if (this._dateAllowed(focusedDate, this.minDate, this.maxDate)) {\n        // Move to minDate or maxDate\n        this._focusDate(this[property]);\n      } else {\n        // Move to closest allowed date\n        this._focusClosestDate(focusedDate);\n      }\n    }\n  }\n\n  _dateAllowed(date, min, max) {\n    return (!min || date >= min) && (!max || date <= max);\n  }\n\n  _isTodayAllowed(min, max) {\n    var today = new Date();\n    var todayMidnight = new Date(0, 0);\n    todayMidnight.setFullYear(today.getFullYear());\n    todayMidnight.setMonth(today.getMonth());\n    todayMidnight.setDate(today.getDate());\n    return this._dateAllowed(todayMidnight, min, max);\n  }\n\n  _stopPropagation(e) {\n    e.stopPropagation();\n  }\n}\n\ncustomElements.define(DatePickerOverlayContentElement.is, DatePickerOverlayContentElement);\n","import '@vaadin/vaadin-material-styles/color.js';\nimport '@vaadin/vaadin-material-styles/typography.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\n\nconst $_documentContainer = html`<dom-module id=\"material-date-picker-month-calendar\" theme-for=\"vaadin-month-calendar\">\n  <template>\n    <style>\n      :host {\n        color: var(--material-body-text-color);\n        padding: 0 calc(50% / 8 - 0.5em + 8px);\n      }\n\n      :host([show-week-numbers]) {\n        padding: 0 calc(50% / 9 - 0.5em + 8px);\n      }\n\n      [part=\"month-header\"] {\n        font-size: var(--material-h6-font-size);\n        line-height: 1;\n        padding-top: 20px;\n        margin-bottom: 8px;\n      }\n\n      [part=\"week-number\"],\n      [part=\"weekday\"] {\n        font-size: var(--material-caption-font-size);\n        line-height: 44px;\n        height: 40px;\n        color: var(--material-secondary-text-color);\n      }\n\n      :host([disabled]),\n      :host([disabled]) [part=\"week-number\"],\n      :host([disabled]) [part=\"weekday\"] {\n        color: var(--material-disabled-text-color);\n      }\n\n      [part=\"date\"] {\n        position: relative;\n        font-size: var(--material-body-font-size);\n        line-height: 42px;\n        height: 40px;\n        cursor: default;\n      }\n\n      [part=\"date\"]::after {\n        content: '';\n        position: absolute;\n        z-index: -4;\n        top: 50%;\n        left: 50%;\n        transform: translate(-50%, -50%);\n        width: 38px;\n        height: 38px;\n        box-sizing: border-box;\n        border-radius: 50%;\n        border: 2px solid transparent;\n      }\n\n      /* Today */\n\n      [part=\"date\"][today] {\n        color: var(--material-primary-text-color);\n      }\n\n      /* Hover */\n\n      [part=\"date\"]:not([disabled]):hover::after {\n        background-color: var(--material-secondary-background-color);\n        border-color: var(--material-secondary-background-color);\n        z-index: -3;\n      }\n\n      /* Hide for touch devices */\n      @media (hover: none) {\n        [part=\"date\"]:not([disabled]):hover::after {\n          background-color: transparent;\n          border-color: transparent;\n          z-index: -4;\n        }\n      }\n\n      /* Selected */\n\n      [part=\"date\"][selected] {\n        font-weight: 500;\n      }\n\n      [part=\"date\"]:not([disabled])[selected]::after,\n      [part=\"date\"][selected]::after {\n        background-color: transparent;\n        border-color: currentColor;\n        z-index: -2;\n      }\n\n      /* Focused */\n\n      [part=\"date\"]:not([disabled])[focused],\n      [part=\"date\"]:not([disabled]):active {\n        color: var(--material-primary-contrast-color);\n      }\n\n      [part=\"date\"]:not([disabled])[focused]::after,\n      [part=\"date\"]:not([disabled]):active::after {\n        opacity: 0.7;\n        background-color: var(--material-primary-color);\n        border-color: var(--material-primary-color);\n        z-index: -1;\n      }\n\n      [part=\"date\"][disabled] {\n        color: var(--material-disabled-text-color);\n      }\n\n      :host([focused]) [part=\"date\"]:not([disabled])[focused]::after {\n        opacity: 1;\n      }\n    </style>\n  </template>\n</dom-module>`;\n\ndocument.head.appendChild($_documentContainer.content);\n","import '../color.js';\nconst $_documentContainer = document.createElement('template');\n\n$_documentContainer.innerHTML = `<dom-module id=\"material-required-field\">\n  <template>\n    <style>\n      [part=\"label\"] {\n        display: block;\n        position: absolute;\n        top: 8px;\n        font-size: 1em;\n        line-height: 1;\n        height: 20px;\n        margin-bottom: -4px;\n        white-space: nowrap;\n        overflow-x: hidden;\n        text-overflow: ellipsis;\n        color: var(--material-secondary-text-color);\n        transform-origin: 0 75%;\n        transform: scale(0.75);\n      }\n\n      :host([required]) [part=\"label\"]::after {\n        content: \" *\";\n        color: inherit;\n      }\n\n      :host([invalid]) [part=\"label\"] {\n        color: var(--material-error-text-color);\n      }\n\n      [part=\"error-message\"] {\n        font-size: .75em;\n        line-height: 1;\n        color: var(--material-error-text-color);\n      }\n\n      /* Margin that doesn’t reserve space when there’s no error message */\n      [part=\"error-message\"]:not(:empty)::before {\n        content: \"\";\n        display: block;\n        height: 6px;\n      }\n\n      :host(:not([invalid])) [part=\"error-message\"] {\n        margin-top: 0;\n        max-height: 0;\n        overflow: hidden;\n      }\n\n      :host([invalid]) [part=\"error-message\"] {\n        animation: reveal 0.2s;\n      }\n\n      @keyframes reveal {\n        0% {\n          opacity: 0;\n        }\n      }\n    </style>\n  </template>\n</dom-module>`;\n\ndocument.head.appendChild($_documentContainer.content);\n","import '../font-icons.js';\nconst $_documentContainer = document.createElement('template');\n\n$_documentContainer.innerHTML = `<dom-module id=\"material-field-button\">\n  <template>\n    <style>\n      /* TODO(platosha): align icon sizes with other elements */\n      [part\\$=\"button\"] {\n        flex: none;\n        width: 24px;\n        height: 24px;\n        padding: 4px;\n        color: var(--material-secondary-text-color);\n        font-size: var(--material-icon-font-size);\n        line-height: 24px;\n        text-align: center;\n      }\n\n      :host(:not([readonly])) [part\\$=\"button\"] {\n        cursor: pointer;\n      }\n\n      :host(:not([readonly])) [part\\$=\"button\"]:hover {\n        color: var(--material-text-color);\n      }\n\n      :host([disabled]) [part\\$=\"button\"],\n      :host([readonly]) [part\\$=\"button\"] {\n        color: var(--material-disabled-text-color);\n      }\n\n      :host([disabled]) [part=\"clear-button\"] {\n        display: none;\n      }\n\n      [part\\$=\"button\"]::before {\n        font-family: \"material-icons\";\n      }\n    </style>\n  </template>\n</dom-module>`;\n\ndocument.head.appendChild($_documentContainer.content);\n","import '@vaadin/vaadin-material-styles/color.js';\nimport '@vaadin/vaadin-material-styles/typography.js';\nimport '@vaadin/vaadin-material-styles/mixins/required-field.js';\nimport '@vaadin/vaadin-material-styles/font-icons.js';\nimport '@vaadin/vaadin-material-styles/mixins/field-button.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\n\nconst $_documentContainer = html`<dom-module id=\"material-text-field\" theme-for=\"vaadin-text-field\">\n  <template>\n    <style include=\"material-required-field material-field-button\">\n      :host {\n        display: inline-flex;\n        position: relative;\n        padding-top: 8px;\n        margin-bottom: 8px;\n        outline: none;\n        color: var(--material-body-text-color);\n        font-size: var(--material-body-font-size);\n        line-height: 24px;\n        font-family: var(--material-font-family);\n        -webkit-font-smoothing: antialiased;\n        -moz-osx-font-smoothing: grayscale;\n      }\n\n      :host::before {\n        line-height: 32px;\n      }\n\n      /* Strange gymnastics to make fields vertically align nicely in most cases\n         (no label, with label, without prefix, with prefix, etc.) */\n\n      :host([has-label]) {\n        padding-top: 24px;\n      }\n\n      [part=\"label\"]:empty {\n        display: none;\n      }\n\n      [part=\"label\"]:empty::before {\n        content: \" \";\n        position: absolute;\n      }\n\n      [part=\"input-field\"] {\n        position: relative;\n        top: -0.2px; /* NOTE(platosha): Adjusts for wrong flex baseline in Chrome & Safari */\n        height: 32px;\n        padding-left: 0;\n        background-color: transparent;\n        margin: 0;\n      }\n\n      [part=\"input-field\"]::before,\n      [part=\"input-field\"]::after {\n        content: \"\";\n        position: absolute;\n        bottom: 0;\n        left: 0;\n        right: 0;\n        height: 1px;\n        transform-origin: 50% 0%;\n        background-color: var(--_material-text-field-input-line-background-color, #000);\n        opacity: var(--_material-text-field-input-line-opacity, 0.42);\n      }\n\n      [part=\"input-field\"]::after {\n        background-color: var(--material-primary-color);\n        opacity: 0;\n        height: 2px;\n        bottom: 0;\n        transform: scaleX(0);\n        transition: opacity 0.175s;\n      }\n\n      :host([disabled]) [part=\"label\"],\n      :host([disabled]) [part=\"value\"],\n      :host([disabled]) [part=\"input-field\"] ::slotted(input),\n      :host([disabled]) [part=\"input-field\"] ::slotted(textarea),\n      :host([disabled]) [part=\"input-field\"] ::slotted([part=\"value\"]) {\n        color: var(--material-disabled-text-color);\n        -webkit-text-fill-color: var(--material-disabled-text-color);\n      }\n\n      [part=\"value\"],\n      :host([disabled]) [part=\"input-field\"] ::slotted(input),\n      :host([disabled]) [part=\"input-field\"] ::slotted(textarea),\n      /* Slotted by vaadin-select-text-field */\n      [part=\"input-field\"] ::slotted([part=\"value\"]) {\n        outline: none;\n        margin: 0;\n        border: 0;\n        border-radius: 0;\n        padding: 8px 0;\n        width: 100%;\n        height: 100%;\n        font-family: inherit;\n        font-size: 1em;\n        line-height: inherit;\n        color: inherit;\n        background-color: transparent;\n        /* Disable default invalid style in Firefox */\n        box-shadow: none;\n      }\n\n      /* TODO: the text opacity should be 42%, but the disabled style is 38%.\n      Would need to introduce another property for it if we want to be 100% accurate. */\n      [part=\"value\"]::-webkit-input-placeholder {\n        color: var(--material-disabled-text-color);\n        transition: opacity 0.175s 0.05s;\n        opacity: 1;\n      }\n\n      [part=\"value\"]:-ms-input-placeholder {\n        color: var(--material-disabled-text-color);\n      }\n\n      [part=\"value\"]::-moz-placeholder {\n        color: var(--material-disabled-text-color);\n        transition: opacity 0.175s 0.05s;\n        opacity: 1;\n      }\n\n      [part=\"value\"]::placeholder {\n        color: var(--material-disabled-text-color);\n        transition: opacity 0.175s 0.1s;\n        opacity: 1;\n      }\n\n      :host([has-label]:not([focused]):not([invalid]):not([theme=\"always-float-label\"])) [part=\"value\"]::-webkit-input-placeholder {\n        opacity: 0;\n        transition-delay: 0;\n      }\n\n      :host([has-label]:not([focused]):not([invalid]):not([theme=\"always-float-label\"])) [part=\"value\"]::-moz-placeholder {\n        opacity: 0;\n        transition-delay: 0;\n      }\n\n      :host([has-label]:not([focused]):not([invalid]):not([theme=\"always-float-label\"])) [part=\"value\"]::placeholder {\n        opacity: 0;\n        transition-delay: 0;\n      }\n\n      /* IE11 doesn’t show the placeholder when the input is focused, so it’s basically useless for this theme */\n      :host([has-label]) [part=\"value\"]:-ms-input-placeholder {\n        opacity: 0;\n      }\n\n      [part=\"label\"] {\n        width: 133%;\n        transition: transform 0.175s, color 0.175s, width 0.175s;\n        transition-timing-function: ease, ease, step-end;\n      }\n\n      /* TODO: using unsupported selector to fix IE11 (even thought the label element is scaled down,\n         the 133% width still takes the same space as an unscaled element */\n      ::-ms-backdrop,\n      .vaadin-text-field-container {\n        overflow: hidden;\n      }\n\n      /* Same fix for MS Edge ^^   */\n      @supports (-ms-ime-align:auto) {\n        .vaadin-text-field-container {\n          overflow: hidden;\n        }\n      }\n\n      :host(:hover:not([readonly]):not([invalid])) [part=\"input-field\"]::before {\n        opacity: var(--_material-text-field-input-line-hover-opacity, 0.87);\n      }\n\n      :host([focused]:not([invalid])) [part=\"label\"] {\n        color: var(--material-primary-text-color);\n      }\n\n      :host([focused]) [part=\"input-field\"]::after,\n      :host([invalid]) [part=\"input-field\"]::after {\n        opacity: 1;\n        transform: none;\n        transition: transform 0.175s, opacity 0.175s;\n      }\n\n      :host([invalid]) [part=\"input-field\"]::after {\n        background-color: var(--material-error-color);\n      }\n\n      :host([input-prevented]) [part=\"input-field\"] {\n        color: var(--material-error-text-color);\n      }\n\n      :host([disabled]) {\n        pointer-events: none;\n      }\n\n      :host([disabled]) [part=\"input-field\"] {\n        color: var(--material-disabled-text-color);\n      }\n\n      :host([disabled]) [part=\"input-field\"]::before {\n        background-color: transparent;\n        background-image: linear-gradient(90deg, var(--_material-text-field-input-line-background-color, #000) 0, var(--_material-text-field-input-line-background-color, #000) 2px, transparent 2px);\n        background-size: 4px 1px;\n        background-repeat: repeat-x;\n      }\n\n      /* Only target the visible floating label */\n      :host([has-label]:not([has-value]):not([focused]):not([invalid]):not([theme~=\"always-float-label\"])) [part=\"label\"] {\n        width: 100%;\n        /* IE11 doesn’t work with calc inside the translate function, so we need to have a fixed pixel value instead of 50% + 16px */\n        transform: scale(1) translateY(24px);\n        transition-timing-function: ease, ease, step-start;\n        pointer-events: none;\n        left: auto;\n        transition-delay: 0.1s;\n      }\n\n      /* Slotted content */\n\n      [part=\"input-field\"] ::slotted(*:not([part=\"value\"]):not([part\\$=\"-button\"]):not(input):not(textarea)) {\n        color: var(--material-secondary-text-color);\n      }\n\n      [part=\"clear-button\"]::before {\n        content: var(--material-icons-clear);\n      }\n    </style>\n  </template>\n</dom-module>`;\n\ndocument.head.appendChild($_documentContainer.content);\n","/**\n@license\nCopyright (c) 2017 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\nimport '@vaadin/vaadin-themable-mixin/vaadin-themable-mixin.js';\n\nimport { ControlStateMixin } from '@vaadin/vaadin-control-state-mixin/vaadin-control-state-mixin.js';\nimport { timeOut } from '@polymer/polymer/lib/utils/async.js';\nimport { Debouncer } from '@polymer/polymer/lib/utils/debounce.js';\nconst $_documentContainer = document.createElement('template');\n\n$_documentContainer.innerHTML = `<dom-module id=\"vaadin-text-field-shared-styles\">\n  <template>\n    <style>\n      :host {\n        display: inline-flex;\n        outline: none;\n      }\n\n      :host::before {\n        content: \"\\\\2003\";\n        width: 0;\n        display: inline-block;\n        /* Size and position this element on the same vertical position as the input-field element\n           to make vertical align for the host element work as expected */\n      }\n\n      :host([hidden]) {\n        display: none !important;\n      }\n\n      .vaadin-text-field-container,\n      .vaadin-text-area-container {\n        display: flex;\n        flex-direction: column;\n        min-width: 100%;\n        max-width: 100%;\n        width: var(--vaadin-text-field-default-width, 12em);\n      }\n\n      [part=\"label\"]:empty {\n        display: none;\n      }\n\n      [part=\"input-field\"] {\n        display: flex;\n        align-items: center;\n        flex: auto;\n      }\n\n      .vaadin-text-field-container [part=\"input-field\"] {\n        flex-grow: 0;\n      }\n\n      /* Reset the native input styles */\n      [part=\"value\"],\n      [part=\"input-field\"] ::slotted(input),\n      [part=\"input-field\"] ::slotted(textarea) {\n        -webkit-appearance: none;\n        -moz-appearance: none;\n        outline: none;\n        margin: 0;\n        padding: 0;\n        border: 0;\n        border-radius: 0;\n        min-width: 0;\n        font: inherit;\n        font-size: 1em;\n        line-height: normal;\n        color: inherit;\n        background-color: transparent;\n        /* Disable default invalid style in Firefox */\n        box-shadow: none;\n      }\n\n      [part=\"input-field\"] ::slotted(*) {\n        flex: none;\n      }\n\n      [part=\"value\"],\n      [part=\"input-field\"] ::slotted(input),\n      [part=\"input-field\"] ::slotted(textarea),\n      /* Slotted by vaadin-select-text-field */\n      [part=\"input-field\"] ::slotted([part=\"value\"]) {\n        flex: auto;\n        white-space: nowrap;\n        overflow: hidden;\n        width: 100%;\n        height: 100%;\n      }\n\n      [part=\"input-field\"] ::slotted(textarea) {\n        resize: none;\n      }\n\n      [part=\"value\"]::-ms-clear,\n      [part=\"input-field\"] ::slotted(input)::-ms-clear {\n        display: none;\n      }\n\n      [part=\"clear-button\"] {\n        cursor: default;\n      }\n\n      [part=\"clear-button\"]::before {\n        content: \"✕\";\n      }\n    </style>\n  </template>\n</dom-module>`;\n\ndocument.head.appendChild($_documentContainer.content);\n\nconst HOST_PROPS = {\n  default: ['list', 'autofocus', 'pattern', 'autocapitalize', 'autocorrect', 'maxlength',\n    'minlength', 'name', 'placeholder', 'autocomplete', 'title'],\n  accessible: ['disabled', 'readonly', 'required', 'invalid']\n};\n\nconst PROP_TYPE = {\n  DEFAULT: 'default',\n  ACCESSIBLE: 'accessible'\n};\n\n\n/**\n * @polymerMixin\n * @mixes Vaadin.ControlStateMixin\n */\nexport const TextFieldMixin = subclass => class VaadinTextFieldMixin extends ControlStateMixin(subclass) {\n  static get properties() {\n    return {\n      /**\n       * Whether the value of the control can be automatically completed by the browser.\n       * List of available options at:\n       * https://developer.mozilla.org/en/docs/Web/HTML/Element/input#attr-autocomplete\n       */\n      autocomplete: {\n        type: String\n      },\n\n      /**\n       * This is a property supported by Safari that is used to control whether\n       * autocorrection should be enabled when the user is entering/editing the text.\n       * Possible values are:\n       * on: Enable autocorrection.\n       * off: Disable autocorrection.\n       */\n      autocorrect: {\n        type: String\n      },\n\n      /**\n       * This is a property supported by Safari and Chrome that is used to control whether\n       * autocapitalization should be enabled when the user is entering/editing the text.\n       * Possible values are:\n       * characters: Characters capitalization.\n       * words: Words capitalization.\n       * sentences: Sentences capitalization.\n       * none: No capitalization.\n       */\n      autocapitalize: {\n        type: String\n      },\n\n      /**\n       * Specify that the value should be automatically selected when the field gains focus.\n       */\n      autoselect: {\n        type: Boolean,\n        value: false\n      },\n\n      /**\n       * Set to true to display the clear icon which clears the input.\n       */\n      clearButtonVisible: {\n        type: Boolean,\n        value: false\n      },\n\n      /**\n       * Error to show when the input value is invalid.\n       */\n      errorMessage: {\n        type: String,\n        value: ''\n      },\n\n      /**\n       * Object with translated strings used for localization. Has\n       * the following structure and default values:\n       *\n       * ```\n       * {\n       *   // Translation of the clear icon button accessible label\n       *   clear: 'Clear'\n       * }\n       * ```\n       */\n      i18n: {\n        type: Object,\n        value: () => {\n          return {\n            clear: 'Clear'\n          };\n        }\n      },\n\n      /**\n       * String used for the label element.\n       */\n      label: {\n        type: String,\n        value: '',\n        observer: '_labelChanged'\n      },\n\n      /**\n       * Maximum number of characters (in Unicode code points) that the user can enter.\n       */\n      maxlength: {\n        type: Number\n      },\n\n      /**\n       * Minimum number of characters (in Unicode code points) that the user can enter.\n       */\n      minlength: {\n        type: Number\n      },\n\n      /**\n       * The name of the control, which is submitted with the form data.\n       */\n      name: {\n        type: String\n      },\n\n      /**\n       * A hint to the user of what can be entered in the control.\n       */\n      placeholder: {\n        type: String\n      },\n\n      /**\n       * This attribute indicates that the user cannot modify the value of the control.\n       */\n      readonly: {\n        type: Boolean,\n        reflectToAttribute: true\n      },\n\n      /**\n       * Specifies that the user must fill in a value.\n       */\n      required: {\n        type: Boolean,\n        reflectToAttribute: true\n      },\n\n\n      /**\n       * The initial value of the control.\n       * It can be used for two-way data binding.\n       */\n      value: {\n        type: String,\n        value: '',\n        observer: '_valueChanged',\n        notify: true\n      },\n\n      /**\n       * This property is set to true when the control value is invalid.\n       */\n      invalid: {\n        type: Boolean,\n        reflectToAttribute: true,\n        notify: true,\n        value: false\n      },\n\n      /**\n       * Specifies that the text field has value.\n       */\n      hasValue: {\n        type: Boolean,\n        reflectToAttribute: true\n      },\n\n      /**\n       * When set to true, user is prevented from typing a value that\n       * conflicts with the given `pattern`.\n       */\n      preventInvalidInput: {\n        type: Boolean\n      },\n\n      _labelId: String,\n\n      _errorId: String,\n\n      _inputId: String\n    };\n  }\n\n  static get observers() {\n    return ['_stateChanged(disabled, readonly, clearButtonVisible, hasValue)',\n      '_hostPropsChanged(' + HOST_PROPS.default.join(', ') + ')',\n      '_hostAccessiblePropsChanged(' + HOST_PROPS.accessible.join(', ') + ')',\n      '_getActiveErrorId(invalid, errorMessage, _errorId)',\n      '_getActiveLabelId(label, _labelId, _inputId)',\n      '__observeOffsetHeight(errorMessage, invalid, label)'\n    ];\n  }\n\n  get focusElement() {\n    if (!this.shadowRoot) {\n      return;\n    }\n    const slotted = this.querySelector(`${this._slottedTagName}[slot=\"${this._slottedTagName}\"]`);\n    if (slotted) {\n      return slotted;\n    }\n    return this.shadowRoot.querySelector('[part=\"value\"]');\n  }\n\n  /**\n   * @private\n   */\n  get inputElement() {\n    return this.focusElement;\n  }\n\n  get _slottedTagName() {\n    return 'input';\n  }\n\n  _createConstraintsObserver() {\n    // This complex observer needs to be added dynamically here (instead of defining it above in the `get observers()`)\n    // so that it runs after complex observers of inheriting classes. Otherwise e.g. `_stepOrMinChanged()` observer of\n    // vaadin-number-field would run after this and the `min` and `step` properties would not yet be propagated to\n    // the `inputElement` when this runs.\n    this._createMethodObserver('_constraintsChanged(required, minlength, maxlength, pattern)');\n  }\n\n  _onInput(e) {\n    if (this.__preventInput) {\n      e.stopImmediatePropagation();\n      this.__preventInput = false;\n      return;\n    }\n\n    if (this.preventInvalidInput) {\n      const input = this.inputElement;\n      if (input.value.length > 0 && !this.checkValidity()) {\n        input.value = this.value || '';\n        // add input-prevented attribute for 200ms\n        this.setAttribute('input-prevented', '');\n        this._inputDebouncer = Debouncer.debounce(\n          this._inputDebouncer,\n          timeOut.after(200), () => {\n            this.removeAttribute('input-prevented');\n          });\n        return;\n      }\n    }\n\n    if (!e.__fromClearButton) {\n      this.__userInput = true;\n    }\n    this.value = e.target.value;\n  }\n\n  // NOTE(yuriy): Workaround needed for IE11 and Edge for proper displaying\n  // of the clear button instead of setting display property for it depending on state.\n  _stateChanged(disabled, readonly, clearButtonVisible, hasValue) {\n    if (!disabled &&\n        !readonly &&\n        clearButtonVisible &&\n        hasValue\n    ) {\n      this.$.clearButton.removeAttribute('hidden');\n    } else {\n      this.$.clearButton.setAttribute('hidden', true);\n    }\n  }\n\n  _onChange(e) {\n    if (this._valueClearing) {\n      return;\n    }\n\n    // In the Shadow DOM, the `change` event is not leaked into the\n    // ancestor tree, so we must do this manually.\n    const changeEvent = new CustomEvent('change', {\n      detail: {\n        sourceEvent: e\n      },\n      bubbles: e.bubbles,\n      cancelable: e.cancelable,\n    });\n    this.dispatchEvent(changeEvent);\n  }\n\n  _valueChanged(newVal, oldVal) {\n    // setting initial value to empty string, skip validation\n    if (newVal === '' && oldVal === undefined) {\n      return;\n    }\n\n    if (newVal !== '' && newVal != null) {\n      this.hasValue = true;\n    } else {\n      this.hasValue = false;\n    }\n\n    if (this.__userInput) {\n      this.__userInput = false;\n      return;\n    } else if (newVal !== undefined) {\n      this.inputElement.value = newVal;\n    } else {\n      this.value = this.inputElement.value = '';\n    }\n\n    if (this.invalid) {\n      this.validate();\n    }\n  }\n\n  _labelChanged(label) {\n    if (label !== '' && label != null) {\n      this.setAttribute('has-label', '');\n    } else {\n      this.removeAttribute('has-label');\n    }\n  }\n\n  _onSlotChange() {\n    const slotted = this.querySelector(`${this._slottedTagName}[slot=\"${this._slottedTagName}\"]`);\n\n    if (this.value) {\n      this.inputElement.value = this.value;\n      this.validate();\n    }\n\n    if (slotted && !this._slottedInput) {\n      this._validateSlottedValue(slotted);\n      this._addInputListeners(slotted);\n      this._addIEListeners(slotted);\n      this._slottedInput = slotted;\n    } else if (!slotted && this._slottedInput) {\n      this._removeInputListeners(this._slottedInput);\n      this._removeIEListeners(this._slottedInput);\n      this._slottedInput = undefined;\n    }\n\n    Object.keys(PROP_TYPE).map(key => PROP_TYPE[key]).forEach(type =>\n      this._propagateHostAttributes(HOST_PROPS[type].map(attr => this[attr]), type));\n  }\n\n  _hostPropsChanged(...attributesValues) {\n    this._propagateHostAttributes(attributesValues, PROP_TYPE.DEFAULT);\n  }\n\n  _hostAccessiblePropsChanged(...attributesValues) {\n    this._propagateHostAttributes(attributesValues, PROP_TYPE.ACCESSIBLE);\n  }\n\n  _validateSlottedValue(slotted) {\n    if (slotted.value !== this.value) {\n      console.warn('Please define value on the vaadin-text-field component!');\n      slotted.value = '';\n    }\n  }\n\n  _propagateHostAttributes(attributesValues, type) {\n    const input = this.inputElement;\n    const attributeNames = HOST_PROPS[type];\n\n    if (type === 'accessible') {\n      attributeNames.forEach((attr, index) => {\n        this._setOrToggleAttribute(attr, attributesValues[index], input);\n        this._setOrToggleAttribute(`aria-${attr}`, attributesValues[index], input);\n      });\n    } else {\n      attributeNames.forEach((attr, index) => {\n        this._setOrToggleAttribute(attr, attributesValues[index], input);\n      });\n    }\n  }\n\n  _setOrToggleAttribute(name, value, node) {\n    if (!name || !node) {\n      return;\n    }\n\n    if (value) {\n      node.setAttribute(name, (typeof value === 'boolean') ? '' : value);\n    } else {\n      node.removeAttribute(name);\n    }\n  }\n\n  _constraintsChanged(required, minlength, maxlength, pattern) {\n    if (!this.invalid) {\n      return;\n    }\n\n    if (!required && !minlength && !maxlength && !pattern) {\n      this.invalid = false;\n    } else {\n      this.validate();\n    }\n  }\n\n  /**\n   * Returns true if the current input value satisfies all constraints (if any)\n   * @returns {boolean}\n   */\n  checkValidity() {\n    if (this.required || this.pattern || this.maxlength || this.minlength) {\n      return this.inputElement.checkValidity();\n    } else {\n      return !this.invalid;\n    }\n  }\n\n  _addInputListeners(node) {\n    node.addEventListener('input', this._boundOnInput);\n    node.addEventListener('change', this._boundOnChange);\n    node.addEventListener('blur', this._boundOnBlur);\n    node.addEventListener('focus', this._boundOnFocus);\n  }\n\n  _removeInputListeners(node) {\n    node.removeEventListener('input', this._boundOnInput);\n    node.removeEventListener('change', this._boundOnChange);\n    node.removeEventListener('blur', this._boundOnBlur);\n    node.removeEventListener('focus', this._boundOnFocus);\n  }\n\n  ready() {\n    super.ready();\n\n    this._createConstraintsObserver();\n\n    this._boundOnInput = this._onInput.bind(this);\n    this._boundOnChange = this._onChange.bind(this);\n    this._boundOnBlur = this._onBlur.bind(this);\n    this._boundOnFocus = this._onFocus.bind(this);\n\n    const defaultInput = this.shadowRoot.querySelector('[part=\"value\"]');\n    this._slottedInput = this.querySelector(`${this._slottedTagName}[slot=\"${this._slottedTagName}\"]`);\n    this._addInputListeners(defaultInput);\n    this._addIEListeners(defaultInput);\n    if (this._slottedInput) {\n      this._addIEListeners(this._slottedInput);\n      this._addInputListeners(this._slottedInput);\n    }\n\n    this.shadowRoot.querySelector('[name=\"input\"], [name=\"textarea\"]')\n      .addEventListener('slotchange', this._onSlotChange.bind(this));\n\n    if (!(window.ShadyCSS && window.ShadyCSS.nativeCss)) {\n      this.updateStyles();\n    }\n\n    this.$.clearButton.addEventListener('mousedown', () => this._valueClearing = true);\n    this.$.clearButton.addEventListener('mouseleave', () => this._valueClearing = false);\n    this.$.clearButton.addEventListener('click', this._onClearButtonClick.bind(this));\n    this.addEventListener('keydown', this._onKeyDown.bind(this));\n\n    var uniqueId = TextFieldMixin._uniqueId = 1 + TextFieldMixin._uniqueId || 0;\n    this._errorId = `${this.constructor.is}-error-${uniqueId}`;\n    this._labelId = `${this.constructor.is}-label-${uniqueId}`;\n    this._inputId = `${this.constructor.is}-input-${uniqueId}`;\n\n    // Lumo theme defines a max-height transition for the \"error-message\"\n    // part on invalid state change.\n    this.shadowRoot.querySelector('[part=\"error-message\"]')\n      .addEventListener('transitionend', () => {\n        this.__observeOffsetHeight();\n      });\n  }\n\n  /**\n   * Returns true if `value` is valid.\n   * `<iron-form>` uses this to check the validity for all its elements.\n   *\n   * @return {boolean} True if the value is valid.\n   */\n  validate() {\n    return !(this.invalid = !this.checkValidity());\n  }\n\n  clear() {\n    this.value = '';\n  }\n\n  _onBlur() {\n    this.validate();\n  }\n\n  _onFocus() {\n    if (this.autoselect) {\n      this.inputElement.select();\n      // iOS 9 workaround: https://stackoverflow.com/a/7436574\n      setTimeout(() => {\n        try {\n          this.inputElement.setSelectionRange(0, 9999);\n        } catch (e) {\n          // The workaround may cause errors on different input types.\n          // Needs to be suppressed. See https://github.com/vaadin/flow/issues/6070\n        }\n      });\n    }\n  }\n\n  _onClearButtonClick(e) {\n    e.preventDefault();\n    // NOTE(yuriy): This line won't affect focus on the host. Cannot be properly tested.\n    this.inputElement.focus();\n    this.clear();\n    this._valueClearing = false;\n    if (navigator.userAgent.match(/Trident/)) {\n      // Disable IE input\" event prevention here, we want the input event from\n      // below to propagate normally.\n      this.__preventInput = false;\n    }\n    const inputEvent = new Event('input', {bubbles: true, composed: true});\n    inputEvent.__fromClearButton = true;\n    const changeEvent = new Event('change', {bubbles: !this._slottedInput});\n    changeEvent.__fromClearButton = true;\n    this.inputElement.dispatchEvent(inputEvent);\n    this.inputElement.dispatchEvent(changeEvent);\n  }\n\n  _onKeyDown(e) {\n    if (e.keyCode === 27 && this.clearButtonVisible) {\n      const dispatchChange = !!this.value;\n      this.clear();\n      dispatchChange && this.inputElement.dispatchEvent(new Event('change', {bubbles: !this._slottedInput}));\n    }\n  }\n\n  _addIEListeners(node) {\n    /* istanbul ignore if */\n    if (navigator.userAgent.match(/Trident/)) {\n      // IE11 dispatches `input` event in following cases:\n      // - focus or blur, when placeholder attribute is set\n      // - placeholder attribute value changed\n      // https://developer.microsoft.com/en-us/microsoft-edge/platform/issues/101220/\n      this._shouldPreventInput = () => {\n        this.__preventInput = true;\n        requestAnimationFrame(() => {\n          this.__preventInput = false;\n        });\n      };\n      node.addEventListener('focusin', this._shouldPreventInput);\n      node.addEventListener('focusout', this._shouldPreventInput);\n      this._createPropertyObserver('placeholder', this._shouldPreventInput);\n    }\n  }\n\n  _removeIEListeners(node) {\n    /* istanbul ignore if */\n    if (navigator.userAgent.match(/Trident/)) {\n      node.removeEventListener('focusin', this._shouldPreventInput);\n      node.removeEventListener('focusout', this._shouldPreventInput);\n    }\n  }\n\n  _getActiveErrorId(invalid, errorMessage, errorId) {\n    this._setOrToggleAttribute('aria-describedby',\n      (errorMessage && invalid ? errorId : undefined),\n      this.focusElement);\n  }\n\n  _getActiveLabelId(label, _labelId, _inputId) {\n    let ids = _inputId;\n    if (label) {\n      ids = `${_labelId} ${_inputId}`;\n    }\n    this.focusElement.setAttribute('aria-labelledby', ids);\n  }\n\n  _getErrorMessageAriaHidden(invalid, errorMessage, errorId) {\n    return (!(errorMessage && invalid ? errorId : undefined)).toString();\n  }\n\n  _dispatchIronResizeEventIfNeeded(sizePropertyName, value) {\n    const previousSizePropertyName = '__previous' + sizePropertyName;\n    if (this[previousSizePropertyName] !== undefined\n        && this[previousSizePropertyName] !== value) {\n      this.dispatchEvent(\n        new CustomEvent('iron-resize', {bubbles: true})\n      );\n    }\n\n    this[previousSizePropertyName] = value;\n  }\n\n  __observeOffsetHeight() {\n    this._dispatchIronResizeEventIfNeeded('Height', this.offsetHeight);\n  }\n\n  /**\n   * @protected\n   */\n  attributeChangedCallback(prop, oldVal, newVal) {\n    super.attributeChangedCallback(prop, oldVal, newVal);\n    // Needed until Edge has CSS Custom Properties (present in Edge Preview)\n    /* istanbul ignore if */\n    if (!(window.ShadyCSS && window.ShadyCSS.nativeCss) &&\n      /^(focused|focus-ring|invalid|disabled|placeholder|has-value)$/.test(prop)) {\n      this.updateStyles();\n    }\n\n    // Safari has an issue with repainting shadow root element styles when a host attribute changes.\n    // Need this workaround (toggle any inline css property on and off) until the issue gets fixed.\n    const isSafari = /^((?!chrome|android).)*safari/i.test(navigator.userAgent);\n    /* istanbul ignore if */\n    if (isSafari && this.root) {\n      const WEBKIT_PROPERTY = '-webkit-backface-visibility';\n      this.root.querySelectorAll('*').forEach(el => {\n        el.style[WEBKIT_PROPERTY] = 'visible';\n        el.style[WEBKIT_PROPERTY] = '';\n      });\n    }\n  }\n\n  /**\n   * Fired when the user commits a value change.\n   *\n   * @event change\n   */\n\n  /**\n   * Fired when the value is changed by the user: on every typing keystroke,\n   * and the value is cleared using the clear button.\n   *\n   * @event input\n   */\n\n  /**\n   * Fired when the size of the element changes.\n   *\n   * @event iron-resize\n   */\n};\n","/**\n@license\nCopyright (c) 2017 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport { TextFieldMixin } from './vaadin-text-field-mixin.js';\nimport { ElementMixin } from '@vaadin/vaadin-element-mixin/vaadin-element-mixin.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { ThemableMixin } from '@vaadin/vaadin-themable-mixin/vaadin-themable-mixin.js';\n/**\n * `<vaadin-text-field>` is a Web Component for text field control in forms.\n *\n * ```html\n * <vaadin-text-field label=\"First Name\">\n * </vaadin-text-field>\n * ```\n *\n * ### Prefixes and suffixes\n *\n * These are child elements of a `<vaadin-text-field>` that are displayed\n * inline with the input, before or after.\n * In order for an element to be considered as a prefix, it must have the slot\n * attribute set to `prefix` (and similarly for `suffix`).\n *\n * ```html\n * <vaadin-text-field label=\"Email address\">\n *   <div slot=\"prefix\">Sent to:</div>\n *   <div slot=\"suffix\">@vaadin.com</div>\n * </vaadin-text-area>\n * ```\n *\n * ### Styling\n *\n * The following custom properties are available for styling:\n *\n * Custom property | Description | Default\n * ----------------|-------------|-------------\n * `--vaadin-text-field-default-width` | Set the default width of the input field | `12em`\n *\n * The following shadow DOM parts are available for styling:\n *\n * Part name | Description\n * ----------------|----------------\n * `label` | The label element\n * `input-field` | The element that wraps prefix, value and suffix\n * `value` | The text value element inside the `input-field` element\n * `error-message` | The error message element\n *\n * The following state attributes are available for styling:\n *\n * Attribute    | Description | Part name\n * -------------|-------------|------------\n * `disabled` | Set to a disabled text field | :host\n * `has-value` | Set when the element has a value | :host\n * `has-label` | Set when the element has a label | :host\n * `invalid` | Set when the element is invalid | :host\n * `input-prevented` | Temporarily set when invalid input is prevented | :host\n * `focused` | Set when the element is focused | :host\n * `focus-ring` | Set when the element is keyboard focused | :host\n * `readonly` | Set to a readonly text field | :host\n *\n * See [ThemableMixin – how to apply styles for shadow parts](https://github.com/vaadin/vaadin-themable-mixin/wiki)\n *\n * @memberof Vaadin\n * @mixes Vaadin.TextFieldMixin\n * @mixes Vaadin.ThemableMixin\n * @demo demo/index.html\n */\nclass TextFieldElement extends ElementMixin(TextFieldMixin(ThemableMixin(PolymerElement))) {\n  static get template() {\n    return html`\n    <style include=\"vaadin-text-field-shared-styles\">\n      /* polymer-cli linter breaks with empty line */\n    </style>\n\n    <div class=\"vaadin-text-field-container\">\n\n      <label part=\"label\" on-click=\"focus\" id=\"[[_labelId]]\">[[label]]</label>\n\n      <div part=\"input-field\" id=\"[[_inputId]]\">\n\n        <slot name=\"prefix\"></slot>\n\n        <slot name=\"input\">\n          <input part=\"value\">\n        </slot>\n\n        <div part=\"clear-button\" id=\"clearButton\" role=\"button\" aria-label\\$=\"[[i18n.clear]]\"></div>\n        <slot name=\"suffix\"></slot>\n\n      </div>\n\n      <div part=\"error-message\" id=\"[[_errorId]]\" aria-live=\"assertive\" aria-hidden\\$=\"[[_getErrorMessageAriaHidden(invalid, errorMessage, _errorId)]]\">[[errorMessage]]</div>\n\n    </div>\n`;\n  }\n\n  static get is() {\n    return 'vaadin-text-field';\n  }\n\n  static get version() {\n    return '2.4.14';\n  }\n\n  static get properties() {\n    return {\n      /**\n       * Identifies a list of pre-defined options to suggest to the user.\n       * The value must be the id of a <datalist> element in the same document.\n       */\n      list: {\n        type: String\n      },\n\n      /**\n       * A regular expression that the value is checked against.\n       * The pattern must match the entire value, not just some subset.\n       */\n      pattern: {\n        type: String\n      },\n\n      /**\n       * Message to show to the user when validation fails.\n       */\n      title: {\n        type: String\n      }\n    };\n  }\n}\n\ncustomElements.define(TextFieldElement.is, TextFieldElement);\n\nexport { TextFieldElement };\n","import './vaadin-date-picker-overlay.js';\nimport './vaadin-date-picker-overlay-content.js';\nimport './vaadin-month-calendar.js';\nimport '@vaadin/vaadin-text-field/theme/material/vaadin-text-field.js';\nimport '@vaadin/vaadin-material-styles/color.js';\nimport '@vaadin/vaadin-material-styles/font-icons.js';\nimport '@vaadin/vaadin-material-styles/mixins/field-button.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\n\nconst $_documentContainer = html`<dom-module id=\"material-date-picker\" theme-for=\"vaadin-date-picker\">\n  <template>\n    <style include=\"material-field-button\">\n      :host {\n        display: inline-flex;\n        -webkit-tap-highlight-color: transparent;\n      }\n\n      [part=\"clear-button\"]::before {\n        content: var(--material-icons-clear);\n      }\n\n      [part=\"toggle-button\"]::before {\n        content: var(--material-icons-calendar);\n      }\n    </style>\n  </template>\n</dom-module>`;\n\ndocument.head.appendChild($_documentContainer.content);\n","/**\n@license\nCopyright (c) 2017 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\nimport { IronA11yKeysBehavior } from '@polymer/iron-a11y-keys-behavior/iron-a11y-keys-behavior.js';\n\nimport { IronResizableBehavior } from '@polymer/iron-resizable-behavior/iron-resizable-behavior.js';\nimport { DatePickerHelper } from './vaadin-date-picker-helper.js';\nimport { addListener } from '@polymer/polymer/lib/utils/gestures.js';\nimport { mixinBehaviors } from '@polymer/polymer/lib/legacy/class.js';\n\n/**\n * @polymerMixin\n */\nexport const DatePickerMixin = subclass => class VaadinDatePickerMixin extends mixinBehaviors(\n  [IronResizableBehavior], subclass\n) {\n\n  static get properties() {\n    return {\n      /**\n       * The current selected date.\n       */\n      _selectedDate: {\n        type: Date\n      },\n\n      _focusedDate: Date,\n\n      /**\n       * The value for this element.\n       *\n       * Supported date formats:\n       * - ISO 8601 `\"YYYY-MM-DD\"` (default)\n       * - 6-digit extended ISO 8601 `\"+YYYYYY-MM-DD\"`, `\"-YYYYYY-MM-DD\"`\n       *\n       * @type {String}\n       */\n      value: {\n        type: String,\n        observer: '_valueChanged',\n        notify: true,\n        value: ''\n      },\n\n      /**\n       * Set to true to mark the input as required.\n       */\n      required: {\n        type: Boolean,\n        value: false\n      },\n\n      /**\n       * The name of this element.\n       */\n      name: {\n        type: String\n      },\n\n      /**\n       * Date which should be visible when there is no value selected.\n       *\n       * The same date formats as for the `value` property are supported.\n       */\n      initialPosition: String,\n\n      /**\n       * The label for this element.\n       */\n      label: String,\n\n      /**\n       * Set true to open the date selector overlay.\n       */\n      opened: {\n        type: Boolean,\n        reflectToAttribute: true,\n        notify: true,\n        observer: '_openedChanged'\n      },\n\n      /**\n       * Set true to display ISO-8601 week numbers in the calendar. Notice that\n       * displaying week numbers is only supported when `i18n.firstDayOfWeek`\n       * is 1 (Monday).\n       */\n      showWeekNumbers: {\n        type: Boolean\n      },\n\n      _fullscreen: {\n        value: false,\n        observer: '_fullscreenChanged'\n      },\n\n      _fullscreenMediaQuery: {\n        value: '(max-width: 420px), (max-height: 420px)'\n      },\n\n      // An array of ancestor elements whose -webkit-overflow-scrolling is forced from value\n      // 'touch' to value 'auto' in order to prevent them from clipping the dropdown. iOS only.\n      _touchPrevented: Array,\n\n      /**\n       * The object used to localize this component.\n       * To change the default localization, replace the entire\n       * _i18n_ object or just the property you want to modify.\n       *\n       * The object has the following JSON structure and default values:\n\n          {\n            // An array with the full names of months starting\n            // with January.\n            monthNames: [\n              'January', 'February', 'March', 'April', 'May',\n              'June', 'July', 'August', 'September',\n              'October', 'November', 'December'\n            ],\n\n            // An array of weekday names starting with Sunday. Used\n            // in screen reader announcements.\n            weekdays: [\n              'Sunday', 'Monday', 'Tuesday', 'Wednesday',\n              'Thursday', 'Friday', 'Saturday'\n            ],\n\n            // An array of short weekday names starting with Sunday.\n            // Displayed in the calendar.\n            weekdaysShort: [\n              'Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'\n            ],\n\n            // An integer indicating the first day of the week\n            // (0 = Sunday, 1 = Monday, etc.).\n            firstDayOfWeek: 0,\n\n            // Used in screen reader announcements along with week\n            // numbers, if they are displayed.\n            week: 'Week',\n\n            // Translation of the Calendar icon button title.\n            calendar: 'Calendar',\n\n            // Translation of the Clear icon button title.\n            clear: 'Clear',\n\n            // Translation of the Today shortcut button text.\n            today: 'Today',\n\n            // Translation of the Cancel button text.\n            cancel: 'Cancel',\n\n            // A function to format given `Object` as\n            // date string. Object is in the format `{ day: ..., month: ..., year: ... }`\n            // Note: The argument month is 0-based. This means that January = 0 and December = 11.\n            formatDate: d => {\n              // returns a string representation of the given\n              // object in 'MM/DD/YYYY' -format\n            },\n\n            // A function to parse the given text to an `Object` in the format `{ day: ..., month: ..., year: ... }`.\n            // Must properly parse (at least) text formatted by `formatDate`.\n            // Setting the property to null will disable keyboard input feature.\n            // Note: The argument month is 0-based. This means that January = 0 and December = 11.\n            parseDate: text => {\n              // Parses a string in 'MM/DD/YY', 'MM/DD' or 'DD' -format to\n              // an `Object` in the format `{ day: ..., month: ..., year: ... }`.\n            }\n\n            // A function to format given `monthName` and\n            // `fullYear` integer as calendar title string.\n            formatTitle: (monthName, fullYear) => {\n              return monthName + ' ' + fullYear;\n            }\n          }\n\n       *\n       * @default {English/US}\n       */\n      i18n: {\n        type: Object,\n        value: () => {\n          return {\n            monthNames: [\n              'January', 'February', 'March', 'April', 'May',\n              'June', 'July', 'August', 'September', 'October', 'November', 'December'\n            ],\n            weekdays: ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'],\n            weekdaysShort: ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'],\n            firstDayOfWeek: 0,\n            week: 'Week',\n            calendar: 'Calendar',\n            clear: 'Clear',\n            today: 'Today',\n            cancel: 'Cancel',\n            formatDate: d => {\n              const yearStr = String(d.year).replace(/\\d+/, y => '0000'.substr(y.length) + y);\n              return [d.month + 1, d.day, yearStr].join('/');\n            },\n            parseDate: text => {\n              const parts = text.split('/');\n              const today = new Date();\n              let date, month = today.getMonth(), year = today.getFullYear();\n\n              if (parts.length === 3) {\n                year = parseInt(parts[2]);\n                if (parts[2].length < 3 && year >= 0) {\n                  year += year < 50 ? 2000 : 1900;\n                }\n                month = parseInt(parts[0]) - 1;\n                date = parseInt(parts[1]);\n              } else if (parts.length === 2) {\n                month = parseInt(parts[0]) - 1;\n                date = parseInt(parts[1]);\n              } else if (parts.length === 1) {\n                date = parseInt(parts[0]);\n              }\n\n              if (date !== undefined) {\n                return {day: date, month, year};\n              }\n            },\n            formatTitle: (monthName, fullYear) => {\n              return monthName + ' ' + fullYear;\n            }\n          };\n        }\n      },\n\n      /**\n       * The earliest date that can be selected. All earlier dates will be disabled.\n       *\n       * Supported date formats:\n       * - ISO 8601 `\"YYYY-MM-DD\"` (default)\n       * - 6-digit extended ISO 8601 `\"+YYYYYY-MM-DD\"`, `\"-YYYYYY-MM-DD\"`\n       *\n       * @type {String}\n       */\n      min: {\n        type: String,\n        observer: '_minChanged'\n      },\n\n      /**\n       * The latest date that can be selected. All later dates will be disabled.\n       *\n       * Supported date formats:\n       * - ISO 8601 `\"YYYY-MM-DD\"` (default)\n       * - 6-digit extended ISO 8601 `\"+YYYYYY-MM-DD\"`, `\"-YYYYYY-MM-DD\"`\n       *\n       * @type {String}\n       */\n      max: {\n        type: String,\n        observer: '_maxChanged'\n      },\n\n      /**\n       * The earliest date that can be selected. All earlier dates will be disabled.\n       */\n      _minDate: {\n        type: Date,\n        // null does not work here because minimizer passes undefined to overlay (#351)\n        value: ''\n      },\n\n      /**\n       * The latest date that can be selected. All later dates will be disabled.\n       */\n      _maxDate: {\n        type: Date,\n        value: ''\n      },\n\n      _noInput: {\n        type: Boolean,\n        computed: '_isNoInput(_fullscreen, _ios, i18n, i18n.*)'\n      },\n\n      _ios: {\n        type: Boolean,\n        value: navigator.userAgent.match(/iP(?:hone|ad;(?: U;)? CPU) OS (\\d+)/)\n      },\n\n      _webkitOverflowScroll: {\n        type: Boolean,\n        value: document.createElement('div').style.webkitOverflowScrolling === ''\n      },\n\n      _ignoreAnnounce: {\n        value: true\n      },\n\n      _focusOverlayOnOpen: Boolean,\n\n      _overlayInitialized: Boolean\n    };\n  }\n\n  static get observers() {\n    return [\n      '_updateHasValue(value)',\n      '_validateInput(_selectedDate, _minDate, _maxDate)',\n      '_selectedDateChanged(_selectedDate, i18n.formatDate)',\n      '_focusedDateChanged(_focusedDate, i18n.formatDate)',\n      '_announceFocusedDate(_focusedDate, opened, _ignoreAnnounce)'\n    ];\n  }\n\n  ready() {\n    super.ready();\n    this._boundOnScroll = this._onScroll.bind(this);\n    this._boundFocus = this._focus.bind(this);\n    this._boundUpdateAlignmentAndPosition = this._updateAlignmentAndPosition.bind(this);\n\n    const isClearButton = e => {\n      const path = e.composedPath();\n      const inputIndex = path.indexOf(this._inputElement);\n      return path.slice(0, inputIndex)\n        .filter(el => el.getAttribute && el.getAttribute('part') === 'clear-button')\n        .length === 1;\n    };\n\n    addListener(this, 'tap', e => {\n      // FIXME(platosha): use preventDefault in the text field clear button,\n      // then the following composedPath check could be simplified down\n      // to `if (!e.defaultPrevented)`.\n      // https://github.com/vaadin/vaadin-text-field/issues/352\n      if (!isClearButton(e)) {\n        this.open();\n      }\n    });\n\n    this.addEventListener('touchend', e => {\n      if (!isClearButton(e)) {\n        e.preventDefault();\n      }\n    });\n    this.addEventListener('keydown', this._onKeydown.bind(this));\n    this.addEventListener('input', this._onUserInput.bind(this));\n    this.addEventListener('focus', e => this._noInput && e.target.blur());\n    this.addEventListener('blur', e => !this.opened && this.validate());\n  }\n\n  _initOverlay() {\n    this.$.overlay.removeAttribute('disable-upgrade');\n    this._overlayInitialized = true;\n\n    this.$.overlay.addEventListener('opened-changed', e => this.opened = e.detail.value);\n\n    this._overlayContent.addEventListener('close', this._close.bind(this));\n    this._overlayContent.addEventListener('focus-input', this._focusAndSelect.bind(this));\n    this.$.overlay.addEventListener('vaadin-overlay-escape-press', this._boundFocus);\n\n    // Keep focus attribute in focusElement for styling\n    this._overlayContent.addEventListener('focus', () => this.focusElement._setFocused(true));\n\n    this.$.overlay.addEventListener('vaadin-overlay-close', this._onVaadinOverlayClose.bind(this));\n  }\n\n  /**\n   * @protected\n   */\n  disconnectedCallback() {\n    super.disconnectedCallback();\n\n    if (this._overlayInitialized) {\n      this.$.overlay.removeEventListener('vaadin-overlay-escape-press', this._boundFocus);\n    }\n\n    this.opened = false;\n  }\n\n  /**\n   * Opens the dropdown.\n   */\n  open() {\n    if (!this.disabled && !this.readonly) {\n      this.opened = true;\n    }\n  }\n\n  _close(e) {\n    if (e) {\n      e.stopPropagation();\n    }\n    this._focus();\n    this.close();\n  }\n\n  /**\n   * Closes the dropdown.\n   */\n  close() {\n    if (this._overlayInitialized) {\n      this.$.overlay.close();\n    }\n  }\n\n  get _inputElement() {\n    return this._input();\n  }\n\n  get _nativeInput() {\n    if (this._inputElement) {\n      // vaadin-text-field's input is focusElement\n      // iron-input's input is inputElement\n      return this._inputElement.focusElement ? this._inputElement.focusElement :\n        this._inputElement.inputElement ? this._inputElement.inputElement :\n          window.unwrap ? window.unwrap(this._inputElement) : this._inputElement;\n    }\n  }\n\n  _parseDate(str) {\n    // Parsing with RegExp to ensure correct format\n    var parts = /^([-+]\\d{1}|\\d{2,4}|[-+]\\d{6})-(\\d{1,2})-(\\d{1,2})$/.exec(str);\n    if (!parts) {\n      return;\n    }\n\n    var date = new Date(0, 0); // Wrong date (1900-01-01), but with midnight in local time\n    date.setFullYear(parseInt(parts[1], 10));\n    date.setMonth(parseInt(parts[2], 10) - 1);\n    date.setDate(parseInt(parts[3], 10));\n    return date;\n  }\n\n  _isNoInput(fullscreen, ios, i18n) {\n    return !this._inputElement || fullscreen || ios || !i18n.parseDate;\n  }\n\n  _formatISO(date) {\n    if (!(date instanceof Date)) {\n      return '';\n    }\n\n    const pad = (num, fmt = '00') => (fmt + num).substr((fmt + num).length - fmt.length);\n\n    let yearSign = '';\n    let yearFmt = '0000';\n    let yearAbs = date.getFullYear();\n    if (yearAbs < 0) {\n      yearAbs = -yearAbs;\n      yearSign = '-';\n      yearFmt = '000000';\n    } else if (date.getFullYear() >= 10000) {\n      yearSign = '+';\n      yearFmt = '000000';\n    }\n\n    const year = yearSign + pad(yearAbs, yearFmt);\n    const month = pad(date.getMonth() + 1);\n    const day = pad(date.getDate());\n    return [year, month, day].join('-');\n  }\n\n  _openedChanged(opened) {\n    if (opened && !this._overlayInitialized) {\n      this._initOverlay();\n    }\n    if (this._overlayInitialized) {\n      this.$.overlay.opened = opened;\n    }\n    if (opened) {\n      this._updateAlignmentAndPosition();\n    }\n  }\n\n  _selectedDateChanged(selectedDate, formatDate) {\n    if (selectedDate === undefined || formatDate === undefined) {\n      return;\n    }\n    if (this.__userInputOccurred) {\n      this.__dispatchChange = true;\n    }\n    const inputValue = selectedDate && formatDate(DatePickerHelper._extractDateParts(selectedDate));\n    const value = this._formatISO(selectedDate);\n    if (value !== this.value) {\n      this.validate(inputValue);\n      this.value = value;\n    }\n    this.__userInputOccurred = false;\n    this.__dispatchChange = false;\n    this._ignoreFocusedDateChange = true;\n    this._focusedDate = selectedDate;\n    this._ignoreFocusedDateChange = false;\n    this._inputValue = selectedDate ? inputValue : '';\n  }\n\n  _focusedDateChanged(focusedDate, formatDate) {\n    if (focusedDate === undefined || formatDate === undefined) {\n      return;\n    }\n    this.__userInputOccurred = true;\n    if (!this._ignoreFocusedDateChange && !this._noInput) {\n      this._inputValue = focusedDate ? formatDate(DatePickerHelper._extractDateParts(focusedDate)) : '';\n    }\n  }\n\n  _updateHasValue(value) {\n    if (value) {\n      this.setAttribute('has-value', '');\n    } else {\n      this.removeAttribute('has-value');\n    }\n  }\n\n\n  __getOverlayTheme(theme, overlayInitialized) {\n    if (overlayInitialized) {\n      return theme;\n    }\n  }\n\n  _handleDateChange(property, value, oldValue) {\n    if (!value) {\n      this[property] = '';\n      return;\n    }\n\n    var date = this._parseDate(value);\n    if (!date) {\n      this.value = oldValue;\n      return;\n    }\n    if (!DatePickerHelper._dateEquals(this[property], date)) {\n      this[property] = date;\n    }\n  }\n\n  _valueChanged(value, oldValue) {\n    if (this.__dispatchChange) {\n      this.dispatchEvent(new CustomEvent('change', {bubbles: true}));\n    }\n    this._handleDateChange('_selectedDate', value, oldValue);\n  }\n\n  _minChanged(value, oldValue) {\n    this._handleDateChange('_minDate', value, oldValue);\n  }\n\n  _maxChanged(value, oldValue) {\n    this._handleDateChange('_maxDate', value, oldValue);\n  }\n\n  _updateAlignmentAndPosition() {\n    if (!this._overlayInitialized) {\n      return;\n    }\n    if (!this._fullscreen) {\n      const inputRect = this._inputElement.getBoundingClientRect();\n\n      const bottomAlign = inputRect.top > window.innerHeight / 2;\n      const rightAlign = inputRect.left + this.clientWidth / 2 > window.innerWidth / 2;\n\n      if (rightAlign) {\n        const viewportWidth = Math.min(window.innerWidth, document.documentElement.clientWidth);\n        this.$.overlay.setAttribute('right-aligned', '');\n        this.$.overlay.style.removeProperty('left');\n        this.$.overlay.style.right = (viewportWidth - inputRect.right) + 'px';\n      } else {\n        this.$.overlay.removeAttribute('right-aligned');\n        this.$.overlay.style.removeProperty('right');\n        this.$.overlay.style.left = inputRect.left + 'px';\n      }\n\n      if (bottomAlign) {\n        const viewportHeight = Math.min(window.innerHeight, document.documentElement.clientHeight);\n        this.$.overlay.setAttribute('bottom-aligned', '');\n        this.$.overlay.style.removeProperty('top');\n        this.$.overlay.style.bottom = (viewportHeight - inputRect.top) + 'px';\n      } else {\n        this.$.overlay.removeAttribute('bottom-aligned');\n        this.$.overlay.style.removeProperty('bottom');\n        this.$.overlay.style.top = inputRect.bottom + 'px';\n      }\n    }\n\n    this.$.overlay.setAttribute('dir',\n      getComputedStyle(this._inputElement).getPropertyValue('direction')\n    );\n    this._overlayContent._repositionYearScroller();\n  }\n\n  _fullscreenChanged() {\n    if (this._overlayInitialized && this.$.overlay.opened) {\n      this._updateAlignmentAndPosition();\n    }\n  }\n\n  _onOverlayOpened() {\n    this._openedWithFocusRing = this.hasAttribute('focus-ring') || (this.focusElement && this.focusElement.hasAttribute('focus-ring'));\n\n    var parsedInitialPosition = this._parseDate(this.initialPosition);\n\n    var initialPosition = this._selectedDate || this._overlayContent.initialPosition ||\n      parsedInitialPosition || new Date();\n\n    if (parsedInitialPosition ||\n      DatePickerHelper._dateAllowed(initialPosition, this._minDate, this._maxDate)) {\n      this._overlayContent.initialPosition = initialPosition;\n    } else {\n      this._overlayContent.initialPosition =\n        DatePickerHelper._getClosestDate(initialPosition, [this._minDate, this._maxDate]);\n    }\n\n    this._overlayContent.scrollToDate(this._overlayContent.focusedDate || this._overlayContent.initialPosition);\n    // Have a default focused date\n    this._ignoreFocusedDateChange = true;\n    this._overlayContent.focusedDate = this._overlayContent.focusedDate || this._overlayContent.initialPosition;\n    this._ignoreFocusedDateChange = false;\n\n    window.addEventListener('scroll', this._boundOnScroll, true);\n    this.addEventListener('iron-resize', this._boundUpdateAlignmentAndPosition);\n\n    if (this._webkitOverflowScroll) {\n      this._touchPrevented = this._preventWebkitOverflowScrollingTouch(this.parentElement);\n    }\n\n    if (this._focusOverlayOnOpen) {\n      this._overlayContent.focus();\n      this._focusOverlayOnOpen = false;\n    } else {\n      this._focus();\n    }\n\n    if (this._noInput && this.focusElement) {\n      this.focusElement.blur();\n    }\n\n    this.updateStyles();\n\n    this._ignoreAnnounce = false;\n  }\n\n  // A hack needed for iOS to prevent dropdown from being clipped in an\n  // ancestor container with -webkit-overflow-scrolling: touch;\n  _preventWebkitOverflowScrollingTouch(element) {\n    var result = [];\n    while (element) {\n      if (window.getComputedStyle(element).webkitOverflowScrolling === 'touch') {\n        var oldInlineValue = element.style.webkitOverflowScrolling;\n        element.style.webkitOverflowScrolling = 'auto';\n        result.push({\n          element: element,\n          oldInlineValue: oldInlineValue\n        });\n      }\n      element = element.parentElement;\n    }\n    return result;\n  }\n\n  _onOverlayClosed() {\n    this._ignoreAnnounce = true;\n\n    window.removeEventListener('scroll', this._boundOnScroll, true);\n    this.removeEventListener('iron-resize', this._boundUpdateAlignmentAndPosition);\n\n    if (this._touchPrevented) {\n      this._touchPrevented.forEach(prevented =>\n        prevented.element.style.webkitOverflowScrolling = prevented.oldInlineValue);\n      this._touchPrevented = [];\n    }\n\n    this.updateStyles();\n\n    // Select the parsed input or focused date\n    this._ignoreFocusedDateChange = true;\n    if (this.i18n.parseDate) {\n      var inputValue = this._inputValue || '';\n      const dateObject = this.i18n.parseDate(inputValue);\n      const parsedDate = dateObject &&\n        this._parseDate(`${dateObject.year}-${dateObject.month + 1}-${dateObject.day}`);\n\n      if (this._isValidDate(parsedDate)) {\n        this._selectedDate = parsedDate;\n      } else {\n        this._selectedDate = null;\n        this._inputValue = inputValue;\n      }\n    } else if (this._focusedDate) {\n      this._selectedDate = this._focusedDate;\n    }\n    this._ignoreFocusedDateChange = false;\n\n    if (this._nativeInput && this._nativeInput.selectionStart) {\n      this._nativeInput.selectionStart = this._nativeInput.selectionEnd;\n    }\n    this.validate();\n  }\n\n  /**\n   * Returns true if `value` is valid, and sets the `invalid` flag appropriately.\n   *\n   * @param {string} value Value to validate. Optional, defaults to user's input value.\n   * @return {boolean} True if the value is valid and sets the `invalid` flag appropriately\n   */\n  validate(value) {\n    // reset invalid state on the underlying text field\n    this.invalid = false;\n    value = value !== undefined ? value : this._inputValue;\n    return !(this.invalid = !this.checkValidity(value));\n  }\n\n  /**\n   * Returns true if the current input value satisfies all constraints (if any)\n   *\n   * Override the `checkValidity` method for custom validations.\n   *\n   * @param {string} value Value to validate. Optional, defaults to the selected date.\n   * @return {boolean} True if the value is valid\n   */\n  checkValidity(value) {\n    var inputValid = !value ||\n      (this._selectedDate && value === this.i18n.formatDate(DatePickerHelper._extractDateParts(this._selectedDate)));\n    var minMaxValid = !this._selectedDate ||\n      DatePickerHelper._dateAllowed(this._selectedDate, this._minDate, this._maxDate);\n\n    var inputValidity = true;\n    if (this._inputElement) {\n      if (this._inputElement.checkValidity) {\n        // vaadin native input elements have the checkValidity method\n        inputValidity = this._inputElement.checkValidity(value);\n      } else if (this._inputElement.validate) {\n        // iron-form-elements have the validate API\n        inputValidity = this._inputElement.validate(value);\n      }\n    }\n\n    return inputValid && minMaxValid && inputValidity;\n  }\n\n  _onScroll(e) {\n    if (e.target === window || !this._overlayContent.contains(e.target)) {\n      this._updateAlignmentAndPosition();\n    }\n  }\n\n  _focus() {\n    if (this._noInput) {\n      this._overlayInitialized && this._overlayContent.focus();\n    } else {\n      this._inputElement.focus();\n    }\n  }\n\n  _focusAndSelect() {\n    this._focus();\n    this._setSelectionRange(0, this._inputValue.length);\n  }\n\n  _setSelectionRange(a, b) {\n    if (this._nativeInput && this._nativeInput.setSelectionRange) {\n      this._nativeInput.setSelectionRange(a, b);\n    }\n  }\n\n  /**\n   * Keyboard Navigation\n   */\n  _eventKey(e) {\n    var keys = ['down', 'up', 'enter', 'esc', 'tab'];\n\n    for (var i = 0; i < keys.length; i++) {\n      var k = keys[i];\n      if (IronA11yKeysBehavior.keyboardEventMatchesKeys(e, k)) {\n        return k;\n      }\n    }\n  }\n\n  _isValidDate(d) {\n    return d && !isNaN(d.getTime());\n  }\n\n  _onKeydown(e) {\n    if (this._noInput) {\n      // The input element cannot be readonly as it would conflict with\n      // the required attribute. Both are not allowed on an input element.\n      // Therefore we prevent default on most keydown events.\n      var allowedKeys = [\n        9 // tab\n      ];\n      if (allowedKeys.indexOf(e.keyCode) === -1) {\n        e.preventDefault();\n      }\n    }\n\n    switch (this._eventKey(e)) {\n      case 'down':\n      case 'up':\n        // prevent scrolling the page with arrows\n        e.preventDefault();\n\n        if (this.opened) {\n          this._overlayContent.focus();\n          this._overlayContent._onKeydown(e);\n        } else {\n          this._focusOverlayOnOpen = true;\n          this.open();\n        }\n\n        break;\n      case 'enter': {\n        const dateObject = this.i18n.parseDate(this._inputValue);\n        const parsedDate = dateObject &&\n          this._parseDate(dateObject.year + '-' + (dateObject.month + 1) + '-' + dateObject.day);\n\n        if (this._overlayInitialized && this._overlayContent.focusedDate && this._isValidDate(parsedDate)) {\n          this._selectedDate = this._overlayContent.focusedDate;\n        }\n        this.close();\n        break;\n      }\n      case 'esc':\n        this._focusedDate = this._selectedDate;\n        this._close();\n        break;\n      case 'tab':\n        if (this.opened) {\n          e.preventDefault();\n          // Clear the selection range (remains visible on IE)\n          this._setSelectionRange(0, 0);\n          if (e.shiftKey) {\n            this._overlayContent.focusCancel();\n          } else {\n            this._overlayContent.focus();\n            this._overlayContent.revealDate(this._focusedDate);\n          }\n\n        }\n        break;\n    }\n  }\n\n  _validateInput(date, min, max) {\n    if (date && (min || max)) {\n      this.invalid = !DatePickerHelper._dateAllowed(date, min, max);\n    }\n  }\n\n  _onUserInput(e) {\n    if (!this.opened && this._inputElement.value) {\n      this.open();\n    }\n    this._userInputValueChanged();\n  }\n\n  _userInputValueChanged(value) {\n    if (this.opened && this._inputValue) {\n      const dateObject = this.i18n.parseDate && this.i18n.parseDate(this._inputValue);\n      const parsedDate = dateObject &&\n        this._parseDate(`${dateObject.year}-${dateObject.month + 1}-${dateObject.day}`);\n\n      if (this._isValidDate(parsedDate)) {\n        this._ignoreFocusedDateChange = true;\n        if (!DatePickerHelper._dateEquals(parsedDate, this._focusedDate)) {\n          this._focusedDate = parsedDate;\n        }\n        this._ignoreFocusedDateChange = false;\n      }\n    }\n  }\n\n  _announceFocusedDate(_focusedDate, opened, _ignoreAnnounce) {\n    if (opened && !_ignoreAnnounce) {\n      this._overlayContent.announceFocusedDate();\n    }\n  }\n\n  get _overlayContent() {\n    return this.$.overlay.content.querySelector('#overlay-content');\n  }\n\n  /**\n   * Fired when the user commits a value change.\n   *\n   * @event change\n   */\n};\n","/**\n@license\nCopyright (c) 2017 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport { GestureEventListeners } from '@polymer/polymer/lib/mixins/gesture-event-listeners.js';\nimport '@polymer/iron-media-query/iron-media-query.js';\nimport { ThemableMixin } from '@vaadin/vaadin-themable-mixin/vaadin-themable-mixin.js';\nimport { ThemePropertyMixin } from '@vaadin/vaadin-themable-mixin/vaadin-theme-property-mixin.js';\nimport { ControlStateMixin } from '@vaadin/vaadin-control-state-mixin/vaadin-control-state-mixin.js';\nimport './vaadin-date-picker-overlay.js';\nimport './vaadin-date-picker-overlay-content.js';\nimport { DatePickerMixin } from './vaadin-date-picker-mixin.js';\nimport '@vaadin/vaadin-text-field/src/vaadin-text-field.js';\nimport { ElementMixin } from '@vaadin/vaadin-element-mixin/vaadin-element-mixin.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { afterNextRender } from '@polymer/polymer/lib/utils/render-status.js';\n/**\n *\n * `<vaadin-date-picker>` is a date selection field which includes a scrollable\n * month calendar view.\n * ```html\n * <vaadin-date-picker label=\"Birthday\"></vaadin-date-picker>\n * ```\n * ```js\n * datePicker.value = '2016-03-02';\n * ```\n * When the selected `value` is changed, a `value-changed` event is triggered.\n *\n *\n * ### Styling\n *\n * The following shadow DOM parts are available for styling:\n *\n * Part name | Description | Theme for Element\n * ----------------|----------------|----------------\n * `text-field` | Input element | vaadin-date-picker\n * `clear-button` | Clear button | vaadin-date-picker\n * `toggle-button` | Toggle button | vaadin-date-picker\n * `overlay-content` | The overlay element | vaadin-date-picker\n * `overlay-header` | Fullscreen mode header | vaadin-date-picker-overlay-content\n * `label` | Fullscreen mode value/label | vaadin-date-picker-overlay-content\n * `clear-button` | Fullscreen mode clear button | vaadin-date-picker-overlay-content\n * `toggle-button` | Fullscreen mode toggle button | vaadin-date-picker-overlay-content\n * `years-toggle-button` | Fullscreen mode years scroller toggle | vaadin-date-picker-overlay-content\n * `months` | Months scroller | vaadin-date-picker-overlay-content\n * `years` | Years scroller | vaadin-date-picker-overlay-content\n * `toolbar` | Footer bar with buttons | vaadin-date-picker-overlay-content\n * `today-button` | Today button | vaadin-date-picker-overlay-content\n * `cancel-button` | Cancel button | vaadin-date-picker-overlay-content\n * `month` | Month calendar | vaadin-date-picker-overlay-content\n * `year-number` | Year number | vaadin-date-picker-overlay-content\n * `year-separator` | Year separator | vaadin-date-picker-overlay-content\n * `month-header` | Month title | vaadin-month-calendar\n * `weekdays` | Weekday container | vaadin-month-calendar\n * `weekday` | Weekday element | vaadin-month-calendar\n * `week-numbers` | Week numbers container | vaadin-month-calendar\n * `week-number` | Week number element | vaadin-month-calendar\n * `date` | Date element | vaadin-month-calendar\n *\n * See [ThemableMixin – how to apply styles for shadow parts](https://github.com/vaadin/vaadin-themable-mixin/wiki)\n *\n * The following state attributes are available for styling:\n *\n * Attribute    | Description | Part name\n * -------------|-------------|------------\n * `invalid` | Set when the element is invalid | :host\n * `opened` | Set when the date selector overlay is opened | :host\n * `readonly` | Set when the element is readonly | :host\n * `disabled` | Set when the element is disabled | :host\n * `today` | Set on the date corresponding to the current day | date\n * `focused` | Set on the focused date | date\n * `disabled` | Set on the date out of the allowed range | date\n * `selected` | Set on the selected date | date\n *\n * If you want to replace the default input field with a custom implementation, you should use the\n * [`<vaadin-date-picker-light>`](#vaadin-date-picker-light) element.\n *\n * In addition to `<vaadin-date-picker>` itself, the following internal\n * components are themable:\n *\n * - `<vaadin-text-field>`\n * - `<vaadin-date-picker-overlay>`\n * - `<vaadin-date-picker-overlay-content>`\n * - `<vaadin-month-calendar>`\n *\n * Note: the `theme` attribute value set on `<vaadin-date-picker>` is\n * propagated to the internal themable components listed above.\n *\n * @memberof Vaadin\n * @mixes Vaadin.ElementMixin\n * @mixes Vaadin.ControlStateMixin\n * @mixes Vaadin.ThemableMixin\n * @mixes Vaadin.ThemePropertyMixin\n * @mixes Vaadin.DatePickerMixin\n * @mixes Polymer.GestureEventListeners\n * @demo demo/index.html\n */\nclass DatePickerElement extends\n  ElementMixin(\n    ControlStateMixin(\n      ThemableMixin(\n        ThemePropertyMixin(\n          DatePickerMixin(\n            GestureEventListeners(PolymerElement)))))) {\n  static get template() {\n    return html`\n    <style>\n      :host {\n        display: inline-block;\n      }\n\n      :host([hidden]) {\n        display: none !important;\n      }\n\n      :host([opened]) {\n        pointer-events: auto;\n      }\n\n      [part=\"text-field\"] {\n        width: 100%;\n        min-width: 0;\n      }\n    </style>\n\n\n    <vaadin-text-field id=\"input\" role=\"application\" autocomplete=\"off\" on-focus=\"_focus\" value=\"{{_userInputValue}}\" invalid=\"[[invalid]]\" label=\"[[label]]\" name=\"[[name]]\" placeholder=\"[[placeholder]]\" required=\"[[required]]\" disabled=\"[[disabled]]\" readonly=\"[[readonly]]\" error-message=\"[[errorMessage]]\" clear-button-visible=\"[[clearButtonVisible]]\" aria-label\\$=\"[[label]]\" part=\"text-field\" theme\\$=\"[[theme]]\">\n      <slot name=\"prefix\" slot=\"prefix\"></slot>\n      <div part=\"toggle-button\" slot=\"suffix\" on-tap=\"_toggle\" role=\"button\" aria-label\\$=\"[[i18n.calendar]]\" aria-expanded\\$=\"[[_getAriaExpanded(opened)]]\"></div>\n    </vaadin-text-field>\n\n    <vaadin-date-picker-overlay id=\"overlay\" fullscreen\\$=\"[[_fullscreen]]\" theme\\$=\"[[__getOverlayTheme(theme, _overlayInitialized)]]\" on-vaadin-overlay-open=\"_onOverlayOpened\" on-vaadin-overlay-close=\"_onOverlayClosed\" disable-upgrade=\"\">\n      <template>\n        <vaadin-date-picker-overlay-content id=\"overlay-content\" i18n=\"[[i18n]]\" fullscreen\\$=\"[[_fullscreen]]\" label=\"[[label]]\" selected-date=\"{{_selectedDate}}\" slot=\"dropdown-content\" focused-date=\"{{_focusedDate}}\" show-week-numbers=\"[[showWeekNumbers]]\" min-date=\"[[_minDate]]\" max-date=\"[[_maxDate]]\" role=\"dialog\" on-date-tap=\"_close\" part=\"overlay-content\" theme\\$=\"[[__getOverlayTheme(theme, _overlayInitialized)]]\">\n        </vaadin-date-picker-overlay-content>\n      </template>\n    </vaadin-date-picker-overlay>\n\n    <iron-media-query query=\"[[_fullscreenMediaQuery]]\" query-matches=\"{{_fullscreen}}\">\n    </iron-media-query>\n`;\n  }\n\n  static get is() {\n    return 'vaadin-date-picker';\n  }\n\n  static get version() {\n    return '4.0.5';\n  }\n\n  static get properties() {\n    return {\n      /**\n       * Set to true to display the clear icon which clears the input.\n       */\n      clearButtonVisible: {\n        type: Boolean,\n        value: false\n      },\n\n      /**\n       * Set to true to disable this element.\n       */\n      disabled: {\n        type: Boolean,\n        value: false,\n        reflectToAttribute: true\n      },\n\n      /**\n       * The error message to display when the input is invalid.\n       */\n      errorMessage: String,\n\n      /**\n       * A placeholder string in addition to the label. If this is set, the label will always float.\n       */\n      placeholder: String,\n\n      /**\n       * Set to true to make this element read-only.\n       */\n      readonly: {\n        type: Boolean,\n        value: false,\n        reflectToAttribute: true\n      },\n\n      /**\n       * This property is set to true when the control value invalid.\n       */\n      invalid: {\n        type: Boolean,\n        reflectToAttribute: true,\n        notify: true,\n        value: false\n      },\n\n      _userInputValue: String\n    };\n  }\n\n  static get observers() {\n    return [\n      '_userInputValueChanged(_userInputValue)',\n      '_setClearButtonLabel(i18n.clear)'\n    ];\n  }\n\n  ready() {\n    super.ready();\n\n    // In order to have synchronized invalid property, we need to use the same validate logic.\n    afterNextRender(this, () => this._inputElement.validate = () => {});\n\n    // FIXME(platosha): dispatch `input` event on\n    // <vaadin-text-field> clear button\n    // https://github.com/vaadin/vaadin-text-field/issues/347\n    this._inputElement.addEventListener('change', () => {\n      if (this._inputElement.value === '') {\n        this.__dispatchChange = true;\n        this.value = '';\n        this.validate();\n        this.__dispatchChange = false;\n      }\n    });\n  }\n\n  _onVaadinOverlayClose(e) {\n    if (this._openedWithFocusRing && this.hasAttribute('focused')) {\n      this.focusElement.setAttribute('focus-ring', '');\n    } else if (!this.hasAttribute('focused')) {\n      this.focusElement.blur();\n    }\n    if (e.detail.sourceEvent && e.detail.sourceEvent.composedPath().indexOf(this) !== -1) {\n      e.preventDefault();\n    }\n  }\n\n  _toggle(e) {\n    e.stopPropagation();\n    this[(this._overlayInitialized && this.$.overlay.opened) ? 'close' : 'open']();\n  }\n\n  _input() {\n    return this.$.input;\n  }\n\n  set _inputValue(value) {\n    this._inputElement.value = value;\n  }\n\n  get _inputValue() {\n    return this._inputElement.value;\n  }\n\n  _getAriaExpanded(opened) {\n    return Boolean(opened).toString();\n  }\n\n  /**\n   * Focussable element used by vaadin-control-state-mixin\n   */\n  get focusElement() {\n    return this._input() || this;\n  }\n\n  _setClearButtonLabel(i18nClear) {\n    // FIXME(platosha): expose i18n API in <vaadin-text-field>\n    // https://github.com/vaadin/vaadin-text-field/issues/348\n    this._inputElement.shadowRoot.querySelector('[part=\"clear-button\"]')\n      .setAttribute('aria-label', i18nClear);\n  }\n}\n\ncustomElements.define(DatePickerElement.is, DatePickerElement);\n\nexport { DatePickerElement };\n","const documentContainer = document.createElement(\"template\");\ndocumentContainer.setAttribute(\"style\", \"display: none;\");\n\ndocumentContainer.innerHTML = `\n<dom-module id=\"ha-date-picker-text-field-styles\" theme-for=\"vaadin-text-field\">\n  <template>\n    <style>\n      :host {\n        padding: 8px 0;\n      }\n\n      [part~=\"label\"] {\n        top: 6px;\n        font-size: var(--paper-font-subhead_-_font-size);\n        color: var(--paper-input-container-color, var(--secondary-text-color));\n      }\n\n      :host([focused]) [part~=\"label\"] {\n        color: var(--paper-input-container-focus-color, var(--primary-color));\n      }\n\n      [part~=\"input-field\"] {\n        color: var(--primary-text-color);\n        top: 3px;\n      }\n\n      [part~=\"input-field\"]::before, [part~=\"input-field\"]::after {\n        background-color: var(--paper-input-container-color, var(--secondary-text-color));\n        opacity: 1;\n      }\n\n      :host([focused]) [part~=\"input-field\"]::before, :host([focused]) [part~=\"input-field\"]::after {\n        background-color: var(--paper-input-container-focus-color, var(--primary-color));\n      }\n\n      [part~=\"value\"] {\n        font-size: var(--paper-font-subhead_-_font-size);\n      }\n    </style>\n  </template>\n</dom-module>\n<dom-module id=\"ha-date-picker-button-styles\" theme-for=\"vaadin-button\">\n  <template>\n    <style>\n      :host([part~=\"today-button\"]) [part~=\"button\"]::before {\n        content: \"⦿\";\n        color: var(--primary-color);\n      }\n\n      [part~=\"button\"] {\n        font-family: inherit;\n        font-size: var(--paper-font-subhead_-_font-size);\n        border: none;\n        background: transparent;\n        cursor: pointer;\n        min-height: var(--paper-item-min-height, 48px);\n        padding: 0px 16px;\n        color: inherit;\n      }\n\n      [part~=\"button\"]:focus {\n        outline: none;\n      }\n    </style>\n  </template>\n</dom-module>\n<dom-module id=\"ha-date-picker-overlay-styles\" theme-for=\"vaadin-date-picker-overlay\">\n  <template>\n    <style include=\"vaadin-date-picker-overlay-default-theme\">\n      [part~=\"toolbar\"] {\n        padding: 0.3em;\n        background-color: var(--secondary-background-color);\n      }\n\n      [part=\"years\"] {\n        background-color: var(--secondary-text-color);\n        --material-body-text-color: var(--primary-background-color);\n      }\n\n      [part=\"overlay\"] {\n        background-color: var(--primary-background-color);\n        --material-body-text-color: var(--secondary-text-color);\n      }\n\n    </style>\n  </template>\n</dom-module>\n<dom-module id=\"ha-date-picker-month-styles\" theme-for=\"vaadin-month-calendar\">\n  <template>\n    <style include=\"vaadin-month-calendar-default-theme\">\n      [part=\"date\"][today] {\n        color: var(--primary-color);\n      }\n    </style>\n  </template>\n</dom-module>\n`;\n\ndocument.head.appendChild(documentContainer.content);\n","import { Layout1dBase } from './Layout1dBase.js';\nexport class Layout1d extends Layout1dBase {\n    constructor(config) {\n        super(config);\n        /**\n         * Indices of children mapped to their (position and length) in the scrolling\n         * direction. Used to keep track of children that are in range.\n         */\n        this._physicalItems = new Map();\n        /**\n         * Used in tandem with _physicalItems to track children in range across\n         * reflows.\n         */\n        this._newPhysicalItems = new Map();\n        /**\n         * Width and height of children by their index.\n         */\n        this._metrics = new Map();\n        /**\n         * anchorIdx is the anchor around which we reflow. It is designed to allow\n         * jumping to any point of the scroll size. We choose it once and stick with\n         * it until stable. _first and _last are deduced around it.\n         */\n        this._anchorIdx = null;\n        /**\n         * Position in the scrolling direction of the anchor child.\n         */\n        this._anchorPos = null;\n        /**\n         * Whether all children in range were in range during the previous reflow.\n         */\n        this._stable = true;\n        /**\n         * Whether to remeasure children during the next reflow.\n         */\n        this._needsRemeasure = false;\n        /**\n         * Number of children to lay out.\n         */\n        this._nMeasured = 0;\n        /**\n         * Total length in the scrolling direction of the laid out children.\n         */\n        this._tMeasured = 0;\n        this._estimate = true;\n    }\n    /**\n     * Determine the average size of all children represented in the sizes\n     * argument.\n     */\n    updateItemSizes(sizes) {\n        Object.keys(sizes).forEach((key) => {\n            const metrics = sizes[key], mi = this._getMetrics(Number(key)), prevSize = mi[this._sizeDim];\n            // TODO(valdrin) Handle margin collapsing.\n            // https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Box_Model/Mastering_margin_collapsing\n            mi.width = metrics.width + (metrics.marginLeft || 0) +\n                (metrics.marginRight || 0);\n            mi.height = metrics.height + (metrics.marginTop || 0) +\n                (metrics.marginBottom || 0);\n            const size = mi[this._sizeDim];\n            const item = this._getPhysicalItem(Number(key));\n            if (item) {\n                let delta;\n                if (size !== undefined) {\n                    item.size = size;\n                    if (prevSize === undefined) {\n                        delta = size;\n                        this._nMeasured++;\n                    }\n                    else {\n                        delta = size - prevSize;\n                    }\n                }\n                this._tMeasured = this._tMeasured + delta;\n            }\n        });\n        if (!this._nMeasured) {\n            console.warn(`No items measured yet.`);\n        }\n        else {\n            this._updateItemSize();\n            this._scheduleReflow();\n        }\n    }\n    /**\n     * Set the average item size based on the total length and number of children\n     * in range.\n     */\n    _updateItemSize() {\n        // Keep integer values.\n        this._itemSize[this._sizeDim] =\n            Math.round(this._tMeasured / this._nMeasured);\n    }\n    _getMetrics(idx) {\n        return (this._metrics[idx] = this._metrics[idx] || {});\n    }\n    _getPhysicalItem(idx) {\n        return this._newPhysicalItems.get(idx) || this._physicalItems.get(idx);\n    }\n    _getSize(idx) {\n        const item = this._getPhysicalItem(idx);\n        return item && item.size;\n    }\n    /**\n     * Returns the position in the scrolling direction of the item at idx.\n     * Estimates it if the item at idx is not in the DOM.\n     */\n    _getPosition(idx) {\n        const item = this._physicalItems.get(idx);\n        return item ? item.pos : (idx * (this._delta)) + this._spacing;\n    }\n    _calculateAnchor(lower, upper) {\n        if (lower === 0) {\n            return 0;\n        }\n        if (upper > this._scrollSize - this._viewDim1) {\n            return this._totalItems - 1;\n        }\n        return Math.max(0, Math.min(this._totalItems - 1, Math.floor(((lower + upper) / 2) / this._delta)));\n    }\n    _getAnchor(lower, upper) {\n        if (this._physicalItems.size === 0) {\n            return this._calculateAnchor(lower, upper);\n        }\n        if (this._first < 0) {\n            console.error('_getAnchor: negative _first');\n            return this._calculateAnchor(lower, upper);\n        }\n        if (this._last < 0) {\n            console.error('_getAnchor: negative _last');\n            return this._calculateAnchor(lower, upper);\n        }\n        const firstItem = this._getPhysicalItem(this._first), lastItem = this._getPhysicalItem(this._last), firstMin = firstItem.pos, firstMax = firstMin + firstItem.size, lastMin = lastItem.pos, lastMax = lastMin + lastItem.size;\n        if (lastMax < lower) {\n            // Window is entirely past physical items, calculate new anchor\n            return this._calculateAnchor(lower, upper);\n        }\n        if (firstMin > upper) {\n            // Window is entirely before physical items, calculate new anchor\n            return this._calculateAnchor(lower, upper);\n        }\n        if (firstMin >= lower || firstMax >= lower) {\n            // First physical item overlaps window, choose it\n            return this._first;\n        }\n        if (lastMax <= upper || lastMin <= upper) {\n            // Last physical overlaps window, choose it\n            return this._last;\n        }\n        // Window contains a physical item, but not the first or last\n        let maxIdx = this._last, minIdx = this._first;\n        while (true) {\n            const candidateIdx = Math.round((maxIdx + minIdx) / 2), candidate = this._physicalItems.get(candidateIdx), cMin = candidate.pos, cMax = cMin + candidate.size;\n            if ((cMin >= lower && cMin <= upper) ||\n                (cMax >= lower && cMax <= upper)) {\n                return candidateIdx;\n            }\n            else if (cMax < lower) {\n                minIdx = candidateIdx + 1;\n            }\n            else if (cMin > upper) {\n                maxIdx = candidateIdx - 1;\n            }\n        }\n    }\n    /**\n     * Updates _first and _last based on items that should be in the current\n     * viewed range.\n     */\n    _getActiveItems() {\n        if (this._viewDim1 === 0 || this._totalItems === 0) {\n            this._clearItems();\n        }\n        else {\n            const upper = Math.min(this._scrollSize, this._scrollPosition + this._viewDim1 + this._overhang), lower = Math.max(0, upper - this._viewDim1 - (2 * this._overhang));\n            this._getItems(lower, upper);\n        }\n    }\n    /**\n     * Sets the range to empty.\n     */\n    _clearItems() {\n        this._first = -1;\n        this._last = -1;\n        this._physicalMin = 0;\n        this._physicalMax = 0;\n        const items = this._newPhysicalItems;\n        this._newPhysicalItems = this._physicalItems;\n        this._newPhysicalItems.clear();\n        this._physicalItems = items;\n        this._stable = true;\n    }\n    /*\n     * Updates _first and _last based on items that should be in the given range.\n     */\n    _getItems(lower, upper) {\n        const items = this._newPhysicalItems;\n        // The anchorIdx is the anchor around which we reflow. It is designed to\n        // allow jumping to any point of the scroll size. We choose it once and\n        // stick with it until stable. first and last are deduced around it.\n        if (this._anchorIdx === null || this._anchorPos === null) {\n            this._anchorIdx = this._getAnchor(lower, upper);\n            this._anchorPos = this._getPosition(this._anchorIdx);\n        }\n        let anchorSize = this._getSize(this._anchorIdx);\n        if (anchorSize === undefined) {\n            anchorSize = this._itemDim1;\n        }\n        // Anchor might be outside bounds, so prefer correcting the error and keep\n        // that anchorIdx.\n        let anchorErr = 0;\n        if (this._anchorPos + anchorSize + this._spacing < lower) {\n            anchorErr = lower - (this._anchorPos + anchorSize + this._spacing);\n        }\n        if (this._anchorPos > upper) {\n            anchorErr = upper - this._anchorPos;\n        }\n        if (anchorErr) {\n            this._scrollPosition -= anchorErr;\n            lower -= anchorErr;\n            upper -= anchorErr;\n            this._scrollError += anchorErr;\n        }\n        // TODO @straversi: If size is always itemDim1, then why keep track of it?\n        items.set(this._anchorIdx, { pos: this._anchorPos, size: anchorSize });\n        this._first = (this._last = this._anchorIdx);\n        this._physicalMin = (this._physicalMax = this._anchorPos);\n        this._stable = true;\n        while (this._physicalMin > lower && this._first > 0) {\n            let size = this._getSize(--this._first);\n            if (size === undefined) {\n                this._stable = false;\n                size = this._itemDim1;\n            }\n            const pos = (this._physicalMin -= size + this._spacing);\n            items.set(this._first, { pos, size });\n            if (this._stable === false && this._estimate === false) {\n                break;\n            }\n        }\n        while (this._physicalMax < upper && this._last < this._totalItems) {\n            let size = this._getSize(this._last);\n            if (size === undefined) {\n                this._stable = false;\n                size = this._itemDim1;\n            }\n            items.set(this._last++, { pos: this._physicalMax, size });\n            if (this._stable === false && this._estimate === false) {\n                break;\n            }\n            else {\n                this._physicalMax += size + this._spacing;\n            }\n        }\n        this._last--;\n        // This handles the cases where we were relying on estimated sizes.\n        const extentErr = this._calculateError();\n        if (extentErr) {\n            this._physicalMin -= extentErr;\n            this._physicalMax -= extentErr;\n            this._anchorPos -= extentErr;\n            this._scrollPosition -= extentErr;\n            items.forEach((item) => item.pos -= extentErr);\n            this._scrollError += extentErr;\n        }\n        if (this._stable) {\n            this._newPhysicalItems = this._physicalItems;\n            this._newPhysicalItems.clear();\n            this._physicalItems = items;\n        }\n    }\n    _calculateError() {\n        if (this._first === 0) {\n            return this._physicalMin;\n        }\n        else if (this._physicalMin <= 0) {\n            return this._physicalMin - (this._first * this._delta);\n        }\n        else if (this._last === this._totalItems - 1) {\n            return this._physicalMax - this._scrollSize;\n        }\n        else if (this._physicalMax >= this._scrollSize) {\n            return ((this._physicalMax - this._scrollSize) +\n                ((this._totalItems - 1 - this._last) * this._delta));\n        }\n        return 0;\n    }\n    _updateScrollSize() {\n        // Reuse previously calculated physical max, as it might be higher than the\n        // estimated size.\n        super._updateScrollSize();\n        this._scrollSize = Math.max(this._physicalMax, this._scrollSize);\n    }\n    // TODO: Can this be made to inherit from base, with proper hooks?\n    _reflow() {\n        const { _first, _last, _scrollSize } = this;\n        this._updateScrollSize();\n        this._getActiveItems();\n        this._scrollIfNeeded();\n        if (this._scrollSize !== _scrollSize) {\n            this._emitScrollSize();\n        }\n        this._updateVisibleIndices();\n        this._emitRange();\n        if (this._first === -1 && this._last === -1) {\n            this._resetReflowState();\n        }\n        else if (this._first !== _first || this._last !== _last ||\n            this._needsRemeasure) {\n            this._emitChildPositions();\n            this._emitScrollError();\n        }\n        else {\n            this._emitChildPositions();\n            this._emitScrollError();\n            this._resetReflowState();\n        }\n    }\n    _resetReflowState() {\n        this._anchorIdx = null;\n        this._anchorPos = null;\n        this._stable = true;\n    }\n    /**\n     * Returns the top and left positioning of the item at idx.\n     */\n    _getItemPosition(idx) {\n        return {\n            [this._positionDim]: this._getPosition(idx),\n            [this._secondaryPositionDim]: 0,\n        };\n    }\n    /**\n     * Returns the height and width of the item at idx.\n     */\n    _getItemSize(idx) {\n        return {\n            [this._sizeDim]: this._getSize(idx) || this._itemDim1,\n            [this._secondarySizeDim]: this._itemDim2,\n        };\n    }\n    _viewDim2Changed() {\n        this._needsRemeasure = true;\n        this._scheduleReflow();\n    }\n    _emitRange() {\n        const remeasure = this._needsRemeasure;\n        const stable = this._stable;\n        this._needsRemeasure = false;\n        super._emitRange({ remeasure, stable });\n    }\n}\n","let ET;\nexport default async function EventTarget() {\n    return ET || init();\n}\nasync function init() {\n    ET = window.EventTarget;\n    try {\n        new ET();\n    }\n    catch (_a) {\n        ET = (await import('event-target-shim')).EventTarget;\n    }\n    return ET;\n}\n","import EventTarget from '../polyfillLoaders/EventTarget.js';\nexport class Layout1dBase {\n    constructor(config) {\n        /**\n         * The last set viewport scroll position.\n         */\n        this._latestCoords = { left: 0, top: 0 };\n        /**\n         * Scrolling direction.\n         */\n        this._direction = 'vertical';\n        /**\n         * Dimensions of the viewport.\n         */\n        this._viewportSize = { width: 0, height: 0 };\n        /**\n         * Flag for debouncing asynchnronous reflow requests.\n         */\n        this._pendingReflow = false;\n        /**\n         * Index of the item that has been scrolled to via the public API. When the\n         * container is otherwise scrolled, this value is set back to -1.\n         */\n        this._scrollToIndex = -1;\n        /**\n         * When a child is scrolled to, the offset from the top of the child and the\n         * top of the viewport. Value is a proportion of the item size.\n         */\n        this._scrollToAnchor = 0;\n        this._eventTargetPromise = (EventTarget().then((Ctor) => this._eventTarget = new Ctor()));\n        /**\n         * Pixel offset in the scroll direction of the first child.\n         */\n        this._physicalMin = 0;\n        /**\n         * Pixel offset in the scroll direction of the last child.\n         */\n        this._physicalMax = 0;\n        /**\n         * Index of the first child.\n         */\n        this._first = -1;\n        /**\n         * Index of the last child.\n         */\n        this._last = -1;\n        /**\n         * The _estimated_ size of a child.\n         */\n        this._itemSize = { width: 100, height: 100 };\n        /**\n         * Space in pixels between children.\n         */\n        this._spacing = 0;\n        /**\n         * Length in the scrolling direction.\n         */\n        this._sizeDim = 'height';\n        /**\n         * Length in the non-scrolling direction.\n         */\n        this._secondarySizeDim = 'width';\n        /**\n         * Position in the scrolling direction.\n         */\n        this._positionDim = 'top';\n        /**\n         * Position in the non-scrolling direction.\n         */\n        this._secondaryPositionDim = 'left';\n        /**\n         * Current scroll offset in pixels.\n         */\n        this._scrollPosition = 0;\n        /**\n         * Difference between current scroll offset and scroll offset calculated due\n         * to a reflow.\n         */\n        this._scrollError = 0;\n        /**\n         * Total number of items that could possibly be displayed. Used to help\n         * calculate the scroll size.\n         */\n        this._totalItems = 0;\n        /**\n         * The total (estimated) length of all items in the scrolling direction.\n         */\n        this._scrollSize = 1;\n        /**\n         * Number of pixels beyond the visible size of the container to still include\n         * in the active range of items.\n         */\n        this._overhang = 150;\n        Object.assign(this, config);\n    }\n    /**\n     * Maximum index of children + 1, to help estimate total height of the scroll\n     * space.\n     */\n    get totalItems() {\n        return this._totalItems;\n    }\n    set totalItems(num) {\n        if (num !== this._totalItems) {\n            this._totalItems = num;\n            this._scheduleReflow();\n        }\n    }\n    /**\n     * Primary scrolling direction.\n     */\n    get direction() {\n        return this._direction;\n    }\n    set direction(dir) {\n        // Force it to be either horizontal or vertical.\n        dir = (dir === 'horizontal') ? dir : 'vertical';\n        if (dir !== this._direction) {\n            this._direction = dir;\n            this._sizeDim = (dir === 'horizontal') ? 'width' : 'height';\n            this._secondarySizeDim = (dir === 'horizontal') ? 'height' : 'width';\n            this._positionDim = (dir === 'horizontal') ? 'left' : 'top';\n            this._secondaryPositionDim = (dir === 'horizontal') ? 'top' : 'left';\n            this._scheduleReflow();\n        }\n    }\n    /**\n     * Estimate of the dimensions of a single child.\n     */\n    get itemSize() {\n        return this._itemSize;\n    }\n    set itemSize(dims) {\n        const { _itemDim1, _itemDim2 } = this;\n        Object.assign(this._itemSize, dims);\n        if (_itemDim1 !== this._itemDim1 || _itemDim2 !== this._itemDim2) {\n            if (_itemDim2 !== this._itemDim2) {\n                this._itemDim2Changed();\n            }\n            else {\n                this._scheduleReflow();\n            }\n        }\n    }\n    /**\n     * Amount of space in between items.\n     */\n    get spacing() {\n        return this._spacing;\n    }\n    set spacing(px) {\n        if (px !== this._spacing) {\n            this._spacing = px;\n            this._scheduleReflow();\n        }\n    }\n    /**\n     * Height and width of the viewport.\n     */\n    get viewportSize() {\n        return this._viewportSize;\n    }\n    set viewportSize(dims) {\n        const { _viewDim1, _viewDim2 } = this;\n        Object.assign(this._viewportSize, dims);\n        if (_viewDim2 !== this._viewDim2) {\n            this._viewDim2Changed();\n        }\n        else if (_viewDim1 !== this._viewDim1) {\n            this._checkThresholds();\n        }\n    }\n    /**\n     * Scroll offset of the viewport.\n     */\n    get viewportScroll() {\n        return this._latestCoords;\n    }\n    set viewportScroll(coords) {\n        Object.assign(this._latestCoords, coords);\n        const oldPos = this._scrollPosition;\n        this._scrollPosition = this._latestCoords[this._positionDim];\n        if (oldPos !== this._scrollPosition) {\n            this._scrollPositionChanged(oldPos, this._scrollPosition);\n            this._updateVisibleIndices();\n        }\n        this._checkThresholds();\n    }\n    /**\n     * Perform a reflow if one has been scheduled.\n     */\n    reflowIfNeeded() {\n        if (this._pendingReflow) {\n            this._pendingReflow = false;\n            this._reflow();\n        }\n    }\n    /**\n     * Scroll to the child at the given index, and the given position within that\n     * child.\n     */\n    scrollToIndex(index, position = 'start') {\n        if (!Number.isFinite(index))\n            return;\n        index = Math.min(this.totalItems, Math.max(0, index));\n        this._scrollToIndex = index;\n        if (position === 'nearest') {\n            position = index > this._first + this._num / 2 ? 'end' : 'start';\n        }\n        switch (position) {\n            case 'start':\n                this._scrollToAnchor = 0;\n                break;\n            case 'center':\n                this._scrollToAnchor = 0.5;\n                break;\n            case 'end':\n                this._scrollToAnchor = 1;\n                break;\n            default:\n                throw new TypeError('position must be one of: start, center, end, nearest');\n        }\n        this._scheduleReflow();\n        this.reflowIfNeeded();\n    }\n    async dispatchEvent(...args) {\n        await this._eventTargetPromise;\n        this._eventTarget.dispatchEvent(...args);\n    }\n    async addEventListener(...args) {\n        await this._eventTargetPromise;\n        this._eventTarget.addEventListener(...args);\n    }\n    async removeEventListener(...args) {\n        await this._eventTargetPromise;\n        this._eventTarget.removeEventListener(...args);\n    }\n    updateItemSizes(_sizes) {\n        // Override\n    }\n    _itemDim2Changed() {\n        // Override\n    }\n    _viewDim2Changed() {\n        // Override\n    }\n    _getItemSize(_idx) {\n        return {\n            [this._sizeDim]: this._itemDim1,\n            [this._secondarySizeDim]: this._itemDim2,\n        };\n    }\n    /**\n     * The size of an item in the scrolling direction + space between items.\n     */\n    get _delta() {\n        return this._itemDim1 + this._spacing;\n    }\n    /**\n     * The height or width of an item, whichever corresponds to the scrolling direction.\n     */\n    get _itemDim1() {\n        return this._itemSize[this._sizeDim];\n    }\n    /**\n     * The height or width of an item, whichever does NOT correspond to the scrolling direction.\n     */\n    get _itemDim2() {\n        return this._itemSize[this._secondarySizeDim];\n    }\n    /**\n     * The height or width of the viewport, whichever corresponds to the scrolling direction.\n     */\n    get _viewDim1() {\n        return this._viewportSize[this._sizeDim];\n    }\n    /**\n     * The height or width of the viewport, whichever does NOT correspond to the scrolling direction.\n     */\n    get _viewDim2() {\n        return this._viewportSize[this._secondarySizeDim];\n    }\n    _scheduleReflow() {\n        this._pendingReflow = true;\n    }\n    _reflow() {\n        const { _first, _last, _scrollSize } = this;\n        this._updateScrollSize();\n        this._getActiveItems();\n        this._scrollIfNeeded();\n        if (this._scrollSize !== _scrollSize) {\n            this._emitScrollSize();\n        }\n        if (this._first === -1 && this._last === -1) {\n            // TODO: have default empty object for emitRange instead\n            this._emitRange();\n        }\n        else if (this._first !== _first || this._last !== _last ||\n            this._spacingChanged) {\n            // TODO: have default empty object for emitRange instead\n            this._emitRange();\n            this._emitChildPositions();\n        }\n        this._emitScrollError();\n    }\n    /**\n     * Estimates the total length of all items in the scrolling direction, including spacing.\n     */\n    _updateScrollSize() {\n        // Ensure we have at least 1px - this allows getting at least 1 item to be\n        // rendered.\n        this._scrollSize = Math.max(1, this._totalItems * this._delta);\n    }\n    _scrollIfNeeded() {\n        if (this._scrollToIndex === -1) {\n            return;\n        }\n        const index = this._scrollToIndex;\n        const anchor = this._scrollToAnchor;\n        const pos = this._getItemPosition(index)[this._positionDim];\n        const size = this._getItemSize(index)[this._sizeDim];\n        const curAnchorPos = this._scrollPosition + this._viewDim1 * anchor;\n        const newAnchorPos = pos + size * anchor;\n        // Ensure scroll position is an integer within scroll bounds.\n        const scrollPosition = Math.floor(Math.min(this._scrollSize - this._viewDim1, Math.max(0, this._scrollPosition - curAnchorPos + newAnchorPos)));\n        this._scrollError += this._scrollPosition - scrollPosition;\n        this._scrollPosition = scrollPosition;\n    }\n    _emitRange(inProps = undefined) {\n        const detail = Object.assign({\n            first: this._first,\n            last: this._last,\n            num: this._num,\n            stable: true,\n            firstVisible: this._firstVisible,\n            lastVisible: this._lastVisible,\n        }, inProps);\n        this.dispatchEvent(new CustomEvent('rangechange', { detail }));\n    }\n    _emitScrollSize() {\n        const detail = {\n            [this._sizeDim]: this._scrollSize,\n        };\n        this.dispatchEvent(new CustomEvent('scrollsizechange', { detail }));\n    }\n    _emitScrollError() {\n        if (this._scrollError) {\n            const detail = {\n                [this._positionDim]: this._scrollError,\n                [this._secondaryPositionDim]: 0,\n            };\n            this.dispatchEvent(new CustomEvent('scrollerrorchange', { detail }));\n            this._scrollError = 0;\n        }\n    }\n    /**\n     * Get or estimate the top and left positions of items in the current range.\n     * Emit an itempositionchange event with these positions.\n     */\n    _emitChildPositions() {\n        const detail = {};\n        for (let idx = this._first; idx <= this._last; idx++) {\n            detail[idx] = this._getItemPosition(idx);\n        }\n        this.dispatchEvent(new CustomEvent('itempositionchange', { detail }));\n    }\n    /**\n     * Number of items to display.\n     */\n    get _num() {\n        if (this._first === -1 || this._last === -1) {\n            return 0;\n        }\n        return this._last - this._first + 1;\n    }\n    _checkThresholds() {\n        if (this._viewDim1 === 0 && this._num > 0) {\n            this._scheduleReflow();\n        }\n        else {\n            const min = Math.max(0, this._scrollPosition - this._overhang);\n            const max = Math.min(this._scrollSize, this._scrollPosition + this._viewDim1 + this._overhang);\n            if (this._physicalMin > min || this._physicalMax < max) {\n                this._scheduleReflow();\n            }\n        }\n    }\n    /**\n     * Find the indices of the first and last items to intersect the viewport.\n     * Emit a visibleindiceschange event when either index changes.\n     */\n    _updateVisibleIndices() {\n        let firstVisible = this._firstVisible;\n        let lastVisible = this._lastVisible;\n        for (let i = this._first; i <= this._last; i++) {\n            const itemY = this._getItemPosition(i)[this._positionDim];\n            if (itemY <= this._scrollPosition) {\n                firstVisible = i;\n            }\n            if (itemY < this._scrollPosition + this._viewDim1) {\n                lastVisible = i;\n            }\n        }\n        // If scrolling is occurring very quickly, item positions may change\n        // during this calculation. Ignore the results when that happens.\n        if (firstVisible > lastVisible) {\n            return;\n        }\n        if (firstVisible !== this._firstVisible || lastVisible !== this._lastVisible) {\n            this._firstVisible = firstVisible;\n            this._lastVisible = lastVisible;\n            this._emitRange();\n        }\n    }\n    _scrollPositionChanged(oldPos, newPos) {\n        // When both values are bigger than the max scroll position, keep the\n        // current _scrollToIndex, otherwise invalidate it.\n        const maxPos = this._scrollSize - this._viewDim1;\n        if (oldPos < maxPos || newPos < maxPos) {\n            this._scrollToIndex = -1;\n        }\n    }\n}\n","import { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nconst DATA_CACHE = {};\nconst ALL_ENTITIES = \"*\";\n\nclass HaLogbookData extends PolymerElement {\n  static get properties() {\n    return {\n      hass: {\n        type: Object,\n        observer: \"hassChanged\",\n      },\n\n      filterDate: {\n        type: String,\n        observer: \"filterDataChanged\",\n      },\n\n      filterPeriod: {\n        type: Number,\n        observer: \"filterDataChanged\",\n      },\n\n      filterEntity: {\n        type: String,\n        observer: \"filterDataChanged\",\n      },\n\n      isLoading: {\n        type: Boolean,\n        value: true,\n        readOnly: true,\n        notify: true,\n      },\n\n      entries: {\n        type: Object,\n        value: null,\n        readOnly: true,\n        notify: true,\n      },\n    };\n  }\n\n  hassChanged(newHass, oldHass) {\n    if (!oldHass && this.filterDate) {\n      this.updateData();\n    }\n  }\n\n  filterDataChanged(newValue, oldValue) {\n    if (oldValue !== undefined) {\n      this.updateData();\n    }\n  }\n\n  updateData() {\n    if (!this.hass) return;\n\n    this._setIsLoading(true);\n\n    this.getDate(this.filterDate, this.filterPeriod, this.filterEntity).then(\n      (logbookEntries) => {\n        this._setEntries(logbookEntries);\n        this._setIsLoading(false);\n      }\n    );\n  }\n\n  getDate(date, period, entityId) {\n    if (!entityId) entityId = ALL_ENTITIES;\n\n    if (!DATA_CACHE[period]) DATA_CACHE[period] = [];\n    if (!DATA_CACHE[period][date]) DATA_CACHE[period][date] = [];\n\n    if (DATA_CACHE[period][date][entityId]) {\n      return DATA_CACHE[period][date][entityId];\n    }\n\n    if (entityId !== ALL_ENTITIES && DATA_CACHE[period][date][ALL_ENTITIES]) {\n      return DATA_CACHE[period][date][ALL_ENTITIES].then(function(entities) {\n        return entities.filter(function(entity) {\n          return entity.entity_id === entityId;\n        });\n      });\n    }\n\n    DATA_CACHE[period][date][entityId] = this._getFromServer(\n      date,\n      period,\n      entityId\n    );\n    return DATA_CACHE[period][date][entityId];\n  }\n\n  _getFromServer(date, period, entityId) {\n    let url = \"logbook/\" + date + \"?period=\" + period;\n    if (entityId !== ALL_ENTITIES) {\n      url += \"&entity=\" + entityId;\n    }\n\n    return this.hass.callApi(\"GET\", url).then(\n      function(logbookEntries) {\n        logbookEntries.reverse();\n        return logbookEntries;\n      },\n      function() {\n        return null;\n      }\n    );\n  }\n\n  refreshLogbook() {\n    DATA_CACHE[this.filterPeriod][this.filterDate] = [];\n    this.updateData();\n  }\n}\n\ncustomElements.define(\"ha-logbook-data\", HaLogbookData);\n","export class VirtualRepeater {\n    constructor(config) {\n        /**\n         * Invoked when a new (not recycled) child needs to be displayed.\n         * Set by createElement.\n         */\n        this._createElementFn = null;\n        /**\n         * Invoked on new (including recycled) children after the range changes.\n         * Set by updateElement.\n         */\n        this._updateElementFn = null;\n        /**\n         * Invoked on outgoing children after the range changes. Set by recycleElement.\n         */\n        this._recycleElementFn = null;\n        /**\n         * Used for generating a key for storing references to children. Set by elementKey.\n         */\n        this._elementKeyFn = null;\n        /**\n         * Items to render. Set by items.\n         */\n        this._items = [];\n        /**\n         * Total number of items to render. Set by totalItems.\n         */\n        this._totalItems = null;\n        /**\n         * Flag for asynchnronous reset requests. Resetting clears and reinserts\n         * children in the range.\n         */\n        this._needsReset = false;\n        /**\n         * Flag for asynchnronous remeasure requests. Signals that all children\n         * should be remeasured.\n         */\n        this._needsRemeasure = false;\n        /**\n         * Used to keep track of children that can be cleaned up after a range update.\n         */\n        this._active = new Map();\n        this._prevActive = new Map();\n        /**\n         * Used for recycling purposes.\n         */\n        this._keyToChild = new Map();\n        this._childToKey = new WeakMap();\n        /**\n         * Used to keep track of measures by index.\n         */\n        this._indexToMeasure = {};\n        this.__incremental = false;\n        /**\n         * Invoked at the end of each render cycle: children in the range are\n         * measured, and their dimensions passed to this callback. Use it to layout\n         * children as needed.\n         */\n        this._measureCallback = null;\n        /**\n         * Number of children in the range. Set by num.\n         * TODO @straversi: Consider renaming this. count? visibleElements?\n         */\n        this._num = Infinity;\n        /**\n         * Index of the first child in the range, not necessarily the first visible child.\n         * TODO @straversi: Consider renaming these.\n         */\n        this._first = 0;\n        /**\n         * Index of the last child in the range.\n         */\n        this._last = 0;\n        /**\n         * Previous first rendered index. Used to avoid unnecessary updates.\n         */\n        this._prevFirst = 0;\n        /**\n         * Previous last rendered index. Used to avoid unnecessary updates.\n         */\n        this._prevLast = 0;\n        /**\n         * Flag for asynchnronous render requests. Renders can be requested several\n         * times before a render actually happens.\n         */\n        this._pendingRender = null;\n        /**\n         * Containing element. Set by container.\n         */\n        this._container = null;\n        /**\n         * Children in the rendered order.\n         */\n        this._ordered = [];\n        if (config) {\n            Object.assign(this, config);\n        }\n    }\n    // API\n    /**\n     * The parent of all child nodes to be rendered.\n     */\n    get container() {\n        return this._container;\n    }\n    set container(container) {\n        if (container === this._container) {\n            return;\n        }\n        if (this._container) {\n            // Remove children from old container.\n            this._ordered.forEach((child) => this._removeChild(child));\n        }\n        this._container = container;\n        if (container) {\n            // Insert children in new container.\n            this._ordered.forEach((child) => this._insertBefore(child, null));\n        }\n        else {\n            this._ordered.length = 0;\n            this._active.clear();\n            this._prevActive.clear();\n        }\n        this.requestReset();\n    }\n    /**\n     * Invoked to create a child.\n     * Override or set directly to control element creation.\n     */\n    get createElement() {\n        return this._createElementFn;\n    }\n    set createElement(fn) {\n        if (fn !== this._createElementFn) {\n            this._createElementFn = fn;\n            this._keyToChild.clear();\n            this.requestReset();\n        }\n    }\n    /**\n     * Invoked to update a child.\n     * Override or set directly to control element updates.\n     */\n    get updateElement() {\n        return this._updateElementFn;\n    }\n    set updateElement(fn) {\n        if (fn !== this._updateElementFn) {\n            this._updateElementFn = fn;\n            this.requestReset();\n        }\n    }\n    /**\n     * Invoked in place of removing a child from the DOM, so that it can be reused.\n     * Override or set directly to prepare children for reuse.\n     */\n    get recycleElement() {\n        return this._recycleElementFn;\n    }\n    set recycleElement(fn) {\n        if (fn !== this._recycleElementFn) {\n            this._recycleElementFn = fn;\n            this.requestReset();\n        }\n    }\n    /**\n     * Invoked to generate a key for an element.\n     * Override or set directly to control how keys are generated for children.\n     */\n    get elementKey() {\n        return this._elementKeyFn;\n    }\n    set elementKey(fn) {\n        if (fn !== this._elementKeyFn) {\n            this._elementKeyFn = fn;\n            this._keyToChild.clear();\n            this.requestReset();\n        }\n    }\n    /**\n     * The index of the first child in the range.\n     */\n    get first() {\n        return this._first;\n    }\n    set first(idx) {\n        if (typeof idx !== 'number') {\n            throw new Error('New value must be a number.');\n        }\n        const newFirst = Math.max(0, Math.min(idx, this.totalItems - this._num));\n        if (newFirst !== this._first) {\n            this._first = newFirst;\n            this._scheduleRender();\n        }\n    }\n    /**\n     * The number of children in the range.\n     */\n    get num() {\n        return this._num;\n    }\n    set num(n) {\n        if (typeof n !== 'number') {\n            throw new Error('New value must be a number.');\n        }\n        if (n !== this._num) {\n            this._num = n;\n            this.first = this._first;\n            this._scheduleRender();\n        }\n    }\n    /**\n     * An array of data to be used to render child nodes.\n     */\n    get items() {\n        return this._items;\n    }\n    set items(items) {\n        if (items !== this._items && Array.isArray(items)) {\n            this._items = items;\n            this.requestReset();\n        }\n    }\n    /**\n     * The total number of items, regardless of the range, that can be rendered\n     * as child nodes.\n     */\n    get totalItems() {\n        return (this._totalItems === null ? this._items.length : this._totalItems);\n    }\n    set totalItems(num) {\n        if (typeof num !== 'number' && num !== null) {\n            throw new Error('New value must be a number.');\n        }\n        // TODO(valdrin) should we check if it is a finite number?\n        // Technically, Infinity would break Layout, not VirtualRepeater.\n        if (num !== this._totalItems) {\n            this._totalItems = num;\n            this.first = this._first;\n            this.requestReset();\n        }\n    }\n    /**\n     * TODO @straversi: Document this.\n     */\n    get _incremental() {\n        return this.__incremental;\n    }\n    set _incremental(inc) {\n        if (inc !== this.__incremental) {\n            this.__incremental = inc;\n            this._scheduleRender();\n        }\n    }\n    /**\n     * Invoke to request that all elements in the range be measured.\n     */\n    requestRemeasure() {\n        this._needsRemeasure = true;\n        this._scheduleRender();\n    }\n    // Core functionality\n    _shouldRender() {\n        return Boolean(this.container && this.createElement);\n    }\n    /**\n     * Render at the next opportunity.\n     */\n    async _scheduleRender() {\n        if (!this._pendingRender) {\n            this._pendingRender = true;\n            await Promise.resolve();\n            this._pendingRender = false;\n            if (this._shouldRender()) {\n                this._render();\n            }\n            // this._pendingRender = requestAnimationFrame(() => {\n            //   this._pendingRender = null;\n            //   if (this._shouldRender()) {\n            //     this._render();\n            //   }\n            // });\n        }\n    }\n    /**\n     * Invoke to request that all elements in the range be updated.\n     */\n    requestReset() {\n        this._needsReset = true;\n        this._scheduleRender();\n    }\n    /**\n     * Returns those children that are about to be displayed and that require to\n     * be positioned. If reset or remeasure has been triggered, all children are\n     * returned.\n     */\n    get _toMeasure() {\n        return this._ordered.reduce((toMeasure, c, i) => {\n            const idx = this._first + i;\n            if (this._needsReset || this._needsRemeasure || idx < this._prevFirst ||\n                idx > this._prevLast) {\n                toMeasure.indices.push(idx);\n                toMeasure.children.push(c);\n            }\n            return toMeasure;\n        }, { indices: [], children: [] });\n    }\n    /**\n     * Measures each child bounds and builds a map of index/bounds to be passed\n     * to the `_measureCallback`\n     */\n    async _measureChildren({ indices, children }) {\n        await (new Promise((resolve) => {\n            requestAnimationFrame(resolve);\n        }));\n        const pm = children.map((c) => this._measureChild(c));\n        const mm = /** @type {{number: {width: number, height: number}}} */ (pm.reduce((out, cur, i) => {\n            out[indices[i]] = this._indexToMeasure[indices[i]] = cur;\n            return out;\n        }, {}));\n        this._measureCallback(mm);\n    }\n    /**\n     * Render items within the current range to the DOM.\n     */\n    async _render() {\n        const rangeChanged = this._first !== this._prevFirst || this._num !== this._prevNum;\n        // Create/update/recycle DOM.\n        if (rangeChanged || this._needsReset) {\n            this._last =\n                this._first + Math.min(this._num, this.totalItems - this._first) - 1;\n            if (this._num || this._prevNum) {\n                if (this._needsReset) {\n                    this._reset(this._first, this._last);\n                }\n                else {\n                    // Remove old children and insert new children without touching\n                    // shared children.\n                    this._discardHead();\n                    this._discardTail();\n                    this._addHead();\n                    this._addTail();\n                }\n            }\n        }\n        if (this._needsRemeasure || this._needsReset) {\n            this._indexToMeasure = {};\n        }\n        // Retrieve DOM to be measured.\n        // Do it right before cleanup and reset of properties.\n        const shouldMeasure = this._num > 0 && this._measureCallback &&\n            (rangeChanged || this._needsRemeasure || this._needsReset);\n        const toMeasure = shouldMeasure ? this._toMeasure : null;\n        // Cleanup.\n        if (!this._incremental) {\n            this._prevActive.forEach((idx, child) => this._unassignChild(child, idx));\n            this._prevActive.clear();\n        }\n        // Reset internal properties.\n        this._prevFirst = this._first;\n        this._prevLast = this._last;\n        this._prevNum = this._num;\n        this._needsReset = false;\n        this._needsRemeasure = false;\n        // Notify render completed.\n        this._didRender();\n        // Measure DOM.\n        if (toMeasure) {\n            await this._measureChildren(toMeasure);\n        }\n    }\n    /**\n     * Invoked after DOM is updated, and before it gets measured.\n     */\n    _didRender() {\n    }\n    /**\n     * Unassigns any children at indices lower than the start of the current\n     * range.\n     */\n    _discardHead() {\n        const o = this._ordered;\n        for (let idx = this._prevFirst; o.length && idx < this._first; idx++) {\n            this._unassignChild(o.shift(), idx);\n        }\n    }\n    /**\n     * Unassigns any children at indices higher than the end of the current\n     * range.\n     */\n    _discardTail() {\n        const o = this._ordered;\n        for (let idx = this._prevLast; o.length && idx > this._last; idx--) {\n            this._unassignChild(o.pop(), idx);\n        }\n    }\n    /**\n     * Assigns and inserts non-existent children from the current range with\n     * indices lower than the start of the previous range.\n     */\n    _addHead() {\n        const start = this._first;\n        const end = Math.min(this._last, this._prevFirst - 1);\n        for (let idx = end; idx >= start; idx--) {\n            const child = this._assignChild(idx);\n            // Maintain dom order.\n            this._insertBefore(child, this._firstChild);\n            if (this.updateElement) {\n                this.updateElement(child, this._items[idx], idx);\n            }\n            this._ordered.unshift(child);\n        }\n    }\n    /**\n     * Assigns and appends non-existent children from the current range with\n     * indices higher than the end of the previous range.\n     */\n    _addTail() {\n        const start = Math.max(this._first, this._prevLast + 1);\n        const end = this._last;\n        for (let idx = start; idx <= end; idx++) {\n            const child = this._assignChild(idx);\n            // Maintain dom order.\n            this._insertBefore(child, null);\n            if (this.updateElement) {\n                this.updateElement(child, this._items[idx], idx);\n            }\n            this._ordered.push(child);\n        }\n    }\n    /**\n     * Re-insert and update children in the given range.\n     */\n    _reset(first, last) {\n        // Swapping prevActive with active affects _assignChild.\n        // Upon resetting, the current active children become potentially inactive.\n        // _assignChild will remove a child from _prevActive if it is still active.\n        const prevActive = this._active;\n        this._active = this._prevActive;\n        this._prevActive = prevActive;\n        this._ordered.length = 0;\n        let currentMarker = this._firstChild;\n        for (let i = first; i <= last; i++) {\n            const child = this._assignChild(i);\n            this._ordered.push(child);\n            if (currentMarker) {\n                if (currentMarker === this._node(child)) {\n                    currentMarker = this._nextSibling(child);\n                }\n                else {\n                    this._insertBefore(child, currentMarker);\n                }\n            }\n            else if (!this._childIsAttached(child)) {\n                this._insertBefore(child, null);\n            }\n            if (this.updateElement) {\n                this.updateElement(child, this._items[i], i);\n            }\n        }\n    }\n    /**\n     * Instantiates, tracks, and returns the child at idx.\n     * Prevents cleanup of children that already exist.\n     * Returns the new child at idx.\n     */\n    _assignChild(idx) {\n        const key = this.elementKey ? this.elementKey(idx) : idx;\n        let child;\n        if (child = this._keyToChild.get(key)) {\n            this._prevActive.delete(child);\n        }\n        else {\n            child = this.createElement(this._items[idx], idx);\n            this._keyToChild.set(key, child);\n            this._childToKey.set(child, key);\n        }\n        this._showChild(child);\n        this._active.set(child, idx);\n        return child;\n    }\n    /**\n     * Removes the child at idx, recycling it if possible.\n     */\n    _unassignChild(child, idx) {\n        this._hideChild(child);\n        if (this._incremental) {\n            this._active.delete(child);\n            this._prevActive.set(child, idx);\n        }\n        else {\n            const key = this._childToKey.get(child);\n            this._childToKey.delete(child);\n            this._keyToChild.delete(key);\n            this._active.delete(child);\n            if (this.recycleElement) {\n                this.recycleElement(child, idx);\n            }\n            else if (this._node(child).parentNode) {\n                this._removeChild(child);\n            }\n        }\n    }\n    /**\n     * Returns the node for the first child in the current range, if the node is\n     * in the DOM.\n     * TODO: Is this the right name?\n     */\n    get _firstChild() {\n        return this._ordered.length && this._childIsAttached(this._ordered[0]) ?\n            this._node(this._ordered[0]) :\n            null;\n    }\n    /**\n     * Overridable abstractions for child manipulation\n     */\n    /**\n     * Return the node for child.\n     * Override if child !== child's node.\n     */\n    _node(child) {\n        return child;\n    }\n    /**\n     * Returns the next node sibling of a child node.\n     */\n    _nextSibling(child) {\n        return child.nextSibling;\n    }\n    /**\n     * Inserts child before referenceNode in the container.\n     * Override to control child insertion.\n     */\n    _insertBefore(child, referenceNode) {\n        this._container.insertBefore(child, referenceNode);\n    }\n    /**\n     * Removes child from the DOM.\n     * TODO @straversi: this will not work (_node should be called on child), but\n     * is not currently being used or tested.\n     */\n    _removeChild(child) {\n        child.parentNode.removeChild(child);\n    }\n    /**\n     * Returns whether the child's node is a child of the container\n     * element.\n     */\n    _childIsAttached(child) {\n        const node = this._node(child);\n        return node && node.parentNode === this._container;\n    }\n    /**\n     * Sets the display style of the given node to 'none'.\n     */\n    _hideChild(child) {\n        if (child instanceof HTMLElement) {\n            child.style.display = 'none';\n        }\n    }\n    /**\n     * Sets the display style of the given node to null.\n     */\n    _showChild(child) {\n        if (child instanceof HTMLElement) {\n            child.style.display = null;\n        }\n    }\n    /**\n     * Returns the width, height, and margins of the given child.\n     * Override if child !== child's node.\n     */\n    _measureChild(child) {\n        // offsetWidth doesn't take transforms in consideration, so we use\n        // getBoundingClientRect which does.\n        const { width, height } = child.getBoundingClientRect();\n        return Object.assign({ width, height }, getMargins(child));\n    }\n}\nfunction getMargins(el) {\n    const style = window.getComputedStyle(el);\n    return {\n        marginTop: getMarginValue(style.marginTop),\n        marginRight: getMarginValue(style.marginRight),\n        marginBottom: getMarginValue(style.marginBottom),\n        marginLeft: getMarginValue(style.marginLeft),\n    };\n}\nfunction getMarginValue(value) {\n    const float = value ? parseFloat(value) : NaN;\n    return Number.isNaN(float) ? 0 : float;\n}\n","import { directive, NodePart, createMarker } from 'lit-html';\nimport { VirtualRepeater } from './uni-virtualizer/lib/VirtualRepeater.js';\n/**\n * Mixin for VirtualRepeater and VirtualScroller. This mixin overrides the generic\n * methods in those classes to provide lit-specific implementations of element\n * creation and manipulation.\n *\n * This mixin implements child recycling, so children can be reused after removal\n * from the DOM.\n */\nexport const LitMixin = (Superclass) => class extends Superclass {\n    constructor(config) {\n        const { part, renderItem, useShadowDOM, layout } = config;\n        const container = part.startNode.parentNode;\n        const scrollTarget = config.scrollTarget || container;\n        super({ container, scrollTarget, useShadowDOM, layout });\n        this._pool = [];\n        this._renderItem = renderItem;\n        this._hostPart = part;\n    }\n    createElement() {\n        return this._pool.pop() || new NodePart(this._hostPart.options);\n    }\n    updateElement(part, item, idx) {\n        part.setValue(this._renderItem(item, idx));\n        part.commit();\n    }\n    recycleElement(part) {\n        this._pool.push(part);\n    }\n    /*\n     * Lit-specific overrides for node manipulation\n     */\n    get _kids() {\n        return this._ordered.map((p) => p.startNode.nextElementSibling);\n    }\n    _node(part) {\n        return part.startNode;\n    }\n    _nextSibling(part) {\n        return part.endNode.nextSibling;\n    }\n    _insertBefore(part, referenceNode) {\n        if (referenceNode === null) {\n            referenceNode = this._hostPart.endNode;\n        }\n        if (!this._childIsAttached(part)) {\n            // Inserting new part\n            part.startNode = createMarker();\n            part.endNode = createMarker();\n            super._insertBefore(part.startNode, referenceNode);\n            super._insertBefore(part.endNode, referenceNode);\n        }\n        else {\n            // Inserting existing part\n            const boundary = part.endNode.nextSibling;\n            if (referenceNode !== part.startNode && referenceNode !== boundary) {\n                // Part is not already in the right place\n                for (let node = part.startNode; node !== boundary;) {\n                    const n = node.nextSibling;\n                    super._insertBefore(node, referenceNode);\n                    node = n;\n                }\n            }\n        }\n    }\n    _hideChild(part) {\n        let node = part.startNode;\n        while (node && node !== part.endNode) {\n            super._hideChild(node);\n            node = node.nextSibling;\n        }\n    }\n    _showChild(part) {\n        let node = part.startNode;\n        while (node && node !== part.endNode) {\n            super._showChild(node);\n            node = node.nextSibling;\n        }\n    }\n    _measureChild(part) {\n        // Currently, we assume there's only one node in the part (between start and\n        // end nodes)\n        return super._measureChild(part.startNode.nextElementSibling);\n    }\n};\nexport class LitRepeater extends LitMixin(VirtualRepeater) {\n}\n;\nconst partToRepeater = new WeakMap();\nexport const repeat = directive((config) => async (part) => {\n    // Retain the repeater so that re-rendering the directive's parent won't\n    // create another one.\n    let repeater = partToRepeater.get(part);\n    if (!repeater) {\n        if (!part.startNode.isConnected) {\n            await Promise.resolve();\n        }\n        repeater = new LitRepeater({ part, renderItem: config.renderItem });\n        partToRepeater.set(part, repeater);\n    }\n    const { first, num, totalItems } = config;\n    Object.assign(repeater, { first, num, totalItems });\n});\n","let RO;\nexport default async function ResizeObserver() {\n    return RO || init();\n}\nasync function init() {\n    RO = window.ResizeObserver;\n    try {\n        new RO(function () { });\n    }\n    catch (e) {\n        RO = (await import('resize-observer-polyfill')).default;\n    }\n    return RO;\n}\n","import { VirtualRepeater } from './VirtualRepeater.js';\nimport getResizeObserver from './polyfillLoaders/ResizeObserver.js';\nconst HOST_CLASSNAME = 'uni-virtualizer-host';\nlet globalContainerStylesheet = null;\nfunction containerStyles(hostSel, childSel) {\n    return `\n    ${hostSel} {\n      display: block;\n      position: relative;\n      contain: strict;\n      height: 150px;\n      overflow: auto;\n    }\n    ${childSel} {\n      box-sizing: border-box;\n    }`;\n}\nfunction attachGlobalContainerStylesheet() {\n    if (!globalContainerStylesheet) {\n        globalContainerStylesheet = document.createElement('style');\n        globalContainerStylesheet.textContent = containerStyles(`.${HOST_CLASSNAME}`, `.${HOST_CLASSNAME} > *`);\n        document.head.appendChild(globalContainerStylesheet);\n    }\n}\nexport class RangeChangeEvent extends Event {\n    constructor(type, init) {\n        super(type, init);\n        this._first = Math.floor(init.first || 0);\n        this._last = Math.floor(init.last || 0);\n        this._firstVisible = Math.floor(init.firstVisible || 0);\n        this._lastVisible = Math.floor(init.lastVisible || 0);\n    }\n    get first() {\n        return this._first;\n    }\n    get last() {\n        return this._last;\n    }\n    get firstVisible() {\n        return this._firstVisible;\n    }\n    get lastVisible() {\n        return this._lastVisible;\n    }\n}\n/**\n * Provides virtual scrolling boilerplate.\n *\n * Extensions of this class must set container, layout, scrollTarget, and\n * useShadowDOM.\n *\n * Extensions of this class must also override VirtualRepeater's DOM\n * manipulation methods.\n */\nexport class VirtualScroller extends VirtualRepeater {\n    constructor(config) {\n        super({});\n        /**\n         * Whether the layout should receive an updated viewport size on the next\n         * render.\n         */\n        this._needsUpdateView = false;\n        this._layout = null;\n        /**\n         * Whether to import the default (1d) layout on first render.\n         */\n        this._lazyLoadDefaultLayout = true;\n        /**\n         * The element that generates scroll events and defines the container\n         * viewport. Set by scrollTarget.\n         */\n        this._scrollTarget = null;\n        /**\n         * A sentinel element that sizes the container when it is a scrolling\n         * element. This ensures the scroll bar accurately reflects the total\n         * size of the list.\n         */\n        this._sizer = null;\n        /**\n         * Layout provides these values, we set them on _render().\n         * TODO @straversi: Can we find an XOR type, usable for the key here?\n         */\n        this._scrollSize = null;\n        /**\n         * Difference between scroll target's current and required scroll offsets.\n         * Provided by layout.\n         */\n        this._scrollErr = null;\n        /**\n         * A list of the positions (top, left) of the children in the current range.\n         */\n        this._childrenPos = null;\n        /**\n         * The parent of all child nodes to be rendered. Set by container.\n         */\n        this._containerElement = null;\n        /**\n         * Keep track of original inline style of the container, so it can be\n         * restored when container is changed.\n         */\n        this._containerInlineStyle = null;\n        /**\n         * Keep track of original container stylesheet, so it can be restored\n         * when container is changed.\n         */\n        this._containerStylesheet = null;\n        /**\n         * Whether to build the virtual scroller within a shadow DOM.\n         */\n        this._useShadowDOM = true;\n        /**\n         * Size of the container.\n         */\n        this._containerSize = null;\n        /**\n         * Resize observer attached to container.\n         */\n        this._containerRO = null;\n        /**\n         * Resize observer attached to children.\n         */\n        this._childrenRO = null;\n        /**\n         * Flag for skipping a children measurement if that computation was just\n         * completed.\n         */\n        this._skipNextChildrenSizeChanged = false;\n        /**\n         * Index and position of item to scroll to.\n         */\n        this._scrollToIndex = null;\n        this._num = 0;\n        this._first = -1;\n        this._last = -1;\n        this._prevFirst = -1;\n        this._prevLast = -1;\n        if (config) {\n            Object.assign(this, config);\n        }\n    }\n    get container() {\n        return super.container;\n    }\n    set container(container) {\n        super.container = container;\n        this._initResizeObservers().then(() => {\n            const oldEl = this._containerElement;\n            // Consider document fragments as shadowRoots.\n            const newEl = (container && container.nodeType === Node.DOCUMENT_FRAGMENT_NODE) ?\n                container.host :\n                container;\n            if (oldEl === newEl) {\n                return;\n            }\n            this._containerRO.disconnect();\n            this._containerSize = null;\n            if (oldEl) {\n                if (this._containerInlineStyle) {\n                    oldEl.setAttribute('style', this._containerInlineStyle);\n                }\n                else {\n                    oldEl.removeAttribute('style');\n                }\n                this._containerInlineStyle = null;\n                if (oldEl === this._scrollTarget) {\n                    oldEl.removeEventListener('scroll', this, { passive: true });\n                    this._sizer && this._sizer.remove();\n                }\n            }\n            else {\n                // First time container was setup, add listeners only now.\n                addEventListener('scroll', this, { passive: true });\n            }\n            this._containerElement = newEl;\n            if (newEl) {\n                this._containerInlineStyle = newEl.getAttribute('style') || null;\n                this._applyContainerStyles();\n                if (newEl === this._scrollTarget) {\n                    this._sizer = this._sizer || this._createContainerSizer();\n                    this._container.prepend(this._sizer);\n                }\n                this._scheduleUpdateView();\n                this._containerRO.observe(newEl);\n            }\n        });\n    }\n    get layout() {\n        return this._layout;\n    }\n    set layout(layout) {\n        if (layout === this._layout) {\n            return;\n        }\n        if (this._layout) {\n            this._measureCallback = null;\n            this._layout.removeEventListener('scrollsizechange', this);\n            this._layout.removeEventListener('scrollerrorchange', this);\n            this._layout.removeEventListener('itempositionchange', this);\n            this._layout.removeEventListener('rangechange', this);\n            // Reset container size so layout can get correct viewport size.\n            if (this._containerElement) {\n                this._sizeContainer(undefined);\n            }\n        }\n        this._layout = layout;\n        if (this._layout) {\n            if (typeof this._layout.updateItemSizes === 'function') {\n                this._measureCallback = this._layout.updateItemSizes.bind(this._layout);\n                this.requestRemeasure();\n            }\n            this._layout.addEventListener('scrollsizechange', this);\n            this._layout.addEventListener('scrollerrorchange', this);\n            this._layout.addEventListener('itempositionchange', this);\n            this._layout.addEventListener('rangechange', this);\n            this._scheduleUpdateView();\n        }\n    }\n    /**\n     * The element that generates scroll events and defines the container\n     * viewport. The value `null` (default) corresponds to `window` as scroll\n     * target.\n     */\n    get scrollTarget() {\n        return this._scrollTarget;\n    }\n    set scrollTarget(target) {\n        // Consider window as null.\n        if (target === window) {\n            target = null;\n        }\n        if (this._scrollTarget === target) {\n            return;\n        }\n        if (this._scrollTarget) {\n            this._scrollTarget.removeEventListener('scroll', this, { passive: true });\n            if (this._sizer && this._scrollTarget === this._containerElement) {\n                this._sizer.remove();\n            }\n        }\n        this._scrollTarget = target;\n        if (target) {\n            target.addEventListener('scroll', this, { passive: true });\n            if (target === this._containerElement) {\n                this._sizer = this._sizer || this._createContainerSizer();\n                this._container.prepend(this._sizer);\n            }\n        }\n    }\n    get useShadowDOM() {\n        return this._useShadowDOM;\n    }\n    set useShadowDOM(newVal) {\n        if (this._useShadowDOM !== newVal) {\n            this._useShadowDOM = Boolean(newVal);\n            if (this._containerStylesheet) {\n                this._containerStylesheet.parentElement.removeChild(this._containerStylesheet);\n                this._containerStylesheet = null;\n            }\n            this._applyContainerStyles();\n        }\n    }\n    /**\n     * Index and position of item to scroll to. The scroller will fix to that point\n     * until the user scrolls.\n     */\n    set scrollToIndex(newValue) {\n        this._scrollToIndex = newValue;\n        this._scheduleUpdateView();\n    }\n    /**\n     * Display the items in the current range.\n     * Continue relayout of child positions until they have stabilized.\n     */\n    async _render() {\n        if (this._lazyLoadDefaultLayout && !this._layout) {\n            this._lazyLoadDefaultLayout = false;\n            const { Layout1d } = await import('./layouts/Layout1d');\n            this.layout = new Layout1d({});\n            return;\n        }\n        this._childrenRO.disconnect();\n        // Update layout properties before rendering to have correct first, num,\n        // scroll size, children positions.\n        this._layout.totalItems = this.totalItems;\n        if (this._needsUpdateView) {\n            this._needsUpdateView = false;\n            this._updateView();\n        }\n        if (this._scrollToIndex !== null) {\n            this._layout.scrollToIndex(this._scrollToIndex.index, this._scrollToIndex.position);\n            this._scrollToIndex = null;\n        }\n        this._layout.reflowIfNeeded();\n        // Keep rendering until there is no more scheduled renders.\n        while (true) {\n            if (this._pendingRender) {\n                // cancelAnimationFrame(this._pendingRender);\n                this._pendingRender = false;\n            }\n            // Update scroll size and correct scroll error before rendering.\n            this._sizeContainer(this._scrollSize);\n            if (this._scrollErr) {\n                // This triggers a 'scroll' event (async) which triggers another\n                // _updateView().\n                this._correctScrollError(this._scrollErr);\n                this._scrollErr = null;\n            }\n            // Position children (_didRender()), and provide their measures to layout.\n            await super._render();\n            this._layout.reflowIfNeeded();\n            // If layout reflow did not provoke another render, we're done.\n            if (!this._pendingRender) {\n                break;\n            }\n        }\n        // We want to skip the first ResizeObserver callback call as we already\n        // measured the children.\n        this._skipNextChildrenSizeChanged = true;\n        this._kids.forEach((child) => this._childrenRO.observe(child));\n    }\n    /**\n     * Position children before they get measured. Measuring will force relayout,\n     * so by positioning them first, we reduce computations.\n     */\n    _didRender() {\n        if (this._childrenPos) {\n            this._positionChildren(this._childrenPos);\n            this._childrenPos = null;\n        }\n    }\n    handleEvent(event) {\n        switch (event.type) {\n            case 'scroll':\n                if (!this._scrollTarget || event.target === this._scrollTarget) {\n                    this._scheduleUpdateView();\n                }\n                break;\n            case 'scrollsizechange':\n                this._scrollSize = event.detail;\n                this._scheduleRender();\n                break;\n            case 'scrollerrorchange':\n                this._scrollErr = event.detail;\n                this._scheduleRender();\n                break;\n            case 'itempositionchange':\n                this._childrenPos = event.detail;\n                this._scheduleRender();\n                break;\n            case 'rangechange':\n                this._adjustRange(event.detail);\n                break;\n            default:\n                console.warn('event not handled', event);\n        }\n    }\n    async _initResizeObservers() {\n        if (this._containerRO === null) {\n            const ResizeObserver = await getResizeObserver();\n            this._containerRO = new ResizeObserver((entries) => this._containerSizeChanged(entries[0].contentRect));\n            this._childrenRO =\n                new ResizeObserver(() => this._childrenSizeChanged());\n        }\n    }\n    _applyContainerStyles() {\n        if (this._useShadowDOM) {\n            if (this._containerStylesheet === null) {\n                const sheet = (this._containerStylesheet = document.createElement('style'));\n                sheet.textContent = containerStyles(':host', '::slotted(*)');\n            }\n            const root = this._containerElement.shadowRoot || this._containerElement.attachShadow({ mode: 'open' });\n            const slot = root.querySelector('slot:not([name])');\n            root.appendChild(this._containerStylesheet);\n            if (!slot) {\n                root.appendChild(document.createElement('slot'));\n            }\n        }\n        else {\n            attachGlobalContainerStylesheet();\n            if (this._containerElement) {\n                this._containerElement.classList.add(HOST_CLASSNAME);\n            }\n        }\n    }\n    _createContainerSizer() {\n        const sizer = document.createElement('div');\n        // When the scrollHeight is large, the height of this element might be\n        // ignored. Setting content and font-size ensures the element has a size.\n        Object.assign(sizer.style, {\n            position: 'absolute',\n            margin: '-2px 0 0 0',\n            padding: 0,\n            visibility: 'hidden',\n            fontSize: '2px',\n        });\n        sizer.innerHTML = '&nbsp;';\n        return sizer;\n    }\n    /**\n     * TODO: Rename _ordered to _kids?\n     */\n    get _kids() {\n        return this._ordered;\n    }\n    /**\n     * Render and update the view at the next opportunity.\n     */\n    _scheduleUpdateView() {\n        this._needsUpdateView = true;\n        this._scheduleRender();\n    }\n    _updateView() {\n        let width, height, top, left;\n        if (this._scrollTarget === this._containerElement) {\n            width = this._containerSize.width;\n            height = this._containerSize.height;\n            left = this._containerElement.scrollLeft;\n            top = this._containerElement.scrollTop;\n        }\n        else {\n            const containerBounds = this._containerElement.getBoundingClientRect();\n            const scrollBounds = this._scrollTarget ?\n                this._scrollTarget.getBoundingClientRect() :\n                {\n                    top: containerBounds.top + scrollY,\n                    left: containerBounds.left + scrollX,\n                    width: innerWidth,\n                    height: innerHeight\n                };\n            const scrollerWidth = scrollBounds.width;\n            const scrollerHeight = scrollBounds.height;\n            const xMin = Math.max(0, Math.min(scrollerWidth, containerBounds.left - scrollBounds.left));\n            const yMin = Math.max(0, Math.min(scrollerHeight, containerBounds.top - scrollBounds.top));\n            // TODO: Direction is intended to be a layout-level concept, not a scroller-level concept,\n            // so this feels like a factoring problem\n            const xMax = this._layout.direction === 'vertical' ?\n                Math.max(0, Math.min(scrollerWidth, containerBounds.right - scrollBounds.left)) :\n                scrollerWidth;\n            const yMax = this._layout.direction === 'vertical' ?\n                scrollerHeight :\n                Math.max(0, Math.min(scrollerHeight, containerBounds.bottom - scrollBounds.top));\n            width = xMax - xMin;\n            height = yMax - yMin;\n            left = Math.max(0, -(containerBounds.left - scrollBounds.left));\n            top = Math.max(0, -(containerBounds.top - scrollBounds.top));\n        }\n        this._layout.viewportSize = { width, height };\n        this._layout.viewportScroll = { top, left };\n    }\n    /**\n     * Styles the _sizer element or the container so that its size reflects the\n     * total size of all items.\n     */\n    _sizeContainer(size) {\n        if (this._scrollTarget === this._containerElement) {\n            const left = size && size.width ? size.width - 1 : 0;\n            const top = size && size.height ? size.height - 1 : 0;\n            this._sizer.style.transform = `translate(${left}px, ${top}px)`;\n        }\n        else {\n            const style = this._containerElement.style;\n            style.minWidth = size && size.width ? size.width + 'px' : null;\n            style.minHeight = size && size.height ? size.height + 'px' : null;\n        }\n    }\n    /**\n     * Sets the top and left transform style of the children from the values in\n     * pos.\n     */\n    _positionChildren(pos) {\n        const kids = this._kids;\n        Object.keys(pos).forEach((key) => {\n            const idx = key - this._first;\n            const child = kids[idx];\n            if (child) {\n                const { top, left } = pos[key];\n                child.style.position = 'absolute';\n                child.style.transform = `translate(${left}px, ${top}px)`;\n            }\n        });\n    }\n    _adjustRange(range) {\n        this.num = range.num;\n        this.first = range.first;\n        const visiblityChanged = this._firstVisible !== range.firstVisible || this._lastVisible !== range.lastVisible;\n        this._firstVisible = range.firstVisible;\n        this._lastVisible = range.lastVisible;\n        this._incremental = !(range.stable);\n        if (range.remeasure) {\n            this.requestRemeasure();\n        }\n        else if (range.stable || visiblityChanged) {\n            this._notifyRange();\n        }\n    }\n    _shouldRender() {\n        if (!super._shouldRender() || !this._containerElement || (!this._layout && !this._lazyLoadDefaultLayout)) {\n            return false;\n        }\n        // NOTE: we're about to render, but the ResizeObserver didn't execute yet.\n        // Since we want to keep rAF timing, we compute _containerSize now. Would\n        // be nice to have a way to flush ResizeObservers.\n        if (this._containerSize === null) {\n            const { width, height } = this._containerElement.getBoundingClientRect();\n            this._containerSize = { width, height };\n        }\n        return this._containerSize.width > 0 || this._containerSize.height > 0;\n    }\n    _correctScrollError(err) {\n        if (this._scrollTarget) {\n            this._scrollTarget.scrollTop -= err.top;\n            this._scrollTarget.scrollLeft -= err.left;\n        }\n        else {\n            window.scroll(window.scrollX - err.left, window.scrollY - err.top);\n        }\n    }\n    /**\n     * Emits a rangechange event with the current first, last, firstVisible, and\n     * lastVisible.\n     */\n    _notifyRange() {\n        const { first, num } = this;\n        const last = first + num - 1;\n        this._container.dispatchEvent(new RangeChangeEvent('rangechange', {\n            first,\n            last,\n            firstVisible: this._firstVisible,\n            lastVisible: this._lastVisible,\n        }));\n    }\n    /**\n     * Render and update the view at the next opportunity with the given\n     * container size.\n     */\n    _containerSizeChanged(size) {\n        const { width, height } = size;\n        this._containerSize = { width, height };\n        this._scheduleUpdateView();\n    }\n    _childrenSizeChanged() {\n        if (this._skipNextChildrenSizeChanged) {\n            this._skipNextChildrenSizeChanged = false;\n        }\n        else {\n            this.requestRemeasure();\n        }\n    }\n}\n","import { directive } from 'lit-html';\nimport { VirtualScroller } from './uni-virtualizer/lib/VirtualScroller.js';\nimport { LitMixin } from './repeat.js';\nexport class LitScroller extends LitMixin(VirtualScroller) {\n}\nconst partToScroller = new WeakMap();\n/**\n * A lit-html directive that turns its parent node into a virtual scroller.\n *\n * See ScrollConfig interface for configuration options.\n */\nexport const scroll = directive((config) => async (part) => {\n    // Retain the scroller so that re-rendering the directive's parent won't\n    // create another one.\n    let scroller = partToScroller.get(part);\n    if (!scroller) {\n        if (!part.startNode.isConnected) {\n            await Promise.resolve();\n        }\n        const { renderItem, layout, scrollTarget, useShadowDOM } = config;\n        scroller = new LitScroller({ part, renderItem, layout, scrollTarget, useShadowDOM });\n        partToScroller.set(part, scroller);\n    }\n    Object.assign(scroller, {\n        items: config.items,\n        totalItems: config.totalItems === undefined ? null : config.totalItems,\n        scrollToIndex: config.scrollToIndex === undefined ? null : config.scrollToIndex,\n    });\n});\n","import * as tslib_1 from \"tslib\";\nimport { html, LitElement, customElement, property } from 'lit-element';\nimport { scroll } from './scroll.js';\n/**\n * A LitElement wrapper of the scroll directive.\n *\n * Import this module to declare the lit-virtualizer custom element.\n * Pass an items array, renderItem method, and scroll target as properties\n * to the <lit-virtualizer> element.\n */\nlet LitVirtualizer = class LitVirtualizer extends LitElement {\n    constructor() {\n        super();\n        this.renderRoot = this;\n    }\n    /**\n     * The method used for rendering each item.\n     */\n    get renderItem() {\n        return this._renderItem;\n    }\n    set renderItem(renderItem) {\n        if (renderItem !== this.renderItem) {\n            this._renderItem = renderItem;\n            this.requestUpdate();\n        }\n    }\n    /**\n     * Scroll to the specified index, placing that item at the given position\n     * in the scroll view.\n     */\n    async scrollToIndex(index, position = 'start') {\n        this._scrollToIndex = { index, position };\n        this.requestUpdate();\n        await this.updateComplete;\n        this._scrollToIndex = null;\n    }\n    render() {\n        return html `${scroll({\n            items: this.items,\n            renderItem: this._renderItem,\n            scrollTarget: this.scrollTarget,\n            scrollToIndex: this._scrollToIndex,\n            useShadowDOM: true\n            // TODO: allow configuration of a layout.\n        })}`;\n    }\n};\ntslib_1.__decorate([\n    property()\n], LitVirtualizer.prototype, \"_renderItem\", void 0);\ntslib_1.__decorate([\n    property()\n], LitVirtualizer.prototype, \"items\", void 0);\ntslib_1.__decorate([\n    property()\n], LitVirtualizer.prototype, \"scrollTarget\", void 0);\nLitVirtualizer = tslib_1.__decorate([\n    customElement('lit-virtualizer')\n], LitVirtualizer);\nexport { LitVirtualizer };\n","import \"@polymer/iron-icon/iron-icon\";\n\nimport formatTime from \"../../common/datetime/format_time\";\nimport formatDate from \"../../common/datetime/format_date\";\nimport { domainIcon } from \"../../common/entity/domain_icon\";\nimport { computeRTL } from \"../../common/util/compute_rtl\";\nimport {\n  LitElement,\n  html,\n  property,\n  TemplateResult,\n  CSSResult,\n  css,\n  PropertyValues,\n} from \"lit-element\";\nimport { HomeAssistant } from \"../../types\";\nimport { fireEvent } from \"../../common/dom/fire_event\";\nimport \"lit-virtualizer\";\nimport { LogbookEntry } from \"../../data/logbook\";\n\nclass HaLogbook extends LitElement {\n  @property() public hass!: HomeAssistant;\n  @property() public entries: LogbookEntry[] = [];\n  @property({ attribute: \"rtl\", type: Boolean, reflect: true })\n  // @ts-ignore\n  private _rtl = false;\n\n  protected updated(changedProps: PropertyValues) {\n    super.updated(changedProps);\n    if (!changedProps.has(\"hass\")) {\n      return;\n    }\n    const oldHass = changedProps.get(\"hass\") as HomeAssistant | undefined;\n    if (oldHass && oldHass.language !== this.hass.language) {\n      this._rtl = computeRTL(this.hass);\n    }\n  }\n\n  protected firstUpdated(changedProps: PropertyValues) {\n    super.firstUpdated(changedProps);\n    this._rtl = computeRTL(this.hass);\n  }\n\n  protected render(): TemplateResult | void {\n    if (!this.entries?.length) {\n      return html`\n        ${this.hass.localize(\"ui.panel.logbook.entries_not_found\")}\n      `;\n    }\n\n    return html`\n      <lit-virtualizer\n        .items=${this.entries}\n        .renderItem=${(item: LogbookEntry, index: number) =>\n          this._renderLogbookItem(item, index)}\n        style=\"height: 100%;\"\n      ></lit-virtualizer>\n    `;\n  }\n\n  private _renderLogbookItem(\n    item: LogbookEntry,\n    index: number\n  ): TemplateResult {\n    const previous = this.entries[index - 1];\n    return html`\n      <div>\n        ${index === 0 ||\n        (item?.when &&\n          previous?.when &&\n          new Date(item.when).toDateString() !==\n            new Date(previous.when).toDateString())\n          ? html`\n              <h4 class=\"date\">\n                ${formatDate(new Date(item.when), this.hass.language)}\n              </h4>\n            `\n          : html``}\n\n        <div class=\"entry\">\n          <div class=\"time\">\n            ${formatTime(new Date(item.when), this.hass.language)}\n          </div>\n          <iron-icon .icon=\"${domainIcon(item.domain)}\"></iron-icon>\n          <div class=\"message\">\n            ${!item.entity_id\n              ? html`\n                  <span class=\"name\">${item.name}</span>\n                `\n              : html`\n                  <a\n                    href=\"#\"\n                    @click=${this._entityClicked}\n                    .entityId=${item.entity_id}\n                    class=\"name\"\n                  >\n                    ${item.name}\n                  </a>\n                `}\n            <span>${item.message}</span>\n          </div>\n        </div>\n      </div>\n    `;\n  }\n\n  private _entityClicked(ev: Event) {\n    ev.preventDefault();\n    fireEvent(this, \"hass-more-info\", {\n      entityId: (ev.target as any).entityId,\n    });\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      :host {\n        display: block;\n        height: 100%;\n      }\n\n      :host([rtl]) {\n        direction: ltr;\n      }\n\n      .entry {\n        display: flex;\n        line-height: 2em;\n      }\n\n      .time {\n        width: 55px;\n        font-size: 0.8em;\n        color: var(--secondary-text-color);\n      }\n\n      :host([rtl]) .date {\n        direction: rtl;\n      }\n\n      iron-icon {\n        margin: 0 8px 0 16px;\n        color: var(--primary-text-color);\n      }\n\n      .message {\n        color: var(--primary-text-color);\n      }\n\n      a {\n        color: var(--primary-color);\n      }\n    `;\n  }\n}\n\ncustomElements.define(\"ha-logbook\", HaLogbook);\n","import \"@polymer/app-layout/app-header-layout/app-header-layout\";\nimport \"@polymer/app-layout/app-header/app-header\";\nimport \"@polymer/app-layout/app-toolbar/app-toolbar\";\nimport \"@polymer/paper-icon-button/paper-icon-button\";\nimport \"@polymer/paper-input/paper-input\";\nimport \"@polymer/paper-spinner/paper-spinner\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\nimport \"@vaadin/vaadin-date-picker/theme/material/vaadin-date-picker\";\n\nimport \"../../components/ha-menu-button\";\nimport \"../../components/entity/ha-entity-picker\";\nimport \"../../resources/ha-date-picker-style\";\nimport \"../../resources/ha-style\";\n\nimport \"./ha-logbook-data\";\nimport \"./ha-logbook\";\n\nimport formatDate from \"../../common/datetime/format_date\";\nimport LocalizeMixin from \"../../mixins/localize-mixin\";\nimport { computeRTL } from \"../../common/util/compute_rtl\";\n\n/*\n * @appliesMixin LocalizeMixin\n */\nclass HaPanelLogbook extends LocalizeMixin(PolymerElement) {\n  static get template() {\n    return html`\n      <style include=\"ha-style\">\n        .content {\n          padding: 0 16px 0 16px;\n        }\n\n        ha-logbook {\n          height: calc(100vh - 136px);\n        }\n\n        :host([narrow]) ha-logbook {\n          height: calc(100vh - 198px);\n        }\n\n        paper-spinner {\n          position: absolute;\n          left: 50%;\n          top: 50%;\n          transform: translate(-50%, -50%);\n        }\n\n        .wrap {\n          margin-bottom: 24px;\n        }\n\n        .filters {\n          display: flex;\n          align-items: center;\n        }\n\n        :host([narrow]) .filters {\n          flex-wrap: wrap;\n        }\n\n        vaadin-date-picker {\n          max-width: 200px;\n          margin-right: 16px;\n        }\n\n        paper-dropdown-menu {\n          max-width: 100px;\n          margin-right: 16px;\n          --paper-input-container-label-floating: {\n            padding-bottom: 10px;\n          }\n        }\n\n        :host([rtl]) paper-dropdown-menu {\n          text-align: right;\n        }\n\n        paper-item {\n          cursor: pointer;\n        }\n\n        ha-entity-picker {\n          display: inline-block;\n          flex-grow: 1;\n          max-width: 400px;\n        }\n\n        :host([narrow]) ha-entity-picker {\n          max-width: none;\n          width: 100%;\n        }\n\n        [hidden] {\n          display: none !important;\n        }\n      </style>\n\n      <ha-logbook-data\n        hass=\"[[hass]]\"\n        is-loading=\"{{isLoading}}\"\n        entries=\"{{entries}}\"\n        filter-date=\"[[_computeFilterDate(_currentDate)]]\"\n        filter-period=\"[[_computeFilterDays(_periodIndex)]]\"\n        filter-entity=\"[[entityId]]\"\n      ></ha-logbook-data>\n\n      <app-header-layout has-scrolling-region>\n        <app-header slot=\"header\" fixed>\n          <app-toolbar>\n            <ha-menu-button\n              hass=\"[[hass]]\"\n              narrow=\"[[narrow]]\"\n            ></ha-menu-button>\n            <div main-title>[[localize('panel.logbook')]]</div>\n            <paper-icon-button\n              icon=\"hass:refresh\"\n              on-click=\"refreshLogbook\"\n              hidden$=\"[[isLoading]]\"\n            ></paper-icon-button>\n          </app-toolbar>\n        </app-header>\n\n        <div class=\"content\">\n          <paper-spinner\n            active=\"[[isLoading]]\"\n            hidden$=\"[[!isLoading]]\"\n            alt=\"[[localize('ui.common.loading')]]\"\n          ></paper-spinner>\n\n          <div class=\"filters\">\n            <vaadin-date-picker\n              id=\"picker\"\n              value=\"{{_currentDate}}\"\n              label=\"[[localize('ui.panel.logbook.showing_entries')]]\"\n              disabled=\"[[isLoading]]\"\n              required\n            ></vaadin-date-picker>\n\n            <paper-dropdown-menu\n              label-float\n              label=\"[[localize('ui.panel.logbook.period')]]\"\n              disabled=\"[[isLoading]]\"\n            >\n              <paper-listbox\n                slot=\"dropdown-content\"\n                selected=\"{{_periodIndex}}\"\n              >\n                <paper-item\n                  >[[localize('ui.duration.day', 'count', 1)]]</paper-item\n                >\n                <paper-item\n                  >[[localize('ui.duration.day', 'count', 3)]]</paper-item\n                >\n                <paper-item\n                  >[[localize('ui.duration.week', 'count', 1)]]</paper-item\n                >\n              </paper-listbox>\n            </paper-dropdown-menu>\n\n            <ha-entity-picker\n              hass=\"[[hass]]\"\n              value=\"{{_entityId}}\"\n              label=\"[[localize('ui.components.entity.entity-picker.entity')]]\"\n              disabled=\"[[isLoading]]\"\n              on-change=\"_entityPicked\"\n            ></ha-entity-picker>\n          </div>\n\n          <ha-logbook\n            hass=\"[[hass]]\"\n            entries=\"[[entries]]\"\n            hidden$=\"[[isLoading]]\"\n          ></ha-logbook>\n        </div>\n      </app-header-layout>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n\n      narrow: { type: Boolean, reflectToAttribute: true },\n\n      // ISO8601 formatted date string\n      _currentDate: {\n        type: String,\n        value: function() {\n          const value = new Date();\n          const today = new Date(\n            Date.UTC(value.getFullYear(), value.getMonth(), value.getDate())\n          );\n          return today.toISOString().split(\"T\")[0];\n        },\n      },\n\n      _periodIndex: {\n        type: Number,\n        value: 0,\n      },\n\n      _entityId: {\n        type: String,\n        value: \"\",\n      },\n\n      entityId: {\n        type: String,\n        value: \"\",\n        readOnly: true,\n      },\n\n      isLoading: {\n        type: Boolean,\n      },\n\n      entries: {\n        type: Array,\n      },\n\n      datePicker: {\n        type: Object,\n      },\n\n      rtl: {\n        type: Boolean,\n        reflectToAttribute: true,\n        computed: \"_computeRTL(hass)\",\n      },\n    };\n  }\n\n  connectedCallback() {\n    super.connectedCallback();\n    // We are unable to parse date because we use intl api to render date\n    this.$.picker.set(\"i18n.parseDate\", null);\n    this.$.picker.set(\"i18n.formatDate\", (date) =>\n      formatDate(new Date(date.year, date.month, date.day), this.hass.language)\n    );\n  }\n\n  _computeFilterDate(_currentDate) {\n    if (!_currentDate) return undefined;\n    var parts = _currentDate.split(\"-\");\n    parts[1] = parseInt(parts[1]) - 1;\n    return new Date(parts[0], parts[1], parts[2]).toISOString();\n  }\n\n  _computeFilterDays(periodIndex) {\n    switch (periodIndex) {\n      case 1:\n        return 3;\n      case 2:\n        return 7;\n      default:\n        return 1;\n    }\n  }\n\n  _entityPicked(ev) {\n    this._setEntityId(ev.target.value);\n  }\n\n  refreshLogbook() {\n    this.shadowRoot.querySelector(\"ha-logbook-data\").refreshLogbook();\n  }\n\n  _computeRTL(hass) {\n    return computeRTL(hass);\n  }\n}\n\ncustomElements.define(\"ha-panel-logbook\", HaPanelLogbook);\n","/**\n@license\nCopyright (c) 2015 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at\nhttp://polymer.github.io/LICENSE.txt The complete set of authors may be found at\nhttp://polymer.github.io/AUTHORS.txt The complete set of contributors may be\nfound at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as\npart of the polymer project is also subject to an additional IP rights grant\nfound at http://polymer.github.io/PATENTS.txt\n*/\nimport '@polymer/polymer/polymer-legacy.js';\nimport '@polymer/iron-input/iron-input.js';\nimport './paper-input-char-counter.js';\nimport './paper-input-container.js';\nimport './paper-input-error.js';\n\nimport {IronFormElementBehavior} from '@polymer/iron-form-element-behavior/iron-form-element-behavior.js';\nimport {DomModule} from '@polymer/polymer/lib/elements/dom-module.js';\nimport {Polymer} from '@polymer/polymer/lib/legacy/polymer-fn.js';\nimport {html} from '@polymer/polymer/lib/utils/html-tag.js';\nimport {PaperInputBehavior} from './paper-input-behavior.js';\n\n/**\nMaterial design: [Text\nfields](https://www.google.com/design/spec/components/text-fields.html)\n\n`<paper-input>` is a single-line text field with Material Design styling.\n\n    <paper-input label=\"Input label\"></paper-input>\n\nIt may include an optional error message or character counter.\n\n    <paper-input error-message=\"Invalid input!\" label=\"Input\n    label\"></paper-input> <paper-input char-counter label=\"Input\n    label\"></paper-input>\n\nIt can also include custom prefix or suffix elements, which are displayed\nbefore or after the text input itself. In order for an element to be\nconsidered as a prefix, it must have the `prefix` attribute (and similarly\nfor `suffix`).\n\n    <paper-input label=\"total\">\n      <div prefix>$</div>\n      <paper-icon-button slot=\"suffix\" icon=\"clear\"></paper-icon-button>\n    </paper-input>\n\nA `paper-input` can use the native `type=search` or `type=file` features.\nHowever, since we can't control the native styling of the input (search icon,\nfile button, date placeholder, etc.), in these cases the label will be\nautomatically floated. The `placeholder` attribute can still be used for\nadditional informational text.\n\n    <paper-input label=\"search!\" type=\"search\"\n        placeholder=\"search for cats\" autosave=\"test\" results=\"5\">\n    </paper-input>\n\nSee `Polymer.PaperInputBehavior` for more API docs.\n\n### Focus\n\nTo focus a paper-input, you can call the native `focus()` method as long as the\npaper input has a tab index. Similarly, `blur()` will blur the element.\n\n### Styling\n\nSee `Polymer.PaperInputContainer` for a list of custom properties used to\nstyle this element.\n\nThe following custom properties and mixins are available for styling:\n\nCustom property | Description | Default\n----------------|-------------|----------\n`--paper-input-container-ms-clear` | Mixin applied to the Internet Explorer reveal button (the eyeball) | {}\n\n@group Paper Elements\n@element paper-input\n@hero hero.svg\n@demo demo/index.html\n*/\nPolymer({\n  is: 'paper-input',\n\n  _template: html`\n    <style>\n      :host {\n        display: block;\n      }\n\n      :host([focused]) {\n        outline: none;\n      }\n\n      :host([hidden]) {\n        display: none !important;\n      }\n\n      input {\n        /* Firefox sets a min-width on the input, which can cause layout issues */\n        min-width: 0;\n      }\n\n      /* In 1.x, the <input> is distributed to paper-input-container, which styles it.\n      In 2.x the <iron-input> is distributed to paper-input-container, which styles\n      it, but in order for this to work correctly, we need to reset some\n      of the native input's properties to inherit (from the iron-input) */\n      iron-input > input {\n        @apply --paper-input-container-shared-input-style;\n        font-family: inherit;\n        font-weight: inherit;\n        font-size: inherit;\n        letter-spacing: inherit;\n        word-spacing: inherit;\n        line-height: inherit;\n        text-shadow: inherit;\n        color: inherit;\n        cursor: inherit;\n      }\n\n      input:disabled {\n        @apply --paper-input-container-input-disabled;\n      }\n\n      input::-webkit-outer-spin-button,\n      input::-webkit-inner-spin-button {\n        @apply --paper-input-container-input-webkit-spinner;\n      }\n\n      input::-webkit-clear-button {\n        @apply --paper-input-container-input-webkit-clear;\n      }\n\n      input::-webkit-calendar-picker-indicator {\n        @apply --paper-input-container-input-webkit-calendar-picker-indicator;\n      }\n\n      input::-webkit-input-placeholder {\n        color: var(--paper-input-container-color, var(--secondary-text-color));\n      }\n\n      input:-moz-placeholder {\n        color: var(--paper-input-container-color, var(--secondary-text-color));\n      }\n\n      input::-moz-placeholder {\n        color: var(--paper-input-container-color, var(--secondary-text-color));\n      }\n\n      input::-ms-clear {\n        @apply --paper-input-container-ms-clear;\n      }\n\n      input::-ms-reveal {\n        @apply --paper-input-container-ms-reveal;\n      }\n\n      input:-ms-input-placeholder {\n        color: var(--paper-input-container-color, var(--secondary-text-color));\n      }\n\n      label {\n        pointer-events: none;\n      }\n    </style>\n\n    <paper-input-container id=\"container\" no-label-float=\"[[noLabelFloat]]\" always-float-label=\"[[_computeAlwaysFloatLabel(alwaysFloatLabel,placeholder)]]\" auto-validate$=\"[[autoValidate]]\" disabled$=\"[[disabled]]\" invalid=\"[[invalid]]\">\n\n      <slot name=\"prefix\" slot=\"prefix\"></slot>\n\n      <label hidden$=\"[[!label]]\" aria-hidden=\"true\" for$=\"[[_inputId]]\" slot=\"label\">[[label]]</label>\n\n      <!-- Need to bind maxlength so that the paper-input-char-counter works correctly -->\n      <iron-input bind-value=\"{{value}}\" slot=\"input\" class=\"input-element\" id$=\"[[_inputId]]\" maxlength$=\"[[maxlength]]\" allowed-pattern=\"[[allowedPattern]]\" invalid=\"{{invalid}}\" validator=\"[[validator]]\">\n        <input aria-labelledby$=\"[[_ariaLabelledBy]]\" aria-describedby$=\"[[_ariaDescribedBy]]\" disabled$=\"[[disabled]]\" title$=\"[[title]]\" type$=\"[[type]]\" pattern$=\"[[pattern]]\" required$=\"[[required]]\" autocomplete$=\"[[autocomplete]]\" autofocus$=\"[[autofocus]]\" inputmode$=\"[[inputmode]]\" minlength$=\"[[minlength]]\" maxlength$=\"[[maxlength]]\" min$=\"[[min]]\" max$=\"[[max]]\" step$=\"[[step]]\" name$=\"[[name]]\" placeholder$=\"[[placeholder]]\" readonly$=\"[[readonly]]\" list$=\"[[list]]\" size$=\"[[size]]\" autocapitalize$=\"[[autocapitalize]]\" autocorrect$=\"[[autocorrect]]\" on-change=\"_onChange\" tabindex$=\"[[tabIndex]]\" autosave$=\"[[autosave]]\" results$=\"[[results]]\" accept$=\"[[accept]]\" multiple$=\"[[multiple]]\">\n      </iron-input>\n\n      <slot name=\"suffix\" slot=\"suffix\"></slot>\n\n      <template is=\"dom-if\" if=\"[[errorMessage]]\">\n        <paper-input-error aria-live=\"assertive\" slot=\"add-on\">[[errorMessage]]</paper-input-error>\n      </template>\n\n      <template is=\"dom-if\" if=\"[[charCounter]]\">\n        <paper-input-char-counter slot=\"add-on\"></paper-input-char-counter>\n      </template>\n\n    </paper-input-container>\n  `,\n\n  behaviors: [PaperInputBehavior, IronFormElementBehavior],\n\n  properties: {\n    value: {\n      // Required for the correct TypeScript type-generation\n      type: String\n    }\n  },\n\n  /**\n   * Returns a reference to the focusable element. Overridden from\n   * PaperInputBehavior to correctly focus the native input.\n   *\n   * @return {!HTMLElement}\n   */\n  get _focusableElement() {\n    return this.inputElement._inputElement;\n  },\n\n  // Note: This event is only available in the 1.0 version of this element.\n  // In 2.0, the functionality of `_onIronInputReady` is done in\n  // PaperInputBehavior::attached.\n  listeners: {'iron-input-ready': '_onIronInputReady'},\n\n  _onIronInputReady: function() {\n    // Even though this is only used in the next line, save this for\n    // backwards compatibility, since the native input had this ID until 2.0.5.\n    if (!this.$.nativeInput) {\n      this.$.nativeInput = this.$$('input');\n    }\n    if (this.inputElement &&\n        this._typesThatHaveText.indexOf(this.$.nativeInput.type) !== -1) {\n      this.alwaysFloatLabel = true;\n    }\n\n    // Only validate when attached if the input already has a value.\n    if (!!this.inputElement.bindValue) {\n      this.$.container._handleValueAndAutoValidate(this.inputElement);\n    }\n  },\n});\n","/**\n@license\nCopyright (c) 2015 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at\nhttp://polymer.github.io/LICENSE.txt The complete set of authors may be found at\nhttp://polymer.github.io/AUTHORS.txt The complete set of contributors may be\nfound at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as\npart of the polymer project is also subject to an additional IP rights grant\nfound at http://polymer.github.io/PATENTS.txt\n*/\nimport '@polymer/polymer/polymer-legacy.js';\n\nimport {Polymer} from '@polymer/polymer/lib/legacy/polymer-fn.js';\nimport {html} from '@polymer/polymer/lib/utils/html-tag.js';\n\n/**\n`iron-a11y-announcer` is a singleton element that is intended to add a11y\nto features that require on-demand announcement from screen readers. In\norder to make use of the announcer, it is best to request its availability\nin the announcing element.\n\nExample:\n\n    Polymer({\n\n      is: 'x-chatty',\n\n      attached: function() {\n        // This will create the singleton element if it has not\n        // been created yet:\n        Polymer.IronA11yAnnouncer.requestAvailability();\n      }\n    });\n\nAfter the `iron-a11y-announcer` has been made available, elements can\nmake announces by firing bubbling `iron-announce` events.\n\nExample:\n\n    this.fire('iron-announce', {\n      text: 'This is an announcement!'\n    }, { bubbles: true });\n\nNote: announcements are only audible if you have a screen reader enabled.\n\n@group Iron Elements\n@demo demo/index.html\n*/\nexport const IronA11yAnnouncer = Polymer({\n  _template: html`\n    <style>\n      :host {\n        display: inline-block;\n        position: fixed;\n        clip: rect(0px,0px,0px,0px);\n      }\n    </style>\n    <div aria-live$=\"[[mode]]\">[[_text]]</div>\n`,\n\n  is: 'iron-a11y-announcer',\n\n  properties: {\n\n    /**\n     * The value of mode is used to set the `aria-live` attribute\n     * for the element that will be announced. Valid values are: `off`,\n     * `polite` and `assertive`.\n     */\n    mode: {type: String, value: 'polite'},\n\n    _text: {type: String, value: ''}\n  },\n\n  created: function() {\n    if (!IronA11yAnnouncer.instance) {\n      IronA11yAnnouncer.instance = this;\n    }\n\n    document.body.addEventListener(\n        'iron-announce', this._onIronAnnounce.bind(this));\n  },\n\n  /**\n   * Cause a text string to be announced by screen readers.\n   *\n   * @param {string} text The text that should be announced.\n   */\n  announce: function(text) {\n    this._text = '';\n    this.async(function() {\n      this._text = text;\n    }, 100);\n  },\n\n  _onIronAnnounce: function(event) {\n    if (event.detail && event.detail.text) {\n      this.announce(event.detail.text);\n    }\n  }\n});\n\nIronA11yAnnouncer.instance = null;\n\nIronA11yAnnouncer.requestAvailability = function() {\n  if (!IronA11yAnnouncer.instance) {\n    IronA11yAnnouncer.instance = document.createElement('iron-a11y-announcer');\n  }\n\n  document.body.appendChild(IronA11yAnnouncer.instance);\n};\n"],"sourceRoot":""}