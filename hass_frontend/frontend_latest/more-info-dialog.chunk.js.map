{"version":3,"sources":["webpack:///./src/common/const.ts","webpack:///./src/common/entity/feature_class_names.ts","webpack:///./src/common/util/debounce.ts","webpack:///./src/components/ha-attributes.js","webpack:///./src/components/ha-camera-stream.ts","webpack:///./src/components/ha-climate-control.js","webpack:///./src/components/ha-color-picker.js","webpack:///./src/components/ha-labeled-slider.js","webpack:///./src/components/ha-paper-dropdown-menu.ts","webpack:///./src/components/ha-paper-icon-button-arrow-prev.ts","webpack:///./src/components/ha-paper-slider.js","webpack:///./src/components/ha-water_heater-control.js","webpack:///./src/components/paper-time-input.js","webpack:///./src/data/entity_registry.ts","webpack:///./src/dialogs/ha-more-info-dialog.js","webpack:///./src/dialogs/more-info/controls/more-info-alarm_control_panel.js","webpack:///./src/dialogs/more-info/controls/more-info-automation.js","webpack:///./src/dialogs/more-info/controls/more-info-camera.ts","webpack:///./src/dialogs/more-info/controls/more-info-climate.js","webpack:///./src/dialogs/more-info/controls/more-info-configurator.js","webpack:///./src/dialogs/more-info/controls/more-info-content.ts","webpack:///./src/dialogs/more-info/controls/more-info-cover.js","webpack:///./src/dialogs/more-info/controls/more-info-default.js","webpack:///./src/dialogs/more-info/controls/more-info-fan.js","webpack:///./src/dialogs/more-info/controls/more-info-group.js","webpack:///./src/dialogs/more-info/controls/more-info-history_graph.js","webpack:///./src/dialogs/more-info/controls/more-info-input_datetime.js","webpack:///./src/dialogs/more-info/controls/more-info-light.js","webpack:///./src/dialogs/more-info/controls/more-info-lock.js","webpack:///./src/dialogs/more-info/controls/more-info-media_player.js","webpack:///./src/dialogs/more-info/controls/more-info-script.js","webpack:///./src/dialogs/more-info/controls/more-info-sun.js","webpack:///./src/dialogs/more-info/controls/more-info-updater.js","webpack:///./src/dialogs/more-info/controls/more-info-vacuum.js","webpack:///./src/dialogs/more-info/controls/more-info-water_heater.js","webpack:///./src/dialogs/more-info/controls/more-info-weather.js","webpack:///./src/dialogs/more-info/more-info-controls.js","webpack:///./src/dialogs/more-info/more-info-settings.js","webpack:///./src/mixins/dialog-mixin.js","webpack:///./src/util/hass-attributes-util.js"],"names":["DEFAULT_DOMAIN_ICON","DEFAULT_PANEL","DOMAINS_WITH_CARD","DOMAINS_WITH_MORE_INFO","DOMAINS_HIDE_MORE_INFO","DOMAINS_MORE_INFO_NO_HISTORY","STATES_OFF","DOMAINS_TOGGLE","Set","UNIT_C","UNIT_F","DEFAULT_VIEW_ENTITY_ID","featureClassNames","stateObj","classNames","attributes","supported_features","Object","keys","map","feature","supportsFeature","Number","filter","attr","join","debounce","func","wait","immediate","timeout","args","context","later","apply","callNow","clearTimeout","setTimeout","HaAttributes","PolymerElement","template","html","properties","type","extraFilters","String","value","filtersArray","Array","computed","computeFiltersArray","hassAttributeUtil","LOGIC_STATE_ATTRIBUTES","concat","split","computeDisplayAttributes","key","indexOf","formatAttribute","attribute","replace","formatAttributeValue","isArray","JSON","stringify","computeAttribution","attribution","customElements","define","HaCameraStream","customElement","property","Boolean","undefined","_attached","__DEMO__","_shouldRenderMJPEG","_elementResized","computeMJPEGStreamUrl","computeStateName","showControls","changedProps","stateObjChanged","has","attachedChanged","oldState","get","oldEntityId","entity_id","curEntityId","_destroyPolyfill","_startHls","_forceMJPEG","hass","config","components","includes","CAMERA_SUPPORT_STREAM","shadowRoot","querySelector","Hls","default","hlsSupported","isSupported","videoEl","_videoEl","canPlayType","url","fetchStreamUrl","_renderHLSPolyfill","_renderHLSNative","err","console","error","src","Promise","resolve","addEventListener","play","hls","_hlsPolyfillInstance","attachMedia","on","Events","MEDIA_ATTACHED","loadSource","fireEvent","destroy","css","LitElement","HaClimateControl","EventsMixin","observer","units","min","max","step","temperatureStateInFlux","inFlux","$","target_temperature","classList","toggle","_round","val","s","toString","parseFloat","toFixed","length","Math","round","incrementValue","newval","last_changed","Date","now","decrementValue","valueChanged","window","fire","HaColorPicker","hsColor","desiredHsColor","width","height","radius","hueSegments","saturationSegments","ignoreSegments","throttle","ready","setupLayers","drawColorWheel","drawMarker","interactionLayer","ev","onMouseDown","onTouchStart","convertToCanvasCoordinates","clientX","clientY","svgPoint","createSVGPoint","x","y","cc","matrixTransform","getScreenCTM","inverse","isInWheel","onMouseSelect","canvas","add","onMouseUp","remove","removeEventListener","requestAnimationFrame","processUserSelect","touch","changedTouches","target","marker","preventDefault","onTouchSelect","onTouchEnd","tapBecameScroll","onTap","passive","canvasXY","hs","getColor","onColorSelect","setMarkerOnColor","applySegmentFilter","applyColorToCanvas","colorSelectIsThrottled","ensureFinalSelect","fireColorSelected","h","dist","theta","PI","markerdX","cos","markerdY","sin","translateString","setAttribute","tooltip","style","color","applyHsColor","getAngle","dX","dY","atan2","angle","getDistance","sqrt","hue","relativeDistance","sat","angleStep","halfAngleStep","rest","segmentSize","saturationStep","calculatedSat","floor","backgroundLayer","originX","originY","shadowColor","shadowOffsetX","shadowOffsetY","shadowBlur","getContext","cX","cY","counterClockwise","wheelStyle","getComputedStyle","borderWidth","parseInt","getPropertyValue","borderColor","trim","wheelShadow","values","pop","borderRadius","wheelRadius","shadowRadius","drawCircle","startAngle","endAngle","beginPath","moveTo","arc","closePath","gradient","createRadialGradient","lightness","addColorStop","ratioStep","ratio","stop","prevLighness","fillStyle","fill","drawShadow","save","restore","drawBorder","lineWidth","strokeStyle","stroke","shadow","svgElement","markerradius","tooltipradius","TooltipOffsetY","TooltipOffsetX","document","createElementNS","appendChild","segmentationChange","HaLabeledSlider","caption","disabled","pin","extra","ignoreBarTouch","icon","notify","paperDropdownClass","HaPaperDropdownClass","direction","textAlign","paperIconButtonClass","HaPaperIconButtonArrowPrev","connectedCallback","hassio","PaperSliderClass","HaPaperSlider","tpl","createElement","innerHTML","styleEl","content","HaWaterHeaterControl","PaperTimeInput","label","autoValidate","hideLabel","format","hour","amPm","readOnly","validate","valid","dropdown","_computeTime","_formatMin","_shouldFormatHour","_computeHourMax","_equal","n1","n2","computeEntityRegistryName","entry","name","state","states","updateEntityRegistryEntry","entityId","updates","callWS","removeEntityRegistryEntry","fetchEntityRegistry","conn","sendMessagePromise","subscribeEntityRegistryUpdates","store","subscribeEvents","then","entities","setState","subscribeEntityRegistry","onChange","createCollection","HaMoreInfoDialog","DialogMixin","large","reflectToAttribute","_dialogElement","_registryInfo","_page","dataDomain","observers","detail","page","_computeDomain","computeStateDomain","_computeStateObj","moreInfoEntityId","_stateObjChanged","newVal","oldVal","setProperties","opened","isComponentLoaded","user","is_admin","info","_dialogOpenChanged","_equals","a","b","_largeChanged","notifyResize","MoreInfoAlarmControlPanel","LocalizeMixin","_enteredCode","_codeFormat","_codeValid","_disarmVisible","_armVisible","_inputEnabled","constructor","_armedStates","props","code_format","_isNumber","_validateCode","code","_digitClicked","getAttribute","_clearEnteredCode","_callService","service","data","callService","MoreInfoAutomation","handleTriggerTapped","MoreInfoCamera","_cameraPrefs","preload_stream","_handleCheckboxChanged","_fetchCameraPrefs","fetchCameraPrefs","checkbox","currentTarget","updateCameraPrefs","checked","alert","message","MoreInfoClimate","awayToggleChecked","auxToggleChecked","onToggleChecked","rtl","away_mode","aux_heat","_debouncer","Debouncer","timeOut","after","computeTemperatureStepSize","target_temp_step","unit_system","temperature","supportsTemperatureControls","supportsTemperature","supportsTemperatureRange","target_temp_low","target_temp_high","supportsHumidity","supportsFanMode","supportsOperationMode","supportsSwingMode","supportsAwayMode","supportsAuxHeat","supportsOn","computeClassNames","_featureClassNames","classes","attributeClassNames","push","targetTemperatureChanged","callServiceHelper","targetTemperatureLowChanged","targetTempLow","targetTemperatureHighChanged","targetTempHigh","targetHumiditySliderChanged","humidity","awayToggleChanged","auxToggleChanged","onToggleChanged","handleFanmodeChanged","fan_mode","handleOperationmodeChanged","operation_mode","handleSwingmodeChanged","swing_mode","_localizeOperationMode","localize","mode","_localizeFanMode","_computeRTLDirection","computeRTLDirection","MoreInfoConfigurator","action","isConfigurable","isConfiguring","fieldInput","computeIsConfigurable","fieldChanged","el","submitClicked","configure_id","fields","bind","MoreInfoContent","UpdatingElement","firstUpdated","position","display","update","lastChild","_detachedChild","removeChild","moreInfoType","custom_ui_more_info","stateMoreInfoType","dynamicContentUpdater","toUpperCase","FEATURE_CLASS_NAMES","MoreInfoCover","entityObj","coverPositionSliderValue","coverTiltPositionSliderValue","computeEntityObj","CoverEntity","current_position","current_tilt_position","coverPositionSliderChanged","setCoverPosition","coverTiltPositionSliderChanged","setCoverTiltPosition","MoreInfoDefault","MoreInfoFan","oscillationToggleChecked","oscillating","speedChanged","speed","oscillationToggleChanged","onDirectionLeft","onDirectionRight","computeIsRotatingLeft","computeIsRotatingRight","MoreInfoGroup","computeStates","entIds","i","statesChanged","groupDomainStateObj","groupDomain","baseStateObj","find","assign","dom","groupedControlDetails","MoreInfoHistoryGraph","DatetimeInput","is_ready","selectedDate","selectedHour","selectedMinute","getDateString","monthFiller","month","dayFiller","day","year","dateTimeChanged","changed","minuteFiller","serviceData","has_time","minute","timeStr","time","has_date","dateValInput","dateValState","date","doesHaveDate","doesHaveTime","MoreInfoLight","brightnessSliderValue","ctSliderValue","wvSliderValue","colorPickerColor","brightness","color_temp","white_value","hs_color","effectChanged","effect","brightnessSliderChanged","bri","isNaN","ctSliderChanged","ct","wvSliderChanged","wv","segmentClick","serviceChangeColor","colorPicked","MoreInfoLock","enteredCode","isLocked","MoreInfoMediaPlayer","playerObj","ttsLoaded","ttsMessage","computePlayerObj","HassMediaPlayerEntity","playerObjChanged","computeMuteVolumeIcon","isMuted","computeHideVolumeButtons","supportsVolumeButtons","isOff","computeShowPlaybackControls","hasMediaControl","computePlaybackControlIcon","isPlaying","supportsPause","isIdle","isPaused","supportsPlay","computeHidePowerButton","supportsTurnOn","supportsTurnOff","computeHideSelectSource","supportsSelectSource","sourceList","computeHideSelectSoundMode","supportsSelectSoundMode","soundModeList","computeHideTTS","supportsPlayMedia","computeTTSLoaded","handleTogglePower","togglePower","handlePrevious","previousTrack","handlePlaybackControl","mediaPlayPause","handleNext","nextTrack","handleSourceChanged","source","selectSource","handleSoundModeChanged","soundMode","selectSoundMode","handleVolumeTap","supportsVolumeMute","volumeMute","handleVolumeTouchEnd","handleVolumeUp","obj","volumeUp","handleVolumeWorker","handleVolumeDown","volumeDown","force","pointerDown","volumeSliderChanged","volPercentage","volume","setVolume","ttsCheckForEnter","keyCode","sendTTS","services","tts","serviceKeys","sort","ttsInput","focus","MoreInfoScript","MoreInfoSun","risingDate","settingDate","computeRising","next_rising","computeSetting","next_setting","computeOrder","itemCaption","itemDate","itemValue","formatTime","language","MoreInfoUpdater","computeReleaseNotes","release_notes","MoreInfoVacuum","inDialog","supportsStop","supportsReturnHome","supportsFanSpeed","supportsBattery","supportsStatus","supportsLocate","supportsCleanSpot","supportsStart","supportsCommandBar","fanSpeedChanged","fan_speed","onStop","onPlayPause","onPause","onStart","onLocate","onCleanSpot","onReturnHome","MoreInfoWaterHeater","MoreInfoWeather","cardinalDirections","weatherIcons","cloudy","fog","hail","lightning","partlycloudy","pouring","rainy","snowy","sunny","windy","computeDate","toLocaleDateString","weekday","computeDateTime","getUnit","measure","lengthUnit","windBearingToText","degree","degreenum","isFinite","getWind","bearing","cardinalDirection","toLowerCase","getWeatherIcon","condition","_showValue","item","DOMAINS_NO_INFO","MoreInfoControls","dialogElement","canConfigure","domain","_stateHistory","_stateHistoryLoading","_cacheConfig","refresh","cacheKey","hoursToShow","enlarge","_computeShowStateInfo","_computeShowHistoryComponent","_computeStateName","_gotoSettings","_computeRTL","computeRTL","MoreInfoSettings","registryInfo","_name","_entityId","_computeInvalid","computeDomain","_registryInfoChanged","_backTapped","_save","new_entity_id","dedupingMixin","superClass","mixinBehaviors","PaperDialogBehavior","withBackdrop","DOMAIN_DEVICE_CLASS","binary_sensor","cover","sensor","switch","UNKNOWN_TYPE","ADD_TYPE","TYPE_TO_TAG","string","json","boolean","array","entity_picture","friendly_name","description","emulated_hue","domains","emulated_hue_name","haaska_hidden","haaska_name","homebridge_hidden","homebridge_name","custom_ui_state_card","device_class","options","hidden","assumed_state","initial_state","unit_of_measurement"],"mappings":"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","file":"more-info-dialog.chunk.js","sourcesContent":["/** Constants to be used in the frontend. */\n\n// Constants should be alphabetically sorted by name.\n// Arrays with values should be alphabetically sorted if order doesn't matter.\n// Each constant should have a description what it is supposed to be used for.\n\n/** Icon to use when no icon specified for domain. */\nexport const DEFAULT_DOMAIN_ICON = \"hass:bookmark\";\n\n/** Panel to show when no panel is picked. */\nexport const DEFAULT_PANEL = \"lovelace\";\n\n/** Domains that have a state card. */\nexport const DOMAINS_WITH_CARD = [\n  \"climate\",\n  \"cover\",\n  \"configurator\",\n  \"input_select\",\n  \"input_number\",\n  \"input_text\",\n  \"lock\",\n  \"media_player\",\n  \"scene\",\n  \"script\",\n  \"timer\",\n  \"vacuum\",\n  \"water_heater\",\n  \"weblink\",\n];\n\n/** Domains with separate more info dialog. */\nexport const DOMAINS_WITH_MORE_INFO = [\n  \"alarm_control_panel\",\n  \"automation\",\n  \"camera\",\n  \"climate\",\n  \"configurator\",\n  \"cover\",\n  \"fan\",\n  \"group\",\n  \"history_graph\",\n  \"input_datetime\",\n  \"light\",\n  \"lock\",\n  \"media_player\",\n  \"script\",\n  \"sun\",\n  \"updater\",\n  \"vacuum\",\n  \"water_heater\",\n  \"weather\",\n];\n\n/** Domains that show no more info dialog. */\nexport const DOMAINS_HIDE_MORE_INFO = [\n  \"input_number\",\n  \"input_select\",\n  \"input_text\",\n  \"scene\",\n  \"weblink\",\n];\n\n/** Domains that should have the history hidden in the more info dialog. */\nexport const DOMAINS_MORE_INFO_NO_HISTORY = [\n  \"camera\",\n  \"configurator\",\n  \"history_graph\",\n  \"scene\",\n];\n\n/** States that we consider \"off\". */\nexport const STATES_OFF = [\"closed\", \"locked\", \"off\"];\n\n/** Domains where we allow toggle in Lovelace. */\nexport const DOMAINS_TOGGLE = new Set([\n  \"fan\",\n  \"input_boolean\",\n  \"light\",\n  \"switch\",\n  \"group\",\n  \"automation\",\n]);\n\n/** Temperature units. */\nexport const UNIT_C = \"°C\";\nexport const UNIT_F = \"°F\";\n\n/** Entity ID of the default view. */\nexport const DEFAULT_VIEW_ENTITY_ID = \"group.default_view\";\n","import { HassEntity } from \"home-assistant-js-websocket\";\nimport { supportsFeature } from \"./supports-feature\";\n\n// Expects classNames to be an object mapping feature-bit -> className\nexport default function featureClassNames(\n  stateObj: HassEntity,\n  classNames: { [feature: number]: string }\n) {\n  if (!stateObj || !stateObj.attributes.supported_features) {\n    return \"\";\n  }\n\n  return Object.keys(classNames)\n    .map((feature) =>\n      supportsFeature(stateObj, Number(feature)) ? classNames[feature] : \"\"\n    )\n    .filter((attr) => attr !== \"\")\n    .join(\" \");\n}\n","// From: https://davidwalsh.name/javascript-debounce-function\n\n// Returns a function, that, as long as it continues to be invoked, will not\n// be triggered. The function will be called after it stops being called for\n// N milliseconds. If `immediate` is passed, trigger the function on the\n// leading edge, instead of the trailing.\n// tslint:disable-next-line: ban-types\nexport const debounce = <T extends Function>(\n  func: T,\n  wait,\n  immediate = false\n): T => {\n  let timeout;\n  // @ts-ignore\n  return function(...args) {\n    // tslint:disable:no-this-assignment\n    // @ts-ignore\n    const context = this;\n    const later = () => {\n      timeout = null;\n      if (!immediate) {\n        func.apply(context, args);\n      }\n    };\n    const callNow = immediate && !timeout;\n    clearTimeout(timeout);\n    timeout = setTimeout(later, wait);\n    if (callNow) {\n      func.apply(context, args);\n    }\n  };\n};\n","import \"@polymer/iron-flex-layout/iron-flex-layout-classes\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport hassAttributeUtil from \"../util/hass-attributes-util\";\n\nclass HaAttributes extends PolymerElement {\n  static get template() {\n    return html`\n      <style include=\"iron-flex iron-flex-alignment\"></style>\n      <style>\n        .data-entry .value {\n          max-width: 200px;\n        }\n        .attribution {\n          color: var(--secondary-text-color);\n          text-align: right;\n        }\n      </style>\n\n      <div class=\"layout vertical\">\n        <template\n          is=\"dom-repeat\"\n          items=\"[[computeDisplayAttributes(stateObj, filtersArray)]]\"\n          as=\"attribute\"\n        >\n          <div class=\"data-entry layout justified horizontal\">\n            <div class=\"key\">[[formatAttribute(attribute)]]</div>\n            <div class=\"value\">\n              [[formatAttributeValue(stateObj, attribute)]]\n            </div>\n          </div>\n        </template>\n        <div class=\"attribution\" hidden$=\"[[!computeAttribution(stateObj)]]\">\n          [[computeAttribution(stateObj)]]\n        </div>\n      </div>\n    `;\n  }\n\n  static get properties() {\n    return {\n      stateObj: {\n        type: Object,\n      },\n      extraFilters: {\n        type: String,\n        value: \"\",\n      },\n      filtersArray: {\n        type: Array,\n        computed: \"computeFiltersArray(extraFilters)\",\n      },\n    };\n  }\n\n  computeFiltersArray(extraFilters) {\n    return Object.keys(hassAttributeUtil.LOGIC_STATE_ATTRIBUTES).concat(\n      extraFilters ? extraFilters.split(\",\") : []\n    );\n  }\n\n  computeDisplayAttributes(stateObj, filtersArray) {\n    if (!stateObj) {\n      return [];\n    }\n    return Object.keys(stateObj.attributes).filter(function(key) {\n      return filtersArray.indexOf(key) === -1;\n    });\n  }\n\n  formatAttribute(attribute) {\n    return attribute.replace(/_/g, \" \");\n  }\n\n  formatAttributeValue(stateObj, attribute) {\n    var value = stateObj.attributes[attribute];\n    if (value === null) return \"-\";\n    if (Array.isArray(value)) {\n      return value.join(\", \");\n    }\n    return value instanceof Object ? JSON.stringify(value, null, 2) : value;\n  }\n\n  computeAttribution(stateObj) {\n    return stateObj.attributes.attribution;\n  }\n}\n\ncustomElements.define(\"ha-attributes\", HaAttributes);\n","import {\n  property,\n  PropertyValues,\n  LitElement,\n  TemplateResult,\n  html,\n  CSSResult,\n  css,\n  customElement,\n} from \"lit-element\";\n\nimport computeStateName from \"../common/entity/compute_state_name\";\nimport { HomeAssistant, CameraEntity } from \"../types\";\nimport { fireEvent } from \"../common/dom/fire_event\";\nimport {\n  CAMERA_SUPPORT_STREAM,\n  fetchStreamUrl,\n  computeMJPEGStreamUrl,\n} from \"../data/camera\";\nimport { supportsFeature } from \"../common/entity/supports-feature\";\n\ntype HLSModule = typeof import(\"hls.js\");\n\n@customElement(\"ha-camera-stream\")\nclass HaCameraStream extends LitElement {\n  @property() public hass?: HomeAssistant;\n  @property() public stateObj?: CameraEntity;\n  @property({ type: Boolean }) public showControls = false;\n  @property() private _attached = false;\n  // We keep track if we should force MJPEG with a string\n  // that way it automatically resets if we change entity.\n  @property() private _forceMJPEG: string | undefined = undefined;\n  private _hlsPolyfillInstance?: Hls;\n\n  public connectedCallback() {\n    super.connectedCallback();\n    this._attached = true;\n  }\n\n  public disconnectedCallback() {\n    super.disconnectedCallback();\n    this._attached = false;\n  }\n\n  protected render(): TemplateResult | void {\n    if (!this.stateObj || !this._attached) {\n      return html``;\n    }\n\n    return html`\n      ${__DEMO__ || this._shouldRenderMJPEG\n        ? html`\n            <img\n              @load=${this._elementResized}\n              .src=${__DEMO__\n                ? `/api/camera_proxy_stream/${this.stateObj.entity_id}`\n                : computeMJPEGStreamUrl(this.stateObj)}\n              .alt=${computeStateName(this.stateObj)}\n            />\n          `\n        : html`\n            <video\n              autoplay\n              muted\n              playsinline\n              ?controls=${this.showControls}\n              @loadeddata=${this._elementResized}\n            ></video>\n          `}\n    `;\n  }\n\n  protected updated(changedProps: PropertyValues) {\n    super.updated(changedProps);\n\n    const stateObjChanged = changedProps.has(\"stateObj\");\n    const attachedChanged = changedProps.has(\"_attached\");\n\n    const oldState = changedProps.get(\"stateObj\") as this[\"stateObj\"];\n    const oldEntityId = oldState ? oldState.entity_id : undefined;\n    const curEntityId = this.stateObj ? this.stateObj.entity_id : undefined;\n\n    if (\n      (!stateObjChanged && !attachedChanged) ||\n      (stateObjChanged && oldEntityId === curEntityId)\n    ) {\n      return;\n    }\n\n    // If we are no longer attached, destroy polyfill.\n    if (attachedChanged && !this._attached) {\n      this._destroyPolyfill();\n      return;\n    }\n\n    // Nothing to do if we are render MJPEG.\n    if (this._shouldRenderMJPEG) {\n      return;\n    }\n\n    // Tear down existing polyfill, if available\n    this._destroyPolyfill();\n\n    if (curEntityId) {\n      this._startHls();\n    }\n  }\n\n  private get _shouldRenderMJPEG() {\n    return (\n      this._forceMJPEG === this.stateObj!.entity_id ||\n      !this.hass!.config.components.includes(\"stream\") ||\n      !supportsFeature(this.stateObj!, CAMERA_SUPPORT_STREAM)\n    );\n  }\n\n  private get _videoEl(): HTMLVideoElement {\n    return this.shadowRoot!.querySelector(\"video\")!;\n  }\n\n  private async _startHls(): Promise<void> {\n    // tslint:disable-next-line\n    const Hls = ((await import(/* webpackChunkName: \"hls.js\" */ \"hls.js\")) as any)\n      .default as HLSModule;\n    let hlsSupported = Hls.isSupported();\n    const videoEl = this._videoEl;\n\n    if (!hlsSupported) {\n      hlsSupported =\n        videoEl.canPlayType(\"application/vnd.apple.mpegurl\") !== \"\";\n    }\n\n    if (!hlsSupported) {\n      this._forceMJPEG = this.stateObj!.entity_id;\n      return;\n    }\n\n    try {\n      const { url } = await fetchStreamUrl(\n        this.hass!,\n        this.stateObj!.entity_id\n      );\n\n      if (Hls.isSupported()) {\n        this._renderHLSPolyfill(videoEl, Hls, url);\n      } else {\n        this._renderHLSNative(videoEl, url);\n      }\n      return;\n    } catch (err) {\n      // Fails if we were unable to get a stream\n      // tslint:disable-next-line\n      console.error(err);\n      this._forceMJPEG = this.stateObj!.entity_id;\n    }\n  }\n\n  private async _renderHLSNative(videoEl: HTMLVideoElement, url: string) {\n    videoEl.src = url;\n    await new Promise((resolve) =>\n      videoEl.addEventListener(\"loadedmetadata\", resolve)\n    );\n    videoEl.play();\n  }\n\n  private async _renderHLSPolyfill(\n    videoEl: HTMLVideoElement,\n    // tslint:disable-next-line\n    Hls: HLSModule,\n    url: string\n  ) {\n    const hls = new Hls();\n    this._hlsPolyfillInstance = hls;\n    hls.attachMedia(videoEl);\n    hls.on(Hls.Events.MEDIA_ATTACHED, () => {\n      hls.loadSource(url);\n    });\n  }\n\n  private _elementResized() {\n    fireEvent(this, \"iron-resize\");\n  }\n\n  private _destroyPolyfill(): void {\n    if (this._hlsPolyfillInstance) {\n      this._hlsPolyfillInstance.destroy();\n      this._hlsPolyfillInstance = undefined;\n    }\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      :host,\n      img,\n      video {\n        display: block;\n      }\n\n      img,\n      video {\n        width: 100%;\n      }\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-camera-stream\": HaCameraStream;\n  }\n}\n","import \"@polymer/iron-flex-layout/iron-flex-layout-classes\";\nimport \"@polymer/paper-icon-button/paper-icon-button\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport { EventsMixin } from \"../mixins/events-mixin\";\n\n/*\n * @appliesMixin EventsMixin\n */\nclass HaClimateControl extends EventsMixin(PolymerElement) {\n  static get template() {\n    return html`\n      <style include=\"iron-flex iron-flex-alignment\"></style>\n      <style>\n        /* local DOM styles go here */\n        :host {\n          @apply --layout-flex;\n          @apply --layout-horizontal;\n          @apply --layout-justified;\n        }\n        .in-flux#target_temperature {\n          color: var(--google-red-500);\n        }\n        #target_temperature {\n          @apply --layout-self-center;\n          font-size: 200%;\n          direction: ltr;\n        }\n        .control-buttons {\n          font-size: 200%;\n          text-align: right;\n        }\n        paper-icon-button {\n          height: 48px;\n          width: 48px;\n        }\n      </style>\n\n      <!-- local DOM goes here -->\n      <div id=\"target_temperature\">[[value]] [[units]]</div>\n      <div class=\"control-buttons\">\n        <div>\n          <paper-icon-button\n            icon=\"hass:chevron-up\"\n            on-click=\"incrementValue\"\n          ></paper-icon-button>\n        </div>\n        <div>\n          <paper-icon-button\n            icon=\"hass:chevron-down\"\n            on-click=\"decrementValue\"\n          ></paper-icon-button>\n        </div>\n      </div>\n    `;\n  }\n\n  static get properties() {\n    return {\n      value: {\n        type: Number,\n        observer: \"valueChanged\",\n      },\n      units: {\n        type: String,\n      },\n      min: {\n        type: Number,\n      },\n      max: {\n        type: Number,\n      },\n      step: {\n        type: Number,\n        value: 1,\n      },\n    };\n  }\n\n  temperatureStateInFlux(inFlux) {\n    this.$.target_temperature.classList.toggle(\"in-flux\", inFlux);\n  }\n\n  _round(val) {\n    // round value to precision derived from step\n    // insired by https://github.com/soundar24/roundSlider/blob/master/src/roundslider.js\n    const s = this.step.toString().split(\".\");\n    return s[1] ? parseFloat(val.toFixed(s[1].length)) : Math.round(val);\n  }\n\n  incrementValue() {\n    const newval = this._round(this.value + this.step);\n    if (this.value < this.max) {\n      this.last_changed = Date.now();\n      this.temperatureStateInFlux(true);\n    }\n    if (newval <= this.max) {\n      // If no initial target_temp\n      // this forces control to start\n      // from the min configured instead of 0\n      if (newval <= this.min) {\n        this.value = this.min;\n      } else {\n        this.value = newval;\n      }\n    } else {\n      this.value = this.max;\n    }\n  }\n\n  decrementValue() {\n    const newval = this._round(this.value - this.step);\n    if (this.value > this.min) {\n      this.last_changed = Date.now();\n      this.temperatureStateInFlux(true);\n    }\n    if (newval >= this.min) {\n      this.value = newval;\n    } else {\n      this.value = this.min;\n    }\n  }\n\n  valueChanged() {\n    // when the last_changed timestamp is changed,\n    // trigger a potential event fire in\n    // the future, as long as last changed is far enough in the\n    // past.\n    if (this.last_changed) {\n      window.setTimeout(() => {\n        const now = Date.now();\n        if (now - this.last_changed >= 2000) {\n          this.fire(\"change\");\n          this.temperatureStateInFlux(false);\n          this.last_changed = null;\n        }\n      }, 2010);\n    }\n  }\n}\n\ncustomElements.define(\"ha-climate-control\", HaClimateControl);\n","import { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport { EventsMixin } from \"../mixins/events-mixin\";\n\n/**\n * Color-picker custom element\n *\n * @appliesMixin EventsMixin\n */\nclass HaColorPicker extends EventsMixin(PolymerElement) {\n  static get template() {\n    return html`\n      <style>\n        :host {\n          user-select: none;\n          -webkit-user-select: none;\n        }\n\n        #canvas {\n          position: relative;\n          width: 100%;\n          max-width: 330px;\n        }\n        #canvas > * {\n          display: block;\n        }\n        #interactionLayer {\n          color: white;\n          position: absolute;\n          cursor: crosshair;\n          width: 100%;\n          height: 100%;\n          overflow: visible;\n        }\n        #backgroundLayer {\n          width: 100%;\n          overflow: visible;\n          --wheel-bordercolor: var(--ha-color-picker-wheel-bordercolor, white);\n          --wheel-borderwidth: var(--ha-color-picker-wheel-borderwidth, 3);\n          --wheel-shadow: var(\n            --ha-color-picker-wheel-shadow,\n            rgb(15, 15, 15) 10px 5px 5px 0px\n          );\n        }\n\n        #marker {\n          fill: currentColor;\n          stroke: var(--ha-color-picker-marker-bordercolor, white);\n          stroke-width: var(--ha-color-picker-marker-borderwidth, 3);\n          filter: url(#marker-shadow);\n        }\n        .dragging #marker {\n        }\n\n        #colorTooltip {\n          display: none;\n          fill: currentColor;\n          stroke: var(--ha-color-picker-tooltip-bordercolor, white);\n          stroke-width: var(--ha-color-picker-tooltip-borderwidth, 3);\n        }\n\n        .touch.dragging #colorTooltip {\n          display: inherit;\n        }\n      </style>\n      <div id=\"canvas\">\n        <svg id=\"interactionLayer\">\n          <defs>\n            <filter\n              id=\"marker-shadow\"\n              x=\"-50%\"\n              y=\"-50%\"\n              width=\"200%\"\n              height=\"200%\"\n              filterUnits=\"objectBoundingBox\"\n            >\n              <feOffset\n                result=\"offOut\"\n                in=\"SourceAlpha\"\n                dx=\"2\"\n                dy=\"2\"\n              ></feOffset>\n              <feGaussianBlur\n                result=\"blurOut\"\n                in=\"offOut\"\n                stdDeviation=\"2\"\n              ></feGaussianBlur>\n              <feComponentTransfer in=\"blurOut\" result=\"alphaOut\">\n                <feFuncA type=\"linear\" slope=\"0.3\"></feFuncA>\n              </feComponentTransfer>\n              <feBlend\n                in=\"SourceGraphic\"\n                in2=\"alphaOut\"\n                mode=\"normal\"\n              ></feBlend>\n            </filter>\n          </defs>\n        </svg>\n        <canvas id=\"backgroundLayer\"></canvas>\n      </div>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hsColor: {\n        type: Object,\n      },\n\n      // use these properties to update the state via attributes\n      desiredHsColor: {\n        type: Object,\n        observer: \"applyHsColor\",\n      },\n\n      // width, height and radius apply to the coordinates of\n      // of the canvas.\n      // border width are relative to these numbers\n      // the onscreen displayed size should be controlled with css\n      // and should be the same or smaller\n      width: {\n        type: Number,\n        value: 500,\n      },\n\n      height: {\n        type: Number,\n        value: 500,\n      },\n\n      radius: {\n        type: Number,\n        value: 225,\n      },\n\n      // the amount segments for the hue\n      // 0 = continuous gradient\n      // other than 0 gives 'pie-pieces'\n      hueSegments: {\n        type: Number,\n        value: 0,\n        observer: \"segmentationChange\",\n      },\n\n      // the amount segments for the hue\n      // 0 = continuous gradient\n      // 1 = only fully saturated\n      // > 1 = segments from white to fully saturated\n      saturationSegments: {\n        type: Number,\n        value: 0,\n        observer: \"segmentationChange\",\n      },\n\n      // set to true to make the segments purely esthetical\n      // this allows selection off all collors, also\n      // interpolated between the segments\n      ignoreSegments: {\n        type: Boolean,\n        value: false,\n      },\n\n      // throttle te amount of 'colorselected' events fired\n      // value is timeout in milliseconds\n      throttle: {\n        type: Number,\n        value: 500,\n      },\n    };\n  }\n\n  ready() {\n    super.ready();\n    this.setupLayers();\n    this.drawColorWheel();\n    this.drawMarker();\n\n    this.interactionLayer.addEventListener(\"mousedown\", (ev) =>\n      this.onMouseDown(ev)\n    );\n    this.interactionLayer.addEventListener(\"touchstart\", (ev) =>\n      this.onTouchStart(ev)\n    );\n  }\n\n  // converts browser coordinates to canvas canvas coordinates\n  // origin is wheel center\n  // returns {x: X, y: Y} object\n  convertToCanvasCoordinates(clientX, clientY) {\n    var svgPoint = this.interactionLayer.createSVGPoint();\n    svgPoint.x = clientX;\n    svgPoint.y = clientY;\n    var cc = svgPoint.matrixTransform(\n      this.interactionLayer.getScreenCTM().inverse()\n    );\n    return { x: cc.x, y: cc.y };\n  }\n\n  // Mouse events\n\n  onMouseDown(ev) {\n    const cc = this.convertToCanvasCoordinates(ev.clientX, ev.clientY);\n    // return if we're not on the wheel\n    if (!this.isInWheel(cc.x, cc.y)) {\n      return;\n    }\n    // a mousedown in wheel is always a color select action\n    this.onMouseSelect(ev);\n    // allow dragging\n    this.canvas.classList.add(\"mouse\", \"dragging\");\n    this.addEventListener(\"mousemove\", this.onMouseSelect);\n    this.addEventListener(\"mouseup\", this.onMouseUp);\n  }\n\n  onMouseUp() {\n    this.canvas.classList.remove(\"mouse\", \"dragging\");\n    this.removeEventListener(\"mousemove\", this.onMouseSelect);\n  }\n\n  onMouseSelect(ev) {\n    requestAnimationFrame(() => this.processUserSelect(ev));\n  }\n\n  // Touch events\n\n  onTouchStart(ev) {\n    var touch = ev.changedTouches[0];\n    const cc = this.convertToCanvasCoordinates(touch.clientX, touch.clientY);\n    // return if we're not on the wheel\n    if (!this.isInWheel(cc.x, cc.y)) {\n      return;\n    }\n    if (ev.target === this.marker) {\n      // drag marker\n      ev.preventDefault();\n      this.canvas.classList.add(\"touch\", \"dragging\");\n      this.addEventListener(\"touchmove\", this.onTouchSelect);\n      this.addEventListener(\"touchend\", this.onTouchEnd);\n      return;\n    }\n    // don't fire color selection immediately,\n    // wait for touchend and invalidate when we scroll\n    this.tapBecameScroll = false;\n    this.addEventListener(\"touchend\", this.onTap);\n    this.addEventListener(\n      \"touchmove\",\n      () => {\n        this.tapBecameScroll = true;\n      },\n      { passive: true }\n    );\n  }\n\n  onTap(ev) {\n    if (this.tapBecameScroll) {\n      return;\n    }\n    ev.preventDefault();\n    this.onTouchSelect(ev);\n  }\n\n  onTouchEnd() {\n    this.canvas.classList.remove(\"touch\", \"dragging\");\n    this.removeEventListener(\"touchmove\", this.onTouchSelect);\n  }\n\n  onTouchSelect(ev) {\n    requestAnimationFrame(() => this.processUserSelect(ev.changedTouches[0]));\n  }\n\n  /*\n   * General event/selection handling\n   */\n\n  // Process user input to color\n  processUserSelect(ev) {\n    var canvasXY = this.convertToCanvasCoordinates(ev.clientX, ev.clientY);\n    var hs = this.getColor(canvasXY.x, canvasXY.y);\n    this.onColorSelect(hs);\n  }\n\n  // apply color to marker position and canvas\n  onColorSelect(hs) {\n    this.setMarkerOnColor(hs); // marker always follows mounse 'raw' hs value (= mouse position)\n    if (!this.ignoreSegments) {\n      // apply segments if needed\n      hs = this.applySegmentFilter(hs);\n    }\n    // always apply the new color to the interface / canvas\n    this.applyColorToCanvas(hs);\n    // throttling is applied to updating the exposed colors (properties)\n    // and firing of events\n    if (this.colorSelectIsThrottled) {\n      // make sure we apply the last selected color\n      // eventually after throttle limit has passed\n      clearTimeout(this.ensureFinalSelect);\n      this.ensureFinalSelect = setTimeout(() => {\n        this.fireColorSelected(hs); // do it for the final time\n      }, this.throttle);\n      return;\n    }\n    this.fireColorSelected(hs); // do it\n    this.colorSelectIsThrottled = true;\n    setTimeout(() => {\n      this.colorSelectIsThrottled = false;\n    }, this.throttle);\n  }\n\n  // set color values and fire colorselected event\n  fireColorSelected(hs) {\n    this.hsColor = hs;\n    this.fire(\"colorselected\", { hs: { h: hs.h, s: hs.s } });\n  }\n\n  /*\n   * Interface updating\n   */\n\n  // set marker position to the given color\n  setMarkerOnColor(hs) {\n    var dist = hs.s * this.radius;\n    var theta = ((hs.h - 180) / 180) * Math.PI;\n    var markerdX = -dist * Math.cos(theta);\n    var markerdY = -dist * Math.sin(theta);\n    var translateString = `translate(${markerdX},${markerdY})`;\n    this.marker.setAttribute(\"transform\", translateString);\n    this.tooltip.setAttribute(\"transform\", translateString);\n  }\n\n  // apply given color to interface elements\n  applyColorToCanvas(hs) {\n    // we're not really converting hs to hsl here, but we keep it cheap\n    // setting the color on the interactionLayer, the svg elements can inherit\n    this.interactionLayer.style.color = `hsl(${hs.h}, 100%, ${100 -\n      hs.s * 50}%)`;\n  }\n\n  applyHsColor(hs) {\n    // do nothing is we already have the same color\n    if (this.hsColor && this.hsColor.h === hs.h && this.hsColor.s === hs.s) {\n      return;\n    }\n    this.setMarkerOnColor(hs); // marker is always set on 'raw' hs position\n    if (!this.ignoreSegments) {\n      // apply segments if needed\n      hs = this.applySegmentFilter(hs);\n    }\n    this.hsColor = hs;\n    // always apply the new color to the interface / canvas\n    this.applyColorToCanvas(hs);\n  }\n\n  /*\n   * input processing helpers\n   */\n\n  // get angle (degrees)\n  getAngle(dX, dY) {\n    var theta = Math.atan2(-dY, -dX); // radians from the left edge, clockwise = positive\n    var angle = (theta / Math.PI) * 180 + 180; // degrees, clockwise from right\n    return angle;\n  }\n\n  // returns true when coordinates are in the colorwheel\n  isInWheel(x, y) {\n    return this.getDistance(x, y) <= 1;\n  }\n\n  // returns distance from wheel center, 0 = center, 1 = edge, >1 = outside\n  getDistance(dX, dY) {\n    return Math.sqrt(dX * dX + dY * dY) / this.radius;\n  }\n\n  /*\n   * Getting colors\n   */\n\n  getColor(x, y) {\n    var hue = this.getAngle(x, y); // degrees, clockwise from right\n    var relativeDistance = this.getDistance(x, y); // edge of radius = 1\n    var sat = Math.min(relativeDistance, 1); // Distance from center\n    return { h: hue, s: sat };\n  }\n\n  applySegmentFilter(hs) {\n    // apply hue segment steps\n    if (this.hueSegments) {\n      const angleStep = 360 / this.hueSegments;\n      const halfAngleStep = angleStep / 2;\n      hs.h -= halfAngleStep; // take the 'centered segemnts' into account\n      if (hs.h < 0) {\n        hs.h += 360;\n      } // don't end up below 0\n      const rest = hs.h % angleStep;\n      hs.h -= rest - angleStep;\n    }\n\n    // apply saturation segment steps\n    if (this.saturationSegments) {\n      if (this.saturationSegments === 1) {\n        hs.s = 1;\n      } else {\n        var segmentSize = 1 / this.saturationSegments;\n        var saturationStep = 1 / (this.saturationSegments - 1);\n        var calculatedSat = Math.floor(hs.s / segmentSize) * saturationStep;\n        hs.s = Math.min(calculatedSat, 1);\n      }\n    }\n    return hs;\n  }\n\n  /*\n   * Drawing related stuff\n   */\n\n  setupLayers() {\n    this.canvas = this.$.canvas;\n    this.backgroundLayer = this.$.backgroundLayer;\n    this.interactionLayer = this.$.interactionLayer;\n\n    // coordinate origin position (center of the wheel)\n    this.originX = this.width / 2;\n    this.originY = this.originX;\n\n    // synchronise width/height coordinates\n    this.backgroundLayer.width = this.width;\n    this.backgroundLayer.height = this.height;\n    this.interactionLayer.setAttribute(\n      \"viewBox\",\n      `${-this.originX} ${-this.originY} ${this.width} ${this.height}`\n    );\n  }\n\n  drawColorWheel() {\n    /*\n     *  Setting up all paremeters\n     */\n    let shadowColor;\n    let shadowOffsetX;\n    let shadowOffsetY;\n    let shadowBlur;\n    const context = this.backgroundLayer.getContext(\"2d\");\n    // postioning and sizing\n    const cX = this.originX;\n    const cY = this.originY;\n    const radius = this.radius;\n    const counterClockwise = false;\n    // styling of the wheel\n    const wheelStyle = window.getComputedStyle(this.backgroundLayer, null);\n    const borderWidth = parseInt(\n      wheelStyle.getPropertyValue(\"--wheel-borderwidth\"),\n      10\n    );\n    const borderColor = wheelStyle\n      .getPropertyValue(\"--wheel-bordercolor\")\n      .trim();\n    const wheelShadow = wheelStyle.getPropertyValue(\"--wheel-shadow\").trim();\n    // extract shadow properties from  CCS variable\n    // the shadow should be defined as: \"10px 5px 5px 0px COLOR\"\n    if (wheelShadow !== \"none\") {\n      const values = wheelShadow.split(\"px \");\n      shadowColor = values.pop();\n      shadowOffsetX = parseInt(values[0], 10);\n      shadowOffsetY = parseInt(values[1], 10);\n      shadowBlur = parseInt(values[2], 10) || 0;\n    }\n    const borderRadius = radius + borderWidth / 2;\n    const wheelRadius = radius;\n    const shadowRadius = radius + borderWidth;\n\n    /*\n     *  Drawing functions\n     */\n    function drawCircle(hueSegments, saturationSegments) {\n      hueSegments = hueSegments || 360; // reset 0 segments to 360\n      const angleStep = 360 / hueSegments;\n      const halfAngleStep = angleStep / 2; // center segments on color\n      for (var angle = 0; angle <= 360; angle += angleStep) {\n        var startAngle = (angle - halfAngleStep) * (Math.PI / 180);\n        var endAngle = (angle + halfAngleStep + 1) * (Math.PI / 180);\n        context.beginPath();\n        context.moveTo(cX, cY);\n        context.arc(\n          cX,\n          cY,\n          wheelRadius,\n          startAngle,\n          endAngle,\n          counterClockwise\n        );\n        context.closePath();\n        // gradient\n        var gradient = context.createRadialGradient(\n          cX,\n          cY,\n          0,\n          cX,\n          cY,\n          wheelRadius\n        );\n        let lightness = 100;\n        // first gradient stop\n        gradient.addColorStop(0, `hsl(${angle}, 100%, ${lightness}%)`);\n        // segment gradient stops\n        if (saturationSegments > 0) {\n          const ratioStep = 1 / saturationSegments;\n          let ratio = 0;\n          for (var stop = 1; stop < saturationSegments; stop += 1) {\n            var prevLighness = lightness;\n            ratio = stop * ratioStep;\n            lightness = 100 - 50 * ratio;\n            gradient.addColorStop(\n              ratio,\n              `hsl(${angle}, 100%, ${prevLighness}%)`\n            );\n            gradient.addColorStop(ratio, `hsl(${angle}, 100%, ${lightness}%)`);\n          }\n          gradient.addColorStop(ratio, `hsl(${angle}, 100%, 50%)`);\n        }\n        // last gradient stop\n        gradient.addColorStop(1, `hsl(${angle}, 100%, 50%)`);\n\n        context.fillStyle = gradient;\n        context.fill();\n      }\n    }\n\n    function drawShadow() {\n      context.save();\n      context.beginPath();\n      context.arc(cX, cY, shadowRadius, 0, 2 * Math.PI, false);\n      context.shadowColor = shadowColor;\n      context.shadowOffsetX = shadowOffsetX;\n      context.shadowOffsetY = shadowOffsetY;\n      context.shadowBlur = shadowBlur;\n      context.fillStyle = \"white\";\n      context.fill();\n      context.restore();\n    }\n\n    function drawBorder() {\n      context.beginPath();\n      context.arc(cX, cY, borderRadius, 0, 2 * Math.PI, false);\n      context.lineWidth = borderWidth;\n      context.strokeStyle = borderColor;\n      context.stroke();\n    }\n\n    /*\n     *   Call the drawing functions\n     *   draws the shadow, wheel and border\n     */\n    if (wheelStyle.shadow !== \"none\") {\n      drawShadow();\n    }\n    drawCircle(this.hueSegments, this.saturationSegments);\n    if (borderWidth > 0) {\n      drawBorder();\n    }\n  }\n\n  /*\n   *   Draw the (draggable) marker and tooltip\n   *   on the interactionLayer)\n   */\n\n  drawMarker() {\n    const svgElement = this.interactionLayer;\n    const markerradius = this.radius * 0.08;\n    const tooltipradius = this.radius * 0.15;\n    const TooltipOffsetY = -(tooltipradius * 3);\n    const TooltipOffsetX = 0;\n\n    svgElement.marker = document.createElementNS(\n      \"http://www.w3.org/2000/svg\",\n      \"circle\"\n    );\n    svgElement.marker.setAttribute(\"id\", \"marker\");\n    svgElement.marker.setAttribute(\"r\", markerradius);\n    this.marker = svgElement.marker;\n    svgElement.appendChild(svgElement.marker);\n\n    svgElement.tooltip = document.createElementNS(\n      \"http://www.w3.org/2000/svg\",\n      \"circle\"\n    );\n    svgElement.tooltip.setAttribute(\"id\", \"colorTooltip\");\n    svgElement.tooltip.setAttribute(\"r\", tooltipradius);\n    svgElement.tooltip.setAttribute(\"cx\", TooltipOffsetX);\n    svgElement.tooltip.setAttribute(\"cy\", TooltipOffsetY);\n    this.tooltip = svgElement.tooltip;\n    svgElement.appendChild(svgElement.tooltip);\n  }\n\n  segmentationChange() {\n    if (this.backgroundLayer) {\n      this.drawColorWheel();\n    }\n  }\n}\ncustomElements.define(\"ha-color-picker\", HaColorPicker);\n","import { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport \"./ha-paper-slider\";\nimport \"./ha-icon\";\n\nclass HaLabeledSlider extends PolymerElement {\n  static get template() {\n    return html`\n      <style>\n        :host {\n          display: block;\n        }\n\n        .title {\n          margin-bottom: 16px;\n          opacity: var(--dark-primary-opacity);\n        }\n\n        ha-icon {\n          float: left;\n          margin-top: 4px;\n          opacity: var(--dark-secondary-opacity);\n        }\n\n        ha-paper-slider {\n          background-image: var(--ha-slider-background);\n        }\n      </style>\n\n      <div class=\"title\">[[caption]]</div>\n      <div class=\"extra-container\"><slot name=\"extra\"></slot></div>\n      <div class=\"slider-container\">\n        <ha-icon icon=\"[[icon]]\" hidden$=\"[[!icon]]\"></ha-icon>\n        <ha-paper-slider\n          min=\"[[min]]\"\n          max=\"[[max]]\"\n          step=\"[[step]]\"\n          pin=\"[[pin]]\"\n          disabled=\"[[disabled]]\"\n          disabled=\"[[disabled]]\"\n          value=\"{{value}}\"\n        ></ha-paper-slider>\n      </div>\n    `;\n  }\n\n  static get properties() {\n    return {\n      caption: String,\n      disabled: Boolean,\n      min: Number,\n      max: Number,\n      pin: Boolean,\n      step: Number,\n\n      extra: {\n        type: Boolean,\n        value: false,\n      },\n      ignoreBarTouch: {\n        type: Boolean,\n        value: true,\n      },\n      icon: {\n        type: String,\n        value: \"\",\n      },\n      value: {\n        type: Number,\n        notify: true,\n      },\n    };\n  }\n}\n\ncustomElements.define(\"ha-labeled-slider\", HaLabeledSlider);\n","import \"@polymer/paper-dropdown-menu/paper-dropdown-menu\";\nimport { Constructor } from \"lit-element\";\nimport { PolymerElement } from \"@polymer/polymer\";\n\nconst paperDropdownClass = customElements.get(\n  \"paper-dropdown-menu\"\n) as Constructor<PolymerElement>;\n\n// patches paper drop down to properly support RTL - https://github.com/PolymerElements/paper-dropdown-menu/issues/183\nexport class HaPaperDropdownClass extends paperDropdownClass {\n  public ready() {\n    super.ready();\n    // wait to check for direction since otherwise direction is wrong even though top level is RTL\n    setTimeout(() => {\n      if (window.getComputedStyle(this).direction === \"rtl\") {\n        this.style.textAlign = \"right\";\n      }\n    }, 100);\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-paper-dropdown-menu\": HaPaperDropdownClass;\n  }\n}\n\ncustomElements.define(\"ha-paper-dropdown-menu\", HaPaperDropdownClass);\n","import { Constructor } from \"lit-element\";\nimport \"@polymer/paper-icon-button/paper-icon-button\";\n// Not duplicate, this is for typing.\n// tslint:disable-next-line\nimport { PaperIconButtonElement } from \"@polymer/paper-icon-button/paper-icon-button\";\n\nconst paperIconButtonClass = customElements.get(\n  \"paper-icon-button\"\n) as Constructor<PaperIconButtonElement>;\n\nexport class HaPaperIconButtonArrowPrev extends paperIconButtonClass {\n  public hassio?: boolean;\n\n  public connectedCallback() {\n    this.icon =\n      window.getComputedStyle(this).direction === \"ltr\"\n        ? this.hassio\n          ? \"hassio:arrow-left\"\n          : \"hass:arrow-left\"\n        : this.hassio\n        ? \"hassio:arrow-right\"\n        : \"hass:arrow-right\";\n\n    // calling super after setting icon to have it consistently show the icon (otherwise not always shown)\n    super.connectedCallback();\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-paper-icon-button-arrow-prev\": HaPaperIconButtonArrowPrev;\n  }\n}\n\ncustomElements.define(\n  \"ha-paper-icon-button-arrow-prev\",\n  HaPaperIconButtonArrowPrev\n);\n","import \"@polymer/paper-slider/paper-slider\";\n\n/**\n * @polymer\n * @customElement\n * @appliesMixin paper-slider\n */\nconst PaperSliderClass = customElements.get(\"paper-slider\");\n\nclass HaPaperSlider extends PaperSliderClass {\n  static get template() {\n    const tpl = document.createElement(\"template\");\n    tpl.innerHTML = PaperSliderClass.template.innerHTML;\n    const styleEl = document.createElement(\"style\");\n    styleEl.innerHTML = `\n      .pin > .slider-knob > .slider-knob-inner {\n        font-size:  var(--ha-paper-slider-pin-font-size, 10px);\n        line-height: normal;\n      }\n\n      .pin > .slider-knob > .slider-knob-inner::before {\n        top: unset;\n        margin-left: unset;\n\n        bottom: calc(15px + var(--calculated-paper-slider-height)/2);\n        left: 50%;\n        width: 2.2em;\n        height: 2.2em;\n\n        -webkit-transform-origin: left bottom;\n        transform-origin: left bottom;\n        -webkit-transform: rotate(-45deg) scale(0) translate(0);\n        transform: rotate(-45deg) scale(0) translate(0);\n      }\n\n      .pin.expand > .slider-knob > .slider-knob-inner::before {\n        -webkit-transform: rotate(-45deg) scale(1) translate(7px, -7px);\n        transform: rotate(-45deg) scale(1) translate(7px, -7px);\n      }\n\n      .pin > .slider-knob > .slider-knob-inner::after {\n        top: unset;\n        font-size: unset;\n\n        bottom: calc(15px + var(--calculated-paper-slider-height)/2);\n        left: 50%;\n        margin-left: -1.1em;\n        width: 2.2em;\n        height: 2.1em;\n\n        -webkit-transform-origin: center bottom;\n        transform-origin: center bottom;\n        -webkit-transform: scale(0) translate(0);\n        transform: scale(0) translate(0);\n      }\n\n      .pin.expand > .slider-knob > .slider-knob-inner::after {\n        -webkit-transform: scale(1) translate(0, -10px);\n        transform: scale(1) translate(0, -10px);\n      }\n\n      :host([dir=\"rtl\"]) .pin.expand > .slider-knob > .slider-knob-inner::after {\n        -webkit-transform: scale(1) translate(0, -17px) scaleX(-1) !important;\n        transform: scale(1) translate(0, -17px) scaleX(-1) !important;\n        }\n    `;\n    tpl.content.appendChild(styleEl);\n    return tpl;\n  }\n}\ncustomElements.define(\"ha-paper-slider\", HaPaperSlider);\n","import \"@polymer/iron-flex-layout/iron-flex-layout-classes\";\nimport \"@polymer/paper-icon-button/paper-icon-button\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport { EventsMixin } from \"../mixins/events-mixin\";\n\n/*\n * @appliesMixin EventsMixin\n */\nclass HaWaterHeaterControl extends EventsMixin(PolymerElement) {\n  static get template() {\n    return html`\n      <style include=\"iron-flex iron-flex-alignment\"></style>\n      <style>\n        /* local DOM styles go here */\n        :host {\n          @apply --layout-flex;\n          @apply --layout-horizontal;\n          @apply --layout-justified;\n        }\n        .in-flux#target_temperature {\n          color: var(--google-red-500);\n        }\n        #target_temperature {\n          @apply --layout-self-center;\n          font-size: 200%;\n        }\n        .control-buttons {\n          font-size: 200%;\n          text-align: right;\n        }\n        paper-icon-button {\n          height: 48px;\n          width: 48px;\n        }\n      </style>\n\n      <!-- local DOM goes here -->\n      <div id=\"target_temperature\">[[value]] [[units]]</div>\n      <div class=\"control-buttons\">\n        <div>\n          <paper-icon-button\n            icon=\"hass:chevron-up\"\n            on-click=\"incrementValue\"\n          ></paper-icon-button>\n        </div>\n        <div>\n          <paper-icon-button\n            icon=\"hass:chevron-down\"\n            on-click=\"decrementValue\"\n          ></paper-icon-button>\n        </div>\n      </div>\n    `;\n  }\n\n  static get properties() {\n    return {\n      value: {\n        type: Number,\n        observer: \"valueChanged\",\n      },\n      units: {\n        type: String,\n      },\n      min: {\n        type: Number,\n      },\n      max: {\n        type: Number,\n      },\n      step: {\n        type: Number,\n        value: 1,\n      },\n    };\n  }\n\n  temperatureStateInFlux(inFlux) {\n    this.$.target_temperature.classList.toggle(\"in-flux\", inFlux);\n  }\n\n  incrementValue() {\n    const newval = this.value + this.step;\n    if (this.value < this.max) {\n      this.last_changed = Date.now();\n      this.temperatureStateInFlux(true);\n    }\n    if (newval <= this.max) {\n      // If no initial target_temp\n      // this forces control to start\n      // from the min configured instead of 0\n      if (newval <= this.min) {\n        this.value = this.min;\n      } else {\n        this.value = newval;\n      }\n    } else {\n      this.value = this.max;\n    }\n  }\n\n  decrementValue() {\n    const newval = this.value - this.step;\n    if (this.value > this.min) {\n      this.last_changed = Date.now();\n      this.temperatureStateInFlux(true);\n    }\n    if (newval >= this.min) {\n      this.value = newval;\n    } else {\n      this.value = this.min;\n    }\n  }\n\n  valueChanged() {\n    // when the last_changed timestamp is changed,\n    // trigger a potential event fire in\n    // the future, as long as last changed is far enough in the\n    // past.\n    if (this.last_changed) {\n      window.setTimeout(() => {\n        const now = Date.now();\n        if (now - this.last_changed >= 2000) {\n          this.fire(\"change\");\n          this.temperatureStateInFlux(false);\n          this.last_changed = null;\n        }\n      }, 2010);\n    }\n  }\n}\n\ncustomElements.define(\"ha-water_heater-control\", HaWaterHeaterControl);\n","/**\nAdapted from paper-time-input from\nhttps://github.com/ryanburns23/paper-time-input\nMIT Licensed. Copyright (c) 2017 Ryan Burns\n\n`<paper-time-input>` Polymer element to accept a time with paper-input & paper-dropdown-menu\nInspired by the time input in google forms\n\n### Styling\n\n`<paper-time-input>` provides the following custom properties and mixins for styling:\n\nCustom property | Description | Default\n----------------|-------------|----------\n`--paper-time-input-dropdown-ripple-color` | dropdown ripple color | `--primary-color`\n`--paper-time-input-cotnainer` | Mixin applied to the inputs | `{}`\n`--paper-time-dropdown-input-cotnainer` | Mixin applied to the dropdown input | `{}`\n*/\nimport \"@polymer/paper-input/paper-input\";\nimport \"@polymer/paper-listbox/paper-listbox\";\nimport \"@polymer/paper-item/paper-item\";\nimport \"@polymer/paper-dropdown-menu/paper-dropdown-menu\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nexport class PaperTimeInput extends PolymerElement {\n  static get template() {\n    return html`\n      <style>\n        :host {\n          display: block;\n          @apply --paper-font-common-base;\n        }\n\n        paper-input {\n          width: 30px;\n          text-align: center;\n          --paper-input-container-input: {\n            /* Damn you firefox\n             * Needed to hide spin num in firefox\n             * http://stackoverflow.com/questions/3790935/can-i-hide-the-html5-number-input-s-spin-box\n             */\n            -moz-appearance: textfield;\n            @apply --paper-time-input-cotnainer;\n          }\n          --paper-input-container-input-webkit-spinner: {\n            -webkit-appearance: none;\n            margin: 0;\n            display: none;\n          }\n          --paper-input-container-shared-input-style_-_-webkit-appearance: textfield;\n        }\n\n        paper-dropdown-menu {\n          width: 55px;\n          padding: 0;\n          /* Force ripple to use the whole container */\n          --paper-dropdown-menu-ripple: {\n            color: var(\n              --paper-time-input-dropdown-ripple-color,\n              var(--primary-color)\n            );\n          }\n          --paper-input-container-input: {\n            @apply --paper-font-button;\n            text-align: center;\n            padding-left: 5px;\n            @apply --paper-time-dropdown-input-cotnainer;\n          }\n          --paper-input-container-underline: {\n            border-color: transparent;\n          }\n          --paper-input-container-underline-focus: {\n            border-color: transparent;\n          }\n        }\n\n        paper-item {\n          cursor: pointer;\n          text-align: center;\n          font-size: 14px;\n        }\n\n        paper-listbox {\n          padding: 0;\n        }\n\n        label {\n          @apply --paper-font-caption;\n        }\n\n        .time-input-wrap {\n          @apply --layout-horizontal;\n          @apply --layout-no-wrap;\n        }\n\n        [hidden] {\n          display: none !important;\n        }\n      </style>\n\n      <label hidden$=\"[[hideLabel]]\">[[label]]</label>\n      <div class=\"time-input-wrap\">\n        <!-- Hour Input -->\n        <paper-input\n          id=\"hour\"\n          type=\"number\"\n          value=\"{{hour}}\"\n          on-change=\"_shouldFormatHour\"\n          required=\"\"\n          auto-validate=\"[[autoValidate]]\"\n          prevent-invalid-input=\"\"\n          maxlength=\"2\"\n          max=\"[[_computeHourMax(format)]]\"\n          min=\"0\"\n          no-label-float=\"\"\n          disabled=\"[[disabled]]\"\n        >\n          <span suffix=\"\" slot=\"suffix\">:</span>\n        </paper-input>\n\n        <!-- Min Input -->\n        <paper-input\n          id=\"min\"\n          type=\"number\"\n          value=\"{{min}}\"\n          on-change=\"_formatMin\"\n          required=\"\"\n          auto-validate=\"[[autoValidate]]\"\n          prevent-invalid-input=\"\"\n          maxlength=\"2\"\n          max=\"59\"\n          min=\"0\"\n          no-label-float=\"\"\n          disabled=\"[[disabled]]\"\n        >\n        </paper-input>\n\n        <!-- Dropdown Menu -->\n        <paper-dropdown-menu\n          id=\"dropdown\"\n          required=\"\"\n          hidden$=\"[[_equal(format, 24)]]\"\n          no-label-float=\"\"\n          disabled=\"[[disabled]]\"\n        >\n          <paper-listbox\n            attr-for-selected=\"name\"\n            selected=\"{{amPm}}\"\n            slot=\"dropdown-content\"\n          >\n            <paper-item name=\"AM\">AM</paper-item>\n            <paper-item name=\"PM\">PM</paper-item>\n          </paper-listbox>\n        </paper-dropdown-menu>\n      </div>\n    `;\n  }\n\n  static get properties() {\n    return {\n      /**\n       * Label for the input\n       */\n      label: {\n        type: String,\n        value: \"Time\",\n      },\n      /**\n       * auto validate time inputs\n       */\n      autoValidate: {\n        type: Boolean,\n        value: true,\n      },\n      /**\n       * hides the label\n       */\n      hideLabel: {\n        type: Boolean,\n        value: false,\n      },\n      /**\n       * 12 or 24 hr format\n       */\n      format: {\n        type: Number,\n        value: 12,\n      },\n      /**\n       * disables the inputs\n       */\n      disabled: {\n        type: Boolean,\n        value: false,\n      },\n      /**\n       * hour\n       */\n      hour: {\n        type: String,\n        notify: true,\n      },\n      /**\n       * minute\n       */\n      min: {\n        type: String,\n        notify: true,\n      },\n      /**\n       * AM or PM\n       */\n      amPm: {\n        type: String,\n        notify: true,\n        value: \"AM\",\n      },\n      /**\n       * Formatted time string\n       */\n      value: {\n        type: String,\n        notify: true,\n        readOnly: true,\n        computed: \"_computeTime(min, hour, amPm)\",\n      },\n    };\n  }\n\n  /**\n   * Validate the inputs\n   * @return {boolean}\n   */\n  validate() {\n    var valid = true;\n    // Validate hour & min fields\n    if (!this.$.hour.validate() | !this.$.min.validate()) {\n      valid = false;\n    }\n    // Validate AM PM if 12 hour time\n    if (this.format === 12 && !this.$.dropdown.validate()) {\n      valid = false;\n    }\n    return valid;\n  }\n\n  /**\n   * Create time string\n   */\n  _computeTime(min, hour, amPm) {\n    if (hour && min) {\n      // No ampm on 24 hr time\n      if (this.format === 24) {\n        amPm = \"\";\n      }\n      return hour + \":\" + min + \" \" + amPm;\n    }\n    return undefined;\n  }\n\n  /**\n   * Format min\n   */\n  _formatMin() {\n    if (this.min.toString().length === 1) {\n      this.min = this.min < 10 ? \"0\" + this.min : this.min;\n    }\n  }\n\n  /**\n   * Hour needs a leading zero in 24hr format\n   */\n  _shouldFormatHour() {\n    if (this.format === 24 && this.hour.toString().length === 1) {\n      this.hour = this.hour < 10 ? \"0\" + this.hour : this.hour;\n    }\n  }\n\n  /**\n   * 24 hour format has a max hr of 23\n   */\n  _computeHourMax(format) {\n    if (format === 12) {\n      return format;\n    }\n    return 23;\n  }\n\n  _equal(n1, n2) {\n    return n1 === n2;\n  }\n}\n\ncustomElements.define(\"paper-time-input\", PaperTimeInput);\n","import { createCollection, Connection } from \"home-assistant-js-websocket\";\nimport { HomeAssistant } from \"../types\";\nimport computeStateName from \"../common/entity/compute_state_name\";\nimport { debounce } from \"../common/util/debounce\";\n\nexport interface EntityRegistryEntry {\n  entity_id: string;\n  name: string;\n  platform: string;\n  config_entry_id?: string;\n  device_id?: string;\n  disabled_by?: string;\n}\n\nexport interface EntityRegistryEntryUpdateParams {\n  name: string | null;\n  new_entity_id: string;\n}\n\nexport const computeEntityRegistryName = (\n  hass: HomeAssistant,\n  entry: EntityRegistryEntry\n): string | null => {\n  if (entry.name) {\n    return entry.name;\n  }\n  const state = hass.states[entry.entity_id];\n  return state ? computeStateName(state) : null;\n};\n\nexport const updateEntityRegistryEntry = (\n  hass: HomeAssistant,\n  entityId: string,\n  updates: Partial<EntityRegistryEntryUpdateParams>\n): Promise<EntityRegistryEntry> =>\n  hass.callWS<EntityRegistryEntry>({\n    type: \"config/entity_registry/update\",\n    entity_id: entityId,\n    ...updates,\n  });\n\nexport const removeEntityRegistryEntry = (\n  hass: HomeAssistant,\n  entityId: string\n): Promise<void> =>\n  hass.callWS({\n    type: \"config/entity_registry/remove\",\n    entity_id: entityId,\n  });\n\nconst fetchEntityRegistry = (conn) =>\n  conn.sendMessagePromise({\n    type: \"config/entity_registry/list\",\n  });\n\nconst subscribeEntityRegistryUpdates = (conn, store) =>\n  conn.subscribeEvents(\n    debounce(\n      () =>\n        fetchEntityRegistry(conn).then((entities) =>\n          store.setState(entities, true)\n        ),\n      500,\n      true\n    ),\n    \"entity_registry_updated\"\n  );\n\nexport const subscribeEntityRegistry = (\n  conn: Connection,\n  onChange: (entities: EntityRegistryEntry[]) => void\n) =>\n  createCollection<EntityRegistryEntry[]>(\n    \"_entityRegistry\",\n    fetchEntityRegistry,\n    subscribeEntityRegistryUpdates,\n    conn,\n    onChange\n  );\n","import \"@polymer/paper-dialog-behavior/paper-dialog-shared-styles\";\nimport \"@polymer/paper-dialog-scrollable/paper-dialog-scrollable\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport \"../resources/ha-style\";\n\nimport \"./more-info/more-info-controls\";\nimport \"./more-info/more-info-settings\";\n\nimport computeStateDomain from \"../common/entity/compute_state_domain\";\nimport isComponentLoaded from \"../common/config/is_component_loaded\";\n\nimport DialogMixin from \"../mixins/dialog-mixin\";\n\n/*\n * @appliesMixin DialogMixin\n */\nclass HaMoreInfoDialog extends DialogMixin(PolymerElement) {\n  static get template() {\n    return html`\n      <style include=\"ha-style-dialog paper-dialog-shared-styles\">\n        :host {\n          font-size: 14px;\n          width: 365px;\n          border-radius: 2px;\n        }\n\n        more-info-controls,\n        more-info-settings {\n          --more-info-header-background: var(--secondary-background-color);\n          --more-info-header-color: var(--primary-text-color);\n          --ha-more-info-app-toolbar-title: {\n            /* Design guideline states 24px, changed to 16 to align with state info */\n            margin-left: 16px;\n            line-height: 1.3em;\n            max-height: 2.6em;\n            overflow: hidden;\n            /* webkit and blink still support simple multiline text-overflow */\n            display: -webkit-box;\n            -webkit-line-clamp: 2;\n            -webkit-box-orient: vertical;\n            text-overflow: ellipsis;\n          }\n        }\n\n        /* overrule the ha-style-dialog max-height on small screens */\n        @media all and (max-width: 450px), all and (max-height: 500px) {\n          more-info-controls,\n          more-info-settings {\n            --more-info-header-background: var(--primary-color);\n            --more-info-header-color: var(--text-primary-color);\n          }\n          :host {\n            width: 100% !important;\n            border-radius: 0px;\n            position: fixed !important;\n            margin: 0;\n          }\n          :host::before {\n            content: \"\";\n            position: fixed;\n            z-index: -1;\n            top: 0px;\n            left: 0px;\n            right: 0px;\n            bottom: 0px;\n            background-color: inherit;\n          }\n        }\n\n        :host([data-domain=\"camera\"]) {\n          width: auto;\n        }\n\n        :host([data-domain=\"history_graph\"]),\n        :host([large]) {\n          width: 90%;\n        }\n      </style>\n\n      <template is=\"dom-if\" if=\"[[!_page]]\">\n        <more-info-controls\n          class=\"no-padding\"\n          hass=\"[[hass]]\"\n          state-obj=\"[[stateObj]]\"\n          dialog-element=\"[[_dialogElement]]\"\n          can-configure=\"[[_registryInfo]]\"\n          large=\"{{large}}\"\n        ></more-info-controls>\n      </template>\n      <template is=\"dom-if\" if='[[_equals(_page, \"settings\")]]'>\n        <more-info-settings\n          class=\"no-padding\"\n          hass=\"[[hass]]\"\n          state-obj=\"[[stateObj]]\"\n          registry-info=\"{{_registryInfo}}\"\n        ></more-info-settings>\n      </template>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      stateObj: {\n        type: Object,\n        computed: \"_computeStateObj(hass)\",\n        observer: \"_stateObjChanged\",\n      },\n\n      large: {\n        type: Boolean,\n        reflectToAttribute: true,\n        observer: \"_largeChanged\",\n      },\n\n      _dialogElement: Object,\n      _registryInfo: Object,\n\n      _page: {\n        type: String,\n        value: null,\n      },\n\n      dataDomain: {\n        computed: \"_computeDomain(stateObj)\",\n        reflectToAttribute: true,\n      },\n    };\n  }\n\n  static get observers() {\n    return [\"_dialogOpenChanged(opened)\"];\n  }\n\n  ready() {\n    super.ready();\n    this._dialogElement = this;\n    this.addEventListener(\"more-info-page\", (ev) => {\n      this._page = ev.detail.page;\n    });\n  }\n\n  _computeDomain(stateObj) {\n    return stateObj ? computeStateDomain(stateObj) : \"\";\n  }\n\n  _computeStateObj(hass) {\n    return hass.states[hass.moreInfoEntityId] || null;\n  }\n\n  async _stateObjChanged(newVal, oldVal) {\n    if (!newVal) {\n      this.setProperties({\n        opened: false,\n        _page: null,\n        _registryInfo: null,\n        large: false,\n      });\n      return;\n    }\n\n    requestAnimationFrame(() =>\n      requestAnimationFrame(() => {\n        // allow dialog to render content before showing it so it will be\n        // positioned correctly.\n        this.opened = true;\n      })\n    );\n\n    if (\n      !isComponentLoaded(this.hass, \"config\") ||\n      (oldVal && oldVal.entity_id === newVal.entity_id)\n    ) {\n      return;\n    }\n\n    if (this.hass.user.is_admin) {\n      try {\n        const info = await this.hass.callWS({\n          type: \"config/entity_registry/get\",\n          entity_id: newVal.entity_id,\n        });\n        this._registryInfo = info;\n      } catch (err) {\n        this._registryInfo = null;\n      }\n    }\n  }\n\n  _dialogOpenChanged(newVal) {\n    if (!newVal && this.stateObj) {\n      this.fire(\"hass-more-info\", { entityId: null });\n    }\n  }\n\n  _equals(a, b) {\n    return a === b;\n  }\n\n  _largeChanged() {\n    this.notifyResize();\n  }\n}\ncustomElements.define(\"ha-more-info-dialog\", HaMoreInfoDialog);\n","import \"@polymer/iron-flex-layout/iron-flex-layout-classes\";\nimport \"@material/mwc-button\";\nimport \"@polymer/paper-input/paper-input\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport { EventsMixin } from \"../../../mixins/events-mixin\";\nimport LocalizeMixin from \"../../../mixins/localize-mixin\";\n\nclass MoreInfoAlarmControlPanel extends LocalizeMixin(\n  EventsMixin(PolymerElement)\n) {\n  static get template() {\n    return html`\n      <style include=\"iron-flex\"></style>\n      <style>\n        paper-input {\n          margin: auto;\n          max-width: 200px;\n        }\n        .pad {\n          display: flex;\n          justify-content: center;\n          margin-bottom: 24px;\n        }\n        .pad div {\n          display: flex;\n          flex-direction: column;\n        }\n        .pad mwc-button {\n          width: 80px;\n        }\n        .actions mwc-button {\n          min-width: 160px;\n          margin-bottom: 16px;\n        }\n        mwc-button.disarm {\n          color: var(--google-red-500);\n        }\n      </style>\n\n      <template is=\"dom-if\" if=\"[[_codeFormat]]\">\n        <paper-input\n          label=\"[[localize('ui.card.alarm_control_panel.code')]]\"\n          value=\"{{_enteredCode}}\"\n          type=\"password\"\n          disabled=\"[[!_inputEnabled]]\"\n        ></paper-input>\n\n        <template is=\"dom-if\" if=\"[[_isNumber(_codeFormat)]]\">\n          <div class=\"pad\">\n            <div>\n              <mwc-button\n                on-click=\"_digitClicked\"\n                disabled=\"[[!_inputEnabled]]\"\n                data-digit=\"1\"\n                raised\n                >1</mwc-button\n              >\n              <mwc-button\n                on-click=\"_digitClicked\"\n                disabled=\"[[!_inputEnabled]]\"\n                data-digit=\"4\"\n                raised\n                >4</mwc-button\n              >\n              <mwc-button\n                on-click=\"_digitClicked\"\n                disabled=\"[[!_inputEnabled]]\"\n                data-digit=\"7\"\n                raised\n                >7</mwc-button\n              >\n            </div>\n            <div>\n              <mwc-button\n                on-click=\"_digitClicked\"\n                disabled=\"[[!_inputEnabled]]\"\n                data-digit=\"2\"\n                raised\n                >2</mwc-button\n              >\n              <mwc-button\n                on-click=\"_digitClicked\"\n                disabled=\"[[!_inputEnabled]]\"\n                data-digit=\"5\"\n                raised\n                >5</mwc-button\n              >\n              <mwc-button\n                on-click=\"_digitClicked\"\n                disabled=\"[[!_inputEnabled]]\"\n                data-digit=\"8\"\n                raised\n                >8</mwc-button\n              >\n              <mwc-button\n                on-click=\"_digitClicked\"\n                disabled=\"[[!_inputEnabled]]\"\n                data-digit=\"0\"\n                raised\n                >0</mwc-button\n              >\n            </div>\n            <div>\n              <mwc-button\n                on-click=\"_digitClicked\"\n                disabled=\"[[!_inputEnabled]]\"\n                data-digit=\"3\"\n                raised\n                >3</mwc-button\n              >\n              <mwc-button\n                on-click=\"_digitClicked\"\n                disabled=\"[[!_inputEnabled]]\"\n                data-digit=\"6\"\n                raised\n                >6</mwc-button\n              >\n              <mwc-button\n                on-click=\"_digitClicked\"\n                disabled=\"[[!_inputEnabled]]\"\n                data-digit=\"9\"\n                raised\n                >9</mwc-button\n              >\n              <mwc-button\n                on-click=\"_clearEnteredCode\"\n                disabled=\"[[!_inputEnabled]]\"\n                raised\n              >\n                [[localize('ui.card.alarm_control_panel.clear_code')]]\n              </mwc-button>\n            </div>\n          </div>\n        </template>\n      </template>\n\n      <div class=\"layout horizontal center-justified actions\">\n        <template is=\"dom-if\" if=\"[[_disarmVisible]]\">\n          <mwc-button\n            raised\n            class=\"disarm\"\n            on-click=\"_callService\"\n            data-service=\"alarm_disarm\"\n            disabled=\"[[!_codeValid]]\"\n          >\n            [[localize('ui.card.alarm_control_panel.disarm')]]\n          </mwc-button>\n        </template>\n        <template is=\"dom-if\" if=\"[[_armVisible]]\">\n          <mwc-button\n            raised\n            on-click=\"_callService\"\n            data-service=\"alarm_arm_home\"\n            disabled=\"[[!_codeValid]]\"\n          >\n            [[localize('ui.card.alarm_control_panel.arm_home')]]\n          </mwc-button>\n          <mwc-button\n            raised\n            on-click=\"_callService\"\n            data-service=\"alarm_arm_away\"\n            disabled=\"[[!_codeValid]]\"\n          >\n            [[localize('ui.card.alarm_control_panel.arm_away')]]\n          </mwc-button>\n        </template>\n      </div>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      stateObj: {\n        type: Object,\n        observer: \"_stateObjChanged\",\n      },\n      _enteredCode: {\n        type: String,\n        value: \"\",\n      },\n      _codeFormat: {\n        type: String,\n        value: \"\",\n      },\n      _codeValid: {\n        type: Boolean,\n        computed: \"_validateCode(_enteredCode, _codeFormat)\",\n      },\n      _disarmVisible: {\n        type: Boolean,\n        value: false,\n      },\n      _armVisible: {\n        type: Boolean,\n        value: false,\n      },\n      _inputEnabled: {\n        type: Boolean,\n        value: false,\n      },\n    };\n  }\n\n  constructor() {\n    super();\n    this._armedStates = [\n      \"armed_home\",\n      \"armed_away\",\n      \"armed_night\",\n      \"armed_custom_bypass\",\n    ];\n  }\n\n  _stateObjChanged(newVal, oldVal) {\n    if (newVal) {\n      const state = newVal.state;\n      const props = {\n        _codeFormat: newVal.attributes.code_format,\n        _armVisible: state === \"disarmed\",\n        _disarmVisible:\n          this._armedStates.includes(state) ||\n          state === \"pending\" ||\n          state === \"triggered\" ||\n          state === \"arming\",\n      };\n      props._inputEnabled = props._disarmVisible || props._armVisible;\n      this.setProperties(props);\n    }\n    if (oldVal) {\n      setTimeout(() => {\n        this.fire(\"iron-resize\");\n      }, 500);\n    }\n  }\n\n  _isNumber(format) {\n    return format === \"Number\";\n  }\n\n  _validateCode(code, format) {\n    return !format || code.length > 0;\n  }\n\n  _digitClicked(ev) {\n    this._enteredCode += ev.target.getAttribute(\"data-digit\");\n  }\n\n  _clearEnteredCode() {\n    this._enteredCode = \"\";\n  }\n\n  _callService(ev) {\n    const service = ev.target.getAttribute(\"data-service\");\n    const data = {\n      entity_id: this.stateObj.entity_id,\n      code: this._enteredCode,\n    };\n    this.hass.callService(\"alarm_control_panel\", service, data).then(() => {\n      this._enteredCode = \"\";\n    });\n  }\n}\ncustomElements.define(\n  \"more-info-alarm_control_panel\",\n  MoreInfoAlarmControlPanel\n);\n","import \"@material/mwc-button\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport \"../../../components/ha-relative-time\";\n\nimport LocalizeMixin from \"../../../mixins/localize-mixin\";\n\nclass MoreInfoAutomation extends LocalizeMixin(PolymerElement) {\n  static get template() {\n    return html`\n      <style>\n        .flex {\n          display: flex;\n          justify-content: space-between;\n        }\n        .actions {\n          margin: 36px 0 8px 0;\n          text-align: right;\n        }\n      </style>\n\n      <div class=\"flex\">\n        <div>[[localize('ui.card.automation.last_triggered')]]:</div>\n        <ha-relative-time\n          hass=\"[[hass]]\"\n          datetime=\"[[stateObj.attributes.last_triggered]]\"\n        ></ha-relative-time>\n      </div>\n\n      <div class=\"actions\">\n        <mwc-button on-click=\"handleTriggerTapped\">\n          [[localize('ui.card.automation.trigger')]]\n        </mwc-button>\n      </div>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      stateObj: Object,\n    };\n  }\n\n  handleTriggerTapped() {\n    this.hass.callService(\"automation\", \"trigger\", {\n      entity_id: this.stateObj.entity_id,\n    });\n  }\n}\n\ncustomElements.define(\"more-info-automation\", MoreInfoAutomation);\n","import {\n  property,\n  PropertyValues,\n  LitElement,\n  TemplateResult,\n  html,\n  CSSResult,\n  css,\n} from \"lit-element\";\n\nimport { HomeAssistant, CameraEntity } from \"../../../types\";\nimport {\n  CAMERA_SUPPORT_STREAM,\n  CameraPreferences,\n  fetchCameraPrefs,\n  updateCameraPrefs,\n} from \"../../../data/camera\";\nimport { supportsFeature } from \"../../../common/entity/supports-feature\";\nimport \"../../../components/ha-camera-stream\";\nimport \"@polymer/paper-checkbox/paper-checkbox\";\n// Not duplicate import, it's for typing\n// tslint:disable-next-line\nimport { PaperCheckboxElement } from \"@polymer/paper-checkbox/paper-checkbox\";\n\nclass MoreInfoCamera extends LitElement {\n  @property() public hass?: HomeAssistant;\n  @property() public stateObj?: CameraEntity;\n  @property() private _cameraPrefs?: CameraPreferences;\n\n  protected render(): TemplateResult | void {\n    if (!this.hass || !this.stateObj) {\n      return html``;\n    }\n\n    return html`\n      <ha-camera-stream\n        .hass=\"${this.hass}\"\n        .stateObj=\"${this.stateObj}\"\n        showcontrols\n      ></ha-camera-stream>\n      ${this._cameraPrefs\n        ? html`\n            <paper-checkbox\n              .checked=${this._cameraPrefs.preload_stream}\n              @change=${this._handleCheckboxChanged}\n            >\n              Preload stream\n            </paper-checkbox>\n          `\n        : undefined}\n    `;\n  }\n\n  protected updated(changedProps: PropertyValues) {\n    if (!changedProps.has(\"stateObj\")) {\n      return;\n    }\n\n    const oldState = changedProps.get(\"stateObj\") as this[\"stateObj\"];\n    const oldEntityId = oldState ? oldState.entity_id : undefined;\n    const curEntityId = this.stateObj ? this.stateObj.entity_id : undefined;\n\n    // Same entity, ignore.\n    if (curEntityId === oldEntityId) {\n      return;\n    }\n\n    if (\n      curEntityId &&\n      this.hass!.config.components.includes(\"stream\") &&\n      supportsFeature(this.stateObj!, CAMERA_SUPPORT_STREAM)\n    ) {\n      // Fetch in background while we set up the video.\n      this._fetchCameraPrefs();\n    }\n  }\n\n  private async _fetchCameraPrefs() {\n    this._cameraPrefs = await fetchCameraPrefs(\n      this.hass!,\n      this.stateObj!.entity_id\n    );\n  }\n\n  private async _handleCheckboxChanged(ev) {\n    const checkbox = ev.currentTarget as PaperCheckboxElement;\n    try {\n      this._cameraPrefs = await updateCameraPrefs(\n        this.hass!,\n        this.stateObj!.entity_id,\n        {\n          preload_stream: checkbox.checked!,\n        }\n      );\n    } catch (err) {\n      alert(err.message);\n      checkbox.checked = !checkbox.checked;\n    }\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      paper-checkbox {\n        position: absolute;\n        top: 0;\n        right: 0;\n        background-color: var(--secondary-background-color);\n        padding: 5px;\n        border-bottom-left-radius: 6px;\n      }\n    `;\n  }\n}\n\ncustomElements.define(\"more-info-camera\", MoreInfoCamera);\n","import \"@polymer/iron-flex-layout/iron-flex-layout-classes\";\nimport \"@polymer/paper-item/paper-item\";\nimport \"@polymer/paper-listbox/paper-listbox\";\nimport \"@polymer/paper-toggle-button/paper-toggle-button\";\nimport { timeOut } from \"@polymer/polymer/lib/utils/async\";\nimport { Debouncer } from \"@polymer/polymer/lib/utils/debounce\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport \"../../../components/ha-climate-control\";\nimport \"../../../components/ha-paper-slider\";\nimport \"../../../components/ha-paper-dropdown-menu\";\n\nimport attributeClassNames from \"../../../common/entity/attribute_class_names\";\nimport featureClassNames from \"../../../common/entity/feature_class_names\";\nimport { supportsFeature } from \"../../../common/entity/supports-feature\";\n\nimport { EventsMixin } from \"../../../mixins/events-mixin\";\nimport LocalizeMixin from \"../../../mixins/localize-mixin\";\nimport { computeRTLDirection } from \"../../../common/util/compute_rtl\";\n\n/*\n * @appliesMixin EventsMixin\n * @appliesMixin LocalizeMixin\n */\nclass MoreInfoClimate extends LocalizeMixin(EventsMixin(PolymerElement)) {\n  static get template() {\n    return html`\n      <style include=\"iron-flex\"></style>\n      <style>\n        :host {\n          color: var(--primary-text-color);\n        }\n\n        .container-on,\n        .container-away_mode,\n        .container-aux_heat,\n        .container-temperature,\n        .container-humidity,\n        .container-operation_list,\n        .container-fan_list,\n        .container-swing_list {\n          display: none;\n        }\n\n        .has-on .container-on,\n        .has-away_mode .container-away_mode,\n        .has-aux_heat .container-aux_heat,\n        .has-target_temperature .container-temperature,\n        .has-target_temperature_low .container-temperature,\n        .has-target_temperature_high .container-temperature,\n        .has-target_humidity .container-humidity,\n        .has-operation_mode .container-operation_list,\n        .has-fan_mode .container-fan_list,\n        .has-swing_list .container-swing_list,\n        .has-swing_mode .container-swing_list {\n          display: block;\n          margin-bottom: 5px;\n        }\n\n        .container-operation_list iron-icon,\n        .container-fan_list iron-icon,\n        .container-swing_list iron-icon {\n          margin: 22px 16px 0 0;\n        }\n\n        ha-paper-dropdown-menu {\n          width: 100%;\n        }\n\n        paper-item {\n          cursor: pointer;\n        }\n\n        ha-paper-slider {\n          width: 100%;\n        }\n\n        .container-humidity .single-row {\n            display: flex;\n            height: 50px;\n        }\n\n        .target-humidity {\n          width: 90px;\n          font-size: 200%;\n          margin: auto;\n          direction: ltr;\n        }\n\n        ha-climate-control.range-control-left,\n        ha-climate-control.range-control-right {\n          float: left;\n          width: 46%;\n        }\n        ha-climate-control.range-control-left {\n          margin-right: 4%;\n        }\n        ha-climate-control.range-control-right {\n          margin-left: 4%;\n        }\n\n        .humidity {\n          --paper-slider-active-color: var(--paper-blue-400);\n          --paper-slider-secondary-color: var(--paper-blue-400);\n        }\n\n        .single-row {\n          padding: 8px 0;\n        }\n        }\n      </style>\n\n      <div class$=\"[[computeClassNames(stateObj)]]\">\n        <template is=\"dom-if\" if=\"[[supportsOn(stateObj)]]\">\n          <div class=\"container-on\">\n            <div class=\"center horizontal layout single-row\">\n              <div class=\"flex\">[[localize('ui.card.climate.on_off')]]</div>\n              <paper-toggle-button\n                checked=\"[[onToggleChecked]]\"\n                on-change=\"onToggleChanged\"\n              >\n              </paper-toggle-button>\n            </div>\n          </div>\n        </template>\n\n        <div class=\"container-temperature\">\n          <div class$=\"[[stateObj.attributes.operation_mode]]\">\n            <div hidden$=\"[[!supportsTemperatureControls(stateObj)]]\">\n              [[localize('ui.card.climate.target_temperature')]]\n            </div>\n            <template is=\"dom-if\" if=\"[[supportsTemperature(stateObj)]]\">\n              <ha-climate-control\n                value=\"[[stateObj.attributes.temperature]]\"\n                units=\"[[hass.config.unit_system.temperature]]\"\n                step=\"[[computeTemperatureStepSize(hass, stateObj)]]\"\n                min=\"[[stateObj.attributes.min_temp]]\"\n                max=\"[[stateObj.attributes.max_temp]]\"\n                on-change=\"targetTemperatureChanged\"\n              >\n              </ha-climate-control>\n            </template>\n            <template is=\"dom-if\" if=\"[[supportsTemperatureRange(stateObj)]]\">\n              <ha-climate-control\n                value=\"[[stateObj.attributes.target_temp_low]]\"\n                units=\"[[hass.config.unit_system.temperature]]\"\n                step=\"[[computeTemperatureStepSize(hass, stateObj)]]\"\n                min=\"[[stateObj.attributes.min_temp]]\"\n                max=\"[[stateObj.attributes.target_temp_high]]\"\n                class=\"range-control-left\"\n                on-change=\"targetTemperatureLowChanged\"\n              >\n              </ha-climate-control>\n              <ha-climate-control\n                value=\"[[stateObj.attributes.target_temp_high]]\"\n                units=\"[[hass.config.unit_system.temperature]]\"\n                step=\"[[computeTemperatureStepSize(hass, stateObj)]]\"\n                min=\"[[stateObj.attributes.target_temp_low]]\"\n                max=\"[[stateObj.attributes.max_temp]]\"\n                class=\"range-control-right\"\n                on-change=\"targetTemperatureHighChanged\"\n              >\n              </ha-climate-control>\n            </template>\n          </div>\n        </div>\n\n        <template is=\"dom-if\" if=\"[[supportsHumidity(stateObj)]]\">\n          <div class=\"container-humidity\">\n            <div>[[localize('ui.card.climate.target_humidity')]]</div>\n            <div class=\"single-row\">\n              <div class=\"target-humidity\">\n                [[stateObj.attributes.humidity]] %\n              </div>\n              <ha-paper-slider\n                class=\"humidity\"\n                min=\"[[stateObj.attributes.min_humidity]]\"\n                max=\"[[stateObj.attributes.max_humidity]]\"\n                secondary-progress=\"[[stateObj.attributes.max_humidity]]\"\n                step=\"1\"\n                pin=\"\"\n                value=\"[[stateObj.attributes.humidity]]\"\n                on-change=\"targetHumiditySliderChanged\"\n                ignore-bar-touch=\"\"\n                dir=\"[[rtl]]\"\n              >\n              </ha-paper-slider>\n            </div>\n          </div>\n        </template>\n\n        <template is=\"dom-if\" if=\"[[supportsOperationMode(stateObj)]]\">\n          <div class=\"container-operation_list\">\n            <div class=\"controls\">\n              <ha-paper-dropdown-menu\n                label-float=\"\"\n                dynamic-align=\"\"\n                label=\"[[localize('ui.card.climate.operation')]]\"\n              >\n                <paper-listbox\n                  slot=\"dropdown-content\"\n                  selected=\"[[stateObj.attributes.operation_mode]]\"\n                  attr-for-selected=\"item-name\"\n                  on-selected-changed=\"handleOperationmodeChanged\"\n                >\n                  <template\n                    is=\"dom-repeat\"\n                    items=\"[[stateObj.attributes.operation_list]]\"\n                  >\n                    <paper-item item-name$=\"[[item]]\"\n                      >[[_localizeOperationMode(localize, item)]]</paper-item\n                    >\n                  </template>\n                </paper-listbox>\n              </ha-paper-dropdown-menu>\n            </div>\n          </div>\n        </template>\n\n        <template is=\"dom-if\" if=\"[[supportsFanMode(stateObj)]]\">\n          <div class=\"container-fan_list\">\n            <ha-paper-dropdown-menu\n              label-float=\"\"\n              dynamic-align=\"\"\n              label=\"[[localize('ui.card.climate.fan_mode')]]\"\n            >\n              <paper-listbox\n                slot=\"dropdown-content\"\n                selected=\"[[stateObj.attributes.fan_mode]]\"\n                attr-for-selected=\"item-name\"\n                on-selected-changed=\"handleFanmodeChanged\"\n              >\n                <template\n                  is=\"dom-repeat\"\n                  items=\"[[stateObj.attributes.fan_list]]\"\n                >\n                  <paper-item item-name$=\"[[item]]\"\n                    >[[_localizeFanMode(localize, item)]]\n                  </paper-item>\n                </template>\n              </paper-listbox>\n            </ha-paper-dropdown-menu>\n          </div>\n        </template>\n\n        <template is=\"dom-if\" if=\"[[supportsSwingMode(stateObj)]]\">\n          <div class=\"container-swing_list\">\n            <ha-paper-dropdown-menu\n              label-float=\"\"\n              dynamic-align=\"\"\n              label=\"[[localize('ui.card.climate.swing_mode')]]\"\n            >\n              <paper-listbox\n                slot=\"dropdown-content\"\n                selected=\"[[stateObj.attributes.swing_mode]]\"\n                attr-for-selected=\"item-name\"\n                on-selected-changed=\"handleSwingmodeChanged\"\n              >\n                <template\n                  is=\"dom-repeat\"\n                  items=\"[[stateObj.attributes.swing_list]]\"\n                >\n                  <paper-item item-name$=\"[[item]]\">[[item]]</paper-item>\n                </template>\n              </paper-listbox>\n            </ha-paper-dropdown-menu>\n          </div>\n        </template>\n\n        <template is=\"dom-if\" if=\"[[supportsAwayMode(stateObj)]]\">\n          <div class=\"container-away_mode\">\n            <div class=\"center horizontal layout single-row\">\n              <div class=\"flex\">[[localize('ui.card.climate.away_mode')]]</div>\n              <paper-toggle-button\n                checked=\"[[awayToggleChecked]]\"\n                on-change=\"awayToggleChanged\"\n              >\n              </paper-toggle-button>\n            </div>\n          </div>\n        </template>\n\n        <template is=\"dom-if\" if=\"[[supportsAuxHeat(stateObj)]]\">\n          <div class=\"container-aux_heat\">\n            <div class=\"center horizontal layout single-row\">\n              <div class=\"flex\">[[localize('ui.card.climate.aux_heat')]]</div>\n              <paper-toggle-button\n                checked=\"[[auxToggleChecked]]\"\n                on-change=\"auxToggleChanged\"\n              >\n              </paper-toggle-button>\n            </div>\n          </div>\n        </template>\n      </div>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: {\n        type: Object,\n      },\n\n      stateObj: {\n        type: Object,\n        observer: \"stateObjChanged\",\n      },\n\n      awayToggleChecked: Boolean,\n      auxToggleChecked: Boolean,\n      onToggleChecked: Boolean,\n\n      rtl: {\n        type: String,\n        value: \"ltr\",\n        computed: \"_computeRTLDirection(hass)\",\n      },\n    };\n  }\n\n  stateObjChanged(newVal, oldVal) {\n    if (newVal) {\n      this.setProperties({\n        awayToggleChecked: newVal.attributes.away_mode === \"on\",\n        auxToggleChecked: newVal.attributes.aux_heat === \"on\",\n        onToggleChecked: newVal.state !== \"off\",\n      });\n    }\n\n    if (oldVal) {\n      this._debouncer = Debouncer.debounce(\n        this._debouncer,\n        timeOut.after(500),\n        () => {\n          this.fire(\"iron-resize\");\n        }\n      );\n    }\n  }\n\n  computeTemperatureStepSize(hass, stateObj) {\n    if (stateObj.attributes.target_temp_step) {\n      return stateObj.attributes.target_temp_step;\n    }\n    if (hass.config.unit_system.temperature.indexOf(\"F\") !== -1) {\n      return 1;\n    }\n    return 0.5;\n  }\n\n  supportsTemperatureControls(stateObj) {\n    return (\n      this.supportsTemperature(stateObj) ||\n      this.supportsTemperatureRange(stateObj)\n    );\n  }\n\n  supportsTemperature(stateObj) {\n    return (\n      supportsFeature(stateObj, 1) &&\n      typeof stateObj.attributes.temperature === \"number\"\n    );\n  }\n\n  supportsTemperatureRange(stateObj) {\n    return (\n      supportsFeature(stateObj, 6) &&\n      (typeof stateObj.attributes.target_temp_low === \"number\" ||\n        typeof stateObj.attributes.target_temp_high === \"number\")\n    );\n  }\n\n  supportsHumidity(stateObj) {\n    return supportsFeature(stateObj, 8);\n  }\n\n  supportsFanMode(stateObj) {\n    return supportsFeature(stateObj, 64);\n  }\n\n  supportsOperationMode(stateObj) {\n    return supportsFeature(stateObj, 128);\n  }\n\n  supportsSwingMode(stateObj) {\n    return supportsFeature(stateObj, 512);\n  }\n\n  supportsAwayMode(stateObj) {\n    return supportsFeature(stateObj, 1024);\n  }\n\n  supportsAuxHeat(stateObj) {\n    return supportsFeature(stateObj, 2048);\n  }\n\n  supportsOn(stateObj) {\n    return supportsFeature(stateObj, 4096);\n  }\n\n  computeClassNames(stateObj) {\n    const _featureClassNames = {\n      1: \"has-target_temperature\",\n      2: \"has-target_temperature_high\",\n      4: \"has-target_temperature_low\",\n      8: \"has-target_humidity\",\n      16: \"has-target_humidity_high\",\n      32: \"has-target_humidity_low\",\n      64: \"has-fan_mode\",\n      128: \"has-operation_mode\",\n      256: \"has-hold_mode\",\n      512: \"has-swing_mode\",\n      1024: \"has-away_mode\",\n      2048: \"has-aux_heat\",\n      4096: \"has-on\",\n    };\n\n    var classes = [\n      attributeClassNames(stateObj, [\n        \"current_temperature\",\n        \"current_humidity\",\n      ]),\n      featureClassNames(stateObj, _featureClassNames),\n    ];\n\n    classes.push(\"more-info-climate\");\n\n    return classes.join(\" \");\n  }\n\n  targetTemperatureChanged(ev) {\n    const temperature = ev.target.value;\n    if (temperature === this.stateObj.attributes.temperature) return;\n    this.callServiceHelper(\"set_temperature\", { temperature: temperature });\n  }\n\n  targetTemperatureLowChanged(ev) {\n    const targetTempLow = ev.currentTarget.value;\n    if (targetTempLow === this.stateObj.attributes.target_temp_low) return;\n    this.callServiceHelper(\"set_temperature\", {\n      target_temp_low: targetTempLow,\n      target_temp_high: this.stateObj.attributes.target_temp_high,\n    });\n  }\n\n  targetTemperatureHighChanged(ev) {\n    const targetTempHigh = ev.currentTarget.value;\n    if (targetTempHigh === this.stateObj.attributes.target_temp_high) return;\n    this.callServiceHelper(\"set_temperature\", {\n      target_temp_low: this.stateObj.attributes.target_temp_low,\n      target_temp_high: targetTempHigh,\n    });\n  }\n\n  targetHumiditySliderChanged(ev) {\n    const humidity = ev.target.value;\n    if (humidity === this.stateObj.attributes.humidity) return;\n    this.callServiceHelper(\"set_humidity\", { humidity: humidity });\n  }\n\n  awayToggleChanged(ev) {\n    const oldVal = this.stateObj.attributes.away_mode === \"on\";\n    const newVal = ev.target.checked;\n    if (oldVal === newVal) return;\n    this.callServiceHelper(\"set_away_mode\", { away_mode: newVal });\n  }\n\n  auxToggleChanged(ev) {\n    const oldVal = this.stateObj.attributes.aux_heat === \"on\";\n    const newVal = ev.target.checked;\n    if (oldVal === newVal) return;\n    this.callServiceHelper(\"set_aux_heat\", { aux_heat: newVal });\n  }\n\n  onToggleChanged(ev) {\n    const oldVal = this.stateObj.state !== \"off\";\n    const newVal = ev.target.checked;\n    if (oldVal === newVal) return;\n    this.callServiceHelper(newVal ? \"turn_on\" : \"turn_off\", {});\n  }\n\n  handleFanmodeChanged(ev) {\n    const oldVal = this.stateObj.attributes.fan_mode;\n    const newVal = ev.detail.value;\n    if (!newVal || oldVal === newVal) return;\n    this.callServiceHelper(\"set_fan_mode\", { fan_mode: newVal });\n  }\n\n  handleOperationmodeChanged(ev) {\n    const oldVal = this.stateObj.attributes.operation_mode;\n    const newVal = ev.detail.value;\n    if (!newVal || oldVal === newVal) return;\n    this.callServiceHelper(\"set_operation_mode\", {\n      operation_mode: newVal,\n    });\n  }\n\n  handleSwingmodeChanged(ev) {\n    const oldVal = this.stateObj.attributes.swing_mode;\n    const newVal = ev.detail.value;\n    if (!newVal || oldVal === newVal) return;\n    this.callServiceHelper(\"set_swing_mode\", { swing_mode: newVal });\n  }\n\n  callServiceHelper(service, data) {\n    // We call stateChanged after a successful call to re-sync the inputs\n    // with the state. It will be out of sync if our service call did not\n    // result in the entity to be turned on. Since the state is not changing,\n    // the resync is not called automatic.\n    /* eslint-disable no-param-reassign */\n    data.entity_id = this.stateObj.entity_id;\n    /* eslint-enable no-param-reassign */\n    this.hass.callService(\"climate\", service, data).then(() => {\n      this.stateObjChanged(this.stateObj);\n    });\n  }\n\n  _localizeOperationMode(localize, mode) {\n    return localize(`state.climate.${mode}`) || mode;\n  }\n\n  _localizeFanMode(localize, mode) {\n    return localize(`state_attributes.climate.fan_mode.${mode}`) || mode;\n  }\n\n  _computeRTLDirection(hass) {\n    return computeRTLDirection(hass);\n  }\n}\n\ncustomElements.define(\"more-info-climate\", MoreInfoClimate);\n","import \"@polymer/iron-flex-layout/iron-flex-layout-classes\";\nimport \"@polymer/iron-input/iron-input\";\nimport \"@material/mwc-button\";\nimport \"@polymer/paper-input/paper-input\";\nimport \"@polymer/paper-spinner/paper-spinner\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport \"../../../components/ha-markdown\";\n\nclass MoreInfoConfigurator extends PolymerElement {\n  static get template() {\n    return html`\n      <style include=\"iron-flex\"></style>\n      <style>\n        p {\n          margin: 8px 0;\n        }\n\n        a {\n          color: var(--primary-color);\n        }\n\n        p > img {\n          max-width: 100%;\n        }\n\n        p.center {\n          text-align: center;\n        }\n\n        p.error {\n          color: #c62828;\n        }\n\n        p.submit {\n          text-align: center;\n          height: 41px;\n        }\n\n        paper-spinner {\n          width: 14px;\n          height: 14px;\n          margin-right: 20px;\n        }\n\n        [hidden] {\n          display: none;\n        }\n      </style>\n\n      <div class=\"layout vertical\">\n        <template is=\"dom-if\" if=\"[[isConfigurable]]\">\n          <ha-markdown\n            content=\"[[stateObj.attributes.description]]\"\n          ></ha-markdown>\n\n          <p class=\"error\" hidden$=\"[[!stateObj.attributes.errors]]\">\n            [[stateObj.attributes.errors]]\n          </p>\n\n          <template is=\"dom-repeat\" items=\"[[stateObj.attributes.fields]]\">\n            <paper-input\n              label=\"[[item.name]]\"\n              name=\"[[item.id]]\"\n              type=\"[[item.type]]\"\n              on-change=\"fieldChanged\"\n            ></paper-input>\n          </template>\n\n          <p class=\"submit\" hidden$=\"[[!stateObj.attributes.submit_caption]]\">\n            <mwc-button\n              raised=\"\"\n              disabled=\"[[isConfiguring]]\"\n              on-click=\"submitClicked\"\n            >\n              <paper-spinner\n                active=\"[[isConfiguring]]\"\n                hidden=\"[[!isConfiguring]]\"\n                alt=\"Configuring\"\n              ></paper-spinner>\n              [[stateObj.attributes.submit_caption]]\n            </mwc-button>\n          </p>\n        </template>\n      </div>\n    `;\n  }\n\n  static get properties() {\n    return {\n      stateObj: {\n        type: Object,\n      },\n\n      action: {\n        type: String,\n        value: \"display\",\n      },\n\n      isConfigurable: {\n        type: Boolean,\n        computed: \"computeIsConfigurable(stateObj)\",\n      },\n\n      isConfiguring: {\n        type: Boolean,\n        value: false,\n      },\n\n      fieldInput: {\n        type: Object,\n        value: function() {\n          return {};\n        },\n      },\n    };\n  }\n\n  computeIsConfigurable(stateObj) {\n    return stateObj.state === \"configure\";\n  }\n\n  fieldChanged(ev) {\n    var el = ev.target;\n    this.fieldInput[el.name] = el.value;\n  }\n\n  submitClicked() {\n    var data = {\n      configure_id: this.stateObj.attributes.configure_id,\n      fields: this.fieldInput,\n    };\n\n    this.isConfiguring = true;\n\n    this.hass.callService(\"configurator\", \"configure\", data).then(\n      function() {\n        this.isConfiguring = false;\n      }.bind(this),\n      function() {\n        this.isConfiguring = false;\n      }.bind(this)\n    );\n  }\n}\n\ncustomElements.define(\"more-info-configurator\", MoreInfoConfigurator);\n","import {\n  PropertyDeclarations,\n  PropertyValues,\n  UpdatingElement,\n} from \"lit-element\";\nimport { HassEntity } from \"home-assistant-js-websocket\";\n\nimport \"./more-info-alarm_control_panel\";\nimport \"./more-info-automation\";\nimport \"./more-info-camera\";\nimport \"./more-info-climate\";\nimport \"./more-info-configurator\";\nimport \"./more-info-cover\";\nimport \"./more-info-default\";\nimport \"./more-info-fan\";\nimport \"./more-info-group\";\nimport \"./more-info-history_graph\";\nimport \"./more-info-input_datetime\";\nimport \"./more-info-light\";\nimport \"./more-info-lock\";\nimport \"./more-info-media_player\";\nimport \"./more-info-script\";\nimport \"./more-info-sun\";\nimport \"./more-info-updater\";\nimport \"./more-info-vacuum\";\nimport \"./more-info-water_heater\";\nimport \"./more-info-weather\";\n\nimport stateMoreInfoType from \"../../../common/entity/state_more_info_type\";\nimport dynamicContentUpdater from \"../../../common/dom/dynamic_content_updater\";\nimport { HomeAssistant } from \"../../../types\";\n\nclass MoreInfoContent extends UpdatingElement {\n  public hass?: HomeAssistant;\n  public stateObj?: HassEntity;\n  private _detachedChild?: ChildNode;\n\n  static get properties(): PropertyDeclarations {\n    return {\n      hass: {},\n      stateObj: {},\n    };\n  }\n\n  protected firstUpdated(): void {\n    this.style.position = \"relative\";\n    this.style.display = \"block\";\n  }\n\n  // This is not a lit element, but an updating element, so we implement update\n  protected update(changedProps: PropertyValues): void {\n    super.update(changedProps);\n    const stateObj = this.stateObj;\n    const hass = this.hass;\n\n    if (!stateObj || !hass) {\n      if (this.lastChild) {\n        this._detachedChild = this.lastChild;\n        // Detach child to prevent it from doing work.\n        this.removeChild(this.lastChild);\n      }\n      return;\n    }\n\n    if (this._detachedChild) {\n      this.appendChild(this._detachedChild);\n      this._detachedChild = undefined;\n    }\n\n    const moreInfoType =\n      stateObj.attributes && \"custom_ui_more_info\" in stateObj.attributes\n        ? stateObj.attributes.custom_ui_more_info\n        : \"more-info-\" + stateMoreInfoType(stateObj);\n\n    dynamicContentUpdater(this, moreInfoType.toUpperCase(), {\n      hass,\n      stateObj,\n    });\n  }\n}\n\ncustomElements.define(\"more-info-content\", MoreInfoContent);\n","import \"@polymer/iron-flex-layout/iron-flex-layout-classes\";\nimport \"@polymer/paper-icon-button/paper-icon-button\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport \"../../../components/ha-cover-tilt-controls\";\nimport \"../../../components/ha-labeled-slider\";\nimport CoverEntity from \"../../../util/cover-model\";\n\nimport attributeClassNames from \"../../../common/entity/attribute_class_names\";\nimport featureClassNames from \"../../../common/entity/feature_class_names\";\n\nimport LocalizeMixin from \"../../../mixins/localize-mixin\";\n\nconst FEATURE_CLASS_NAMES = {\n  128: \"has-set_tilt_position\",\n};\nclass MoreInfoCover extends LocalizeMixin(PolymerElement) {\n  static get template() {\n    return html`\n      <style include=\"iron-flex\"></style>\n      <style>\n        .current_position,\n        .tilt {\n          max-height: 0px;\n          overflow: hidden;\n        }\n\n        .has-current_position .current_position,\n        .has-set_tilt_position .tilt,\n        .has-current_tilt_position .tilt {\n          max-height: 208px;\n        }\n\n        [invisible] {\n          visibility: hidden !important;\n        }\n      </style>\n      <div class$=\"[[computeClassNames(stateObj)]]\">\n        <div class=\"current_position\">\n          <ha-labeled-slider\n            caption=\"[[localize('ui.card.cover.position')]]\"\n            pin=\"\"\n            value=\"{{coverPositionSliderValue}}\"\n            disabled=\"[[!entityObj.supportsSetPosition]]\"\n            on-change=\"coverPositionSliderChanged\"\n          ></ha-labeled-slider>\n        </div>\n\n        <div class=\"tilt\">\n          <ha-labeled-slider\n            caption=\"[[localize('ui.card.cover.tilt_position')]]\"\n            pin=\"\"\n            extra=\"\"\n            value=\"{{coverTiltPositionSliderValue}}\"\n            disabled=\"[[!entityObj.supportsSetTiltPosition]]\"\n            on-change=\"coverTiltPositionSliderChanged\"\n          >\n            <ha-cover-tilt-controls\n              slot=\"extra\"\n              hidden$=\"[[entityObj.isTiltOnly]]\"\n              hass=\"[[hass]]\"\n              state-obj=\"[[stateObj]]\"\n            ></ha-cover-tilt-controls>\n          </ha-labeled-slider>\n        </div>\n      </div>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      stateObj: {\n        type: Object,\n        observer: \"stateObjChanged\",\n      },\n      entityObj: {\n        type: Object,\n        computed: \"computeEntityObj(hass, stateObj)\",\n      },\n      coverPositionSliderValue: Number,\n      coverTiltPositionSliderValue: Number,\n    };\n  }\n\n  computeEntityObj(hass, stateObj) {\n    return new CoverEntity(hass, stateObj);\n  }\n\n  stateObjChanged(newVal) {\n    if (newVal) {\n      this.setProperties({\n        coverPositionSliderValue: newVal.attributes.current_position,\n        coverTiltPositionSliderValue: newVal.attributes.current_tilt_position,\n      });\n    }\n  }\n\n  computeClassNames(stateObj) {\n    var classes = [\n      attributeClassNames(stateObj, [\n        \"current_position\",\n        \"current_tilt_position\",\n      ]),\n      featureClassNames(stateObj, FEATURE_CLASS_NAMES),\n    ];\n    return classes.join(\" \");\n  }\n\n  coverPositionSliderChanged(ev) {\n    this.entityObj.setCoverPosition(ev.target.value);\n  }\n\n  coverTiltPositionSliderChanged(ev) {\n    this.entityObj.setCoverTiltPosition(ev.target.value);\n  }\n}\n\ncustomElements.define(\"more-info-cover\", MoreInfoCover);\n","import { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport \"../../../components/ha-attributes\";\n\nclass MoreInfoDefault extends PolymerElement {\n  static get template() {\n    return html`\n      <ha-attributes state-obj=\"[[stateObj]]\"></ha-attributes>\n    `;\n  }\n\n  static get properties() {\n    return {\n      stateObj: {\n        type: Object,\n      },\n    };\n  }\n}\n\ncustomElements.define(\"more-info-default\", MoreInfoDefault);\n","import \"@polymer/iron-flex-layout/iron-flex-layout-classes\";\nimport \"@polymer/paper-icon-button/paper-icon-button\";\nimport \"@polymer/paper-item/paper-item\";\nimport \"@polymer/paper-listbox/paper-listbox\";\nimport \"@polymer/paper-toggle-button/paper-toggle-button\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport \"../../../components/ha-attributes\";\nimport \"../../../components/ha-paper-dropdown-menu\";\n\nimport attributeClassNames from \"../../../common/entity/attribute_class_names\";\nimport { EventsMixin } from \"../../../mixins/events-mixin\";\nimport LocalizeMixin from \"../../../mixins/localize-mixin\";\n\n/*\n * @appliesMixin EventsMixin\n */\nclass MoreInfoFan extends LocalizeMixin(EventsMixin(PolymerElement)) {\n  static get template() {\n    return html`\n      <style include=\"iron-flex\"></style>\n      <style>\n        .container-speed_list,\n        .container-direction,\n        .container-oscillating {\n          display: none;\n        }\n\n        .has-speed_list .container-speed_list,\n        .has-direction .container-direction,\n        .has-oscillating .container-oscillating {\n          display: block;\n        }\n\n        ha-paper-dropdown-menu {\n          width: 100%;\n        }\n\n        paper-item {\n          cursor: pointer;\n        }\n      </style>\n\n      <div class$=\"[[computeClassNames(stateObj)]]\">\n        <div class=\"container-speed_list\">\n          <ha-paper-dropdown-menu\n            label-float=\"\"\n            dynamic-align=\"\"\n            label=\"[[localize('ui.card.fan.speed')]]\"\n          >\n            <paper-listbox\n              slot=\"dropdown-content\"\n              selected=\"[[stateObj.attributes.speed]]\"\n              on-selected-changed=\"speedChanged\"\n              attr-for-selected=\"item-name\"\n            >\n              <template\n                is=\"dom-repeat\"\n                items=\"[[stateObj.attributes.speed_list]]\"\n              >\n                <paper-item item-name$=\"[[item]]\">[[item]]</paper-item>\n              </template>\n            </paper-listbox>\n          </ha-paper-dropdown-menu>\n        </div>\n\n        <div class=\"container-oscillating\">\n          <div class=\"center horizontal layout single-row\">\n            <div class=\"flex\">[[localize('ui.card.fan.oscillate')]]</div>\n            <paper-toggle-button\n              checked=\"[[oscillationToggleChecked]]\"\n              on-change=\"oscillationToggleChanged\"\n            >\n            </paper-toggle-button>\n          </div>\n        </div>\n\n        <div class=\"container-direction\">\n          <div class=\"direction\">\n            <div>[[localize('ui.card.fan.direction')]]</div>\n            <paper-icon-button\n              icon=\"hass:rotate-left\"\n              on-click=\"onDirectionLeft\"\n              title=\"Left\"\n              disabled=\"[[computeIsRotatingLeft(stateObj)]]\"\n            ></paper-icon-button>\n            <paper-icon-button\n              icon=\"hass:rotate-right\"\n              on-click=\"onDirectionRight\"\n              title=\"Right\"\n              disabled=\"[[computeIsRotatingRight(stateObj)]]\"\n            ></paper-icon-button>\n          </div>\n        </div>\n      </div>\n\n      <ha-attributes\n        state-obj=\"[[stateObj]]\"\n        extra-filters=\"speed,speed_list,oscillating,direction\"\n      ></ha-attributes>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: {\n        type: Object,\n      },\n\n      stateObj: {\n        type: Object,\n        observer: \"stateObjChanged\",\n      },\n\n      oscillationToggleChecked: {\n        type: Boolean,\n      },\n    };\n  }\n\n  stateObjChanged(newVal, oldVal) {\n    if (newVal) {\n      this.setProperties({\n        oscillationToggleChecked: newVal.attributes.oscillating,\n      });\n    }\n\n    if (oldVal) {\n      setTimeout(() => {\n        this.fire(\"iron-resize\");\n      }, 500);\n    }\n  }\n\n  computeClassNames(stateObj) {\n    return (\n      \"more-info-fan \" +\n      attributeClassNames(stateObj, [\"oscillating\", \"speed_list\", \"direction\"])\n    );\n  }\n\n  speedChanged(ev) {\n    var oldVal = this.stateObj.attributes.speed;\n    var newVal = ev.detail.value;\n\n    if (!newVal || oldVal === newVal) return;\n\n    this.hass.callService(\"fan\", \"turn_on\", {\n      entity_id: this.stateObj.entity_id,\n      speed: newVal,\n    });\n  }\n\n  oscillationToggleChanged(ev) {\n    var oldVal = this.stateObj.attributes.oscillating;\n    var newVal = ev.target.checked;\n\n    if (oldVal === newVal) return;\n\n    this.hass.callService(\"fan\", \"oscillate\", {\n      entity_id: this.stateObj.entity_id,\n      oscillating: newVal,\n    });\n  }\n\n  onDirectionLeft() {\n    this.hass.callService(\"fan\", \"set_direction\", {\n      entity_id: this.stateObj.entity_id,\n      direction: \"reverse\",\n    });\n  }\n\n  onDirectionRight() {\n    this.hass.callService(\"fan\", \"set_direction\", {\n      entity_id: this.stateObj.entity_id,\n      direction: \"forward\",\n    });\n  }\n\n  computeIsRotatingLeft(stateObj) {\n    return stateObj.attributes.direction === \"reverse\";\n  }\n\n  computeIsRotatingRight(stateObj) {\n    return stateObj.attributes.direction === \"forward\";\n  }\n}\n\ncustomElements.define(\"more-info-fan\", MoreInfoFan);\n","import { dom } from \"@polymer/polymer/lib/legacy/polymer.dom\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport \"../../../state-summary/state-card-content\";\n\nimport computeStateDomain from \"../../../common/entity/compute_state_domain\";\nimport dynamicContentUpdater from \"../../../common/dom/dynamic_content_updater\";\n\nclass MoreInfoGroup extends PolymerElement {\n  static get template() {\n    return html`\n      <style>\n        .child-card {\n          margin-bottom: 8px;\n        }\n\n        .child-card:last-child {\n          margin-bottom: 0;\n        }\n      </style>\n\n      <div id=\"groupedControlDetails\"></div>\n      <template is=\"dom-repeat\" items=\"[[states]]\" as=\"state\">\n        <div class=\"child-card\">\n          <state-card-content\n            state-obj=\"[[state]]\"\n            hass=\"[[hass]]\"\n          ></state-card-content>\n        </div>\n      </template>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: {\n        type: Object,\n      },\n\n      stateObj: {\n        type: Object,\n      },\n\n      states: {\n        type: Array,\n        computed: \"computeStates(stateObj, hass)\",\n      },\n    };\n  }\n\n  static get observers() {\n    return [\"statesChanged(stateObj, states)\"];\n  }\n\n  computeStates(stateObj, hass) {\n    var states = [];\n    var entIds = stateObj.attributes.entity_id || [];\n\n    for (var i = 0; i < entIds.length; i++) {\n      var state = hass.states[entIds[i]];\n\n      if (state) {\n        states.push(state);\n      }\n    }\n\n    return states;\n  }\n\n  statesChanged(stateObj, states) {\n    let groupDomainStateObj = false;\n    let groupDomain = false;\n\n    if (states && states.length > 0) {\n      const baseStateObj = states.find((s) => s.state === \"on\") || states[0];\n      groupDomain = computeStateDomain(baseStateObj);\n\n      // Groups need to be filtered out or we'll show content of\n      // first child above the children of the current group\n      if (groupDomain !== \"group\") {\n        groupDomainStateObj = Object.assign({}, baseStateObj, {\n          entity_id: stateObj.entity_id,\n          attributes: Object.assign({}, baseStateObj.attributes),\n        });\n\n        for (let i = 0; i < states.length; i++) {\n          if (groupDomain !== computeStateDomain(states[i])) {\n            groupDomainStateObj = false;\n            break;\n          }\n        }\n      }\n    }\n\n    if (!groupDomainStateObj) {\n      const el = dom(this.$.groupedControlDetails);\n      if (el.lastChild) {\n        el.removeChild(el.lastChild);\n      }\n    } else {\n      dynamicContentUpdater(\n        this.$.groupedControlDetails,\n        \"MORE-INFO-\" + groupDomain.toUpperCase(),\n        { stateObj: groupDomainStateObj, hass: this.hass }\n      );\n    }\n  }\n}\n\ncustomElements.define(\"more-info-group\", MoreInfoGroup);\n","import { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport \"../../../cards/ha-history_graph-card\";\nimport \"../../../components/ha-attributes\";\n\nclass MoreInfoHistoryGraph extends PolymerElement {\n  static get template() {\n    return html`\n      <style>\n        :host {\n          display: block;\n          margin-bottom: 6px;\n        }\n      </style>\n      <ha-history_graph-card\n        hass=\"[[hass]]\"\n        state-obj=\"[[stateObj]]\"\n        in-dialog=\"\"\n      >\n        <ha-attributes state-obj=\"[[stateObj]]\"></ha-attributes>\n      </ha-history_graph-card>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      stateObj: Object,\n    };\n  }\n}\ncustomElements.define(\"more-info-history_graph\", MoreInfoHistoryGraph);\n","import \"@polymer/iron-flex-layout/iron-flex-layout-classes\";\nimport \"@polymer/paper-input/paper-input\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\nimport \"@vaadin/vaadin-date-picker/vaadin-date-picker\";\n\nimport \"../../../components/ha-relative-time\";\nimport \"../../../components/paper-time-input\";\n\nimport attributeClassNames from \"../../../common/entity/attribute_class_names\";\n\nclass DatetimeInput extends PolymerElement {\n  static get template() {\n    return html`\n      <div class$=\"[[computeClassNames(stateObj)]]\">\n        <template is=\"dom-if\" if=\"[[doesHaveDate(stateObj)]]\" restamp=\"\">\n          <div>\n            <vaadin-date-picker\n              id=\"dateInput\"\n              on-value-changed=\"dateTimeChanged\"\n              label=\"Date\"\n              value=\"{{selectedDate}}\"\n            ></vaadin-date-picker>\n          </div>\n        </template>\n        <template is=\"dom-if\" if=\"[[doesHaveTime(stateObj)]]\" restamp=\"\">\n          <div>\n            <paper-time-input\n              hour=\"{{selectedHour}}\"\n              min=\"{{selectedMinute}}\"\n              format=\"24\"\n            ></paper-time-input>\n          </div>\n        </template>\n      </div>\n    `;\n  }\n\n  constructor() {\n    super();\n    this.is_ready = false;\n  }\n\n  static get properties() {\n    return {\n      hass: {\n        type: Object,\n      },\n\n      stateObj: {\n        type: Object,\n        observer: \"stateObjChanged\",\n      },\n\n      selectedDate: {\n        type: String,\n        observer: \"dateTimeChanged\",\n      },\n\n      selectedHour: {\n        type: Number,\n        observer: \"dateTimeChanged\",\n      },\n\n      selectedMinute: {\n        type: Number,\n        observer: \"dateTimeChanged\",\n      },\n    };\n  }\n\n  ready() {\n    super.ready();\n    this.is_ready = true;\n  }\n\n  /* Convert the date in the stateObj into a string useable by vaadin-date-picker */\n  getDateString(stateObj) {\n    if (stateObj.state === \"unknown\") {\n      return \"\";\n    }\n    var monthFiller;\n    if (stateObj.attributes.month < 10) {\n      monthFiller = \"0\";\n    } else {\n      monthFiller = \"\";\n    }\n\n    var dayFiller;\n    if (stateObj.attributes.day < 10) {\n      dayFiller = \"0\";\n    } else {\n      dayFiller = \"\";\n    }\n\n    return (\n      stateObj.attributes.year +\n      \"-\" +\n      monthFiller +\n      stateObj.attributes.month +\n      \"-\" +\n      dayFiller +\n      stateObj.attributes.day\n    );\n  }\n\n  /* Should fire when any value was changed *by the user*, not b/c of setting\n   * initial values. */\n  dateTimeChanged() {\n    // Check if the change is really coming from the user\n    if (!this.is_ready) {\n      return;\n    }\n\n    let changed = false;\n    let minuteFiller;\n\n    const serviceData = {\n      entity_id: this.stateObj.entity_id,\n    };\n\n    if (this.stateObj.attributes.has_time) {\n      changed |=\n        parseInt(this.selectedMinute) !== this.stateObj.attributes.minute;\n      changed |= parseInt(this.selectedHour) !== this.stateObj.attributes.hour;\n      if (this.selectedMinute < 10) {\n        minuteFiller = \"0\";\n      } else {\n        minuteFiller = \"\";\n      }\n      var timeStr =\n        this.selectedHour + \":\" + minuteFiller + this.selectedMinute;\n      serviceData.time = timeStr;\n    }\n\n    if (this.stateObj.attributes.has_date) {\n      if (this.selectedDate.length === 0) {\n        return; // Date was not set\n      }\n\n      const dateValInput = new Date(this.selectedDate);\n      const dateValState = new Date(\n        this.stateObj.attributes.year,\n        this.stateObj.attributes.month - 1,\n        this.stateObj.attributes.day\n      );\n\n      changed |= dateValState !== dateValInput;\n\n      serviceData.date = this.selectedDate;\n    }\n\n    if (changed) {\n      this.hass.callService(\"input_datetime\", \"set_datetime\", serviceData);\n    }\n  }\n\n  stateObjChanged(newVal) {\n    // Set to non-ready s.t. dateTimeChanged does not fire\n    this.is_ready = false;\n\n    if (newVal.attributes.has_time) {\n      this.selectedHour = newVal.attributes.hour;\n      this.selectedMinute = newVal.attributes.minute;\n    }\n\n    if (newVal.attributes.has_date) {\n      this.selectedDate = this.getDateString(newVal);\n    }\n\n    this.is_ready = true;\n  }\n\n  doesHaveDate(stateObj) {\n    return stateObj.attributes.has_date;\n  }\n\n  doesHaveTime(stateObj) {\n    return stateObj.attributes.has_time;\n  }\n\n  computeClassNames(stateObj) {\n    return (\n      \"more-info-input_datetime \" +\n      attributeClassNames(stateObj, [\"has_time\", \"has_date\"])\n    );\n  }\n}\n\ncustomElements.define(\"more-info-input_datetime\", DatetimeInput);\n","import \"@polymer/iron-flex-layout/iron-flex-layout-classes\";\nimport \"@polymer/paper-item/paper-item\";\nimport \"@polymer/paper-listbox/paper-listbox\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport \"../../../components/ha-attributes\";\nimport \"../../../components/ha-color-picker\";\nimport \"../../../components/ha-labeled-slider\";\nimport \"../../../components/ha-paper-dropdown-menu\";\n\nimport featureClassNames from \"../../../common/entity/feature_class_names\";\nimport { EventsMixin } from \"../../../mixins/events-mixin\";\nimport LocalizeMixin from \"../../../mixins/localize-mixin\";\n\nconst FEATURE_CLASS_NAMES = {\n  1: \"has-brightness\",\n  2: \"has-color_temp\",\n  4: \"has-effect_list\",\n  16: \"has-color\",\n  128: \"has-white_value\",\n};\n/*\n * @appliesMixin EventsMixin\n */\nclass MoreInfoLight extends LocalizeMixin(EventsMixin(PolymerElement)) {\n  static get template() {\n    return html`\n      <style include=\"iron-flex\"></style>\n      <style>\n        .effect_list,\n        .brightness,\n        .color_temp,\n        .white_value {\n          max-height: 0px;\n          overflow: hidden;\n          transition: max-height 0.5s ease-in;\n        }\n\n        .color_temp {\n          --ha-slider-background: -webkit-linear-gradient(\n            right,\n            rgb(255, 160, 0) 0%,\n            white 50%,\n            rgb(166, 209, 255) 100%\n          );\n          /* The color temp minimum value shouldn't be rendered differently. It's not \"off\". */\n          --paper-slider-knob-start-border-color: var(--primary-color);\n        }\n\n        .segmentationContainer {\n          position: relative;\n          width: 100%;\n        }\n\n        ha-color-picker {\n          display: block;\n          width: 100%;\n\n          max-height: 0px;\n          overflow: hidden;\n          transition: max-height 0.5s ease-in;\n        }\n\n        .segmentationButton {\n          position: absolute;\n          top: 11%;\n          transform: translate(0%, 0%);\n          padding: 0px;\n          max-height: 0px;\n          width: 23px;\n          height: 23px;\n          opacity: var(--dark-secondary-opacity);\n          overflow: hidden;\n          transition: max-height 0.5s ease-in;\n        }\n\n        .has-color.is-on .segmentationContainer .segmentationButton {\n          position: absolute;\n          top: 11%;\n          transform: translate(0%, 0%);\n          width: 23px;\n          height: 23px;\n          padding: 0px;\n          opacity: var(--dark-secondary-opacity);\n        }\n\n        .has-effect_list.is-on .effect_list,\n        .has-brightness .brightness,\n        .has-color_temp.is-on .color_temp,\n        .has-white_value.is-on .white_value {\n          max-height: 84px;\n        }\n\n        .has-brightness .has-color_temp.is-on,\n        .has-white_value.is-on {\n          margin-top: -16px;\n        }\n\n        .has-brightness .brightness,\n        .has-color_temp.is-on .color_temp,\n        .has-white_value.is-on .white_value {\n          padding-top: 16px;\n        }\n\n        .has-color.is-on .segmentationButton {\n          max-height: 100px;\n          overflow: visible;\n        }\n\n        .has-color.is-on ha-color-picker {\n          max-height: 500px;\n          overflow: visible;\n          --ha-color-picker-wheel-borderwidth: 5;\n          --ha-color-picker-wheel-bordercolor: white;\n          --ha-color-picker-wheel-shadow: none;\n          --ha-color-picker-marker-borderwidth: 2;\n          --ha-color-picker-marker-bordercolor: white;\n        }\n\n        .is-unavailable .control {\n          max-height: 0px;\n        }\n\n        paper-item {\n          cursor: pointer;\n        }\n      </style>\n\n      <div class$=\"[[computeClassNames(stateObj)]]\">\n        <div class=\"control brightness\">\n          <ha-labeled-slider\n            caption=\"[[localize('ui.card.light.brightness')]]\"\n            icon=\"hass:brightness-5\"\n            min=\"1\"\n            max=\"255\"\n            value=\"{{brightnessSliderValue}}\"\n            on-change=\"brightnessSliderChanged\"\n          ></ha-labeled-slider>\n        </div>\n\n        <div class=\"control color_temp\">\n          <ha-labeled-slider\n            caption=\"[[localize('ui.card.light.color_temperature')]]\"\n            icon=\"hass:thermometer\"\n            min=\"[[stateObj.attributes.min_mireds]]\"\n            max=\"[[stateObj.attributes.max_mireds]]\"\n            value=\"{{ctSliderValue}}\"\n            on-change=\"ctSliderChanged\"\n          ></ha-labeled-slider>\n        </div>\n\n        <div class=\"control white_value\">\n          <ha-labeled-slider\n            caption=\"[[localize('ui.card.light.white_value')]]\"\n            icon=\"hass:file-word-box\"\n            max=\"255\"\n            value=\"{{wvSliderValue}}\"\n            on-change=\"wvSliderChanged\"\n          ></ha-labeled-slider>\n        </div>\n        <div class=\"segmentationContainer\">\n          <ha-color-picker\n            class=\"control color\"\n            on-colorselected=\"colorPicked\"\n            desired-hs-color=\"{{colorPickerColor}}\"\n            throttle=\"500\"\n            hue-segments=\"{{hueSegments}}\"\n            saturation-segments=\"{{saturationSegments}}\"\n          >\n          </ha-color-picker>\n          <paper-icon-button\n            icon=\"mdi:palette\"\n            on-click=\"segmentClick\"\n            class=\"control segmentationButton\"\n          ></paper-icon-button>\n        </div>\n\n        <div class=\"control effect_list\">\n          <ha-paper-dropdown-menu\n            label-float=\"\"\n            dynamic-align=\"\"\n            label=\"[[localize('ui.card.light.effect')]]\"\n          >\n            <paper-listbox\n              slot=\"dropdown-content\"\n              selected=\"[[stateObj.attributes.effect]]\"\n              on-selected-changed=\"effectChanged\"\n              attr-for-selected=\"item-name\"\n            >\n              <template\n                is=\"dom-repeat\"\n                items=\"[[stateObj.attributes.effect_list]]\"\n              >\n                <paper-item item-name$=\"[[item]]\">[[item]]</paper-item>\n              </template>\n            </paper-listbox>\n          </ha-paper-dropdown-menu>\n        </div>\n\n        <ha-attributes\n          state-obj=\"[[stateObj]]\"\n          extra-filters=\"brightness,color_temp,white_value,effect_list,effect,hs_color,rgb_color,xy_color,min_mireds,max_mireds\"\n        ></ha-attributes>\n      </div>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: {\n        type: Object,\n      },\n\n      stateObj: {\n        type: Object,\n        observer: \"stateObjChanged\",\n      },\n\n      brightnessSliderValue: {\n        type: Number,\n        value: 0,\n      },\n\n      ctSliderValue: {\n        type: Number,\n        value: 0,\n      },\n\n      wvSliderValue: {\n        type: Number,\n        value: 0,\n      },\n\n      hueSegments: {\n        type: Number,\n        value: 24,\n      },\n\n      saturationSegments: {\n        type: Number,\n        value: 8,\n      },\n\n      colorPickerColor: {\n        type: Object,\n      },\n    };\n  }\n\n  stateObjChanged(newVal, oldVal) {\n    const props = {\n      brightnessSliderValue: 0,\n    };\n\n    if (newVal && newVal.state === \"on\") {\n      props.brightnessSliderValue = newVal.attributes.brightness;\n      props.ctSliderValue = newVal.attributes.color_temp;\n      props.wvSliderValue = newVal.attributes.white_value;\n      if (newVal.attributes.hs_color) {\n        props.colorPickerColor = {\n          h: newVal.attributes.hs_color[0],\n          s: newVal.attributes.hs_color[1] / 100,\n        };\n      }\n    }\n\n    this.setProperties(props);\n\n    if (oldVal) {\n      setTimeout(() => {\n        this.fire(\"iron-resize\");\n      }, 500);\n    }\n  }\n\n  computeClassNames(stateObj) {\n    const classes = [featureClassNames(stateObj, FEATURE_CLASS_NAMES)];\n    if (stateObj && stateObj.state === \"on\") {\n      classes.push(\"is-on\");\n    }\n    if (stateObj && stateObj.state === \"unavailable\") {\n      classes.push(\"is-unavailable\");\n    }\n    return classes.join(\" \");\n  }\n\n  effectChanged(ev) {\n    var oldVal = this.stateObj.attributes.effect;\n    var newVal = ev.detail.value;\n\n    if (!newVal || oldVal === newVal) return;\n\n    this.hass.callService(\"light\", \"turn_on\", {\n      entity_id: this.stateObj.entity_id,\n      effect: newVal,\n    });\n  }\n\n  brightnessSliderChanged(ev) {\n    var bri = parseInt(ev.target.value, 10);\n\n    if (isNaN(bri)) return;\n\n    this.hass.callService(\"light\", \"turn_on\", {\n      entity_id: this.stateObj.entity_id,\n      brightness: bri,\n    });\n  }\n\n  ctSliderChanged(ev) {\n    var ct = parseInt(ev.target.value, 10);\n\n    if (isNaN(ct)) return;\n\n    this.hass.callService(\"light\", \"turn_on\", {\n      entity_id: this.stateObj.entity_id,\n      color_temp: ct,\n    });\n  }\n\n  wvSliderChanged(ev) {\n    var wv = parseInt(ev.target.value, 10);\n\n    if (isNaN(wv)) return;\n\n    this.hass.callService(\"light\", \"turn_on\", {\n      entity_id: this.stateObj.entity_id,\n      white_value: wv,\n    });\n  }\n\n  segmentClick() {\n    if (this.hueSegments === 24 && this.saturationSegments === 8) {\n      this.setProperties({ hueSegments: 0, saturationSegments: 0 });\n    } else {\n      this.setProperties({ hueSegments: 24, saturationSegments: 8 });\n    }\n  }\n\n  serviceChangeColor(hass, entityId, color) {\n    hass.callService(\"light\", \"turn_on\", {\n      entity_id: entityId,\n      hs_color: [color.h, color.s * 100],\n    });\n  }\n\n  /**\n   * Called when a new color has been picked.\n   * should be throttled with the 'throttle=' attribute of the color picker\n   */\n  colorPicked(ev) {\n    this.serviceChangeColor(this.hass, this.stateObj.entity_id, ev.detail.hs);\n  }\n}\n\ncustomElements.define(\"more-info-light\", MoreInfoLight);\n","import \"@material/mwc-button\";\nimport \"@polymer/paper-input/paper-input\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport \"../../../components/ha-attributes\";\n\nimport LocalizeMixin from \"../../../mixins/localize-mixin\";\n\n/*\n * @appliesMixin LocalizeMixin\n */\nclass MoreInfoLock extends LocalizeMixin(PolymerElement) {\n  static get template() {\n    return html`\n      <style>\n        paper-input {\n          display: inline-block;\n        }\n      </style>\n\n      <template is=\"dom-if\" if=\"[[stateObj.attributes.code_format]]\">\n        <paper-input\n          label=\"[[localize('ui.card.lock.code')]]\"\n          value=\"{{enteredCode}}\"\n          pattern=\"[[stateObj.attributes.code_format]]\"\n          type=\"password\"\n        ></paper-input>\n        <mwc-button\n          on-click=\"callService\"\n          data-service=\"unlock\"\n          hidden$=\"[[!isLocked]]\"\n          >[[localize('ui.card.lock.unlock')]]</mwc-button\n        >\n        <mwc-button\n          on-click=\"callService\"\n          data-service=\"lock\"\n          hidden$=\"[[isLocked]]\"\n          >[[localize('ui.card.lock.lock')]]</mwc-button\n        >\n      </template>\n      <ha-attributes\n        state-obj=\"[[stateObj]]\"\n        extra-filters=\"code_format\"\n      ></ha-attributes>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      stateObj: {\n        type: Object,\n        observer: \"stateObjChanged\",\n      },\n      enteredCode: {\n        type: String,\n        value: \"\",\n      },\n      isLocked: Boolean,\n    };\n  }\n\n  stateObjChanged(newVal) {\n    if (newVal) {\n      this.isLocked = newVal.state === \"locked\";\n    }\n  }\n\n  callService(ev) {\n    const service = ev.target.getAttribute(\"data-service\");\n    const data = {\n      entity_id: this.stateObj.entity_id,\n      code: this.enteredCode,\n    };\n    this.hass.callService(\"lock\", service, data);\n  }\n}\n\ncustomElements.define(\"more-info-lock\", MoreInfoLock);\n","import \"@polymer/iron-flex-layout/iron-flex-layout-classes\";\nimport \"@polymer/iron-icon/iron-icon\";\nimport \"@polymer/paper-icon-button/paper-icon-button\";\nimport \"@polymer/paper-item/paper-item\";\nimport \"@polymer/paper-listbox/paper-listbox\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport \"../../../components/ha-paper-slider\";\nimport \"../../../components/ha-paper-dropdown-menu\";\nimport HassMediaPlayerEntity from \"../../../util/hass-media-player-model\";\n\nimport attributeClassNames from \"../../../common/entity/attribute_class_names\";\nimport isComponentLoaded from \"../../../common/config/is_component_loaded\";\nimport { EventsMixin } from \"../../../mixins/events-mixin\";\nimport LocalizeMixin from \"../../../mixins/localize-mixin\";\nimport { computeRTLDirection } from \"../../../common/util/compute_rtl\";\n\n/*\n * @appliesMixin LocalizeMixin\n * @appliesMixin EventsMixin\n */\nclass MoreInfoMediaPlayer extends LocalizeMixin(EventsMixin(PolymerElement)) {\n  static get template() {\n    return html`\n      <style include=\"iron-flex iron-flex-alignment\"></style>\n      <style>\n        .media-state {\n          text-transform: capitalize;\n        }\n\n        paper-icon-button[highlight] {\n          color: var(--accent-color);\n        }\n\n        .volume {\n          margin-bottom: 8px;\n\n          max-height: 0px;\n          overflow: hidden;\n          transition: max-height 0.5s ease-in;\n        }\n\n        .has-volume_level .volume {\n          max-height: 40px;\n        }\n\n        iron-icon.source-input {\n          padding: 7px;\n          margin-top: 15px;\n        }\n\n        ha-paper-dropdown-menu.source-input {\n          margin-left: 10px;\n        }\n\n        [hidden] {\n          display: none !important;\n        }\n\n        paper-item {\n          cursor: pointer;\n        }\n      </style>\n\n      <div class$=\"[[computeClassNames(stateObj)]]\">\n        <div class=\"layout horizontal\">\n          <div class=\"flex\">\n            <paper-icon-button\n              icon=\"hass:power\"\n              highlight$=\"[[playerObj.isOff]]\"\n              on-click=\"handleTogglePower\"\n              hidden$=\"[[computeHidePowerButton(playerObj)]]\"\n            ></paper-icon-button>\n          </div>\n          <div>\n            <template\n              is=\"dom-if\"\n              if=\"[[computeShowPlaybackControls(playerObj)]]\"\n            >\n              <paper-icon-button\n                icon=\"hass:skip-previous\"\n                on-click=\"handlePrevious\"\n                hidden$=\"[[!playerObj.supportsPreviousTrack]]\"\n              ></paper-icon-button>\n              <paper-icon-button\n                icon=\"[[computePlaybackControlIcon(playerObj)]]\"\n                on-click=\"handlePlaybackControl\"\n                hidden$=\"[[!computePlaybackControlIcon(playerObj)]]\"\n                highlight=\"\"\n              ></paper-icon-button>\n              <paper-icon-button\n                icon=\"hass:skip-next\"\n                on-click=\"handleNext\"\n                hidden$=\"[[!playerObj.supportsNextTrack]]\"\n              ></paper-icon-button>\n            </template>\n          </div>\n        </div>\n        <!-- VOLUME -->\n        <div\n          class=\"volume_buttons center horizontal layout\"\n          hidden$=\"[[computeHideVolumeButtons(playerObj)]]\"\n        >\n          <paper-icon-button\n            on-click=\"handleVolumeTap\"\n            icon=\"hass:volume-off\"\n          ></paper-icon-button>\n          <paper-icon-button\n            id=\"volumeDown\"\n            disabled$=\"[[playerObj.isMuted]]\"\n            on-mousedown=\"handleVolumeDown\"\n            on-touchstart=\"handleVolumeDown\"\n            on-touchend=\"handleVolumeTouchEnd\"\n            icon=\"hass:volume-medium\"\n          ></paper-icon-button>\n          <paper-icon-button\n            id=\"volumeUp\"\n            disabled$=\"[[playerObj.isMuted]]\"\n            on-mousedown=\"handleVolumeUp\"\n            on-touchstart=\"handleVolumeUp\"\n            on-touchend=\"handleVolumeTouchEnd\"\n            icon=\"hass:volume-high\"\n          ></paper-icon-button>\n        </div>\n        <div\n          class=\"volume center horizontal layout\"\n          hidden$=\"[[!playerObj.supportsVolumeSet]]\"\n        >\n          <paper-icon-button\n            on-click=\"handleVolumeTap\"\n            hidden$=\"[[playerObj.supportsVolumeButtons]]\"\n            icon=\"[[computeMuteVolumeIcon(playerObj)]]\"\n          ></paper-icon-button>\n          <ha-paper-slider\n            disabled$=\"[[playerObj.isMuted]]\"\n            min=\"0\"\n            max=\"100\"\n            value=\"[[playerObj.volumeSliderValue]]\"\n            on-change=\"volumeSliderChanged\"\n            class=\"flex\"\n            ignore-bar-touch=\"\"\n            dir=\"{{rtl}}\"\n          >\n          </ha-paper-slider>\n        </div>\n        <!-- SOURCE PICKER -->\n        <div\n          class=\"controls layout horizontal justified\"\n          hidden$=\"[[computeHideSelectSource(playerObj)]]\"\n        >\n          <iron-icon class=\"source-input\" icon=\"hass:login-variant\"></iron-icon>\n          <ha-paper-dropdown-menu\n            class=\"flex source-input\"\n            dynamic-align=\"\"\n            label-float=\"\"\n            label=\"[[localize('ui.card.media_player.source')]]\"\n          >\n            <paper-listbox\n              slot=\"dropdown-content\"\n              attr-for-selected=\"item-name\"\n              selected=\"[[playerObj.source]]\"\n              on-selected-changed=\"handleSourceChanged\"\n            >\n              <template is=\"dom-repeat\" items=\"[[playerObj.sourceList]]\">\n                <paper-item item-name$=\"[[item]]\">[[item]]</paper-item>\n              </template>\n            </paper-listbox>\n          </ha-paper-dropdown-menu>\n        </div>\n        <!-- SOUND MODE PICKER -->\n        <template is=\"dom-if\" if=\"[[!computeHideSelectSoundMode(playerObj)]]\">\n          <div class=\"controls layout horizontal justified\">\n            <iron-icon class=\"source-input\" icon=\"hass:music-note\"></iron-icon>\n            <ha-paper-dropdown-menu\n              class=\"flex source-input\"\n              dynamic-align\n              label-float\n              label=\"[[localize('ui.card.media_player.sound_mode')]]\"\n            >\n              <paper-listbox\n                slot=\"dropdown-content\"\n                attr-for-selected=\"item-name\"\n                selected=\"[[playerObj.soundMode]]\"\n                on-selected-changed=\"handleSoundModeChanged\"\n              >\n                <template is=\"dom-repeat\" items=\"[[playerObj.soundModeList]]\">\n                  <paper-item item-name$=\"[[item]]\">[[item]]</paper-item>\n                </template>\n              </paper-listbox>\n            </ha-paper-dropdown-menu>\n          </div>\n        </template>\n        <!-- TTS -->\n        <div\n          hidden$=\"[[computeHideTTS(ttsLoaded, playerObj)]]\"\n          class=\"layout horizontal end\"\n        >\n          <paper-input\n            id=\"ttsInput\"\n            label=\"[[localize('ui.card.media_player.text_to_speak')]]\"\n            class=\"flex\"\n            value=\"{{ttsMessage}}\"\n            on-keydown=\"ttsCheckForEnter\"\n          ></paper-input>\n          <paper-icon-button\n            icon=\"hass:send\"\n            on-click=\"sendTTS\"\n          ></paper-icon-button>\n        </div>\n      </div>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      stateObj: Object,\n      playerObj: {\n        type: Object,\n        computed: \"computePlayerObj(hass, stateObj)\",\n        observer: \"playerObjChanged\",\n      },\n\n      ttsLoaded: {\n        type: Boolean,\n        computed: \"computeTTSLoaded(hass)\",\n      },\n\n      ttsMessage: {\n        type: String,\n        value: \"\",\n      },\n\n      rtl: {\n        type: String,\n        computed: \"_computeRTLDirection(hass)\",\n      },\n    };\n  }\n\n  computePlayerObj(hass, stateObj) {\n    return new HassMediaPlayerEntity(hass, stateObj);\n  }\n\n  playerObjChanged(newVal, oldVal) {\n    if (oldVal) {\n      setTimeout(() => {\n        this.fire(\"iron-resize\");\n      }, 500);\n    }\n  }\n\n  computeClassNames(stateObj) {\n    return attributeClassNames(stateObj, [\"volume_level\"]);\n  }\n\n  computeMuteVolumeIcon(playerObj) {\n    return playerObj.isMuted ? \"hass:volume-off\" : \"hass:volume-high\";\n  }\n\n  computeHideVolumeButtons(playerObj) {\n    return !playerObj.supportsVolumeButtons || playerObj.isOff;\n  }\n\n  computeShowPlaybackControls(playerObj) {\n    return !playerObj.isOff && playerObj.hasMediaControl;\n  }\n\n  computePlaybackControlIcon(playerObj) {\n    if (playerObj.isPlaying) {\n      return playerObj.supportsPause ? \"hass:pause\" : \"hass:stop\";\n    }\n    if (playerObj.hasMediaControl || playerObj.isOff || playerObj.isIdle) {\n      if (\n        playerObj.hasMediaControl &&\n        playerObj.supportsPause &&\n        !playerObj.isPaused\n      ) {\n        return \"hass:play-pause\";\n      }\n      return playerObj.supportsPlay ? \"hass:play\" : null;\n    }\n    return \"\";\n  }\n\n  computeHidePowerButton(playerObj) {\n    return playerObj.isOff\n      ? !playerObj.supportsTurnOn\n      : !playerObj.supportsTurnOff;\n  }\n\n  computeHideSelectSource(playerObj) {\n    return (\n      playerObj.isOff ||\n      !playerObj.supportsSelectSource ||\n      !playerObj.sourceList\n    );\n  }\n\n  computeHideSelectSoundMode(playerObj) {\n    return (\n      playerObj.isOff ||\n      !playerObj.supportsSelectSoundMode ||\n      !playerObj.soundModeList\n    );\n  }\n\n  computeHideTTS(ttsLoaded, playerObj) {\n    return !ttsLoaded || !playerObj.supportsPlayMedia;\n  }\n\n  computeTTSLoaded(hass) {\n    return isComponentLoaded(hass, \"tts\");\n  }\n\n  handleTogglePower() {\n    this.playerObj.togglePower();\n  }\n\n  handlePrevious() {\n    this.playerObj.previousTrack();\n  }\n\n  handlePlaybackControl() {\n    this.playerObj.mediaPlayPause();\n  }\n\n  handleNext() {\n    this.playerObj.nextTrack();\n  }\n\n  handleSourceChanged(ev) {\n    if (!this.playerObj) return;\n\n    var oldVal = this.playerObj.source;\n    var newVal = ev.detail.value;\n\n    if (!newVal || oldVal === newVal) return;\n\n    this.playerObj.selectSource(newVal);\n  }\n\n  handleSoundModeChanged(ev) {\n    if (!this.playerObj) return;\n\n    var oldVal = this.playerObj.soundMode;\n    var newVal = ev.detail.value;\n\n    if (!newVal || oldVal === newVal) return;\n\n    this.playerObj.selectSoundMode(newVal);\n  }\n\n  handleVolumeTap() {\n    if (!this.playerObj.supportsVolumeMute) {\n      return;\n    }\n    this.playerObj.volumeMute(!this.playerObj.isMuted);\n  }\n\n  handleVolumeTouchEnd(ev) {\n    /* when touch ends, we must prevent this from\n     * becoming a mousedown, up, click by emulation */\n    ev.preventDefault();\n  }\n\n  handleVolumeUp() {\n    const obj = this.$.volumeUp;\n    this.handleVolumeWorker(\"volume_up\", obj, true);\n  }\n\n  handleVolumeDown() {\n    const obj = this.$.volumeDown;\n    this.handleVolumeWorker(\"volume_down\", obj, true);\n  }\n\n  handleVolumeWorker(service, obj, force) {\n    if (force || (obj !== undefined && obj.pointerDown)) {\n      this.playerObj.callService(service);\n      setTimeout(() => this.handleVolumeWorker(service, obj, false), 500);\n    }\n  }\n\n  volumeSliderChanged(ev) {\n    const volPercentage = parseFloat(ev.target.value);\n    const volume = volPercentage > 0 ? volPercentage / 100 : 0;\n    this.playerObj.setVolume(volume);\n  }\n\n  ttsCheckForEnter(ev) {\n    if (ev.keyCode === 13) this.sendTTS();\n  }\n\n  sendTTS() {\n    const services = this.hass.services.tts;\n    const serviceKeys = Object.keys(services).sort();\n    let service;\n    let i;\n\n    for (i = 0; i < serviceKeys.length; i++) {\n      if (serviceKeys[i].indexOf(\"_say\") !== -1) {\n        service = serviceKeys[i];\n        break;\n      }\n    }\n\n    if (!service) {\n      return;\n    }\n\n    this.hass.callService(\"tts\", service, {\n      entity_id: this.stateObj.entity_id,\n      message: this.ttsMessage,\n    });\n    this.ttsMessage = \"\";\n    this.$.ttsInput.focus();\n  }\n\n  _computeRTLDirection(hass) {\n    return computeRTLDirection(hass);\n  }\n}\n\ncustomElements.define(\"more-info-media_player\", MoreInfoMediaPlayer);\n","import \"@polymer/iron-flex-layout/iron-flex-layout-classes\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\nimport LocalizeMixin from \"../../../mixins/localize-mixin\";\n\nclass MoreInfoScript extends LocalizeMixin(PolymerElement) {\n  static get template() {\n    return html`\n      <style include=\"iron-flex iron-flex-alignment\"></style>\n\n      <div class=\"layout vertical\">\n        <div class=\"data-entry layout justified horizontal\">\n          <div class=\"key\">\n            [[localize('ui.dialogs.more_info_control.script.last_action')]]\n          </div>\n          <div class=\"value\">[[stateObj.attributes.last_action]]</div>\n        </div>\n      </div>\n    `;\n  }\n\n  static get properties() {\n    return {\n      stateObj: {\n        type: Object,\n      },\n    };\n  }\n}\n\ncustomElements.define(\"more-info-script\", MoreInfoScript);\n","import \"@polymer/iron-flex-layout/iron-flex-layout-classes\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport \"../../../components/ha-relative-time\";\n\nimport LocalizeMixin from \"../../../mixins/localize-mixin\";\nimport formatTime from \"../../../common/datetime/format_time\";\n\nclass MoreInfoSun extends LocalizeMixin(PolymerElement) {\n  static get template() {\n    return html`\n      <style include=\"iron-flex iron-flex-alignment\"></style>\n\n      <template\n        is=\"dom-repeat\"\n        items=\"[[computeOrder(risingDate, settingDate)]]\"\n      >\n        <div class=\"data-entry layout justified horizontal\">\n          <div class=\"key\">\n            <span>[[itemCaption(item)]]</span>\n            <ha-relative-time\n              hass=\"[[hass]]\"\n              datetime-obj=\"[[itemDate(item)]]\"\n            ></ha-relative-time>\n          </div>\n          <div class=\"value\">[[itemValue(item)]]</div>\n        </div>\n      </template>\n      <div class=\"data-entry layout justified horizontal\">\n        <div class=\"key\">\n          [[localize('ui.dialogs.more_info_control.sun.elevation')]]\n        </div>\n        <div class=\"value\">[[stateObj.attributes.elevation]]</div>\n      </div>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      stateObj: Object,\n      risingDate: {\n        type: Object,\n        computed: \"computeRising(stateObj)\",\n      },\n\n      settingDate: {\n        type: Object,\n        computed: \"computeSetting(stateObj)\",\n      },\n    };\n  }\n\n  computeRising(stateObj) {\n    return new Date(stateObj.attributes.next_rising);\n  }\n\n  computeSetting(stateObj) {\n    return new Date(stateObj.attributes.next_setting);\n  }\n\n  computeOrder(risingDate, settingDate) {\n    return risingDate > settingDate ? [\"set\", \"ris\"] : [\"ris\", \"set\"];\n  }\n\n  itemCaption(type) {\n    if (type === \"ris\") {\n      return this.localize(\"ui.dialogs.more_info_control.sun.rising\");\n    }\n    return this.localize(\"ui.dialogs.more_info_control.sun.setting\");\n  }\n\n  itemDate(type) {\n    return type === \"ris\" ? this.risingDate : this.settingDate;\n  }\n\n  itemValue(type) {\n    return formatTime(this.itemDate(type), this.hass.language);\n  }\n}\n\ncustomElements.define(\"more-info-sun\", MoreInfoSun);\n","import { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\nimport LocalizeMixin from \"../../../mixins/localize-mixin\";\n\nclass MoreInfoUpdater extends LocalizeMixin(PolymerElement) {\n  static get template() {\n    return html`\n      <style>\n        .link {\n          color: #03a9f4;\n        }\n      </style>\n\n      <div>\n        <a\n          class=\"link\"\n          href=\"https://www.home-assistant.io/docs/installation/updating/\"\n          target=\"_blank\"\n          >[[localize('ui.dialogs.more_info_control.updater.title')]]</a\n        >\n      </div>\n    `;\n  }\n\n  static get properties() {\n    return {\n      stateObj: {\n        type: Object,\n      },\n    };\n  }\n\n  computeReleaseNotes(stateObj) {\n    return (\n      stateObj.attributes.release_notes ||\n      \"https://www.home-assistant.io/docs/installation/updating/\"\n    );\n  }\n}\n\ncustomElements.define(\"more-info-updater\", MoreInfoUpdater);\n","import \"@polymer/iron-flex-layout/iron-flex-layout-classes\";\nimport \"@polymer/iron-icon/iron-icon\";\nimport \"@polymer/paper-icon-button/paper-icon-button\";\nimport \"@polymer/paper-item/paper-item\";\nimport \"@polymer/paper-listbox/paper-listbox\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport \"../../../components/ha-attributes\";\nimport \"../../../components/ha-paper-dropdown-menu\";\nimport { supportsFeature } from \"../../../common/entity/supports-feature\";\n\nclass MoreInfoVacuum extends PolymerElement {\n  static get template() {\n    return html`\n      <style include=\"iron-flex iron-flex-alignment\"></style>\n      <style>\n        :host {\n          @apply --paper-font-body1;\n          line-height: 1.5;\n        }\n\n        .status-subtitle {\n          color: var(--secondary-text-color);\n        }\n\n        paper-item {\n          cursor: pointer;\n        }\n      </style>\n\n      <div class=\"horizontal justified layout\">\n        <div hidden$=\"[[!supportsStatus(stateObj)]]\">\n          <span class=\"status-subtitle\">Status: </span\n          ><span><strong>[[stateObj.attributes.status]]</strong></span>\n        </div>\n        <div hidden$=\"[[!supportsBattery(stateObj)]]\">\n          <span\n            ><iron-icon icon=\"[[stateObj.attributes.battery_icon]]\"></iron-icon>\n            [[stateObj.attributes.battery_level]] %</span\n          >\n        </div>\n      </div>\n      <div hidden$=\"[[!supportsCommandBar(stateObj)]]\">\n        <p></p>\n        <div class=\"status-subtitle\">Vacuum cleaner commands:</div>\n        <div class=\"horizontal justified layout\">\n          <template is=\"dom-if\" if=\"[[supportsStart(stateObj)]]\">\n            <div>\n              <paper-icon-button\n                icon=\"hass:play\"\n                on-click=\"onStart\"\n                title=\"Start\"\n              ></paper-icon-button>\n            </div>\n            <div hidden$=\"[[!supportsPause(stateObj)]]\">\n              <paper-icon-button\n                icon=\"hass:pause\"\n                on-click=\"onPause\"\n                title=\"Pause\"\n              ></paper-icon-button>\n            </div>\n          </template>\n          <template is=\"dom-if\" if=\"[[!supportsStart(stateObj)]]\">\n            <div hidden$=\"[[!supportsPause(stateObj)]]\">\n              <paper-icon-button\n                icon=\"hass:play-pause\"\n                on-click=\"onPlayPause\"\n                title=\"Pause\"\n              ></paper-icon-button>\n            </div>\n          </template>\n\n          <div hidden$=\"[[!supportsStop(stateObj)]]\">\n            <paper-icon-button\n              icon=\"hass:stop\"\n              on-click=\"onStop\"\n              title=\"Stop\"\n            ></paper-icon-button>\n          </div>\n          <div hidden$=\"[[!supportsCleanSpot(stateObj)]]\">\n            <paper-icon-button\n              icon=\"hass:broom\"\n              on-click=\"onCleanSpot\"\n              title=\"Clean spot\"\n            ></paper-icon-button>\n          </div>\n          <div hidden$=\"[[!supportsLocate(stateObj)]]\">\n            <paper-icon-button\n              icon=\"hass:map-marker\"\n              on-click=\"onLocate\"\n              title=\"Locate\"\n            ></paper-icon-button>\n          </div>\n          <div hidden$=\"[[!supportsReturnHome(stateObj)]]\">\n            <paper-icon-button\n              icon=\"hass:home-map-marker\"\n              on-click=\"onReturnHome\"\n              title=\"Return home\"\n            ></paper-icon-button>\n          </div>\n        </div>\n      </div>\n\n      <div hidden$=\"[[!supportsFanSpeed(stateObj)]]\">\n        <div class=\"horizontal justified layout\">\n          <ha-paper-dropdown-menu\n            label-float=\"\"\n            dynamic-align=\"\"\n            label=\"Fan speed\"\n          >\n            <paper-listbox\n              slot=\"dropdown-content\"\n              selected=\"[[stateObj.attributes.fan_speed]]\"\n              on-selected-changed=\"fanSpeedChanged\"\n              attr-for-selected=\"item-name\"\n            >\n              <template\n                is=\"dom-repeat\"\n                items=\"[[stateObj.attributes.fan_speed_list]]\"\n              >\n                <paper-item item-name$=\"[[item]]\">[[item]]</paper-item>\n              </template>\n            </paper-listbox>\n          </ha-paper-dropdown-menu>\n          <div\n            style=\"justify-content: center; align-self: center; padding-top: 1.3em\"\n          >\n            <span\n              ><iron-icon icon=\"hass:fan\"></iron-icon>\n              [[stateObj.attributes.fan_speed]]</span\n            >\n          </div>\n        </div>\n        <p></p>\n      </div>\n      <ha-attributes\n        state-obj=\"[[stateObj]]\"\n        extra-filters=\"fan_speed,fan_speed_list,status,battery_level,battery_icon\"\n      ></ha-attributes>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: {\n        type: Object,\n      },\n\n      inDialog: {\n        type: Boolean,\n        value: false,\n      },\n\n      stateObj: {\n        type: Object,\n      },\n    };\n  }\n\n  supportsPause(stateObj) {\n    return supportsFeature(stateObj, 4);\n  }\n\n  supportsStop(stateObj) {\n    return supportsFeature(stateObj, 8);\n  }\n\n  supportsReturnHome(stateObj) {\n    return supportsFeature(stateObj, 16);\n  }\n\n  supportsFanSpeed(stateObj) {\n    return supportsFeature(stateObj, 32);\n  }\n\n  supportsBattery(stateObj) {\n    return supportsFeature(stateObj, 64);\n  }\n\n  supportsStatus(stateObj) {\n    return supportsFeature(stateObj, 128);\n  }\n\n  supportsLocate(stateObj) {\n    return supportsFeature(stateObj, 512);\n  }\n\n  supportsCleanSpot(stateObj) {\n    return supportsFeature(stateObj, 1024);\n  }\n\n  supportsStart(stateObj) {\n    return supportsFeature(stateObj, 8192);\n  }\n\n  supportsCommandBar(stateObj) {\n    return (\n      supportsFeature(stateObj, 4) |\n      supportsFeature(stateObj, 8) |\n      supportsFeature(stateObj, 16) |\n      supportsFeature(stateObj, 512) |\n      supportsFeature(stateObj, 1024) |\n      supportsFeature(stateObj, 8192)\n    );\n  }\n\n  fanSpeedChanged(ev) {\n    var oldVal = this.stateObj.attributes.fan_speed;\n    var newVal = ev.detail.value;\n\n    if (!newVal || oldVal === newVal) return;\n\n    this.hass.callService(\"vacuum\", \"set_fan_speed\", {\n      entity_id: this.stateObj.entity_id,\n      fan_speed: newVal,\n    });\n  }\n\n  onStop() {\n    this.hass.callService(\"vacuum\", \"stop\", {\n      entity_id: this.stateObj.entity_id,\n    });\n  }\n\n  onPlayPause() {\n    this.hass.callService(\"vacuum\", \"start_pause\", {\n      entity_id: this.stateObj.entity_id,\n    });\n  }\n\n  onPause() {\n    this.hass.callService(\"vacuum\", \"pause\", {\n      entity_id: this.stateObj.entity_id,\n    });\n  }\n\n  onStart() {\n    this.hass.callService(\"vacuum\", \"start\", {\n      entity_id: this.stateObj.entity_id,\n    });\n  }\n\n  onLocate() {\n    this.hass.callService(\"vacuum\", \"locate\", {\n      entity_id: this.stateObj.entity_id,\n    });\n  }\n\n  onCleanSpot() {\n    this.hass.callService(\"vacuum\", \"clean_spot\", {\n      entity_id: this.stateObj.entity_id,\n    });\n  }\n\n  onReturnHome() {\n    this.hass.callService(\"vacuum\", \"return_to_base\", {\n      entity_id: this.stateObj.entity_id,\n    });\n  }\n}\n\ncustomElements.define(\"more-info-vacuum\", MoreInfoVacuum);\n","import \"@polymer/iron-flex-layout/iron-flex-layout-classes\";\nimport \"@polymer/paper-item/paper-item\";\nimport \"@polymer/paper-listbox/paper-listbox\";\nimport \"@polymer/paper-toggle-button/paper-toggle-button\";\nimport { timeOut } from \"@polymer/polymer/lib/utils/async\";\nimport { Debouncer } from \"@polymer/polymer/lib/utils/debounce\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport \"../../../components/ha-water_heater-control\";\nimport \"../../../components/ha-paper-slider\";\nimport \"../../../components/ha-paper-dropdown-menu\";\n\nimport featureClassNames from \"../../../common/entity/feature_class_names\";\nimport { supportsFeature } from \"../../../common/entity/supports-feature\";\n\nimport { EventsMixin } from \"../../../mixins/events-mixin\";\nimport LocalizeMixin from \"../../../mixins/localize-mixin\";\n\n/*\n * @appliesMixin EventsMixin\n * @appliesMixin LocalizeMixin\n */\nclass MoreInfoWaterHeater extends LocalizeMixin(EventsMixin(PolymerElement)) {\n  static get template() {\n    return html`\n      <style include=\"iron-flex\"></style>\n      <style>\n        :host {\n          color: var(--primary-text-color);\n        }\n\n        .container-away_mode,\n        .container-temperature,\n        .container-operation_list,\n\n        .has-away_mode .container-away_mode,\n        .has-target_temperature .container-temperature,\n        .has-operation_mode .container-operation_list,\n\n        .container-operation_list iron-icon,\n\n        ha-paper-dropdown-menu {\n          width: 100%;\n        }\n\n        paper-item {\n          cursor: pointer;\n        }\n\n        ha-paper-slider {\n          width: 100%;\n        }\n\n        ha-water_heater-control.range-control-left,\n        ha-water_heater-control.range-control-right {\n          float: left;\n          width: 46%;\n        }\n        ha-water_heater-control.range-control-left {\n          margin-right: 4%;\n        }\n        ha-water_heater-control.range-control-right {\n          margin-left: 4%;\n        }\n\n        .single-row {\n          padding: 8px 0;\n        }\n        }\n      </style>\n\n      <div class$=\"[[computeClassNames(stateObj)]]\">\n        <div class=\"container-temperature\">\n          <div class$=\"[[stateObj.attributes.operation_mode]]\">\n            <div hidden$=\"[[!supportsTemperatureControls(stateObj)]]\">\n              [[localize('ui.card.water_heater.target_temperature')]]\n            </div>\n            <template is=\"dom-if\" if=\"[[supportsTemperature(stateObj)]]\">\n              <ha-water_heater-control\n                value=\"[[stateObj.attributes.temperature]]\"\n                units=\"[[hass.config.unit_system.temperature]]\"\n                step=\"[[computeTemperatureStepSize(hass, stateObj)]]\"\n                min=\"[[stateObj.attributes.min_temp]]\"\n                max=\"[[stateObj.attributes.max_temp]]\"\n                on-change=\"targetTemperatureChanged\"\n              >\n              </ha-water_heater-control>\n            </template>\n          </div>\n        </div>\n\n        <template is=\"dom-if\" if=\"[[supportsOperationMode(stateObj)]]\">\n          <div class=\"container-operation_list\">\n            <div class=\"controls\">\n              <ha-paper-dropdown-menu\n                label-float=\"\"\n                dynamic-align=\"\"\n                label=\"[[localize('ui.card.water_heater.operation')]]\"\n              >\n                <paper-listbox\n                  slot=\"dropdown-content\"\n                  selected=\"[[stateObj.attributes.operation_mode]]\"\n                  attr-for-selected=\"item-name\"\n                  on-selected-changed=\"handleOperationmodeChanged\"\n                >\n                  <template\n                    is=\"dom-repeat\"\n                    items=\"[[stateObj.attributes.operation_list]]\"\n                  >\n                    <paper-item item-name$=\"[[item]]\"\n                      >[[_localizeOperationMode(localize, item)]]</paper-item\n                    >\n                  </template>\n                </paper-listbox>\n              </ha-paper-dropdown-menu>\n            </div>\n          </div>\n        </template>\n\n        <template is=\"dom-if\" if=\"[[supportsAwayMode(stateObj)]]\">\n          <div class=\"container-away_mode\">\n            <div class=\"center horizontal layout single-row\">\n              <div class=\"flex\">\n                [[localize('ui.card.water_heater.away_mode')]]\n              </div>\n              <paper-toggle-button\n                checked=\"[[awayToggleChecked]]\"\n                on-change=\"awayToggleChanged\"\n              >\n              </paper-toggle-button>\n            </div>\n          </div>\n        </template>\n      </div>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: {\n        type: Object,\n      },\n\n      stateObj: {\n        type: Object,\n        observer: \"stateObjChanged\",\n      },\n\n      awayToggleChecked: Boolean,\n    };\n  }\n\n  stateObjChanged(newVal, oldVal) {\n    if (newVal) {\n      this.setProperties({\n        awayToggleChecked: newVal.attributes.away_mode === \"on\",\n      });\n    }\n\n    if (oldVal) {\n      this._debouncer = Debouncer.debounce(\n        this._debouncer,\n        timeOut.after(500),\n        () => {\n          this.fire(\"iron-resize\");\n        }\n      );\n    }\n  }\n\n  computeTemperatureStepSize(hass, stateObj) {\n    if (stateObj.attributes.target_temp_step) {\n      return stateObj.attributes.target_temp_step;\n    }\n    if (hass.config.unit_system.temperature.indexOf(\"F\") !== -1) {\n      return 1;\n    }\n    return 0.5;\n  }\n\n  supportsTemperatureControls(stateObj) {\n    return this.supportsTemperature(stateObj);\n  }\n\n  supportsTemperature(stateObj) {\n    return (\n      supportsFeature(stateObj, 1) &&\n      typeof stateObj.attributes.temperature === \"number\"\n    );\n  }\n\n  supportsOperationMode(stateObj) {\n    return supportsFeature(stateObj, 2);\n  }\n\n  supportsAwayMode(stateObj) {\n    return supportsFeature(stateObj, 4);\n  }\n\n  computeClassNames(stateObj) {\n    const _featureClassNames = {\n      1: \"has-target_temperature\",\n      2: \"has-operation_mode\",\n      4: \"has-away_mode\",\n    };\n\n    var classes = [featureClassNames(stateObj, _featureClassNames)];\n\n    classes.push(\"more-info-water_heater\");\n\n    return classes.join(\" \");\n  }\n\n  targetTemperatureChanged(ev) {\n    const temperature = ev.target.value;\n    if (temperature === this.stateObj.attributes.temperature) return;\n    this.callServiceHelper(\"set_temperature\", { temperature: temperature });\n  }\n\n  awayToggleChanged(ev) {\n    const oldVal = this.stateObj.attributes.away_mode === \"on\";\n    const newVal = ev.target.checked;\n    if (oldVal === newVal) return;\n    this.callServiceHelper(\"set_away_mode\", { away_mode: newVal });\n  }\n\n  handleOperationmodeChanged(ev) {\n    const oldVal = this.stateObj.attributes.operation_mode;\n    const newVal = ev.detail.value;\n    if (!newVal || oldVal === newVal) return;\n    this.callServiceHelper(\"set_operation_mode\", {\n      operation_mode: newVal,\n    });\n  }\n\n  callServiceHelper(service, data) {\n    // We call stateChanged after a successful call to re-sync the inputs\n    // with the state. It will be out of sync if our service call did not\n    // result in the entity to be turned on. Since the state is not changing,\n    // the resync is not called automatic.\n    /* eslint-disable no-param-reassign */\n    data.entity_id = this.stateObj.entity_id;\n    /* eslint-enable no-param-reassign */\n    this.hass.callService(\"water_heater\", service, data).then(() => {\n      this.stateObjChanged(this.stateObj);\n    });\n  }\n\n  _localizeOperationMode(localize, mode) {\n    return localize(`state.water_heater.${mode}`) || mode;\n  }\n}\n\ncustomElements.define(\"more-info-water_heater\", MoreInfoWaterHeater);\n","import \"@polymer/iron-icon/iron-icon\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport LocalizeMixin from \"../../../mixins/localize-mixin\";\n\n/*\n * @appliesMixin LocalizeMixin\n */\nclass MoreInfoWeather extends LocalizeMixin(PolymerElement) {\n  static get template() {\n    return html`\n      <style>\n        iron-icon {\n          color: var(--paper-item-icon-color);\n        }\n        .section {\n          margin: 16px 0 8px 0;\n          font-size: 1.2em;\n        }\n\n        .flex {\n          display: flex;\n          height: 32px;\n          align-items: center;\n        }\n\n        .main {\n          flex: 1;\n          margin-left: 24px;\n        }\n\n        .temp,\n        .templow {\n          min-width: 48px;\n          text-align: right;\n        }\n\n        .templow {\n          margin: 0 16px;\n          color: var(--secondary-text-color);\n        }\n\n        .attribution {\n          color: var(--secondary-text-color);\n          text-align: center;\n        }\n      </style>\n\n      <div class=\"flex\">\n        <iron-icon icon=\"hass:thermometer\"></iron-icon>\n        <div class=\"main\">\n          [[localize('ui.card.weather.attributes.temperature')]]\n        </div>\n        <div>\n          [[stateObj.attributes.temperature]] [[getUnit('temperature')]]\n        </div>\n      </div>\n      <template is=\"dom-if\" if=\"[[_showValue(stateObj.attributes.pressure)]]\">\n        <div class=\"flex\">\n          <iron-icon icon=\"hass:gauge\"></iron-icon>\n          <div class=\"main\">\n            [[localize('ui.card.weather.attributes.air_pressure')]]\n          </div>\n          <div>\n            [[stateObj.attributes.pressure]] [[getUnit('air_pressure')]]\n          </div>\n        </div>\n      </template>\n      <template is=\"dom-if\" if=\"[[_showValue(stateObj.attributes.humidity)]]\">\n        <div class=\"flex\">\n          <iron-icon icon=\"hass:water-percent\"></iron-icon>\n          <div class=\"main\">\n            [[localize('ui.card.weather.attributes.humidity')]]\n          </div>\n          <div>[[stateObj.attributes.humidity]] %</div>\n        </div>\n      </template>\n      <template is=\"dom-if\" if=\"[[_showValue(stateObj.attributes.wind_speed)]]\">\n        <div class=\"flex\">\n          <iron-icon icon=\"hass:weather-windy\"></iron-icon>\n          <div class=\"main\">\n            [[localize('ui.card.weather.attributes.wind_speed')]]\n          </div>\n          <div>\n            [[getWind(stateObj.attributes.wind_speed,\n            stateObj.attributes.wind_bearing, localize)]]\n          </div>\n        </div>\n      </template>\n      <template is=\"dom-if\" if=\"[[_showValue(stateObj.attributes.visibility)]]\">\n        <div class=\"flex\">\n          <iron-icon icon=\"hass:eye\"></iron-icon>\n          <div class=\"main\">\n            [[localize('ui.card.weather.attributes.visibility')]]\n          </div>\n          <div>[[stateObj.attributes.visibility]] [[getUnit('length')]]</div>\n        </div>\n      </template>\n\n      <template is=\"dom-if\" if=\"[[stateObj.attributes.forecast]]\">\n        <div class=\"section\">[[localize('ui.card.weather.forecast')]]:</div>\n        <template is=\"dom-repeat\" items=\"[[stateObj.attributes.forecast]]\">\n          <div class=\"flex\">\n            <template is=\"dom-if\" if=\"[[_showValue(item.condition)]]\">\n              <iron-icon icon=\"[[getWeatherIcon(item.condition)]]\"></iron-icon>\n            </template>\n            <template is=\"dom-if\" if=\"[[!_showValue(item.templow)]]\">\n              <div class=\"main\">[[computeDateTime(item.datetime)]]</div>\n            </template>\n            <template is=\"dom-if\" if=\"[[_showValue(item.templow)]]\">\n              <div class=\"main\">[[computeDate(item.datetime)]]</div>\n              <div class=\"templow\">\n                [[item.templow]] [[getUnit('temperature')]]\n              </div>\n            </template>\n            <div class=\"temp\">\n              [[item.temperature]] [[getUnit('temperature')]]\n            </div>\n          </div>\n        </template>\n      </template>\n\n      <template is=\"dom-if\" if=\"stateObj.attributes.attribution\">\n        <div class=\"attribution\">[[stateObj.attributes.attribution]]</div>\n      </template>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      stateObj: Object,\n    };\n  }\n\n  constructor() {\n    super();\n    this.cardinalDirections = [\n      \"N\",\n      \"NNE\",\n      \"NE\",\n      \"ENE\",\n      \"E\",\n      \"ESE\",\n      \"SE\",\n      \"SSE\",\n      \"S\",\n      \"SSW\",\n      \"SW\",\n      \"WSW\",\n      \"W\",\n      \"WNW\",\n      \"NW\",\n      \"NNW\",\n      \"N\",\n    ];\n    this.weatherIcons = {\n      \"clear-night\": \"hass:weather-night\",\n      cloudy: \"hass:weather-cloudy\",\n      fog: \"hass:weather-fog\",\n      hail: \"hass:weather-hail\",\n      lightning: \"hass:weather-lightning\",\n      \"lightning-rainy\": \"hass:weather-lightning-rainy\",\n      partlycloudy: \"hass:weather-partlycloudy\",\n      pouring: \"hass:weather-pouring\",\n      rainy: \"hass:weather-rainy\",\n      snowy: \"hass:weather-snowy\",\n      \"snowy-rainy\": \"hass:weather-snowy-rainy\",\n      sunny: \"hass:weather-sunny\",\n      windy: \"hass:weather-windy\",\n      \"windy-variant\": \"hass:weather-windy-variant\",\n    };\n  }\n\n  computeDate(data) {\n    const date = new Date(data);\n    return date.toLocaleDateString(this.hass.language, {\n      weekday: \"long\",\n      month: \"short\",\n      day: \"numeric\",\n    });\n  }\n\n  computeDateTime(data) {\n    const date = new Date(data);\n    return date.toLocaleDateString(this.hass.language, {\n      weekday: \"long\",\n      hour: \"numeric\",\n    });\n  }\n\n  getUnit(measure) {\n    const lengthUnit = this.hass.config.unit_system.length || \"\";\n    switch (measure) {\n      case \"air_pressure\":\n        return lengthUnit === \"km\" ? \"hPa\" : \"inHg\";\n      case \"length\":\n        return lengthUnit;\n      case \"precipitation\":\n        return lengthUnit === \"km\" ? \"mm\" : \"in\";\n      default:\n        return this.hass.config.unit_system[measure] || \"\";\n    }\n  }\n\n  windBearingToText(degree) {\n    const degreenum = parseInt(degree);\n    if (isFinite(degreenum)) {\n      return this.cardinalDirections[(((degreenum + 11.25) / 22.5) | 0) % 16];\n    }\n    return degree;\n  }\n\n  getWind(speed, bearing, localize) {\n    if (bearing != null) {\n      const cardinalDirection = this.windBearingToText(bearing);\n      return `${speed} ${this.getUnit(\"length\")}/h (${localize(\n        `ui.card.weather.cardinal_direction.${cardinalDirection.toLowerCase()}`\n      ) || cardinalDirection})`;\n    }\n    return `${speed} ${this.getUnit(\"length\")}/h`;\n  }\n\n  getWeatherIcon(condition) {\n    return this.weatherIcons[condition];\n  }\n\n  _showValue(item) {\n    return typeof item !== \"undefined\" && item !== null;\n  }\n}\n\ncustomElements.define(\"more-info-weather\", MoreInfoWeather);\n","import \"@polymer/app-layout/app-toolbar/app-toolbar\";\nimport \"@polymer/paper-dialog-scrollable/paper-dialog-scrollable\";\nimport \"@polymer/paper-icon-button/paper-icon-button\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport \"../../components/state-history-charts\";\nimport \"../../data/ha-state-history-data\";\nimport \"../../resources/ha-style\";\nimport \"../../state-summary/state-card-content\";\n\nimport \"./controls/more-info-content\";\n\nimport computeStateName from \"../../common/entity/compute_state_name\";\nimport computeStateDomain from \"../../common/entity/compute_state_domain\";\nimport isComponentLoaded from \"../../common/config/is_component_loaded\";\nimport { DOMAINS_MORE_INFO_NO_HISTORY } from \"../../common/const\";\nimport { EventsMixin } from \"../../mixins/events-mixin\";\nimport { computeRTL } from \"../../common/util/compute_rtl\";\n\nconst DOMAINS_NO_INFO = [\"camera\", \"configurator\", \"history_graph\"];\n/*\n * @appliesMixin EventsMixin\n */\nclass MoreInfoControls extends EventsMixin(PolymerElement) {\n  static get template() {\n    return html`\n      <style include=\"ha-style-dialog\">\n        app-toolbar {\n          color: var(--more-info-header-color);\n          background-color: var(--more-info-header-background);\n        }\n\n        app-toolbar [main-title] {\n          @apply --ha-more-info-app-toolbar-title;\n        }\n\n        state-card-content {\n          display: block;\n          padding: 16px;\n        }\n\n        state-history-charts {\n          max-width: 100%;\n          margin-bottom: 16px;\n        }\n\n        @media all and (min-width: 451px) and (min-height: 501px) {\n          .main-title {\n            pointer-events: auto;\n            cursor: default;\n          }\n        }\n\n        paper-dialog-scrollable {\n          padding-bottom: 16px;\n        }\n\n        :host([domain=\"camera\"]) paper-dialog-scrollable {\n          margin: 0 -24px -21px;\n        }\n\n        :host([rtl]) app-toolbar {\n          direction: rtl;\n          text-align: right;\n        }\n      </style>\n\n      <app-toolbar>\n        <paper-icon-button\n          icon=\"hass:close\"\n          dialog-dismiss=\"\"\n        ></paper-icon-button>\n        <div class=\"main-title\" main-title=\"\" on-click=\"enlarge\">\n          [[_computeStateName(stateObj)]]\n        </div>\n        <template is=\"dom-if\" if=\"[[canConfigure]]\">\n          <paper-icon-button\n            icon=\"hass:settings\"\n            on-click=\"_gotoSettings\"\n          ></paper-icon-button>\n        </template>\n      </app-toolbar>\n\n      <template is=\"dom-if\" if=\"[[_computeShowStateInfo(stateObj)]]\" restamp=\"\">\n        <state-card-content\n          state-obj=\"[[stateObj]]\"\n          hass=\"[[hass]]\"\n          in-dialog=\"\"\n        ></state-card-content>\n      </template>\n      <paper-dialog-scrollable dialog-element=\"[[dialogElement]]\">\n        <template\n          is=\"dom-if\"\n          if=\"[[_computeShowHistoryComponent(hass, stateObj)]]\"\n          restamp=\"\"\n        >\n          <ha-state-history-data\n            hass=\"[[hass]]\"\n            filter-type=\"recent-entity\"\n            entity-id=\"[[stateObj.entity_id]]\"\n            data=\"{{_stateHistory}}\"\n            is-loading=\"{{_stateHistoryLoading}}\"\n            cache-config=\"[[_cacheConfig]]\"\n          ></ha-state-history-data>\n          <state-history-charts\n            hass=\"[[hass]]\"\n            history-data=\"[[_stateHistory]]\"\n            is-loading-data=\"[[_stateHistoryLoading]]\"\n            up-to-now\n          ></state-history-charts>\n        </template>\n        <more-info-content\n          state-obj=\"[[stateObj]]\"\n          hass=\"[[hass]]\"\n        ></more-info-content>\n      </paper-dialog-scrollable>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n\n      stateObj: {\n        type: Object,\n        observer: \"_stateObjChanged\",\n      },\n\n      dialogElement: Object,\n      canConfigure: Boolean,\n\n      domain: {\n        type: String,\n        reflectToAttribute: true,\n        computed: \"_computeDomain(stateObj)\",\n      },\n\n      _stateHistory: Object,\n      _stateHistoryLoading: Boolean,\n\n      large: {\n        type: Boolean,\n        value: false,\n        notify: true,\n      },\n\n      _cacheConfig: {\n        type: Object,\n        value: {\n          refresh: 60,\n          cacheKey: null,\n          hoursToShow: 24,\n        },\n      },\n      rtl: {\n        type: Boolean,\n        reflectToAttribute: true,\n        computed: \"_computeRTL(hass)\",\n      },\n    };\n  }\n\n  enlarge() {\n    this.large = !this.large;\n  }\n\n  _computeShowStateInfo(stateObj) {\n    return !stateObj || !DOMAINS_NO_INFO.includes(computeStateDomain(stateObj));\n  }\n\n  _computeShowHistoryComponent(hass, stateObj) {\n    return (\n      hass &&\n      stateObj &&\n      isComponentLoaded(hass, \"history\") &&\n      !DOMAINS_MORE_INFO_NO_HISTORY.includes(computeStateDomain(stateObj))\n    );\n  }\n\n  _computeDomain(stateObj) {\n    return stateObj ? computeStateDomain(stateObj) : \"\";\n  }\n\n  _computeStateName(stateObj) {\n    return stateObj ? computeStateName(stateObj) : \"\";\n  }\n\n  _stateObjChanged(newVal) {\n    if (!newVal) {\n      return;\n    }\n\n    if (this._cacheConfig.cacheKey !== `more_info.${newVal.entity_id}`) {\n      this._cacheConfig = Object.assign({}, this._cacheConfig, {\n        cacheKey: `more_info.${newVal.entity_id}`,\n      });\n    }\n  }\n\n  _gotoSettings() {\n    this.fire(\"more-info-page\", { page: \"settings\" });\n  }\n\n  _computeRTL(hass) {\n    return computeRTL(hass);\n  }\n}\ncustomElements.define(\"more-info-controls\", MoreInfoControls);\n","import \"@polymer/app-layout/app-toolbar/app-toolbar\";\nimport \"@material/mwc-button\";\nimport \"@polymer/paper-icon-button/paper-icon-button\";\nimport \"@polymer/paper-input/paper-input\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport { EventsMixin } from \"../../mixins/events-mixin\";\nimport LocalizeMixin from \"../../mixins/localize-mixin\";\n\nimport computeStateName from \"../../common/entity/compute_state_name\";\nimport computeDomain from \"../../common/entity/compute_domain\";\nimport { updateEntityRegistryEntry } from \"../../data/entity_registry\";\n\nimport \"../../components/ha-paper-icon-button-arrow-prev\";\n/*\n * @appliesMixin EventsMixin\n * @appliesMixin LocalizeMixin\n */\nclass MoreInfoSettings extends LocalizeMixin(EventsMixin(PolymerElement)) {\n  static get template() {\n    return html`\n      <style>\n        app-toolbar {\n          color: var(--more-info-header-color);\n          background-color: var(--more-info-header-background);\n\n          /* to fit save button */\n          padding-right: 0;\n        }\n\n        app-toolbar [main-title] {\n          @apply --ha-more-info-app-toolbar-title;\n        }\n\n        app-toolbar mwc-button {\n          font-size: 0.8em;\n          margin: 0;\n        }\n\n        .form {\n          padding: 0 24px 24px;\n        }\n      </style>\n\n      <app-toolbar>\n        <ha-paper-icon-button-arrow-prev\n          on-click=\"_backTapped\"\n        ></ha-paper-icon-button-arrow-prev>\n        <div main-title=\"\">[[_computeStateName(stateObj)]]</div>\n        <mwc-button on-click=\"_save\" disabled=\"[[_computeInvalid(_entityId)]]\"\n          >[[localize('ui.dialogs.more_info_settings.save')]]</mwc-button\n        >\n      </app-toolbar>\n\n      <div class=\"form\">\n        <paper-input\n          value=\"{{_name}}\"\n          label=\"[[localize('ui.dialogs.more_info_settings.name')]]\"\n        ></paper-input>\n        <paper-input\n          value=\"{{_entityId}}\"\n          label=\"[[localize('ui.dialogs.more_info_settings.entity_id')]]\"\n          error-message=\"Domain needs to stay the same\"\n          invalid=\"[[_computeInvalid(_entityId)]]\"\n        ></paper-input>\n      </div>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      stateObj: Object,\n\n      registryInfo: {\n        type: Object,\n        observer: \"_registryInfoChanged\",\n        notify: true,\n      },\n\n      _name: String,\n      _entityId: String,\n    };\n  }\n\n  _computeStateName(stateObj) {\n    if (!stateObj) return \"\";\n    return computeStateName(stateObj);\n  }\n\n  _computeInvalid(entityId) {\n    return computeDomain(this.stateObj.entity_id) !== computeDomain(entityId);\n  }\n\n  _registryInfoChanged(newVal) {\n    if (newVal) {\n      this.setProperties({\n        _name: newVal.name,\n        _entityId: newVal.entity_id,\n      });\n    } else {\n      this.setProperties({\n        _name: \"\",\n        _entityId: \"\",\n      });\n    }\n  }\n\n  _backTapped() {\n    this.fire(\"more-info-page\", { page: null });\n  }\n\n  async _save() {\n    try {\n      const info = await updateEntityRegistryEntry(\n        this.hass,\n        this.stateObj.entity_id,\n        {\n          name: this._name,\n          new_entity_id: this._entityId,\n        }\n      );\n\n      this.registryInfo = info;\n\n      // Keep the more info dialog open at the new entity.\n      if (this.stateObj.entity_id !== this._entityId) {\n        this.fire(\"hass-more-info\", { entityId: this._entityId });\n      }\n    } catch (err) {\n      alert(`save failed: ${err.message}`);\n    }\n  }\n}\ncustomElements.define(\"more-info-settings\", MoreInfoSettings);\n","import { dedupingMixin } from \"@polymer/polymer/lib/utils/mixin\";\nimport { PaperDialogBehavior } from \"@polymer/paper-dialog-behavior/paper-dialog-behavior\";\nimport { mixinBehaviors } from \"@polymer/polymer/lib/legacy/class\";\nimport { EventsMixin } from \"./events-mixin\";\n/**\n * @polymerMixin\n * @appliesMixin EventsMixin\n * @appliesMixin PaperDialogBehavior\n */\nexport default dedupingMixin(\n  (superClass) =>\n    class extends mixinBehaviors(\n      [EventsMixin, PaperDialogBehavior],\n      superClass\n    ) {\n      static get properties() {\n        return {\n          withBackdrop: {\n            type: Boolean,\n            value: true,\n          },\n        };\n      }\n    }\n);\n","const hassAttributeUtil = {};\n\nhassAttributeUtil.DOMAIN_DEVICE_CLASS = {\n  binary_sensor: [\n    \"battery\",\n    \"cold\",\n    \"connectivity\",\n    \"door\",\n    \"garage_door\",\n    \"gas\",\n    \"heat\",\n    \"light\",\n    \"lock\",\n    \"moisture\",\n    \"motion\",\n    \"moving\",\n    \"occupancy\",\n    \"opening\",\n    \"plug\",\n    \"power\",\n    \"presence\",\n    \"problem\",\n    \"safety\",\n    \"smoke\",\n    \"sound\",\n    \"vibration\",\n    \"window\",\n  ],\n  cover: [\n    \"awning\",\n    \"blind\",\n    \"curtain\",\n    \"damper\",\n    \"door\",\n    \"garage\",\n    \"shade\",\n    \"shutter\",\n    \"window\",\n  ],\n  sensor: [\n    \"battery\",\n    \"humidity\",\n    \"illuminance\",\n    \"temperature\",\n    \"pressure\",\n    \"power\",\n    \"signal_strength\",\n  ],\n  switch: [\"switch\", \"outlet\"],\n};\n\nhassAttributeUtil.UNKNOWN_TYPE = \"json\";\nhassAttributeUtil.ADD_TYPE = \"key-value\";\n\nhassAttributeUtil.TYPE_TO_TAG = {\n  string: \"ha-customize-string\",\n  json: \"ha-customize-string\",\n  icon: \"ha-customize-icon\",\n  boolean: \"ha-customize-boolean\",\n  array: \"ha-customize-array\",\n  \"key-value\": \"ha-customize-key-value\",\n};\n\n// Attributes here serve dual purpose:\n// 1) Any key of this object won't be shown in more-info window.\n// 2) Any key which has value other than undefined will appear in customization\n//    config according to its value.\nhassAttributeUtil.LOGIC_STATE_ATTRIBUTES = hassAttributeUtil.LOGIC_STATE_ATTRIBUTES || {\n  entity_picture: undefined,\n  friendly_name: { type: \"string\", description: \"Name\" },\n  icon: { type: \"icon\" },\n  emulated_hue: {\n    type: \"boolean\",\n    domains: [\"emulated_hue\"],\n  },\n  emulated_hue_name: {\n    type: \"string\",\n    domains: [\"emulated_hue\"],\n  },\n  haaska_hidden: undefined,\n  haaska_name: undefined,\n  homebridge_hidden: { type: \"boolean\" },\n  homebridge_name: { type: \"string\" },\n  supported_features: undefined,\n  attribution: undefined,\n  custom_ui_more_info: { type: \"string\" },\n  custom_ui_state_card: { type: \"string\" },\n  device_class: {\n    type: \"array\",\n    options: hassAttributeUtil.DOMAIN_DEVICE_CLASS,\n    description: \"Device class\",\n    domains: [\"binary_sensor\", \"cover\", \"sensor\", \"switch\"],\n  },\n  hidden: { type: \"boolean\", description: \"Hide from UI\" },\n  assumed_state: {\n    type: \"boolean\",\n    domains: [\n      \"switch\",\n      \"light\",\n      \"cover\",\n      \"climate\",\n      \"fan\",\n      \"group\",\n      \"water_heater\",\n    ],\n  },\n  initial_state: {\n    type: \"string\",\n    domains: [\"automation\"],\n  },\n  unit_of_measurement: { type: \"string\" },\n};\n\nexport default hassAttributeUtil;\n"],"sourceRoot":""}