{"version":3,"sources":["webpack:///./src/cards/ha-history_graph-card.js","webpack:///./src/common/const.ts","webpack:///./src/common/dom/dynamic_content_updater.ts","webpack:///./src/common/entity/attribute_class_names.ts","webpack:///./src/common/entity/can_toggle_domain.ts","webpack:///./src/common/entity/can_toggle_state.ts","webpack:///./src/common/entity/feature_class_names.ts","webpack:///./src/common/entity/state_card_type.ts","webpack:///./src/common/entity/state_more_info_type.ts","webpack:///./src/components/entity/state-info.js","webpack:///./src/components/ha-attributes.js","webpack:///./src/components/ha-camera-stream.ts","webpack:///./src/components/ha-climate-control.js","webpack:///./src/components/ha-color-picker.js","webpack:///./src/components/ha-labeled-slider.js","webpack:///./src/components/ha-paper-icon-button-arrow-prev.ts","webpack:///./src/components/ha-paper-slider.js","webpack:///./src/components/ha-vacuum-state.js","webpack:///./src/components/ha-water_heater-control.js","webpack:///./src/components/ha-water_heater-state.js","webpack:///./src/dialogs/ha-more-info-dialog.js","webpack:///./src/dialogs/more-info/controls/more-info-alarm_control_panel.js","webpack:///./src/dialogs/more-info/controls/more-info-automation.js","webpack:///./src/dialogs/more-info/controls/more-info-camera.ts","webpack:///./src/dialogs/more-info/controls/more-info-climate.js","webpack:///./src/dialogs/more-info/controls/more-info-configurator.js","webpack:///./src/dialogs/more-info/controls/more-info-content.ts","webpack:///./src/dialogs/more-info/controls/more-info-cover.js","webpack:///./src/dialogs/more-info/controls/more-info-default.js","webpack:///./src/dialogs/more-info/controls/more-info-fan.js","webpack:///./src/dialogs/more-info/controls/more-info-group.js","webpack:///./src/dialogs/more-info/controls/more-info-history_graph.js","webpack:///./src/dialogs/more-info/controls/more-info-input_datetime.js","webpack:///./src/dialogs/more-info/controls/more-info-light.js","webpack:///./src/dialogs/more-info/controls/more-info-lock.js","webpack:///./src/dialogs/more-info/controls/more-info-media_player.js","webpack:///./src/dialogs/more-info/controls/more-info-script.js","webpack:///./src/dialogs/more-info/controls/more-info-sun.js","webpack:///./src/dialogs/more-info/controls/more-info-updater.js","webpack:///./src/dialogs/more-info/controls/more-info-vacuum.js","webpack:///./src/dialogs/more-info/controls/more-info-water_heater.js","webpack:///./src/dialogs/more-info/controls/more-info-weather.js","webpack:///./src/dialogs/more-info/more-info-controls.js","webpack:///./src/dialogs/more-info/more-info-settings.js","webpack:///./src/mixins/dialog-mixin.js","webpack:///./src/state-summary/state-card-climate.js","webpack:///./src/state-summary/state-card-configurator.js","webpack:///./src/state-summary/state-card-content.js","webpack:///./src/state-summary/state-card-cover.js","webpack:///./src/state-summary/state-card-display.js","webpack:///./src/state-summary/state-card-input_number.js","webpack:///./src/state-summary/state-card-input_select.ts","webpack:///./src/state-summary/state-card-input_text.js","webpack:///./src/state-summary/state-card-lock.js","webpack:///./src/state-summary/state-card-media_player.js","webpack:///./src/state-summary/state-card-scene.js","webpack:///./src/state-summary/state-card-script.js","webpack:///./src/state-summary/state-card-timer.js","webpack:///./src/state-summary/state-card-toggle.js","webpack:///./src/state-summary/state-card-vacuum.js","webpack:///./src/state-summary/state-card-water_heater.js","webpack:///./src/state-summary/state-card-weblink.js","webpack:///./src/util/hass-attributes-util.js"],"names":["HaHistoryGraphCard","EventsMixin","PolymerElement","template","html","properties","hass","Object","stateObj","type","observer","inDialog","Boolean","value","stateHistory","stateHistoryLoading","cacheConfig","refresh","cacheKey","hoursToShow","stateObjObserver","entity_id","attributes","hours_to_show","assign","computeTitle","computeStateName","computeContentClass","computeHistoryEntities","computeElevation","cardTapped","ev","mq","window","matchMedia","matches","stopPropagation","fire","entityId","customElements","define","DEFAULT_DOMAIN_ICON","DEFAULT_PANEL","DOMAINS_WITH_CARD","DOMAINS_WITH_MORE_INFO","DOMAINS_HIDE_MORE_INFO","DOMAINS_MORE_INFO_NO_HISTORY","STATES_OFF","DOMAINS_TOGGLE","Set","UNIT_C","UNIT_F","DEFAULT_VIEW_ENTITY_ID","dynamicContentUpdater","root","newElementTag","rootEl","customEl","lastChild","tagName","removeChild","document","createElement","toLowerCase","setProperties","keys","forEach","key","parentNode","appendChild","attributeClassNames","map","attribute","filter","attr","join","canToggleDomain","domain","services","canToggleState","computeStateDomain","state","supportsFeature","featureClassNames","classNames","supported_features","feature","Number","stateCardType","includes","control","stateMoreInfoType","StateInfo","styleTemplate","stateBadgeTemplate","infoTemplate","rtl","reflectToAttribute","computed","computeRTL","HaAttributes","extraFilters","String","filtersArray","Array","computeFiltersArray","hassAttributeUtil","LOGIC_STATE_ATTRIBUTES","concat","split","computeDisplayAttributes","indexOf","formatAttribute","replace","formatAttributeValue","isArray","JSON","stringify","computeAttribution","attribution","HaCameraStream","customElement","property","undefined","_attached","__DEMO__","_shouldRenderMJPEG","_elementResized","computeMJPEGStreamUrl","showControls","changedProps","stateObjChanged","has","attachedChanged","oldState","get","oldEntityId","curEntityId","_destroyPolyfill","_startHls","_forceMJPEG","config","components","CAMERA_SUPPORT_STREAM","shadowRoot","querySelector","Hls","default","hlsSupported","isSupported","videoEl","_videoEl","canPlayType","url","fetchStreamUrl","_renderHLSPolyfill","_renderHLSNative","err","console","error","src","Promise","resolve","addEventListener","play","hls","_hlsPolyfillInstance","attachMedia","on","Events","MEDIA_ATTACHED","loadSource","fireEvent","destroy","css","LitElement","HaClimateControl","units","min","max","step","temperatureStateInFlux","inFlux","$","target_temperature","classList","toggle","_round","val","s","toString","parseFloat","toFixed","length","Math","round","incrementValue","newval","last_changed","Date","now","decrementValue","valueChanged","setTimeout","HaColorPicker","hsColor","desiredHsColor","width","height","radius","hueSegments","saturationSegments","ignoreSegments","throttle","ready","setupLayers","drawColorWheel","drawMarker","interactionLayer","onMouseDown","onTouchStart","convertToCanvasCoordinates","clientX","clientY","svgPoint","createSVGPoint","x","y","cc","matrixTransform","getScreenCTM","inverse","isInWheel","onMouseSelect","canvas","add","onMouseUp","remove","removeEventListener","requestAnimationFrame","processUserSelect","touch","changedTouches","target","marker","preventDefault","onTouchSelect","onTouchEnd","tapBecameScroll","onTap","passive","canvasXY","hs","getColor","onColorSelect","setMarkerOnColor","applySegmentFilter","applyColorToCanvas","colorSelectIsThrottled","clearTimeout","ensureFinalSelect","fireColorSelected","h","dist","theta","PI","markerdX","cos","markerdY","sin","translateString","setAttribute","tooltip","style","color","applyHsColor","getAngle","dX","dY","atan2","angle","getDistance","sqrt","hue","relativeDistance","sat","angleStep","halfAngleStep","rest","segmentSize","saturationStep","calculatedSat","floor","backgroundLayer","originX","originY","shadowColor","shadowOffsetX","shadowOffsetY","shadowBlur","context","getContext","cX","cY","counterClockwise","wheelStyle","getComputedStyle","borderWidth","parseInt","getPropertyValue","borderColor","trim","wheelShadow","values","pop","borderRadius","wheelRadius","shadowRadius","drawCircle","startAngle","endAngle","beginPath","moveTo","arc","closePath","gradient","createRadialGradient","lightness","addColorStop","ratioStep","ratio","stop","prevLighness","fillStyle","fill","drawShadow","save","restore","drawBorder","lineWidth","strokeStyle","stroke","shadow","svgElement","markerradius","tooltipradius","TooltipOffsetY","TooltipOffsetX","createElementNS","segmentationChange","HaLabeledSlider","caption","disabled","pin","extra","ignoreBarTouch","icon","notify","paperIconButtonClass","HaPaperIconButtonArrowPrev","connectedCallback","direction","hassio","PaperSliderClass","HaPaperSlider","tpl","innerHTML","styleEl","content","STATES_INTERCEPTABLE","cleaning","action","service","docked","idle","off","paused","HaVacuumState","LocalizeMixin","_interceptable","_computeInterceptable","supportedFeatures","_computeLabel","interceptable","localize","_callService","callService","HaWaterHeaterControl","HaWaterHeaterState","computeTarget","target_temp_low","target_temp_high","unit_system","temperature","_localizeState","HaMoreInfoDialog","DialogMixin","large","_dialogElement","_registryInfo","_page","dataDomain","observers","detail","page","_computeDomain","_computeStateObj","states","moreInfoEntityId","_stateObjChanged","newVal","oldVal","opened","isComponentLoaded","user","is_admin","info","callWS","_dialogOpenChanged","_equals","a","b","_largeChanged","notifyResize","MoreInfoAlarmControlPanel","_enteredCode","_codeFormat","_codeValid","_disarmVisible","_armVisible","_inputEnabled","constructor","_armedStates","props","code_format","_isNumber","format","_validateCode","code","_digitClicked","getAttribute","_clearEnteredCode","data","then","MoreInfoAutomation","handleTriggerTapped","MoreInfoCamera","_cameraPrefs","preload_stream","_handleCheckboxChanged","_fetchCameraPrefs","fetchCameraPrefs","checkbox","currentTarget","updateCameraPrefs","checked","alert","message","MoreInfoClimate","awayToggleChecked","auxToggleChecked","onToggleChecked","away_mode","aux_heat","_debouncer","Debouncer","debounce","timeOut","after","computeTemperatureStepSize","target_temp_step","supportsTemperatureControls","supportsTemperature","supportsTemperatureRange","supportsHumidity","supportsFanMode","supportsOperationMode","supportsSwingMode","supportsAwayMode","supportsAuxHeat","supportsOn","computeClassNames","_featureClassNames","classes","push","targetTemperatureChanged","callServiceHelper","targetTemperatureLowChanged","targetTempLow","targetTemperatureHighChanged","targetTempHigh","targetHumiditySliderChanged","humidity","awayToggleChanged","auxToggleChanged","onToggleChanged","handleFanmodeChanged","fan_mode","handleOperationmodeChanged","operation_mode","handleSwingmodeChanged","swing_mode","_localizeOperationMode","mode","_localizeFanMode","_computeRTLDirection","computeRTLDirection","MoreInfoConfigurator","isConfigurable","isConfiguring","fieldInput","computeIsConfigurable","fieldChanged","el","name","submitClicked","configure_id","fields","bind","MoreInfoContent","UpdatingElement","firstUpdated","position","display","update","_detachedChild","moreInfoType","custom_ui_more_info","toUpperCase","FEATURE_CLASS_NAMES","MoreInfoCover","entityObj","coverPositionSliderValue","coverTiltPositionSliderValue","computeEntityObj","CoverEntity","current_position","current_tilt_position","coverPositionSliderChanged","setCoverPosition","coverTiltPositionSliderChanged","setCoverTiltPosition","MoreInfoDefault","MoreInfoFan","oscillationToggleChecked","oscillating","speedChanged","speed","oscillationToggleChanged","onDirectionLeft","onDirectionRight","computeIsRotatingLeft","computeIsRotatingRight","MoreInfoGroup","computeStates","entIds","i","statesChanged","groupDomainStateObj","groupDomain","baseStateObj","find","dom","groupedControlDetails","MoreInfoHistoryGraph","DatetimeInput","is_ready","selectedDate","selectedHour","selectedMinute","getDateString","monthFiller","month","dayFiller","day","year","dateTimeChanged","changed","minuteFiller","serviceData","has_time","minute","hour","timeStr","time","has_date","dateValInput","dateValState","date","doesHaveDate","doesHaveTime","MoreInfoLight","brightnessSliderValue","ctSliderValue","wvSliderValue","colorPickerColor","brightness","color_temp","white_value","hs_color","effectChanged","effect","brightnessSliderChanged","bri","isNaN","ctSliderChanged","ct","wvSliderChanged","wv","segmentClick","serviceChangeColor","colorPicked","MoreInfoLock","enteredCode","isLocked","MoreInfoMediaPlayer","playerObj","ttsLoaded","ttsMessage","computePlayerObj","HassMediaPlayerEntity","playerObjChanged","computeMuteVolumeIcon","isMuted","computeHideVolumeButtons","supportsVolumeButtons","isOff","computeShowPlaybackControls","hasMediaControl","computePlaybackControlIcon","isPlaying","supportsPause","isIdle","isPaused","supportsPlay","computeHidePowerButton","supportsTurnOn","supportsTurnOff","computeHideSelectSource","supportsSelectSource","sourceList","computeHideSelectSoundMode","supportsSelectSoundMode","soundModeList","computeHideTTS","supportsPlayMedia","computeTTSLoaded","handleTogglePower","togglePower","handlePrevious","previousTrack","handlePlaybackControl","mediaPlayPause","handleNext","nextTrack","handleSourceChanged","source","selectSource","handleSoundModeChanged","soundMode","selectSoundMode","handleVolumeTap","supportsVolumeMute","volumeMute","handleVolumeTouchEnd","handleVolumeUp","obj","volumeUp","handleVolumeWorker","handleVolumeDown","volumeDown","force","pointerDown","volumeSliderChanged","volPercentage","volume","setVolume","ttsCheckForEnter","keyCode","sendTTS","tts","serviceKeys","sort","ttsInput","focus","MoreInfoScript","MoreInfoSun","risingDate","settingDate","computeRising","next_rising","computeSetting","next_setting","computeOrder","itemCaption","itemDate","itemValue","formatTime","language","MoreInfoUpdater","computeReleaseNotes","release_notes","MoreInfoVacuum","supportsStop","supportsReturnHome","supportsFanSpeed","supportsBattery","supportsStatus","supportsLocate","supportsCleanSpot","supportsStart","supportsCommandBar","fanSpeedChanged","fan_speed","onStop","onPlayPause","onPause","onStart","onLocate","onCleanSpot","onReturnHome","MoreInfoWaterHeater","MoreInfoWeather","cardinalDirections","weatherIcons","cloudy","fog","hail","lightning","partlycloudy","pouring","rainy","snowy","sunny","windy","computeDate","toLocaleDateString","weekday","computeDateTime","getUnit","measure","lengthUnit","windBearingToText","degree","degreenum","isFinite","getWind","bearing","cardinalDirection","getWeatherIcon","condition","_showValue","item","DOMAINS_NO_INFO","MoreInfoControls","dialogElement","canConfigure","_stateHistory","_stateHistoryLoading","_cacheConfig","enlarge","_computeShowStateInfo","_computeShowHistoryComponent","_computeStateName","_gotoSettings","_computeRTL","MoreInfoSettings","registryInfo","_name","_entityId","_computeInvalid","computeDomain","_registryInfoChanged","_backTapped","_save","updateEntityRegistryEntry","new_entity_id","dedupingMixin","superClass","mixinBehaviors","PaperDialogBehavior","withBackdrop","StateCardClimate","stateInfoTemplate","StateCardConfigurator","StateCardContent","inputChanged","stateCard","custom_ui_state_card","StateCardCover","entity","StateCardDisplay","computeStateDisplay","StateCardInputNumber","IronResizableBehavior","ResizeObserver","ro","entries","hiddenState","observe","input_number_card","hiddenbox","hiddenslider","maxlength","sliderwidth","slider","offsetWidth","sliderstate","hidden","stateObjectChanged","prevMode","selectedValueChanged","StateCardInputSelect","_selectedOptionChanged","options","option","selected","innerText","setInputSelectOption","StateCardInputText","pattern","StateCardLock","dataset","StateCardMediaPlayer","computePrimaryText","primaryTitle","StateCardScene","activateScene","StateCardScript","fireScript","StateCardTimer","timeRemaining","startInterval","disconnectedCallback","clearInterval","_updateRemaining","calculateRemaining","setInterval","timerTimeRemaining","_secondsToDuration","secondsToDuration","StateCardToggle","StateCardVacuum","StateCardWaterHeater","StateCardWeblink","open","DOMAIN_DEVICE_CLASS","binary_sensor","cover","sensor","switch","UNKNOWN_TYPE","ADD_TYPE","TYPE_TO_TAG","string","json","boolean","array","entity_picture","friendly_name","description","emulated_hue","domains","emulated_hue_name","haaska_hidden","haaska_name","homebridge_hidden","homebridge_name","device_class","assumed_state","initial_state","unit_of_measurement"],"mappings":"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","file":"more-info-dialog.chunk.js","sourcesContent":["import \"@polymer/paper-card/paper-card\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport \"../components/state-history-charts\";\nimport \"../data/ha-state-history-data\";\n\nimport computeStateName from \"../common/entity/compute_state_name\";\nimport { EventsMixin } from \"../mixins/events-mixin\";\n\n/*\n * @appliesMixin EventsMixin\n */\nclass HaHistoryGraphCard extends EventsMixin(PolymerElement) {\n  static get template() {\n    return html`\n      <style>\n        paper-card:not([dialog]) .content {\n          padding: 0 16px 16px;\n        }\n        paper-card[dialog] {\n          padding-top: 16px;\n          background-color: transparent;\n        }\n        paper-card {\n          width: 100%;\n          /* prevent new stacking context, chart tooltip needs to overflow */\n          position: static;\n        }\n        .header {\n          @apply --paper-font-headline;\n          line-height: 40px;\n          color: var(--primary-text-color);\n          padding: 20px 16px 12px;\n          @apply --paper-font-common-nowrap;\n        }\n        paper-card[dialog] .header {\n          display: none;\n        }\n      </style>\n      <ha-state-history-data\n        hass=\"[[hass]]\"\n        filter-type=\"recent-entity\"\n        entity-id=\"[[computeHistoryEntities(stateObj)]]\"\n        data=\"{{stateHistory}}\"\n        is-loading=\"{{stateHistoryLoading}}\"\n        cache-config=\"[[cacheConfig]]\"\n      ></ha-state-history-data>\n      <paper-card\n        dialog$=\"[[inDialog]]\"\n        on-click=\"cardTapped\"\n        elevation=\"[[computeElevation(inDialog)]]\"\n      >\n        <div class=\"header\">[[computeTitle(stateObj)]]</div>\n        <div class=\"content\">\n          <state-history-charts\n            hass=\"[[hass]]\"\n            history-data=\"[[stateHistory]]\"\n            is-loading-data=\"[[stateHistoryLoading]]\"\n            up-to-now\n            no-single\n          >\n          </state-history-charts>\n        </div>\n      </paper-card>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      stateObj: {\n        type: Object,\n        observer: \"stateObjObserver\",\n      },\n      inDialog: {\n        type: Boolean,\n        value: false,\n      },\n      stateHistory: Object,\n      stateHistoryLoading: Boolean,\n      cacheConfig: {\n        type: Object,\n        value: {\n          refresh: 0,\n          cacheKey: null,\n          hoursToShow: 24,\n        },\n      },\n    };\n  }\n\n  stateObjObserver(stateObj) {\n    if (!stateObj) return;\n    if (\n      this.cacheConfig.cacheKey !== stateObj.entity_id ||\n      this.cacheConfig.refresh !== (stateObj.attributes.refresh || 0) ||\n      this.cacheConfig.hoursToShow !== (stateObj.attributes.hours_to_show || 24)\n    ) {\n      this.cacheConfig = Object.assign(\n        {},\n        {\n          refresh: stateObj.attributes.refresh || 0,\n          cacheKey: stateObj.entity_id,\n          hoursToShow: stateObj.attributes.hours_to_show || 24,\n        }\n      );\n    }\n  }\n\n  computeTitle(stateObj) {\n    return computeStateName(stateObj);\n  }\n\n  computeContentClass(inDialog) {\n    return inDialog ? \"\" : \"content\";\n  }\n\n  computeHistoryEntities(stateObj) {\n    return stateObj.attributes.entity_id;\n  }\n\n  computeElevation(inDialog) {\n    return inDialog ? 0 : 1;\n  }\n\n  cardTapped(ev) {\n    const mq = window.matchMedia(\"(min-width: 610px) and (min-height: 550px)\");\n    if (mq.matches) {\n      ev.stopPropagation();\n      this.fire(\"hass-more-info\", { entityId: this.stateObj.entity_id });\n    }\n  }\n}\ncustomElements.define(\"ha-history_graph-card\", HaHistoryGraphCard);\n","/** Constants to be used in the frontend. */\n\n// Constants should be alphabetically sorted by name.\n// Arrays with values should be alphabetically sorted if order doesn't matter.\n// Each constant should have a description what it is supposed to be used for.\n\n/** Icon to use when no icon specified for domain. */\nexport const DEFAULT_DOMAIN_ICON = \"hass:bookmark\";\n\n/** Panel to show when no panel is picked. */\nexport const DEFAULT_PANEL = \"lovelace\";\n\n/** Domains that have a state card. */\nexport const DOMAINS_WITH_CARD = [\n  \"climate\",\n  \"cover\",\n  \"configurator\",\n  \"input_select\",\n  \"input_number\",\n  \"input_text\",\n  \"lock\",\n  \"media_player\",\n  \"scene\",\n  \"script\",\n  \"timer\",\n  \"vacuum\",\n  \"water_heater\",\n  \"weblink\",\n];\n\n/** Domains with separate more info dialog. */\nexport const DOMAINS_WITH_MORE_INFO = [\n  \"alarm_control_panel\",\n  \"automation\",\n  \"camera\",\n  \"climate\",\n  \"configurator\",\n  \"cover\",\n  \"fan\",\n  \"group\",\n  \"history_graph\",\n  \"input_datetime\",\n  \"light\",\n  \"lock\",\n  \"media_player\",\n  \"script\",\n  \"sun\",\n  \"updater\",\n  \"vacuum\",\n  \"water_heater\",\n  \"weather\",\n];\n\n/** Domains that show no more info dialog. */\nexport const DOMAINS_HIDE_MORE_INFO = [\n  \"input_number\",\n  \"input_select\",\n  \"input_text\",\n  \"scene\",\n  \"weblink\",\n];\n\n/** Domains that should have the history hidden in the more info dialog. */\nexport const DOMAINS_MORE_INFO_NO_HISTORY = [\n  \"camera\",\n  \"configurator\",\n  \"history_graph\",\n  \"scene\",\n];\n\n/** States that we consider \"off\". */\nexport const STATES_OFF = [\"closed\", \"locked\", \"off\"];\n\n/** Domains where we allow toggle in Lovelace. */\nexport const DOMAINS_TOGGLE = new Set([\n  \"fan\",\n  \"input_boolean\",\n  \"light\",\n  \"switch\",\n  \"group\",\n  \"automation\",\n]);\n\n/** Temperature units. */\nexport const UNIT_C = \"°C\";\nexport const UNIT_F = \"°F\";\n\n/** Entity ID of the default view. */\nexport const DEFAULT_VIEW_ENTITY_ID = \"group.default_view\";\n","/**\n * Update root's child element to be newElementTag replacing another existing child if any.\n * Copy attributes into the child element.\n */\nexport default function dynamicContentUpdater(root, newElementTag, attributes) {\n  const rootEl = root;\n  let customEl;\n\n  if (rootEl.lastChild && rootEl.lastChild.tagName === newElementTag) {\n    customEl = rootEl.lastChild;\n  } else {\n    if (rootEl.lastChild) {\n      rootEl.removeChild(rootEl.lastChild);\n    }\n    // Creating an element with upper case works fine in Chrome, but in FF it doesn't immediately\n    // become a defined Custom Element. Polymer does that in some later pass.\n    customEl = document.createElement(newElementTag.toLowerCase());\n  }\n\n  if (customEl.setProperties) {\n    customEl.setProperties(attributes);\n  } else {\n    // If custom element definition wasn't loaded yet - setProperties would be\n    // missing, but no harm in setting attributes one-by-one then.\n    Object.keys(attributes).forEach((key) => {\n      customEl[key] = attributes[key];\n    });\n  }\n\n  if (customEl.parentNode === null) {\n    rootEl.appendChild(customEl);\n  }\n}\n","import { HassEntity } from \"home-assistant-js-websocket\";\n\nexport default function attributeClassNames(\n  stateObj: HassEntity,\n  attributes: string[]\n): string {\n  if (!stateObj) {\n    return \"\";\n  }\n  return attributes\n    .map((attribute) =>\n      attribute in stateObj.attributes ? \"has-\" + attribute : \"\"\n    )\n    .filter((attr) => attr !== \"\")\n    .join(\" \");\n}\n","import { HomeAssistant } from \"../../types\";\n\nexport default function canToggleDomain(hass: HomeAssistant, domain: string) {\n  const services = hass.services[domain];\n  if (!services) {\n    return false;\n  }\n\n  if (domain === \"lock\") {\n    return \"lock\" in services;\n  }\n  if (domain === \"cover\") {\n    return \"open_cover\" in services;\n  }\n  return \"turn_on\" in services;\n}\n","import { HassEntity } from \"home-assistant-js-websocket\";\nimport canToggleDomain from \"./can_toggle_domain\";\nimport computeStateDomain from \"./compute_state_domain\";\nimport { HomeAssistant } from \"../../types\";\nimport { supportsFeature } from \"./supports-feature\";\n\nexport default function canToggleState(\n  hass: HomeAssistant,\n  stateObj: HassEntity\n) {\n  const domain = computeStateDomain(stateObj);\n  if (domain === \"group\") {\n    return stateObj.state === \"on\" || stateObj.state === \"off\";\n  }\n  if (domain === \"climate\") {\n    return supportsFeature(stateObj, 4096);\n  }\n\n  return canToggleDomain(hass, domain);\n}\n","import { HassEntity } from \"home-assistant-js-websocket\";\nimport { supportsFeature } from \"./supports-feature\";\n\n// Expects classNames to be an object mapping feature-bit -> className\nexport default function featureClassNames(\n  stateObj: HassEntity,\n  classNames: { [feature: number]: string }\n) {\n  if (!stateObj || !stateObj.attributes.supported_features) {\n    return \"\";\n  }\n\n  return Object.keys(classNames)\n    .map((feature) =>\n      supportsFeature(stateObj, Number(feature)) ? classNames[feature] : \"\"\n    )\n    .filter((attr) => attr !== \"\")\n    .join(\" \");\n}\n","import { HassEntity } from \"home-assistant-js-websocket\";\nimport canToggleState from \"./can_toggle_state\";\nimport computeStateDomain from \"./compute_state_domain\";\nimport { DOMAINS_WITH_CARD } from \"../const\";\nimport { HomeAssistant } from \"../../types\";\n\nexport default function stateCardType(\n  hass: HomeAssistant,\n  stateObj: HassEntity\n) {\n  if (stateObj.state === \"unavailable\") {\n    return \"display\";\n  }\n\n  const domain = computeStateDomain(stateObj);\n\n  if (DOMAINS_WITH_CARD.includes(domain)) {\n    return domain;\n  }\n  if (\n    canToggleState(hass, stateObj) &&\n    stateObj.attributes.control !== \"hidden\"\n  ) {\n    return \"toggle\";\n  }\n  return \"display\";\n}\n","import { HassEntity } from \"home-assistant-js-websocket\";\nimport computeStateDomain from \"./compute_state_domain\";\nimport { DOMAINS_HIDE_MORE_INFO, DOMAINS_WITH_MORE_INFO } from \"../const\";\n\nexport default function stateMoreInfoType(stateObj: HassEntity) {\n  const domain = computeStateDomain(stateObj);\n\n  if (DOMAINS_WITH_MORE_INFO.includes(domain)) {\n    return domain;\n  }\n  if (DOMAINS_HIDE_MORE_INFO.includes(domain)) {\n    return \"hidden\";\n  }\n  return \"default\";\n}\n","import { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport \"../ha-relative-time\";\nimport \"./state-badge\";\nimport computeStateName from \"../../common/entity/compute_state_name\";\nimport { computeRTL } from \"../../common/util/compute_rtl\";\n\nclass StateInfo extends PolymerElement {\n  static get template() {\n    return html`\n      ${this.styleTemplate} ${this.stateBadgeTemplate} ${this.infoTemplate}\n    `;\n  }\n\n  static get styleTemplate() {\n    return html`\n      <style>\n        :host {\n          @apply --paper-font-body1;\n          min-width: 120px;\n          white-space: nowrap;\n        }\n\n        state-badge {\n          float: left;\n        }\n\n        :host([rtl]) state-badge {\n          float: right;\n        }\n\n        .info {\n          margin-left: 56px;\n        }\n\n        :host([rtl]) .info {\n          margin-right: 56px;\n          margin-left: 0;\n          text-align: right;\n        }\n\n        .name {\n          @apply --paper-font-common-nowrap;\n          color: var(--primary-text-color);\n          line-height: 40px;\n        }\n\n        .name[in-dialog],\n        :host([secondary-line]) .name {\n          line-height: 20px;\n        }\n\n        .time-ago,\n        .extra-info,\n        .extra-info > * {\n          @apply --paper-font-common-nowrap;\n          color: var(--secondary-text-color);\n        }\n      </style>\n    `;\n  }\n\n  static get stateBadgeTemplate() {\n    return html`\n      <state-badge state-obj=\"[[stateObj]]\"></state-badge>\n    `;\n  }\n\n  static get infoTemplate() {\n    return html`\n      <div class=\"info\">\n        <div class=\"name\" in-dialog$=\"[[inDialog]]\">\n          [[computeStateName(stateObj)]]\n        </div>\n\n        <template is=\"dom-if\" if=\"[[inDialog]]\">\n          <div class=\"time-ago\">\n            <ha-relative-time\n              hass=\"[[hass]]\"\n              datetime=\"[[stateObj.last_changed]]\"\n            ></ha-relative-time>\n          </div>\n        </template>\n        <template is=\"dom-if\" if=\"[[!inDialog]]\">\n          <div class=\"extra-info\"><slot> </slot></div>\n        </template>\n      </div>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      stateObj: Object,\n      inDialog: {\n        type: Boolean,\n        value: () => false,\n      },\n      rtl: {\n        type: Boolean,\n        reflectToAttribute: true,\n        computed: \"computeRTL(hass)\",\n      },\n    };\n  }\n\n  computeStateName(stateObj) {\n    return computeStateName(stateObj);\n  }\n\n  computeRTL(hass) {\n    return computeRTL(hass);\n  }\n}\n\ncustomElements.define(\"state-info\", StateInfo);\n","import \"@polymer/iron-flex-layout/iron-flex-layout-classes\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport hassAttributeUtil from \"../util/hass-attributes-util\";\n\nclass HaAttributes extends PolymerElement {\n  static get template() {\n    return html`\n      <style include=\"iron-flex iron-flex-alignment\"></style>\n      <style>\n        .data-entry .value {\n          max-width: 200px;\n        }\n        .attribution {\n          color: var(--secondary-text-color);\n          text-align: right;\n        }\n      </style>\n\n      <div class=\"layout vertical\">\n        <template\n          is=\"dom-repeat\"\n          items=\"[[computeDisplayAttributes(stateObj, filtersArray)]]\"\n          as=\"attribute\"\n        >\n          <div class=\"data-entry layout justified horizontal\">\n            <div class=\"key\">[[formatAttribute(attribute)]]</div>\n            <div class=\"value\">\n              [[formatAttributeValue(stateObj, attribute)]]\n            </div>\n          </div>\n        </template>\n        <div class=\"attribution\" hidden$=\"[[!computeAttribution(stateObj)]]\">\n          [[computeAttribution(stateObj)]]\n        </div>\n      </div>\n    `;\n  }\n\n  static get properties() {\n    return {\n      stateObj: {\n        type: Object,\n      },\n      extraFilters: {\n        type: String,\n        value: \"\",\n      },\n      filtersArray: {\n        type: Array,\n        computed: \"computeFiltersArray(extraFilters)\",\n      },\n    };\n  }\n\n  computeFiltersArray(extraFilters) {\n    return Object.keys(hassAttributeUtil.LOGIC_STATE_ATTRIBUTES).concat(\n      extraFilters ? extraFilters.split(\",\") : []\n    );\n  }\n\n  computeDisplayAttributes(stateObj, filtersArray) {\n    if (!stateObj) {\n      return [];\n    }\n    return Object.keys(stateObj.attributes).filter(function(key) {\n      return filtersArray.indexOf(key) === -1;\n    });\n  }\n\n  formatAttribute(attribute) {\n    return attribute.replace(/_/g, \" \");\n  }\n\n  formatAttributeValue(stateObj, attribute) {\n    var value = stateObj.attributes[attribute];\n    if (value === null) return \"-\";\n    if (Array.isArray(value)) {\n      return value.join(\", \");\n    }\n    return value instanceof Object ? JSON.stringify(value, null, 2) : value;\n  }\n\n  computeAttribution(stateObj) {\n    return stateObj.attributes.attribution;\n  }\n}\n\ncustomElements.define(\"ha-attributes\", HaAttributes);\n","import {\n  property,\n  PropertyValues,\n  LitElement,\n  TemplateResult,\n  html,\n  CSSResult,\n  css,\n  customElement,\n} from \"lit-element\";\n\nimport computeStateName from \"../common/entity/compute_state_name\";\nimport { HomeAssistant, CameraEntity } from \"../types\";\nimport { fireEvent } from \"../common/dom/fire_event\";\nimport {\n  CAMERA_SUPPORT_STREAM,\n  fetchStreamUrl,\n  computeMJPEGStreamUrl,\n} from \"../data/camera\";\nimport { supportsFeature } from \"../common/entity/supports-feature\";\n\ntype HLSModule = typeof import(\"hls.js\");\n\n@customElement(\"ha-camera-stream\")\nclass HaCameraStream extends LitElement {\n  @property() public hass?: HomeAssistant;\n  @property() public stateObj?: CameraEntity;\n  @property({ type: Boolean }) public showControls = false;\n  @property() private _attached = false;\n  // We keep track if we should force MJPEG with a string\n  // that way it automatically resets if we change entity.\n  @property() private _forceMJPEG: string | undefined = undefined;\n  private _hlsPolyfillInstance?: Hls;\n\n  public connectedCallback() {\n    super.connectedCallback();\n    this._attached = true;\n  }\n\n  public disconnectedCallback() {\n    super.disconnectedCallback();\n    this._attached = false;\n  }\n\n  protected render(): TemplateResult | void {\n    if (!this.stateObj || !this._attached) {\n      return html``;\n    }\n\n    return html`\n      ${__DEMO__ || this._shouldRenderMJPEG\n        ? html`\n            <img\n              @load=${this._elementResized}\n              .src=${__DEMO__\n                ? `/api/camera_proxy_stream/${this.stateObj.entity_id}`\n                : computeMJPEGStreamUrl(this.stateObj)}\n              .alt=${computeStateName(this.stateObj)}\n            />\n          `\n        : html`\n            <video\n              autoplay\n              muted\n              playsinline\n              ?controls=${this.showControls}\n              @loadeddata=${this._elementResized}\n            ></video>\n          `}\n    `;\n  }\n\n  protected updated(changedProps: PropertyValues) {\n    super.updated(changedProps);\n\n    const stateObjChanged = changedProps.has(\"stateObj\");\n    const attachedChanged = changedProps.has(\"_attached\");\n\n    const oldState = changedProps.get(\"stateObj\") as this[\"stateObj\"];\n    const oldEntityId = oldState ? oldState.entity_id : undefined;\n    const curEntityId = this.stateObj ? this.stateObj.entity_id : undefined;\n\n    if (\n      (!stateObjChanged && !attachedChanged) ||\n      (stateObjChanged && oldEntityId === curEntityId)\n    ) {\n      return;\n    }\n\n    // If we are no longer attached, destroy polyfill.\n    if (attachedChanged && !this._attached) {\n      this._destroyPolyfill();\n      return;\n    }\n\n    // Nothing to do if we are render MJPEG.\n    if (this._shouldRenderMJPEG) {\n      return;\n    }\n\n    // Tear down existing polyfill, if available\n    this._destroyPolyfill();\n\n    if (curEntityId) {\n      this._startHls();\n    }\n  }\n\n  private get _shouldRenderMJPEG() {\n    return (\n      this._forceMJPEG === this.stateObj!.entity_id ||\n      !this.hass!.config.components.includes(\"stream\") ||\n      !supportsFeature(this.stateObj!, CAMERA_SUPPORT_STREAM)\n    );\n  }\n\n  private get _videoEl(): HTMLVideoElement {\n    return this.shadowRoot!.querySelector(\"video\")!;\n  }\n\n  private async _startHls(): Promise<void> {\n    // tslint:disable-next-line\n    const Hls = ((await import(/* webpackChunkName: \"hls.js\" */ \"hls.js\")) as any)\n      .default as HLSModule;\n    let hlsSupported = Hls.isSupported();\n    const videoEl = this._videoEl;\n\n    if (!hlsSupported) {\n      hlsSupported =\n        videoEl.canPlayType(\"application/vnd.apple.mpegurl\") !== \"\";\n    }\n\n    if (!hlsSupported) {\n      this._forceMJPEG = this.stateObj!.entity_id;\n      return;\n    }\n\n    try {\n      const { url } = await fetchStreamUrl(\n        this.hass!,\n        this.stateObj!.entity_id\n      );\n\n      if (Hls.isSupported()) {\n        this._renderHLSPolyfill(videoEl, Hls, url);\n      } else {\n        this._renderHLSNative(videoEl, url);\n      }\n      return;\n    } catch (err) {\n      // Fails if we were unable to get a stream\n      // tslint:disable-next-line\n      console.error(err);\n      this._forceMJPEG = this.stateObj!.entity_id;\n    }\n  }\n\n  private async _renderHLSNative(videoEl: HTMLVideoElement, url: string) {\n    videoEl.src = url;\n    await new Promise((resolve) =>\n      videoEl.addEventListener(\"loadedmetadata\", resolve)\n    );\n    videoEl.play();\n  }\n\n  private async _renderHLSPolyfill(\n    videoEl: HTMLVideoElement,\n    // tslint:disable-next-line\n    Hls: HLSModule,\n    url: string\n  ) {\n    const hls = new Hls();\n    this._hlsPolyfillInstance = hls;\n    hls.attachMedia(videoEl);\n    hls.on(Hls.Events.MEDIA_ATTACHED, () => {\n      hls.loadSource(url);\n    });\n  }\n\n  private _elementResized() {\n    fireEvent(this, \"iron-resize\");\n  }\n\n  private _destroyPolyfill(): void {\n    if (this._hlsPolyfillInstance) {\n      this._hlsPolyfillInstance.destroy();\n      this._hlsPolyfillInstance = undefined;\n    }\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      :host,\n      img,\n      video {\n        display: block;\n      }\n\n      img,\n      video {\n        width: 100%;\n      }\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-camera-stream\": HaCameraStream;\n  }\n}\n","import \"@polymer/iron-flex-layout/iron-flex-layout-classes\";\nimport \"@polymer/paper-icon-button/paper-icon-button\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport { EventsMixin } from \"../mixins/events-mixin\";\n\n/*\n * @appliesMixin EventsMixin\n */\nclass HaClimateControl extends EventsMixin(PolymerElement) {\n  static get template() {\n    return html`\n      <style include=\"iron-flex iron-flex-alignment\"></style>\n      <style>\n        /* local DOM styles go here */\n        :host {\n          @apply --layout-flex;\n          @apply --layout-horizontal;\n          @apply --layout-justified;\n        }\n        .in-flux#target_temperature {\n          color: var(--google-red-500);\n        }\n        #target_temperature {\n          @apply --layout-self-center;\n          font-size: 200%;\n          direction: ltr;\n        }\n        .control-buttons {\n          font-size: 200%;\n          text-align: right;\n        }\n        paper-icon-button {\n          height: 48px;\n          width: 48px;\n        }\n      </style>\n\n      <!-- local DOM goes here -->\n      <div id=\"target_temperature\">[[value]] [[units]]</div>\n      <div class=\"control-buttons\">\n        <div>\n          <paper-icon-button\n            icon=\"hass:chevron-up\"\n            on-click=\"incrementValue\"\n          ></paper-icon-button>\n        </div>\n        <div>\n          <paper-icon-button\n            icon=\"hass:chevron-down\"\n            on-click=\"decrementValue\"\n          ></paper-icon-button>\n        </div>\n      </div>\n    `;\n  }\n\n  static get properties() {\n    return {\n      value: {\n        type: Number,\n        observer: \"valueChanged\",\n      },\n      units: {\n        type: String,\n      },\n      min: {\n        type: Number,\n      },\n      max: {\n        type: Number,\n      },\n      step: {\n        type: Number,\n        value: 1,\n      },\n    };\n  }\n\n  temperatureStateInFlux(inFlux) {\n    this.$.target_temperature.classList.toggle(\"in-flux\", inFlux);\n  }\n\n  _round(val) {\n    // round value to precision derived from step\n    // insired by https://github.com/soundar24/roundSlider/blob/master/src/roundslider.js\n    const s = this.step.toString().split(\".\");\n    return s[1] ? parseFloat(val.toFixed(s[1].length)) : Math.round(val);\n  }\n\n  incrementValue() {\n    const newval = this._round(this.value + this.step);\n    if (this.value < this.max) {\n      this.last_changed = Date.now();\n      this.temperatureStateInFlux(true);\n    }\n    if (newval <= this.max) {\n      // If no initial target_temp\n      // this forces control to start\n      // from the min configured instead of 0\n      if (newval <= this.min) {\n        this.value = this.min;\n      } else {\n        this.value = newval;\n      }\n    } else {\n      this.value = this.max;\n    }\n  }\n\n  decrementValue() {\n    const newval = this._round(this.value - this.step);\n    if (this.value > this.min) {\n      this.last_changed = Date.now();\n      this.temperatureStateInFlux(true);\n    }\n    if (newval >= this.min) {\n      this.value = newval;\n    } else {\n      this.value = this.min;\n    }\n  }\n\n  valueChanged() {\n    // when the last_changed timestamp is changed,\n    // trigger a potential event fire in\n    // the future, as long as last changed is far enough in the\n    // past.\n    if (this.last_changed) {\n      window.setTimeout(() => {\n        const now = Date.now();\n        if (now - this.last_changed >= 2000) {\n          this.fire(\"change\");\n          this.temperatureStateInFlux(false);\n          this.last_changed = null;\n        }\n      }, 2010);\n    }\n  }\n}\n\ncustomElements.define(\"ha-climate-control\", HaClimateControl);\n","import { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport { EventsMixin } from \"../mixins/events-mixin\";\n\n/**\n * Color-picker custom element\n *\n * @appliesMixin EventsMixin\n */\nclass HaColorPicker extends EventsMixin(PolymerElement) {\n  static get template() {\n    return html`\n      <style>\n        :host {\n          user-select: none;\n          -webkit-user-select: none;\n        }\n\n        #canvas {\n          position: relative;\n          width: 100%;\n          max-width: 330px;\n        }\n        #canvas > * {\n          display: block;\n        }\n        #interactionLayer {\n          color: white;\n          position: absolute;\n          cursor: crosshair;\n          width: 100%;\n          height: 100%;\n          overflow: visible;\n        }\n        #backgroundLayer {\n          width: 100%;\n          overflow: visible;\n          --wheel-bordercolor: var(--ha-color-picker-wheel-bordercolor, white);\n          --wheel-borderwidth: var(--ha-color-picker-wheel-borderwidth, 3);\n          --wheel-shadow: var(\n            --ha-color-picker-wheel-shadow,\n            rgb(15, 15, 15) 10px 5px 5px 0px\n          );\n        }\n\n        #marker {\n          fill: currentColor;\n          stroke: var(--ha-color-picker-marker-bordercolor, white);\n          stroke-width: var(--ha-color-picker-marker-borderwidth, 3);\n          filter: url(#marker-shadow);\n        }\n        .dragging #marker {\n        }\n\n        #colorTooltip {\n          display: none;\n          fill: currentColor;\n          stroke: var(--ha-color-picker-tooltip-bordercolor, white);\n          stroke-width: var(--ha-color-picker-tooltip-borderwidth, 3);\n        }\n\n        .touch.dragging #colorTooltip {\n          display: inherit;\n        }\n      </style>\n      <div id=\"canvas\">\n        <svg id=\"interactionLayer\">\n          <defs>\n            <filter\n              id=\"marker-shadow\"\n              x=\"-50%\"\n              y=\"-50%\"\n              width=\"200%\"\n              height=\"200%\"\n              filterUnits=\"objectBoundingBox\"\n            >\n              <feOffset\n                result=\"offOut\"\n                in=\"SourceAlpha\"\n                dx=\"2\"\n                dy=\"2\"\n              ></feOffset>\n              <feGaussianBlur\n                result=\"blurOut\"\n                in=\"offOut\"\n                stdDeviation=\"2\"\n              ></feGaussianBlur>\n              <feComponentTransfer in=\"blurOut\" result=\"alphaOut\">\n                <feFuncA type=\"linear\" slope=\"0.3\"></feFuncA>\n              </feComponentTransfer>\n              <feBlend\n                in=\"SourceGraphic\"\n                in2=\"alphaOut\"\n                mode=\"normal\"\n              ></feBlend>\n            </filter>\n          </defs>\n        </svg>\n        <canvas id=\"backgroundLayer\"></canvas>\n      </div>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hsColor: {\n        type: Object,\n      },\n\n      // use these properties to update the state via attributes\n      desiredHsColor: {\n        type: Object,\n        observer: \"applyHsColor\",\n      },\n\n      // width, height and radius apply to the coordinates of\n      // of the canvas.\n      // border width are relative to these numbers\n      // the onscreen displayed size should be controlled with css\n      // and should be the same or smaller\n      width: {\n        type: Number,\n        value: 500,\n      },\n\n      height: {\n        type: Number,\n        value: 500,\n      },\n\n      radius: {\n        type: Number,\n        value: 225,\n      },\n\n      // the amount segments for the hue\n      // 0 = continuous gradient\n      // other than 0 gives 'pie-pieces'\n      hueSegments: {\n        type: Number,\n        value: 0,\n        observer: \"segmentationChange\",\n      },\n\n      // the amount segments for the hue\n      // 0 = continuous gradient\n      // 1 = only fully saturated\n      // > 1 = segments from white to fully saturated\n      saturationSegments: {\n        type: Number,\n        value: 0,\n        observer: \"segmentationChange\",\n      },\n\n      // set to true to make the segments purely esthetical\n      // this allows selection off all collors, also\n      // interpolated between the segments\n      ignoreSegments: {\n        type: Boolean,\n        value: false,\n      },\n\n      // throttle te amount of 'colorselected' events fired\n      // value is timeout in milliseconds\n      throttle: {\n        type: Number,\n        value: 500,\n      },\n    };\n  }\n\n  ready() {\n    super.ready();\n    this.setupLayers();\n    this.drawColorWheel();\n    this.drawMarker();\n\n    this.interactionLayer.addEventListener(\"mousedown\", (ev) =>\n      this.onMouseDown(ev)\n    );\n    this.interactionLayer.addEventListener(\"touchstart\", (ev) =>\n      this.onTouchStart(ev)\n    );\n  }\n\n  // converts browser coordinates to canvas canvas coordinates\n  // origin is wheel center\n  // returns {x: X, y: Y} object\n  convertToCanvasCoordinates(clientX, clientY) {\n    var svgPoint = this.interactionLayer.createSVGPoint();\n    svgPoint.x = clientX;\n    svgPoint.y = clientY;\n    var cc = svgPoint.matrixTransform(\n      this.interactionLayer.getScreenCTM().inverse()\n    );\n    return { x: cc.x, y: cc.y };\n  }\n\n  // Mouse events\n\n  onMouseDown(ev) {\n    const cc = this.convertToCanvasCoordinates(ev.clientX, ev.clientY);\n    // return if we're not on the wheel\n    if (!this.isInWheel(cc.x, cc.y)) {\n      return;\n    }\n    // a mousedown in wheel is always a color select action\n    this.onMouseSelect(ev);\n    // allow dragging\n    this.canvas.classList.add(\"mouse\", \"dragging\");\n    this.addEventListener(\"mousemove\", this.onMouseSelect);\n    this.addEventListener(\"mouseup\", this.onMouseUp);\n  }\n\n  onMouseUp() {\n    this.canvas.classList.remove(\"mouse\", \"dragging\");\n    this.removeEventListener(\"mousemove\", this.onMouseSelect);\n  }\n\n  onMouseSelect(ev) {\n    requestAnimationFrame(() => this.processUserSelect(ev));\n  }\n\n  // Touch events\n\n  onTouchStart(ev) {\n    var touch = ev.changedTouches[0];\n    const cc = this.convertToCanvasCoordinates(touch.clientX, touch.clientY);\n    // return if we're not on the wheel\n    if (!this.isInWheel(cc.x, cc.y)) {\n      return;\n    }\n    if (ev.target === this.marker) {\n      // drag marker\n      ev.preventDefault();\n      this.canvas.classList.add(\"touch\", \"dragging\");\n      this.addEventListener(\"touchmove\", this.onTouchSelect);\n      this.addEventListener(\"touchend\", this.onTouchEnd);\n      return;\n    }\n    // don't fire color selection immediately,\n    // wait for touchend and invalidate when we scroll\n    this.tapBecameScroll = false;\n    this.addEventListener(\"touchend\", this.onTap);\n    this.addEventListener(\n      \"touchmove\",\n      () => {\n        this.tapBecameScroll = true;\n      },\n      { passive: true }\n    );\n  }\n\n  onTap(ev) {\n    if (this.tapBecameScroll) {\n      return;\n    }\n    ev.preventDefault();\n    this.onTouchSelect(ev);\n  }\n\n  onTouchEnd() {\n    this.canvas.classList.remove(\"touch\", \"dragging\");\n    this.removeEventListener(\"touchmove\", this.onTouchSelect);\n  }\n\n  onTouchSelect(ev) {\n    requestAnimationFrame(() => this.processUserSelect(ev.changedTouches[0]));\n  }\n\n  /*\n   * General event/selection handling\n   */\n\n  // Process user input to color\n  processUserSelect(ev) {\n    var canvasXY = this.convertToCanvasCoordinates(ev.clientX, ev.clientY);\n    var hs = this.getColor(canvasXY.x, canvasXY.y);\n    this.onColorSelect(hs);\n  }\n\n  // apply color to marker position and canvas\n  onColorSelect(hs) {\n    this.setMarkerOnColor(hs); // marker always follows mounse 'raw' hs value (= mouse position)\n    if (!this.ignoreSegments) {\n      // apply segments if needed\n      hs = this.applySegmentFilter(hs);\n    }\n    // always apply the new color to the interface / canvas\n    this.applyColorToCanvas(hs);\n    // throttling is applied to updating the exposed colors (properties)\n    // and firing of events\n    if (this.colorSelectIsThrottled) {\n      // make sure we apply the last selected color\n      // eventually after throttle limit has passed\n      clearTimeout(this.ensureFinalSelect);\n      this.ensureFinalSelect = setTimeout(() => {\n        this.fireColorSelected(hs); // do it for the final time\n      }, this.throttle);\n      return;\n    }\n    this.fireColorSelected(hs); // do it\n    this.colorSelectIsThrottled = true;\n    setTimeout(() => {\n      this.colorSelectIsThrottled = false;\n    }, this.throttle);\n  }\n\n  // set color values and fire colorselected event\n  fireColorSelected(hs) {\n    this.hsColor = hs;\n    this.fire(\"colorselected\", { hs: { h: hs.h, s: hs.s } });\n  }\n\n  /*\n   * Interface updating\n   */\n\n  // set marker position to the given color\n  setMarkerOnColor(hs) {\n    var dist = hs.s * this.radius;\n    var theta = ((hs.h - 180) / 180) * Math.PI;\n    var markerdX = -dist * Math.cos(theta);\n    var markerdY = -dist * Math.sin(theta);\n    var translateString = `translate(${markerdX},${markerdY})`;\n    this.marker.setAttribute(\"transform\", translateString);\n    this.tooltip.setAttribute(\"transform\", translateString);\n  }\n\n  // apply given color to interface elements\n  applyColorToCanvas(hs) {\n    // we're not really converting hs to hsl here, but we keep it cheap\n    // setting the color on the interactionLayer, the svg elements can inherit\n    this.interactionLayer.style.color = `hsl(${hs.h}, 100%, ${100 -\n      hs.s * 50}%)`;\n  }\n\n  applyHsColor(hs) {\n    // do nothing is we already have the same color\n    if (this.hsColor && this.hsColor.h === hs.h && this.hsColor.s === hs.s) {\n      return;\n    }\n    this.setMarkerOnColor(hs); // marker is always set on 'raw' hs position\n    if (!this.ignoreSegments) {\n      // apply segments if needed\n      hs = this.applySegmentFilter(hs);\n    }\n    this.hsColor = hs;\n    // always apply the new color to the interface / canvas\n    this.applyColorToCanvas(hs);\n  }\n\n  /*\n   * input processing helpers\n   */\n\n  // get angle (degrees)\n  getAngle(dX, dY) {\n    var theta = Math.atan2(-dY, -dX); // radians from the left edge, clockwise = positive\n    var angle = (theta / Math.PI) * 180 + 180; // degrees, clockwise from right\n    return angle;\n  }\n\n  // returns true when coordinates are in the colorwheel\n  isInWheel(x, y) {\n    return this.getDistance(x, y) <= 1;\n  }\n\n  // returns distance from wheel center, 0 = center, 1 = edge, >1 = outside\n  getDistance(dX, dY) {\n    return Math.sqrt(dX * dX + dY * dY) / this.radius;\n  }\n\n  /*\n   * Getting colors\n   */\n\n  getColor(x, y) {\n    var hue = this.getAngle(x, y); // degrees, clockwise from right\n    var relativeDistance = this.getDistance(x, y); // edge of radius = 1\n    var sat = Math.min(relativeDistance, 1); // Distance from center\n    return { h: hue, s: sat };\n  }\n\n  applySegmentFilter(hs) {\n    // apply hue segment steps\n    if (this.hueSegments) {\n      const angleStep = 360 / this.hueSegments;\n      const halfAngleStep = angleStep / 2;\n      hs.h -= halfAngleStep; // take the 'centered segemnts' into account\n      if (hs.h < 0) {\n        hs.h += 360;\n      } // don't end up below 0\n      const rest = hs.h % angleStep;\n      hs.h -= rest - angleStep;\n    }\n\n    // apply saturation segment steps\n    if (this.saturationSegments) {\n      if (this.saturationSegments === 1) {\n        hs.s = 1;\n      } else {\n        var segmentSize = 1 / this.saturationSegments;\n        var saturationStep = 1 / (this.saturationSegments - 1);\n        var calculatedSat = Math.floor(hs.s / segmentSize) * saturationStep;\n        hs.s = Math.min(calculatedSat, 1);\n      }\n    }\n    return hs;\n  }\n\n  /*\n   * Drawing related stuff\n   */\n\n  setupLayers() {\n    this.canvas = this.$.canvas;\n    this.backgroundLayer = this.$.backgroundLayer;\n    this.interactionLayer = this.$.interactionLayer;\n\n    // coordinate origin position (center of the wheel)\n    this.originX = this.width / 2;\n    this.originY = this.originX;\n\n    // synchronise width/height coordinates\n    this.backgroundLayer.width = this.width;\n    this.backgroundLayer.height = this.height;\n    this.interactionLayer.setAttribute(\n      \"viewBox\",\n      `${-this.originX} ${-this.originY} ${this.width} ${this.height}`\n    );\n  }\n\n  drawColorWheel() {\n    /*\n     *  Setting up all paremeters\n     */\n    let shadowColor;\n    let shadowOffsetX;\n    let shadowOffsetY;\n    let shadowBlur;\n    const context = this.backgroundLayer.getContext(\"2d\");\n    // postioning and sizing\n    const cX = this.originX;\n    const cY = this.originY;\n    const radius = this.radius;\n    const counterClockwise = false;\n    // styling of the wheel\n    const wheelStyle = window.getComputedStyle(this.backgroundLayer, null);\n    const borderWidth = parseInt(\n      wheelStyle.getPropertyValue(\"--wheel-borderwidth\"),\n      10\n    );\n    const borderColor = wheelStyle\n      .getPropertyValue(\"--wheel-bordercolor\")\n      .trim();\n    const wheelShadow = wheelStyle.getPropertyValue(\"--wheel-shadow\").trim();\n    // extract shadow properties from  CCS variable\n    // the shadow should be defined as: \"10px 5px 5px 0px COLOR\"\n    if (wheelShadow !== \"none\") {\n      const values = wheelShadow.split(\"px \");\n      shadowColor = values.pop();\n      shadowOffsetX = parseInt(values[0], 10);\n      shadowOffsetY = parseInt(values[1], 10);\n      shadowBlur = parseInt(values[2], 10) || 0;\n    }\n    const borderRadius = radius + borderWidth / 2;\n    const wheelRadius = radius;\n    const shadowRadius = radius + borderWidth;\n\n    /*\n     *  Drawing functions\n     */\n    function drawCircle(hueSegments, saturationSegments) {\n      hueSegments = hueSegments || 360; // reset 0 segments to 360\n      const angleStep = 360 / hueSegments;\n      const halfAngleStep = angleStep / 2; // center segments on color\n      for (var angle = 0; angle <= 360; angle += angleStep) {\n        var startAngle = (angle - halfAngleStep) * (Math.PI / 180);\n        var endAngle = (angle + halfAngleStep + 1) * (Math.PI / 180);\n        context.beginPath();\n        context.moveTo(cX, cY);\n        context.arc(\n          cX,\n          cY,\n          wheelRadius,\n          startAngle,\n          endAngle,\n          counterClockwise\n        );\n        context.closePath();\n        // gradient\n        var gradient = context.createRadialGradient(\n          cX,\n          cY,\n          0,\n          cX,\n          cY,\n          wheelRadius\n        );\n        let lightness = 100;\n        // first gradient stop\n        gradient.addColorStop(0, `hsl(${angle}, 100%, ${lightness}%)`);\n        // segment gradient stops\n        if (saturationSegments > 0) {\n          const ratioStep = 1 / saturationSegments;\n          let ratio = 0;\n          for (var stop = 1; stop < saturationSegments; stop += 1) {\n            var prevLighness = lightness;\n            ratio = stop * ratioStep;\n            lightness = 100 - 50 * ratio;\n            gradient.addColorStop(\n              ratio,\n              `hsl(${angle}, 100%, ${prevLighness}%)`\n            );\n            gradient.addColorStop(ratio, `hsl(${angle}, 100%, ${lightness}%)`);\n          }\n          gradient.addColorStop(ratio, `hsl(${angle}, 100%, 50%)`);\n        }\n        // last gradient stop\n        gradient.addColorStop(1, `hsl(${angle}, 100%, 50%)`);\n\n        context.fillStyle = gradient;\n        context.fill();\n      }\n    }\n\n    function drawShadow() {\n      context.save();\n      context.beginPath();\n      context.arc(cX, cY, shadowRadius, 0, 2 * Math.PI, false);\n      context.shadowColor = shadowColor;\n      context.shadowOffsetX = shadowOffsetX;\n      context.shadowOffsetY = shadowOffsetY;\n      context.shadowBlur = shadowBlur;\n      context.fillStyle = \"white\";\n      context.fill();\n      context.restore();\n    }\n\n    function drawBorder() {\n      context.beginPath();\n      context.arc(cX, cY, borderRadius, 0, 2 * Math.PI, false);\n      context.lineWidth = borderWidth;\n      context.strokeStyle = borderColor;\n      context.stroke();\n    }\n\n    /*\n     *   Call the drawing functions\n     *   draws the shadow, wheel and border\n     */\n    if (wheelStyle.shadow !== \"none\") {\n      drawShadow();\n    }\n    drawCircle(this.hueSegments, this.saturationSegments);\n    if (borderWidth > 0) {\n      drawBorder();\n    }\n  }\n\n  /*\n   *   Draw the (draggable) marker and tooltip\n   *   on the interactionLayer)\n   */\n\n  drawMarker() {\n    const svgElement = this.interactionLayer;\n    const markerradius = this.radius * 0.08;\n    const tooltipradius = this.radius * 0.15;\n    const TooltipOffsetY = -(tooltipradius * 3);\n    const TooltipOffsetX = 0;\n\n    svgElement.marker = document.createElementNS(\n      \"http://www.w3.org/2000/svg\",\n      \"circle\"\n    );\n    svgElement.marker.setAttribute(\"id\", \"marker\");\n    svgElement.marker.setAttribute(\"r\", markerradius);\n    this.marker = svgElement.marker;\n    svgElement.appendChild(svgElement.marker);\n\n    svgElement.tooltip = document.createElementNS(\n      \"http://www.w3.org/2000/svg\",\n      \"circle\"\n    );\n    svgElement.tooltip.setAttribute(\"id\", \"colorTooltip\");\n    svgElement.tooltip.setAttribute(\"r\", tooltipradius);\n    svgElement.tooltip.setAttribute(\"cx\", TooltipOffsetX);\n    svgElement.tooltip.setAttribute(\"cy\", TooltipOffsetY);\n    this.tooltip = svgElement.tooltip;\n    svgElement.appendChild(svgElement.tooltip);\n  }\n\n  segmentationChange() {\n    if (this.backgroundLayer) {\n      this.drawColorWheel();\n    }\n  }\n}\ncustomElements.define(\"ha-color-picker\", HaColorPicker);\n","import { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport \"./ha-paper-slider\";\nimport \"./ha-icon\";\n\nclass HaLabeledSlider extends PolymerElement {\n  static get template() {\n    return html`\n      <style>\n        :host {\n          display: block;\n        }\n\n        .title {\n          margin-bottom: 16px;\n          opacity: var(--dark-primary-opacity);\n        }\n\n        ha-icon {\n          float: left;\n          margin-top: 4px;\n          opacity: var(--dark-secondary-opacity);\n        }\n\n        ha-paper-slider {\n          background-image: var(--ha-slider-background);\n        }\n      </style>\n\n      <div class=\"title\">[[caption]]</div>\n      <div class=\"extra-container\"><slot name=\"extra\"></slot></div>\n      <div class=\"slider-container\">\n        <ha-icon icon=\"[[icon]]\" hidden$=\"[[!icon]]\"></ha-icon>\n        <ha-paper-slider\n          min=\"[[min]]\"\n          max=\"[[max]]\"\n          step=\"[[step]]\"\n          pin=\"[[pin]]\"\n          disabled=\"[[disabled]]\"\n          disabled=\"[[disabled]]\"\n          value=\"{{value}}\"\n        ></ha-paper-slider>\n      </div>\n    `;\n  }\n\n  static get properties() {\n    return {\n      caption: String,\n      disabled: Boolean,\n      min: Number,\n      max: Number,\n      pin: Boolean,\n      step: Number,\n\n      extra: {\n        type: Boolean,\n        value: false,\n      },\n      ignoreBarTouch: {\n        type: Boolean,\n        value: true,\n      },\n      icon: {\n        type: String,\n        value: \"\",\n      },\n      value: {\n        type: Number,\n        notify: true,\n      },\n    };\n  }\n}\n\ncustomElements.define(\"ha-labeled-slider\", HaLabeledSlider);\n","import { Constructor } from \"lit-element\";\nimport \"@polymer/paper-icon-button/paper-icon-button\";\n// Not duplicate, this is for typing.\n// tslint:disable-next-line\nimport { PaperIconButtonElement } from \"@polymer/paper-icon-button/paper-icon-button\";\n\nconst paperIconButtonClass = customElements.get(\n  \"paper-icon-button\"\n) as Constructor<PaperIconButtonElement>;\n\nexport class HaPaperIconButtonArrowPrev extends paperIconButtonClass {\n  public hassio?: boolean;\n\n  public connectedCallback() {\n    this.icon =\n      window.getComputedStyle(this).direction === \"ltr\"\n        ? this.hassio\n          ? \"hassio:arrow-left\"\n          : \"hass:arrow-left\"\n        : this.hassio\n        ? \"hassio:arrow-right\"\n        : \"hass:arrow-right\";\n\n    // calling super after setting icon to have it consistently show the icon (otherwise not always shown)\n    super.connectedCallback();\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-paper-icon-button-arrow-prev\": HaPaperIconButtonArrowPrev;\n  }\n}\n\ncustomElements.define(\n  \"ha-paper-icon-button-arrow-prev\",\n  HaPaperIconButtonArrowPrev\n);\n","import \"@polymer/paper-slider/paper-slider\";\n\n/**\n * @polymer\n * @customElement\n * @appliesMixin paper-slider\n */\nconst PaperSliderClass = customElements.get(\"paper-slider\");\n\nclass HaPaperSlider extends PaperSliderClass {\n  static get template() {\n    const tpl = document.createElement(\"template\");\n    tpl.innerHTML = PaperSliderClass.template.innerHTML;\n    const styleEl = document.createElement(\"style\");\n    styleEl.innerHTML = `\n      .pin > .slider-knob > .slider-knob-inner {\n        font-size:  var(--ha-paper-slider-pin-font-size, 10px);\n        line-height: normal;\n      }\n\n      .pin > .slider-knob > .slider-knob-inner::before {\n        top: unset;\n        margin-left: unset;\n\n        bottom: calc(15px + var(--calculated-paper-slider-height)/2);\n        left: 50%;\n        width: 2.2em;\n        height: 2.2em;\n\n        -webkit-transform-origin: left bottom;\n        transform-origin: left bottom;\n        -webkit-transform: rotate(-45deg) scale(0) translate(0);\n        transform: rotate(-45deg) scale(0) translate(0);\n      }\n\n      .pin.expand > .slider-knob > .slider-knob-inner::before {\n        -webkit-transform: rotate(-45deg) scale(1) translate(7px, -7px);\n        transform: rotate(-45deg) scale(1) translate(7px, -7px);\n      }\n\n      .pin > .slider-knob > .slider-knob-inner::after {\n        top: unset;\n        font-size: unset;\n\n        bottom: calc(15px + var(--calculated-paper-slider-height)/2);\n        left: 50%;\n        margin-left: -1.1em;\n        width: 2.2em;\n        height: 2.1em;\n\n        -webkit-transform-origin: center bottom;\n        transform-origin: center bottom;\n        -webkit-transform: scale(0) translate(0);\n        transform: scale(0) translate(0);\n      }\n\n      .pin.expand > .slider-knob > .slider-knob-inner::after {\n        -webkit-transform: scale(1) translate(0, -10px);\n        transform: scale(1) translate(0, -10px);\n      }\n\n      :host([dir=\"rtl\"]) .pin.expand > .slider-knob > .slider-knob-inner::after {\n        -webkit-transform: scale(1) translate(0, -17px) scaleX(-1) !important;\n        transform: scale(1) translate(0, -17px) scaleX(-1) !important;\n        }\n    `;\n    tpl.content.appendChild(styleEl);\n    return tpl;\n  }\n}\ncustomElements.define(\"ha-paper-slider\", HaPaperSlider);\n","import \"@material/mwc-button\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport LocalizeMixin from \"../mixins/localize-mixin\";\n\nconst STATES_INTERCEPTABLE = {\n  cleaning: {\n    action: \"return_to_base\",\n    service: \"return_to_base\",\n  },\n  docked: {\n    action: \"start_cleaning\",\n    service: \"start\",\n  },\n  idle: {\n    action: \"start_cleaning\",\n    service: \"start\",\n  },\n  off: {\n    action: \"turn_on\",\n    service: \"turn_on\",\n  },\n  on: {\n    action: \"turn_off\",\n    service: \"turn_off\",\n  },\n  paused: {\n    action: \"resume_cleaning\",\n    service: \"start\",\n  },\n};\n\n/*\n * @appliesMixin LocalizeMixin\n */\nclass HaVacuumState extends LocalizeMixin(PolymerElement) {\n  static get template() {\n    return html`\n      <style>\n        mwc-button {\n          top: 3px;\n          height: 37px;\n          margin-right: -0.57em;\n        }\n        mwc-button[disabled] {\n          background-color: transparent;\n          color: var(--secondary-text-color);\n        }\n      </style>\n\n      <mwc-button on-click=\"_callService\" disabled=\"[[!_interceptable]]\"\n        >[[_computeLabel(stateObj.state, _interceptable)]]</mwc-button\n      >\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      stateObj: Object,\n      _interceptable: {\n        type: Boolean,\n        computed:\n          \"_computeInterceptable(stateObj.state, stateObj.attributes.supported_features)\",\n      },\n    };\n  }\n\n  _computeInterceptable(state, supportedFeatures) {\n    return state in STATES_INTERCEPTABLE && supportedFeatures !== 0;\n  }\n\n  _computeLabel(state, interceptable) {\n    return interceptable\n      ? this.localize(\n          `ui.card.vacuum.actions.${STATES_INTERCEPTABLE[state].action}`\n        )\n      : this.localize(`state.vacuum.${state}`);\n  }\n\n  _callService(ev) {\n    ev.stopPropagation();\n    const stateObj = this.stateObj;\n    const service = STATES_INTERCEPTABLE[stateObj.state].service;\n    this.hass.callService(\"vacuum\", service, { entity_id: stateObj.entity_id });\n  }\n}\ncustomElements.define(\"ha-vacuum-state\", HaVacuumState);\n","import \"@polymer/iron-flex-layout/iron-flex-layout-classes\";\nimport \"@polymer/paper-icon-button/paper-icon-button\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport { EventsMixin } from \"../mixins/events-mixin\";\n\n/*\n * @appliesMixin EventsMixin\n */\nclass HaWaterHeaterControl extends EventsMixin(PolymerElement) {\n  static get template() {\n    return html`\n      <style include=\"iron-flex iron-flex-alignment\"></style>\n      <style>\n        /* local DOM styles go here */\n        :host {\n          @apply --layout-flex;\n          @apply --layout-horizontal;\n          @apply --layout-justified;\n        }\n        .in-flux#target_temperature {\n          color: var(--google-red-500);\n        }\n        #target_temperature {\n          @apply --layout-self-center;\n          font-size: 200%;\n        }\n        .control-buttons {\n          font-size: 200%;\n          text-align: right;\n        }\n        paper-icon-button {\n          height: 48px;\n          width: 48px;\n        }\n      </style>\n\n      <!-- local DOM goes here -->\n      <div id=\"target_temperature\">[[value]] [[units]]</div>\n      <div class=\"control-buttons\">\n        <div>\n          <paper-icon-button\n            icon=\"hass:chevron-up\"\n            on-click=\"incrementValue\"\n          ></paper-icon-button>\n        </div>\n        <div>\n          <paper-icon-button\n            icon=\"hass:chevron-down\"\n            on-click=\"decrementValue\"\n          ></paper-icon-button>\n        </div>\n      </div>\n    `;\n  }\n\n  static get properties() {\n    return {\n      value: {\n        type: Number,\n        observer: \"valueChanged\",\n      },\n      units: {\n        type: String,\n      },\n      min: {\n        type: Number,\n      },\n      max: {\n        type: Number,\n      },\n      step: {\n        type: Number,\n        value: 1,\n      },\n    };\n  }\n\n  temperatureStateInFlux(inFlux) {\n    this.$.target_temperature.classList.toggle(\"in-flux\", inFlux);\n  }\n\n  incrementValue() {\n    const newval = this.value + this.step;\n    if (this.value < this.max) {\n      this.last_changed = Date.now();\n      this.temperatureStateInFlux(true);\n    }\n    if (newval <= this.max) {\n      // If no initial target_temp\n      // this forces control to start\n      // from the min configured instead of 0\n      if (newval <= this.min) {\n        this.value = this.min;\n      } else {\n        this.value = newval;\n      }\n    } else {\n      this.value = this.max;\n    }\n  }\n\n  decrementValue() {\n    const newval = this.value - this.step;\n    if (this.value > this.min) {\n      this.last_changed = Date.now();\n      this.temperatureStateInFlux(true);\n    }\n    if (newval >= this.min) {\n      this.value = newval;\n    } else {\n      this.value = this.min;\n    }\n  }\n\n  valueChanged() {\n    // when the last_changed timestamp is changed,\n    // trigger a potential event fire in\n    // the future, as long as last changed is far enough in the\n    // past.\n    if (this.last_changed) {\n      window.setTimeout(() => {\n        const now = Date.now();\n        if (now - this.last_changed >= 2000) {\n          this.fire(\"change\");\n          this.temperatureStateInFlux(false);\n          this.last_changed = null;\n        }\n      }, 2010);\n    }\n  }\n}\n\ncustomElements.define(\"ha-water_heater-control\", HaWaterHeaterControl);\n","import { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport LocalizeMixin from \"../mixins/localize-mixin\";\n\n/*\n * @appliesMixin LocalizeMixin\n */\nclass HaWaterHeaterState extends LocalizeMixin(PolymerElement) {\n  static get template() {\n    return html`\n      <style>\n        :host {\n          display: flex;\n          flex-direction: column;\n          justify-content: center;\n          white-space: nowrap;\n        }\n\n        .target {\n          color: var(--primary-text-color);\n        }\n\n        .current {\n          color: var(--secondary-text-color);\n        }\n\n        .state-label {\n          font-weight: bold;\n          text-transform: capitalize;\n        }\n      </style>\n\n      <div class=\"target\">\n        <span class=\"state-label\"> [[_localizeState(stateObj.state)]] </span>\n        [[computeTarget(hass, stateObj)]]\n      </div>\n\n      <template is=\"dom-if\" if=\"[[currentStatus]]\">\n        <div class=\"current\">\n          [[localize('ui.card.water_heater.currently')]]: [[currentStatus]]\n        </div>\n      </template>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      stateObj: Object,\n    };\n  }\n\n  computeTarget(hass, stateObj) {\n    if (!hass || !stateObj) return null;\n    // We're using \"!= null\" on purpose so that we match both null and undefined.\n    if (\n      stateObj.attributes.target_temp_low != null &&\n      stateObj.attributes.target_temp_high != null\n    ) {\n      return `${stateObj.attributes.target_temp_low} - ${\n        stateObj.attributes.target_temp_high\n      } ${hass.config.unit_system.temperature}`;\n    }\n    if (stateObj.attributes.temperature != null) {\n      return `${stateObj.attributes.temperature} ${\n        hass.config.unit_system.temperature\n      }`;\n    }\n\n    return \"\";\n  }\n\n  _localizeState(state) {\n    return this.localize(`state.water_heater.${state}`) || state;\n  }\n}\ncustomElements.define(\"ha-water_heater-state\", HaWaterHeaterState);\n","import \"@polymer/paper-dialog-behavior/paper-dialog-shared-styles\";\nimport \"@polymer/paper-dialog-scrollable/paper-dialog-scrollable\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport \"../resources/ha-style\";\n\nimport \"./more-info/more-info-controls\";\nimport \"./more-info/more-info-settings\";\n\nimport computeStateDomain from \"../common/entity/compute_state_domain\";\nimport isComponentLoaded from \"../common/config/is_component_loaded\";\n\nimport DialogMixin from \"../mixins/dialog-mixin\";\n\n/*\n * @appliesMixin DialogMixin\n */\nclass HaMoreInfoDialog extends DialogMixin(PolymerElement) {\n  static get template() {\n    return html`\n      <style include=\"ha-style-dialog paper-dialog-shared-styles\">\n        :host {\n          font-size: 14px;\n          width: 365px;\n          border-radius: 2px;\n        }\n\n        more-info-controls,\n        more-info-settings {\n          --more-info-header-background: var(--secondary-background-color);\n          --more-info-header-color: var(--primary-text-color);\n          --ha-more-info-app-toolbar-title: {\n            /* Design guideline states 24px, changed to 16 to align with state info */\n            margin-left: 16px;\n            line-height: 1.3em;\n            max-height: 2.6em;\n            overflow: hidden;\n            /* webkit and blink still support simple multiline text-overflow */\n            display: -webkit-box;\n            -webkit-line-clamp: 2;\n            -webkit-box-orient: vertical;\n            text-overflow: ellipsis;\n          }\n        }\n\n        /* overrule the ha-style-dialog max-height on small screens */\n        @media all and (max-width: 450px), all and (max-height: 500px) {\n          more-info-controls,\n          more-info-settings {\n            --more-info-header-background: var(--primary-color);\n            --more-info-header-color: var(--text-primary-color);\n          }\n          :host {\n            width: 100% !important;\n            border-radius: 0px;\n            position: fixed !important;\n            margin: 0;\n          }\n          :host::before {\n            content: \"\";\n            position: fixed;\n            z-index: -1;\n            top: 0px;\n            left: 0px;\n            right: 0px;\n            bottom: 0px;\n            background-color: inherit;\n          }\n        }\n\n        :host([data-domain=\"camera\"]) {\n          width: auto;\n        }\n\n        :host([data-domain=\"history_graph\"]),\n        :host([large]) {\n          width: 90%;\n        }\n      </style>\n\n      <template is=\"dom-if\" if=\"[[!_page]]\">\n        <more-info-controls\n          class=\"no-padding\"\n          hass=\"[[hass]]\"\n          state-obj=\"[[stateObj]]\"\n          dialog-element=\"[[_dialogElement]]\"\n          can-configure=\"[[_registryInfo]]\"\n          large=\"{{large}}\"\n        ></more-info-controls>\n      </template>\n      <template is=\"dom-if\" if='[[_equals(_page, \"settings\")]]'>\n        <more-info-settings\n          class=\"no-padding\"\n          hass=\"[[hass]]\"\n          state-obj=\"[[stateObj]]\"\n          registry-info=\"{{_registryInfo}}\"\n        ></more-info-settings>\n      </template>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      stateObj: {\n        type: Object,\n        computed: \"_computeStateObj(hass)\",\n        observer: \"_stateObjChanged\",\n      },\n\n      large: {\n        type: Boolean,\n        reflectToAttribute: true,\n        observer: \"_largeChanged\",\n      },\n\n      _dialogElement: Object,\n      _registryInfo: Object,\n\n      _page: {\n        type: String,\n        value: null,\n      },\n\n      dataDomain: {\n        computed: \"_computeDomain(stateObj)\",\n        reflectToAttribute: true,\n      },\n    };\n  }\n\n  static get observers() {\n    return [\"_dialogOpenChanged(opened)\"];\n  }\n\n  ready() {\n    super.ready();\n    this._dialogElement = this;\n    this.addEventListener(\"more-info-page\", (ev) => {\n      this._page = ev.detail.page;\n    });\n  }\n\n  _computeDomain(stateObj) {\n    return stateObj ? computeStateDomain(stateObj) : \"\";\n  }\n\n  _computeStateObj(hass) {\n    return hass.states[hass.moreInfoEntityId] || null;\n  }\n\n  async _stateObjChanged(newVal, oldVal) {\n    if (!newVal) {\n      this.setProperties({\n        opened: false,\n        _page: null,\n        _registryInfo: null,\n        large: false,\n      });\n      return;\n    }\n\n    requestAnimationFrame(() =>\n      requestAnimationFrame(() => {\n        // allow dialog to render content before showing it so it will be\n        // positioned correctly.\n        this.opened = true;\n      })\n    );\n\n    if (\n      !isComponentLoaded(this.hass, \"config\") ||\n      (oldVal && oldVal.entity_id === newVal.entity_id)\n    ) {\n      return;\n    }\n\n    if (this.hass.user.is_admin) {\n      try {\n        const info = await this.hass.callWS({\n          type: \"config/entity_registry/get\",\n          entity_id: newVal.entity_id,\n        });\n        this._registryInfo = info;\n      } catch (err) {\n        this._registryInfo = null;\n      }\n    }\n  }\n\n  _dialogOpenChanged(newVal) {\n    if (!newVal && this.stateObj) {\n      this.fire(\"hass-more-info\", { entityId: null });\n    }\n  }\n\n  _equals(a, b) {\n    return a === b;\n  }\n\n  _largeChanged() {\n    this.notifyResize();\n  }\n}\ncustomElements.define(\"ha-more-info-dialog\", HaMoreInfoDialog);\n","import \"@polymer/iron-flex-layout/iron-flex-layout-classes\";\nimport \"@material/mwc-button\";\nimport \"@polymer/paper-input/paper-input\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport { EventsMixin } from \"../../../mixins/events-mixin\";\nimport LocalizeMixin from \"../../../mixins/localize-mixin\";\n\nclass MoreInfoAlarmControlPanel extends LocalizeMixin(\n  EventsMixin(PolymerElement)\n) {\n  static get template() {\n    return html`\n      <style include=\"iron-flex\"></style>\n      <style>\n        paper-input {\n          margin: auto;\n          max-width: 200px;\n        }\n        .pad {\n          display: flex;\n          justify-content: center;\n          margin-bottom: 24px;\n        }\n        .pad div {\n          display: flex;\n          flex-direction: column;\n        }\n        .pad mwc-button {\n          width: 80px;\n        }\n        .actions mwc-button {\n          min-width: 160px;\n          margin-bottom: 16px;\n        }\n        mwc-button.disarm {\n          color: var(--google-red-500);\n        }\n      </style>\n\n      <template is=\"dom-if\" if=\"[[_codeFormat]]\">\n        <paper-input\n          label=\"[[localize('ui.card.alarm_control_panel.code')]]\"\n          value=\"{{_enteredCode}}\"\n          type=\"password\"\n          disabled=\"[[!_inputEnabled]]\"\n        ></paper-input>\n\n        <template is=\"dom-if\" if=\"[[_isNumber(_codeFormat)]]\">\n          <div class=\"pad\">\n            <div>\n              <mwc-button\n                on-click=\"_digitClicked\"\n                disabled=\"[[!_inputEnabled]]\"\n                data-digit=\"1\"\n                raised\n                >1</mwc-button\n              >\n              <mwc-button\n                on-click=\"_digitClicked\"\n                disabled=\"[[!_inputEnabled]]\"\n                data-digit=\"4\"\n                raised\n                >4</mwc-button\n              >\n              <mwc-button\n                on-click=\"_digitClicked\"\n                disabled=\"[[!_inputEnabled]]\"\n                data-digit=\"7\"\n                raised\n                >7</mwc-button\n              >\n            </div>\n            <div>\n              <mwc-button\n                on-click=\"_digitClicked\"\n                disabled=\"[[!_inputEnabled]]\"\n                data-digit=\"2\"\n                raised\n                >2</mwc-button\n              >\n              <mwc-button\n                on-click=\"_digitClicked\"\n                disabled=\"[[!_inputEnabled]]\"\n                data-digit=\"5\"\n                raised\n                >5</mwc-button\n              >\n              <mwc-button\n                on-click=\"_digitClicked\"\n                disabled=\"[[!_inputEnabled]]\"\n                data-digit=\"8\"\n                raised\n                >8</mwc-button\n              >\n              <mwc-button\n                on-click=\"_digitClicked\"\n                disabled=\"[[!_inputEnabled]]\"\n                data-digit=\"0\"\n                raised\n                >0</mwc-button\n              >\n            </div>\n            <div>\n              <mwc-button\n                on-click=\"_digitClicked\"\n                disabled=\"[[!_inputEnabled]]\"\n                data-digit=\"3\"\n                raised\n                >3</mwc-button\n              >\n              <mwc-button\n                on-click=\"_digitClicked\"\n                disabled=\"[[!_inputEnabled]]\"\n                data-digit=\"6\"\n                raised\n                >6</mwc-button\n              >\n              <mwc-button\n                on-click=\"_digitClicked\"\n                disabled=\"[[!_inputEnabled]]\"\n                data-digit=\"9\"\n                raised\n                >9</mwc-button\n              >\n              <mwc-button\n                on-click=\"_clearEnteredCode\"\n                disabled=\"[[!_inputEnabled]]\"\n                raised\n              >\n                [[localize('ui.card.alarm_control_panel.clear_code')]]\n              </mwc-button>\n            </div>\n          </div>\n        </template>\n      </template>\n\n      <div class=\"layout horizontal center-justified actions\">\n        <template is=\"dom-if\" if=\"[[_disarmVisible]]\">\n          <mwc-button\n            raised\n            class=\"disarm\"\n            on-click=\"_callService\"\n            data-service=\"alarm_disarm\"\n            disabled=\"[[!_codeValid]]\"\n          >\n            [[localize('ui.card.alarm_control_panel.disarm')]]\n          </mwc-button>\n        </template>\n        <template is=\"dom-if\" if=\"[[_armVisible]]\">\n          <mwc-button\n            raised\n            on-click=\"_callService\"\n            data-service=\"alarm_arm_home\"\n            disabled=\"[[!_codeValid]]\"\n          >\n            [[localize('ui.card.alarm_control_panel.arm_home')]]\n          </mwc-button>\n          <mwc-button\n            raised\n            on-click=\"_callService\"\n            data-service=\"alarm_arm_away\"\n            disabled=\"[[!_codeValid]]\"\n          >\n            [[localize('ui.card.alarm_control_panel.arm_away')]]\n          </mwc-button>\n        </template>\n      </div>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      stateObj: {\n        type: Object,\n        observer: \"_stateObjChanged\",\n      },\n      _enteredCode: {\n        type: String,\n        value: \"\",\n      },\n      _codeFormat: {\n        type: String,\n        value: \"\",\n      },\n      _codeValid: {\n        type: Boolean,\n        computed: \"_validateCode(_enteredCode, _codeFormat)\",\n      },\n      _disarmVisible: {\n        type: Boolean,\n        value: false,\n      },\n      _armVisible: {\n        type: Boolean,\n        value: false,\n      },\n      _inputEnabled: {\n        type: Boolean,\n        value: false,\n      },\n    };\n  }\n\n  constructor() {\n    super();\n    this._armedStates = [\n      \"armed_home\",\n      \"armed_away\",\n      \"armed_night\",\n      \"armed_custom_bypass\",\n    ];\n  }\n\n  _stateObjChanged(newVal, oldVal) {\n    if (newVal) {\n      const state = newVal.state;\n      const props = {\n        _codeFormat: newVal.attributes.code_format,\n        _armVisible: state === \"disarmed\",\n        _disarmVisible:\n          this._armedStates.includes(state) ||\n          state === \"pending\" ||\n          state === \"triggered\" ||\n          state === \"arming\",\n      };\n      props._inputEnabled = props._disarmVisible || props._armVisible;\n      this.setProperties(props);\n    }\n    if (oldVal) {\n      setTimeout(() => {\n        this.fire(\"iron-resize\");\n      }, 500);\n    }\n  }\n\n  _isNumber(format) {\n    return format === \"Number\";\n  }\n\n  _validateCode(code, format) {\n    return !format || code.length > 0;\n  }\n\n  _digitClicked(ev) {\n    this._enteredCode += ev.target.getAttribute(\"data-digit\");\n  }\n\n  _clearEnteredCode() {\n    this._enteredCode = \"\";\n  }\n\n  _callService(ev) {\n    const service = ev.target.getAttribute(\"data-service\");\n    const data = {\n      entity_id: this.stateObj.entity_id,\n      code: this._enteredCode,\n    };\n    this.hass.callService(\"alarm_control_panel\", service, data).then(() => {\n      this._enteredCode = \"\";\n    });\n  }\n}\ncustomElements.define(\n  \"more-info-alarm_control_panel\",\n  MoreInfoAlarmControlPanel\n);\n","import \"@material/mwc-button\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport \"../../../components/ha-relative-time\";\n\nimport LocalizeMixin from \"../../../mixins/localize-mixin\";\n\nclass MoreInfoAutomation extends LocalizeMixin(PolymerElement) {\n  static get template() {\n    return html`\n      <style>\n        .flex {\n          display: flex;\n          justify-content: space-between;\n        }\n        .actions {\n          margin: 36px 0 8px 0;\n          text-align: right;\n        }\n      </style>\n\n      <div class=\"flex\">\n        <div>[[localize('ui.card.automation.last_triggered')]]:</div>\n        <ha-relative-time\n          hass=\"[[hass]]\"\n          datetime=\"[[stateObj.attributes.last_triggered]]\"\n        ></ha-relative-time>\n      </div>\n\n      <div class=\"actions\">\n        <mwc-button on-click=\"handleTriggerTapped\">\n          [[localize('ui.card.automation.trigger')]]\n        </mwc-button>\n      </div>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      stateObj: Object,\n    };\n  }\n\n  handleTriggerTapped() {\n    this.hass.callService(\"automation\", \"trigger\", {\n      entity_id: this.stateObj.entity_id,\n    });\n  }\n}\n\ncustomElements.define(\"more-info-automation\", MoreInfoAutomation);\n","import {\n  property,\n  PropertyValues,\n  LitElement,\n  TemplateResult,\n  html,\n  CSSResult,\n  css,\n} from \"lit-element\";\n\nimport { HomeAssistant, CameraEntity } from \"../../../types\";\nimport {\n  CAMERA_SUPPORT_STREAM,\n  CameraPreferences,\n  fetchCameraPrefs,\n  updateCameraPrefs,\n} from \"../../../data/camera\";\nimport { supportsFeature } from \"../../../common/entity/supports-feature\";\nimport \"../../../components/ha-camera-stream\";\nimport \"@polymer/paper-checkbox/paper-checkbox\";\n// Not duplicate import, it's for typing\n// tslint:disable-next-line\nimport { PaperCheckboxElement } from \"@polymer/paper-checkbox/paper-checkbox\";\n\nclass MoreInfoCamera extends LitElement {\n  @property() public hass?: HomeAssistant;\n  @property() public stateObj?: CameraEntity;\n  @property() private _cameraPrefs?: CameraPreferences;\n\n  protected render(): TemplateResult | void {\n    if (!this.hass || !this.stateObj) {\n      return html``;\n    }\n\n    return html`\n      <ha-camera-stream\n        .hass=\"${this.hass}\"\n        .stateObj=\"${this.stateObj}\"\n        showcontrols\n      ></ha-camera-stream>\n      ${this._cameraPrefs\n        ? html`\n            <paper-checkbox\n              .checked=${this._cameraPrefs.preload_stream}\n              @change=${this._handleCheckboxChanged}\n            >\n              Preload stream\n            </paper-checkbox>\n          `\n        : undefined}\n    `;\n  }\n\n  protected updated(changedProps: PropertyValues) {\n    if (!changedProps.has(\"stateObj\")) {\n      return;\n    }\n\n    const oldState = changedProps.get(\"stateObj\") as this[\"stateObj\"];\n    const oldEntityId = oldState ? oldState.entity_id : undefined;\n    const curEntityId = this.stateObj ? this.stateObj.entity_id : undefined;\n\n    // Same entity, ignore.\n    if (curEntityId === oldEntityId) {\n      return;\n    }\n\n    if (\n      curEntityId &&\n      this.hass!.config.components.includes(\"stream\") &&\n      supportsFeature(this.stateObj!, CAMERA_SUPPORT_STREAM)\n    ) {\n      // Fetch in background while we set up the video.\n      this._fetchCameraPrefs();\n    }\n  }\n\n  private async _fetchCameraPrefs() {\n    this._cameraPrefs = await fetchCameraPrefs(\n      this.hass!,\n      this.stateObj!.entity_id\n    );\n  }\n\n  private async _handleCheckboxChanged(ev) {\n    const checkbox = ev.currentTarget as PaperCheckboxElement;\n    try {\n      this._cameraPrefs = await updateCameraPrefs(\n        this.hass!,\n        this.stateObj!.entity_id,\n        {\n          preload_stream: checkbox.checked!,\n        }\n      );\n    } catch (err) {\n      alert(err.message);\n      checkbox.checked = !checkbox.checked;\n    }\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      paper-checkbox {\n        position: absolute;\n        top: 0;\n        right: 0;\n        background-color: var(--secondary-background-color);\n        padding: 5px;\n        border-bottom-left-radius: 6px;\n      }\n    `;\n  }\n}\n\ncustomElements.define(\"more-info-camera\", MoreInfoCamera);\n","import \"@polymer/iron-flex-layout/iron-flex-layout-classes\";\nimport \"@polymer/paper-item/paper-item\";\nimport \"@polymer/paper-listbox/paper-listbox\";\nimport \"@polymer/paper-toggle-button/paper-toggle-button\";\nimport { timeOut } from \"@polymer/polymer/lib/utils/async\";\nimport { Debouncer } from \"@polymer/polymer/lib/utils/debounce\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport \"../../../components/ha-climate-control\";\nimport \"../../../components/ha-paper-slider\";\nimport \"../../../components/ha-paper-dropdown-menu\";\n\nimport attributeClassNames from \"../../../common/entity/attribute_class_names\";\nimport featureClassNames from \"../../../common/entity/feature_class_names\";\nimport { supportsFeature } from \"../../../common/entity/supports-feature\";\n\nimport { EventsMixin } from \"../../../mixins/events-mixin\";\nimport LocalizeMixin from \"../../../mixins/localize-mixin\";\nimport { computeRTLDirection } from \"../../../common/util/compute_rtl\";\n\n/*\n * @appliesMixin EventsMixin\n * @appliesMixin LocalizeMixin\n */\nclass MoreInfoClimate extends LocalizeMixin(EventsMixin(PolymerElement)) {\n  static get template() {\n    return html`\n      <style include=\"iron-flex\"></style>\n      <style>\n        :host {\n          color: var(--primary-text-color);\n        }\n\n        .container-on,\n        .container-away_mode,\n        .container-aux_heat,\n        .container-temperature,\n        .container-humidity,\n        .container-operation_list,\n        .container-fan_list,\n        .container-swing_list {\n          display: none;\n        }\n\n        .has-on .container-on,\n        .has-away_mode .container-away_mode,\n        .has-aux_heat .container-aux_heat,\n        .has-target_temperature .container-temperature,\n        .has-target_temperature_low .container-temperature,\n        .has-target_temperature_high .container-temperature,\n        .has-target_humidity .container-humidity,\n        .has-operation_mode .container-operation_list,\n        .has-fan_mode .container-fan_list,\n        .has-swing_list .container-swing_list,\n        .has-swing_mode .container-swing_list {\n          display: block;\n          margin-bottom: 5px;\n        }\n\n        .container-operation_list iron-icon,\n        .container-fan_list iron-icon,\n        .container-swing_list iron-icon {\n          margin: 22px 16px 0 0;\n        }\n\n        ha-paper-dropdown-menu {\n          width: 100%;\n        }\n\n        paper-item {\n          cursor: pointer;\n        }\n\n        ha-paper-slider {\n          width: 100%;\n        }\n\n        .container-humidity .single-row {\n            display: flex;\n            height: 50px;\n        }\n\n        .target-humidity {\n          width: 90px;\n          font-size: 200%;\n          margin: auto;\n          direction: ltr;\n        }\n\n        ha-climate-control.range-control-left,\n        ha-climate-control.range-control-right {\n          float: left;\n          width: 46%;\n        }\n        ha-climate-control.range-control-left {\n          margin-right: 4%;\n        }\n        ha-climate-control.range-control-right {\n          margin-left: 4%;\n        }\n\n        .humidity {\n          --paper-slider-active-color: var(--paper-blue-400);\n          --paper-slider-secondary-color: var(--paper-blue-400);\n        }\n\n        .single-row {\n          padding: 8px 0;\n        }\n        }\n      </style>\n\n      <div class$=\"[[computeClassNames(stateObj)]]\">\n        <template is=\"dom-if\" if=\"[[supportsOn(stateObj)]]\">\n          <div class=\"container-on\">\n            <div class=\"center horizontal layout single-row\">\n              <div class=\"flex\">[[localize('ui.card.climate.on_off')]]</div>\n              <paper-toggle-button\n                checked=\"[[onToggleChecked]]\"\n                on-change=\"onToggleChanged\"\n              >\n              </paper-toggle-button>\n            </div>\n          </div>\n        </template>\n\n        <div class=\"container-temperature\">\n          <div class$=\"[[stateObj.attributes.operation_mode]]\">\n            <div hidden$=\"[[!supportsTemperatureControls(stateObj)]]\">\n              [[localize('ui.card.climate.target_temperature')]]\n            </div>\n            <template is=\"dom-if\" if=\"[[supportsTemperature(stateObj)]]\">\n              <ha-climate-control\n                value=\"[[stateObj.attributes.temperature]]\"\n                units=\"[[hass.config.unit_system.temperature]]\"\n                step=\"[[computeTemperatureStepSize(hass, stateObj)]]\"\n                min=\"[[stateObj.attributes.min_temp]]\"\n                max=\"[[stateObj.attributes.max_temp]]\"\n                on-change=\"targetTemperatureChanged\"\n              >\n              </ha-climate-control>\n            </template>\n            <template is=\"dom-if\" if=\"[[supportsTemperatureRange(stateObj)]]\">\n              <ha-climate-control\n                value=\"[[stateObj.attributes.target_temp_low]]\"\n                units=\"[[hass.config.unit_system.temperature]]\"\n                step=\"[[computeTemperatureStepSize(hass, stateObj)]]\"\n                min=\"[[stateObj.attributes.min_temp]]\"\n                max=\"[[stateObj.attributes.target_temp_high]]\"\n                class=\"range-control-left\"\n                on-change=\"targetTemperatureLowChanged\"\n              >\n              </ha-climate-control>\n              <ha-climate-control\n                value=\"[[stateObj.attributes.target_temp_high]]\"\n                units=\"[[hass.config.unit_system.temperature]]\"\n                step=\"[[computeTemperatureStepSize(hass, stateObj)]]\"\n                min=\"[[stateObj.attributes.target_temp_low]]\"\n                max=\"[[stateObj.attributes.max_temp]]\"\n                class=\"range-control-right\"\n                on-change=\"targetTemperatureHighChanged\"\n              >\n              </ha-climate-control>\n            </template>\n          </div>\n        </div>\n\n        <template is=\"dom-if\" if=\"[[supportsHumidity(stateObj)]]\">\n          <div class=\"container-humidity\">\n            <div>[[localize('ui.card.climate.target_humidity')]]</div>\n            <div class=\"single-row\">\n              <div class=\"target-humidity\">\n                [[stateObj.attributes.humidity]] %\n              </div>\n              <ha-paper-slider\n                class=\"humidity\"\n                min=\"[[stateObj.attributes.min_humidity]]\"\n                max=\"[[stateObj.attributes.max_humidity]]\"\n                secondary-progress=\"[[stateObj.attributes.max_humidity]]\"\n                step=\"1\"\n                pin=\"\"\n                value=\"[[stateObj.attributes.humidity]]\"\n                on-change=\"targetHumiditySliderChanged\"\n                ignore-bar-touch=\"\"\n                dir=\"[[rtl]]\"\n              >\n              </ha-paper-slider>\n            </div>\n          </div>\n        </template>\n\n        <template is=\"dom-if\" if=\"[[supportsOperationMode(stateObj)]]\">\n          <div class=\"container-operation_list\">\n            <div class=\"controls\">\n              <ha-paper-dropdown-menu\n                label-float=\"\"\n                dynamic-align=\"\"\n                label=\"[[localize('ui.card.climate.operation')]]\"\n              >\n                <paper-listbox\n                  slot=\"dropdown-content\"\n                  selected=\"[[stateObj.attributes.operation_mode]]\"\n                  attr-for-selected=\"item-name\"\n                  on-selected-changed=\"handleOperationmodeChanged\"\n                >\n                  <template\n                    is=\"dom-repeat\"\n                    items=\"[[stateObj.attributes.operation_list]]\"\n                  >\n                    <paper-item item-name$=\"[[item]]\"\n                      >[[_localizeOperationMode(localize, item)]]</paper-item\n                    >\n                  </template>\n                </paper-listbox>\n              </ha-paper-dropdown-menu>\n            </div>\n          </div>\n        </template>\n\n        <template is=\"dom-if\" if=\"[[supportsFanMode(stateObj)]]\">\n          <div class=\"container-fan_list\">\n            <ha-paper-dropdown-menu\n              label-float=\"\"\n              dynamic-align=\"\"\n              label=\"[[localize('ui.card.climate.fan_mode')]]\"\n            >\n              <paper-listbox\n                slot=\"dropdown-content\"\n                selected=\"[[stateObj.attributes.fan_mode]]\"\n                attr-for-selected=\"item-name\"\n                on-selected-changed=\"handleFanmodeChanged\"\n              >\n                <template\n                  is=\"dom-repeat\"\n                  items=\"[[stateObj.attributes.fan_list]]\"\n                >\n                  <paper-item item-name$=\"[[item]]\"\n                    >[[_localizeFanMode(localize, item)]]\n                  </paper-item>\n                </template>\n              </paper-listbox>\n            </ha-paper-dropdown-menu>\n          </div>\n        </template>\n\n        <template is=\"dom-if\" if=\"[[supportsSwingMode(stateObj)]]\">\n          <div class=\"container-swing_list\">\n            <ha-paper-dropdown-menu\n              label-float=\"\"\n              dynamic-align=\"\"\n              label=\"[[localize('ui.card.climate.swing_mode')]]\"\n            >\n              <paper-listbox\n                slot=\"dropdown-content\"\n                selected=\"[[stateObj.attributes.swing_mode]]\"\n                attr-for-selected=\"item-name\"\n                on-selected-changed=\"handleSwingmodeChanged\"\n              >\n                <template\n                  is=\"dom-repeat\"\n                  items=\"[[stateObj.attributes.swing_list]]\"\n                >\n                  <paper-item item-name$=\"[[item]]\">[[item]]</paper-item>\n                </template>\n              </paper-listbox>\n            </ha-paper-dropdown-menu>\n          </div>\n        </template>\n\n        <template is=\"dom-if\" if=\"[[supportsAwayMode(stateObj)]]\">\n          <div class=\"container-away_mode\">\n            <div class=\"center horizontal layout single-row\">\n              <div class=\"flex\">[[localize('ui.card.climate.away_mode')]]</div>\n              <paper-toggle-button\n                checked=\"[[awayToggleChecked]]\"\n                on-change=\"awayToggleChanged\"\n              >\n              </paper-toggle-button>\n            </div>\n          </div>\n        </template>\n\n        <template is=\"dom-if\" if=\"[[supportsAuxHeat(stateObj)]]\">\n          <div class=\"container-aux_heat\">\n            <div class=\"center horizontal layout single-row\">\n              <div class=\"flex\">[[localize('ui.card.climate.aux_heat')]]</div>\n              <paper-toggle-button\n                checked=\"[[auxToggleChecked]]\"\n                on-change=\"auxToggleChanged\"\n              >\n              </paper-toggle-button>\n            </div>\n          </div>\n        </template>\n      </div>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: {\n        type: Object,\n      },\n\n      stateObj: {\n        type: Object,\n        observer: \"stateObjChanged\",\n      },\n\n      awayToggleChecked: Boolean,\n      auxToggleChecked: Boolean,\n      onToggleChecked: Boolean,\n\n      rtl: {\n        type: String,\n        value: \"ltr\",\n        computed: \"_computeRTLDirection(hass)\",\n      },\n    };\n  }\n\n  stateObjChanged(newVal, oldVal) {\n    if (newVal) {\n      this.setProperties({\n        awayToggleChecked: newVal.attributes.away_mode === \"on\",\n        auxToggleChecked: newVal.attributes.aux_heat === \"on\",\n        onToggleChecked: newVal.state !== \"off\",\n      });\n    }\n\n    if (oldVal) {\n      this._debouncer = Debouncer.debounce(\n        this._debouncer,\n        timeOut.after(500),\n        () => {\n          this.fire(\"iron-resize\");\n        }\n      );\n    }\n  }\n\n  computeTemperatureStepSize(hass, stateObj) {\n    if (stateObj.attributes.target_temp_step) {\n      return stateObj.attributes.target_temp_step;\n    }\n    if (hass.config.unit_system.temperature.indexOf(\"F\") !== -1) {\n      return 1;\n    }\n    return 0.5;\n  }\n\n  supportsTemperatureControls(stateObj) {\n    return (\n      this.supportsTemperature(stateObj) ||\n      this.supportsTemperatureRange(stateObj)\n    );\n  }\n\n  supportsTemperature(stateObj) {\n    return (\n      supportsFeature(stateObj, 1) &&\n      typeof stateObj.attributes.temperature === \"number\"\n    );\n  }\n\n  supportsTemperatureRange(stateObj) {\n    return (\n      supportsFeature(stateObj, 6) &&\n      (typeof stateObj.attributes.target_temp_low === \"number\" ||\n        typeof stateObj.attributes.target_temp_high === \"number\")\n    );\n  }\n\n  supportsHumidity(stateObj) {\n    return supportsFeature(stateObj, 8);\n  }\n\n  supportsFanMode(stateObj) {\n    return supportsFeature(stateObj, 64);\n  }\n\n  supportsOperationMode(stateObj) {\n    return supportsFeature(stateObj, 128);\n  }\n\n  supportsSwingMode(stateObj) {\n    return supportsFeature(stateObj, 512);\n  }\n\n  supportsAwayMode(stateObj) {\n    return supportsFeature(stateObj, 1024);\n  }\n\n  supportsAuxHeat(stateObj) {\n    return supportsFeature(stateObj, 2048);\n  }\n\n  supportsOn(stateObj) {\n    return supportsFeature(stateObj, 4096);\n  }\n\n  computeClassNames(stateObj) {\n    const _featureClassNames = {\n      1: \"has-target_temperature\",\n      2: \"has-target_temperature_high\",\n      4: \"has-target_temperature_low\",\n      8: \"has-target_humidity\",\n      16: \"has-target_humidity_high\",\n      32: \"has-target_humidity_low\",\n      64: \"has-fan_mode\",\n      128: \"has-operation_mode\",\n      256: \"has-hold_mode\",\n      512: \"has-swing_mode\",\n      1024: \"has-away_mode\",\n      2048: \"has-aux_heat\",\n      4096: \"has-on\",\n    };\n\n    var classes = [\n      attributeClassNames(stateObj, [\n        \"current_temperature\",\n        \"current_humidity\",\n      ]),\n      featureClassNames(stateObj, _featureClassNames),\n    ];\n\n    classes.push(\"more-info-climate\");\n\n    return classes.join(\" \");\n  }\n\n  targetTemperatureChanged(ev) {\n    const temperature = ev.target.value;\n    if (temperature === this.stateObj.attributes.temperature) return;\n    this.callServiceHelper(\"set_temperature\", { temperature: temperature });\n  }\n\n  targetTemperatureLowChanged(ev) {\n    const targetTempLow = ev.currentTarget.value;\n    if (targetTempLow === this.stateObj.attributes.target_temp_low) return;\n    this.callServiceHelper(\"set_temperature\", {\n      target_temp_low: targetTempLow,\n      target_temp_high: this.stateObj.attributes.target_temp_high,\n    });\n  }\n\n  targetTemperatureHighChanged(ev) {\n    const targetTempHigh = ev.currentTarget.value;\n    if (targetTempHigh === this.stateObj.attributes.target_temp_high) return;\n    this.callServiceHelper(\"set_temperature\", {\n      target_temp_low: this.stateObj.attributes.target_temp_low,\n      target_temp_high: targetTempHigh,\n    });\n  }\n\n  targetHumiditySliderChanged(ev) {\n    const humidity = ev.target.value;\n    if (humidity === this.stateObj.attributes.humidity) return;\n    this.callServiceHelper(\"set_humidity\", { humidity: humidity });\n  }\n\n  awayToggleChanged(ev) {\n    const oldVal = this.stateObj.attributes.away_mode === \"on\";\n    const newVal = ev.target.checked;\n    if (oldVal === newVal) return;\n    this.callServiceHelper(\"set_away_mode\", { away_mode: newVal });\n  }\n\n  auxToggleChanged(ev) {\n    const oldVal = this.stateObj.attributes.aux_heat === \"on\";\n    const newVal = ev.target.checked;\n    if (oldVal === newVal) return;\n    this.callServiceHelper(\"set_aux_heat\", { aux_heat: newVal });\n  }\n\n  onToggleChanged(ev) {\n    const oldVal = this.stateObj.state !== \"off\";\n    const newVal = ev.target.checked;\n    if (oldVal === newVal) return;\n    this.callServiceHelper(newVal ? \"turn_on\" : \"turn_off\", {});\n  }\n\n  handleFanmodeChanged(ev) {\n    const oldVal = this.stateObj.attributes.fan_mode;\n    const newVal = ev.detail.value;\n    if (!newVal || oldVal === newVal) return;\n    this.callServiceHelper(\"set_fan_mode\", { fan_mode: newVal });\n  }\n\n  handleOperationmodeChanged(ev) {\n    const oldVal = this.stateObj.attributes.operation_mode;\n    const newVal = ev.detail.value;\n    if (!newVal || oldVal === newVal) return;\n    this.callServiceHelper(\"set_operation_mode\", {\n      operation_mode: newVal,\n    });\n  }\n\n  handleSwingmodeChanged(ev) {\n    const oldVal = this.stateObj.attributes.swing_mode;\n    const newVal = ev.detail.value;\n    if (!newVal || oldVal === newVal) return;\n    this.callServiceHelper(\"set_swing_mode\", { swing_mode: newVal });\n  }\n\n  callServiceHelper(service, data) {\n    // We call stateChanged after a successful call to re-sync the inputs\n    // with the state. It will be out of sync if our service call did not\n    // result in the entity to be turned on. Since the state is not changing,\n    // the resync is not called automatic.\n    /* eslint-disable no-param-reassign */\n    data.entity_id = this.stateObj.entity_id;\n    /* eslint-enable no-param-reassign */\n    this.hass.callService(\"climate\", service, data).then(() => {\n      this.stateObjChanged(this.stateObj);\n    });\n  }\n\n  _localizeOperationMode(localize, mode) {\n    return localize(`state.climate.${mode}`) || mode;\n  }\n\n  _localizeFanMode(localize, mode) {\n    return localize(`state_attributes.climate.fan_mode.${mode}`) || mode;\n  }\n\n  _computeRTLDirection(hass) {\n    return computeRTLDirection(hass);\n  }\n}\n\ncustomElements.define(\"more-info-climate\", MoreInfoClimate);\n","import \"@polymer/iron-flex-layout/iron-flex-layout-classes\";\nimport \"@polymer/iron-input/iron-input\";\nimport \"@material/mwc-button\";\nimport \"@polymer/paper-input/paper-input\";\nimport \"@polymer/paper-spinner/paper-spinner\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport \"../../../components/ha-markdown\";\n\nclass MoreInfoConfigurator extends PolymerElement {\n  static get template() {\n    return html`\n      <style include=\"iron-flex\"></style>\n      <style>\n        p {\n          margin: 8px 0;\n        }\n\n        a {\n          color: var(--primary-color);\n        }\n\n        p > img {\n          max-width: 100%;\n        }\n\n        p.center {\n          text-align: center;\n        }\n\n        p.error {\n          color: #c62828;\n        }\n\n        p.submit {\n          text-align: center;\n          height: 41px;\n        }\n\n        paper-spinner {\n          width: 14px;\n          height: 14px;\n          margin-right: 20px;\n        }\n\n        [hidden] {\n          display: none;\n        }\n      </style>\n\n      <div class=\"layout vertical\">\n        <template is=\"dom-if\" if=\"[[isConfigurable]]\">\n          <ha-markdown\n            content=\"[[stateObj.attributes.description]]\"\n          ></ha-markdown>\n\n          <p class=\"error\" hidden$=\"[[!stateObj.attributes.errors]]\">\n            [[stateObj.attributes.errors]]\n          </p>\n\n          <template is=\"dom-repeat\" items=\"[[stateObj.attributes.fields]]\">\n            <paper-input\n              label=\"[[item.name]]\"\n              name=\"[[item.id]]\"\n              type=\"[[item.type]]\"\n              on-change=\"fieldChanged\"\n            ></paper-input>\n          </template>\n\n          <p class=\"submit\" hidden$=\"[[!stateObj.attributes.submit_caption]]\">\n            <mwc-button\n              raised=\"\"\n              disabled=\"[[isConfiguring]]\"\n              on-click=\"submitClicked\"\n            >\n              <paper-spinner\n                active=\"[[isConfiguring]]\"\n                hidden=\"[[!isConfiguring]]\"\n                alt=\"Configuring\"\n              ></paper-spinner>\n              [[stateObj.attributes.submit_caption]]\n            </mwc-button>\n          </p>\n        </template>\n      </div>\n    `;\n  }\n\n  static get properties() {\n    return {\n      stateObj: {\n        type: Object,\n      },\n\n      action: {\n        type: String,\n        value: \"display\",\n      },\n\n      isConfigurable: {\n        type: Boolean,\n        computed: \"computeIsConfigurable(stateObj)\",\n      },\n\n      isConfiguring: {\n        type: Boolean,\n        value: false,\n      },\n\n      fieldInput: {\n        type: Object,\n        value: function() {\n          return {};\n        },\n      },\n    };\n  }\n\n  computeIsConfigurable(stateObj) {\n    return stateObj.state === \"configure\";\n  }\n\n  fieldChanged(ev) {\n    var el = ev.target;\n    this.fieldInput[el.name] = el.value;\n  }\n\n  submitClicked() {\n    var data = {\n      configure_id: this.stateObj.attributes.configure_id,\n      fields: this.fieldInput,\n    };\n\n    this.isConfiguring = true;\n\n    this.hass.callService(\"configurator\", \"configure\", data).then(\n      function() {\n        this.isConfiguring = false;\n      }.bind(this),\n      function() {\n        this.isConfiguring = false;\n      }.bind(this)\n    );\n  }\n}\n\ncustomElements.define(\"more-info-configurator\", MoreInfoConfigurator);\n","import {\n  PropertyDeclarations,\n  PropertyValues,\n  UpdatingElement,\n} from \"lit-element\";\nimport { HassEntity } from \"home-assistant-js-websocket\";\n\nimport \"./more-info-alarm_control_panel\";\nimport \"./more-info-automation\";\nimport \"./more-info-camera\";\nimport \"./more-info-climate\";\nimport \"./more-info-configurator\";\nimport \"./more-info-cover\";\nimport \"./more-info-default\";\nimport \"./more-info-fan\";\nimport \"./more-info-group\";\nimport \"./more-info-history_graph\";\nimport \"./more-info-input_datetime\";\nimport \"./more-info-light\";\nimport \"./more-info-lock\";\nimport \"./more-info-media_player\";\nimport \"./more-info-script\";\nimport \"./more-info-sun\";\nimport \"./more-info-updater\";\nimport \"./more-info-vacuum\";\nimport \"./more-info-water_heater\";\nimport \"./more-info-weather\";\n\nimport stateMoreInfoType from \"../../../common/entity/state_more_info_type\";\nimport dynamicContentUpdater from \"../../../common/dom/dynamic_content_updater\";\nimport { HomeAssistant } from \"../../../types\";\n\nclass MoreInfoContent extends UpdatingElement {\n  public hass?: HomeAssistant;\n  public stateObj?: HassEntity;\n  private _detachedChild?: ChildNode;\n\n  static get properties(): PropertyDeclarations {\n    return {\n      hass: {},\n      stateObj: {},\n    };\n  }\n\n  protected firstUpdated(): void {\n    this.style.position = \"relative\";\n    this.style.display = \"block\";\n  }\n\n  // This is not a lit element, but an updating element, so we implement update\n  protected update(changedProps: PropertyValues): void {\n    super.update(changedProps);\n    const stateObj = this.stateObj;\n    const hass = this.hass;\n\n    if (!stateObj || !hass) {\n      if (this.lastChild) {\n        this._detachedChild = this.lastChild;\n        // Detach child to prevent it from doing work.\n        this.removeChild(this.lastChild);\n      }\n      return;\n    }\n\n    if (this._detachedChild) {\n      this.appendChild(this._detachedChild);\n      this._detachedChild = undefined;\n    }\n\n    const moreInfoType =\n      stateObj.attributes && \"custom_ui_more_info\" in stateObj.attributes\n        ? stateObj.attributes.custom_ui_more_info\n        : \"more-info-\" + stateMoreInfoType(stateObj);\n\n    dynamicContentUpdater(this, moreInfoType.toUpperCase(), {\n      hass,\n      stateObj,\n    });\n  }\n}\n\ncustomElements.define(\"more-info-content\", MoreInfoContent);\n","import \"@polymer/iron-flex-layout/iron-flex-layout-classes\";\nimport \"@polymer/paper-icon-button/paper-icon-button\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport \"../../../components/ha-cover-tilt-controls\";\nimport \"../../../components/ha-labeled-slider\";\nimport CoverEntity from \"../../../util/cover-model\";\n\nimport attributeClassNames from \"../../../common/entity/attribute_class_names\";\nimport featureClassNames from \"../../../common/entity/feature_class_names\";\n\nimport LocalizeMixin from \"../../../mixins/localize-mixin\";\n\nconst FEATURE_CLASS_NAMES = {\n  128: \"has-set_tilt_position\",\n};\nclass MoreInfoCover extends LocalizeMixin(PolymerElement) {\n  static get template() {\n    return html`\n      <style include=\"iron-flex\"></style>\n      <style>\n        .current_position,\n        .tilt {\n          max-height: 0px;\n          overflow: hidden;\n        }\n\n        .has-current_position .current_position,\n        .has-set_tilt_position .tilt,\n        .has-current_tilt_position .tilt {\n          max-height: 208px;\n        }\n\n        [invisible] {\n          visibility: hidden !important;\n        }\n      </style>\n      <div class$=\"[[computeClassNames(stateObj)]]\">\n        <div class=\"current_position\">\n          <ha-labeled-slider\n            caption=\"[[localize('ui.card.cover.position')]]\"\n            pin=\"\"\n            value=\"{{coverPositionSliderValue}}\"\n            disabled=\"[[!entityObj.supportsSetPosition]]\"\n            on-change=\"coverPositionSliderChanged\"\n          ></ha-labeled-slider>\n        </div>\n\n        <div class=\"tilt\">\n          <ha-labeled-slider\n            caption=\"[[localize('ui.card.cover.tilt_position')]]\"\n            pin=\"\"\n            extra=\"\"\n            value=\"{{coverTiltPositionSliderValue}}\"\n            disabled=\"[[!entityObj.supportsSetTiltPosition]]\"\n            on-change=\"coverTiltPositionSliderChanged\"\n          >\n            <ha-cover-tilt-controls\n              slot=\"extra\"\n              hidden$=\"[[entityObj.isTiltOnly]]\"\n              hass=\"[[hass]]\"\n              state-obj=\"[[stateObj]]\"\n            ></ha-cover-tilt-controls>\n          </ha-labeled-slider>\n        </div>\n      </div>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      stateObj: {\n        type: Object,\n        observer: \"stateObjChanged\",\n      },\n      entityObj: {\n        type: Object,\n        computed: \"computeEntityObj(hass, stateObj)\",\n      },\n      coverPositionSliderValue: Number,\n      coverTiltPositionSliderValue: Number,\n    };\n  }\n\n  computeEntityObj(hass, stateObj) {\n    return new CoverEntity(hass, stateObj);\n  }\n\n  stateObjChanged(newVal) {\n    if (newVal) {\n      this.setProperties({\n        coverPositionSliderValue: newVal.attributes.current_position,\n        coverTiltPositionSliderValue: newVal.attributes.current_tilt_position,\n      });\n    }\n  }\n\n  computeClassNames(stateObj) {\n    var classes = [\n      attributeClassNames(stateObj, [\n        \"current_position\",\n        \"current_tilt_position\",\n      ]),\n      featureClassNames(stateObj, FEATURE_CLASS_NAMES),\n    ];\n    return classes.join(\" \");\n  }\n\n  coverPositionSliderChanged(ev) {\n    this.entityObj.setCoverPosition(ev.target.value);\n  }\n\n  coverTiltPositionSliderChanged(ev) {\n    this.entityObj.setCoverTiltPosition(ev.target.value);\n  }\n}\n\ncustomElements.define(\"more-info-cover\", MoreInfoCover);\n","import { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport \"../../../components/ha-attributes\";\n\nclass MoreInfoDefault extends PolymerElement {\n  static get template() {\n    return html`\n      <ha-attributes state-obj=\"[[stateObj]]\"></ha-attributes>\n    `;\n  }\n\n  static get properties() {\n    return {\n      stateObj: {\n        type: Object,\n      },\n    };\n  }\n}\n\ncustomElements.define(\"more-info-default\", MoreInfoDefault);\n","import \"@polymer/iron-flex-layout/iron-flex-layout-classes\";\nimport \"@polymer/paper-icon-button/paper-icon-button\";\nimport \"@polymer/paper-item/paper-item\";\nimport \"@polymer/paper-listbox/paper-listbox\";\nimport \"@polymer/paper-toggle-button/paper-toggle-button\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport \"../../../components/ha-attributes\";\nimport \"../../../components/ha-paper-dropdown-menu\";\n\nimport attributeClassNames from \"../../../common/entity/attribute_class_names\";\nimport { EventsMixin } from \"../../../mixins/events-mixin\";\nimport LocalizeMixin from \"../../../mixins/localize-mixin\";\n\n/*\n * @appliesMixin EventsMixin\n */\nclass MoreInfoFan extends LocalizeMixin(EventsMixin(PolymerElement)) {\n  static get template() {\n    return html`\n      <style include=\"iron-flex\"></style>\n      <style>\n        .container-speed_list,\n        .container-direction,\n        .container-oscillating {\n          display: none;\n        }\n\n        .has-speed_list .container-speed_list,\n        .has-direction .container-direction,\n        .has-oscillating .container-oscillating {\n          display: block;\n        }\n\n        ha-paper-dropdown-menu {\n          width: 100%;\n        }\n\n        paper-item {\n          cursor: pointer;\n        }\n      </style>\n\n      <div class$=\"[[computeClassNames(stateObj)]]\">\n        <div class=\"container-speed_list\">\n          <ha-paper-dropdown-menu\n            label-float=\"\"\n            dynamic-align=\"\"\n            label=\"[[localize('ui.card.fan.speed')]]\"\n          >\n            <paper-listbox\n              slot=\"dropdown-content\"\n              selected=\"[[stateObj.attributes.speed]]\"\n              on-selected-changed=\"speedChanged\"\n              attr-for-selected=\"item-name\"\n            >\n              <template\n                is=\"dom-repeat\"\n                items=\"[[stateObj.attributes.speed_list]]\"\n              >\n                <paper-item item-name$=\"[[item]]\">[[item]]</paper-item>\n              </template>\n            </paper-listbox>\n          </ha-paper-dropdown-menu>\n        </div>\n\n        <div class=\"container-oscillating\">\n          <div class=\"center horizontal layout single-row\">\n            <div class=\"flex\">[[localize('ui.card.fan.oscillate')]]</div>\n            <paper-toggle-button\n              checked=\"[[oscillationToggleChecked]]\"\n              on-change=\"oscillationToggleChanged\"\n            >\n            </paper-toggle-button>\n          </div>\n        </div>\n\n        <div class=\"container-direction\">\n          <div class=\"direction\">\n            <div>[[localize('ui.card.fan.direction')]]</div>\n            <paper-icon-button\n              icon=\"hass:rotate-left\"\n              on-click=\"onDirectionLeft\"\n              title=\"Left\"\n              disabled=\"[[computeIsRotatingLeft(stateObj)]]\"\n            ></paper-icon-button>\n            <paper-icon-button\n              icon=\"hass:rotate-right\"\n              on-click=\"onDirectionRight\"\n              title=\"Right\"\n              disabled=\"[[computeIsRotatingRight(stateObj)]]\"\n            ></paper-icon-button>\n          </div>\n        </div>\n      </div>\n\n      <ha-attributes\n        state-obj=\"[[stateObj]]\"\n        extra-filters=\"speed,speed_list,oscillating,direction\"\n      ></ha-attributes>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: {\n        type: Object,\n      },\n\n      stateObj: {\n        type: Object,\n        observer: \"stateObjChanged\",\n      },\n\n      oscillationToggleChecked: {\n        type: Boolean,\n      },\n    };\n  }\n\n  stateObjChanged(newVal, oldVal) {\n    if (newVal) {\n      this.setProperties({\n        oscillationToggleChecked: newVal.attributes.oscillating,\n      });\n    }\n\n    if (oldVal) {\n      setTimeout(() => {\n        this.fire(\"iron-resize\");\n      }, 500);\n    }\n  }\n\n  computeClassNames(stateObj) {\n    return (\n      \"more-info-fan \" +\n      attributeClassNames(stateObj, [\"oscillating\", \"speed_list\", \"direction\"])\n    );\n  }\n\n  speedChanged(ev) {\n    var oldVal = this.stateObj.attributes.speed;\n    var newVal = ev.detail.value;\n\n    if (!newVal || oldVal === newVal) return;\n\n    this.hass.callService(\"fan\", \"turn_on\", {\n      entity_id: this.stateObj.entity_id,\n      speed: newVal,\n    });\n  }\n\n  oscillationToggleChanged(ev) {\n    var oldVal = this.stateObj.attributes.oscillating;\n    var newVal = ev.target.checked;\n\n    if (oldVal === newVal) return;\n\n    this.hass.callService(\"fan\", \"oscillate\", {\n      entity_id: this.stateObj.entity_id,\n      oscillating: newVal,\n    });\n  }\n\n  onDirectionLeft() {\n    this.hass.callService(\"fan\", \"set_direction\", {\n      entity_id: this.stateObj.entity_id,\n      direction: \"reverse\",\n    });\n  }\n\n  onDirectionRight() {\n    this.hass.callService(\"fan\", \"set_direction\", {\n      entity_id: this.stateObj.entity_id,\n      direction: \"forward\",\n    });\n  }\n\n  computeIsRotatingLeft(stateObj) {\n    return stateObj.attributes.direction === \"reverse\";\n  }\n\n  computeIsRotatingRight(stateObj) {\n    return stateObj.attributes.direction === \"forward\";\n  }\n}\n\ncustomElements.define(\"more-info-fan\", MoreInfoFan);\n","import { dom } from \"@polymer/polymer/lib/legacy/polymer.dom\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport \"../../../state-summary/state-card-content\";\n\nimport computeStateDomain from \"../../../common/entity/compute_state_domain\";\nimport dynamicContentUpdater from \"../../../common/dom/dynamic_content_updater\";\n\nclass MoreInfoGroup extends PolymerElement {\n  static get template() {\n    return html`\n      <style>\n        .child-card {\n          margin-bottom: 8px;\n        }\n\n        .child-card:last-child {\n          margin-bottom: 0;\n        }\n      </style>\n\n      <div id=\"groupedControlDetails\"></div>\n      <template is=\"dom-repeat\" items=\"[[states]]\" as=\"state\">\n        <div class=\"child-card\">\n          <state-card-content\n            state-obj=\"[[state]]\"\n            hass=\"[[hass]]\"\n          ></state-card-content>\n        </div>\n      </template>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: {\n        type: Object,\n      },\n\n      stateObj: {\n        type: Object,\n      },\n\n      states: {\n        type: Array,\n        computed: \"computeStates(stateObj, hass)\",\n      },\n    };\n  }\n\n  static get observers() {\n    return [\"statesChanged(stateObj, states)\"];\n  }\n\n  computeStates(stateObj, hass) {\n    var states = [];\n    var entIds = stateObj.attributes.entity_id || [];\n\n    for (var i = 0; i < entIds.length; i++) {\n      var state = hass.states[entIds[i]];\n\n      if (state) {\n        states.push(state);\n      }\n    }\n\n    return states;\n  }\n\n  statesChanged(stateObj, states) {\n    let groupDomainStateObj = false;\n    let groupDomain = false;\n\n    if (states && states.length > 0) {\n      const baseStateObj = states.find((s) => s.state === \"on\") || states[0];\n      groupDomain = computeStateDomain(baseStateObj);\n\n      // Groups need to be filtered out or we'll show content of\n      // first child above the children of the current group\n      if (groupDomain !== \"group\") {\n        groupDomainStateObj = Object.assign({}, baseStateObj, {\n          entity_id: stateObj.entity_id,\n          attributes: Object.assign({}, baseStateObj.attributes),\n        });\n\n        for (let i = 0; i < states.length; i++) {\n          if (groupDomain !== computeStateDomain(states[i])) {\n            groupDomainStateObj = false;\n            break;\n          }\n        }\n      }\n    }\n\n    if (!groupDomainStateObj) {\n      const el = dom(this.$.groupedControlDetails);\n      if (el.lastChild) {\n        el.removeChild(el.lastChild);\n      }\n    } else {\n      dynamicContentUpdater(\n        this.$.groupedControlDetails,\n        \"MORE-INFO-\" + groupDomain.toUpperCase(),\n        { stateObj: groupDomainStateObj, hass: this.hass }\n      );\n    }\n  }\n}\n\ncustomElements.define(\"more-info-group\", MoreInfoGroup);\n","import { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport \"../../../cards/ha-history_graph-card\";\nimport \"../../../components/ha-attributes\";\n\nclass MoreInfoHistoryGraph extends PolymerElement {\n  static get template() {\n    return html`\n      <style>\n        :host {\n          display: block;\n          margin-bottom: 6px;\n        }\n      </style>\n      <ha-history_graph-card\n        hass=\"[[hass]]\"\n        state-obj=\"[[stateObj]]\"\n        in-dialog=\"\"\n      >\n        <ha-attributes state-obj=\"[[stateObj]]\"></ha-attributes>\n      </ha-history_graph-card>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      stateObj: Object,\n    };\n  }\n}\ncustomElements.define(\"more-info-history_graph\", MoreInfoHistoryGraph);\n","import \"@polymer/iron-flex-layout/iron-flex-layout-classes\";\nimport \"@polymer/paper-input/paper-input\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\nimport \"@vaadin/vaadin-date-picker/vaadin-date-picker\";\n\nimport \"../../../components/ha-relative-time\";\nimport \"../../../components/paper-time-input\";\n\nimport attributeClassNames from \"../../../common/entity/attribute_class_names\";\n\nclass DatetimeInput extends PolymerElement {\n  static get template() {\n    return html`\n      <div class$=\"[[computeClassNames(stateObj)]]\">\n        <template is=\"dom-if\" if=\"[[doesHaveDate(stateObj)]]\" restamp=\"\">\n          <div>\n            <vaadin-date-picker\n              id=\"dateInput\"\n              on-value-changed=\"dateTimeChanged\"\n              label=\"Date\"\n              value=\"{{selectedDate}}\"\n            ></vaadin-date-picker>\n          </div>\n        </template>\n        <template is=\"dom-if\" if=\"[[doesHaveTime(stateObj)]]\" restamp=\"\">\n          <div>\n            <paper-time-input\n              hour=\"{{selectedHour}}\"\n              min=\"{{selectedMinute}}\"\n              format=\"24\"\n            ></paper-time-input>\n          </div>\n        </template>\n      </div>\n    `;\n  }\n\n  constructor() {\n    super();\n    this.is_ready = false;\n  }\n\n  static get properties() {\n    return {\n      hass: {\n        type: Object,\n      },\n\n      stateObj: {\n        type: Object,\n        observer: \"stateObjChanged\",\n      },\n\n      selectedDate: {\n        type: String,\n        observer: \"dateTimeChanged\",\n      },\n\n      selectedHour: {\n        type: Number,\n        observer: \"dateTimeChanged\",\n      },\n\n      selectedMinute: {\n        type: Number,\n        observer: \"dateTimeChanged\",\n      },\n    };\n  }\n\n  ready() {\n    super.ready();\n    this.is_ready = true;\n  }\n\n  /* Convert the date in the stateObj into a string useable by vaadin-date-picker */\n  getDateString(stateObj) {\n    if (stateObj.state === \"unknown\") {\n      return \"\";\n    }\n    var monthFiller;\n    if (stateObj.attributes.month < 10) {\n      monthFiller = \"0\";\n    } else {\n      monthFiller = \"\";\n    }\n\n    var dayFiller;\n    if (stateObj.attributes.day < 10) {\n      dayFiller = \"0\";\n    } else {\n      dayFiller = \"\";\n    }\n\n    return (\n      stateObj.attributes.year +\n      \"-\" +\n      monthFiller +\n      stateObj.attributes.month +\n      \"-\" +\n      dayFiller +\n      stateObj.attributes.day\n    );\n  }\n\n  /* Should fire when any value was changed *by the user*, not b/c of setting\n   * initial values. */\n  dateTimeChanged() {\n    // Check if the change is really coming from the user\n    if (!this.is_ready) {\n      return;\n    }\n\n    let changed = false;\n    let minuteFiller;\n\n    const serviceData = {\n      entity_id: this.stateObj.entity_id,\n    };\n\n    if (this.stateObj.attributes.has_time) {\n      changed |=\n        parseInt(this.selectedMinute) !== this.stateObj.attributes.minute;\n      changed |= parseInt(this.selectedHour) !== this.stateObj.attributes.hour;\n      if (this.selectedMinute < 10) {\n        minuteFiller = \"0\";\n      } else {\n        minuteFiller = \"\";\n      }\n      var timeStr =\n        this.selectedHour + \":\" + minuteFiller + this.selectedMinute;\n      serviceData.time = timeStr;\n    }\n\n    if (this.stateObj.attributes.has_date) {\n      if (this.selectedDate.length === 0) {\n        return; // Date was not set\n      }\n\n      const dateValInput = new Date(this.selectedDate);\n      const dateValState = new Date(\n        this.stateObj.attributes.year,\n        this.stateObj.attributes.month - 1,\n        this.stateObj.attributes.day\n      );\n\n      changed |= dateValState !== dateValInput;\n\n      serviceData.date = this.selectedDate;\n    }\n\n    if (changed) {\n      this.hass.callService(\"input_datetime\", \"set_datetime\", serviceData);\n    }\n  }\n\n  stateObjChanged(newVal) {\n    // Set to non-ready s.t. dateTimeChanged does not fire\n    this.is_ready = false;\n\n    if (newVal.attributes.has_time) {\n      this.selectedHour = newVal.attributes.hour;\n      this.selectedMinute = newVal.attributes.minute;\n    }\n\n    if (newVal.attributes.has_date) {\n      this.selectedDate = this.getDateString(newVal);\n    }\n\n    this.is_ready = true;\n  }\n\n  doesHaveDate(stateObj) {\n    return stateObj.attributes.has_date;\n  }\n\n  doesHaveTime(stateObj) {\n    return stateObj.attributes.has_time;\n  }\n\n  computeClassNames(stateObj) {\n    return (\n      \"more-info-input_datetime \" +\n      attributeClassNames(stateObj, [\"has_time\", \"has_date\"])\n    );\n  }\n}\n\ncustomElements.define(\"more-info-input_datetime\", DatetimeInput);\n","import \"@polymer/iron-flex-layout/iron-flex-layout-classes\";\nimport \"@polymer/paper-item/paper-item\";\nimport \"@polymer/paper-listbox/paper-listbox\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport \"../../../components/ha-attributes\";\nimport \"../../../components/ha-color-picker\";\nimport \"../../../components/ha-labeled-slider\";\nimport \"../../../components/ha-paper-dropdown-menu\";\n\nimport featureClassNames from \"../../../common/entity/feature_class_names\";\nimport { EventsMixin } from \"../../../mixins/events-mixin\";\nimport LocalizeMixin from \"../../../mixins/localize-mixin\";\n\nconst FEATURE_CLASS_NAMES = {\n  1: \"has-brightness\",\n  2: \"has-color_temp\",\n  4: \"has-effect_list\",\n  16: \"has-color\",\n  128: \"has-white_value\",\n};\n/*\n * @appliesMixin EventsMixin\n */\nclass MoreInfoLight extends LocalizeMixin(EventsMixin(PolymerElement)) {\n  static get template() {\n    return html`\n      <style include=\"iron-flex\"></style>\n      <style>\n        .effect_list,\n        .brightness,\n        .color_temp,\n        .white_value {\n          max-height: 0px;\n          overflow: hidden;\n          transition: max-height 0.5s ease-in;\n        }\n\n        .color_temp {\n          --ha-slider-background: -webkit-linear-gradient(\n            right,\n            rgb(255, 160, 0) 0%,\n            white 50%,\n            rgb(166, 209, 255) 100%\n          );\n          /* The color temp minimum value shouldn't be rendered differently. It's not \"off\". */\n          --paper-slider-knob-start-border-color: var(--primary-color);\n        }\n\n        .segmentationContainer {\n          position: relative;\n          width: 100%;\n        }\n\n        ha-color-picker {\n          display: block;\n          width: 100%;\n\n          max-height: 0px;\n          overflow: hidden;\n          transition: max-height 0.5s ease-in;\n        }\n\n        .segmentationButton {\n          position: absolute;\n          top: 11%;\n          transform: translate(0%, 0%);\n          padding: 0px;\n          max-height: 0px;\n          width: 23px;\n          height: 23px;\n          opacity: var(--dark-secondary-opacity);\n          overflow: hidden;\n          transition: max-height 0.5s ease-in;\n        }\n\n        .has-color.is-on .segmentationContainer .segmentationButton {\n          position: absolute;\n          top: 11%;\n          transform: translate(0%, 0%);\n          width: 23px;\n          height: 23px;\n          padding: 0px;\n          opacity: var(--dark-secondary-opacity);\n        }\n\n        .has-effect_list.is-on .effect_list,\n        .has-brightness .brightness,\n        .has-color_temp.is-on .color_temp,\n        .has-white_value.is-on .white_value {\n          max-height: 84px;\n        }\n\n        .has-brightness .has-color_temp.is-on,\n        .has-white_value.is-on {\n          margin-top: -16px;\n        }\n\n        .has-brightness .brightness,\n        .has-color_temp.is-on .color_temp,\n        .has-white_value.is-on .white_value {\n          padding-top: 16px;\n        }\n\n        .has-color.is-on .segmentationButton {\n          max-height: 100px;\n          overflow: visible;\n        }\n\n        .has-color.is-on ha-color-picker {\n          max-height: 500px;\n          overflow: visible;\n          --ha-color-picker-wheel-borderwidth: 5;\n          --ha-color-picker-wheel-bordercolor: white;\n          --ha-color-picker-wheel-shadow: none;\n          --ha-color-picker-marker-borderwidth: 2;\n          --ha-color-picker-marker-bordercolor: white;\n        }\n\n        .is-unavailable .control {\n          max-height: 0px;\n        }\n\n        paper-item {\n          cursor: pointer;\n        }\n      </style>\n\n      <div class$=\"[[computeClassNames(stateObj)]]\">\n        <div class=\"control brightness\">\n          <ha-labeled-slider\n            caption=\"[[localize('ui.card.light.brightness')]]\"\n            icon=\"hass:brightness-5\"\n            min=\"1\"\n            max=\"255\"\n            value=\"{{brightnessSliderValue}}\"\n            on-change=\"brightnessSliderChanged\"\n          ></ha-labeled-slider>\n        </div>\n\n        <div class=\"control color_temp\">\n          <ha-labeled-slider\n            caption=\"[[localize('ui.card.light.color_temperature')]]\"\n            icon=\"hass:thermometer\"\n            min=\"[[stateObj.attributes.min_mireds]]\"\n            max=\"[[stateObj.attributes.max_mireds]]\"\n            value=\"{{ctSliderValue}}\"\n            on-change=\"ctSliderChanged\"\n          ></ha-labeled-slider>\n        </div>\n\n        <div class=\"control white_value\">\n          <ha-labeled-slider\n            caption=\"[[localize('ui.card.light.white_value')]]\"\n            icon=\"hass:file-word-box\"\n            max=\"255\"\n            value=\"{{wvSliderValue}}\"\n            on-change=\"wvSliderChanged\"\n          ></ha-labeled-slider>\n        </div>\n        <div class=\"segmentationContainer\">\n          <ha-color-picker\n            class=\"control color\"\n            on-colorselected=\"colorPicked\"\n            desired-hs-color=\"{{colorPickerColor}}\"\n            throttle=\"500\"\n            hue-segments=\"{{hueSegments}}\"\n            saturation-segments=\"{{saturationSegments}}\"\n          >\n          </ha-color-picker>\n          <paper-icon-button\n            icon=\"mdi:palette\"\n            on-click=\"segmentClick\"\n            class=\"control segmentationButton\"\n          ></paper-icon-button>\n        </div>\n\n        <div class=\"control effect_list\">\n          <ha-paper-dropdown-menu\n            label-float=\"\"\n            dynamic-align=\"\"\n            label=\"[[localize('ui.card.light.effect')]]\"\n          >\n            <paper-listbox\n              slot=\"dropdown-content\"\n              selected=\"[[stateObj.attributes.effect]]\"\n              on-selected-changed=\"effectChanged\"\n              attr-for-selected=\"item-name\"\n            >\n              <template\n                is=\"dom-repeat\"\n                items=\"[[stateObj.attributes.effect_list]]\"\n              >\n                <paper-item item-name$=\"[[item]]\">[[item]]</paper-item>\n              </template>\n            </paper-listbox>\n          </ha-paper-dropdown-menu>\n        </div>\n\n        <ha-attributes\n          state-obj=\"[[stateObj]]\"\n          extra-filters=\"brightness,color_temp,white_value,effect_list,effect,hs_color,rgb_color,xy_color,min_mireds,max_mireds\"\n        ></ha-attributes>\n      </div>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: {\n        type: Object,\n      },\n\n      stateObj: {\n        type: Object,\n        observer: \"stateObjChanged\",\n      },\n\n      brightnessSliderValue: {\n        type: Number,\n        value: 0,\n      },\n\n      ctSliderValue: {\n        type: Number,\n        value: 0,\n      },\n\n      wvSliderValue: {\n        type: Number,\n        value: 0,\n      },\n\n      hueSegments: {\n        type: Number,\n        value: 24,\n      },\n\n      saturationSegments: {\n        type: Number,\n        value: 8,\n      },\n\n      colorPickerColor: {\n        type: Object,\n      },\n    };\n  }\n\n  stateObjChanged(newVal, oldVal) {\n    const props = {\n      brightnessSliderValue: 0,\n    };\n\n    if (newVal && newVal.state === \"on\") {\n      props.brightnessSliderValue = newVal.attributes.brightness;\n      props.ctSliderValue = newVal.attributes.color_temp;\n      props.wvSliderValue = newVal.attributes.white_value;\n      if (newVal.attributes.hs_color) {\n        props.colorPickerColor = {\n          h: newVal.attributes.hs_color[0],\n          s: newVal.attributes.hs_color[1] / 100,\n        };\n      }\n    }\n\n    this.setProperties(props);\n\n    if (oldVal) {\n      setTimeout(() => {\n        this.fire(\"iron-resize\");\n      }, 500);\n    }\n  }\n\n  computeClassNames(stateObj) {\n    const classes = [featureClassNames(stateObj, FEATURE_CLASS_NAMES)];\n    if (stateObj && stateObj.state === \"on\") {\n      classes.push(\"is-on\");\n    }\n    if (stateObj && stateObj.state === \"unavailable\") {\n      classes.push(\"is-unavailable\");\n    }\n    return classes.join(\" \");\n  }\n\n  effectChanged(ev) {\n    var oldVal = this.stateObj.attributes.effect;\n    var newVal = ev.detail.value;\n\n    if (!newVal || oldVal === newVal) return;\n\n    this.hass.callService(\"light\", \"turn_on\", {\n      entity_id: this.stateObj.entity_id,\n      effect: newVal,\n    });\n  }\n\n  brightnessSliderChanged(ev) {\n    var bri = parseInt(ev.target.value, 10);\n\n    if (isNaN(bri)) return;\n\n    this.hass.callService(\"light\", \"turn_on\", {\n      entity_id: this.stateObj.entity_id,\n      brightness: bri,\n    });\n  }\n\n  ctSliderChanged(ev) {\n    var ct = parseInt(ev.target.value, 10);\n\n    if (isNaN(ct)) return;\n\n    this.hass.callService(\"light\", \"turn_on\", {\n      entity_id: this.stateObj.entity_id,\n      color_temp: ct,\n    });\n  }\n\n  wvSliderChanged(ev) {\n    var wv = parseInt(ev.target.value, 10);\n\n    if (isNaN(wv)) return;\n\n    this.hass.callService(\"light\", \"turn_on\", {\n      entity_id: this.stateObj.entity_id,\n      white_value: wv,\n    });\n  }\n\n  segmentClick() {\n    if (this.hueSegments === 24 && this.saturationSegments === 8) {\n      this.setProperties({ hueSegments: 0, saturationSegments: 0 });\n    } else {\n      this.setProperties({ hueSegments: 24, saturationSegments: 8 });\n    }\n  }\n\n  serviceChangeColor(hass, entityId, color) {\n    hass.callService(\"light\", \"turn_on\", {\n      entity_id: entityId,\n      hs_color: [color.h, color.s * 100],\n    });\n  }\n\n  /**\n   * Called when a new color has been picked.\n   * should be throttled with the 'throttle=' attribute of the color picker\n   */\n  colorPicked(ev) {\n    this.serviceChangeColor(this.hass, this.stateObj.entity_id, ev.detail.hs);\n  }\n}\n\ncustomElements.define(\"more-info-light\", MoreInfoLight);\n","import \"@material/mwc-button\";\nimport \"@polymer/paper-input/paper-input\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport \"../../../components/ha-attributes\";\n\nimport LocalizeMixin from \"../../../mixins/localize-mixin\";\n\n/*\n * @appliesMixin LocalizeMixin\n */\nclass MoreInfoLock extends LocalizeMixin(PolymerElement) {\n  static get template() {\n    return html`\n      <style>\n        paper-input {\n          display: inline-block;\n        }\n      </style>\n\n      <template is=\"dom-if\" if=\"[[stateObj.attributes.code_format]]\">\n        <paper-input\n          label=\"[[localize('ui.card.lock.code')]]\"\n          value=\"{{enteredCode}}\"\n          pattern=\"[[stateObj.attributes.code_format]]\"\n          type=\"password\"\n        ></paper-input>\n        <mwc-button\n          on-click=\"callService\"\n          data-service=\"unlock\"\n          hidden$=\"[[!isLocked]]\"\n          >[[localize('ui.card.lock.unlock')]]</mwc-button\n        >\n        <mwc-button\n          on-click=\"callService\"\n          data-service=\"lock\"\n          hidden$=\"[[isLocked]]\"\n          >[[localize('ui.card.lock.lock')]]</mwc-button\n        >\n      </template>\n      <ha-attributes\n        state-obj=\"[[stateObj]]\"\n        extra-filters=\"code_format\"\n      ></ha-attributes>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      stateObj: {\n        type: Object,\n        observer: \"stateObjChanged\",\n      },\n      enteredCode: {\n        type: String,\n        value: \"\",\n      },\n      isLocked: Boolean,\n    };\n  }\n\n  stateObjChanged(newVal) {\n    if (newVal) {\n      this.isLocked = newVal.state === \"locked\";\n    }\n  }\n\n  callService(ev) {\n    const service = ev.target.getAttribute(\"data-service\");\n    const data = {\n      entity_id: this.stateObj.entity_id,\n      code: this.enteredCode,\n    };\n    this.hass.callService(\"lock\", service, data);\n  }\n}\n\ncustomElements.define(\"more-info-lock\", MoreInfoLock);\n","import \"@polymer/iron-flex-layout/iron-flex-layout-classes\";\nimport \"@polymer/iron-icon/iron-icon\";\nimport \"@polymer/paper-icon-button/paper-icon-button\";\nimport \"@polymer/paper-item/paper-item\";\nimport \"@polymer/paper-listbox/paper-listbox\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport \"../../../components/ha-paper-slider\";\nimport \"../../../components/ha-paper-dropdown-menu\";\nimport HassMediaPlayerEntity from \"../../../util/hass-media-player-model\";\n\nimport attributeClassNames from \"../../../common/entity/attribute_class_names\";\nimport isComponentLoaded from \"../../../common/config/is_component_loaded\";\nimport { EventsMixin } from \"../../../mixins/events-mixin\";\nimport LocalizeMixin from \"../../../mixins/localize-mixin\";\nimport { computeRTLDirection } from \"../../../common/util/compute_rtl\";\n\n/*\n * @appliesMixin LocalizeMixin\n * @appliesMixin EventsMixin\n */\nclass MoreInfoMediaPlayer extends LocalizeMixin(EventsMixin(PolymerElement)) {\n  static get template() {\n    return html`\n      <style include=\"iron-flex iron-flex-alignment\"></style>\n      <style>\n        .media-state {\n          text-transform: capitalize;\n        }\n\n        paper-icon-button[highlight] {\n          color: var(--accent-color);\n        }\n\n        .volume {\n          margin-bottom: 8px;\n\n          max-height: 0px;\n          overflow: hidden;\n          transition: max-height 0.5s ease-in;\n        }\n\n        .has-volume_level .volume {\n          max-height: 40px;\n        }\n\n        iron-icon.source-input {\n          padding: 7px;\n          margin-top: 15px;\n        }\n\n        ha-paper-dropdown-menu.source-input {\n          margin-left: 10px;\n        }\n\n        [hidden] {\n          display: none !important;\n        }\n\n        paper-item {\n          cursor: pointer;\n        }\n      </style>\n\n      <div class$=\"[[computeClassNames(stateObj)]]\">\n        <div class=\"layout horizontal\">\n          <div class=\"flex\">\n            <paper-icon-button\n              icon=\"hass:power\"\n              highlight$=\"[[playerObj.isOff]]\"\n              on-click=\"handleTogglePower\"\n              hidden$=\"[[computeHidePowerButton(playerObj)]]\"\n            ></paper-icon-button>\n          </div>\n          <div>\n            <template\n              is=\"dom-if\"\n              if=\"[[computeShowPlaybackControls(playerObj)]]\"\n            >\n              <paper-icon-button\n                icon=\"hass:skip-previous\"\n                on-click=\"handlePrevious\"\n                hidden$=\"[[!playerObj.supportsPreviousTrack]]\"\n              ></paper-icon-button>\n              <paper-icon-button\n                icon=\"[[computePlaybackControlIcon(playerObj)]]\"\n                on-click=\"handlePlaybackControl\"\n                hidden$=\"[[!computePlaybackControlIcon(playerObj)]]\"\n                highlight=\"\"\n              ></paper-icon-button>\n              <paper-icon-button\n                icon=\"hass:skip-next\"\n                on-click=\"handleNext\"\n                hidden$=\"[[!playerObj.supportsNextTrack]]\"\n              ></paper-icon-button>\n            </template>\n          </div>\n        </div>\n        <!-- VOLUME -->\n        <div\n          class=\"volume_buttons center horizontal layout\"\n          hidden$=\"[[computeHideVolumeButtons(playerObj)]]\"\n        >\n          <paper-icon-button\n            on-click=\"handleVolumeTap\"\n            icon=\"hass:volume-off\"\n          ></paper-icon-button>\n          <paper-icon-button\n            id=\"volumeDown\"\n            disabled$=\"[[playerObj.isMuted]]\"\n            on-mousedown=\"handleVolumeDown\"\n            on-touchstart=\"handleVolumeDown\"\n            on-touchend=\"handleVolumeTouchEnd\"\n            icon=\"hass:volume-medium\"\n          ></paper-icon-button>\n          <paper-icon-button\n            id=\"volumeUp\"\n            disabled$=\"[[playerObj.isMuted]]\"\n            on-mousedown=\"handleVolumeUp\"\n            on-touchstart=\"handleVolumeUp\"\n            on-touchend=\"handleVolumeTouchEnd\"\n            icon=\"hass:volume-high\"\n          ></paper-icon-button>\n        </div>\n        <div\n          class=\"volume center horizontal layout\"\n          hidden$=\"[[!playerObj.supportsVolumeSet]]\"\n        >\n          <paper-icon-button\n            on-click=\"handleVolumeTap\"\n            hidden$=\"[[playerObj.supportsVolumeButtons]]\"\n            icon=\"[[computeMuteVolumeIcon(playerObj)]]\"\n          ></paper-icon-button>\n          <ha-paper-slider\n            disabled$=\"[[playerObj.isMuted]]\"\n            min=\"0\"\n            max=\"100\"\n            value=\"[[playerObj.volumeSliderValue]]\"\n            on-change=\"volumeSliderChanged\"\n            class=\"flex\"\n            ignore-bar-touch=\"\"\n            dir=\"{{rtl}}\"\n          >\n          </ha-paper-slider>\n        </div>\n        <!-- SOURCE PICKER -->\n        <div\n          class=\"controls layout horizontal justified\"\n          hidden$=\"[[computeHideSelectSource(playerObj)]]\"\n        >\n          <iron-icon class=\"source-input\" icon=\"hass:login-variant\"></iron-icon>\n          <ha-paper-dropdown-menu\n            class=\"flex source-input\"\n            dynamic-align=\"\"\n            label-float=\"\"\n            label=\"[[localize('ui.card.media_player.source')]]\"\n          >\n            <paper-listbox\n              slot=\"dropdown-content\"\n              attr-for-selected=\"item-name\"\n              selected=\"[[playerObj.source]]\"\n              on-selected-changed=\"handleSourceChanged\"\n            >\n              <template is=\"dom-repeat\" items=\"[[playerObj.sourceList]]\">\n                <paper-item item-name$=\"[[item]]\">[[item]]</paper-item>\n              </template>\n            </paper-listbox>\n          </ha-paper-dropdown-menu>\n        </div>\n        <!-- SOUND MODE PICKER -->\n        <template is=\"dom-if\" if=\"[[!computeHideSelectSoundMode(playerObj)]]\">\n          <div class=\"controls layout horizontal justified\">\n            <iron-icon class=\"source-input\" icon=\"hass:music-note\"></iron-icon>\n            <ha-paper-dropdown-menu\n              class=\"flex source-input\"\n              dynamic-align\n              label-float\n              label=\"[[localize('ui.card.media_player.sound_mode')]]\"\n            >\n              <paper-listbox\n                slot=\"dropdown-content\"\n                attr-for-selected=\"item-name\"\n                selected=\"[[playerObj.soundMode]]\"\n                on-selected-changed=\"handleSoundModeChanged\"\n              >\n                <template is=\"dom-repeat\" items=\"[[playerObj.soundModeList]]\">\n                  <paper-item item-name$=\"[[item]]\">[[item]]</paper-item>\n                </template>\n              </paper-listbox>\n            </ha-paper-dropdown-menu>\n          </div>\n        </template>\n        <!-- TTS -->\n        <div\n          hidden$=\"[[computeHideTTS(ttsLoaded, playerObj)]]\"\n          class=\"layout horizontal end\"\n        >\n          <paper-input\n            id=\"ttsInput\"\n            label=\"[[localize('ui.card.media_player.text_to_speak')]]\"\n            class=\"flex\"\n            value=\"{{ttsMessage}}\"\n            on-keydown=\"ttsCheckForEnter\"\n          ></paper-input>\n          <paper-icon-button\n            icon=\"hass:send\"\n            on-click=\"sendTTS\"\n          ></paper-icon-button>\n        </div>\n      </div>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      stateObj: Object,\n      playerObj: {\n        type: Object,\n        computed: \"computePlayerObj(hass, stateObj)\",\n        observer: \"playerObjChanged\",\n      },\n\n      ttsLoaded: {\n        type: Boolean,\n        computed: \"computeTTSLoaded(hass)\",\n      },\n\n      ttsMessage: {\n        type: String,\n        value: \"\",\n      },\n\n      rtl: {\n        type: String,\n        computed: \"_computeRTLDirection(hass)\",\n      },\n    };\n  }\n\n  computePlayerObj(hass, stateObj) {\n    return new HassMediaPlayerEntity(hass, stateObj);\n  }\n\n  playerObjChanged(newVal, oldVal) {\n    if (oldVal) {\n      setTimeout(() => {\n        this.fire(\"iron-resize\");\n      }, 500);\n    }\n  }\n\n  computeClassNames(stateObj) {\n    return attributeClassNames(stateObj, [\"volume_level\"]);\n  }\n\n  computeMuteVolumeIcon(playerObj) {\n    return playerObj.isMuted ? \"hass:volume-off\" : \"hass:volume-high\";\n  }\n\n  computeHideVolumeButtons(playerObj) {\n    return !playerObj.supportsVolumeButtons || playerObj.isOff;\n  }\n\n  computeShowPlaybackControls(playerObj) {\n    return !playerObj.isOff && playerObj.hasMediaControl;\n  }\n\n  computePlaybackControlIcon(playerObj) {\n    if (playerObj.isPlaying) {\n      return playerObj.supportsPause ? \"hass:pause\" : \"hass:stop\";\n    }\n    if (playerObj.hasMediaControl || playerObj.isOff || playerObj.isIdle) {\n      if (\n        playerObj.hasMediaControl &&\n        playerObj.supportsPause &&\n        !playerObj.isPaused\n      ) {\n        return \"hass:play-pause\";\n      }\n      return playerObj.supportsPlay ? \"hass:play\" : null;\n    }\n    return \"\";\n  }\n\n  computeHidePowerButton(playerObj) {\n    return playerObj.isOff\n      ? !playerObj.supportsTurnOn\n      : !playerObj.supportsTurnOff;\n  }\n\n  computeHideSelectSource(playerObj) {\n    return (\n      playerObj.isOff ||\n      !playerObj.supportsSelectSource ||\n      !playerObj.sourceList\n    );\n  }\n\n  computeHideSelectSoundMode(playerObj) {\n    return (\n      playerObj.isOff ||\n      !playerObj.supportsSelectSoundMode ||\n      !playerObj.soundModeList\n    );\n  }\n\n  computeHideTTS(ttsLoaded, playerObj) {\n    return !ttsLoaded || !playerObj.supportsPlayMedia;\n  }\n\n  computeTTSLoaded(hass) {\n    return isComponentLoaded(hass, \"tts\");\n  }\n\n  handleTogglePower() {\n    this.playerObj.togglePower();\n  }\n\n  handlePrevious() {\n    this.playerObj.previousTrack();\n  }\n\n  handlePlaybackControl() {\n    this.playerObj.mediaPlayPause();\n  }\n\n  handleNext() {\n    this.playerObj.nextTrack();\n  }\n\n  handleSourceChanged(ev) {\n    if (!this.playerObj) return;\n\n    var oldVal = this.playerObj.source;\n    var newVal = ev.detail.value;\n\n    if (!newVal || oldVal === newVal) return;\n\n    this.playerObj.selectSource(newVal);\n  }\n\n  handleSoundModeChanged(ev) {\n    if (!this.playerObj) return;\n\n    var oldVal = this.playerObj.soundMode;\n    var newVal = ev.detail.value;\n\n    if (!newVal || oldVal === newVal) return;\n\n    this.playerObj.selectSoundMode(newVal);\n  }\n\n  handleVolumeTap() {\n    if (!this.playerObj.supportsVolumeMute) {\n      return;\n    }\n    this.playerObj.volumeMute(!this.playerObj.isMuted);\n  }\n\n  handleVolumeTouchEnd(ev) {\n    /* when touch ends, we must prevent this from\n     * becoming a mousedown, up, click by emulation */\n    ev.preventDefault();\n  }\n\n  handleVolumeUp() {\n    const obj = this.$.volumeUp;\n    this.handleVolumeWorker(\"volume_up\", obj, true);\n  }\n\n  handleVolumeDown() {\n    const obj = this.$.volumeDown;\n    this.handleVolumeWorker(\"volume_down\", obj, true);\n  }\n\n  handleVolumeWorker(service, obj, force) {\n    if (force || (obj !== undefined && obj.pointerDown)) {\n      this.playerObj.callService(service);\n      setTimeout(() => this.handleVolumeWorker(service, obj, false), 500);\n    }\n  }\n\n  volumeSliderChanged(ev) {\n    const volPercentage = parseFloat(ev.target.value);\n    const volume = volPercentage > 0 ? volPercentage / 100 : 0;\n    this.playerObj.setVolume(volume);\n  }\n\n  ttsCheckForEnter(ev) {\n    if (ev.keyCode === 13) this.sendTTS();\n  }\n\n  sendTTS() {\n    const services = this.hass.services.tts;\n    const serviceKeys = Object.keys(services).sort();\n    let service;\n    let i;\n\n    for (i = 0; i < serviceKeys.length; i++) {\n      if (serviceKeys[i].indexOf(\"_say\") !== -1) {\n        service = serviceKeys[i];\n        break;\n      }\n    }\n\n    if (!service) {\n      return;\n    }\n\n    this.hass.callService(\"tts\", service, {\n      entity_id: this.stateObj.entity_id,\n      message: this.ttsMessage,\n    });\n    this.ttsMessage = \"\";\n    this.$.ttsInput.focus();\n  }\n\n  _computeRTLDirection(hass) {\n    return computeRTLDirection(hass);\n  }\n}\n\ncustomElements.define(\"more-info-media_player\", MoreInfoMediaPlayer);\n","import \"@polymer/iron-flex-layout/iron-flex-layout-classes\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\nimport LocalizeMixin from \"../../../mixins/localize-mixin\";\n\nclass MoreInfoScript extends LocalizeMixin(PolymerElement) {\n  static get template() {\n    return html`\n      <style include=\"iron-flex iron-flex-alignment\"></style>\n\n      <div class=\"layout vertical\">\n        <div class=\"data-entry layout justified horizontal\">\n          <div class=\"key\">\n            [[localize('ui.dialogs.more_info_control.script.last_action')]]\n          </div>\n          <div class=\"value\">[[stateObj.attributes.last_action]]</div>\n        </div>\n      </div>\n    `;\n  }\n\n  static get properties() {\n    return {\n      stateObj: {\n        type: Object,\n      },\n    };\n  }\n}\n\ncustomElements.define(\"more-info-script\", MoreInfoScript);\n","import \"@polymer/iron-flex-layout/iron-flex-layout-classes\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport \"../../../components/ha-relative-time\";\n\nimport LocalizeMixin from \"../../../mixins/localize-mixin\";\nimport formatTime from \"../../../common/datetime/format_time\";\n\nclass MoreInfoSun extends LocalizeMixin(PolymerElement) {\n  static get template() {\n    return html`\n      <style include=\"iron-flex iron-flex-alignment\"></style>\n\n      <template\n        is=\"dom-repeat\"\n        items=\"[[computeOrder(risingDate, settingDate)]]\"\n      >\n        <div class=\"data-entry layout justified horizontal\">\n          <div class=\"key\">\n            <span>[[itemCaption(item)]]</span>\n            <ha-relative-time\n              hass=\"[[hass]]\"\n              datetime-obj=\"[[itemDate(item)]]\"\n            ></ha-relative-time>\n          </div>\n          <div class=\"value\">[[itemValue(item)]]</div>\n        </div>\n      </template>\n      <div class=\"data-entry layout justified horizontal\">\n        <div class=\"key\">\n          [[localize('ui.dialogs.more_info_control.sun.elevation')]]\n        </div>\n        <div class=\"value\">[[stateObj.attributes.elevation]]</div>\n      </div>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      stateObj: Object,\n      risingDate: {\n        type: Object,\n        computed: \"computeRising(stateObj)\",\n      },\n\n      settingDate: {\n        type: Object,\n        computed: \"computeSetting(stateObj)\",\n      },\n    };\n  }\n\n  computeRising(stateObj) {\n    return new Date(stateObj.attributes.next_rising);\n  }\n\n  computeSetting(stateObj) {\n    return new Date(stateObj.attributes.next_setting);\n  }\n\n  computeOrder(risingDate, settingDate) {\n    return risingDate > settingDate ? [\"set\", \"ris\"] : [\"ris\", \"set\"];\n  }\n\n  itemCaption(type) {\n    if (type === \"ris\") {\n      return this.localize(\"ui.dialogs.more_info_control.sun.rising\");\n    }\n    return this.localize(\"ui.dialogs.more_info_control.sun.setting\");\n  }\n\n  itemDate(type) {\n    return type === \"ris\" ? this.risingDate : this.settingDate;\n  }\n\n  itemValue(type) {\n    return formatTime(this.itemDate(type), this.hass.language);\n  }\n}\n\ncustomElements.define(\"more-info-sun\", MoreInfoSun);\n","import { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\nimport LocalizeMixin from \"../../../mixins/localize-mixin\";\n\nclass MoreInfoUpdater extends LocalizeMixin(PolymerElement) {\n  static get template() {\n    return html`\n      <style>\n        .link {\n          color: #03a9f4;\n        }\n      </style>\n\n      <div>\n        <a\n          class=\"link\"\n          href=\"https://www.home-assistant.io/docs/installation/updating/\"\n          target=\"_blank\"\n          >[[localize('ui.dialogs.more_info_control.updater.title')]]</a\n        >\n      </div>\n    `;\n  }\n\n  static get properties() {\n    return {\n      stateObj: {\n        type: Object,\n      },\n    };\n  }\n\n  computeReleaseNotes(stateObj) {\n    return (\n      stateObj.attributes.release_notes ||\n      \"https://www.home-assistant.io/docs/installation/updating/\"\n    );\n  }\n}\n\ncustomElements.define(\"more-info-updater\", MoreInfoUpdater);\n","import \"@polymer/iron-flex-layout/iron-flex-layout-classes\";\nimport \"@polymer/iron-icon/iron-icon\";\nimport \"@polymer/paper-icon-button/paper-icon-button\";\nimport \"@polymer/paper-item/paper-item\";\nimport \"@polymer/paper-listbox/paper-listbox\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport \"../../../components/ha-attributes\";\nimport \"../../../components/ha-paper-dropdown-menu\";\nimport { supportsFeature } from \"../../../common/entity/supports-feature\";\n\nclass MoreInfoVacuum extends PolymerElement {\n  static get template() {\n    return html`\n      <style include=\"iron-flex iron-flex-alignment\"></style>\n      <style>\n        :host {\n          @apply --paper-font-body1;\n          line-height: 1.5;\n        }\n\n        .status-subtitle {\n          color: var(--secondary-text-color);\n        }\n\n        paper-item {\n          cursor: pointer;\n        }\n      </style>\n\n      <div class=\"horizontal justified layout\">\n        <div hidden$=\"[[!supportsStatus(stateObj)]]\">\n          <span class=\"status-subtitle\">Status: </span\n          ><span><strong>[[stateObj.attributes.status]]</strong></span>\n        </div>\n        <div hidden$=\"[[!supportsBattery(stateObj)]]\">\n          <span\n            ><iron-icon icon=\"[[stateObj.attributes.battery_icon]]\"></iron-icon>\n            [[stateObj.attributes.battery_level]] %</span\n          >\n        </div>\n      </div>\n      <div hidden$=\"[[!supportsCommandBar(stateObj)]]\">\n        <p></p>\n        <div class=\"status-subtitle\">Vacuum cleaner commands:</div>\n        <div class=\"horizontal justified layout\">\n          <template is=\"dom-if\" if=\"[[supportsStart(stateObj)]]\">\n            <div>\n              <paper-icon-button\n                icon=\"hass:play\"\n                on-click=\"onStart\"\n                title=\"Start\"\n              ></paper-icon-button>\n            </div>\n            <div hidden$=\"[[!supportsPause(stateObj)]]\">\n              <paper-icon-button\n                icon=\"hass:pause\"\n                on-click=\"onPause\"\n                title=\"Pause\"\n              ></paper-icon-button>\n            </div>\n          </template>\n          <template is=\"dom-if\" if=\"[[!supportsStart(stateObj)]]\">\n            <div hidden$=\"[[!supportsPause(stateObj)]]\">\n              <paper-icon-button\n                icon=\"hass:play-pause\"\n                on-click=\"onPlayPause\"\n                title=\"Pause\"\n              ></paper-icon-button>\n            </div>\n          </template>\n\n          <div hidden$=\"[[!supportsStop(stateObj)]]\">\n            <paper-icon-button\n              icon=\"hass:stop\"\n              on-click=\"onStop\"\n              title=\"Stop\"\n            ></paper-icon-button>\n          </div>\n          <div hidden$=\"[[!supportsCleanSpot(stateObj)]]\">\n            <paper-icon-button\n              icon=\"hass:broom\"\n              on-click=\"onCleanSpot\"\n              title=\"Clean spot\"\n            ></paper-icon-button>\n          </div>\n          <div hidden$=\"[[!supportsLocate(stateObj)]]\">\n            <paper-icon-button\n              icon=\"hass:map-marker\"\n              on-click=\"onLocate\"\n              title=\"Locate\"\n            ></paper-icon-button>\n          </div>\n          <div hidden$=\"[[!supportsReturnHome(stateObj)]]\">\n            <paper-icon-button\n              icon=\"hass:home-map-marker\"\n              on-click=\"onReturnHome\"\n              title=\"Return home\"\n            ></paper-icon-button>\n          </div>\n        </div>\n      </div>\n\n      <div hidden$=\"[[!supportsFanSpeed(stateObj)]]\">\n        <div class=\"horizontal justified layout\">\n          <ha-paper-dropdown-menu\n            label-float=\"\"\n            dynamic-align=\"\"\n            label=\"Fan speed\"\n          >\n            <paper-listbox\n              slot=\"dropdown-content\"\n              selected=\"[[stateObj.attributes.fan_speed]]\"\n              on-selected-changed=\"fanSpeedChanged\"\n              attr-for-selected=\"item-name\"\n            >\n              <template\n                is=\"dom-repeat\"\n                items=\"[[stateObj.attributes.fan_speed_list]]\"\n              >\n                <paper-item item-name$=\"[[item]]\">[[item]]</paper-item>\n              </template>\n            </paper-listbox>\n          </ha-paper-dropdown-menu>\n          <div\n            style=\"justify-content: center; align-self: center; padding-top: 1.3em\"\n          >\n            <span\n              ><iron-icon icon=\"hass:fan\"></iron-icon>\n              [[stateObj.attributes.fan_speed]]</span\n            >\n          </div>\n        </div>\n        <p></p>\n      </div>\n      <ha-attributes\n        state-obj=\"[[stateObj]]\"\n        extra-filters=\"fan_speed,fan_speed_list,status,battery_level,battery_icon\"\n      ></ha-attributes>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: {\n        type: Object,\n      },\n\n      inDialog: {\n        type: Boolean,\n        value: false,\n      },\n\n      stateObj: {\n        type: Object,\n      },\n    };\n  }\n\n  supportsPause(stateObj) {\n    return supportsFeature(stateObj, 4);\n  }\n\n  supportsStop(stateObj) {\n    return supportsFeature(stateObj, 8);\n  }\n\n  supportsReturnHome(stateObj) {\n    return supportsFeature(stateObj, 16);\n  }\n\n  supportsFanSpeed(stateObj) {\n    return supportsFeature(stateObj, 32);\n  }\n\n  supportsBattery(stateObj) {\n    return supportsFeature(stateObj, 64);\n  }\n\n  supportsStatus(stateObj) {\n    return supportsFeature(stateObj, 128);\n  }\n\n  supportsLocate(stateObj) {\n    return supportsFeature(stateObj, 512);\n  }\n\n  supportsCleanSpot(stateObj) {\n    return supportsFeature(stateObj, 1024);\n  }\n\n  supportsStart(stateObj) {\n    return supportsFeature(stateObj, 8192);\n  }\n\n  supportsCommandBar(stateObj) {\n    return (\n      supportsFeature(stateObj, 4) |\n      supportsFeature(stateObj, 8) |\n      supportsFeature(stateObj, 16) |\n      supportsFeature(stateObj, 512) |\n      supportsFeature(stateObj, 1024) |\n      supportsFeature(stateObj, 8192)\n    );\n  }\n\n  fanSpeedChanged(ev) {\n    var oldVal = this.stateObj.attributes.fan_speed;\n    var newVal = ev.detail.value;\n\n    if (!newVal || oldVal === newVal) return;\n\n    this.hass.callService(\"vacuum\", \"set_fan_speed\", {\n      entity_id: this.stateObj.entity_id,\n      fan_speed: newVal,\n    });\n  }\n\n  onStop() {\n    this.hass.callService(\"vacuum\", \"stop\", {\n      entity_id: this.stateObj.entity_id,\n    });\n  }\n\n  onPlayPause() {\n    this.hass.callService(\"vacuum\", \"start_pause\", {\n      entity_id: this.stateObj.entity_id,\n    });\n  }\n\n  onPause() {\n    this.hass.callService(\"vacuum\", \"pause\", {\n      entity_id: this.stateObj.entity_id,\n    });\n  }\n\n  onStart() {\n    this.hass.callService(\"vacuum\", \"start\", {\n      entity_id: this.stateObj.entity_id,\n    });\n  }\n\n  onLocate() {\n    this.hass.callService(\"vacuum\", \"locate\", {\n      entity_id: this.stateObj.entity_id,\n    });\n  }\n\n  onCleanSpot() {\n    this.hass.callService(\"vacuum\", \"clean_spot\", {\n      entity_id: this.stateObj.entity_id,\n    });\n  }\n\n  onReturnHome() {\n    this.hass.callService(\"vacuum\", \"return_to_base\", {\n      entity_id: this.stateObj.entity_id,\n    });\n  }\n}\n\ncustomElements.define(\"more-info-vacuum\", MoreInfoVacuum);\n","import \"@polymer/iron-flex-layout/iron-flex-layout-classes\";\nimport \"@polymer/paper-item/paper-item\";\nimport \"@polymer/paper-listbox/paper-listbox\";\nimport \"@polymer/paper-toggle-button/paper-toggle-button\";\nimport { timeOut } from \"@polymer/polymer/lib/utils/async\";\nimport { Debouncer } from \"@polymer/polymer/lib/utils/debounce\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport \"../../../components/ha-water_heater-control\";\nimport \"../../../components/ha-paper-slider\";\nimport \"../../../components/ha-paper-dropdown-menu\";\n\nimport featureClassNames from \"../../../common/entity/feature_class_names\";\nimport { supportsFeature } from \"../../../common/entity/supports-feature\";\n\nimport { EventsMixin } from \"../../../mixins/events-mixin\";\nimport LocalizeMixin from \"../../../mixins/localize-mixin\";\n\n/*\n * @appliesMixin EventsMixin\n * @appliesMixin LocalizeMixin\n */\nclass MoreInfoWaterHeater extends LocalizeMixin(EventsMixin(PolymerElement)) {\n  static get template() {\n    return html`\n      <style include=\"iron-flex\"></style>\n      <style>\n        :host {\n          color: var(--primary-text-color);\n        }\n\n        .container-away_mode,\n        .container-temperature,\n        .container-operation_list,\n\n        .has-away_mode .container-away_mode,\n        .has-target_temperature .container-temperature,\n        .has-operation_mode .container-operation_list,\n\n        .container-operation_list iron-icon,\n\n        ha-paper-dropdown-menu {\n          width: 100%;\n        }\n\n        paper-item {\n          cursor: pointer;\n        }\n\n        ha-paper-slider {\n          width: 100%;\n        }\n\n        ha-water_heater-control.range-control-left,\n        ha-water_heater-control.range-control-right {\n          float: left;\n          width: 46%;\n        }\n        ha-water_heater-control.range-control-left {\n          margin-right: 4%;\n        }\n        ha-water_heater-control.range-control-right {\n          margin-left: 4%;\n        }\n\n        .single-row {\n          padding: 8px 0;\n        }\n        }\n      </style>\n\n      <div class$=\"[[computeClassNames(stateObj)]]\">\n        <div class=\"container-temperature\">\n          <div class$=\"[[stateObj.attributes.operation_mode]]\">\n            <div hidden$=\"[[!supportsTemperatureControls(stateObj)]]\">\n              [[localize('ui.card.water_heater.target_temperature')]]\n            </div>\n            <template is=\"dom-if\" if=\"[[supportsTemperature(stateObj)]]\">\n              <ha-water_heater-control\n                value=\"[[stateObj.attributes.temperature]]\"\n                units=\"[[hass.config.unit_system.temperature]]\"\n                step=\"[[computeTemperatureStepSize(hass, stateObj)]]\"\n                min=\"[[stateObj.attributes.min_temp]]\"\n                max=\"[[stateObj.attributes.max_temp]]\"\n                on-change=\"targetTemperatureChanged\"\n              >\n              </ha-water_heater-control>\n            </template>\n          </div>\n        </div>\n\n        <template is=\"dom-if\" if=\"[[supportsOperationMode(stateObj)]]\">\n          <div class=\"container-operation_list\">\n            <div class=\"controls\">\n              <ha-paper-dropdown-menu\n                label-float=\"\"\n                dynamic-align=\"\"\n                label=\"[[localize('ui.card.water_heater.operation')]]\"\n              >\n                <paper-listbox\n                  slot=\"dropdown-content\"\n                  selected=\"[[stateObj.attributes.operation_mode]]\"\n                  attr-for-selected=\"item-name\"\n                  on-selected-changed=\"handleOperationmodeChanged\"\n                >\n                  <template\n                    is=\"dom-repeat\"\n                    items=\"[[stateObj.attributes.operation_list]]\"\n                  >\n                    <paper-item item-name$=\"[[item]]\"\n                      >[[_localizeOperationMode(localize, item)]]</paper-item\n                    >\n                  </template>\n                </paper-listbox>\n              </ha-paper-dropdown-menu>\n            </div>\n          </div>\n        </template>\n\n        <template is=\"dom-if\" if=\"[[supportsAwayMode(stateObj)]]\">\n          <div class=\"container-away_mode\">\n            <div class=\"center horizontal layout single-row\">\n              <div class=\"flex\">\n                [[localize('ui.card.water_heater.away_mode')]]\n              </div>\n              <paper-toggle-button\n                checked=\"[[awayToggleChecked]]\"\n                on-change=\"awayToggleChanged\"\n              >\n              </paper-toggle-button>\n            </div>\n          </div>\n        </template>\n      </div>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: {\n        type: Object,\n      },\n\n      stateObj: {\n        type: Object,\n        observer: \"stateObjChanged\",\n      },\n\n      awayToggleChecked: Boolean,\n    };\n  }\n\n  stateObjChanged(newVal, oldVal) {\n    if (newVal) {\n      this.setProperties({\n        awayToggleChecked: newVal.attributes.away_mode === \"on\",\n      });\n    }\n\n    if (oldVal) {\n      this._debouncer = Debouncer.debounce(\n        this._debouncer,\n        timeOut.after(500),\n        () => {\n          this.fire(\"iron-resize\");\n        }\n      );\n    }\n  }\n\n  computeTemperatureStepSize(hass, stateObj) {\n    if (stateObj.attributes.target_temp_step) {\n      return stateObj.attributes.target_temp_step;\n    }\n    if (hass.config.unit_system.temperature.indexOf(\"F\") !== -1) {\n      return 1;\n    }\n    return 0.5;\n  }\n\n  supportsTemperatureControls(stateObj) {\n    return this.supportsTemperature(stateObj);\n  }\n\n  supportsTemperature(stateObj) {\n    return (\n      supportsFeature(stateObj, 1) &&\n      typeof stateObj.attributes.temperature === \"number\"\n    );\n  }\n\n  supportsOperationMode(stateObj) {\n    return supportsFeature(stateObj, 2);\n  }\n\n  supportsAwayMode(stateObj) {\n    return supportsFeature(stateObj, 4);\n  }\n\n  computeClassNames(stateObj) {\n    const _featureClassNames = {\n      1: \"has-target_temperature\",\n      2: \"has-operation_mode\",\n      4: \"has-away_mode\",\n    };\n\n    var classes = [featureClassNames(stateObj, _featureClassNames)];\n\n    classes.push(\"more-info-water_heater\");\n\n    return classes.join(\" \");\n  }\n\n  targetTemperatureChanged(ev) {\n    const temperature = ev.target.value;\n    if (temperature === this.stateObj.attributes.temperature) return;\n    this.callServiceHelper(\"set_temperature\", { temperature: temperature });\n  }\n\n  awayToggleChanged(ev) {\n    const oldVal = this.stateObj.attributes.away_mode === \"on\";\n    const newVal = ev.target.checked;\n    if (oldVal === newVal) return;\n    this.callServiceHelper(\"set_away_mode\", { away_mode: newVal });\n  }\n\n  handleOperationmodeChanged(ev) {\n    const oldVal = this.stateObj.attributes.operation_mode;\n    const newVal = ev.detail.value;\n    if (!newVal || oldVal === newVal) return;\n    this.callServiceHelper(\"set_operation_mode\", {\n      operation_mode: newVal,\n    });\n  }\n\n  callServiceHelper(service, data) {\n    // We call stateChanged after a successful call to re-sync the inputs\n    // with the state. It will be out of sync if our service call did not\n    // result in the entity to be turned on. Since the state is not changing,\n    // the resync is not called automatic.\n    /* eslint-disable no-param-reassign */\n    data.entity_id = this.stateObj.entity_id;\n    /* eslint-enable no-param-reassign */\n    this.hass.callService(\"water_heater\", service, data).then(() => {\n      this.stateObjChanged(this.stateObj);\n    });\n  }\n\n  _localizeOperationMode(localize, mode) {\n    return localize(`state.water_heater.${mode}`) || mode;\n  }\n}\n\ncustomElements.define(\"more-info-water_heater\", MoreInfoWaterHeater);\n","import \"@polymer/iron-icon/iron-icon\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport LocalizeMixin from \"../../../mixins/localize-mixin\";\n\n/*\n * @appliesMixin LocalizeMixin\n */\nclass MoreInfoWeather extends LocalizeMixin(PolymerElement) {\n  static get template() {\n    return html`\n      <style>\n        iron-icon {\n          color: var(--paper-item-icon-color);\n        }\n        .section {\n          margin: 16px 0 8px 0;\n          font-size: 1.2em;\n        }\n\n        .flex {\n          display: flex;\n          height: 32px;\n          align-items: center;\n        }\n\n        .main {\n          flex: 1;\n          margin-left: 24px;\n        }\n\n        .temp,\n        .templow {\n          min-width: 48px;\n          text-align: right;\n        }\n\n        .templow {\n          margin: 0 16px;\n          color: var(--secondary-text-color);\n        }\n\n        .attribution {\n          color: var(--secondary-text-color);\n          text-align: center;\n        }\n      </style>\n\n      <div class=\"flex\">\n        <iron-icon icon=\"hass:thermometer\"></iron-icon>\n        <div class=\"main\">\n          [[localize('ui.card.weather.attributes.temperature')]]\n        </div>\n        <div>\n          [[stateObj.attributes.temperature]] [[getUnit('temperature')]]\n        </div>\n      </div>\n      <template is=\"dom-if\" if=\"[[_showValue(stateObj.attributes.pressure)]]\">\n        <div class=\"flex\">\n          <iron-icon icon=\"hass:gauge\"></iron-icon>\n          <div class=\"main\">\n            [[localize('ui.card.weather.attributes.air_pressure')]]\n          </div>\n          <div>\n            [[stateObj.attributes.pressure]] [[getUnit('air_pressure')]]\n          </div>\n        </div>\n      </template>\n      <template is=\"dom-if\" if=\"[[_showValue(stateObj.attributes.humidity)]]\">\n        <div class=\"flex\">\n          <iron-icon icon=\"hass:water-percent\"></iron-icon>\n          <div class=\"main\">\n            [[localize('ui.card.weather.attributes.humidity')]]\n          </div>\n          <div>[[stateObj.attributes.humidity]] %</div>\n        </div>\n      </template>\n      <template is=\"dom-if\" if=\"[[_showValue(stateObj.attributes.wind_speed)]]\">\n        <div class=\"flex\">\n          <iron-icon icon=\"hass:weather-windy\"></iron-icon>\n          <div class=\"main\">\n            [[localize('ui.card.weather.attributes.wind_speed')]]\n          </div>\n          <div>\n            [[getWind(stateObj.attributes.wind_speed,\n            stateObj.attributes.wind_bearing, localize)]]\n          </div>\n        </div>\n      </template>\n      <template is=\"dom-if\" if=\"[[_showValue(stateObj.attributes.visibility)]]\">\n        <div class=\"flex\">\n          <iron-icon icon=\"hass:eye\"></iron-icon>\n          <div class=\"main\">\n            [[localize('ui.card.weather.attributes.visibility')]]\n          </div>\n          <div>[[stateObj.attributes.visibility]] [[getUnit('length')]]</div>\n        </div>\n      </template>\n\n      <template is=\"dom-if\" if=\"[[stateObj.attributes.forecast]]\">\n        <div class=\"section\">[[localize('ui.card.weather.forecast')]]:</div>\n        <template is=\"dom-repeat\" items=\"[[stateObj.attributes.forecast]]\">\n          <div class=\"flex\">\n            <template is=\"dom-if\" if=\"[[_showValue(item.condition)]]\">\n              <iron-icon icon=\"[[getWeatherIcon(item.condition)]]\"></iron-icon>\n            </template>\n            <template is=\"dom-if\" if=\"[[!_showValue(item.templow)]]\">\n              <div class=\"main\">[[computeDateTime(item.datetime)]]</div>\n            </template>\n            <template is=\"dom-if\" if=\"[[_showValue(item.templow)]]\">\n              <div class=\"main\">[[computeDate(item.datetime)]]</div>\n              <div class=\"templow\">\n                [[item.templow]] [[getUnit('temperature')]]\n              </div>\n            </template>\n            <div class=\"temp\">\n              [[item.temperature]] [[getUnit('temperature')]]\n            </div>\n          </div>\n        </template>\n      </template>\n\n      <template is=\"dom-if\" if=\"stateObj.attributes.attribution\">\n        <div class=\"attribution\">[[stateObj.attributes.attribution]]</div>\n      </template>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      stateObj: Object,\n    };\n  }\n\n  constructor() {\n    super();\n    this.cardinalDirections = [\n      \"N\",\n      \"NNE\",\n      \"NE\",\n      \"ENE\",\n      \"E\",\n      \"ESE\",\n      \"SE\",\n      \"SSE\",\n      \"S\",\n      \"SSW\",\n      \"SW\",\n      \"WSW\",\n      \"W\",\n      \"WNW\",\n      \"NW\",\n      \"NNW\",\n      \"N\",\n    ];\n    this.weatherIcons = {\n      \"clear-night\": \"hass:weather-night\",\n      cloudy: \"hass:weather-cloudy\",\n      fog: \"hass:weather-fog\",\n      hail: \"hass:weather-hail\",\n      lightning: \"hass:weather-lightning\",\n      \"lightning-rainy\": \"hass:weather-lightning-rainy\",\n      partlycloudy: \"hass:weather-partlycloudy\",\n      pouring: \"hass:weather-pouring\",\n      rainy: \"hass:weather-rainy\",\n      snowy: \"hass:weather-snowy\",\n      \"snowy-rainy\": \"hass:weather-snowy-rainy\",\n      sunny: \"hass:weather-sunny\",\n      windy: \"hass:weather-windy\",\n      \"windy-variant\": \"hass:weather-windy-variant\",\n    };\n  }\n\n  computeDate(data) {\n    const date = new Date(data);\n    return date.toLocaleDateString(this.hass.language, {\n      weekday: \"long\",\n      month: \"short\",\n      day: \"numeric\",\n    });\n  }\n\n  computeDateTime(data) {\n    const date = new Date(data);\n    return date.toLocaleDateString(this.hass.language, {\n      weekday: \"long\",\n      hour: \"numeric\",\n    });\n  }\n\n  getUnit(measure) {\n    const lengthUnit = this.hass.config.unit_system.length || \"\";\n    switch (measure) {\n      case \"air_pressure\":\n        return lengthUnit === \"km\" ? \"hPa\" : \"inHg\";\n      case \"length\":\n        return lengthUnit;\n      case \"precipitation\":\n        return lengthUnit === \"km\" ? \"mm\" : \"in\";\n      default:\n        return this.hass.config.unit_system[measure] || \"\";\n    }\n  }\n\n  windBearingToText(degree) {\n    const degreenum = parseInt(degree);\n    if (isFinite(degreenum)) {\n      return this.cardinalDirections[(((degreenum + 11.25) / 22.5) | 0) % 16];\n    }\n    return degree;\n  }\n\n  getWind(speed, bearing, localize) {\n    if (bearing != null) {\n      const cardinalDirection = this.windBearingToText(bearing);\n      return `${speed} ${this.getUnit(\"length\")}/h (${localize(\n        `ui.card.weather.cardinal_direction.${cardinalDirection.toLowerCase()}`\n      ) || cardinalDirection})`;\n    }\n    return `${speed} ${this.getUnit(\"length\")}/h`;\n  }\n\n  getWeatherIcon(condition) {\n    return this.weatherIcons[condition];\n  }\n\n  _showValue(item) {\n    return typeof item !== \"undefined\" && item !== null;\n  }\n}\n\ncustomElements.define(\"more-info-weather\", MoreInfoWeather);\n","import \"@polymer/app-layout/app-toolbar/app-toolbar\";\nimport \"@polymer/paper-dialog-scrollable/paper-dialog-scrollable\";\nimport \"@polymer/paper-icon-button/paper-icon-button\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport \"../../components/state-history-charts\";\nimport \"../../data/ha-state-history-data\";\nimport \"../../resources/ha-style\";\nimport \"../../state-summary/state-card-content\";\n\nimport \"./controls/more-info-content\";\n\nimport computeStateName from \"../../common/entity/compute_state_name\";\nimport computeStateDomain from \"../../common/entity/compute_state_domain\";\nimport isComponentLoaded from \"../../common/config/is_component_loaded\";\nimport { DOMAINS_MORE_INFO_NO_HISTORY } from \"../../common/const\";\nimport { EventsMixin } from \"../../mixins/events-mixin\";\nimport { computeRTL } from \"../../common/util/compute_rtl\";\n\nconst DOMAINS_NO_INFO = [\"camera\", \"configurator\", \"history_graph\"];\n/*\n * @appliesMixin EventsMixin\n */\nclass MoreInfoControls extends EventsMixin(PolymerElement) {\n  static get template() {\n    return html`\n      <style include=\"ha-style-dialog\">\n        app-toolbar {\n          color: var(--more-info-header-color);\n          background-color: var(--more-info-header-background);\n        }\n\n        app-toolbar [main-title] {\n          @apply --ha-more-info-app-toolbar-title;\n        }\n\n        state-card-content {\n          display: block;\n          padding: 16px;\n        }\n\n        state-history-charts {\n          max-width: 100%;\n          margin-bottom: 16px;\n        }\n\n        @media all and (min-width: 451px) and (min-height: 501px) {\n          .main-title {\n            pointer-events: auto;\n            cursor: default;\n          }\n        }\n\n        paper-dialog-scrollable {\n          padding-bottom: 16px;\n        }\n\n        :host([domain=\"camera\"]) paper-dialog-scrollable {\n          margin: 0 -24px -21px;\n        }\n\n        :host([rtl]) app-toolbar {\n          direction: rtl;\n          text-align: right;\n        }\n      </style>\n\n      <app-toolbar>\n        <paper-icon-button\n          icon=\"hass:close\"\n          dialog-dismiss=\"\"\n        ></paper-icon-button>\n        <div class=\"main-title\" main-title=\"\" on-click=\"enlarge\">\n          [[_computeStateName(stateObj)]]\n        </div>\n        <template is=\"dom-if\" if=\"[[canConfigure]]\">\n          <paper-icon-button\n            icon=\"hass:settings\"\n            on-click=\"_gotoSettings\"\n          ></paper-icon-button>\n        </template>\n      </app-toolbar>\n\n      <template is=\"dom-if\" if=\"[[_computeShowStateInfo(stateObj)]]\" restamp=\"\">\n        <state-card-content\n          state-obj=\"[[stateObj]]\"\n          hass=\"[[hass]]\"\n          in-dialog=\"\"\n        ></state-card-content>\n      </template>\n      <paper-dialog-scrollable dialog-element=\"[[dialogElement]]\">\n        <template\n          is=\"dom-if\"\n          if=\"[[_computeShowHistoryComponent(hass, stateObj)]]\"\n          restamp=\"\"\n        >\n          <ha-state-history-data\n            hass=\"[[hass]]\"\n            filter-type=\"recent-entity\"\n            entity-id=\"[[stateObj.entity_id]]\"\n            data=\"{{_stateHistory}}\"\n            is-loading=\"{{_stateHistoryLoading}}\"\n            cache-config=\"[[_cacheConfig]]\"\n          ></ha-state-history-data>\n          <state-history-charts\n            hass=\"[[hass]]\"\n            history-data=\"[[_stateHistory]]\"\n            is-loading-data=\"[[_stateHistoryLoading]]\"\n            up-to-now\n          ></state-history-charts>\n        </template>\n        <more-info-content\n          state-obj=\"[[stateObj]]\"\n          hass=\"[[hass]]\"\n        ></more-info-content>\n      </paper-dialog-scrollable>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n\n      stateObj: {\n        type: Object,\n        observer: \"_stateObjChanged\",\n      },\n\n      dialogElement: Object,\n      canConfigure: Boolean,\n\n      domain: {\n        type: String,\n        reflectToAttribute: true,\n        computed: \"_computeDomain(stateObj)\",\n      },\n\n      _stateHistory: Object,\n      _stateHistoryLoading: Boolean,\n\n      large: {\n        type: Boolean,\n        value: false,\n        notify: true,\n      },\n\n      _cacheConfig: {\n        type: Object,\n        value: {\n          refresh: 60,\n          cacheKey: null,\n          hoursToShow: 24,\n        },\n      },\n      rtl: {\n        type: Boolean,\n        reflectToAttribute: true,\n        computed: \"_computeRTL(hass)\",\n      },\n    };\n  }\n\n  enlarge() {\n    this.large = !this.large;\n  }\n\n  _computeShowStateInfo(stateObj) {\n    return !stateObj || !DOMAINS_NO_INFO.includes(computeStateDomain(stateObj));\n  }\n\n  _computeShowHistoryComponent(hass, stateObj) {\n    return (\n      hass &&\n      stateObj &&\n      isComponentLoaded(hass, \"history\") &&\n      !DOMAINS_MORE_INFO_NO_HISTORY.includes(computeStateDomain(stateObj))\n    );\n  }\n\n  _computeDomain(stateObj) {\n    return stateObj ? computeStateDomain(stateObj) : \"\";\n  }\n\n  _computeStateName(stateObj) {\n    return stateObj ? computeStateName(stateObj) : \"\";\n  }\n\n  _stateObjChanged(newVal) {\n    if (!newVal) {\n      return;\n    }\n\n    if (this._cacheConfig.cacheKey !== `more_info.${newVal.entity_id}`) {\n      this._cacheConfig = Object.assign({}, this._cacheConfig, {\n        cacheKey: `more_info.${newVal.entity_id}`,\n      });\n    }\n  }\n\n  _gotoSettings() {\n    this.fire(\"more-info-page\", { page: \"settings\" });\n  }\n\n  _computeRTL(hass) {\n    return computeRTL(hass);\n  }\n}\ncustomElements.define(\"more-info-controls\", MoreInfoControls);\n","import \"@polymer/app-layout/app-toolbar/app-toolbar\";\nimport \"@material/mwc-button\";\nimport \"@polymer/paper-icon-button/paper-icon-button\";\nimport \"@polymer/paper-input/paper-input\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport { EventsMixin } from \"../../mixins/events-mixin\";\nimport LocalizeMixin from \"../../mixins/localize-mixin\";\n\nimport computeStateName from \"../../common/entity/compute_state_name\";\nimport computeDomain from \"../../common/entity/compute_domain\";\nimport { updateEntityRegistryEntry } from \"../../data/entity_registry\";\n\nimport \"../../components/ha-paper-icon-button-arrow-prev\";\n/*\n * @appliesMixin EventsMixin\n * @appliesMixin LocalizeMixin\n */\nclass MoreInfoSettings extends LocalizeMixin(EventsMixin(PolymerElement)) {\n  static get template() {\n    return html`\n      <style>\n        app-toolbar {\n          color: var(--more-info-header-color);\n          background-color: var(--more-info-header-background);\n\n          /* to fit save button */\n          padding-right: 0;\n        }\n\n        app-toolbar [main-title] {\n          @apply --ha-more-info-app-toolbar-title;\n        }\n\n        app-toolbar mwc-button {\n          font-size: 0.8em;\n          margin: 0;\n        }\n\n        .form {\n          padding: 0 24px 24px;\n        }\n      </style>\n\n      <app-toolbar>\n        <ha-paper-icon-button-arrow-prev\n          on-click=\"_backTapped\"\n        ></ha-paper-icon-button-arrow-prev>\n        <div main-title=\"\">[[_computeStateName(stateObj)]]</div>\n        <mwc-button on-click=\"_save\" disabled=\"[[_computeInvalid(_entityId)]]\"\n          >[[localize('ui.dialogs.more_info_settings.save')]]</mwc-button\n        >\n      </app-toolbar>\n\n      <div class=\"form\">\n        <paper-input\n          value=\"{{_name}}\"\n          label=\"[[localize('ui.dialogs.more_info_settings.name')]]\"\n        ></paper-input>\n        <paper-input\n          value=\"{{_entityId}}\"\n          label=\"[[localize('ui.dialogs.more_info_settings.entity_id')]]\"\n          error-message=\"Domain needs to stay the same\"\n          invalid=\"[[_computeInvalid(_entityId)]]\"\n        ></paper-input>\n      </div>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      stateObj: Object,\n\n      registryInfo: {\n        type: Object,\n        observer: \"_registryInfoChanged\",\n        notify: true,\n      },\n\n      _name: String,\n      _entityId: String,\n    };\n  }\n\n  _computeStateName(stateObj) {\n    if (!stateObj) return \"\";\n    return computeStateName(stateObj);\n  }\n\n  _computeInvalid(entityId) {\n    return computeDomain(this.stateObj.entity_id) !== computeDomain(entityId);\n  }\n\n  _registryInfoChanged(newVal) {\n    if (newVal) {\n      this.setProperties({\n        _name: newVal.name,\n        _entityId: newVal.entity_id,\n      });\n    } else {\n      this.setProperties({\n        _name: \"\",\n        _entityId: \"\",\n      });\n    }\n  }\n\n  _backTapped() {\n    this.fire(\"more-info-page\", { page: null });\n  }\n\n  async _save() {\n    try {\n      const info = await updateEntityRegistryEntry(\n        this.hass,\n        this.stateObj.entity_id,\n        {\n          name: this._name,\n          new_entity_id: this._entityId,\n        }\n      );\n\n      this.registryInfo = info;\n\n      // Keep the more info dialog open at the new entity.\n      if (this.stateObj.entity_id !== this._entityId) {\n        this.fire(\"hass-more-info\", { entityId: this._entityId });\n      }\n    } catch (err) {\n      alert(`save failed: ${err.message}`);\n    }\n  }\n}\ncustomElements.define(\"more-info-settings\", MoreInfoSettings);\n","import { dedupingMixin } from \"@polymer/polymer/lib/utils/mixin\";\nimport { PaperDialogBehavior } from \"@polymer/paper-dialog-behavior/paper-dialog-behavior\";\nimport { mixinBehaviors } from \"@polymer/polymer/lib/legacy/class\";\nimport { EventsMixin } from \"./events-mixin\";\n/**\n * @polymerMixin\n * @appliesMixin EventsMixin\n * @appliesMixin PaperDialogBehavior\n */\nexport default dedupingMixin(\n  (superClass) =>\n    class extends mixinBehaviors(\n      [EventsMixin, PaperDialogBehavior],\n      superClass\n    ) {\n      static get properties() {\n        return {\n          withBackdrop: {\n            type: Boolean,\n            value: true,\n          },\n        };\n      }\n    }\n);\n","import \"@polymer/iron-flex-layout/iron-flex-layout-classes\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport \"../components/entity/state-info\";\nimport \"../components/ha-climate-state\";\n\nclass StateCardClimate extends PolymerElement {\n  static get template() {\n    return html`\n      <style include=\"iron-flex iron-flex-alignment\"></style>\n      <style>\n        :host {\n          @apply --paper-font-body1;\n          line-height: 1.5;\n        }\n\n        ha-climate-state {\n          margin-left: 16px;\n          text-align: right;\n        }\n      </style>\n\n      <div class=\"horizontal justified layout\">\n        ${this.stateInfoTemplate}\n        <ha-climate-state\n          hass=\"[[hass]]\"\n          state-obj=\"[[stateObj]]\"\n        ></ha-climate-state>\n      </div>\n    `;\n  }\n\n  static get stateInfoTemplate() {\n    return html`\n      <state-info\n        hass=\"[[hass]]\"\n        state-obj=\"[[stateObj]]\"\n        in-dialog=\"[[inDialog]]\"\n      ></state-info>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      stateObj: Object,\n      inDialog: {\n        type: Boolean,\n        value: false,\n      },\n    };\n  }\n}\ncustomElements.define(\"state-card-climate\", StateCardClimate);\n","import \"@polymer/iron-flex-layout/iron-flex-layout-classes\";\nimport \"@material/mwc-button\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport \"../components/entity/state-info\";\n\nimport LocalizeMixin from \"../mixins/localize-mixin\";\n\n/*\n * @appliesMixin LocalizeMixin\n */\nclass StateCardConfigurator extends LocalizeMixin(PolymerElement) {\n  static get template() {\n    return html`\n      <style include=\"iron-flex iron-flex-alignment\"></style>\n      <style>\n        mwc-button {\n          top: 3px;\n          height: 37px;\n          margin-right: -0.57em;\n        }\n      </style>\n\n      <div class=\"horizontal justified layout\">\n        ${this.stateInfoTemplate}\n        <mwc-button hidden$=\"[[inDialog]]\"\n          >[[_localizeState(stateObj.state)]]</mwc-button\n        >\n      </div>\n\n      <!-- pre load the image so the dialog is rendered the proper size -->\n      <template is=\"dom-if\" if=\"[[stateObj.attributes.description_image]]\">\n        <img hidden=\"\" src=\"[[stateObj.attributes.description_image]]\" />\n      </template>\n    `;\n  }\n\n  static get stateInfoTemplate() {\n    return html`\n      <state-info\n        hass=\"[[hass]]\"\n        state-obj=\"[[stateObj]]\"\n        in-dialog=\"[[inDialog]]\"\n      ></state-info>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      stateObj: Object,\n      inDialog: {\n        type: Boolean,\n        value: false,\n      },\n    };\n  }\n\n  _localizeState(state) {\n    return this.localize(`state.configurator.${state}`);\n  }\n}\ncustomElements.define(\"state-card-configurator\", StateCardConfigurator);\n","import { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport \"./state-card-climate\";\nimport \"./state-card-configurator\";\nimport \"./state-card-cover\";\nimport \"./state-card-display\";\nimport \"./state-card-input_number\";\nimport \"./state-card-input_select\";\nimport \"./state-card-input_text\";\nimport \"./state-card-lock\";\nimport \"./state-card-media_player\";\nimport \"./state-card-scene\";\nimport \"./state-card-script\";\nimport \"./state-card-timer\";\nimport \"./state-card-toggle\";\nimport \"./state-card-vacuum\";\nimport \"./state-card-water_heater\";\nimport \"./state-card-weblink\";\n\nimport stateCardType from \"../common/entity/state_card_type\";\nimport dynamicContentUpdater from \"../common/dom/dynamic_content_updater\";\n\nclass StateCardContent extends PolymerElement {\n  static get properties() {\n    return {\n      hass: Object,\n      stateObj: Object,\n      inDialog: {\n        type: Boolean,\n        value: false,\n      },\n    };\n  }\n\n  static get observers() {\n    return [\"inputChanged(hass, inDialog, stateObj)\"];\n  }\n\n  inputChanged(hass, inDialog, stateObj) {\n    let stateCard;\n    if (!stateObj || !hass) return;\n    if (stateObj.attributes && \"custom_ui_state_card\" in stateObj.attributes) {\n      stateCard = stateObj.attributes.custom_ui_state_card;\n    } else {\n      stateCard = \"state-card-\" + stateCardType(hass, stateObj);\n    }\n    dynamicContentUpdater(this, stateCard.toUpperCase(), {\n      hass: hass,\n      stateObj: stateObj,\n      inDialog: inDialog,\n    });\n  }\n}\ncustomElements.define(\"state-card-content\", StateCardContent);\n","import \"@polymer/iron-flex-layout/iron-flex-layout-classes\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport \"../components/entity/state-info\";\nimport \"../components/ha-cover-controls\";\nimport \"../components/ha-cover-tilt-controls\";\nimport CoverEntity from \"../util/cover-model\";\n\nclass StateCardCover extends PolymerElement {\n  static get template() {\n    return html`\n      <style include=\"iron-flex iron-flex-alignment\"></style>\n      <style>\n        :host {\n          line-height: 1.5;\n        }\n      </style>\n\n      <div class=\"horizontal justified layout\">\n        ${this.stateInfoTemplate}\n        <div class=\"horizontal layout\">\n          <ha-cover-controls\n            hidden$=\"[[entityObj.isTiltOnly]]\"\n            hass=\"[[hass]]\"\n            state-obj=\"[[stateObj]]\"\n          ></ha-cover-controls>\n          <ha-cover-tilt-controls\n            hidden$=\"[[!entityObj.isTiltOnly]]\"\n            hass=\"[[hass]]\"\n            state-obj=\"[[stateObj]]\"\n          ></ha-cover-tilt-controls>\n        </div>\n      </div>\n    `;\n  }\n\n  static get stateInfoTemplate() {\n    return html`\n      <state-info\n        hass=\"[[hass]]\"\n        state-obj=\"[[stateObj]]\"\n        in-dialog=\"[[inDialog]]\"\n      ></state-info>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      stateObj: Object,\n      inDialog: {\n        type: Boolean,\n        value: false,\n      },\n      entityObj: {\n        type: Object,\n        computed: \"computeEntityObj(hass, stateObj)\",\n      },\n    };\n  }\n\n  computeEntityObj(hass, stateObj) {\n    var entity = new CoverEntity(hass, stateObj);\n    return entity;\n  }\n}\ncustomElements.define(\"state-card-cover\", StateCardCover);\n","import \"@polymer/iron-flex-layout/iron-flex-layout-classes\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport \"../components/entity/state-info\";\nimport LocalizeMixin from \"../mixins/localize-mixin\";\n\nimport computeStateDisplay from \"../common/entity/compute_state_display\";\nimport attributeClassNames from \"../common/entity/attribute_class_names\";\nimport { computeRTL } from \"../common/util/compute_rtl\";\n\n/*\n * @appliesMixin LocalizeMixin\n */\nclass StateCardDisplay extends LocalizeMixin(PolymerElement) {\n  static get template() {\n    return html`\n      <style>\n        :host {\n          @apply --layout-horizontal;\n          @apply --layout-justified;\n          @apply --layout-baseline;\n        }\n\n        :host([rtl]) {\n          direction: rtl;\n          text-align: right;\n        }\n\n        state-info {\n          flex: 1 1 auto;\n          min-width: 0;\n        }\n        .state {\n          @apply --paper-font-body1;\n          color: var(--primary-text-color);\n          margin-left: 16px;\n          text-align: right;\n          max-width: 40%;\n          flex: 0 0 auto;\n        }\n        :host([rtl]) .state {\n          margin-right: 16px;\n          margin-left: 0;\n          text-align: left;\n        }\n\n        .state.has-unit_of_measurement {\n          white-space: nowrap;\n        }\n      </style>\n\n      ${this.stateInfoTemplate}\n      <div class$=\"[[computeClassNames(stateObj)]]\">\n        [[computeStateDisplay(localize, stateObj, language)]]\n      </div>\n    `;\n  }\n\n  static get stateInfoTemplate() {\n    return html`\n      <state-info\n        hass=\"[[hass]]\"\n        state-obj=\"[[stateObj]]\"\n        in-dialog=\"[[inDialog]]\"\n      ></state-info>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      stateObj: Object,\n      inDialog: {\n        type: Boolean,\n        value: false,\n      },\n      rtl: {\n        type: Boolean,\n        reflectToAttribute: true,\n        computed: \"_computeRTL(hass)\",\n      },\n    };\n  }\n\n  computeStateDisplay(localize, stateObj, language) {\n    return computeStateDisplay(localize, stateObj, language);\n  }\n\n  computeClassNames(stateObj) {\n    const classes = [\n      \"state\",\n      attributeClassNames(stateObj, [\"unit_of_measurement\"]),\n    ];\n    return classes.join(\" \");\n  }\n\n  _computeRTL(hass) {\n    return computeRTL(hass);\n  }\n}\ncustomElements.define(\"state-card-display\", StateCardDisplay);\n","import \"@polymer/iron-flex-layout/iron-flex-layout-classes\";\nimport { IronResizableBehavior } from \"@polymer/iron-resizable-behavior/iron-resizable-behavior\";\nimport \"@polymer/paper-input/paper-input\";\nimport { mixinBehaviors } from \"@polymer/polymer/lib/legacy/class\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport \"../components/entity/state-info\";\nimport \"../components/ha-slider\";\n\nclass StateCardInputNumber extends mixinBehaviors(\n  [IronResizableBehavior],\n  PolymerElement\n) {\n  static get template() {\n    return html`\n      <style include=\"iron-flex iron-flex-alignment\"></style>\n      <style>\n        ha-slider {\n          margin-left: auto;\n        }\n        .state {\n          @apply --paper-font-body1;\n          color: var(--primary-text-color);\n\n          text-align: right;\n          line-height: 40px;\n        }\n        .sliderstate {\n          min-width: 45px;\n        }\n        ha-slider[hidden] {\n          display: none !important;\n        }\n        paper-input {\n          text-align: right;\n          margin-left: auto;\n        }\n      </style>\n\n      <div class=\"horizontal justified layout\" id=\"input_number_card\">\n        ${this.stateInfoTemplate}\n        <ha-slider\n          min=\"[[min]]\"\n          max=\"[[max]]\"\n          value=\"{{value}}\"\n          step=\"[[step]]\"\n          hidden=\"[[hiddenslider]]\"\n          pin=\"\"\n          on-change=\"selectedValueChanged\"\n          on-click=\"stopPropagation\"\n          id=\"slider\"\n          ignore-bar-touch=\"\"\n        >\n        </ha-slider>\n        <paper-input\n          no-label-float=\"\"\n          auto-validate=\"\"\n          pattern=\"[0-9]+([\\\\.][0-9]+)?\"\n          step=\"[[step]]\"\n          min=\"[[min]]\"\n          max=\"[[max]]\"\n          value=\"{{value}}\"\n          type=\"number\"\n          on-change=\"selectedValueChanged\"\n          on-click=\"stopPropagation\"\n          hidden=\"[[hiddenbox]]\"\n        >\n        </paper-input>\n        <div class=\"state\" hidden=\"[[hiddenbox]]\">\n          [[stateObj.attributes.unit_of_measurement]]\n        </div>\n        <div\n          id=\"sliderstate\"\n          class=\"state sliderstate\"\n          hidden=\"[[hiddenslider]]\"\n        >\n          [[value]] [[stateObj.attributes.unit_of_measurement]]\n        </div>\n      </div>\n    `;\n  }\n\n  static get stateInfoTemplate() {\n    return html`\n      <state-info\n        hass=\"[[hass]]\"\n        state-obj=\"[[stateObj]]\"\n        in-dialog=\"[[inDialog]]\"\n      ></state-info>\n    `;\n  }\n\n  ready() {\n    super.ready();\n    if (typeof ResizeObserver === \"function\") {\n      const ro = new ResizeObserver((entries) => {\n        entries.forEach(() => {\n          this.hiddenState();\n        });\n      });\n      ro.observe(this.$.input_number_card);\n    } else {\n      this.addEventListener(\"iron-resize\", this.hiddenState);\n    }\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      hiddenbox: {\n        type: Boolean,\n        value: true,\n      },\n      hiddenslider: {\n        type: Boolean,\n        value: true,\n      },\n      inDialog: {\n        type: Boolean,\n        value: false,\n      },\n      stateObj: {\n        type: Object,\n        observer: \"stateObjectChanged\",\n      },\n      min: {\n        type: Number,\n        value: 0,\n      },\n      max: {\n        type: Number,\n        value: 100,\n      },\n      maxlength: {\n        type: Number,\n        value: 3,\n      },\n      step: Number,\n      value: Number,\n      mode: String,\n    };\n  }\n\n  hiddenState() {\n    if (this.mode !== \"slider\") return;\n    const sliderwidth = this.$.slider.offsetWidth;\n    if (sliderwidth < 100) {\n      this.$.sliderstate.hidden = true;\n    } else if (sliderwidth >= 145) {\n      this.$.sliderstate.hidden = false;\n    }\n  }\n\n  stateObjectChanged(newVal) {\n    const prevMode = this.mode;\n    this.setProperties({\n      min: Number(newVal.attributes.min),\n      max: Number(newVal.attributes.max),\n      step: Number(newVal.attributes.step),\n      value: Number(newVal.state),\n      mode: String(newVal.attributes.mode),\n      maxlength: String(newVal.attributes.max).length,\n      hiddenbox: newVal.attributes.mode !== \"box\",\n      hiddenslider: newVal.attributes.mode !== \"slider\",\n    });\n    if (this.mode === \"slider\" && prevMode !== \"slider\") {\n      this.hiddenState();\n    }\n  }\n\n  selectedValueChanged() {\n    if (this.value === Number(this.stateObj.state)) {\n      return;\n    }\n    this.hass.callService(\"input_number\", \"set_value\", {\n      value: this.value,\n      entity_id: this.stateObj.entity_id,\n    });\n  }\n\n  stopPropagation(ev) {\n    ev.stopPropagation();\n  }\n}\n\ncustomElements.define(\"state-card-input_number\", StateCardInputNumber);\n","import {\n  LitElement,\n  customElement,\n  TemplateResult,\n  html,\n  CSSResult,\n  css,\n  property,\n  PropertyValues,\n} from \"lit-element\";\nimport \"@polymer/paper-dropdown-menu/paper-dropdown-menu-light\";\nimport \"@polymer/paper-item/paper-item\";\n// tslint:disable-next-line: no-duplicate-imports\nimport { PaperItemElement } from \"@polymer/paper-item/paper-item\";\nimport \"@polymer/paper-listbox/paper-listbox\";\n\nimport \"../components/entity/state-badge\";\n\nimport computeStateName from \"../common/entity/compute_state_name\";\nimport { HomeAssistant, InputSelectEntity } from \"../types\";\nimport { setInputSelectOption } from \"../data/input-select\";\nimport { PolymerIronSelectEvent } from \"../polymer-types\";\nimport { stopPropagation } from \"../common/dom/stop_propagation\";\n\n@customElement(\"state-card-input_select\")\nclass StateCardInputSelect extends LitElement {\n  @property() public hass!: HomeAssistant;\n  @property() public stateObj!: InputSelectEntity;\n\n  protected render(): TemplateResult | void {\n    return html`\n      <state-badge .stateObj=${this.stateObj}></state-badge>\n      <paper-dropdown-menu-light\n        .label=${computeStateName(this.stateObj)}\n        .value=\"${this.stateObj.state}\"\n        @iron-select=${this._selectedOptionChanged}\n        @click=${stopPropagation}\n      >\n        <paper-listbox slot=\"dropdown-content\">\n          ${this.stateObj.attributes.options.map(\n            (option) => html`\n              <paper-item>${option}</paper-item>\n            `\n          )}\n        </paper-listbox>\n      </paper-dropdown-menu-light>\n    `;\n  }\n\n  protected updated(changedProps: PropertyValues) {\n    super.updated(changedProps);\n    // Update selected after rendering the items or else it won't work in Firefox\n    this.shadowRoot!.querySelector(\n      \"paper-listbox\"\n    )!.selected = this.stateObj.attributes.options.indexOf(this.stateObj.state);\n  }\n\n  private async _selectedOptionChanged(\n    ev: PolymerIronSelectEvent<PaperItemElement>\n  ) {\n    const option = ev.detail.item.innerText.trim();\n    if (option === this.stateObj.state) {\n      return;\n    }\n    await setInputSelectOption(this.hass, this.stateObj.entity_id, option);\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      :host {\n        display: block;\n      }\n\n      state-badge {\n        float: left;\n        margin-top: 10px;\n      }\n\n      paper-dropdown-menu-light {\n        display: block;\n        margin-left: 53px;\n      }\n\n      paper-item {\n        cursor: pointer;\n        min-width: 200px;\n      }\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"state-card-input_select\": StateCardInputSelect;\n  }\n}\n","import \"@polymer/iron-flex-layout/iron-flex-layout-classes\";\nimport \"@polymer/paper-input/paper-input\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport \"../components/entity/state-info\";\n\nclass StateCardInputText extends PolymerElement {\n  static get template() {\n    return html`\n      <style include=\"iron-flex iron-flex-alignment\"></style>\n      <style>\n        paper-input {\n          margin-left: 16px;\n        }\n      </style>\n\n      <div class=\"horizontal justified layout\">\n        ${this.stateInfoTemplate}\n        <paper-input\n          no-label-float=\"\"\n          minlength=\"[[stateObj.attributes.min]]\"\n          maxlength=\"[[stateObj.attributes.max]]\"\n          value=\"{{value}}\"\n          auto-validate=\"[[stateObj.attributes.pattern]]\"\n          pattern=\"[[stateObj.attributes.pattern]]\"\n          type=\"[[stateObj.attributes.mode]]\"\n          on-change=\"selectedValueChanged\"\n          on-click=\"stopPropagation\"\n          placeholder=\"(empty value)\"\n        >\n        </paper-input>\n      </div>\n    `;\n  }\n\n  static get stateInfoTemplate() {\n    return html`\n      <state-info\n        hass=\"[[hass]]\"\n        state-obj=\"[[stateObj]]\"\n        in-dialog=\"[[inDialog]]\"\n      ></state-info>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n\n      inDialog: {\n        type: Boolean,\n        value: false,\n      },\n\n      stateObj: {\n        type: Object,\n        observer: \"stateObjectChanged\",\n      },\n\n      pattern: String,\n      value: String,\n    };\n  }\n\n  stateObjectChanged(newVal) {\n    this.value = newVal.state;\n  }\n\n  selectedValueChanged() {\n    if (this.value === this.stateObj.state) {\n      return;\n    }\n    this.hass.callService(\"input_text\", \"set_value\", {\n      value: this.value,\n      entity_id: this.stateObj.entity_id,\n    });\n  }\n\n  stopPropagation(ev) {\n    ev.stopPropagation();\n  }\n}\n\ncustomElements.define(\"state-card-input_text\", StateCardInputText);\n","import \"@polymer/iron-flex-layout/iron-flex-layout-classes\";\nimport \"@material/mwc-button\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport \"../components/entity/state-info\";\n\nimport LocalizeMixin from \"../mixins/localize-mixin\";\n\n/*\n * @appliesMixin LocalizeMixin\n */\nclass StateCardLock extends LocalizeMixin(PolymerElement) {\n  static get template() {\n    return html`\n      <style include=\"iron-flex iron-flex-alignment\"></style>\n      <style>\n        mwc-button {\n          top: 3px;\n          height: 37px;\n          margin-right: -0.57em;\n        }\n      </style>\n\n      <div class=\"horizontal justified layout\">\n        ${this.stateInfoTemplate}\n        <mwc-button\n          on-click=\"_callService\"\n          data-service=\"unlock\"\n          hidden$=\"[[!isLocked]]\"\n          >[[localize('ui.card.lock.unlock')]]</mwc-button\n        >\n        <mwc-button\n          on-click=\"_callService\"\n          data-service=\"lock\"\n          hidden$=\"[[isLocked]]\"\n          >[[localize('ui.card.lock.lock')]]</mwc-button\n        >\n      </div>\n    `;\n  }\n\n  static get stateInfoTemplate() {\n    return html`\n      <state-info\n        hass=\"[[hass]]\"\n        state-obj=\"[[stateObj]]\"\n        in-dialog=\"[[inDialog]]\"\n      ></state-info>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      stateObj: {\n        type: Object,\n        observer: \"_stateObjChanged\",\n      },\n      inDialog: {\n        type: Boolean,\n        value: false,\n      },\n      isLocked: Boolean,\n    };\n  }\n\n  _stateObjChanged(newVal) {\n    if (newVal) {\n      this.isLocked = newVal.state === \"locked\";\n    }\n  }\n\n  _callService(ev) {\n    ev.stopPropagation();\n    const service = ev.target.dataset.service;\n    const data = {\n      entity_id: this.stateObj.entity_id,\n    };\n    this.hass.callService(\"lock\", service, data);\n  }\n}\ncustomElements.define(\"state-card-lock\", StateCardLock);\n","import \"@polymer/iron-flex-layout/iron-flex-layout-classes\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport \"../components/entity/state-info\";\nimport LocalizeMixin from \"../mixins/localize-mixin\";\nimport HassMediaPlayerEntity from \"../util/hass-media-player-model\";\n\n/*\n * @appliesMixin LocalizeMixin\n */\nclass StateCardMediaPlayer extends LocalizeMixin(PolymerElement) {\n  static get template() {\n    return html`\n      <style include=\"iron-flex iron-flex-alignment\"></style>\n      <style>\n        :host {\n          line-height: 1.5;\n        }\n\n        .state {\n          @apply --paper-font-common-nowrap;\n          @apply --paper-font-body1;\n          margin-left: 16px;\n          text-align: right;\n        }\n\n        .main-text {\n          @apply --paper-font-common-nowrap;\n          color: var(--primary-text-color);\n          text-transform: capitalize;\n        }\n\n        .main-text[take-height] {\n          line-height: 40px;\n        }\n\n        .secondary-text {\n          @apply --paper-font-common-nowrap;\n          color: var(--secondary-text-color);\n        }\n      </style>\n\n      <div class=\"horizontal justified layout\">\n        ${this.stateInfoTemplate}\n        <div class=\"state\">\n          <div class=\"main-text\" take-height$=\"[[!playerObj.secondaryTitle]]\">\n            [[computePrimaryText(localize, playerObj)]]\n          </div>\n          <div class=\"secondary-text\">[[playerObj.secondaryTitle]]</div>\n        </div>\n      </div>\n    `;\n  }\n\n  static get stateInfoTemplate() {\n    return html`\n      <state-info\n        hass=\"[[hass]]\"\n        state-obj=\"[[stateObj]]\"\n        in-dialog=\"[[inDialog]]\"\n      ></state-info>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      stateObj: Object,\n      inDialog: {\n        type: Boolean,\n        value: false,\n      },\n      playerObj: {\n        type: Object,\n        computed: \"computePlayerObj(hass, stateObj)\",\n      },\n    };\n  }\n\n  computePlayerObj(hass, stateObj) {\n    return new HassMediaPlayerEntity(hass, stateObj);\n  }\n\n  computePrimaryText(localize, playerObj) {\n    return (\n      playerObj.primaryTitle ||\n      localize(`state.media_player.${playerObj.stateObj.state}`) ||\n      localize(`state.default.${playerObj.stateObj.state}`) ||\n      playerObj.stateObj.state\n    );\n  }\n}\ncustomElements.define(\"state-card-media_player\", StateCardMediaPlayer);\n","import \"@polymer/iron-flex-layout/iron-flex-layout-classes\";\nimport \"@material/mwc-button\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport \"../components/entity/state-info\";\nimport LocalizeMixin from \"../mixins/localize-mixin\";\n\n/*\n * @appliesMixin LocalizeMixin\n */\nclass StateCardScene extends LocalizeMixin(PolymerElement) {\n  static get template() {\n    return html`\n      <style include=\"iron-flex iron-flex-alignment\"></style>\n      <style>\n        mwc-button {\n          top: 3px;\n          height: 37px;\n          margin-right: -0.57em;\n        }\n      </style>\n\n      <div class=\"horizontal justified layout\">\n        ${this.stateInfoTemplate}\n        <mwc-button on-click=\"activateScene\"\n          >[[localize('ui.card.scene.activate')]]</mwc-button\n        >\n      </div>\n    `;\n  }\n\n  static get stateInfoTemplate() {\n    return html`\n      <state-info\n        hass=\"[[hass]]\"\n        state-obj=\"[[stateObj]]\"\n        in-dialog=\"[[inDialog]]\"\n      ></state-info>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      stateObj: Object,\n      inDialog: {\n        type: Boolean,\n        value: false,\n      },\n    };\n  }\n\n  activateScene(ev) {\n    ev.stopPropagation();\n    this.hass.callService(\"scene\", \"turn_on\", {\n      entity_id: this.stateObj.entity_id,\n    });\n  }\n}\ncustomElements.define(\"state-card-scene\", StateCardScene);\n","import \"@polymer/iron-flex-layout/iron-flex-layout-classes\";\nimport \"@material/mwc-button\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport \"../components/entity/ha-entity-toggle\";\nimport \"../components/entity/state-info\";\n\nimport LocalizeMixin from \"../mixins/localize-mixin\";\n\n/*\n * @appliesMixin LocalizeMixin\n */\nclass StateCardScript extends LocalizeMixin(PolymerElement) {\n  static get template() {\n    return html`\n      <style include=\"iron-flex iron-flex-alignment\"></style>\n      <style>\n        mwc-button {\n          top: 3px;\n          height: 37px;\n          margin-right: -0.57em;\n        }\n\n        ha-entity-toggle {\n          margin-left: 16px;\n        }\n      </style>\n\n      <div class=\"horizontal justified layout\">\n        ${this.stateInfoTemplate}\n        <template is=\"dom-if\" if=\"[[stateObj.attributes.can_cancel]]\">\n          <ha-entity-toggle\n            state-obj=\"[[stateObj]]\"\n            hass=\"[[hass]]\"\n          ></ha-entity-toggle>\n        </template>\n        <template is=\"dom-if\" if=\"[[!stateObj.attributes.can_cancel]]\">\n          <mwc-button on-click=\"fireScript\"\n            >[[localize('ui.card.script.execute')]]</mwc-button\n          >\n        </template>\n      </div>\n    `;\n  }\n\n  static get stateInfoTemplate() {\n    return html`\n      <state-info\n        hass=\"[[hass]]\"\n        state-obj=\"[[stateObj]]\"\n        in-dialog=\"[[inDialog]]\"\n      ></state-info>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      stateObj: Object,\n      inDialog: {\n        type: Boolean,\n        value: false,\n      },\n    };\n  }\n\n  fireScript(ev) {\n    ev.stopPropagation();\n    this.hass.callService(\"script\", \"turn_on\", {\n      entity_id: this.stateObj.entity_id,\n    });\n  }\n}\ncustomElements.define(\"state-card-script\", StateCardScript);\n","import \"@polymer/iron-flex-layout/iron-flex-layout-classes\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport \"../components/entity/state-info\";\n\nimport timerTimeRemaining from \"../common/entity/timer_time_remaining\";\nimport secondsToDuration from \"../common/datetime/seconds_to_duration\";\n\nclass StateCardTimer extends PolymerElement {\n  static get template() {\n    return html`\n      <style include=\"iron-flex iron-flex-alignment\"></style>\n      <style>\n        .state {\n          @apply --paper-font-body1;\n          color: var(--primary-text-color);\n\n          margin-left: 16px;\n          text-align: right;\n          line-height: 40px;\n        }\n      </style>\n\n      <div class=\"horizontal justified layout\">\n        ${this.stateInfoTemplate}\n        <div class=\"state\">[[_secondsToDuration(timeRemaining)]]</div>\n      </div>\n    `;\n  }\n\n  static get stateInfoTemplate() {\n    return html`\n      <state-info\n        hass=\"[[hass]]\"\n        state-obj=\"[[stateObj]]\"\n        in-dialog=\"[[inDialog]]\"\n      ></state-info>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      stateObj: {\n        type: Object,\n        observer: \"stateObjChanged\",\n      },\n      timeRemaining: Number,\n      inDialog: {\n        type: Boolean,\n        value: false,\n      },\n    };\n  }\n\n  connectedCallback() {\n    super.connectedCallback();\n    this.startInterval(this.stateObj);\n  }\n\n  disconnectedCallback() {\n    super.disconnectedCallback();\n    this.clearInterval();\n  }\n\n  stateObjChanged(stateObj) {\n    this.startInterval(stateObj);\n  }\n\n  clearInterval() {\n    if (this._updateRemaining) {\n      clearInterval(this._updateRemaining);\n      this._updateRemaining = null;\n    }\n  }\n\n  startInterval(stateObj) {\n    this.clearInterval();\n    this.calculateRemaining(stateObj);\n\n    if (stateObj.state === \"active\") {\n      this._updateRemaining = setInterval(\n        () => this.calculateRemaining(this.stateObj),\n        1000\n      );\n    }\n  }\n\n  calculateRemaining(stateObj) {\n    this.timeRemaining = timerTimeRemaining(stateObj);\n  }\n\n  _secondsToDuration(time) {\n    return secondsToDuration(time);\n  }\n}\ncustomElements.define(\"state-card-timer\", StateCardTimer);\n","import \"@polymer/iron-flex-layout/iron-flex-layout-classes\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport \"../components/entity/ha-entity-toggle\";\nimport \"../components/entity/state-info\";\n\nclass StateCardToggle extends PolymerElement {\n  static get template() {\n    return html`\n      <style include=\"iron-flex iron-flex-alignment\"></style>\n      <style>\n        ha-entity-toggle {\n          margin: -4px -16px -4px 0;\n          padding: 4px 16px;\n        }\n      </style>\n\n      <div class=\"horizontal justified layout\">\n        ${this.stateInfoTemplate}\n        <ha-entity-toggle\n          state-obj=\"[[stateObj]]\"\n          hass=\"[[hass]]\"\n        ></ha-entity-toggle>\n      </div>\n    `;\n  }\n\n  static get stateInfoTemplate() {\n    return html`\n      <state-info\n        hass=\"[[hass]]\"\n        state-obj=\"[[stateObj]]\"\n        in-dialog=\"[[inDialog]]\"\n      ></state-info>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      stateObj: Object,\n      inDialog: {\n        type: Boolean,\n        value: false,\n      },\n    };\n  }\n}\ncustomElements.define(\"state-card-toggle\", StateCardToggle);\n","import \"@polymer/iron-flex-layout/iron-flex-layout-classes\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport \"../components/entity/state-info\";\nimport \"../components/ha-vacuum-state\";\n\nclass StateCardVacuum extends PolymerElement {\n  static get template() {\n    return html`\n      <style include=\"iron-flex iron-flex-alignment\"></style>\n\n      <div class=\"horizontal justified layout\">\n        ${this.stateInfoTemplate}\n        <ha-vacuum-state\n          hass=\"[[hass]]\"\n          state-obj=\"[[stateObj]]\"\n        ></ha-vacuum-state>\n      </div>\n    `;\n  }\n\n  static get stateInfoTemplate() {\n    return html`\n      <state-info\n        hass=\"[[hass]]\"\n        state-obj=\"[[stateObj]]\"\n        in-dialog=\"[[inDialog]]\"\n      ></state-info>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      stateObj: Object,\n      inDialog: {\n        type: Boolean,\n        value: false,\n      },\n    };\n  }\n}\ncustomElements.define(\"state-card-vacuum\", StateCardVacuum);\n","import \"@polymer/iron-flex-layout/iron-flex-layout-classes\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport \"../components/entity/state-info\";\nimport \"../components/ha-water_heater-state\";\n\nclass StateCardWaterHeater extends PolymerElement {\n  static get template() {\n    return html`\n      <style include=\"iron-flex iron-flex-alignment\"></style>\n      <style>\n        :host {\n          @apply --paper-font-body1;\n          line-height: 1.5;\n        }\n\n        ha-water_heater-state {\n          margin-left: 16px;\n          text-align: right;\n        }\n      </style>\n\n      <div class=\"horizontal justified layout\">\n        ${this.stateInfoTemplate}\n        <ha-water_heater-state\n          hass=\"[[hass]]\"\n          state-obj=\"[[stateObj]]\"\n        ></ha-water_heater-state>\n      </div>\n    `;\n  }\n\n  static get stateInfoTemplate() {\n    return html`\n      <state-info\n        hass=\"[[hass]]\"\n        state-obj=\"[[stateObj]]\"\n        in-dialog=\"[[inDialog]]\"\n      ></state-info>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      stateObj: Object,\n      inDialog: {\n        type: Boolean,\n        value: false,\n      },\n    };\n  }\n}\ncustomElements.define(\"state-card-water_heater\", StateCardWaterHeater);\n","import { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport \"../components/entity/state-badge\";\n\nimport computeStateName from \"../common/entity/compute_state_name\";\n\nclass StateCardWeblink extends PolymerElement {\n  static get template() {\n    return html`\n      <style>\n        :host {\n          display: block;\n        }\n        .name {\n          @apply --paper-font-common-nowrap;\n          @apply --paper-font-body1;\n          color: var(--primary-color);\n\n          text-transform: capitalize;\n          line-height: 40px;\n          margin-left: 16px;\n        }\n      </style>\n\n      ${this.stateBadgeTemplate}\n      <a href$=\"[[stateObj.state]]\" target=\"_blank\" class=\"name\" id=\"link\"\n        >[[_computeStateName(stateObj)]]</a\n      >\n    `;\n  }\n\n  static get stateBadgeTemplate() {\n    return html`\n      <state-badge state-obj=\"[[stateObj]]\"></state-badge>\n    `;\n  }\n\n  static get properties() {\n    return {\n      stateObj: Object,\n      inDialog: {\n        type: Boolean,\n        value: false,\n      },\n    };\n  }\n\n  ready() {\n    super.ready();\n    this.addEventListener(\"click\", (ev) => this.onTap(ev));\n  }\n\n  _computeStateName(stateObj) {\n    return computeStateName(stateObj);\n  }\n\n  onTap(ev) {\n    ev.stopPropagation();\n    ev.preventDefault();\n    window.open(this.stateObj.state, \"_blank\");\n  }\n}\ncustomElements.define(\"state-card-weblink\", StateCardWeblink);\n","const hassAttributeUtil = {};\n\nhassAttributeUtil.DOMAIN_DEVICE_CLASS = {\n  binary_sensor: [\n    \"battery\",\n    \"cold\",\n    \"connectivity\",\n    \"door\",\n    \"garage_door\",\n    \"gas\",\n    \"heat\",\n    \"light\",\n    \"lock\",\n    \"moisture\",\n    \"motion\",\n    \"moving\",\n    \"occupancy\",\n    \"opening\",\n    \"plug\",\n    \"power\",\n    \"presence\",\n    \"problem\",\n    \"safety\",\n    \"smoke\",\n    \"sound\",\n    \"vibration\",\n    \"window\",\n  ],\n  cover: [\n    \"awning\",\n    \"blind\",\n    \"curtain\",\n    \"damper\",\n    \"door\",\n    \"garage\",\n    \"shade\",\n    \"shutter\",\n    \"window\",\n  ],\n  sensor: [\n    \"battery\",\n    \"humidity\",\n    \"illuminance\",\n    \"temperature\",\n    \"pressure\",\n    \"power\",\n    \"signal_strength\",\n  ],\n  switch: [\"switch\", \"outlet\"],\n};\n\nhassAttributeUtil.UNKNOWN_TYPE = \"json\";\nhassAttributeUtil.ADD_TYPE = \"key-value\";\n\nhassAttributeUtil.TYPE_TO_TAG = {\n  string: \"ha-customize-string\",\n  json: \"ha-customize-string\",\n  icon: \"ha-customize-icon\",\n  boolean: \"ha-customize-boolean\",\n  array: \"ha-customize-array\",\n  \"key-value\": \"ha-customize-key-value\",\n};\n\n// Attributes here serve dual purpose:\n// 1) Any key of this object won't be shown in more-info window.\n// 2) Any key which has value other than undefined will appear in customization\n//    config according to its value.\nhassAttributeUtil.LOGIC_STATE_ATTRIBUTES = hassAttributeUtil.LOGIC_STATE_ATTRIBUTES || {\n  entity_picture: undefined,\n  friendly_name: { type: \"string\", description: \"Name\" },\n  icon: { type: \"icon\" },\n  emulated_hue: {\n    type: \"boolean\",\n    domains: [\"emulated_hue\"],\n  },\n  emulated_hue_name: {\n    type: \"string\",\n    domains: [\"emulated_hue\"],\n  },\n  haaska_hidden: undefined,\n  haaska_name: undefined,\n  homebridge_hidden: { type: \"boolean\" },\n  homebridge_name: { type: \"string\" },\n  supported_features: undefined,\n  attribution: undefined,\n  custom_ui_more_info: { type: \"string\" },\n  custom_ui_state_card: { type: \"string\" },\n  device_class: {\n    type: \"array\",\n    options: hassAttributeUtil.DOMAIN_DEVICE_CLASS,\n    description: \"Device class\",\n    domains: [\"binary_sensor\", \"cover\", \"sensor\", \"switch\"],\n  },\n  hidden: { type: \"boolean\", description: \"Hide from UI\" },\n  assumed_state: {\n    type: \"boolean\",\n    domains: [\n      \"switch\",\n      \"light\",\n      \"cover\",\n      \"climate\",\n      \"fan\",\n      \"group\",\n      \"water_heater\",\n    ],\n  },\n  initial_state: {\n    type: \"string\",\n    domains: [\"automation\"],\n  },\n  unit_of_measurement: { type: \"string\" },\n};\n\nexport default hassAttributeUtil;\n"],"sourceRoot":""}