{"version":3,"sources":["webpack:///./src/cards/ha-media_player-card.js","webpack:///./src/cards/ha-weather-card.js","webpack:///./src/common/dom/load_resource.ts","webpack:///./src/common/dom/scroll-to-target.ts","webpack:///./src/common/dom/setup-leaflet-map.ts","webpack:///./src/common/entity/extract_views.ts","webpack:///./src/common/entity/get_group_entities.ts","webpack:///./src/common/entity/get_view_entities.ts","webpack:///./src/common/entity/split_by_groups.ts","webpack:///./src/common/entity/valid_entity_id.ts","webpack:///./src/common/string/compare.ts","webpack:///./src/common/util/parse-aspect-ratio.ts","webpack:///./src/common/util/render-status.ts","webpack:///./src/common/util/subscribe-one.ts","webpack:///./src/components/buttons/ha-call-service-button.js","webpack:///./src/components/buttons/ha-progress-button.js","webpack:///./src/components/entity/ha-state-label-badge.ts","webpack:///./src/components/ha-card.ts","webpack:///./src/components/ha-date-input.ts","webpack:///./src/components/ha-label-badge.ts","webpack:///./src/components/ha-paper-icon-button-arrow-next.ts","webpack:///./src/components/ha-paper-icon-button-next.ts","webpack:///./src/components/ha-start-voice-button.js","webpack:///./src/data/alarm_control_panel.ts","webpack:///./src/data/area_registry.ts","webpack:///./src/data/device_registry.ts","webpack:///./src/data/entity.ts","webpack:///./src/data/input_datetime.ts","webpack:///./src/data/input_text.ts","webpack:///./src/data/lovelace.ts","webpack:///./src/data/media-player.ts","webpack:///./src/data/shopping-list.ts","webpack:///./src/data/ws-notifications.ts","webpack:///./src/layouts/ha-app-layout.js","webpack:///./src/panels/lovelace/cards/hui-alarm-panel-card.ts","webpack:///./src/panels/lovelace/cards/hui-conditional-card.ts","webpack:///./src/panels/lovelace/cards/hui-entities-card.ts","webpack:///./src/panels/lovelace/cards/hui-entity-button-card.ts","webpack:///./src/panels/lovelace/cards/hui-entity-filter-card.ts","webpack:///./src/panels/lovelace/cards/hui-error-card.ts","webpack:///./src/panels/lovelace/cards/hui-gauge-card.ts","webpack:///./src/panels/lovelace/cards/hui-glance-card.ts","webpack:///./src/panels/lovelace/cards/hui-history-graph-card.js","webpack:///./src/panels/lovelace/cards/hui-horizontal-stack-card.ts","webpack:///./src/panels/lovelace/cards/hui-iframe-card.ts","webpack:///./src/panels/lovelace/cards/hui-legacy-wrapper-card.js","webpack:///./src/panels/lovelace/cards/hui-light-card.ts","webpack:///./src/panels/lovelace/cards/hui-map-card.ts","webpack:///./src/panels/lovelace/cards/hui-markdown-card.ts","webpack:///./src/panels/lovelace/cards/hui-media-control-card.js","webpack:///./src/panels/lovelace/cards/hui-picture-card.ts","webpack:///./src/panels/lovelace/cards/hui-picture-elements-card.ts","webpack:///./src/panels/lovelace/cards/hui-picture-entity-card.ts","webpack:///./src/panels/lovelace/cards/hui-picture-glance-card.ts","webpack:///./src/panels/lovelace/cards/hui-plant-status-card.ts","webpack:///./src/panels/lovelace/cards/hui-sensor-card.ts","webpack:///./src/panels/lovelace/cards/hui-shopping-list-card.ts","webpack:///./src/panels/lovelace/cards/hui-stack-card.ts","webpack:///./src/panels/lovelace/cards/hui-thermostat-card.ts","webpack:///./src/panels/lovelace/cards/hui-vertical-stack-card.ts","webpack:///./src/panels/lovelace/cards/hui-weather-forecast-card.js","webpack:///./src/panels/lovelace/cards/picture-elements/create-styled-hui-element.ts","webpack:///./src/panels/lovelace/common/call-service.ts","webpack:///./src/panels/lovelace/common/compute-card-size.ts","webpack:///./src/panels/lovelace/common/compute-notifications.ts","webpack:///./src/panels/lovelace/common/compute-tooltip.ts","webpack:///./src/panels/lovelace/common/create-card-element.ts","webpack:///./src/panels/lovelace/common/create-hui-element.ts","webpack:///./src/panels/lovelace/common/create-row-element.ts","webpack:///./src/panels/lovelace/common/directives/long-press-directive.ts","webpack:///./src/panels/lovelace/common/entity/toggle-entity.ts","webpack:///./src/panels/lovelace/common/entity/turn-on-off-entities.ts","webpack:///./src/panels/lovelace/common/entity/turn-on-off-entity.ts","webpack:///./src/panels/lovelace/common/generate-lovelace-config.ts","webpack:///./src/panels/lovelace/common/handle-click.ts","webpack:///./src/panels/lovelace/common/has-changed.ts","webpack:///./src/panels/lovelace/common/process-config-entities.ts","webpack:///./src/panels/lovelace/common/validate-condition.ts","webpack:///./src/panels/lovelace/components/hui-entities-toggle.ts","webpack:///./src/panels/lovelace/components/hui-generic-entity-row.ts","webpack:///./src/panels/lovelace/components/hui-image.ts","webpack:///./src/panels/lovelace/components/hui-timestamp-display.ts","webpack:///./src/panels/lovelace/components/hui-warning-element.ts","webpack:///./src/panels/lovelace/components/hui-warning.ts","webpack:///./src/panels/lovelace/components/notifications/hui-configurator-notification-item.ts","webpack:///./src/panels/lovelace/components/notifications/hui-notification-drawer.js","webpack:///./src/panels/lovelace/components/notifications/hui-notification-item-template.ts","webpack:///./src/panels/lovelace/components/notifications/hui-notification-item.ts","webpack:///./src/panels/lovelace/components/notifications/hui-notifications-button.ts","webpack:///./src/panels/lovelace/components/notifications/hui-persistent-notification-item.ts","webpack:///./src/panels/lovelace/editor/card-editor/show-edit-card-dialog.ts","webpack:///./src/panels/lovelace/editor/config-util.ts","webpack:///./src/panels/lovelace/editor/lovelace-editor/show-edit-lovelace-dialog.ts","webpack:///./src/panels/lovelace/editor/show-save-config-dialog.ts","webpack:///./src/panels/lovelace/editor/view-editor/show-edit-view-dialog.ts","webpack:///./src/panels/lovelace/elements/hui-conditional-element.ts","webpack:///./src/panels/lovelace/elements/hui-icon-element.ts","webpack:///./src/panels/lovelace/elements/hui-image-element.ts","webpack:///./src/panels/lovelace/elements/hui-service-button-element.ts","webpack:///./src/panels/lovelace/elements/hui-state-badge-element.ts","webpack:///./src/panels/lovelace/elements/hui-state-icon-element.ts","webpack:///./src/panels/lovelace/elements/hui-state-label-element.ts","webpack:///./src/panels/lovelace/entity-rows/hui-climate-entity-row.ts","webpack:///./src/panels/lovelace/entity-rows/hui-cover-entity-row.ts","webpack:///./src/panels/lovelace/entity-rows/hui-group-entity-row.ts","webpack:///./src/panels/lovelace/entity-rows/hui-input-datetime-entity-row.ts","webpack:///./src/panels/lovelace/entity-rows/hui-input-number-entity-row.ts","webpack:///./src/panels/lovelace/entity-rows/hui-input-select-entity-row.ts","webpack:///./src/panels/lovelace/entity-rows/hui-input-text-entity-row.ts","webpack:///./src/panels/lovelace/entity-rows/hui-lock-entity-row.ts","webpack:///./src/panels/lovelace/entity-rows/hui-media-player-entity-row.ts","webpack:///./src/panels/lovelace/entity-rows/hui-scene-entity-row.ts","webpack:///./src/panels/lovelace/entity-rows/hui-script-entity-row.ts","webpack:///./src/panels/lovelace/entity-rows/hui-sensor-entity-row.ts","webpack:///./src/panels/lovelace/entity-rows/hui-text-entity-row.ts","webpack:///./src/panels/lovelace/entity-rows/hui-timer-entity-row.ts","webpack:///./src/panels/lovelace/entity-rows/hui-toggle-entity-row.ts","webpack:///./src/panels/lovelace/ha-panel-lovelace.ts","webpack:///./src/panels/lovelace/hui-root.ts","webpack:///./src/panels/lovelace/hui-view.ts","webpack:///./src/panels/lovelace/special-rows/hui-call-service-row.ts","webpack:///./src/panels/lovelace/special-rows/hui-divider-row.ts","webpack:///./src/panels/lovelace/special-rows/hui-section-row.ts","webpack:///./src/panels/lovelace/special-rows/hui-weblink-row.ts","webpack:///./src/panels/map/ha-entity-marker.js","webpack:///./src/resources/jquery.roundslider.ondemand.ts"],"names":["HaMediaPlayerCard","LocalizeMixin","EventsMixin","PolymerElement","template","html","properties","hass","Object","stateObj","playerObj","type","computed","observer","playbackControlIcon","String","playbackPosition","Number","_coverShowing","Boolean","value","_coverLoadError","playerObjChanged","oldPlayerObj","isPlaying","showProgress","_positionTracking","setInterval","updatePlaybackPosition","clearInterval","picture","attributes","entity_picture","oldPicture","$","cover","style","backgroundImage","substr","content_type","contentType","content","fetchMediaPlayerThumbnailWithCache","entity_id","err","currentProgress","computeBannerClasses","coverShowing","coverLoadError","cls","isOff","isIdle","media_content_type","computeHideProgress","computeHidePowerButton","supportsTurnOn","supportsTurnOff","computePlayerObj","HassMediaPlayerEntity","computePrimaryText","localize","primaryTitle","state","computePlaybackControlIcon","supportsPause","hasMediaControl","isPaused","supportsPlay","_computeStateName","computeStateName","handleNext","ev","stopPropagation","nextTrack","handleOpenMoreInfo","fire","entityId","handlePlaybackControl","mediaPlayPause","handlePrevious","previousTrack","handleTogglePower","togglePower","customElements","define","HaWeatherCard","config","forecast","Array","rtl","reflectToAttribute","constructor","cardinalDirections","weatherIcons","cloudy","fog","hail","lightning","partlycloudy","pouring","rainy","snowy","sunny","windy","ready","addEventListener","_onClick","computeForecast","slice","getUnit","measure","lengthUnit","unit_system","length","computeState","computeName","name","showWeatherIcon","condition","getWeatherIcon","windBearingToText","degree","degreenum","parseInt","isFinite","getWindSpeed","speed","getWindBearing","bearing","cardinalDirection","toLowerCase","_showValue","item","computeDate","data","date","Date","toLocaleDateString","language","weekday","computeTime","toLocaleTimeString","hour","_computeRTL","computeRTL","_load","tag","url","Promise","resolve","reject","element","document","createElement","attr","parent","onload","onerror","async","rel","appendChild","loadCSS","loadJS","loadImg","loadModule","scrollToTarget","target","top","scroller","easingFn","easeOutQuad","t","b","c","d","animationId","Math","random","duration","startTime","now","currentScrollTop","scrollTop","deltaScrollTop","_currentAnimationId","updateFrame","elapsedTime","requestAnimationFrame","bind","call","setupLeafletMap","mapElement","parentNode","Error","Leaflet","Icon","Default","imagePath","map","setAttribute","setView","tileLayer","Browser","retina","attribution","subdomains","minZoom","maxZoom","addTo","extractViews","entities","views","keys","forEach","entity","view","push","sort","view1","view2","DEFAULT_VIEW_ENTITY_ID","order","getGroupEntities","group","result","getViewEntities","viewEntities","hidden","computeDomain","groupEntities","grEntityId","grEntity","splitByGroups","groups","ungrouped","validEntityId","test","compare","a","caseInsensitiveCompare","parseOrThrow","num","parsed","parseFloat","isNaN","parseAspectRatio","input","endsWith","w","h","arr","replace","split","afterNextRender","cb","setTimeout","subscribeOne","conn","subscribe","unsub","items","HaCallServiceButton","progress","domain","service","serviceData","buttonTapped","el","eventData","callService","then","actionSuccess","success","actionError","HaProgressButton","disabled","tempClass","className","classList","container","add","remove","computeDisabled","HaStateLabelBadge","customElement","property","_connected","startInterval","computeStateDomain","classMap","_computeValue","_computeIcon","_computeLabel","_timerTimeRemaining","changedProperties","fireEvent","has","domainIcon","stateIcon","includes","secondsToDuration","unit_of_measurement","_updateRemaining","undefined","calculateTimerRemaining","window","timerTimeRemaining","css","LitElement","HaCard","header","HaDateInput","year","_formatYear","month","_formatMonth","day","_formatDay","yearElement","shadowRoot","getElementById","monthElement","dayElement","HaLabelBadge","icon","label","description","image","render","big","styles","updated","paperIconButtonClass","get","HaPaperIconButtonArrowNext","connectedCallback","getComputedStyle","direction","HaPaperIconButtonNext","HaStartVoiceButton","canListen","notify","computeCanListen","isComponentLoaded","handleListenClick","dialogImport","dialogTag","FORMAT_TEXT","FORMAT_NUMBER","callAlarmAction","action","code","createAreaRegistryEntry","values","callWS","updateAreaRegistryEntry","areaId","updates","area_id","deleteAreaRegistryEntry","fetchAreaRegistry","sendMessagePromise","areas","ent1","ent2","subscribeAreaRegistryUpdates","store","subscribeEvents","debounce","setState","subscribeAreaRegistry","onChange","createCollection","updateDeviceRegistryEntry","deviceId","device_id","fetchDeviceRegistry","subscribeDeviceRegistryUpdates","devices","subscribeDeviceRegistry","UNAVAILABLE","ENTITY_COMPONENT_DOMAINS","setInputDateTimeValue","time","param","setValue","fetchConfig","force","saveConfig","subscribeLovelaceUpdates","SUPPORT_PAUSE","SUPPORT_NEXT_TRACK","SUPPORTS_PLAY","OFF_STATES","timeCachePromiseFunc","fetchMediaPlayerThumbnail","fetchItems","updateItem","itemId","item_id","clearItems","addItem","fetchNotifications","subscribeUpdates","ntf","subscribeNotifications","HaAppLayout","ICONS","armed_away","armed_custom_bypass","armed_home","armed_night","disarmed","pending","triggered","BUTTONS","HuiAlarmPanelCard","states","_config","code_format","defaults","_code","changedProps","oldHass","_label","_stateIconLabel","_handleActionClick","_handlePadClick","stateLabel","pop","e","val","currentTarget","HuiConditionalCard","HTMLElement","setConfig","card","conditions","isArray","validateConditionalConfig","_card","parentElement","removeChild","createCardElement","update","_hass","getCardSize","computeCardSize","visible","checkConditionsMet","setProperty","HuiEntitiesCard","querySelectorAll","entitiesToggle","querySelector","title","processConfigEntities","theme","_configEntities","applyThemesOnElement","themes","show_header_toggle","conf","entityConf","renderEntity","createRowElement","DOMAINS_HIDE_MORE_INFO","_handleClick","HuiEntityButtonCard","tap_action","hold_action","show_icon","show_name","isValidEntityId","DOMAINS_TOGGLE","_handleTap","_handleHold","longPress","styleMap","filter","_computeBrightness","color","_computeColor","height","icon_height","brightness","hs_color","hue","sat","handleClick","EntityFilterCard","_element","state_filter","_baseCardConfig","lastChild","entitiesList","show_empty","display","_cardElement","tagName","isPanel","createErrorCardElement","createErrorCardConfig","error","origConfig","HuiErrorCard","_toStr","JSON","stringify","severityMap","red","green","yellow","normal","HuiGaugeCard","min","max","_setBaseUnit","_baseUnit","transform","_translateTurn","_computeSeverity","unit","hasConfigOrEntityChanged","_updated","isConnected","baseUnit","_computeBaseUnit","numberValue","sections","severity","sectionsArray","sortable","maxTurnValue","clientWidth","HuiGlanceCard","ceil","columns","requestUpdate","show_state","computeStateDisplay","HuiHistoryGraphCard","_names","_entities","_stateHistory","_stateHistoryLoading","_cacheConfig","setProperties","cacheKey","join","hoursToShow","hours_to_show","refresh","refresh_interval","HuiHorizontalStackCard","HuiStackCard","totalSize","_cards","elementSize","renderStyle","HuiIframeCard","aspect_ratio","aspectRatio","LegacyWrapperCard","_tag","toUpperCase","_domain","_ensureElement","lightConfig","radius","step","circleShape","startAngle","width","sliderType","lineCap","handleSize","showTooltip","animation","HuiLightCard","_handleMoreInfo","loaded","loadRoundslider","_roundSliderStyle","roundSliderStyle","_jQuery","jQuery","roundSlider","change","_setBrightness","drag","_dragEvent","start","_showBrightness","stop","_hideBrightness","innerHTML","round","attrs","clearTimeout","_brightnessTimout","brightness_pct","toggleEntity","HuiMapCard","reflect","_leafletMap","invalidateSize","geo_location_sources","ratio","ar","toFixed","floor","hasUpdated","loadMap","_attachObserver","_resizeObserver","unobserve","_mapEl","removeEventListener","_debouncedResizeListener","_fitMap","root","paddingBottom","_drawEntities","zoom","default_zoom","_mapItems","LatLng","latitude","longitude","bounds","latLngBounds","getLatLng","fitBounds","pad","getZoom","setZoom","marker","mapItems","allEntities","concat","includesAll","source","passive","entityPicture","gps_accuracy","gpsAccuracy","divIcon","iconSize","interactive","circle","entityName","part","addLayer","ResizeObserver","observe","HuiMarkdownCard","HuiMediaControlCard","getConfigElement","getStubConfig","HuiPictureCard","clickable","HuiPictureElementsCard","camera_image","state_image","elements","camera_view","elementConfig","createStyledHuiElement","HuiPictureEntityCard","footer","STATES_OFF","Set","HuiPictureGlanceCard","_entitiesDialog","_entitiesToggle","force_dialog","dialog","_openDialog","_callService","SENSORS","moisture","temperature","conductivity","battery","HuiPlantStatusCard","computeAttributes","computeIcon","problem","indexOf","unit_of_measurement_dict","key","batLvl","sensors","midPoint","_Ax","_Ay","_Bx","_By","_Zx","_Zy","getPath","coords","next","Z","X","Y","path","last","coord","calcPoints","history","hours","detail","margin","yRatio","xRatio","getCoords","i","offset","depth","subItem","index","average","reduce","sum","entry","x","y","coordinates","apply","getTime","res","point","age","last_changed","abs","toString","HuiSensorCard","cardConfig","graph","_history","svg","_date","minute","_getHistory","endTime","setHours","getHours","stateHistory","fetchRecent","HuiShoppingListCard","_uncheckedItems","_checkedItems","_fetchData","_unsubEvents","connection","_addItem","_addKeyPress","repeat","id","complete","_completeItem","_saveEdit","_clearItems","checkedItems","uncheckedItems","checked","catch","blur","newItem","_newItem","focus","keyCode","cards","_createCardElement","_rebuildCard","once","cardElToReplace","newCardEl","replaceChild","curCardEl","thermostatConfig","modeIcons","auto","manual","heat","cool","off","fan_only","eco","dry","idle","HuiThermostatCard","_loaded","_initialLoad","mode","operation_mode","large","_broadCard","small","current_temperature","operation_list","modeItem","_renderIcon","sliderValue","uiValue","_genSliderValue","_updateSetTemp","target_temp_step","UNIT_F","updateComplete","_sliderType","target_temp_low","target_temp_high","min_temp","max_temp","_setTemperature","_stepSize","formatTemp","handle","currentMode","_handleModeClick","temps","spaceStepSize","stepSize","HuiVerticalStackCard","HuiWeatherForecastCard","createHuiElement","prop","service_data","computeNotifications","computeTooltip","stateName","tooltip","tapTooltip","computeActionTooltip","holdTooltip","newline","isHold","navigation_path","CARD_TYPES","CUSTOM_TYPE_PREFIX","TIMEOUT","_createElement","deepClone","console","_createErrorElement","message","startsWith","timer","whenDefined","ELEMENT_TYPES","_hideErrorElement","SPECIAL_TYPES","DOMAIN_TO_ELEMENT_TYPE","alert","automation","climate","fan","input_boolean","input_number","input_select","input_text","light","lock","media_player","remote","scene","script","sensor","switch","vacuum","water_heater","input_datetime","isTouch","navigator","maxTouchPoints","msMaxTouchPoints","LongPress","holdTime","ripple","held","cooldownStart","cooldownEnd","assign","borderRadius","position","pointerEvents","stopAnimation","event","preventDefault","cancelBubble","returnValue","clickStart","touches","pageX","pageY","startAnimation","clickEnd","dispatchEvent","Event","left","holdDown","simulatedRipple","getLongPress","body","longpress","longPressBind","directive","committer","turnOn","turnOnOffEntity","turnOnOffEntities","entityIds","domainsToCall","stateDomain","serviceDomain","DOMAINS_BADGES","HIDE_DOMAIN","subscribedRegistries","splitByAreas","registries","areasWithEntities","area","areaEntities","areaDevices","device","otherEntities","computeCards","entityCardOptions","friendly_name","unshift","computeDefaultViewStates","generateDefaultViewConfig","groupOrders","splittedByAreas","generateViewConfig","areaCards","splitted","gr1","gr2","badgeEntities","ungroupedEntitites","coll","badges","groupEntity","control","generateLovelaceConfig","viewEntity","idx","computeObjectId","location_name","subscribeEntityRegistry","all","components","__DEMO__","node","hold","actionConfig","navigate","every","state_not","HuiEntitiesToggle","_toggleEntities","some","forwardHaptic","HuiGenericEntityRow","showSecondary","secondary_info","toggleAttribute","UPDATE_INTERVAL","DEFAULT_FILTER","HuiImage","query","_attached","cameraImage","cameraView","_startUpdateCameraInterval","_stopUpdateCameraInterval","imageSrc","cameraObj","imageFallback","stateImage","_cameraImageSrc","stateFilter","_onImageError","_onImageLoad","_loadError","_lastImageHeight","_updateCameraImageSrc","_cameraUpdater","_image","offsetHeight","cameraState","fetchThumbnailUrlWithCache","FORMATS","format_date","datetime","format_date_time","format_time","INTERVAL_FORMAT","HuiTimestampDisplay","_startInterval","_clearInterval","ts","format","_format","_relative","_updateRelative","_interval","relativeTime","compareTime","includeTense","HuiWarningElement","HuiWarning","HuiConfiguratorNotificationItem","notification","HuiNotificationDrawer","narrow","open","notifications","_closeDrawer","_empty","_openChanged","_openTimer","HuiNotificationItemTemplate","HuiNotificationItem","HuiNotificationsButton","_clicked","opened","HuiPersistentNotificationItem","_computeTitle","created_at","_computeTooltip","_handleDismiss","notification_id","registeredDialog","dialogShowEvent","registerEditCardDialog","showEditCardDialog","editCardDialogParams","addCard","viewIndex","viewConf","replaceCard","cardIndex","origConf","ind","deleteCard","_origConf","swapCard","path1","path2","card1","card2","origView1","newView1","origCard","origView2","newView2","origView","moveCard","fromPath","toPath","fromView","toView","addView","viewConfig","replaceView","swapView","deleteView","_origView","registerEditLovelaceDialog","showEditLovelaceDialog","lovelace","showSaveDialog","saveDialogParams","registerEditViewDialog","showEditViewDialog","editViewDialogParams","HuiConditionalElement","_elements","updateElements","HuiIconElement","HuiImageElement","toggle","HuiServiceButtonElement","_service","HuiStateBadgeElement","HuiStateIconElement","HuiStateLabelElement","prefix","suffix","HuiClimateEntityRow","HuiCoverEntityRow","isTiltOnly","HuiGroupEntityRow","_computeCanToggle","HuiInputDatetimeEntityRow","has_date","_selectedValueChanged","_stopEventPropagation","has_time","_timeInputEl","trim","_dateInputEl","HuiInputNumberEntityRow","computeRTLDirection","_inputElement","HuiInputSelectEntityRow","_selectedChanged","options","option","selected","selectedItem","innerText","setInputSelectOption","HuiInputTextEntityRow","pattern","_inputEl","HuiLockEntityRow","HuiMediaPlayerEntityRow","supportsFeature","_computeControlIcon","_playPause","_nextTrack","_computeMediaTitle","media_artist","media_title","media_series_title","app_name","HuiSceneEntityRow","can_cancel","HuiScriptEntityRow","HuiSensorEntityRow","device_class","HuiTextEntityRow","HuiTimerEntityRow","_computeDisplay","oldStateObj","_calculateRemaining","_timeRemaining","HuiToggleEntityRow","editorLoaded","LovelacePanel","_closeEditor","_state","route","_columns","_forceFetchConfig","_errorMsg","_updateColumns","dockedSidebar","_fetchConfig","_lovelaceChanged","mqls","mql","matchMedia","addListener","_setLovelaceConfig","_regenerateConfig","matchColumns","cols","matches","_saving","showToast","text","dismissable","forceDiskRefresh","confMode","panel","log","editMode","enableFullEditMode","setEditMode","_updateLovelace","newConfig","previousConfig","previousMode","props","CSS_CACHE","JS_CACHE","loadedUnusedEntities","HUIRoot","_debouncedConfigChanged","_selectView","_curView","_unsubNotifications","_persistentNotifications","_routeData","_routeDataChanged","_notifications","_notificationsOpen","_handleNotificationsOpenChanged","_editMode","_editModeDisable","_editLovelace","_handleHelp","_deselect","_hideToolbar","_yamlMode","_handleRefresh","_handleUnusedEntities","_editModeEnable","_handleViewSelected","_moveViewLeft","_editView","_moveViewRight","_addView","haStyle","_viewRoot","huiView","newSelectView","selectedView","selectedViewInt","oldLovelace","_loadResources","resources","_updateNotifications","hideToolbar","location","search","persistent","configurator","oldIndex","newIndex","_layout","scrollTarget","_viewCache","unusedEntities","background","resource","importHref","warn","editCodeLoaded","getColumnIndex","columnEntityCount","size","minIndex","HUIView","_badges","renderStyles","_addCard","editModeChanged","configChanged","_createBadges","badge","_createCards","elementsToAppend","wrapper","cardSize","column","columnEl","HuiCallServiceRow","action_name","HuiDividerRow","HuiSectionRow","HuiWeblinkRow","HaEntityMarker","badgeTap"],"mappings":"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","file":"panel-lovelace.chunk.js","sourcesContent":["import \"@polymer/iron-flex-layout/iron-flex-layout-classes\";\nimport \"@polymer/paper-icon-button/paper-icon-button\";\nimport \"@polymer/paper-progress/paper-progress\";\nimport \"@polymer/paper-styles/element-styles/paper-material-styles\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport HassMediaPlayerEntity from \"../util/hass-media-player-model\";\nimport { fetchMediaPlayerThumbnailWithCache } from \"../data/media-player\";\n\nimport computeStateName from \"../common/entity/compute_state_name\";\nimport { EventsMixin } from \"../mixins/events-mixin\";\nimport LocalizeMixin from \"../mixins/localize-mixin\";\n\n/*\n * @appliesMixin LocalizeMixin\n * @appliesMixin EventsMixin\n */\nclass HaMediaPlayerCard extends LocalizeMixin(EventsMixin(PolymerElement)) {\n  static get template() {\n    return html`\n      <style\n        include=\"paper-material-styles iron-flex iron-flex-alignment iron-positioning\"\n      >\n        :host {\n          @apply --paper-material-elevation-1;\n          display: block;\n          position: relative;\n          font-size: 0px;\n          border-radius: 2px;\n        }\n\n        .banner {\n          position: relative;\n          background-color: white;\n          border-top-left-radius: 2px;\n          border-top-right-radius: 2px;\n        }\n\n        .banner:before {\n          display: block;\n          content: \"\";\n          width: 100%;\n          /* removed .25% from 16:9 ratio to fix YT black bars */\n          padding-top: 56%;\n          transition: padding-top 0.8s;\n        }\n\n        .banner.no-cover {\n          background-position: center center;\n          background-image: url(/static/images/card_media_player_bg.png);\n          background-repeat: no-repeat;\n          background-color: var(--primary-color);\n        }\n\n        .banner.content-type-music:before {\n          padding-top: 100%;\n        }\n\n        .banner.content-type-game:before {\n          padding-top: 100%;\n        }\n\n        .banner.no-cover:before {\n          padding-top: 88px;\n        }\n\n        .banner > .cover {\n          position: absolute;\n          top: 0;\n          left: 0;\n          right: 0;\n          bottom: 0;\n\n          border-top-left-radius: 2px;\n          border-top-right-radius: 2px;\n\n          background-position: center center;\n          background-size: cover;\n          transition: opacity 0.8s;\n          opacity: 1;\n        }\n\n        .banner.is-off > .cover {\n          opacity: 0;\n        }\n\n        .banner > .caption {\n          @apply --paper-font-caption;\n\n          position: absolute;\n          left: 0;\n          right: 0;\n          bottom: 0;\n\n          background-color: rgba(0, 0, 0, var(--dark-secondary-opacity));\n\n          padding: 8px 16px;\n\n          font-size: 14px;\n          font-weight: 500;\n          color: white;\n\n          transition: background-color 0.5s;\n        }\n\n        .banner.is-off > .caption {\n          background-color: initial;\n        }\n\n        .banner > .caption .title {\n          @apply --paper-font-common-nowrap;\n          font-size: 1.2em;\n          margin: 8px 0 4px;\n        }\n\n        .progress {\n          width: 100%;\n          height: var(--paper-progress-height, 4px);\n          margin-top: calc(-1 * var(--paper-progress-height, 4px));\n          --paper-progress-active-color: var(--accent-color);\n          --paper-progress-container-color: rgba(200, 200, 200, 0.5);\n        }\n\n        .controls {\n          position: relative;\n          @apply --paper-font-body1;\n          padding: 8px;\n          border-bottom-left-radius: 2px;\n          border-bottom-right-radius: 2px;\n          background-color: var(--paper-card-background-color, white);\n        }\n\n        .controls paper-icon-button {\n          width: 44px;\n          height: 44px;\n        }\n\n        .playback-controls {\n          direction: ltr;\n        }\n\n        paper-icon-button {\n          opacity: var(--dark-primary-opacity);\n        }\n\n        paper-icon-button[disabled] {\n          opacity: var(--dark-disabled-opacity);\n        }\n\n        paper-icon-button.primary {\n          width: 56px !important;\n          height: 56px !important;\n          background-color: var(--primary-color);\n          color: white;\n          border-radius: 50%;\n          padding: 8px;\n          transition: background-color 0.5s;\n        }\n\n        paper-icon-button.primary[disabled] {\n          background-color: rgba(0, 0, 0, var(--dark-disabled-opacity));\n        }\n\n        [invisible] {\n          visibility: hidden !important;\n        }\n      </style>\n\n      <div\n        class$=\"[[computeBannerClasses(playerObj, _coverShowing, _coverLoadError)]]\"\n      >\n        <div class=\"cover\" id=\"cover\"></div>\n\n        <div class=\"caption\">\n          [[_computeStateName(stateObj)]]\n          <div class=\"title\">[[computePrimaryText(localize, playerObj)]]</div>\n          [[playerObj.secondaryTitle]]<br />\n        </div>\n      </div>\n\n      <paper-progress\n        max=\"[[stateObj.attributes.media_duration]]\"\n        value=\"[[playbackPosition]]\"\n        hidden$=\"[[computeHideProgress(playerObj)]]\"\n        class=\"progress\"\n      ></paper-progress>\n\n      <div class=\"controls layout horizontal justified\">\n        <paper-icon-button\n          icon=\"hass:power\"\n          on-click=\"handleTogglePower\"\n          invisible$=\"[[computeHidePowerButton(playerObj)]]\"\n          class=\"self-center secondary\"\n        ></paper-icon-button>\n\n        <div class=\"playback-controls\">\n          <paper-icon-button\n            icon=\"hass:skip-previous\"\n            invisible$=\"[[!playerObj.supportsPreviousTrack]]\"\n            disabled=\"[[playerObj.isOff]]\"\n            on-click=\"handlePrevious\"\n          ></paper-icon-button>\n          <paper-icon-button\n            class=\"primary\"\n            icon=\"[[computePlaybackControlIcon(playerObj)]]\"\n            invisible$=\"[[!computePlaybackControlIcon(playerObj)]]\"\n            disabled=\"[[playerObj.isOff]]\"\n            on-click=\"handlePlaybackControl\"\n          ></paper-icon-button>\n          <paper-icon-button\n            icon=\"hass:skip-next\"\n            invisible$=\"[[!playerObj.supportsNextTrack]]\"\n            disabled=\"[[playerObj.isOff]]\"\n            on-click=\"handleNext\"\n          ></paper-icon-button>\n        </div>\n\n        <paper-icon-button\n          icon=\"hass:dots-vertical\"\n          on-click=\"handleOpenMoreInfo\"\n          class=\"self-center secondary\"\n        ></paper-icon-button>\n      </div>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      stateObj: Object,\n      playerObj: {\n        type: Object,\n        computed: \"computePlayerObj(hass, stateObj)\",\n        observer: \"playerObjChanged\",\n      },\n      playbackControlIcon: {\n        type: String,\n        computed: \"computePlaybackControlIcon(playerObj)\",\n      },\n      playbackPosition: Number,\n      _coverShowing: {\n        type: Boolean,\n        value: false,\n      },\n      _coverLoadError: {\n        type: Boolean,\n        value: false,\n      },\n    };\n  }\n\n  async playerObjChanged(playerObj, oldPlayerObj) {\n    if (playerObj.isPlaying && playerObj.showProgress) {\n      if (!this._positionTracking) {\n        this._positionTracking = setInterval(\n          () => this.updatePlaybackPosition(),\n          1000\n        );\n      }\n    } else if (this._positionTracking) {\n      clearInterval(this._positionTracking);\n      this._positionTracking = null;\n    }\n    if (playerObj.showProgress) {\n      this.updatePlaybackPosition();\n    }\n\n    const picture = playerObj.stateObj.attributes.entity_picture;\n    const oldPicture =\n      oldPlayerObj && oldPlayerObj.stateObj.attributes.entity_picture;\n\n    if (picture !== oldPicture && !picture) {\n      this.$.cover.style.backgroundImage = \"\";\n      return;\n    }\n    if (picture === oldPicture) {\n      return;\n    }\n\n    // We have a new picture url\n    // If entity picture is non-relative, we use that url directly.\n    if (picture.substr(0, 1) !== \"/\") {\n      this._coverShowing = true;\n      this._coverLoadError = false;\n      this.$.cover.style.backgroundImage = `url(${picture})`;\n      return;\n    }\n\n    try {\n      const {\n        content_type: contentType,\n        content,\n      } = await fetchMediaPlayerThumbnailWithCache(\n        this.hass,\n        playerObj.stateObj.entity_id\n      );\n      this._coverShowing = true;\n      this._coverLoadError = false;\n      this.$.cover.style.backgroundImage = `url(data:${contentType};base64,${content})`;\n    } catch (err) {\n      this._coverShowing = false;\n      this._coverLoadError = true;\n      this.$.cover.style.backgroundImage = \"\";\n    }\n  }\n\n  updatePlaybackPosition() {\n    this.playbackPosition = this.playerObj.currentProgress;\n  }\n\n  computeBannerClasses(playerObj, coverShowing, coverLoadError) {\n    var cls = \"banner\";\n\n    if (playerObj.isOff || playerObj.isIdle) {\n      cls += \" is-off no-cover\";\n    } else if (\n      !playerObj.stateObj.attributes.entity_picture ||\n      coverLoadError ||\n      !coverShowing\n    ) {\n      cls += \" no-cover\";\n    } else if (playerObj.stateObj.attributes.media_content_type === \"music\") {\n      cls += \" content-type-music\";\n    } else if (playerObj.stateObj.attributes.media_content_type === \"game\") {\n      cls += \" content-type-game\";\n    }\n    return cls;\n  }\n\n  computeHideProgress(playerObj) {\n    return !playerObj.showProgress;\n  }\n\n  computeHidePowerButton(playerObj) {\n    return playerObj.isOff\n      ? !playerObj.supportsTurnOn\n      : !playerObj.supportsTurnOff;\n  }\n\n  computePlayerObj(hass, stateObj) {\n    return new HassMediaPlayerEntity(hass, stateObj);\n  }\n\n  computePrimaryText(localize, playerObj) {\n    return (\n      playerObj.primaryTitle ||\n      localize(`state.media_player.${playerObj.stateObj.state}`) ||\n      localize(`state.default.${playerObj.stateObj.state}`) ||\n      playerObj.stateObj.state\n    );\n  }\n\n  computePlaybackControlIcon(playerObj) {\n    if (playerObj.isPlaying) {\n      return playerObj.supportsPause ? \"hass:pause\" : \"hass:stop\";\n    }\n    if (playerObj.hasMediaControl || playerObj.isOff || playerObj.isIdle) {\n      if (\n        playerObj.hasMediaControl &&\n        playerObj.supportsPause &&\n        !playerObj.isPaused\n      ) {\n        return \"hass:play-pause\";\n      }\n      return playerObj.supportsPlay ? \"hass:play\" : null;\n    }\n    return \"\";\n  }\n\n  _computeStateName(stateObj) {\n    return computeStateName(stateObj);\n  }\n\n  handleNext(ev) {\n    ev.stopPropagation();\n    this.playerObj.nextTrack();\n  }\n\n  handleOpenMoreInfo(ev) {\n    ev.stopPropagation();\n    this.fire(\"hass-more-info\", { entityId: this.stateObj.entity_id });\n  }\n\n  handlePlaybackControl(ev) {\n    ev.stopPropagation();\n    this.playerObj.mediaPlayPause();\n  }\n\n  handlePrevious(ev) {\n    ev.stopPropagation();\n    this.playerObj.previousTrack();\n  }\n\n  handleTogglePower(ev) {\n    ev.stopPropagation();\n    this.playerObj.togglePower();\n  }\n}\ncustomElements.define(\"ha-media_player-card\", HaMediaPlayerCard);\n","import { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport computeStateName from \"../common/entity/compute_state_name\";\n\nimport \"../components/ha-card\";\nimport \"../components/ha-icon\";\n\nimport { EventsMixin } from \"../mixins/events-mixin\";\nimport LocalizeMixin from \"../mixins/localize-mixin\";\nimport { computeRTL } from \"../common/util/compute_rtl\";\n\n/*\n * @appliesMixin LocalizeMixin\n */\nclass HaWeatherCard extends LocalizeMixin(EventsMixin(PolymerElement)) {\n  static get template() {\n    return html`\n      <style>\n        :host {\n          cursor: pointer;\n        }\n\n        .content {\n          padding: 0 20px 20px;\n        }\n\n        ha-icon {\n          color: var(--paper-item-icon-color);\n        }\n\n        .header {\n          font-family: var(--paper-font-headline_-_font-family);\n          -webkit-font-smoothing: var(\n            --paper-font-headline_-_-webkit-font-smoothing\n          );\n          font-size: var(--paper-font-headline_-_font-size);\n          font-weight: var(--paper-font-headline_-_font-weight);\n          letter-spacing: var(--paper-font-headline_-_letter-spacing);\n          line-height: var(--paper-font-headline_-_line-height);\n          text-rendering: var(\n            --paper-font-common-expensive-kerning_-_text-rendering\n          );\n          opacity: var(--dark-primary-opacity);\n          padding: 24px 16px 16px;\n          display: flex;\n          align-items: baseline;\n        }\n\n        .name {\n          margin-left: 16px;\n          font-size: 16px;\n          color: var(--secondary-text-color);\n        }\n\n        :host([rtl]) .name {\n          margin-left: 0px;\n          margin-right: 16px;\n        }\n\n        .now {\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n          flex-wrap: wrap;\n        }\n\n        .main {\n          display: flex;\n          align-items: center;\n          margin-right: 32px;\n        }\n\n        :host([rtl]) .main {\n          margin-right: 0px;\n        }\n\n        .main ha-icon {\n          --iron-icon-height: 72px;\n          --iron-icon-width: 72px;\n          margin-right: 8px;\n        }\n\n        :host([rtl]) .main ha-icon {\n          margin-right: 0px;\n        }\n\n        .main .temp {\n          font-size: 52px;\n          line-height: 1em;\n          position: relative;\n        }\n\n        :host([rtl]) .main .temp {\n          direction: ltr;\n          margin-right: 28px;\n        }\n\n        .main .temp span {\n          font-size: 24px;\n          line-height: 1em;\n          position: absolute;\n          top: 4px;\n        }\n\n        .measurand {\n          display: inline-block;\n        }\n\n        :host([rtl]) .measurand {\n          direction: ltr;\n        }\n\n        .forecast {\n          margin-top: 16px;\n          display: flex;\n          justify-content: space-between;\n        }\n\n        .forecast div {\n          flex: 0 0 auto;\n          text-align: center;\n        }\n\n        .forecast .icon {\n          margin: 4px 0;\n          text-align: center;\n        }\n\n        :host([rtl]) .forecast .temp {\n          direction: ltr;\n        }\n\n        .weekday {\n          font-weight: bold;\n        }\n\n        .attributes,\n        .templow,\n        .precipitation {\n          color: var(--secondary-text-color);\n        }\n\n        :host([rtl]) .precipitation {\n          direction: ltr;\n        }\n      </style>\n      <ha-card>\n        <div class=\"header\">\n          [[computeState(stateObj.state, localize)]]\n          <div class=\"name\">[[computeName(stateObj)]]</div>\n        </div>\n        <div class=\"content\">\n          <div class=\"now\">\n            <div class=\"main\">\n              <template is=\"dom-if\" if=\"[[showWeatherIcon(stateObj.state)]]\">\n                <ha-icon icon=\"[[getWeatherIcon(stateObj.state)]]\"></ha-icon>\n              </template>\n              <div class=\"temp\">\n                [[stateObj.attributes.temperature]]<span\n                  >[[getUnit('temperature')]]</span\n                >\n              </div>\n            </div>\n            <div class=\"attributes\">\n              <template\n                is=\"dom-if\"\n                if=\"[[_showValue(stateObj.attributes.pressure)]]\"\n              >\n                <div>\n                  [[localize('ui.card.weather.attributes.air_pressure')]]:\n                  <span class=\"measurand\">\n                    [[stateObj.attributes.pressure]] [[getUnit('air_pressure')]]\n                  </span>\n                </div>\n              </template>\n              <template\n                is=\"dom-if\"\n                if=\"[[_showValue(stateObj.attributes.humidity)]]\"\n              >\n                <div>\n                  [[localize('ui.card.weather.attributes.humidity')]]:\n                  <span class=\"measurand\"\n                    >[[stateObj.attributes.humidity]] %</span\n                  >\n                </div>\n              </template>\n              <template\n                is=\"dom-if\"\n                if=\"[[_showValue(stateObj.attributes.wind_speed)]]\"\n              >\n                <div>\n                  [[localize('ui.card.weather.attributes.wind_speed')]]:\n                  <span class=\"measurand\">\n                    [[getWindSpeed(stateObj.attributes.wind_speed)]]\n                  </span>\n                  [[getWindBearing(stateObj.attributes.wind_bearing, localize)]]\n                </div>\n              </template>\n            </div>\n          </div>\n          <template is=\"dom-if\" if=\"[[forecast]]\">\n            <div class=\"forecast\">\n              <template is=\"dom-repeat\" items=\"[[forecast]]\">\n                <div>\n                  <div class=\"weekday\">\n                    [[computeDate(item.datetime)]]<br />\n                    <template is=\"dom-if\" if=\"[[!_showValue(item.templow)]]\">\n                      [[computeTime(item.datetime)]]\n                    </template>\n                  </div>\n                  <template is=\"dom-if\" if=\"[[_showValue(item.condition)]]\">\n                    <div class=\"icon\">\n                      <ha-icon\n                        icon=\"[[getWeatherIcon(item.condition)]]\"\n                      ></ha-icon>\n                    </div>\n                  </template>\n                  <div class=\"temp\">\n                    [[item.temperature]] [[getUnit('temperature')]]\n                  </div>\n                  <template is=\"dom-if\" if=\"[[_showValue(item.templow)]]\">\n                    <div class=\"templow\">\n                      [[item.templow]] [[getUnit('temperature')]]\n                    </div>\n                  </template>\n                  <template is=\"dom-if\" if=\"[[_showValue(item.precipitation)]]\">\n                    <div class=\"precipitation\">\n                      [[item.precipitation]] [[getUnit('precipitation')]]\n                    </div>\n                  </template>\n                </div>\n              </template>\n            </div>\n          </template>\n        </div>\n      </ha-card>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      config: Object,\n      stateObj: Object,\n      forecast: {\n        type: Array,\n        computed: \"computeForecast(stateObj.attributes.forecast)\",\n      },\n      rtl: {\n        type: Boolean,\n        reflectToAttribute: true,\n        computed: \"_computeRTL(hass)\",\n      },\n    };\n  }\n\n  constructor() {\n    super();\n    this.cardinalDirections = [\n      \"N\",\n      \"NNE\",\n      \"NE\",\n      \"ENE\",\n      \"E\",\n      \"ESE\",\n      \"SE\",\n      \"SSE\",\n      \"S\",\n      \"SSW\",\n      \"SW\",\n      \"WSW\",\n      \"W\",\n      \"WNW\",\n      \"NW\",\n      \"NNW\",\n      \"N\",\n    ];\n    this.weatherIcons = {\n      \"clear-night\": \"hass:weather-night\",\n      cloudy: \"hass:weather-cloudy\",\n      fog: \"hass:weather-fog\",\n      hail: \"hass:weather-hail\",\n      lightning: \"hass:weather-lightning\",\n      \"lightning-rainy\": \"hass:weather-lightning-rainy\",\n      partlycloudy: \"hass:weather-partlycloudy\",\n      pouring: \"hass:weather-pouring\",\n      rainy: \"hass:weather-rainy\",\n      snowy: \"hass:weather-snowy\",\n      \"snowy-rainy\": \"hass:weather-snowy-rainy\",\n      sunny: \"hass:weather-sunny\",\n      windy: \"hass:weather-windy\",\n      \"windy-variant\": \"hass:weather-windy-variant\",\n    };\n  }\n\n  ready() {\n    this.addEventListener(\"click\", this._onClick);\n    super.ready();\n  }\n\n  _onClick() {\n    this.fire(\"hass-more-info\", { entityId: this.stateObj.entity_id });\n  }\n\n  computeForecast(forecast) {\n    return forecast && forecast.slice(0, 5);\n  }\n\n  getUnit(measure) {\n    const lengthUnit = this.hass.config.unit_system.length || \"\";\n    switch (measure) {\n      case \"air_pressure\":\n        return lengthUnit === \"km\" ? \"hPa\" : \"inHg\";\n      case \"length\":\n        return lengthUnit;\n      case \"precipitation\":\n        return lengthUnit === \"km\" ? \"mm\" : \"in\";\n      default:\n        return this.hass.config.unit_system[measure] || \"\";\n    }\n  }\n\n  computeState(state, localize) {\n    return localize(`state.weather.${state}`) || state;\n  }\n\n  computeName(stateObj) {\n    return (this.config && this.config.name) || computeStateName(stateObj);\n  }\n\n  showWeatherIcon(condition) {\n    return condition in this.weatherIcons;\n  }\n\n  getWeatherIcon(condition) {\n    return this.weatherIcons[condition];\n  }\n\n  windBearingToText(degree) {\n    const degreenum = parseInt(degree);\n    if (isFinite(degreenum)) {\n      return this.cardinalDirections[(((degreenum + 11.25) / 22.5) | 0) % 16];\n    }\n    return degree;\n  }\n\n  getWindSpeed(speed) {\n    return `${speed} ${this.getUnit(\"length\")}/h`;\n  }\n\n  getWindBearing(bearing, localize) {\n    if (bearing != null) {\n      const cardinalDirection = this.windBearingToText(bearing);\n      return `(${localize(\n        `ui.card.weather.cardinal_direction.${cardinalDirection.toLowerCase()}`\n      ) || cardinalDirection})`;\n    }\n    return ``;\n  }\n\n  _showValue(item) {\n    return typeof item !== \"undefined\" && item !== null;\n  }\n\n  computeDate(data) {\n    const date = new Date(data);\n    return date.toLocaleDateString(this.hass.language, { weekday: \"short\" });\n  }\n\n  computeTime(data) {\n    const date = new Date(data);\n    return date.toLocaleTimeString(this.hass.language, { hour: \"numeric\" });\n  }\n\n  _computeRTL(hass) {\n    return computeRTL(hass);\n  }\n}\ncustomElements.define(\"ha-weather-card\", HaWeatherCard);\n","// Load a resource and get a promise when loading done.\n// From: https://davidwalsh.name/javascript-loader\n\nconst _load = (\n  tag: \"link\" | \"script\" | \"img\",\n  url: string,\n  type?: \"module\"\n) => {\n  // This promise will be used by Promise.all to determine success or failure\n  return new Promise((resolve, reject) => {\n    const element = document.createElement(tag);\n    let attr = \"src\";\n    let parent = \"body\";\n\n    // Important success and error for the promise\n    element.onload = () => resolve(url);\n    element.onerror = () => reject(url);\n\n    // Need to set different attributes depending on tag type\n    switch (tag) {\n      case \"script\":\n        (element as HTMLScriptElement).async = true;\n        if (type) {\n          (element as HTMLScriptElement).type = type;\n        }\n        break;\n      case \"link\":\n        (element as HTMLLinkElement).type = \"text/css\";\n        (element as HTMLLinkElement).rel = \"stylesheet\";\n        attr = \"href\";\n        parent = \"head\";\n    }\n\n    // Inject into document to kick off loading\n    element[attr] = url;\n    document[parent].appendChild(element);\n  });\n};\n\nexport const loadCSS = (url: string) => _load(\"link\", url);\nexport const loadJS = (url: string) => _load(\"script\", url);\nexport const loadImg = (url: string) => _load(\"img\", url);\nexport const loadModule = (url: string) => _load(\"script\", url, \"module\");\n","/**\n * Scroll to a specific y coordinate.\n *\n * Copied from paper-scroll-header-panel.\n *\n * @method scroll\n * @param {number} top The coordinate to scroll to, along the y-axis.\n * @param {boolean} smooth true if the scroll position should be smoothly adjusted.\n */\nexport default function scrollToTarget(element, target) {\n  // the scroll event will trigger _updateScrollState directly,\n  // However, _updateScrollState relies on the previous `scrollTop` to update the states.\n  // Calling _updateScrollState will ensure that the states are synced correctly.\n  const top = 0;\n  const scroller = target;\n  const easingFn = function easeOutQuad(t, b, c, d) {\n    /* eslint-disable no-param-reassign, space-infix-ops, no-mixed-operators */\n    t /= d;\n    return -c * t * (t - 2) + b;\n    /* eslint-enable no-param-reassign, space-infix-ops, no-mixed-operators */\n  };\n  const animationId = Math.random();\n  const duration = 200;\n  const startTime = Date.now();\n  const currentScrollTop = scroller.scrollTop;\n  const deltaScrollTop = top - currentScrollTop;\n  element._currentAnimationId = animationId;\n  (function updateFrame() {\n    const now = Date.now();\n    const elapsedTime = now - startTime;\n    if (elapsedTime > duration) {\n      scroller.scrollTop = top;\n    } else if (element._currentAnimationId === animationId) {\n      scroller.scrollTop = easingFn(\n        elapsedTime,\n        currentScrollTop,\n        deltaScrollTop,\n        duration\n      );\n      requestAnimationFrame(updateFrame.bind(element));\n    }\n  }.call(element));\n}\n","import { Map } from \"leaflet\";\n\n// Sets up a Leaflet map on the provided DOM element\nexport type LeafletModuleType = typeof import(\"leaflet\");\n\nexport const setupLeafletMap = async (\n  mapElement: HTMLElement\n): Promise<[Map, LeafletModuleType]> => {\n  if (!mapElement.parentNode) {\n    throw new Error(\"Cannot setup Leaflet map on disconnected element\");\n  }\n  // tslint:disable-next-line\n  const Leaflet = (await import(/* webpackChunkName: \"leaflet\" */ \"leaflet\")) as LeafletModuleType;\n  Leaflet.Icon.Default.imagePath = \"/static/images/leaflet/images/\";\n\n  const map = Leaflet.map(mapElement);\n  const style = document.createElement(\"link\");\n  style.setAttribute(\"href\", \"/static/images/leaflet/leaflet.css\");\n  style.setAttribute(\"rel\", \"stylesheet\");\n  mapElement.parentNode.appendChild(style);\n  map.setView([52.3731339, 4.8903147], 13);\n  Leaflet.tileLayer(\n    `https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}${\n      Leaflet.Browser.retina ? \"@2x.png\" : \".png\"\n    }`,\n    {\n      attribution:\n        '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a>, &copy; <a href=\"https://carto.com/attributions\">CARTO</a>',\n      subdomains: \"abcd\",\n      minZoom: 0,\n      maxZoom: 20,\n    }\n  ).addTo(map);\n\n  return [map, Leaflet];\n};\n","import { HassEntities } from \"home-assistant-js-websocket\";\nimport { DEFAULT_VIEW_ENTITY_ID } from \"../const\";\nimport { GroupEntity } from \"../../types\";\n\n// Return an ordered array of available views\nexport default function extractViews(entities: HassEntities): GroupEntity[] {\n  const views: GroupEntity[] = [];\n\n  Object.keys(entities).forEach((entityId) => {\n    const entity = entities[entityId];\n    if (entity.attributes.view) {\n      views.push(entity as GroupEntity);\n    }\n  });\n\n  views.sort((view1, view2) => {\n    if (view1.entity_id === DEFAULT_VIEW_ENTITY_ID) {\n      return -1;\n    }\n    if (view2.entity_id === DEFAULT_VIEW_ENTITY_ID) {\n      return 1;\n    }\n    return view1.attributes.order - view2.attributes.order;\n  });\n\n  return views;\n}\n","import { HassEntities } from \"home-assistant-js-websocket\";\nimport { GroupEntity } from \"../../types\";\n\nexport default function getGroupEntities(\n  entities: HassEntities,\n  group: GroupEntity\n) {\n  const result = {};\n\n  group.attributes.entity_id.forEach((entityId) => {\n    const entity = entities[entityId];\n\n    if (entity) {\n      result[entity.entity_id] = entity;\n    }\n  });\n\n  return result;\n}\n","import { HassEntities } from \"home-assistant-js-websocket\";\nimport computeDomain from \"./compute_domain\";\nimport getGroupEntities from \"./get_group_entities\";\nimport { GroupEntity } from \"../../types\";\n\n// Return an object containing all entities that the view will show\n// including embedded groups.\nexport default function getViewEntities(\n  entities: HassEntities,\n  view: GroupEntity\n): HassEntities {\n  const viewEntities = {};\n\n  view.attributes.entity_id.forEach((entityId) => {\n    const entity = entities[entityId];\n\n    if (entity && !entity.attributes.hidden) {\n      viewEntities[entity.entity_id] = entity;\n\n      if (computeDomain(entity.entity_id) === \"group\") {\n        const groupEntities = getGroupEntities(entities, entity as GroupEntity);\n\n        Object.keys(groupEntities).forEach((grEntityId) => {\n          const grEntity = groupEntities[grEntityId];\n\n          if (!grEntity.attributes.hidden) {\n            viewEntities[grEntityId] = grEntity;\n          }\n        });\n      }\n    }\n  });\n\n  return viewEntities;\n}\n","import computeDomain from \"./compute_domain\";\nimport { HassEntities } from \"home-assistant-js-websocket\";\nimport { GroupEntity } from \"../../types\";\n\n// Split a collection into a list of groups and a 'rest' list of ungrouped\n// entities.\n// Returns { groups: [], ungrouped: {} }\nexport default function splitByGroups(entities: HassEntities) {\n  const groups: GroupEntity[] = [];\n  const ungrouped: HassEntities = {};\n\n  Object.keys(entities).forEach((entityId) => {\n    const entity = entities[entityId];\n\n    if (computeDomain(entityId) === \"group\") {\n      groups.push(entity as GroupEntity);\n    } else {\n      ungrouped[entityId] = entity;\n    }\n  });\n\n  groups.forEach((group) =>\n    group.attributes.entity_id.forEach((entityId) => {\n      delete ungrouped[entityId];\n    })\n  );\n\n  return { groups, ungrouped };\n}\n","const validEntityId = /^(\\w+)\\.(\\w+)$/;\nexport default (entityId: string) => validEntityId.test(entityId);\n","export const compare = (a: string, b: string) => {\n  if (a < b) {\n    return -1;\n  }\n  if (a > b) {\n    return 1;\n  }\n\n  return 0;\n};\n\nexport const caseInsensitiveCompare = (a: string, b: string) =>\n  compare(a.toLowerCase(), b.toLowerCase());\n","// Handle 16x9, 16:9, 1.78x1, 1.78:1, 1.78\n// Ignore everything else\nconst parseOrThrow = (num) => {\n  const parsed = parseFloat(num);\n  if (isNaN(parsed)) {\n    throw new Error(`${num} is not a number`);\n  }\n  return parsed;\n};\n\nexport default function parseAspectRatio(input: string) {\n  if (!input) {\n    return null;\n  }\n  try {\n    if (input.endsWith(\"%\")) {\n      return { w: 100, h: parseOrThrow(input.substr(0, input.length - 1)) };\n    }\n\n    const arr = input.replace(\":\", \"x\").split(\"x\");\n    if (arr.length === 0) {\n      return null;\n    }\n\n    return arr.length === 1\n      ? { w: parseOrThrow(arr[0]), h: 1 }\n      : { w: parseOrThrow(arr[0]), h: parseOrThrow(arr[1]) };\n  } catch (err) {\n    // Ignore the error\n  }\n  return null;\n}\n","export const afterNextRender = (cb: () => void): void => {\n  requestAnimationFrame(() => setTimeout(cb, 0));\n};\n","import { UnsubscribeFunc, Connection } from \"home-assistant-js-websocket\";\n\nexport const subscribeOne = async <T>(\n  conn: Connection,\n  subscribe: (conn: Connection, onChange: (items: T) => void) => UnsubscribeFunc\n) =>\n  new Promise<T>((resolve) => {\n    const unsub = subscribe(conn, (items) => {\n      unsub();\n      resolve(items);\n    });\n  });\n","import { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport \"./ha-progress-button\";\nimport { EventsMixin } from \"../../mixins/events-mixin\";\n\n/*\n * @appliesMixin EventsMixin\n */\nclass HaCallServiceButton extends EventsMixin(PolymerElement) {\n  static get template() {\n    return html`\n      <ha-progress-button\n        id=\"progress\"\n        progress=\"[[progress]]\"\n        on-click=\"buttonTapped\"\n        ><slot></slot\n      ></ha-progress-button>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: {\n        type: Object,\n      },\n\n      progress: {\n        type: Boolean,\n        value: false,\n      },\n\n      domain: {\n        type: String,\n      },\n\n      service: {\n        type: String,\n      },\n\n      serviceData: {\n        type: Object,\n        value: {},\n      },\n    };\n  }\n\n  buttonTapped() {\n    this.progress = true;\n    var el = this;\n    var eventData = {\n      domain: this.domain,\n      service: this.service,\n      serviceData: this.serviceData,\n    };\n\n    this.hass\n      .callService(this.domain, this.service, this.serviceData)\n      .then(\n        function() {\n          el.progress = false;\n          el.$.progress.actionSuccess();\n          eventData.success = true;\n        },\n        function() {\n          el.progress = false;\n          el.$.progress.actionError();\n          eventData.success = false;\n        }\n      )\n      .then(function() {\n        el.fire(\"hass-service-called\", eventData);\n      });\n  }\n}\n\ncustomElements.define(\"ha-call-service-button\", HaCallServiceButton);\n","import \"@material/mwc-button\";\nimport \"@polymer/paper-spinner/paper-spinner\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nclass HaProgressButton extends PolymerElement {\n  static get template() {\n    return html`\n      <style>\n        .container {\n          position: relative;\n          display: inline-block;\n        }\n\n        mwc-button {\n          transition: all 1s;\n        }\n\n        .success mwc-button {\n          --mdc-theme-primary: white;\n          background-color: var(--google-green-500);\n          transition: none;\n        }\n\n        .error mwc-button {\n          --mdc-theme-primary: white;\n          background-color: var(--google-red-500);\n          transition: none;\n        }\n\n        .progress {\n          @apply --layout;\n          @apply --layout-center-center;\n          position: absolute;\n          top: 0;\n          left: 0;\n          right: 0;\n          bottom: 0;\n        }\n      </style>\n      <div class=\"container\" id=\"container\">\n        <mwc-button\n          id=\"button\"\n          disabled=\"[[computeDisabled(disabled, progress)]]\"\n          on-click=\"buttonTapped\"\n        >\n          <slot></slot>\n        </mwc-button>\n        <template is=\"dom-if\" if=\"[[progress]]\">\n          <div class=\"progress\"><paper-spinner active=\"\"></paper-spinner></div>\n        </template>\n      </div>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: {\n        type: Object,\n      },\n\n      progress: {\n        type: Boolean,\n        value: false,\n      },\n\n      disabled: {\n        type: Boolean,\n        value: false,\n      },\n    };\n  }\n\n  tempClass(className) {\n    var classList = this.$.container.classList;\n    classList.add(className);\n    setTimeout(() => {\n      classList.remove(className);\n    }, 1000);\n  }\n\n  ready() {\n    super.ready();\n    this.addEventListener(\"click\", (ev) => this.buttonTapped(ev));\n  }\n\n  buttonTapped(ev) {\n    if (this.progress) ev.stopPropagation();\n  }\n\n  actionSuccess() {\n    this.tempClass(\"success\");\n  }\n\n  actionError() {\n    this.tempClass(\"error\");\n  }\n\n  computeDisabled(disabled, progress) {\n    return disabled || progress;\n  }\n}\n\ncustomElements.define(\"ha-progress-button\", HaProgressButton);\n","import {\n  LitElement,\n  html,\n  PropertyValues,\n  TemplateResult,\n  css,\n  CSSResult,\n  customElement,\n  property,\n} from \"lit-element\";\n\nimport { HassEntity } from \"home-assistant-js-websocket\";\nimport { classMap } from \"lit-html/directives/class-map\";\nimport { fireEvent } from \"../../common/dom/fire_event\";\nimport { HomeAssistant } from \"../../types\";\n\nimport computeStateDomain from \"../../common/entity/compute_state_domain\";\nimport computeStateName from \"../../common/entity/compute_state_name\";\nimport domainIcon from \"../../common/entity/domain_icon\";\nimport stateIcon from \"../../common/entity/state_icon\";\nimport timerTimeRemaining from \"../../common/entity/timer_time_remaining\";\nimport secondsToDuration from \"../../common/datetime/seconds_to_duration\";\n\nimport \"../ha-label-badge\";\n\n@customElement(\"ha-state-label-badge\")\nexport class HaStateLabelBadge extends LitElement {\n  @property() public hass?: HomeAssistant;\n\n  @property() public state?: HassEntity;\n\n  @property() private _timerTimeRemaining?: number;\n\n  private _connected?: boolean;\n\n  private _updateRemaining?: number;\n\n  public connectedCallback(): void {\n    super.connectedCallback();\n    this._connected = true;\n    this.startInterval(this.state);\n  }\n\n  public disconnectedCallback(): void {\n    super.disconnectedCallback();\n    this._connected = false;\n    this.clearInterval();\n  }\n\n  protected render(): TemplateResult | void {\n    const state = this.state;\n\n    if (!state) {\n      return html`\n        <ha-label-badge\n          class=\"warning\"\n          label=\"${this.hass!.localize(\"state_badge.default.error\")}\"\n          icon=\"hass:alert\"\n          description=\"${this.hass!.localize(\n            \"state_badge.default.entity_not_found\"\n          )}\"\n        ></ha-label-badge>\n      `;\n    }\n\n    const domain = computeStateDomain(state);\n\n    return html`\n      <ha-label-badge\n        class=\"${classMap({\n          [domain]: true,\n          \"has-unit_of_measurement\": \"unit_of_measurement\" in state.attributes,\n        })}\"\n        .value=\"${this._computeValue(domain, state)}\"\n        .icon=\"${this._computeIcon(domain, state)}\"\n        .image=\"${state.attributes.entity_picture}\"\n        .label=\"${this._computeLabel(domain, state, this._timerTimeRemaining)}\"\n        .description=\"${computeStateName(state)}\"\n      ></ha-label-badge>\n    `;\n  }\n\n  protected firstUpdated(changedProperties: PropertyValues): void {\n    super.firstUpdated(changedProperties);\n    this.addEventListener(\"click\", (ev) => {\n      ev.stopPropagation();\n      if (this.state) {\n        fireEvent(this, \"hass-more-info\", { entityId: this.state.entity_id });\n      }\n    });\n  }\n\n  protected updated(changedProperties: PropertyValues): void {\n    super.updated(changedProperties);\n\n    if (this._connected && changedProperties.has(\"state\")) {\n      this.startInterval(this.state);\n    }\n  }\n\n  private _computeValue(domain: string, state: HassEntity) {\n    switch (domain) {\n      case \"binary_sensor\":\n      case \"device_tracker\":\n      case \"updater\":\n      case \"sun\":\n      case \"alarm_control_panel\":\n      case \"timer\":\n        return null;\n      case \"sensor\":\n      default:\n        return state.state === \"unknown\"\n          ? \"-\"\n          : this.hass!.localize(`component.${domain}.state.${state.state}`) ||\n              state.state;\n    }\n  }\n\n  private _computeIcon(domain: string, state: HassEntity) {\n    if (state.state === \"unavailable\") {\n      return null;\n    }\n    switch (domain) {\n      case \"alarm_control_panel\":\n        if (state.state === \"pending\") {\n          return \"hass:clock-fast\";\n        }\n        if (state.state === \"armed_away\") {\n          return \"hass:nature\";\n        }\n        if (state.state === \"armed_home\") {\n          return \"hass:home-variant\";\n        }\n        if (state.state === \"armed_night\") {\n          return \"hass:weather-night\";\n        }\n        if (state.state === \"armed_custom_bypass\") {\n          return \"hass:shield-home\";\n        }\n        if (state.state === \"triggered\") {\n          return \"hass:alert-circle\";\n        }\n        // state == 'disarmed'\n        return domainIcon(domain, state.state);\n      case \"binary_sensor\":\n      case \"device_tracker\":\n      case \"updater\":\n      case \"person\":\n        return stateIcon(state);\n      case \"sun\":\n        return state.state === \"above_horizon\"\n          ? domainIcon(domain)\n          : \"hass:brightness-3\";\n      case \"timer\":\n        return state.state === \"active\" ? \"hass:timer\" : \"hass:timer-off\";\n      default:\n        return null;\n    }\n  }\n\n  private _computeLabel(domain, state, _timerTimeRemaining) {\n    if (\n      state.state === \"unavailable\" ||\n      [\"device_tracker\", \"alarm_control_panel\", \"person\"].includes(domain)\n    ) {\n      // Localize the state with a special state_badge namespace, which has variations of\n      // the state translations that are truncated to fit within the badge label. Translations\n      // are only added for device_tracker, alarm_control_panel and person.\n      return (\n        this.hass!.localize(`state_badge.${domain}.${state.state}`) ||\n        this.hass!.localize(`state_badge.default.${state.state}`) ||\n        state.state\n      );\n    }\n    if (domain === \"timer\") {\n      return secondsToDuration(_timerTimeRemaining);\n    }\n    return state.attributes.unit_of_measurement || null;\n  }\n\n  private clearInterval() {\n    if (this._updateRemaining) {\n      clearInterval(this._updateRemaining);\n      this._updateRemaining = undefined;\n    }\n  }\n\n  private startInterval(stateObj) {\n    this.clearInterval();\n    if (stateObj && computeStateDomain(stateObj) === \"timer\") {\n      this.calculateTimerRemaining(stateObj);\n\n      if (stateObj.state === \"active\") {\n        this._updateRemaining = window.setInterval(\n          () => this.calculateTimerRemaining(this.state),\n          1000\n        );\n      }\n    }\n  }\n\n  private calculateTimerRemaining(stateObj) {\n    this._timerTimeRemaining = timerTimeRemaining(stateObj);\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      :host {\n        cursor: pointer;\n      }\n\n      ha-label-badge {\n        --ha-label-badge-color: var(--label-badge-red, #df4c1e);\n      }\n      ha-label-badge.has-unit_of_measurement {\n        --ha-label-badge-label-text-transform: none;\n      }\n\n      ha-label-badge.binary_sensor,\n      ha-label-badge.updater {\n        --ha-label-badge-color: var(--label-badge-blue, #039be5);\n      }\n\n      .red {\n        --ha-label-badge-color: var(--label-badge-red, #df4c1e);\n      }\n\n      .blue {\n        --ha-label-badge-color: var(--label-badge-blue, #039be5);\n      }\n\n      .green {\n        --ha-label-badge-color: var(--label-badge-green, #0da035);\n      }\n\n      .yellow {\n        --ha-label-badge-color: var(--label-badge-yellow, #f4b400);\n      }\n\n      .grey {\n        --ha-label-badge-color: var(--label-badge-grey, var(--paper-grey-500));\n      }\n\n      .warning {\n        --ha-label-badge-color: var(--label-badge-yellow, #fce588);\n      }\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-state-label-badge\": HaStateLabelBadge;\n  }\n}\n","import {\n  css,\n  CSSResult,\n  html,\n  LitElement,\n  property,\n  TemplateResult,\n} from \"lit-element\";\n\nclass HaCard extends LitElement {\n  @property() public header?: string;\n\n  static get styles(): CSSResult {\n    return css`\n      :host {\n        background: var(\n          --ha-card-background,\n          var(--paper-card-background-color, white)\n        );\n        border-radius: var(--ha-card-border-radius, 2px);\n        box-shadow: var(\n          --ha-card-box-shadow,\n          0 2px 2px 0 rgba(0, 0, 0, 0.14),\n          0 1px 5px 0 rgba(0, 0, 0, 0.12),\n          0 3px 1px -2px rgba(0, 0, 0, 0.2)\n        );\n        color: var(--primary-text-color);\n        display: block;\n        transition: all 0.3s ease-out;\n        position: relative;\n      }\n\n      .card-header,\n      :host ::slotted(.card-header) {\n        color: var(--ha-card-header-color, --primary-text-color);\n        font-family: var(--ha-card-header-font-family, inherit);\n        font-size: var(--ha-card-header-font-size, 24px);\n        letter-spacing: -0.012em;\n        line-height: 32px;\n        padding: 24px 16px 16px;\n        display: block;\n      }\n\n      :host ::slotted(.card-content:not(:first-child)),\n      slot:not(:first-child)::slotted(.card-content) {\n        padding-top: 0px;\n        margin-top: -8px;\n      }\n\n      :host ::slotted(.card-content) {\n        padding: 16px;\n      }\n\n      :host ::slotted(.card-actions) {\n        border-top: 1px solid #e8e8e8;\n        padding: 5px 16px;\n      }\n    `;\n  }\n\n  protected render(): TemplateResult {\n    return html`\n      ${this.header\n        ? html`\n            <div class=\"card-header\">${this.header}</div>\n          `\n        : html``}\n      <slot></slot>\n    `;\n  }\n}\n\ncustomElements.define(\"ha-card\", HaCard);\n","import {\n  html,\n  css,\n  LitElement,\n  TemplateResult,\n  property,\n  customElement,\n} from \"lit-element\";\n\nimport \"@polymer/paper-input/paper-input\";\n// tslint:disable-next-line:no-duplicate-imports\nimport { PaperInputElement } from \"@polymer/paper-input/paper-input\";\n\n@customElement(\"ha-date-input\")\nexport class HaDateInput extends LitElement {\n  @property() public year?: string;\n  @property() public month?: string;\n  @property() public day?: string;\n  @property({ type: Boolean }) public disabled = false;\n\n  static get styles() {\n    return css`\n      :host {\n        display: block;\n        font-family: var(--paper-font-common-base_-_font-family);\n        -webkit-font-smoothing: var(\n          --paper-font-common-base_-_-webkit-font-smoothing\n        );\n      }\n\n      paper-input {\n        width: 30px;\n        text-align: center;\n        --paper-input-container-shared-input-style_-_-webkit-appearance: textfield;\n        --paper-input-container-input_-_-moz-appearance: textfield;\n        --paper-input-container-shared-input-style_-_appearance: textfield;\n        --paper-input-container-input-webkit-spinner_-_-webkit-appearance: none;\n        --paper-input-container-input-webkit-spinner_-_margin: 0;\n        --paper-input-container-input-webkit-spinner_-_display: none;\n      }\n\n      paper-input#year {\n        width: 50px;\n      }\n\n      .date-input-wrap {\n        display: flex;\n        flex-direction: row;\n      }\n    `;\n  }\n\n  protected render(): TemplateResult {\n    return html`\n      <div class=\"date-input-wrap\">\n        <paper-input\n          id=\"year\"\n          type=\"number\"\n          .value=${this.year}\n          @change=${this._formatYear}\n          maxlength=\"4\"\n          max=\"9999\"\n          min=\"0\"\n          .disabled=${this.disabled}\n          no-label-float\n        >\n          <span suffix=\"\" slot=\"suffix\">-</span>\n        </paper-input>\n        <paper-input\n          id=\"month\"\n          type=\"number\"\n          .value=${this.month}\n          @change=${this._formatMonth}\n          maxlength=\"2\"\n          max=\"12\"\n          min=\"1\"\n          .disabled=${this.disabled}\n          no-label-float\n        >\n          <span suffix=\"\" slot=\"suffix\">-</span>\n        </paper-input>\n        <paper-input\n          id=\"day\"\n          type=\"number\"\n          .value=${this.day}\n          @change=${this._formatDay}\n          maxlength=\"2\"\n          max=\"31\"\n          min=\"1\"\n          .disabled=${this.disabled}\n          no-label-float\n        >\n        </paper-input>\n      </div>\n    `;\n  }\n\n  private _formatYear() {\n    const yearElement = this.shadowRoot!.getElementById(\n      \"year\"\n    ) as PaperInputElement;\n    this.year = yearElement.value!;\n  }\n\n  private _formatMonth() {\n    const monthElement = this.shadowRoot!.getElementById(\n      \"month\"\n    ) as PaperInputElement;\n    this.month = (\"0\" + monthElement.value!).slice(-2);\n  }\n\n  private _formatDay() {\n    const dayElement = this.shadowRoot!.getElementById(\n      \"day\"\n    ) as PaperInputElement;\n    this.day = (\"0\" + dayElement.value!).slice(-2);\n  }\n\n  get value() {\n    return `${this.year}-${this.month}-${this.day}`;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-date-input\": HaDateInput;\n  }\n}\n","import {\n  html,\n  LitElement,\n  PropertyDeclarations,\n  PropertyValues,\n  TemplateResult,\n  CSSResult,\n  css,\n} from \"lit-element\";\nimport { classMap } from \"lit-html/directives/class-map\";\nimport \"./ha-icon\";\n\nclass HaLabelBadge extends LitElement {\n  public value?: string;\n  public icon?: string;\n  public label?: string;\n  public description?: string;\n  public image?: string;\n\n  static get properties(): PropertyDeclarations {\n    return {\n      value: {},\n      icon: {},\n      label: {},\n      description: {},\n      image: {},\n    };\n  }\n\n  protected render(): TemplateResult | void {\n    return html`\n      <div class=\"badge-container\">\n        <div class=\"label-badge\" id=\"badge\">\n          <div\n            class=\"${classMap({\n              value: true,\n              big: Boolean(this.value && this.value.length > 4),\n            })}\"\n          >\n            ${this.icon && !this.value && !this.image\n              ? html`\n                  <ha-icon .icon=\"${this.icon}\"></ha-icon>\n                `\n              : \"\"}\n            ${this.value && !this.image\n              ? html`\n                  <span>${this.value}</span>\n                `\n              : \"\"}\n          </div>\n          ${this.label\n            ? html`\n                <div\n                  class=\"${classMap({\n                    label: true,\n                    big: this.label.length > 5,\n                  })}\"\n                >\n                  <span>${this.label}</span>\n                </div>\n              `\n            : \"\"}\n        </div>\n        ${this.description\n          ? html`\n              <div class=\"title\">${this.description}</div>\n            `\n          : \"\"}\n      </div>\n    `;\n  }\n\n  static get styles(): CSSResult[] {\n    return [\n      css`\n        .badge-container {\n          display: inline-block;\n          text-align: center;\n          vertical-align: top;\n        }\n        .label-badge {\n          position: relative;\n          display: block;\n          margin: 0 auto;\n          width: var(--ha-label-badge-size, 2.5em);\n          text-align: center;\n          height: var(--ha-label-badge-size, 2.5em);\n          line-height: var(--ha-label-badge-size, 2.5em);\n          font-size: var(--ha-label-badge-font-size, 1.5em);\n          border-radius: 50%;\n          border: 0.1em solid var(--ha-label-badge-color, var(--primary-color));\n          color: var(--label-badge-text-color, rgb(76, 76, 76));\n\n          white-space: nowrap;\n          background-color: var(--label-badge-background-color, white);\n          background-size: cover;\n          transition: border 0.3s ease-in-out;\n        }\n        .label-badge .value {\n          font-size: 90%;\n          overflow: hidden;\n          text-overflow: ellipsis;\n        }\n        .label-badge .value.big {\n          font-size: 70%;\n        }\n        .label-badge .label {\n          position: absolute;\n          bottom: -1em;\n          /* Make the label as wide as container+border. (parent_borderwidth / font-size) */\n          left: -0.2em;\n          right: -0.2em;\n          line-height: 1em;\n          font-size: 0.5em;\n        }\n        .label-badge .label span {\n          box-sizing: border-box;\n          max-width: 100%;\n          display: inline-block;\n          background-color: var(--ha-label-badge-color, var(--primary-color));\n          color: var(--ha-label-badge-label-color, white);\n          border-radius: 1em;\n          padding: 9% 16% 8% 16%; /* mostly apitalized text, not much descenders => bit more top margin */\n          font-weight: 500;\n          overflow: hidden;\n          text-transform: uppercase;\n          text-overflow: ellipsis;\n          transition: background-color 0.3s ease-in-out;\n          text-transform: var(--ha-label-badge-label-text-transform, uppercase);\n        }\n        .label-badge .label.big span {\n          font-size: 90%;\n          padding: 10% 12% 7% 12%; /* push smaller text a bit down to center vertically */\n        }\n        .badge-container .title {\n          margin-top: 1em;\n          font-size: var(--ha-label-badge-title-font-size, 0.9em);\n          width: var(--ha-label-badge-title-width, 5em);\n          font-weight: var(--ha-label-badge-title-font-weight, 400);\n          overflow: hidden;\n          text-overflow: ellipsis;\n          line-height: normal;\n        }\n      `,\n    ];\n  }\n\n  protected updated(changedProperties: PropertyValues): void {\n    super.updated(changedProperties);\n    if (changedProperties.has(\"image\")) {\n      this.shadowRoot!.getElementById(\"badge\")!.style.backgroundImage = this\n        .image\n        ? `url(${this.image})`\n        : \"\";\n    }\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-label-badge\": HaLabelBadge;\n  }\n}\n\ncustomElements.define(\"ha-label-badge\", HaLabelBadge);\n","import { Constructor } from \"lit-element\";\nimport \"@polymer/paper-icon-button/paper-icon-button\";\n// Not duplicate, this is for typing.\n// tslint:disable-next-line\nimport { PaperIconButtonElement } from \"@polymer/paper-icon-button/paper-icon-button\";\n\nconst paperIconButtonClass = customElements.get(\n  \"paper-icon-button\"\n) as Constructor<PaperIconButtonElement>;\n\nexport class HaPaperIconButtonArrowNext extends paperIconButtonClass {\n  public connectedCallback() {\n    this.icon =\n      window.getComputedStyle(this).direction === \"ltr\"\n        ? \"hass:arrow-right\"\n        : \"hass:arrow-left\";\n\n    // calling super after setting icon to have it consistently show the icon (otherwise not always shown)\n    super.connectedCallback();\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-paper-icon-button-arrow-next\": HaPaperIconButtonArrowNext;\n  }\n}\n\ncustomElements.define(\n  \"ha-paper-icon-button-arrow-next\",\n  HaPaperIconButtonArrowNext\n);\n","import { Constructor } from \"lit-element\";\nimport \"@polymer/paper-icon-button/paper-icon-button\";\n// Not duplicate, this is for typing.\n// tslint:disable-next-line\nimport { PaperIconButtonElement } from \"@polymer/paper-icon-button/paper-icon-button\";\n\nconst paperIconButtonClass = customElements.get(\n  \"paper-icon-button\"\n) as Constructor<PaperIconButtonElement>;\n\nexport class HaPaperIconButtonNext extends paperIconButtonClass {\n  public connectedCallback() {\n    this.icon =\n      window.getComputedStyle(this).direction === \"ltr\"\n        ? \"hass:chevron-right\"\n        : \"hass:chevron-left\";\n\n    // calling super after setting icon to have it consistently show the icon (otherwise not always shown)\n    super.connectedCallback();\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-paper-icon-button-next\": HaPaperIconButtonNext;\n  }\n}\n\ncustomElements.define(\"ha-paper-icon-button-next\", HaPaperIconButtonNext);\n","import \"@polymer/paper-icon-button/paper-icon-button\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport { EventsMixin } from \"../mixins/events-mixin\";\n\nimport isComponentLoaded from \"../common/config/is_component_loaded\";\nimport { fireEvent } from \"../common/dom/fire_event\";\n\n/*\n * @appliesMixin EventsMixin\n */\nclass HaStartVoiceButton extends EventsMixin(PolymerElement) {\n  static get template() {\n    return html`\n      <paper-icon-button\n        icon=\"hass:microphone\"\n        hidden$=\"[[!canListen]]\"\n        on-click=\"handleListenClick\"\n      ></paper-icon-button>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: {\n        type: Object,\n        value: null,\n      },\n\n      canListen: {\n        type: Boolean,\n        computed: \"computeCanListen(hass)\",\n        notify: true,\n      },\n    };\n  }\n\n  computeCanListen(hass) {\n    return (\n      \"webkitSpeechRecognition\" in window &&\n      isComponentLoaded(hass, \"conversation\")\n    );\n  }\n\n  handleListenClick() {\n    fireEvent(this, \"show-dialog\", {\n      dialogImport: () =>\n        import(/* webpackChunkName: \"voice-command-dialog\" */ \"../dialogs/ha-voice-command-dialog\"),\n      dialogTag: \"ha-voice-command-dialog\",\n    });\n  }\n}\n\ncustomElements.define(\"ha-start-voice-button\", HaStartVoiceButton);\n","import { HomeAssistant } from \"../types\";\n\nexport const FORMAT_TEXT = \"text\";\nexport const FORMAT_NUMBER = \"number\";\n\nexport const callAlarmAction = (\n  hass: HomeAssistant,\n  entity: string,\n  action:\n    | \"arm_away\"\n    | \"arm_home\"\n    | \"arm_night\"\n    | \"arm_custom_bypass\"\n    | \"disarm\",\n  code: string\n) => {\n  hass!.callService(\"alarm_control_panel\", \"alarm_\" + action, {\n    entity_id: entity,\n    code,\n  });\n};\n","import { createCollection, Connection } from \"home-assistant-js-websocket\";\nimport { HomeAssistant } from \"../types\";\nimport { compare } from \"../common/string/compare\";\nimport { debounce } from \"../common/util/debounce\";\n\nexport interface AreaRegistryEntry {\n  area_id: string;\n  name: string;\n}\n\nexport interface AreaRegistryEntryMutableParams {\n  name: string;\n}\n\nexport const createAreaRegistryEntry = (\n  hass: HomeAssistant,\n  values: AreaRegistryEntryMutableParams\n) =>\n  hass.callWS<AreaRegistryEntry>({\n    type: \"config/area_registry/create\",\n    ...values,\n  });\n\nexport const updateAreaRegistryEntry = (\n  hass: HomeAssistant,\n  areaId: string,\n  updates: Partial<AreaRegistryEntryMutableParams>\n) =>\n  hass.callWS<AreaRegistryEntry>({\n    type: \"config/area_registry/update\",\n    area_id: areaId,\n    ...updates,\n  });\n\nexport const deleteAreaRegistryEntry = (hass: HomeAssistant, areaId: string) =>\n  hass.callWS({\n    type: \"config/area_registry/delete\",\n    area_id: areaId,\n  });\n\nconst fetchAreaRegistry = (conn) =>\n  conn\n    .sendMessagePromise({\n      type: \"config/area_registry/list\",\n    })\n    .then((areas) => areas.sort((ent1, ent2) => compare(ent1.name, ent2.name)));\n\nconst subscribeAreaRegistryUpdates = (conn, store) =>\n  conn.subscribeEvents(\n    debounce(\n      () =>\n        fetchAreaRegistry(conn).then((areas) => store.setState(areas, true)),\n      500,\n      true\n    ),\n    \"area_registry_updated\"\n  );\n\nexport const subscribeAreaRegistry = (\n  conn: Connection,\n  onChange: (areas: AreaRegistryEntry[]) => void\n) =>\n  createCollection<AreaRegistryEntry[]>(\n    \"_areaRegistry\",\n    fetchAreaRegistry,\n    subscribeAreaRegistryUpdates,\n    conn,\n    onChange\n  );\n","import { HomeAssistant } from \"../types\";\nimport { createCollection, Connection } from \"home-assistant-js-websocket\";\nimport { debounce } from \"../common/util/debounce\";\n\nexport interface DeviceRegistryEntry {\n  id: string;\n  config_entries: string[];\n  connections: Array<[string, string]>;\n  manufacturer: string;\n  model?: string;\n  name?: string;\n  sw_version?: string;\n  hub_device_id?: string;\n  area_id?: string;\n  name_by_user?: string;\n}\n\nexport interface DeviceRegistryEntryMutableParams {\n  area_id?: string | null;\n  name_by_user?: string | null;\n}\n\nexport const updateDeviceRegistryEntry = (\n  hass: HomeAssistant,\n  deviceId: string,\n  updates: Partial<DeviceRegistryEntryMutableParams>\n) =>\n  hass.callWS<DeviceRegistryEntry>({\n    type: \"config/device_registry/update\",\n    device_id: deviceId,\n    ...updates,\n  });\n\nconst fetchDeviceRegistry = (conn) =>\n  conn.sendMessagePromise({\n    type: \"config/device_registry/list\",\n  });\n\nconst subscribeDeviceRegistryUpdates = (conn, store) =>\n  conn.subscribeEvents(\n    debounce(\n      () =>\n        fetchDeviceRegistry(conn).then((devices) =>\n          store.setState(devices, true)\n        ),\n      500,\n      true\n    ),\n    \"device_registry_updated\"\n  );\n\nexport const subscribeDeviceRegistry = (\n  conn: Connection,\n  onChange: (devices: DeviceRegistryEntry[]) => void\n) =>\n  createCollection<DeviceRegistryEntry[]>(\n    \"_dr\",\n    fetchDeviceRegistry,\n    subscribeDeviceRegistryUpdates,\n    conn,\n    onChange\n  );\n","export const UNAVAILABLE = \"unavailable\";\n\nexport const ENTITY_COMPONENT_DOMAINS = [\n  \"air_quality\",\n  \"alarm_control_panel\",\n  \"automation\",\n  \"binary_sensor\",\n  \"calendar\",\n  \"counter\",\n  \"cover\",\n  \"dominos\",\n  \"fan\",\n  \"geo_location\",\n  \"group\",\n  \"history_graph\",\n  \"image_processing\",\n  \"input_boolean\",\n  \"input_datetime\",\n  \"input_number\",\n  \"input_select\",\n  \"input_text\",\n  \"light\",\n  \"lock\",\n  \"mailbox\",\n  \"media_player\",\n  \"person\",\n  \"plant\",\n  \"remember_the_milk\",\n  \"remote\",\n  \"scene\",\n  \"script\",\n  \"sensor\",\n  \"switch\",\n  \"timer\",\n  \"utility_meter\",\n  \"vacuum\",\n  \"weather\",\n  \"wink\",\n  \"zha\",\n  \"zwave\",\n];\n","import { HomeAssistant } from \"../types\";\n\nexport const setInputDateTimeValue = (\n  hass: HomeAssistant,\n  entityId: string,\n  time: string | undefined = undefined,\n  date: string | undefined = undefined\n) => {\n  const param = { entity_id: entityId, time, date };\n  hass.callService(entityId.split(\".\", 1)[0], \"set_datetime\", param);\n};\n","import { HomeAssistant } from \"../types\";\n\nexport const setValue = (hass: HomeAssistant, entity: string, value: string) =>\n  hass.callService(entity.split(\".\", 1)[0], \"set_value\", {\n    value,\n    entity_id: entity,\n  });\n","import { HomeAssistant } from \"../types\";\nimport { Connection } from \"home-assistant-js-websocket\";\n\nexport interface LovelaceConfig {\n  title?: string;\n  hideToolbar?: boolean; // IoB\n  views: LovelaceViewConfig[];\n  background?: string;\n  resources?: Array<{ type: \"css\" | \"js\" | \"module\" | \"html\"; url: string }>;\n}\n\nexport interface LovelaceViewConfig {\n  index?: number;\n  title?: string;\n  badges?: string[];\n  cards?: LovelaceCardConfig[];\n  path?: string;\n  icon?: string;\n  theme?: string;\n  panel?: boolean;\n  background?: string;\n}\n\nexport interface LovelaceCardConfig {\n  index?: number;\n  view_index?: number;\n  type: string;\n  [key: string]: any;\n}\n\nexport interface ToggleActionConfig {\n  action: \"toggle\";\n}\n\nexport interface CallServiceActionConfig {\n  action: \"call-service\";\n  service: string;\n  service_data?: {\n    entity_id?: string | [string];\n    [key: string]: any;\n  };\n}\n\nexport interface NavigateActionConfig {\n  action: \"navigate\";\n  navigation_path: string;\n}\n\nexport interface MoreInfoActionConfig {\n  action: \"more-info\";\n}\n\nexport interface NoActionConfig {\n  action: \"none\";\n}\n\nexport type ActionConfig =\n  | ToggleActionConfig\n  | CallServiceActionConfig\n  | NavigateActionConfig\n  | MoreInfoActionConfig\n  | NoActionConfig;\n\nexport const fetchConfig = (\n  hass: HomeAssistant,\n  force: boolean\n): Promise<LovelaceConfig> =>\n  hass.callWS({\n    type: \"lovelace/config\",\n    force,\n  });\n\nexport const saveConfig = (\n  hass: HomeAssistant,\n  config: LovelaceConfig\n): Promise<void> =>\n  hass.callWS({\n    type: \"lovelace/config/save\",\n    config,\n  });\n\nexport const subscribeLovelaceUpdates = (\n  conn: Connection,\n  onChange: () => void\n) => conn.subscribeEvents(onChange, \"lovelace_updated\");\n","import { HomeAssistant } from \"../types\";\n\nimport { timeCachePromiseFunc } from \"../common/util/time-cache-function-promise\";\n\nexport const SUPPORT_PAUSE = 1;\nexport const SUPPORT_NEXT_TRACK = 32;\nexport const SUPPORTS_PLAY = 16384;\nexport const OFF_STATES = [\"off\", \"idle\"];\n\nexport interface MediaPlayerThumbnail {\n  content_type: string;\n  content: string;\n}\n\nexport const fetchMediaPlayerThumbnailWithCache = (\n  hass: HomeAssistant,\n  entityId: string\n) =>\n  timeCachePromiseFunc(\n    \"_media_playerTmb\",\n    9000,\n    fetchMediaPlayerThumbnail,\n    hass,\n    entityId\n  );\n\nexport const fetchMediaPlayerThumbnail = (\n  hass: HomeAssistant,\n  entityId: string\n) => {\n  return hass.callWS<MediaPlayerThumbnail>({\n    type: \"media_player_thumbnail\",\n    entity_id: entityId,\n  });\n};\n","import { HomeAssistant } from \"../types\";\n\nexport interface ShoppingListItem {\n  id: number;\n  name: string;\n  complete: boolean;\n}\n\nexport const fetchItems = (hass: HomeAssistant): Promise<ShoppingListItem[]> =>\n  hass.callWS({\n    type: \"shopping_list/items\",\n  });\n\nexport const updateItem = (\n  hass: HomeAssistant,\n  itemId: number,\n  item: {\n    name?: string;\n    complete?: boolean;\n  }\n): Promise<ShoppingListItem> =>\n  hass.callWS({\n    type: \"shopping_list/items/update\",\n    item_id: itemId,\n    ...item,\n  });\n\nexport const clearItems = (hass: HomeAssistant): Promise<void> =>\n  hass.callWS({\n    type: \"shopping_list/items/clear\",\n  });\n\nexport const addItem = (\n  hass: HomeAssistant,\n  name: string\n): Promise<ShoppingListItem> =>\n  hass.callWS({\n    type: \"shopping_list/items/add\",\n    name,\n  });\n","import { createCollection, Connection } from \"home-assistant-js-websocket\";\n\nconst fetchNotifications = (conn) =>\n  conn.sendMessagePromise({\n    type: \"persistent_notification/get\",\n  });\n\nconst subscribeUpdates = (conn, store) =>\n  conn.subscribeEvents(\n    () => fetchNotifications(conn).then((ntf) => store.setState(ntf, true)),\n    \"persistent_notifications_updated\"\n  );\n\nexport const subscribeNotifications = (\n  conn: Connection,\n  onChange: (notifications: Notification[]) => void\n) =>\n  createCollection<Notification[]>(\n    \"_ntf\",\n    fetchNotifications,\n    subscribeUpdates,\n    conn,\n    onChange\n  );\n","/**\n@license\nCopyright (c) 2015 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n/*\nThis code is copied from app-header-layout.\n'fullbleed' support is removed as Home Assisstant doesn't use it.\ntransform: translate(0) is added.\n*/\n/*\n  FIXME(polymer-modulizer): the above comments were extracted\n  from HTML and may be out of place here. Review them and\n  then delete this comment!\n*/\nimport \"@polymer/app-layout/app-header-layout/app-header-layout\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport \"@polymer/polymer/polymer-element\";\n\nclass HaAppLayout extends customElements.get(\"app-header-layout\") {\n  static get template() {\n    return html`\n      <style>\n        :host {\n          display: block;\n          /**\n         * Force app-header-layout to have its own stacking context so that its parent can\n         * control the stacking of it relative to other elements (e.g. app-drawer-layout).\n         * This could be done using \\`isolation: isolate\\`, but that's not well supported\n         * across browsers.\n         */\n          position: relative;\n          z-index: 0;\n        }\n\n        #wrapper ::slotted([slot=\"header\"]) {\n          @apply --layout-fixed-top;\n          z-index: 1;\n        }\n\n        #wrapper.initializing ::slotted([slot=\"header\"]) {\n          position: relative;\n        }\n\n        :host([has-scrolling-region]) {\n          height: 100%;\n        }\n\n        :host([has-scrolling-region]) #wrapper ::slotted([slot=\"header\"]) {\n          position: absolute;\n        }\n\n        :host([has-scrolling-region])\n          #wrapper.initializing\n          ::slotted([slot=\"header\"]) {\n          position: relative;\n        }\n\n        :host([has-scrolling-region]) #wrapper #contentContainer {\n          @apply --layout-fit;\n          overflow-y: auto;\n          -webkit-overflow-scrolling: touch;\n        }\n\n        :host([has-scrolling-region]) #wrapper.initializing #contentContainer {\n          position: relative;\n        }\n\n        #contentContainer {\n          /* Create a stacking context here so that all children appear below the header. */\n          position: relative;\n          z-index: 0;\n          /* Using 'transform' will cause 'position: fixed' elements to behave like\n           'position: absolute' relative to this element. */\n          transform: translate(0);\n        }\n\n        @media print {\n          :host([has-scrolling-region]) #wrapper #contentContainer {\n            overflow-y: visible;\n          }\n        }\n      </style>\n\n      <div id=\"wrapper\" class=\"initializing\">\n        <slot id=\"headerSlot\" name=\"header\"></slot>\n\n        <div id=\"contentContainer\"><slot></slot></div>\n        <slot id=\"fab\" name=\"fab\"></slot>\n      </div>\n    `;\n  }\n}\ncustomElements.define(\"ha-app-layout\", HaAppLayout);\n","import {\n  html,\n  LitElement,\n  PropertyValues,\n  TemplateResult,\n  CSSResult,\n  css,\n  property,\n  customElement,\n} from \"lit-element\";\nimport { classMap } from \"lit-html/directives/class-map\";\n\nimport \"../../../components/ha-card\";\nimport \"../../../components/ha-label-badge\";\nimport \"../components/hui-warning\";\n\nimport { LovelaceCard } from \"../types\";\nimport { HomeAssistant } from \"../../../types\";\nimport {\n  callAlarmAction,\n  FORMAT_NUMBER,\n} from \"../../../data/alarm_control_panel\";\nimport { AlarmPanelCardConfig } from \"./types\";\n\nconst ICONS = {\n  armed_away: \"hass:shield-lock\",\n  armed_custom_bypass: \"hass:security\",\n  armed_home: \"hass:shield-home\",\n  armed_night: \"hass:shield-home\",\n  disarmed: \"hass:shield-check\",\n  pending: \"hass:shield-outline\",\n  triggered: \"hass:bell-ring\",\n};\n\nconst BUTTONS = [\"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\", \"\", \"0\", \"clear\"];\n\n@customElement(\"hui-alarm-panel-card\")\nclass HuiAlarmPanelCard extends LitElement implements LovelaceCard {\n  public static async getConfigElement() {\n    await import(/* webpackChunkName: \"hui-alarm-panel-card-editor\" */ \"../editor/config-elements/hui-alarm-panel-card-editor\");\n    return document.createElement(\"hui-alarm-panel-card-editor\");\n  }\n\n  public static getStubConfig() {\n    return { states: [\"arm_home\", \"arm_away\"] };\n  }\n\n  @property() public hass?: HomeAssistant;\n\n  @property() private _config?: AlarmPanelCardConfig;\n\n  @property() private _code?: string;\n\n  public getCardSize(): number {\n    if (!this._config || !this.hass) {\n      return 0;\n    }\n\n    const stateObj = this.hass.states[this._config.entity];\n\n    return !stateObj || stateObj.attributes.code_format !== FORMAT_NUMBER\n      ? 3\n      : 8;\n  }\n\n  public setConfig(config: AlarmPanelCardConfig): void {\n    if (\n      !config ||\n      !config.entity ||\n      config.entity.split(\".\")[0] !== \"alarm_control_panel\"\n    ) {\n      throw new Error(\"Invalid card configuration\");\n    }\n\n    const defaults = {\n      states: [\"arm_away\", \"arm_home\"],\n    };\n\n    this._config = { ...defaults, ...config };\n    this._code = \"\";\n  }\n\n  protected shouldUpdate(changedProps: PropertyValues): boolean {\n    if (changedProps.has(\"_config\") || changedProps.has(\"_code\")) {\n      return true;\n    }\n\n    const oldHass = changedProps.get(\"hass\") as HomeAssistant | undefined;\n    if (oldHass) {\n      return (\n        oldHass.states[this._config!.entity] !==\n        this.hass!.states[this._config!.entity]\n      );\n    }\n    return true;\n  }\n\n  protected render(): TemplateResult | void {\n    if (!this._config || !this.hass) {\n      return html``;\n    }\n    const stateObj = this.hass.states[this._config.entity];\n\n    if (!stateObj) {\n      return html`\n        <hui-warning\n          >${this.hass.localize(\n            \"ui.panel.lovelace.warning.entity_not_found\",\n            \"entity\",\n            this._config.entity\n          )}</hui-warning\n        >\n      `;\n    }\n\n    return html`\n      <ha-card .header=\"${this._config.name || this._label(stateObj.state)}\">\n        <ha-label-badge\n          class=\"${classMap({ [stateObj.state]: true })}\"\n          .icon=\"${ICONS[stateObj.state] || \"hass:shield-outline\"}\"\n          .label=\"${this._stateIconLabel(stateObj.state)}\"\n        ></ha-label-badge>\n        <div id=\"armActions\" class=\"actions\">\n          ${(stateObj.state === \"disarmed\"\n            ? this._config.states!\n            : [\"disarm\"]\n          ).map((state) => {\n            return html`\n              <mwc-button\n                .action=\"${state}\"\n                @click=\"${this._handleActionClick}\"\n                outlined\n              >\n                ${this._label(state)}\n              </mwc-button>\n            `;\n          })}\n        </div>\n        ${!stateObj.attributes.code_format\n          ? html``\n          : html`\n              <paper-input\n                label=\"Alarm Code\"\n                type=\"password\"\n                .value=\"${this._code}\"\n              ></paper-input>\n            `}\n        ${stateObj.attributes.code_format !== FORMAT_NUMBER\n          ? html``\n          : html`\n              <div id=\"keypad\">\n                ${BUTTONS.map((value) => {\n                  return value === \"\"\n                    ? html`\n                        <mwc-button disabled></mwc-button>\n                      `\n                    : html`\n                        <mwc-button\n                          .value=\"${value}\"\n                          @click=\"${this._handlePadClick}\"\n                          dense\n                        >\n                          ${value === \"clear\"\n                            ? this._label(\"clear_code\")\n                            : value}\n                        </mwc-button>\n                      `;\n                })}\n              </div>\n            `}\n      </ha-card>\n    `;\n  }\n\n  private _stateIconLabel(state: string): string {\n    const stateLabel = state.split(\"_\").pop();\n    return stateLabel === \"disarmed\" ||\n      stateLabel === \"triggered\" ||\n      !stateLabel\n      ? \"\"\n      : stateLabel;\n  }\n\n  private _label(state: string): string {\n    return (\n      this.hass!.localize(`state.alarm_control_panel.${state}`) ||\n      this.hass!.localize(`ui.card.alarm_control_panel.${state}`)\n    );\n  }\n\n  private _handlePadClick(e: MouseEvent): void {\n    const val = (e.currentTarget! as any).value;\n    this._code = val === \"clear\" ? \"\" : this._code + val;\n  }\n\n  private _handleActionClick(e: MouseEvent): void {\n    callAlarmAction(\n      this.hass!,\n      this._config!.entity,\n      (e.currentTarget! as any).action,\n      this._code!\n    );\n    this._code = \"\";\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      ha-card {\n        padding-bottom: 16px;\n        position: relative;\n        --alarm-color-disarmed: var(--label-badge-green);\n        --alarm-color-pending: var(--label-badge-yellow);\n        --alarm-color-triggered: var(--label-badge-red);\n        --alarm-color-armed: var(--label-badge-red);\n        --alarm-color-autoarm: rgba(0, 153, 255, 0.1);\n        --alarm-state-color: var(--alarm-color-armed);\n        --base-unit: 15px;\n        font-size: calc(var(--base-unit));\n      }\n\n      ha-label-badge {\n        --ha-label-badge-color: var(--alarm-state-color);\n        --label-badge-text-color: var(--alarm-state-color);\n        --label-badge-background-color: var(--paper-card-background-color);\n        color: var(--alarm-state-color);\n        position: absolute;\n        right: 12px;\n        top: 12px;\n      }\n\n      .disarmed {\n        --alarm-state-color: var(--alarm-color-disarmed);\n      }\n\n      .triggered {\n        --alarm-state-color: var(--alarm-color-triggered);\n        animation: pulse 1s infinite;\n      }\n\n      .arming {\n        --alarm-state-color: var(--alarm-color-pending);\n        animation: pulse 1s infinite;\n      }\n\n      .pending {\n        --alarm-state-color: var(--alarm-color-pending);\n        animation: pulse 1s infinite;\n      }\n\n      @keyframes pulse {\n        0% {\n          --ha-label-badge-color: var(--alarm-state-color);\n        }\n        100% {\n          --ha-label-badge-color: rgba(255, 153, 0, 0.3);\n        }\n      }\n\n      paper-input {\n        margin: 0 auto 8px;\n        max-width: 150px;\n        font-size: calc(var(--base-unit));\n        text-align: center;\n      }\n\n      .state {\n        margin-left: 16px;\n        font-size: calc(var(--base-unit) * 0.9);\n        position: relative;\n        bottom: 16px;\n        color: var(--alarm-state-color);\n        animation: none;\n      }\n\n      #keypad {\n        display: flex;\n        justify-content: center;\n        flex-wrap: wrap;\n        margin: auto;\n        width: 300px;\n      }\n\n      #keypad mwc-button {\n        margin-bottom: 5%;\n        width: 30%;\n        padding: calc(var(--base-unit));\n        font-size: calc(var(--base-unit) * 1.1);\n        box-sizing: border-box;\n      }\n\n      .actions {\n        margin: 0 8px;\n        padding-top: 20px;\n        display: flex;\n        flex-wrap: wrap;\n        justify-content: center;\n        font-size: calc(var(--base-unit) * 1);\n      }\n\n      .actions mwc-button {\n        min-width: calc(var(--base-unit) * 9);\n        margin: 0 4px 4px;\n      }\n\n      mwc-button#disarm {\n        color: var(--google-red-500);\n      }\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-alarm-panel-card\": HuiAlarmPanelCard;\n  }\n}\n","import { createCardElement } from \"../common/create-card-element\";\nimport { computeCardSize } from \"../common/compute-card-size\";\nimport {\n  checkConditionsMet,\n  validateConditionalConfig,\n} from \"../../lovelace/common/validate-condition\";\nimport { HomeAssistant } from \"../../../types\";\nimport { LovelaceCard } from \"../types\";\nimport { ConditionalCardConfig } from \"./types\";\n\nclass HuiConditionalCard extends HTMLElement implements LovelaceCard {\n  private _hass?: HomeAssistant;\n  private _config?: ConditionalCardConfig;\n  private _card?: LovelaceCard;\n\n  public setConfig(config) {\n    if (\n      !config.card ||\n      !config.conditions ||\n      !Array.isArray(config.conditions) ||\n      !validateConditionalConfig(config.conditions)\n    ) {\n      throw new Error(\"Error in card configuration.\");\n    }\n\n    if (this._card && this._card.parentElement) {\n      this.removeChild(this._card);\n    }\n\n    this._config = config;\n    this._card = createCardElement(config.card);\n\n    this.update();\n  }\n\n  set hass(hass: HomeAssistant) {\n    this._hass = hass;\n\n    this.update();\n  }\n\n  public getCardSize() {\n    return computeCardSize(this._card!);\n  }\n\n  private update() {\n    if (!this._card || !this._hass) {\n      return;\n    }\n\n    const visible =\n      this._config && checkConditionsMet(this._config.conditions, this._hass);\n\n    if (visible) {\n      this._card.hass = this._hass;\n      if (!this._card.parentElement) {\n        this.appendChild(this._card);\n      }\n    } else if (this._card.parentElement) {\n      this.removeChild(this._card);\n    }\n    // This will hide the complete card so it won't get styled by parent\n    this.style.setProperty(\"display\", visible ? \"\" : \"none\");\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-conditional-card\": HuiConditionalCard;\n  }\n}\n\ncustomElements.define(\"hui-conditional-card\", HuiConditionalCard);\n","import {\n  html,\n  LitElement,\n  PropertyValues,\n  TemplateResult,\n  customElement,\n  property,\n  css,\n  CSSResult,\n} from \"lit-element\";\n\nimport \"../../../components/ha-card\";\nimport \"../components/hui-entities-toggle\";\n\nimport { fireEvent } from \"../../../common/dom/fire_event\";\nimport { DOMAINS_HIDE_MORE_INFO } from \"../../../common/const\";\nimport { HomeAssistant } from \"../../../types\";\nimport { EntityRow } from \"../entity-rows/types\";\nimport { LovelaceCard, LovelaceCardEditor } from \"../types\";\nimport { processConfigEntities } from \"../common/process-config-entities\";\nimport { createRowElement } from \"../common/create-row-element\";\nimport { EntitiesCardConfig, EntitiesCardEntityConfig } from \"./types\";\n\nimport computeDomain from \"../../../common/entity/compute_domain\";\nimport applyThemesOnElement from \"../../../common/dom/apply_themes_on_element\";\n\n@customElement(\"hui-entities-card\")\nclass HuiEntitiesCard extends LitElement implements LovelaceCard {\n  public static async getConfigElement(): Promise<LovelaceCardEditor> {\n    await import(/* webpackChunkName: \"hui-entities-card-editor\" */ \"../editor/config-elements/hui-entities-card-editor\");\n    return document.createElement(\"hui-entities-card-editor\");\n  }\n\n  public static getStubConfig(): object {\n    return { entities: [] };\n  }\n\n  @property() protected _config?: EntitiesCardConfig;\n\n  protected _hass?: HomeAssistant;\n\n  protected _configEntities?: EntitiesCardEntityConfig[];\n\n  set hass(hass: HomeAssistant) {\n    this._hass = hass;\n    this.shadowRoot!.querySelectorAll(\"#states > div > *\").forEach(\n      (element: unknown) => {\n        (element as EntityRow).hass = hass;\n      }\n    );\n    const entitiesToggle = this.shadowRoot!.querySelector(\n      \"hui-entities-toggle\"\n    );\n    if (entitiesToggle) {\n      (entitiesToggle as any).hass = hass;\n    }\n  }\n\n  public getCardSize(): number {\n    if (!this._config) {\n      return 0;\n    }\n    // +1 for the header\n    return (this._config.title ? 1 : 0) + this._config.entities.length;\n  }\n\n  public setConfig(config: EntitiesCardConfig): void {\n    const entities = processConfigEntities(config.entities);\n\n    this._config = { theme: \"default\", ...config };\n    this._configEntities = entities;\n  }\n\n  protected updated(changedProperties: PropertyValues): void {\n    super.updated(changedProperties);\n    if (this._hass && this._config) {\n      applyThemesOnElement(this, this._hass.themes, this._config.theme);\n    }\n  }\n\n  protected render(): TemplateResult | void {\n    if (!this._config || !this._hass) {\n      return html``;\n    }\n    const { show_header_toggle, title } = this._config;\n\n    return html`\n      <ha-card>\n        ${!title && !show_header_toggle\n          ? html``\n          : html`\n              <div class=\"card-header\">\n                <div class=\"name\">${title}</div>\n                ${show_header_toggle === false\n                  ? html``\n                  : html`\n                      <hui-entities-toggle\n                        .hass=\"${this._hass}\"\n                        .entities=\"${this._configEntities!.map(\n                          (conf) => conf.entity\n                        )}\"\n                      ></hui-entities-toggle>\n                    `}\n              </div>\n            `}\n        <div id=\"states\" class=\"card-content\">\n          ${this._configEntities!.map((entityConf) =>\n            this.renderEntity(entityConf)\n          )}\n        </div>\n      </ha-card>\n    `;\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      .card-header {\n        display: flex;\n        justify-content: space-between;\n      }\n\n      .card-header .name {\n        white-space: nowrap;\n        overflow: hidden;\n        text-overflow: ellipsis;\n      }\n\n      .card-header hui-entities-toggle {\n        margin: -4px 0;\n      }\n\n      #states > * {\n        margin: 8px 0;\n      }\n\n      #states > div > * {\n        overflow: hidden;\n      }\n\n      .state-card-dialog {\n        cursor: pointer;\n      }\n    `;\n  }\n\n  private renderEntity(entityConf: EntitiesCardEntityConfig): TemplateResult {\n    const element = createRowElement(entityConf);\n    if (this._hass) {\n      element.hass = this._hass;\n    }\n    if (\n      entityConf.entity &&\n      !DOMAINS_HIDE_MORE_INFO.includes(computeDomain(entityConf.entity))\n    ) {\n      element.classList.add(\"state-card-dialog\");\n      element.addEventListener(\"click\", () => this._handleClick(entityConf));\n    }\n\n    return html`\n      <div>${element}</div>\n    `;\n  }\n\n  private _handleClick(entityConf: EntitiesCardEntityConfig): void {\n    const entityId = entityConf.entity;\n    fireEvent(this, \"hass-more-info\", { entityId });\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-entities-card\": HuiEntitiesCard;\n  }\n}\n","import {\n  html,\n  LitElement,\n  PropertyValues,\n  TemplateResult,\n  CSSResult,\n  css,\n  customElement,\n  property,\n} from \"lit-element\";\nimport { HassEntity } from \"home-assistant-js-websocket\";\nimport { styleMap } from \"lit-html/directives/style-map\";\nimport \"@material/mwc-ripple\";\n\nimport \"../../../components/ha-card\";\nimport \"../components/hui-warning\";\n\nimport isValidEntityId from \"../../../common/entity/valid_entity_id\";\nimport stateIcon from \"../../../common/entity/state_icon\";\nimport computeStateDomain from \"../../../common/entity/compute_state_domain\";\nimport computeStateName from \"../../../common/entity/compute_state_name\";\nimport applyThemesOnElement from \"../../../common/dom/apply_themes_on_element\";\nimport computeDomain from \"../../../common/entity/compute_domain\";\n\nimport { HomeAssistant, LightEntity } from \"../../../types\";\nimport { LovelaceCard, LovelaceCardEditor } from \"../types\";\nimport { longPress } from \"../common/directives/long-press-directive\";\nimport { handleClick } from \"../common/handle-click\";\nimport { DOMAINS_TOGGLE } from \"../../../common/const\";\nimport { EntityButtonCardConfig } from \"./types\";\n\n@customElement(\"hui-entity-button-card\")\nclass HuiEntityButtonCard extends LitElement implements LovelaceCard {\n  public static async getConfigElement(): Promise<LovelaceCardEditor> {\n    await import(/* webpackChunkName: \"hui-entity-button-card-editor\" */ \"../editor/config-elements/hui-entity-button-card-editor\");\n    return document.createElement(\"hui-entity-button-card-editor\");\n  }\n\n  public static getStubConfig(): object {\n    return {\n      tap_action: { action: \"toggle\" },\n      hold_action: { action: \"more-info\" },\n      show_icon: true,\n      show_name: true,\n    };\n  }\n\n  @property() public hass?: HomeAssistant;\n\n  @property() private _config?: EntityButtonCardConfig;\n\n  public getCardSize(): number {\n    return 2;\n  }\n\n  public setConfig(config: EntityButtonCardConfig): void {\n    if (!isValidEntityId(config.entity)) {\n      throw new Error(\"Invalid Entity\");\n    }\n\n    this._config = {\n      theme: \"default\",\n      hold_action: { action: \"more-info\" },\n      show_icon: true,\n      show_name: true,\n      ...config,\n    };\n\n    if (DOMAINS_TOGGLE.has(computeDomain(config.entity))) {\n      this._config = {\n        tap_action: {\n          action: \"toggle\",\n        },\n        ...this._config,\n      };\n    } else {\n      this._config = {\n        tap_action: {\n          action: \"more-info\",\n        },\n        ...this._config,\n      };\n    }\n  }\n\n  protected shouldUpdate(changedProps: PropertyValues): boolean {\n    if (changedProps.has(\"_config\")) {\n      return true;\n    }\n\n    const oldHass = changedProps.get(\"hass\") as HomeAssistant | undefined;\n    if (oldHass) {\n      return (\n        oldHass.states[this._config!.entity] !==\n        this.hass!.states[this._config!.entity]\n      );\n    }\n    return true;\n  }\n\n  protected render(): TemplateResult | void {\n    if (!this._config || !this.hass) {\n      return html``;\n    }\n    const stateObj = this.hass.states[this._config.entity];\n\n    if (!stateObj) {\n      return html`\n        <hui-warning\n          >${this.hass.localize(\n            \"ui.panel.lovelace.warning.entity_not_found\",\n            \"entity\",\n            this._config.entity\n          )}</hui-warning\n        >\n      `;\n    }\n\n    return html`\n      <ha-card\n        @ha-click=\"${this._handleTap}\"\n        @ha-hold=\"${this._handleHold}\"\n        .longPress=\"${longPress()}\"\n      >\n        ${this._config.show_icon\n          ? html`\n              <ha-icon\n                data-domain=\"${computeStateDomain(stateObj)}\"\n                data-state=\"${stateObj.state}\"\n                .icon=\"${this._config.icon || stateIcon(stateObj)}\"\n                style=\"${styleMap({\n                  filter: this._computeBrightness(stateObj),\n                  color: this._computeColor(stateObj),\n                  height: this._config.icon_height\n                    ? this._config.icon_height\n                    : \"auto\",\n                })}\"\n              ></ha-icon>\n            `\n          : \"\"}\n        ${this._config.show_name\n          ? html`\n              <span>\n                ${this._config.name || computeStateName(stateObj)}\n              </span>\n            `\n          : \"\"}\n        <mwc-ripple></mwc-ripple>\n      </ha-card>\n    `;\n  }\n\n  protected updated(changedProps: PropertyValues): void {\n    super.updated(changedProps);\n    if (!this._config || !this.hass) {\n      return;\n    }\n    const oldHass = changedProps.get(\"hass\") as HomeAssistant | undefined;\n    if (!oldHass || oldHass.themes !== this.hass.themes) {\n      applyThemesOnElement(this, this.hass.themes, this._config.theme);\n    }\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      ha-card {\n        cursor: pointer;\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n        text-align: center;\n        padding: 4% 0;\n        font-size: 1.2rem;\n      }\n\n      ha-icon {\n        width: 40%;\n        height: auto;\n        color: var(--paper-item-icon-color, #44739e);\n      }\n\n      ha-icon[data-domain=\"light\"][data-state=\"on\"],\n      ha-icon[data-domain=\"switch\"][data-state=\"on\"],\n      ha-icon[data-domain=\"binary_sensor\"][data-state=\"on\"],\n      ha-icon[data-domain=\"fan\"][data-state=\"on\"],\n      ha-icon[data-domain=\"sun\"][data-state=\"above_horizon\"] {\n        color: var(--paper-item-icon-active-color, #fdd835);\n      }\n\n      ha-icon[data-state=\"unavailable\"] {\n        color: var(--state-icon-unavailable-color);\n      }\n    `;\n  }\n\n  private _computeBrightness(stateObj: HassEntity | LightEntity): string {\n    if (!stateObj.attributes.brightness) {\n      return \"\";\n    }\n    const brightness = stateObj.attributes.brightness;\n    return `brightness(${(brightness + 245) / 5}%)`;\n  }\n\n  private _computeColor(stateObj: HassEntity | LightEntity): string {\n    if (!stateObj.attributes.hs_color) {\n      return \"\";\n    }\n    const [hue, sat] = stateObj.attributes.hs_color;\n    if (sat <= 10) {\n      return \"\";\n    }\n    return `hsl(${hue}, 100%, ${100 - sat / 2}%)`;\n  }\n\n  private _handleTap() {\n    handleClick(this, this.hass!, this._config!, false);\n  }\n\n  private _handleHold() {\n    handleClick(this, this.hass!, this._config!, true);\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-entity-button-card\": HuiEntityButtonCard;\n  }\n}\n","import { createCardElement } from \"../common/create-card-element\";\nimport { processConfigEntities } from \"../common/process-config-entities\";\nimport { LovelaceCard } from \"../types\";\nimport { LovelaceCardConfig } from \"../../../data/lovelace\";\nimport { EntityConfig } from \"../entity-rows/types\";\nimport { HomeAssistant } from \"../../../types\";\nimport { EntityFilterCardConfig } from \"./types\";\n\nclass EntityFilterCard extends HTMLElement implements LovelaceCard {\n  public isPanel?: boolean;\n  private _element?: LovelaceCard;\n  private _config?: EntityFilterCardConfig;\n  private _configEntities?: EntityConfig[];\n  private _baseCardConfig?: LovelaceCardConfig;\n\n  public getCardSize(): number {\n    return this._element ? this._element.getCardSize() : 1;\n  }\n\n  public setConfig(config: EntityFilterCardConfig): void {\n    if (!config.state_filter || !Array.isArray(config.state_filter)) {\n      throw new Error(\"Incorrect filter config.\");\n    }\n\n    this._config = config;\n    this._configEntities = undefined;\n    this._baseCardConfig = {\n      type: \"entities\",\n      entities: [],\n      ...this._config.card,\n    };\n\n    if (this.lastChild) {\n      this.removeChild(this.lastChild);\n      this._element = undefined;\n    }\n  }\n\n  set hass(hass: HomeAssistant) {\n    if (!hass || !this._config) {\n      return;\n    }\n\n    if (!this._configEntities) {\n      this._configEntities = processConfigEntities(this._config.entities);\n    }\n\n    const entitiesList = this._configEntities.filter((entityConf) => {\n      const stateObj = hass.states[entityConf.entity];\n      return stateObj && this._config!.state_filter.includes(stateObj.state);\n    });\n\n    if (entitiesList.length === 0 && this._config.show_empty === false) {\n      this.style.display = \"none\";\n      return;\n    }\n\n    const element = this._cardElement();\n\n    if (!element) {\n      return;\n    }\n\n    if (element.tagName !== \"HUI-ERROR-CARD\") {\n      element.setConfig({ ...this._baseCardConfig!, entities: entitiesList });\n      element.isPanel = this.isPanel;\n      element.hass = hass;\n    }\n\n    // Attach element if it has never been attached.\n    if (!this.lastChild) {\n      this.appendChild(element);\n    }\n\n    this.style.display = \"block\";\n  }\n\n  private _cardElement(): LovelaceCard | undefined {\n    if (!this._element && this._config) {\n      const element = createCardElement(this._baseCardConfig!);\n      this._element = element;\n    }\n\n    return this._element;\n  }\n}\ncustomElements.define(\"hui-entity-filter-card\", EntityFilterCard);\n","import {\n  html,\n  LitElement,\n  TemplateResult,\n  customElement,\n  property,\n  css,\n  CSSResult,\n} from \"lit-element\";\n\nimport { LovelaceCard } from \"../types\";\nimport { LovelaceCardConfig } from \"../../../data/lovelace\";\nimport { HomeAssistant } from \"../../../types\";\nimport { ErrorCardConfig } from \"./types\";\n\nexport const createErrorCardElement = (config) => {\n  const el = document.createElement(\"hui-error-card\");\n  el.setConfig(config);\n  return el;\n};\n\nexport const createErrorCardConfig = (error, origConfig) => ({\n  type: \"error\",\n  error,\n  origConfig,\n});\n\n@customElement(\"hui-error-card\")\nexport class HuiErrorCard extends LitElement implements LovelaceCard {\n  public hass?: HomeAssistant;\n\n  @property() private _config?: ErrorCardConfig;\n\n  public getCardSize(): number {\n    return 4;\n  }\n\n  public setConfig(config: ErrorCardConfig): void {\n    this._config = config;\n  }\n\n  protected render(): TemplateResult | void {\n    if (!this._config) {\n      return html``;\n    }\n\n    return html`\n      ${this._config.error}\n      <pre>${this._toStr(this._config.origConfig)}</pre>\n    `;\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      :host {\n        display: block;\n        background-color: #ef5350;\n        color: white;\n        padding: 8px;\n        font-weight: 500;\n      }\n    `;\n  }\n\n  private _toStr(config: LovelaceCardConfig): string {\n    return JSON.stringify(config, null, 2);\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-error-card\": HuiErrorCard;\n  }\n}\n","import {\n  html,\n  LitElement,\n  PropertyValues,\n  TemplateResult,\n  css,\n  CSSResult,\n  property,\n  customElement,\n} from \"lit-element\";\nimport { styleMap } from \"lit-html/directives/style-map\";\n\nimport \"../../../components/ha-card\";\nimport \"../components/hui-warning\";\n\nimport isValidEntityId from \"../../../common/entity/valid_entity_id\";\nimport applyThemesOnElement from \"../../../common/dom/apply_themes_on_element\";\nimport computeStateName from \"../../../common/entity/compute_state_name\";\n\nimport { HomeAssistant } from \"../../../types\";\nimport { fireEvent } from \"../../../common/dom/fire_event\";\nimport { hasConfigOrEntityChanged } from \"../common/has-changed\";\nimport { LovelaceCard, LovelaceCardEditor } from \"../types\";\nimport { GaugeCardConfig } from \"./types\";\n\nexport const severityMap = {\n  red: \"var(--label-badge-red)\",\n  green: \"var(--label-badge-green)\",\n  yellow: \"var(--label-badge-yellow)\",\n  normal: \"var(--label-badge-blue)\",\n};\n\n@customElement(\"hui-gauge-card\")\nclass HuiGaugeCard extends LitElement implements LovelaceCard {\n  public static async getConfigElement(): Promise<LovelaceCardEditor> {\n    await import(/* webpackChunkName: \"hui-gauge-card-editor\" */ \"../editor/config-elements/hui-gauge-card-editor\");\n    return document.createElement(\"hui-gauge-card-editor\");\n  }\n  public static getStubConfig(): object {\n    return {};\n  }\n\n  @property() public hass?: HomeAssistant;\n\n  @property() private _baseUnit = \"50px\";\n  @property() private _config?: GaugeCardConfig;\n\n  private _updated?: boolean;\n\n  public getCardSize(): number {\n    return 2;\n  }\n\n  public setConfig(config: GaugeCardConfig): void {\n    if (!config || !config.entity) {\n      throw new Error(\"Invalid card configuration\");\n    }\n    if (!isValidEntityId(config.entity)) {\n      throw new Error(\"Invalid Entity\");\n    }\n    this._config = { min: 0, max: 100, theme: \"default\", ...config };\n  }\n\n  public connectedCallback(): void {\n    super.connectedCallback();\n    this._setBaseUnit();\n  }\n\n  protected render(): TemplateResult | void {\n    if (!this._config || !this.hass) {\n      return html``;\n    }\n\n    const stateObj = this.hass.states[this._config.entity];\n\n    if (!stateObj) {\n      return html`\n        <hui-warning\n          >${this.hass.localize(\n            \"ui.panel.lovelace.warning.entity_not_found\",\n            \"entity\",\n            this._config.entity\n          )}</hui-warning\n        >\n      `;\n    }\n\n    const state = Number(stateObj.state);\n\n    if (isNaN(state)) {\n      return html`\n        <hui-warning\n          >${this.hass.localize(\n            \"ui.panel.lovelace.warning.entity_non_numeric\",\n            \"entity\",\n            this._config.entity\n          )}</hui-warning\n        >\n      `;\n    }\n\n    return html`\n      <ha-card\n        @click=\"${this._handleClick}\"\n        style=${styleMap({\n          \"--base-unit\": this._baseUnit,\n        })}\n      >\n        <div class=\"container\">\n          <div class=\"gauge-a\"></div>\n          <div class=\"gauge-b\"></div>\n          <div\n            class=\"gauge-c\"\n            style=${styleMap({\n              transform: `rotate(${this._translateTurn(state)}turn)`,\n              \"background-color\": this._computeSeverity(state),\n            })}\n          ></div>\n          <div class=\"gauge-data\">\n            <div id=\"percent\">\n              ${stateObj.state}\n              ${this._config.unit ||\n                stateObj.attributes.unit_of_measurement ||\n                \"\"}\n            </div>\n            <div id=\"name\">\n              ${this._config.name || computeStateName(stateObj)}\n            </div>\n          </div>\n        </div>\n      </ha-card>\n    `;\n  }\n\n  protected shouldUpdate(changedProps: PropertyValues): boolean {\n    return hasConfigOrEntityChanged(this, changedProps);\n  }\n\n  protected firstUpdated(): void {\n    this._updated = true;\n    this._setBaseUnit();\n    this.classList.add(\"init\");\n  }\n\n  protected updated(changedProps: PropertyValues): void {\n    super.updated(changedProps);\n    if (!this._config || !this.hass) {\n      return;\n    }\n\n    const oldHass = changedProps.get(\"hass\") as HomeAssistant | undefined;\n\n    if (!oldHass || oldHass.themes !== this.hass.themes) {\n      applyThemesOnElement(this, this.hass.themes, this._config.theme);\n    }\n  }\n\n  private _setBaseUnit(): void {\n    if (!this.isConnected || !this._updated) {\n      return;\n    }\n    const baseUnit = this._computeBaseUnit();\n    if (baseUnit !== \"0px\") {\n      this._baseUnit = baseUnit;\n    }\n  }\n\n  private _computeSeverity(numberValue: number): string {\n    const sections = this._config!.severity;\n\n    if (!sections) {\n      return severityMap.normal;\n    }\n\n    const sectionsArray = Object.keys(sections);\n    const sortable = sectionsArray.map((severity) => [\n      severity,\n      sections[severity],\n    ]);\n\n    for (const severity of sortable) {\n      if (severityMap[severity[0]] == null || isNaN(severity[1])) {\n        return severityMap.normal;\n      }\n    }\n    sortable.sort((a, b) => a[1] - b[1]);\n\n    if (numberValue >= sortable[0][1] && numberValue < sortable[1][1]) {\n      return severityMap[sortable[0][0]];\n    }\n    if (numberValue >= sortable[1][1] && numberValue < sortable[2][1]) {\n      return severityMap[sortable[1][0]];\n    }\n    if (numberValue >= sortable[2][1]) {\n      return severityMap[sortable[2][0]];\n    }\n    return severityMap.normal;\n  }\n\n  private _translateTurn(value: number): number {\n    const { min, max } = this._config!;\n    const maxTurnValue = Math.min(Math.max(value, min!), max!);\n    return (5 * (maxTurnValue - min!)) / (max! - min!) / 10;\n  }\n\n  private _computeBaseUnit(): string {\n    return this.clientWidth < 200 ? this.clientWidth / 5 + \"px\" : \"50px\";\n  }\n\n  private _handleClick(): void {\n    fireEvent(this, \"hass-more-info\", { entityId: this._config!.entity });\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      ha-card {\n        height: calc(var(--base-unit) * 3);\n        position: relative;\n        cursor: pointer;\n      }\n      .container {\n        width: calc(var(--base-unit) * 4);\n        height: calc(var(--base-unit) * 2);\n        position: absolute;\n        top: calc(var(--base-unit) * 1.5);\n        left: 50%;\n        overflow: hidden;\n        text-align: center;\n        transform: translate(-50%, -50%);\n      }\n      .gauge-a {\n        z-index: 1;\n        position: absolute;\n        background-color: var(--primary-background-color);\n        width: calc(var(--base-unit) * 4);\n        height: calc(var(--base-unit) * 2);\n        top: 0%;\n        border-radius: calc(var(--base-unit) * 2.5) calc(var(--base-unit) * 2.5)\n          0px 0px;\n      }\n      .gauge-b {\n        z-index: 3;\n        position: absolute;\n        background-color: var(--paper-card-background-color);\n        width: calc(var(--base-unit) * 2.5);\n        height: calc(var(--base-unit) * 1.25);\n        top: calc(var(--base-unit) * 0.75);\n        margin-left: calc(var(--base-unit) * 0.75);\n        margin-right: auto;\n        border-radius: calc(var(--base-unit) * 2.5) calc(var(--base-unit) * 2.5)\n          0px 0px;\n      }\n      .gauge-c {\n        z-index: 2;\n        position: absolute;\n        background-color: var(--label-badge-blue);\n        width: calc(var(--base-unit) * 4);\n        height: calc(var(--base-unit) * 2);\n        top: calc(var(--base-unit) * 2);\n        margin-left: auto;\n        margin-right: auto;\n        border-radius: 0px 0px calc(var(--base-unit) * 2)\n          calc(var(--base-unit) * 2);\n        transform-origin: center top;\n      }\n      .init .gauge-c {\n        transition: all 1.3s ease-in-out;\n      }\n      .gauge-data {\n        z-index: 4;\n        color: var(--primary-text-color);\n        line-height: calc(var(--base-unit) * 0.3);\n        position: absolute;\n        width: calc(var(--base-unit) * 4);\n        height: calc(var(--base-unit) * 2.1);\n        top: calc(var(--base-unit) * 1.2);\n        margin-left: auto;\n        margin-right: auto;\n      }\n      .init .gauge-data {\n        transition: all 1s ease-out;\n      }\n      .gauge-data #percent {\n        font-size: calc(var(--base-unit) * 0.55);\n      }\n      .gauge-data #name {\n        padding-top: calc(var(--base-unit) * 0.15);\n        font-size: calc(var(--base-unit) * 0.3);\n      }\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-gauge-card\": HuiGaugeCard;\n  }\n}\n","import {\n  html,\n  LitElement,\n  PropertyValues,\n  TemplateResult,\n  customElement,\n  property,\n  css,\n  CSSResult,\n} from \"lit-element\";\nimport { classMap } from \"lit-html/directives/class-map\";\n\nimport computeStateDisplay from \"../../../common/entity/compute_state_display\";\nimport computeStateName from \"../../../common/entity/compute_state_name\";\nimport applyThemesOnElement from \"../../../common/dom/apply_themes_on_element\";\n\nimport \"../../../components/entity/state-badge\";\nimport \"../../../components/ha-card\";\nimport \"../../../components/ha-icon\";\nimport \"../components/hui-warning-element\";\n\nimport { HomeAssistant } from \"../../../types\";\nimport { LovelaceCard, LovelaceCardEditor } from \"../types\";\nimport { longPress } from \"../common/directives/long-press-directive\";\nimport { processConfigEntities } from \"../common/process-config-entities\";\nimport { handleClick } from \"../common/handle-click\";\nimport { GlanceCardConfig, ConfigEntity } from \"./types\";\n\n@customElement(\"hui-glance-card\")\nexport class HuiGlanceCard extends LitElement implements LovelaceCard {\n  public static async getConfigElement(): Promise<LovelaceCardEditor> {\n    await import(/* webpackChunkName: \"hui-glance-card-editor\" */ \"../editor/config-elements/hui-glance-card-editor\");\n    return document.createElement(\"hui-glance-card-editor\");\n  }\n\n  public static getStubConfig(): object {\n    return { entities: [] };\n  }\n\n  @property() public hass?: HomeAssistant;\n\n  @property() private _config?: GlanceCardConfig;\n\n  private _configEntities?: ConfigEntity[];\n\n  public getCardSize(): number {\n    return (\n      (this._config!.title ? 1 : 0) +\n      Math.ceil(this._configEntities!.length / 5)\n    );\n  }\n\n  public setConfig(config: GlanceCardConfig): void {\n    this._config = { theme: \"default\", ...config };\n    const entities = processConfigEntities<ConfigEntity>(config.entities);\n\n    for (const entity of entities) {\n      if (\n        (entity.tap_action &&\n          entity.tap_action.action === \"call-service\" &&\n          !entity.tap_action.service) ||\n        (entity.hold_action &&\n          entity.hold_action.action === \"call-service\" &&\n          !entity.hold_action.service)\n      ) {\n        throw new Error(\n          'Missing required property \"service\" when tap_action or hold_action is call-service'\n        );\n      }\n    }\n\n    const columns = config.columns || Math.min(config.entities.length, 5);\n    this.style.setProperty(\"--glance-column-width\", `${100 / columns}%`);\n\n    this._configEntities = entities;\n\n    if (this.hass) {\n      this.requestUpdate();\n    }\n  }\n\n  protected shouldUpdate(changedProps: PropertyValues): boolean {\n    if (changedProps.has(\"_config\")) {\n      return true;\n    }\n\n    const oldHass = changedProps.get(\"hass\") as HomeAssistant | undefined;\n    if (oldHass && this._configEntities) {\n      for (const entity of this._configEntities) {\n        if (\n          oldHass.states[entity.entity] !== this.hass!.states[entity.entity]\n        ) {\n          return true;\n        }\n      }\n      return false;\n    }\n    return true;\n  }\n\n  protected render(): TemplateResult | void {\n    if (!this._config || !this.hass) {\n      return html``;\n    }\n    const { title } = this._config;\n\n    return html`\n      <ha-card .header=\"${title}\">\n        <div class=\"${classMap({ entities: true, \"no-header\": !title })}\">\n          ${this._configEntities!.map((entityConf) =>\n            this.renderEntity(entityConf)\n          )}\n        </div>\n      </ha-card>\n    `;\n  }\n\n  protected updated(changedProperties: PropertyValues): void {\n    super.updated(changedProperties);\n    if (!this._config || !this.hass) {\n      return;\n    }\n\n    const oldHass = changedProperties.get(\"hass\") as HomeAssistant | undefined;\n    if (!oldHass || oldHass.themes !== this.hass.themes) {\n      applyThemesOnElement(this, this.hass.themes, this._config.theme);\n    }\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      .entities {\n        display: flex;\n        padding: 0 16px 4px;\n        flex-wrap: wrap;\n      }\n      .entities.no-header {\n        padding-top: 16px;\n      }\n      .entity {\n        box-sizing: border-box;\n        padding: 0 4px;\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n        cursor: pointer;\n        margin-bottom: 12px;\n        width: var(--glance-column-width, 20%);\n      }\n      .entity div {\n        width: 100%;\n        text-align: center;\n        white-space: nowrap;\n        overflow: hidden;\n        text-overflow: ellipsis;\n      }\n      .name {\n        min-height: var(--paper-font-body1_-_line-height, 20px);\n      }\n      state-badge {\n        margin: 8px 0;\n      }\n    `;\n  }\n\n  private renderEntity(entityConf): TemplateResult {\n    const stateObj = this.hass!.states[entityConf.entity];\n\n    if (!stateObj) {\n      return html`\n        <hui-warning-element\n          label=${this.hass!.localize(\n            \"ui.panel.lovelace.warning.entity_not_found\",\n            \"entity\",\n            entityConf.entity\n          )}\n        ></hui-warning-element>\n      `;\n    }\n\n    return html`\n      <div\n        class=\"entity\"\n        .entityConf=\"${entityConf}\"\n        @ha-click=\"${this._handleTap}\"\n        @ha-hold=\"${this._handleHold}\"\n        .longPress=\"${longPress()}\"\n      >\n        ${this._config!.show_name !== false\n          ? html`\n              <div class=\"name\">\n                ${\"name\" in entityConf\n                  ? entityConf.name\n                  : computeStateName(stateObj)}\n              </div>\n            `\n          : \"\"}\n        ${this._config!.show_icon !== false\n          ? html`\n              <state-badge\n                .stateObj=\"${stateObj}\"\n                .overrideIcon=\"${entityConf.icon}\"\n              ></state-badge>\n            `\n          : \"\"}\n        ${this._config!.show_state !== false\n          ? html`\n              <div>\n                ${computeStateDisplay(\n                  this.hass!.localize,\n                  stateObj,\n                  this.hass!.language\n                )}\n              </div>\n            `\n          : \"\"}\n      </div>\n    `;\n  }\n\n  private _handleTap(ev: MouseEvent): void {\n    const config = (ev.currentTarget as any).entityConf as ConfigEntity;\n    handleClick(this, this.hass!, config, false);\n  }\n\n  private _handleHold(ev: MouseEvent): void {\n    const config = (ev.currentTarget as any).entityConf as ConfigEntity;\n    handleClick(this, this.hass!, config, true);\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-glance-card\": HuiGlanceCard;\n  }\n}\n","import { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport \"../../../components/ha-card\";\nimport \"../../../components/state-history-charts\";\nimport \"../../../data/ha-state-history-data\";\n\nimport { processConfigEntities } from \"../common/process-config-entities\";\n\nclass HuiHistoryGraphCard extends PolymerElement {\n  static get template() {\n    return html`\n      <style>\n        .content {\n          padding: 16px;\n        }\n        [header] .content {\n          padding-top: 0;\n        }\n      </style>\n\n      <ha-card header$=\"[[_config.title]]\">\n        <div class=\"content\">\n          <ha-state-history-data\n            hass=\"[[hass]]\"\n            filter-type=\"recent-entity\"\n            entity-id=\"[[_entities]]\"\n            data=\"{{_stateHistory}}\"\n            is-loading=\"{{_stateHistoryLoading}}\"\n            cache-config=\"[[_cacheConfig]]\"\n          ></ha-state-history-data>\n          <state-history-charts\n            hass=\"[[hass]]\"\n            history-data=\"[[_stateHistory]]\"\n            is-loading-data=\"[[_stateHistoryLoading]]\"\n            names=\"[[_names]]\"\n            up-to-now\n            no-single\n          ></state-history-charts>\n        </div>\n      </ha-card>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      _config: Object,\n      _names: Object,\n      _entities: Array,\n\n      _stateHistory: Object,\n      _stateHistoryLoading: Boolean,\n      _cacheConfig: Object,\n    };\n  }\n\n  getCardSize() {\n    return 4;\n  }\n\n  setConfig(config) {\n    const entities = processConfigEntities(config.entities);\n\n    this._config = config;\n\n    const _entities = [];\n    const _names = {};\n    for (const entity of entities) {\n      _entities.push(entity.entity);\n      if (entity.name) {\n        _names[entity.entity] = entity.name;\n      }\n    }\n\n    this.setProperties({\n      _cacheConfig: {\n        cacheKey: _entities.sort().join(),\n        hoursToShow: config.hours_to_show || 24,\n        refresh: config.refresh_interval || 0,\n      },\n      _entities,\n      _names,\n    });\n  }\n}\n\ncustomElements.define(\"hui-history-graph-card\", HuiHistoryGraphCard);\n","import { html, TemplateResult } from \"lit-element\";\n\nimport { computeCardSize } from \"../common/compute-card-size\";\nimport { HuiStackCard } from \"./hui-stack-card\";\n\nclass HuiHorizontalStackCard extends HuiStackCard {\n  public getCardSize(): number {\n    let totalSize = 0;\n\n    if (this._cards) {\n      for (const element of this._cards) {\n        const elementSize = computeCardSize(element);\n        totalSize = elementSize > totalSize ? elementSize : totalSize;\n      }\n    }\n\n    return totalSize;\n  }\n\n  protected renderStyle(): TemplateResult {\n    return html`\n      <style>\n        #root {\n          display: flex;\n        }\n        #root > * {\n          flex: 1 1 0;\n          margin: 0 4px;\n          min-width: 0;\n        }\n        #root > *:first-child {\n          margin-left: 0;\n        }\n        #root > *:last-child {\n          margin-right: 0;\n        }\n      </style>\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-horitzontal-stack-card\": HuiHorizontalStackCard;\n  }\n}\n\ncustomElements.define(\"hui-horizontal-stack-card\", HuiHorizontalStackCard);\n","import {\n  html,\n  LitElement,\n  TemplateResult,\n  customElement,\n  property,\n  css,\n  CSSResult,\n} from \"lit-element\";\n\nimport \"../../../components/ha-card\";\n\nimport { LovelaceCard, LovelaceCardEditor } from \"../types\";\nimport { styleMap } from \"lit-html/directives/style-map\";\nimport { IframeCardConfig } from \"./types\";\n\n@customElement(\"hui-iframe-card\")\nexport class HuiIframeCard extends LitElement implements LovelaceCard {\n  public static async getConfigElement(): Promise<LovelaceCardEditor> {\n    await import(/* webpackChunkName: \"hui-iframe-card-editor\" */ \"../editor/config-elements/hui-iframe-card-editor\");\n    return document.createElement(\"hui-iframe-card-editor\");\n  }\n  public static getStubConfig(): object {\n    return { url: \"https://www.home-assistant.io\", aspect_ratio: \"50%\" };\n  }\n\n  @property() protected _config?: IframeCardConfig;\n\n  public getCardSize(): number {\n    if (!this._config) {\n      return 3;\n    }\n    const aspectRatio = this._config.aspect_ratio\n      ? Number(this._config.aspect_ratio.replace(\"%\", \"\"))\n      : 50;\n    return 1 + aspectRatio / 25;\n  }\n\n  public setConfig(config: IframeCardConfig): void {\n    if (!config.url) {\n      throw new Error(\"URL required\");\n    }\n\n    this._config = config;\n  }\n\n  protected render(): TemplateResult | void {\n    if (!this._config) {\n      return html``;\n    }\n\n    const aspectRatio = this._config.aspect_ratio || \"50%\";\n\n    return html`\n      <ha-card .header=\"${this._config.title}\">\n        <div\n          id=\"root\"\n          style=\"${styleMap({\n            \"padding-top\": aspectRatio,\n          })}\"\n        >\n          <iframe src=\"${this._config.url}\"></iframe>\n        </div>\n      </ha-card>\n    `;\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      ha-card {\n        overflow: hidden;\n      }\n\n      #root {\n        width: 100%;\n        position: relative;\n      }\n\n      iframe {\n        position: absolute;\n        border: none;\n        width: 100%;\n        height: 100%;\n        top: 0;\n        left: 0;\n      }\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-iframe-card\": HuiIframeCard;\n  }\n}\n","import { createErrorCardConfig } from \"./hui-error-card\";\nimport computeDomain from \"../../../common/entity/compute_domain\";\n\nexport default class LegacyWrapperCard extends HTMLElement {\n  constructor(tag, domain) {\n    super();\n    this._tag = tag.toUpperCase();\n    this._domain = domain;\n    this._element = null;\n  }\n\n  getCardSize() {\n    return 3;\n  }\n\n  setConfig(config) {\n    if (!config.entity) {\n      throw new Error(\"No entity specified\");\n    }\n\n    if (computeDomain(config.entity) !== this._domain) {\n      throw new Error(\n        `Specified entity needs to be of domain ${this._domain}.`\n      );\n    }\n\n    this._config = config;\n  }\n\n  set hass(hass) {\n    const entityId = this._config.entity;\n\n    if (entityId in hass.states) {\n      this._ensureElement(this._tag);\n      this.lastChild.hass = hass;\n      this.lastChild.stateObj = hass.states[entityId];\n      this.lastChild.config = this._config;\n    } else {\n      this._ensureElement(\"HUI-ERROR-CARD\");\n      this.lastChild.setConfig(\n        createErrorCardConfig(\n          `No state available for ${entityId}`,\n          this._config\n        )\n      );\n    }\n  }\n\n  _ensureElement(tag) {\n    if (this.lastChild && this.lastChild.tagName === tag) return;\n\n    if (this.lastChild) {\n      this.removeChild(this.lastChild);\n    }\n\n    this.appendChild(document.createElement(tag));\n  }\n}\n","import {\n  html,\n  LitElement,\n  PropertyValues,\n  TemplateResult,\n  property,\n  customElement,\n} from \"lit-element\";\nimport \"@polymer/paper-icon-button/paper-icon-button\";\n\nimport stateIcon from \"../../../common/entity/state_icon\";\nimport computeStateName from \"../../../common/entity/compute_state_name\";\nimport applyThemesOnElement from \"../../../common/dom/apply_themes_on_element\";\n\nimport \"../../../components/ha-card\";\nimport \"../../../components/ha-icon\";\nimport \"../components/hui-warning\";\n\nimport { fireEvent } from \"../../../common/dom/fire_event\";\nimport { styleMap } from \"lit-html/directives/style-map\";\nimport { HomeAssistant, LightEntity } from \"../../../types\";\nimport { LovelaceCard, LovelaceCardEditor } from \"../types\";\nimport { hasConfigOrEntityChanged } from \"../common/has-changed\";\nimport { loadRoundslider } from \"../../../resources/jquery.roundslider.ondemand\";\nimport { toggleEntity } from \"../common/entity/toggle-entity\";\nimport { LightCardConfig } from \"./types\";\n\nconst lightConfig = {\n  radius: 80,\n  step: 1,\n  circleShape: \"pie\",\n  startAngle: 315,\n  width: 5,\n  min: 1,\n  max: 100,\n  sliderType: \"min-range\",\n  lineCap: \"round\",\n  handleSize: \"+12\",\n  showTooltip: false,\n  animation: false,\n};\n\n@customElement(\"hui-light-card\")\nexport class HuiLightCard extends LitElement implements LovelaceCard {\n  public static async getConfigElement(): Promise<LovelaceCardEditor> {\n    await import(/* webpackChunkName: \"hui-light-card-editor\" */ \"../editor/config-elements/hui-light-card-editor\");\n    return document.createElement(\"hui-light-card-editor\");\n  }\n  public static getStubConfig(): object {\n    return {};\n  }\n\n  @property() public hass?: HomeAssistant;\n\n  @property() private _config?: LightCardConfig;\n\n  @property() private _roundSliderStyle?: TemplateResult;\n\n  @property() private _jQuery?: any;\n\n  private _brightnessTimout?: number;\n\n  public getCardSize(): number {\n    return 2;\n  }\n\n  public setConfig(config: LightCardConfig): void {\n    if (!config.entity || config.entity.split(\".\")[0] !== \"light\") {\n      throw new Error(\"Specify an entity from within the light domain.\");\n    }\n\n    this._config = { theme: \"default\", ...config };\n  }\n\n  protected render(): TemplateResult | void {\n    if (!this.hass || !this._config) {\n      return html``;\n    }\n\n    const stateObj = this.hass.states[this._config!.entity] as LightEntity;\n\n    if (!stateObj) {\n      return html`\n        <hui-warning\n          >${this.hass.localize(\n            \"ui.panel.lovelace.warning.entity_not_found\",\n            \"entity\",\n            this._config.entity\n          )}</hui-warning\n        >\n      `;\n    }\n\n    return html`\n      ${this.renderStyle()}\n      <ha-card>\n        <paper-icon-button\n          icon=\"hass:dots-vertical\"\n          class=\"more-info\"\n          @click=\"${this._handleMoreInfo}\"\n        ></paper-icon-button>\n        <div id=\"light\"></div>\n        <div id=\"tooltip\">\n          <div class=\"icon-state\">\n            <ha-icon\n              class=\"light-icon\"\n              data-state=\"${stateObj.state}\"\n              .icon=\"${stateIcon(stateObj)}\"\n              style=\"${styleMap({\n                filter: this._computeBrightness(stateObj),\n                color: this._computeColor(stateObj),\n              })}\"\n              @click=\"${this._handleTap}\"\n            ></ha-icon>\n            <div class=\"brightness\" @ha-click=\"${this._handleTap}\"></div>\n            <div class=\"name\">\n              ${this._config.name || computeStateName(stateObj)}\n            </div>\n          </div>\n        </div>\n      </ha-card>\n    `;\n  }\n\n  protected shouldUpdate(changedProps: PropertyValues): boolean {\n    return hasConfigOrEntityChanged(this, changedProps);\n  }\n\n  protected async firstUpdated(): Promise<void> {\n    const loaded = await loadRoundslider();\n\n    this._roundSliderStyle = loaded.roundSliderStyle;\n    this._jQuery = loaded.jQuery;\n\n    const stateObj = this.hass!.states[this._config!.entity] as LightEntity;\n\n    if (!stateObj) {\n      // Card will require refresh to work again\n      return;\n    }\n\n    const brightness = stateObj.attributes.brightness || 0;\n\n    this._jQuery(\"#light\", this.shadowRoot).roundSlider({\n      ...lightConfig,\n      change: (value) => this._setBrightness(value),\n      drag: (value) => this._dragEvent(value),\n      start: () => this._showBrightness(),\n      stop: () => this._hideBrightness(),\n    });\n    this.shadowRoot!.querySelector(\".brightness\")!.innerHTML =\n      (Math.round((brightness / 254) * 100) || 0) + \"%\";\n  }\n\n  protected updated(changedProps: PropertyValues): void {\n    super.updated(changedProps);\n    if (!this._config || !this.hass || !this._jQuery) {\n      return;\n    }\n\n    const stateObj = this.hass!.states[this._config!.entity];\n\n    if (!stateObj) {\n      return;\n    }\n\n    const attrs = stateObj.attributes;\n\n    this._jQuery(\"#light\", this.shadowRoot).roundSlider({\n      value: Math.round((attrs.brightness / 254) * 100) || 0,\n    });\n\n    const oldHass = changedProps.get(\"hass\") as HomeAssistant | undefined;\n    if (!oldHass || oldHass.themes !== this.hass.themes) {\n      applyThemesOnElement(this, this.hass.themes, this._config.theme);\n    }\n  }\n\n  private renderStyle(): TemplateResult {\n    return html`\n      ${this._roundSliderStyle}\n      <style>\n        :host {\n          display: block;\n        }\n\n        ha-card {\n          position: relative;\n          overflow: hidden;\n          --brightness-font-color: white;\n          --brightness-font-text-shadow: -1px -1px 0 #000, 1px -1px 0 #000,\n            -1px 1px 0 #000, 1px 1px 0 #000;\n          --name-font-size: 1.2rem;\n          --brightness-font-size: 1.2rem;\n          --rail-border-color: transparent;\n        }\n\n        #tooltip {\n          position: absolute;\n          top: 0;\n          left: 0;\n          right: 0;\n          height: 100%;\n          text-align: center;\n          z-index: 15;\n        }\n\n        .icon-state {\n          display: block;\n          margin: auto;\n          width: 100%;\n          height: 100%;\n          transform: translate(0, 25%);\n        }\n\n        #light {\n          margin: 0 auto;\n          padding-top: 16px;\n          padding-bottom: 16px;\n        }\n\n        #light .rs-bar.rs-transition.rs-first,\n        .rs-bar.rs-transition.rs-second {\n          z-index: 20 !important;\n        }\n\n        #light .rs-range-color {\n          background-color: var(--primary-color);\n        }\n\n        #light .rs-path-color {\n          background-color: var(--disabled-text-color);\n        }\n\n        #light .rs-handle {\n          background-color: var(--paper-card-background-color, white);\n          padding: 7px;\n          border: 2px solid var(--disabled-text-color);\n        }\n\n        #light .rs-handle.rs-focus {\n          border-color: var(--primary-color);\n        }\n\n        #light .rs-handle:after {\n          border-color: var(--primary-color);\n          background-color: var(--primary-color);\n        }\n\n        #light .rs-border {\n          border-color: var(--rail-border-color);\n        }\n\n        #light .rs-inner.rs-bg-color.rs-border,\n        #light .rs-overlay.rs-transition.rs-bg-color {\n          background-color: var(--paper-card-background-color, white);\n        }\n\n        .light-icon {\n          margin: auto;\n          width: 76px;\n          height: 76px;\n          color: var(--paper-item-icon-color, #44739e);\n          cursor: pointer;\n        }\n\n        .light-icon[data-state=\"on\"] {\n          color: var(--paper-item-icon-active-color, #fdd835);\n        }\n\n        .light-icon[data-state=\"unavailable\"] {\n          color: var(--state-icon-unavailable-color);\n        }\n\n        .name {\n          padding-top: 40px;\n          font-size: var(--name-font-size);\n        }\n\n        .brightness {\n          font-size: var(--brightness-font-size);\n          position: absolute;\n          margin: 0 auto;\n          left: 50%;\n          top: 10%;\n          transform: translate(-50%);\n          opacity: 0;\n          transition: opacity 0.5s ease-in-out;\n          -moz-transition: opacity 0.5s ease-in-out;\n          -webkit-transition: opacity 0.5s ease-in-out;\n          cursor: pointer;\n          color: var(--brightness-font-color);\n          text-shadow: var(--brightness-font-text-shadow);\n          pointer-events: none;\n        }\n\n        .show_brightness {\n          opacity: 1;\n        }\n\n        .more-info {\n          position: absolute;\n          cursor: pointer;\n          top: 0;\n          right: 0;\n          z-index: 25;\n          color: var(--secondary-text-color);\n        }\n      </style>\n    `;\n  }\n\n  private _dragEvent(e: any): void {\n    this.shadowRoot!.querySelector(\".brightness\")!.innerHTML = e.value + \"%\";\n  }\n\n  private _showBrightness(): void {\n    clearTimeout(this._brightnessTimout);\n    this.shadowRoot!.querySelector(\".brightness\")!.classList.add(\n      \"show_brightness\"\n    );\n  }\n\n  private _hideBrightness(): void {\n    this._brightnessTimout = window.setTimeout(() => {\n      this.shadowRoot!.querySelector(\".brightness\")!.classList.remove(\n        \"show_brightness\"\n      );\n    }, 500);\n  }\n\n  private _setBrightness(e: any): void {\n    this.hass!.callService(\"light\", \"turn_on\", {\n      entity_id: this._config!.entity,\n      brightness_pct: e.value,\n    });\n  }\n\n  private _computeBrightness(stateObj: LightEntity): string {\n    if (!stateObj.attributes.brightness) {\n      return \"\";\n    }\n    const brightness = stateObj.attributes.brightness;\n    return `brightness(${(brightness + 245) / 5}%)`;\n  }\n\n  private _computeColor(stateObj: LightEntity): string {\n    if (!stateObj.attributes.hs_color) {\n      return \"\";\n    }\n    const [hue, sat] = stateObj.attributes.hs_color;\n    if (sat <= 10) {\n      return \"\";\n    }\n    return `hsl(${hue}, 100%, ${100 - sat / 2}%)`;\n  }\n\n  private _handleTap() {\n    toggleEntity(this.hass!, this._config!.entity!);\n  }\n\n  private _handleMoreInfo() {\n    fireEvent(this, \"hass-more-info\", {\n      entityId: this._config!.entity,\n    });\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-light-card\": HuiLightCard;\n  }\n}\n","import \"@polymer/paper-icon-button/paper-icon-button\";\nimport { Layer, Marker, Circle, Map } from \"leaflet\";\nimport {\n  LitElement,\n  TemplateResult,\n  css,\n  html,\n  property,\n  PropertyValues,\n  CSSResult,\n  customElement,\n} from \"lit-element\";\n\nimport \"../../map/ha-entity-marker\";\n\nimport {\n  setupLeafletMap,\n  LeafletModuleType,\n} from \"../../../common/dom/setup-leaflet-map\";\nimport computeStateDomain from \"../../../common/entity/compute_state_domain\";\nimport computeStateName from \"../../../common/entity/compute_state_name\";\nimport { debounce } from \"../../../common/util/debounce\";\nimport parseAspectRatio from \"../../../common/util/parse-aspect-ratio\";\nimport computeDomain from \"../../../common/entity/compute_domain\";\n\nimport { HomeAssistant } from \"../../../types\";\nimport { LovelaceCard } from \"../types\";\nimport { EntityConfig } from \"../entity-rows/types\";\nimport { processConfigEntities } from \"../common/process-config-entities\";\nimport { MapCardConfig } from \"./types\";\n\n@customElement(\"hui-map-card\")\nclass HuiMapCard extends LitElement implements LovelaceCard {\n  public static async getConfigElement() {\n    await import(/* webpackChunkName: \"hui-map-card-editor\" */ \"../editor/config-elements/hui-map-card-editor\");\n    return document.createElement(\"hui-map-card-editor\");\n  }\n\n  public static getStubConfig() {\n    return { entities: [] };\n  }\n\n  @property() public hass?: HomeAssistant;\n\n  @property({ type: Boolean, reflect: true })\n  public isPanel = false;\n\n  @property()\n  private _config?: MapCardConfig;\n  private _configEntities?: EntityConfig[];\n  // tslint:disable-next-line\n  private Leaflet?: LeafletModuleType;\n  private _leafletMap?: Map;\n  // @ts-ignore\n  private _resizeObserver?: ResizeObserver;\n  private _debouncedResizeListener = debounce(\n    () => {\n      if (!this._leafletMap) {\n        return;\n      }\n      this._leafletMap.invalidateSize();\n    },\n    100,\n    false\n  );\n  private _mapItems: Array<Marker | Circle> = [];\n  private _connected = false;\n\n  public setConfig(config: MapCardConfig): void {\n    if (!config) {\n      throw new Error(\"Error in card configuration.\");\n    }\n\n    if (!config.entities && !config.geo_location_sources) {\n      throw new Error(\n        \"Either entities or geo_location_sources must be defined\"\n      );\n    }\n    if (config.entities && !Array.isArray(config.entities)) {\n      throw new Error(\"Entities need to be an array\");\n    }\n    if (\n      config.geo_location_sources &&\n      !Array.isArray(config.geo_location_sources)\n    ) {\n      throw new Error(\"Geo_location_sources needs to be an array\");\n    }\n\n    this._config = config;\n    this._configEntities = config.entities\n      ? processConfigEntities(config.entities)\n      : [];\n  }\n\n  public getCardSize(): number {\n    if (!this._config) {\n      return 3;\n    }\n    const ratio = parseAspectRatio(this._config.aspect_ratio);\n    const ar =\n      ratio && ratio.w > 0 && ratio.h > 0\n        ? `${((100 * ratio.h) / ratio.w).toFixed(2)}`\n        : \"100\";\n    return 1 + Math.floor(Number(ar) / 25) || 3;\n  }\n\n  public connectedCallback(): void {\n    super.connectedCallback();\n    this._connected = true;\n    if (this.hasUpdated) {\n      this.loadMap();\n      this._attachObserver();\n    }\n  }\n\n  public disconnectedCallback(): void {\n    super.disconnectedCallback();\n    this._connected = false;\n\n    if (this._leafletMap) {\n      this._leafletMap.remove();\n      this._leafletMap = undefined;\n      this.Leaflet = undefined;\n    }\n\n    if (this._resizeObserver) {\n      this._resizeObserver.unobserve(this._mapEl);\n    } else {\n      window.removeEventListener(\"resize\", this._debouncedResizeListener);\n    }\n  }\n\n  protected render(): TemplateResult | void {\n    if (!this._config) {\n      return html``;\n    }\n    return html`\n      <ha-card id=\"card\" .header=${this._config.title}>\n        <div id=\"root\">\n          <div id=\"map\"></div>\n          <paper-icon-button\n            @click=${this._fitMap}\n            icon=\"hass:image-filter-center-focus\"\n            title=\"Reset focus\"\n          ></paper-icon-button>\n        </div>\n      </ha-card>\n    `;\n  }\n\n  protected firstUpdated(changedProps: PropertyValues): void {\n    super.firstUpdated(changedProps);\n    this.loadMap();\n    const root = this.shadowRoot!.getElementById(\"root\");\n\n    if (!this._config || this.isPanel || !root) {\n      return;\n    }\n\n    if (this._connected) {\n      this._attachObserver();\n    }\n\n    const ratio = parseAspectRatio(this._config.aspect_ratio);\n\n    root.style.paddingBottom =\n      ratio && ratio.w > 0 && ratio.h > 0\n        ? `${((100 * ratio.h) / ratio.w).toFixed(2)}%`\n        : (root.style.paddingBottom = \"100%\");\n  }\n\n  protected updated(changedProps: PropertyValues): void {\n    if (changedProps.has(\"hass\")) {\n      this._drawEntities();\n    }\n  }\n\n  private get _mapEl(): HTMLDivElement {\n    return this.shadowRoot!.getElementById(\"map\") as HTMLDivElement;\n  }\n\n  private async loadMap(): Promise<void> {\n    [this._leafletMap, this.Leaflet] = await setupLeafletMap(this._mapEl);\n    this._drawEntities();\n    this._leafletMap.invalidateSize();\n    this._fitMap();\n  }\n\n  private _fitMap(): void {\n    if (!this._leafletMap || !this.Leaflet || !this._config || !this.hass) {\n      return;\n    }\n    const zoom = this._config.default_zoom;\n    if (this._mapItems.length === 0) {\n      this._leafletMap.setView(\n        new this.Leaflet.LatLng(\n          this.hass.config.latitude,\n          this.hass.config.longitude\n        ),\n        zoom || 14\n      );\n      return;\n    }\n\n    const bounds = this.Leaflet.latLngBounds(\n      this._mapItems ? this._mapItems.map((item) => item.getLatLng()) : []\n    );\n    this._leafletMap.fitBounds(bounds.pad(0.5));\n\n    if (zoom && this._leafletMap.getZoom() > zoom) {\n      this._leafletMap.setZoom(zoom);\n    }\n  }\n\n  private _drawEntities(): void {\n    const hass = this.hass;\n    const map = this._leafletMap;\n    const config = this._config;\n    const Leaflet = this.Leaflet;\n    if (!hass || !map || !config || !Leaflet) {\n      return;\n    }\n\n    if (this._mapItems) {\n      this._mapItems.forEach((marker) => marker.remove());\n    }\n    const mapItems: Layer[] = (this._mapItems = []);\n\n    const allEntities = this._configEntities!.concat();\n\n    // Calculate visible geo location sources\n    if (config.geo_location_sources) {\n      const includesAll = config.geo_location_sources.includes(\"all\");\n      for (const entityId of Object.keys(hass.states)) {\n        const stateObj = hass.states[entityId];\n        if (\n          computeDomain(entityId) === \"geo_location\" &&\n          (includesAll ||\n            config.geo_location_sources.includes(stateObj.attributes.source))\n        ) {\n          allEntities.push({ entity: entityId });\n        }\n      }\n    }\n\n    for (const entity of allEntities) {\n      const entityId = entity.entity;\n      const stateObj = hass.states[entityId];\n      if (!stateObj) {\n        continue;\n      }\n      const title = computeStateName(stateObj);\n      const {\n        latitude,\n        longitude,\n        passive,\n        icon,\n        radius,\n        entity_picture: entityPicture,\n        gps_accuracy: gpsAccuracy,\n      } = stateObj.attributes;\n\n      if (!(latitude && longitude)) {\n        continue;\n      }\n\n      if (computeStateDomain(stateObj) === \"zone\") {\n        // DRAW ZONE\n        if (passive) {\n          continue;\n        }\n\n        // create marker with the icon\n        mapItems.push(\n          Leaflet.marker([latitude, longitude], {\n            icon: Leaflet.divIcon({\n              html: icon ? `<ha-icon icon=\"${icon}\"></ha-icon>` : title,\n              iconSize: [24, 24],\n              className: \"\",\n            }),\n            interactive: false,\n            title,\n          })\n        );\n\n        // create circle around it\n        mapItems.push(\n          Leaflet.circle([latitude, longitude], {\n            interactive: false,\n            color: \"#FF9800\",\n            radius,\n          })\n        );\n\n        continue;\n      }\n\n      // DRAW ENTITY\n      // create icon\n      const entityName = title\n        .split(\" \")\n        .map((part) => part[0])\n        .join(\"\")\n        .substr(0, 3);\n\n      // create market with the icon\n      mapItems.push(\n        Leaflet.marker([latitude, longitude], {\n          icon: Leaflet.divIcon({\n            // Leaflet clones this element before adding it to the map. This messes up\n            // our Polymer object and we can't pass data through. Thus we hack like this.\n            html: `\n              <ha-entity-marker\n                entity-id=\"${entityId}\"\n                entity-name=\"${entityName}\"\n                entity-picture=\"${entityPicture || \"\"}\"\n              ></ha-entity-marker>\n            `,\n            iconSize: [48, 48],\n            className: \"\",\n          }),\n          title: computeStateName(stateObj),\n        })\n      );\n\n      // create circle around if entity has accuracy\n      if (gpsAccuracy) {\n        mapItems.push(\n          Leaflet.circle([latitude, longitude], {\n            interactive: false,\n            color: \"#0288D1\",\n            radius: gpsAccuracy,\n          })\n        );\n      }\n    }\n\n    this._mapItems.forEach((marker) => map.addLayer(marker));\n  }\n\n  private _attachObserver(): void {\n    // Observe changes to map size and invalidate to prevent broken rendering\n    // Uses ResizeObserver in Chrome, otherwise window resize event\n\n    // @ts-ignore\n    if (typeof ResizeObserver === \"function\") {\n      // @ts-ignore\n      this._resizeObserver = new ResizeObserver(() =>\n        this._debouncedResizeListener()\n      );\n      this._resizeObserver.observe(this._mapEl);\n    } else {\n      window.addEventListener(\"resize\", this._debouncedResizeListener);\n    }\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      :host([ispanel]) ha-card {\n        left: 0;\n        top: 0;\n        width: 100%;\n        /**\n       * In panel mode we want a full height map. Since parent #view\n       * only sets min-height, we need absolute positioning here\n       */\n        height: 100%;\n        position: absolute;\n      }\n\n      ha-card {\n        overflow: hidden;\n      }\n\n      #map {\n        z-index: 0;\n        border: none;\n        position: absolute;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n      }\n\n      paper-icon-button {\n        position: absolute;\n        top: 75px;\n        left: 7px;\n      }\n\n      #root {\n        position: relative;\n      }\n\n      :host([ispanel]) #root {\n        height: 100%;\n      }\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-map-card\": HuiMapCard;\n  }\n}\n","import {\n  html,\n  LitElement,\n  TemplateResult,\n  customElement,\n  property,\n  css,\n  CSSResult,\n} from \"lit-element\";\nimport { classMap } from \"lit-html/directives/class-map\";\n\nimport \"../../../components/ha-card\";\nimport \"../../../components/ha-markdown\";\n\nimport { LovelaceCard, LovelaceCardEditor } from \"../types\";\nimport { MarkdownCardConfig } from \"./types\";\n\n@customElement(\"hui-markdown-card\")\nexport class HuiMarkdownCard extends LitElement implements LovelaceCard {\n  public static async getConfigElement(): Promise<LovelaceCardEditor> {\n    await import(/* webpackChunkName: \"hui-markdown-card-editor\" */ \"../editor/config-elements/hui-markdown-card-editor\");\n    return document.createElement(\"hui-markdown-card-editor\");\n  }\n\n  public static getStubConfig(): object {\n    return { content: \" \" };\n  }\n\n  @property() private _config?: MarkdownCardConfig;\n\n  public getCardSize(): number {\n    return this._config!.content.split(\"\\n\").length;\n  }\n\n  public setConfig(config: MarkdownCardConfig): void {\n    if (!config.content) {\n      throw new Error(\"Invalid Configuration: Content Required\");\n    }\n\n    this._config = config;\n  }\n\n  protected render(): TemplateResult | void {\n    if (!this._config) {\n      return html``;\n    }\n\n    return html`\n      <ha-card .header=\"${this._config.title}\">\n        <ha-markdown\n          class=\"markdown ${classMap({\n            \"no-header\": !this._config.title,\n          })}\"\n          .content=\"${this._config.content}\"\n        ></ha-markdown>\n      </ha-card>\n    `;\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      :host {\n        /* start paper-font-body1 style */\n        font-family: \"Roboto\", \"Noto\", sans-serif;\n        -webkit-font-smoothing: antialiased; /* OS X subpixel AA bleed bug */\n        font-size: 14px;\n        font-weight: 400;\n        line-height: 20px;\n        /* end paper-font-body1 style */\n      }\n      ha-markdown {\n        display: block;\n        padding: 0 16px 16px;\n        -ms-user-select: initial;\n        -webkit-user-select: initial;\n        -moz-user-select: initial;\n      }\n      .markdown.no-header {\n        padding-top: 16px;\n      }\n      ha-markdown > *:first-child {\n        margin-top: 0;\n      }\n      ha-markdown > *:last-child {\n        margin-bottom: 0;\n      }\n      ha-markdown a {\n        color: var(--primary-color);\n      }\n      ha-markdown img {\n        max-width: 100%;\n      }\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-markdown-card\": HuiMarkdownCard;\n  }\n}\n","import \"../../../cards/ha-media_player-card\";\n\nimport LegacyWrapperCard from \"./hui-legacy-wrapper-card\";\n\nclass HuiMediaControlCard extends LegacyWrapperCard {\n  static async getConfigElement() {\n    await import(/* webpackChunkName: \"hui-media-control-card-editor\" */ \"../editor/config-elements/hui-media-control-card-editor\");\n    return document.createElement(\"hui-media-control-card-editor\");\n  }\n\n  static getStubConfig() {\n    return {};\n  }\n\n  constructor() {\n    super(\"ha-media_player-card\", \"media_player\");\n  }\n}\n\ncustomElements.define(\"hui-media-control-card\", HuiMediaControlCard);\n","import {\n  html,\n  LitElement,\n  TemplateResult,\n  customElement,\n  property,\n  css,\n  CSSResult,\n} from \"lit-element\";\n\nimport \"../../../components/ha-card\";\n\nimport { LovelaceCard, LovelaceCardEditor } from \"../types\";\nimport { HomeAssistant } from \"../../../types\";\nimport { classMap } from \"lit-html/directives/class-map\";\nimport { handleClick } from \"../common/handle-click\";\nimport { longPress } from \"../common/directives/long-press-directive\";\nimport { PictureCardConfig } from \"./types\";\n\n@customElement(\"hui-picture-card\")\nexport class HuiPictureCard extends LitElement implements LovelaceCard {\n  public static async getConfigElement(): Promise<LovelaceCardEditor> {\n    await import(/* webpackChunkName: \"hui-picture-card-editor\" */ \"../editor/config-elements/hui-picture-card-editor\");\n    return document.createElement(\"hui-picture-card-editor\");\n  }\n  public static getStubConfig(): object {\n    return {\n      image:\n        \"https://www.home-assistant.io/images/merchandise/shirt-frontpage.png\",\n      tap_action: { action: \"none\" },\n      hold_action: { action: \"none\" },\n    };\n  }\n\n  public hass?: HomeAssistant;\n\n  @property() protected _config?: PictureCardConfig;\n\n  public getCardSize(): number {\n    return 3;\n  }\n\n  public setConfig(config: PictureCardConfig): void {\n    if (!config || !config.image) {\n      throw new Error(\"Invalid Configuration: 'image' required\");\n    }\n\n    this._config = config;\n  }\n\n  protected render(): TemplateResult | void {\n    if (!this._config || !this.hass) {\n      return html``;\n    }\n\n    return html`\n      <ha-card\n        @ha-click=\"${this._handleTap}\"\n        @ha-hold=\"${this._handleHold}\"\n        .longPress=\"${longPress()}\"\n        class=\"${classMap({\n          clickable: Boolean(\n            this._config.tap_action || this._config.hold_action\n          ),\n        })}\"\n      >\n        <img src=\"${this._config.image}\" />\n      </ha-card>\n    `;\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      ha-card {\n        overflow: hidden;\n      }\n\n      ha-card.clickable {\n        cursor: pointer;\n      }\n\n      img {\n        display: block;\n        width: 100%;\n      }\n    `;\n  }\n\n  private _handleTap() {\n    handleClick(this, this.hass!, this._config!, false);\n  }\n\n  private _handleHold() {\n    handleClick(this, this.hass!, this._config!, true);\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-picture-card\": HuiPictureCard;\n  }\n}\n","import {\n  html,\n  LitElement,\n  TemplateResult,\n  property,\n  customElement,\n  css,\n  CSSResult,\n} from \"lit-element\";\n\nimport { createStyledHuiElement } from \"./picture-elements/create-styled-hui-element\";\nimport { LovelaceCard } from \"../types\";\nimport { HomeAssistant } from \"../../../types\";\nimport { LovelaceElementConfig, LovelaceElement } from \"../elements/types\";\nimport { PictureElementsCardConfig } from \"./types\";\n\n@customElement(\"hui-picture-elements-card\")\nclass HuiPictureElementsCard extends LitElement implements LovelaceCard {\n  @property() private _config?: PictureElementsCardConfig;\n\n  private _hass?: HomeAssistant;\n\n  set hass(hass: HomeAssistant) {\n    this._hass = hass;\n    for (const el of this.shadowRoot!.querySelectorAll(\"#root > *\")) {\n      const element = el as LovelaceElement;\n      element.hass = this._hass;\n    }\n  }\n\n  public getCardSize(): number {\n    return 4;\n  }\n\n  public setConfig(config: PictureElementsCardConfig): void {\n    if (!config) {\n      throw new Error(\"Invalid Configuration\");\n    } else if (\n      !(config.image || config.camera_image || config.state_image) ||\n      (config.state_image && !config.entity)\n    ) {\n      throw new Error(\"Invalid Configuration: image required\");\n    } else if (!Array.isArray(config.elements)) {\n      throw new Error(\"Invalid Configuration: elements required\");\n    }\n\n    this._config = config;\n  }\n\n  protected render(): TemplateResult | void {\n    if (!this._config) {\n      return html``;\n    }\n\n    return html`\n      <ha-card .header=\"${this._config.title}\">\n        <div id=\"root\">\n          <hui-image\n            .hass=\"${this._hass}\"\n            .image=\"${this._config.image}\"\n            .stateImage=\"${this._config.state_image}\"\n            .cameraImage=\"${this._config.camera_image}\"\n            .cameraView=\"${this._config.camera_view}\"\n            .entity=\"${this._config.entity}\"\n            .aspectRatio=\"${this._config.aspect_ratio}\"\n          ></hui-image>\n          ${this._config.elements.map(\n            (elementConfig: LovelaceElementConfig) => {\n              const element = createStyledHuiElement(elementConfig);\n              element.hass = this._hass;\n\n              return element;\n            }\n          )}\n        </div>\n      </ha-card>\n    `;\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      #root {\n        position: relative;\n      }\n\n      .element {\n        position: absolute;\n        transform: translate(-50%, -50%);\n      }\n\n      ha-card {\n        overflow: hidden;\n      }\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-picture-elements-card\": HuiPictureElementsCard;\n  }\n}\n","import {\n  html,\n  LitElement,\n  TemplateResult,\n  customElement,\n  property,\n  css,\n  CSSResult,\n  PropertyValues,\n} from \"lit-element\";\nimport { classMap } from \"lit-html/directives/class-map\";\n\nimport \"../../../components/ha-card\";\nimport \"../components/hui-image\";\nimport \"../components/hui-warning\";\n\nimport computeDomain from \"../../../common/entity/compute_domain\";\nimport computeStateDisplay from \"../../../common/entity/compute_state_display\";\nimport computeStateName from \"../../../common/entity/compute_state_name\";\n\nimport { longPress } from \"../common/directives/long-press-directive\";\nimport { HomeAssistant } from \"../../../types\";\nimport { LovelaceCard } from \"../types\";\nimport { handleClick } from \"../common/handle-click\";\nimport { UNAVAILABLE } from \"../../../data/entity\";\nimport { hasConfigOrEntityChanged } from \"../common/has-changed\";\nimport { PictureEntityCardConfig } from \"./types\";\n\n@customElement(\"hui-picture-entity-card\")\nclass HuiPictureEntityCard extends LitElement implements LovelaceCard {\n  @property() public hass?: HomeAssistant;\n\n  @property() private _config?: PictureEntityCardConfig;\n\n  public getCardSize(): number {\n    return 3;\n  }\n\n  public setConfig(config: PictureEntityCardConfig): void {\n    if (!config || !config.entity) {\n      throw new Error(\"Invalid Configuration: 'entity' required\");\n    }\n\n    if (\n      computeDomain(config.entity) !== \"camera\" &&\n      (!config.image && !config.state_image && !config.camera_image)\n    ) {\n      throw new Error(\"No image source configured.\");\n    }\n\n    this._config = { show_name: true, show_state: true, ...config };\n  }\n\n  protected shouldUpdate(changedProps: PropertyValues): boolean {\n    return hasConfigOrEntityChanged(this, changedProps);\n  }\n\n  protected render(): TemplateResult | void {\n    if (!this._config || !this.hass) {\n      return html``;\n    }\n\n    const stateObj = this.hass.states[this._config.entity];\n\n    if (!stateObj) {\n      return html`\n        <hui-warning\n          >${this.hass.localize(\n            \"ui.panel.lovelace.warning.entity_not_found\",\n            \"entity\",\n            this._config.entity\n          )}</hui-warning\n        >\n      `;\n    }\n\n    const name = this._config.name || computeStateName(stateObj);\n    const state = computeStateDisplay(\n      this.hass!.localize,\n      stateObj,\n      this.hass.language\n    );\n\n    let footer: TemplateResult | string = \"\";\n    if (this._config.show_name && this._config.show_state) {\n      footer = html`\n        <div class=\"footer both\">\n          <div>${name}</div>\n          <div>${state}</div>\n        </div>\n      `;\n    } else if (this._config.show_name) {\n      footer = html`\n        <div class=\"footer\">${name}</div>\n      `;\n    } else if (this._config.show_state) {\n      footer = html`\n        <div class=\"footer state\">${state}</div>\n      `;\n    }\n\n    return html`\n      <ha-card>\n        <hui-image\n          .hass=\"${this.hass}\"\n          .image=\"${this._config.image}\"\n          .stateImage=\"${this._config.state_image}\"\n          .cameraImage=\"${computeDomain(this._config.entity) === \"camera\"\n            ? this._config.entity\n            : this._config.camera_image}\"\n          .cameraView=\"${this._config.camera_view}\"\n          .entity=\"${this._config.entity}\"\n          .aspectRatio=\"${this._config.aspect_ratio}\"\n          @ha-click=\"${this._handleTap}\"\n          @ha-hold=\"${this._handleHold}\"\n          .longPress=\"${longPress()}\"\n          class=\"${classMap({\n            clickable: stateObj.state !== UNAVAILABLE,\n          })}\"\n        ></hui-image>\n        ${footer}\n      </ha-card>\n    `;\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      ha-card {\n        min-height: 75px;\n        overflow: hidden;\n        position: relative;\n      }\n\n      hui-image.clickable {\n        cursor: pointer;\n      }\n\n      .footer {\n        /* start paper-font-common-nowrap style */\n        white-space: nowrap;\n        overflow: hidden;\n        text-overflow: ellipsis;\n        /* end paper-font-common-nowrap style */\n\n        position: absolute;\n        left: 0;\n        right: 0;\n        bottom: 0;\n        background-color: rgba(0, 0, 0, 0.3);\n        padding: 16px;\n        font-size: 16px;\n        line-height: 16px;\n        color: white;\n      }\n\n      .both {\n        display: flex;\n        justify-content: space-between;\n      }\n\n      .state {\n        text-align: right;\n      }\n    `;\n  }\n\n  private _handleTap() {\n    handleClick(this, this.hass!, this._config!, false);\n  }\n\n  private _handleHold() {\n    handleClick(this, this.hass!, this._config!, true);\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-picture-entity-card\": HuiPictureEntityCard;\n  }\n}\n","import {\n  html,\n  LitElement,\n  TemplateResult,\n  customElement,\n  property,\n  css,\n  CSSResult,\n  PropertyValues,\n} from \"lit-element\";\nimport { classMap } from \"lit-html/directives/class-map\";\n\nimport computeStateDisplay from \"../../../common/entity/compute_state_display\";\nimport computeStateName from \"../../../common/entity/compute_state_name\";\nimport computeDomain from \"../../../common/entity/compute_domain\";\nimport stateIcon from \"../../../common/entity/state_icon\";\n\nimport \"../../../components/ha-card\";\nimport \"../../../components/ha-icon\";\nimport \"../components/hui-image\";\nimport \"../components/hui-warning-element\";\n\nimport { DOMAINS_TOGGLE } from \"../../../common/const\";\nimport { LovelaceCard } from \"../types\";\nimport { EntityConfig } from \"../entity-rows/types\";\nimport { HomeAssistant } from \"../../../types\";\nimport { longPress } from \"../common/directives/long-press-directive\";\nimport { processConfigEntities } from \"../common/process-config-entities\";\nimport { handleClick } from \"../common/handle-click\";\nimport { fireEvent } from \"../../../common/dom/fire_event\";\nimport { toggleEntity } from \"../common/entity/toggle-entity\";\nimport { PictureGlanceCardConfig } from \"./types\";\n\nconst STATES_OFF = new Set([\"closed\", \"locked\", \"not_home\", \"off\"]);\n\n@customElement(\"hui-picture-glance-card\")\nclass HuiPictureGlanceCard extends LitElement implements LovelaceCard {\n  @property() public hass?: HomeAssistant;\n\n  @property() private _config?: PictureGlanceCardConfig;\n\n  private _entitiesDialog?: EntityConfig[];\n\n  private _entitiesToggle?: EntityConfig[];\n\n  public getCardSize(): number {\n    return 3;\n  }\n\n  public setConfig(config: PictureGlanceCardConfig): void {\n    if (\n      !config ||\n      !config.entities ||\n      !Array.isArray(config.entities) ||\n      !(config.image || config.camera_image || config.state_image) ||\n      (config.state_image && !config.entity)\n    ) {\n      throw new Error(\"Invalid card configuration\");\n    }\n\n    const entities = processConfigEntities(config.entities);\n    this._entitiesDialog = [];\n    this._entitiesToggle = [];\n\n    entities.forEach((item) => {\n      if (\n        config.force_dialog ||\n        !DOMAINS_TOGGLE.has(computeDomain(item.entity))\n      ) {\n        this._entitiesDialog!.push(item);\n      } else {\n        this._entitiesToggle!.push(item);\n      }\n    });\n\n    this._config = config;\n  }\n\n  protected shouldUpdate(changedProps: PropertyValues): boolean {\n    if (changedProps.has(\"_config\")) {\n      return true;\n    }\n\n    const oldHass = changedProps.get(\"hass\") as HomeAssistant | undefined;\n    if (!oldHass) {\n      return true;\n    }\n\n    if (this._entitiesDialog) {\n      for (const entity of this._entitiesDialog) {\n        if (\n          oldHass.states[entity.entity] !== this.hass!.states[entity.entity]\n        ) {\n          return true;\n        }\n      }\n    }\n\n    if (this._entitiesToggle) {\n      for (const entity of this._entitiesToggle) {\n        if (\n          oldHass.states[entity.entity] !== this.hass!.states[entity.entity]\n        ) {\n          return true;\n        }\n      }\n    }\n\n    return false;\n  }\n\n  protected render(): TemplateResult | void {\n    if (!this._config || !this.hass) {\n      return html``;\n    }\n\n    return html`\n      <ha-card>\n        <hui-image\n          class=\"${classMap({\n            clickable: Boolean(\n              this._config.tap_action ||\n                this._config.hold_action ||\n                this._config.camera_image\n            ),\n          })}\"\n          @ha-click=\"${this._handleTap}\"\n          @ha-hold=\"${this._handleHold}\"\n          .longPress=\"${longPress()}\"\n          .hass=\"${this.hass}\"\n          .image=\"${this._config.image}\"\n          .stateImage=\"${this._config.state_image}\"\n          .cameraImage=\"${this._config.camera_image}\"\n          .cameraView=\"${this._config.camera_view}\"\n          .entity=\"${this._config.entity}\"\n          .aspectRatio=\"${this._config.aspect_ratio}\"\n        ></hui-image>\n        <div class=\"box\">\n          ${this._config.title\n            ? html`\n                <div class=\"title\">${this._config.title}</div>\n              `\n            : \"\"}\n          <div>\n            ${this._entitiesDialog!.map((entityConf) =>\n              this.renderEntity(entityConf, true)\n            )}\n          </div>\n          <div>\n            ${this._entitiesToggle!.map((entityConf) =>\n              this.renderEntity(entityConf, false)\n            )}\n          </div>\n        </div>\n      </ha-card>\n    `;\n  }\n\n  private renderEntity(\n    entityConf: EntityConfig,\n    dialog: boolean\n  ): TemplateResult {\n    const stateObj = this.hass!.states[entityConf.entity];\n\n    if (!stateObj) {\n      return html`\n        <hui-warning-element\n          label=${this.hass!.localize(\n            \"ui.panel.lovelace.warning.entity_not_found\",\n            \"entity\",\n            entityConf.entity\n          )}\n        ></hui-warning-element>\n      `;\n    }\n\n    return html`\n      <ha-icon\n        .entity=\"${stateObj.entity_id}\"\n        @click=\"${dialog ? this._openDialog : this._callService}\"\n        class=\"${classMap({\n          \"state-on\": !STATES_OFF.has(stateObj.state),\n        })}\"\n        .icon=\"${entityConf.icon || stateIcon(stateObj)}\"\n        title=\"${`\n            ${computeStateName(stateObj)} : ${computeStateDisplay(\n          this.hass!.localize,\n          stateObj,\n          this.hass!.language\n        )}\n          `}\"\n      ></ha-icon>\n    `;\n  }\n\n  private _handleTap() {\n    handleClick(this, this.hass!, this._config!, false);\n  }\n\n  private _handleHold() {\n    handleClick(this, this.hass!, this._config!, true);\n  }\n\n  private _openDialog(ev: MouseEvent): void {\n    fireEvent(this, \"hass-more-info\", { entityId: (ev.target as any).entity });\n  }\n\n  private _callService(ev: MouseEvent): void {\n    toggleEntity(this.hass!, (ev.target as any).entity);\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      ha-card {\n        position: relative;\n        min-height: 48px;\n        overflow: hidden;\n      }\n\n      hui-image.clickable {\n        cursor: pointer;\n      }\n\n      .box {\n        /* start paper-font-common-nowrap style */\n        white-space: nowrap;\n        overflow: hidden;\n        text-overflow: ellipsis;\n        /* end paper-font-common-nowrap style */\n\n        position: absolute;\n        left: 0;\n        right: 0;\n        bottom: 0;\n        background-color: rgba(0, 0, 0, 0.3);\n        padding: 4px 8px;\n        font-size: 16px;\n        line-height: 40px;\n        color: white;\n        display: flex;\n        justify-content: space-between;\n      }\n\n      .box .title {\n        font-weight: 500;\n        margin-left: 8px;\n      }\n\n      ha-icon {\n        cursor: pointer;\n        padding: 8px;\n        color: #a9a9a9;\n      }\n\n      ha-icon.state-on {\n        color: white;\n      }\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-picture-glance-card\": HuiPictureGlanceCard;\n  }\n}\n","import {\n  html,\n  LitElement,\n  TemplateResult,\n  css,\n  CSSResult,\n  property,\n  customElement,\n  PropertyValues,\n} from \"lit-element\";\nimport { HassEntity } from \"home-assistant-js-websocket\";\n\nimport \"../../../components/ha-card\";\nimport \"../../../components/ha-icon\";\n\nimport computeStateName from \"../../../common/entity/compute_state_name\";\n\nimport { LovelaceCardEditor, LovelaceCard } from \"../types\";\nimport { HomeAssistant } from \"../../../types\";\nimport { fireEvent } from \"../../../common/dom/fire_event\";\nimport { hasConfigOrEntityChanged } from \"../common/has-changed\";\nimport { PlantStatusCardConfig, PlantAttributeTarget } from \"./types\";\n\nconst SENSORS = {\n  moisture: \"hass:water\",\n  temperature: \"hass:thermometer\",\n  brightness: \"hass:white-balance-sunny\",\n  conductivity: \"hass:emoticon-poop\",\n  battery: \"hass:battery\",\n};\n\n@customElement(\"hui-plant-status-card\")\nclass HuiPlantStatusCard extends LitElement implements LovelaceCard {\n  public static async getConfigElement(): Promise<LovelaceCardEditor> {\n    await import(/* webpackChunkName: \"hui-plant-status-card-editor\" */ \"../editor/config-elements/hui-plant-status-card-editor\");\n    return document.createElement(\"hui-plant-status-card-editor\");\n  }\n\n  public static getStubConfig(): object {\n    return {};\n  }\n\n  @property() public hass?: HomeAssistant;\n\n  @property() private _config?: PlantStatusCardConfig;\n\n  public getCardSize(): number {\n    return 3;\n  }\n\n  public setConfig(config: PlantStatusCardConfig): void {\n    if (!config.entity || config.entity.split(\".\")[0] !== \"plant\") {\n      throw new Error(\"Specify an entity from within the plant domain.\");\n    }\n\n    this._config = config;\n  }\n\n  protected shouldUpdate(changedProps: PropertyValues): boolean {\n    return hasConfigOrEntityChanged(this, changedProps);\n  }\n\n  protected render(): TemplateResult | void {\n    if (!this.hass || !this._config) {\n      return html``;\n    }\n\n    const stateObj = this.hass.states[this._config!.entity];\n\n    if (!stateObj) {\n      return html`\n        <hui-warning\n          >${this.hass.localize(\n            \"ui.panel.lovelace.warning.entity_not_found\",\n            \"entity\",\n            this._config.entity\n          )}</hui-warning\n        >\n      `;\n    }\n\n    return html`\n      <ha-card\n        class=\"${stateObj.attributes.entity_picture ? \"has-plant-image\" : \"\"}\"\n      >\n        <div\n          class=\"banner\"\n          style=\"background-image:url(${stateObj.attributes.entity_picture})\"\n        >\n          <div class=\"header\">\n            ${this._config.name || computeStateName(stateObj)}\n          </div>\n        </div>\n        <div class=\"content\">\n          ${this.computeAttributes(stateObj).map(\n            (item) => html`\n              <div\n                class=\"attributes\"\n                @click=\"${this._handleMoreInfo}\"\n                .value=\"${item}\"\n              >\n                <div>\n                  <ha-icon\n                    icon=\"${this.computeIcon(\n                      item,\n                      stateObj.attributes.battery\n                    )}\"\n                  ></ha-icon>\n                </div>\n                <div\n                  class=\"${stateObj.attributes.problem.indexOf(item) === -1\n                    ? \"\"\n                    : \"problem\"}\"\n                >\n                  ${stateObj.attributes[item]}\n                </div>\n                <div class=\"uom\">\n                  ${stateObj.attributes.unit_of_measurement_dict[item] || \"\"}\n                </div>\n              </div>\n            `\n          )}\n        </div>\n      </ha-card>\n    `;\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      .banner {\n        display: flex;\n        align-items: flex-end;\n        background-repeat: no-repeat;\n        background-size: cover;\n        background-position: center;\n        padding-top: 12px;\n      }\n\n      .has-plant-image .banner {\n        padding-top: 30%;\n      }\n\n      .header {\n        /* start paper-font-headline style */\n        font-family: \"Roboto\", \"Noto\", sans-serif;\n        -webkit-font-smoothing: antialiased; /* OS X subpixel AA bleed bug */\n        text-rendering: optimizeLegibility;\n        font-size: 24px;\n        font-weight: 400;\n        letter-spacing: -0.012em;\n        /* end paper-font-headline style */\n\n        line-height: 40px;\n        padding: 8px 16px;\n      }\n\n      .has-plant-image .header {\n        font-size: 16px;\n        font-weight: 500;\n        line-height: 16px;\n        padding: 16px;\n        color: white;\n        width: 100%;\n        background: rgba(0, 0, 0, var(--dark-secondary-opacity));\n      }\n\n      .content {\n        display: flex;\n        justify-content: space-between;\n        padding: 16px 32px 24px 32px;\n      }\n\n      .has-plant-image .content {\n        padding-bottom: 16px;\n      }\n\n      ha-icon {\n        color: var(--paper-item-icon-color);\n        margin-bottom: 8px;\n      }\n\n      .attributes {\n        cursor: pointer;\n      }\n\n      .attributes div {\n        text-align: center;\n      }\n\n      .problem {\n        color: var(--google-red-500);\n        font-weight: bold;\n      }\n\n      .uom {\n        color: var(--secondary-text-color);\n      }\n    `;\n  }\n\n  private computeAttributes(stateObj: HassEntity): string[] {\n    return Object.keys(SENSORS).filter((key) => key in stateObj.attributes);\n  }\n\n  private computeIcon(attr: string, batLvl: number): string {\n    const icon = SENSORS[attr];\n    if (attr === \"battery\") {\n      if (batLvl <= 5) {\n        return `${icon}-alert`;\n      }\n      if (batLvl < 95) {\n        return `${icon}-${Math.round(batLvl / 10 - 0.01) * 10}`;\n      }\n    }\n    return icon;\n  }\n\n  private _handleMoreInfo(ev: Event): void {\n    const target = ev.currentTarget! as PlantAttributeTarget;\n    const stateObj = this.hass!.states[this._config!.entity];\n\n    if (target.value) {\n      fireEvent(this, \"hass-more-info\", {\n        entityId: stateObj.attributes.sensors[target.value],\n      });\n    }\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-plant-status-card\": HuiPlantStatusCard;\n  }\n}\n","import {\n  html,\n  svg,\n  LitElement,\n  PropertyValues,\n  TemplateResult,\n  customElement,\n  property,\n  css,\n  CSSResult,\n} from \"lit-element\";\nimport \"@polymer/paper-spinner/paper-spinner\";\n\nimport applyThemesOnElement from \"../../../common/dom/apply_themes_on_element\";\nimport computeStateName from \"../../../common/entity/compute_state_name\";\nimport stateIcon from \"../../../common/entity/state_icon\";\n\nimport \"../../../components/ha-card\";\nimport \"../../../components/ha-icon\";\nimport \"../components/hui-warning\";\n\nimport { LovelaceCard, LovelaceCardEditor } from \"../types\";\nimport { HomeAssistant } from \"../../../types\";\nimport { fireEvent } from \"../../../common/dom/fire_event\";\nimport { fetchRecent } from \"../../../data/history\";\nimport { SensorCardConfig } from \"./types\";\nimport { hasConfigOrEntityChanged } from \"../common/has-changed\";\n\nconst midPoint = (\n  _Ax: number,\n  _Ay: number,\n  _Bx: number,\n  _By: number\n): number[] => {\n  const _Zx = (_Ax - _Bx) / 2 + _Bx;\n  const _Zy = (_Ay - _By) / 2 + _By;\n  return [_Zx, _Zy];\n};\n\nconst getPath = (coords: number[][]): string => {\n  let next;\n  let Z;\n  const X = 0;\n  const Y = 1;\n  let path = \"\";\n  let last = coords.filter(Boolean)[0];\n\n  path += `M ${last[X]},${last[Y]}`;\n\n  for (const coord of coords) {\n    next = coord;\n    Z = midPoint(last[X], last[Y], next[X], next[Y]);\n    path += ` ${Z[X]},${Z[Y]}`;\n    path += ` Q${next[X]},${next[Y]}`;\n    last = next;\n  }\n\n  path += ` ${next[X]},${next[Y]}`;\n  return path;\n};\n\nconst calcPoints = (\n  history: any,\n  hours: number,\n  width: number,\n  detail: number,\n  min: number,\n  max: number\n): number[][] => {\n  const coords = [] as number[][];\n  const margin = 5;\n  const height = 80;\n  width -= 10;\n  let yRatio = (max - min) / height;\n  yRatio = yRatio !== 0 ? yRatio : height;\n  let xRatio = width / (hours - (detail === 1 ? 1 : 0));\n  xRatio = isFinite(xRatio) ? xRatio : width;\n  const getCoords = (item, i, offset = 0, depth = 1) => {\n    if (depth > 1) {\n      return item.forEach((subItem, index) =>\n        getCoords(subItem, i, index, depth - 1)\n      );\n    }\n    const average =\n      item.reduce((sum, entry) => sum + parseFloat(entry.state), 0) /\n      item.length;\n\n    const x = xRatio * (i + offset / 6) + margin;\n    const y = height - (average - min) / yRatio + margin * 2;\n    return coords.push([x, y]);\n  };\n\n  history.forEach((item, i) => getCoords(item, i, 0, detail));\n  if (coords.length === 1) {\n    coords[1] = [width + margin, coords[0][1]];\n  }\n\n  coords.push([width + margin, coords[coords.length - 1][1]]);\n  return coords;\n};\n\nconst coordinates = (\n  history: any,\n  hours: number,\n  width: number,\n  detail: number\n): number[][] => {\n  history.forEach((item) => (item.state = Number(item.state)));\n  history = history.filter((item) => !Number.isNaN(item.state));\n\n  const min = Math.min.apply(Math, history.map((item) => item.state));\n  const max = Math.max.apply(Math, history.map((item) => item.state));\n  const now = new Date().getTime();\n\n  const reduce = (res, item, point) => {\n    const age = now - new Date(item.last_changed).getTime();\n\n    let key = Math.abs(age / (1000 * 3600) - hours);\n    if (point) {\n      key = (key - Math.floor(key)) * 60;\n      key = Number((Math.round(key / 10) * 10).toString()[0]);\n    } else {\n      key = Math.floor(key);\n    }\n    if (!res[key]) {\n      res[key] = [];\n    }\n    res[key].push(item);\n    return res;\n  };\n\n  history = history.reduce((res, item) => reduce(res, item, false), []);\n  if (detail > 1) {\n    history = history.map((entry) =>\n      entry.reduce((res, item) => reduce(res, item, true), [])\n    );\n  }\n  return calcPoints(history, hours, width, detail, min, max);\n};\n\n@customElement(\"hui-sensor-card\")\nclass HuiSensorCard extends LitElement implements LovelaceCard {\n  public static async getConfigElement(): Promise<LovelaceCardEditor> {\n    await import(/* webpackChunkName: \"hui-sensor-card-editor\" */ \"../editor/config-elements/hui-sensor-card-editor\");\n    return document.createElement(\"hui-sensor-card-editor\");\n  }\n\n  public static getStubConfig(): object {\n    return {};\n  }\n\n  @property() public hass?: HomeAssistant;\n\n  @property() private _config?: SensorCardConfig;\n\n  @property() private _history?: any;\n\n  private _date?: Date;\n\n  public setConfig(config: SensorCardConfig): void {\n    if (!config.entity || config.entity.split(\".\")[0] !== \"sensor\") {\n      throw new Error(\"Specify an entity from within the sensor domain.\");\n    }\n\n    const cardConfig = {\n      detail: 1,\n      theme: \"default\",\n      hours_to_show: 24,\n      ...config,\n    };\n\n    cardConfig.hours_to_show = Number(cardConfig.hours_to_show);\n    cardConfig.detail =\n      cardConfig.detail === 1 || cardConfig.detail === 2\n        ? cardConfig.detail\n        : 1;\n\n    this._config = cardConfig;\n  }\n\n  public getCardSize(): number {\n    return 3;\n  }\n\n  protected render(): TemplateResult | void {\n    if (!this._config || !this.hass) {\n      return html``;\n    }\n\n    const stateObj = this.hass.states[this._config.entity];\n\n    if (!stateObj) {\n      return html`\n        <hui-warning\n          >${this.hass.localize(\n            \"ui.panel.lovelace.warning.entity_not_found\",\n            \"entity\",\n            this._config.entity\n          )}</hui-warning\n        >\n      `;\n    }\n\n    let graph;\n\n    if (stateObj && this._config.graph === \"line\") {\n      if (!stateObj.attributes.unit_of_measurement) {\n        return html`\n          <hui-warning\n            >Entity: ${this._config.entity} - Has no Unit of Measurement and\n            therefore can not display a line graph.</hui-warning\n          >\n        `;\n      } else if (!this._history) {\n        graph = svg`\n          <svg width=\"100%\" height=\"100%\" viewBox=\"0 0 500 100\"></svg>\n        `;\n      } else {\n        graph = svg`\n          <svg width=\"100%\" height=\"100%\" viewBox=\"0 0 500 100\">\n            <path\n              d=\"${this._history}\"\n              fill=\"none\"\n              stroke=\"var(--accent-color)\"\n              stroke-width=\"5\"\n              stroke-linecap=\"round\"\n              stroke-linejoin=\"round\"\n            />\n          </svg>\n        `;\n      }\n    } else {\n      graph = \"\";\n    }\n    return html`\n      <ha-card @click=\"${this._handleClick}\">\n        <div class=\"flex\">\n          <div class=\"icon\">\n            <ha-icon\n              .icon=\"${this._config.icon || stateIcon(stateObj)}\"\n            ></ha-icon>\n          </div>\n          <div class=\"header\">\n            <span class=\"name\"\n              >${this._config.name || computeStateName(stateObj)}</span\n            >\n          </div>\n        </div>\n        <div class=\"flex info\">\n          <span id=\"value\">${stateObj.state}</span>\n          <span id=\"measurement\"\n            >${this._config.unit ||\n              stateObj.attributes.unit_of_measurement}</span\n          >\n        </div>\n        <div class=\"graph\"><div>${graph}</div></div>\n      </ha-card>\n    `;\n  }\n\n  protected firstUpdated(): void {\n    this._date = new Date();\n  }\n\n  protected shouldUpdate(changedProps: PropertyValues): boolean {\n    if (changedProps.has(\"_history\")) {\n      return true;\n    }\n\n    return hasConfigOrEntityChanged(this, changedProps);\n  }\n\n  protected updated(changedProps: PropertyValues) {\n    super.updated(changedProps);\n    if (!this._config || this._config.graph !== \"line\" || !this.hass) {\n      return;\n    }\n\n    const oldHass = changedProps.get(\"hass\") as HomeAssistant | undefined;\n    if (!oldHass || oldHass.themes !== this.hass.themes) {\n      applyThemesOnElement(this, this.hass.themes, this._config!.theme);\n    }\n\n    const minute = 60000;\n    if (changedProps.has(\"_config\")) {\n      this._getHistory();\n    } else if (Date.now() - this._date!.getTime() >= minute) {\n      this._getHistory();\n    }\n  }\n\n  private _handleClick(): void {\n    fireEvent(this, \"hass-more-info\", { entityId: this._config!.entity });\n  }\n\n  private async _getHistory(): Promise<void> {\n    const endTime = new Date();\n    const startTime = new Date();\n    startTime.setHours(endTime.getHours() - this._config!.hours_to_show!);\n\n    const stateHistory = await fetchRecent(\n      this.hass,\n      this._config!.entity,\n      startTime,\n      endTime\n    );\n\n    if (stateHistory.length < 1 || stateHistory[0].length < 1) {\n      return;\n    }\n\n    const coords = coordinates(\n      stateHistory[0],\n      this._config!.hours_to_show!,\n      500,\n      this._config!.detail!\n    );\n\n    this._history = getPath(coords);\n    this._date = new Date();\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      :host {\n        display: flex;\n        flex-direction: column;\n      }\n\n      ha-card {\n        display: flex;\n        flex-direction: column;\n        flex: 1;\n        padding: 16px;\n        position: relative;\n        cursor: pointer;\n      }\n\n      .flex {\n        display: flex;\n      }\n\n      .header {\n        align-items: center;\n        display: flex;\n        min-width: 0;\n        opacity: 0.8;\n        position: relative;\n      }\n\n      .name {\n        display: block;\n        display: -webkit-box;\n        font-size: 1.2rem;\n        font-weight: 500;\n        max-height: 1.4rem;\n        margin-top: 2px;\n        opacity: 0.8;\n        overflow: hidden;\n        text-overflow: ellipsis;\n        -webkit-line-clamp: 1;\n        -webkit-box-orient: vertical;\n        word-wrap: break-word;\n        word-break: break-all;\n      }\n\n      .icon {\n        color: var(--paper-item-icon-color, #44739e);\n        display: inline-block;\n        flex: 0 0 40px;\n        line-height: 40px;\n        position: relative;\n        text-align: center;\n        width: 40px;\n      }\n\n      .info {\n        flex-wrap: wrap;\n        margin: 16px 0 16px 8px;\n      }\n\n      #value {\n        display: inline-block;\n        font-size: 2rem;\n        font-weight: 400;\n        line-height: 1em;\n        margin-right: 4px;\n      }\n\n      #measurement {\n        align-self: flex-end;\n        display: inline-block;\n        font-size: 1.3rem;\n        line-height: 1.2em;\n        margin-top: 0.1em;\n        opacity: 0.6;\n        vertical-align: bottom;\n      }\n\n      .graph {\n        align-self: flex-end;\n        margin: auto;\n        margin-bottom: 0px;\n        position: relative;\n        width: 100%;\n      }\n\n      .graph > div {\n        align-self: flex-end;\n        margin: auto 8px;\n      }\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-sensor-card\": HuiSensorCard;\n  }\n}\n","import {\n  html,\n  LitElement,\n  TemplateResult,\n  css,\n  CSSResult,\n  property,\n  customElement,\n} from \"lit-element\";\nimport { repeat } from \"lit-html/directives/repeat\";\nimport { PaperInputElement } from \"@polymer/paper-input/paper-input\";\nimport \"@polymer/paper-checkbox/paper-checkbox\";\n\nimport \"../../../components/ha-card\";\nimport \"../../../components/ha-icon\";\n\nimport { HomeAssistant } from \"../../../types\";\nimport { LovelaceCard, LovelaceCardEditor } from \"../types\";\nimport {\n  fetchItems,\n  updateItem,\n  ShoppingListItem,\n  clearItems,\n  addItem,\n} from \"../../../data/shopping-list\";\nimport { ShoppingListCardConfig } from \"./types\";\n\n@customElement(\"hui-shopping-list-card\")\nclass HuiShoppingListCard extends LitElement implements LovelaceCard {\n  public static async getConfigElement(): Promise<LovelaceCardEditor> {\n    await import(/* webpackChunkName: \"hui-shopping-list-editor\" */ \"../editor/config-elements/hui-shopping-list-editor\");\n    return document.createElement(\"hui-shopping-list-card-editor\");\n  }\n\n  public static getStubConfig(): object {\n    return {};\n  }\n\n  @property() public hass?: HomeAssistant;\n\n  @property() private _config?: ShoppingListCardConfig;\n\n  @property() private _uncheckedItems?: ShoppingListItem[];\n\n  @property() private _checkedItems?: ShoppingListItem[];\n\n  private _unsubEvents?: Promise<() => Promise<void>>;\n\n  public getCardSize(): number {\n    return (this._config ? (this._config.title ? 1 : 0) : 0) + 3;\n  }\n\n  public setConfig(config: ShoppingListCardConfig): void {\n    this._config = config;\n    this._uncheckedItems = [];\n    this._checkedItems = [];\n    this._fetchData();\n  }\n\n  public connectedCallback(): void {\n    super.connectedCallback();\n\n    if (this.hass) {\n      this._unsubEvents = this.hass.connection.subscribeEvents(\n        () => this._fetchData(),\n        \"shopping_list_updated\"\n      );\n      this._fetchData();\n    }\n  }\n\n  public disconnectedCallback(): void {\n    super.disconnectedCallback();\n\n    if (this._unsubEvents) {\n      this._unsubEvents.then((unsub) => unsub());\n    }\n  }\n\n  protected render(): TemplateResult | void {\n    if (!this._config || !this.hass) {\n      return html``;\n    }\n\n    return html`\n      <ha-card .header=\"${this._config.title}\">\n        <div class=\"addRow\">\n          <ha-icon\n            class=\"addButton\"\n            @click=\"${this._addItem}\"\n            icon=\"hass:plus\"\n            .title=\"${this.hass!.localize(\n              \"ui.panel.lovelace.cards.shopping-list.add_item\"\n            )}\"\n          >\n          </ha-icon>\n          <paper-item-body>\n            <paper-input\n              no-label-float\n              class=\"addBox\"\n              placeholder=\"${this.hass!.localize(\n                \"ui.panel.lovelace.cards.shopping-list.add_item\"\n              )}\"\n              @keydown=\"${this._addKeyPress}\"\n            ></paper-input>\n          </paper-item-body>\n        </div>\n        ${repeat(\n          this._uncheckedItems!,\n          (item) => item.id,\n          (item, index) =>\n            html`\n              <div class=\"editRow\">\n                <paper-checkbox\n                  slot=\"item-icon\"\n                  id=\"${index}\"\n                  ?checked=\"${item.complete}\"\n                  .itemId=\"${item.id}\"\n                  @click=\"${this._completeItem}\"\n                  tabindex=\"0\"\n                ></paper-checkbox>\n                <paper-item-body>\n                  <paper-input\n                    no-label-float\n                    .value=\"${item.name}\"\n                    .itemId=\"${item.id}\"\n                    @change=\"${this._saveEdit}\"\n                  ></paper-input>\n                </paper-item-body>\n              </div>\n            `\n        )}\n        ${this._checkedItems!.length > 0\n          ? html`\n              <div class=\"divider\"></div>\n              <div class=\"checked\">\n                <span class=\"label\">\n                  ${this.hass!.localize(\n                    \"ui.panel.lovelace.cards.shopping-list.checked_items\"\n                  )}\n                </span>\n                <ha-icon\n                  class=\"clearall\"\n                  @click=\"${this._clearItems}\"\n                  icon=\"hass:notification-clear-all\"\n                  .title=\"${this.hass!.localize(\n                    \"ui.panel.lovelace.cards.shopping-list.clear_items\"\n                  )}\"\n                >\n                </ha-icon>\n              </div>\n              ${repeat(\n                this._checkedItems!,\n                (item) => item.id,\n                (item, index) =>\n                  html`\n                    <div class=\"editRow\">\n                      <paper-checkbox\n                        slot=\"item-icon\"\n                        id=\"${index}\"\n                        ?checked=\"${item.complete}\"\n                        .itemId=\"${item.id}\"\n                        @click=\"${this._completeItem}\"\n                        tabindex=\"0\"\n                      ></paper-checkbox>\n                      <paper-item-body>\n                        <paper-input\n                          no-label-float\n                          .value=\"${item.name}\"\n                          .itemId=\"${item.id}\"\n                          @change=\"${this._saveEdit}\"\n                        ></paper-input>\n                      </paper-item-body>\n                    </div>\n                  `\n              )}\n            `\n          : \"\"}\n      </ha-card>\n    `;\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      .editRow,\n      .addRow {\n        display: flex;\n        flex-direction: row;\n      }\n\n      .addButton {\n        padding: 9px 15px 11px 15px;\n        cursor: pointer;\n      }\n\n      paper-item-body {\n        width: 75%;\n      }\n\n      paper-checkbox {\n        padding: 11px 11px 11px 18px;\n      }\n\n      paper-input {\n        --paper-input-container-underline: {\n          display: none;\n        }\n        --paper-input-container-underline-focus: {\n          display: none;\n        }\n        --paper-input-container-underline-disabled: {\n          display: none;\n        }\n        position: relative;\n        top: 1px;\n      }\n\n      .checked {\n        margin-left: 17px;\n        margin-bottom: 11px;\n        margin-top: 11px;\n      }\n\n      .label {\n        color: var(--primary-color);\n      }\n\n      .divider {\n        height: 1px;\n        background-color: var(--divider-color);\n        margin: 10px;\n      }\n\n      .clearall {\n        cursor: pointer;\n        margin-bottom: 3px;\n        float: right;\n        padding-right: 10px;\n      }\n\n      .addRow > ha-icon {\n        color: var(--secondary-text-color);\n      }\n    `;\n  }\n\n  private async _fetchData(): Promise<void> {\n    if (this.hass) {\n      const checkedItems: ShoppingListItem[] = [];\n      const uncheckedItems: ShoppingListItem[] = [];\n      const items = await fetchItems(this.hass);\n      for (const key in items) {\n        if (items[key].complete) {\n          checkedItems.push(items[key]);\n        } else {\n          uncheckedItems.push(items[key]);\n        }\n      }\n      this._checkedItems = checkedItems;\n      this._uncheckedItems = uncheckedItems;\n    }\n  }\n\n  private _completeItem(ev): void {\n    updateItem(this.hass!, ev.target.itemId, {\n      complete: ev.target.checked,\n    }).catch(() => this._fetchData());\n  }\n\n  private _saveEdit(ev): void {\n    updateItem(this.hass!, ev.target.itemId, {\n      name: ev.target.value,\n    }).catch(() => this._fetchData());\n\n    ev.target.blur();\n  }\n\n  private _clearItems(): void {\n    if (this.hass) {\n      clearItems(this.hass).catch(() => this._fetchData());\n    }\n  }\n\n  private get _newItem(): PaperInputElement {\n    return this.shadowRoot!.querySelector(\".addBox\") as PaperInputElement;\n  }\n\n  private _addItem(ev): void {\n    const newItem = this._newItem;\n\n    if (newItem.value!.length > 0) {\n      addItem(this.hass!, newItem.value!).catch(() => this._fetchData());\n    }\n\n    newItem.value = \"\";\n    if (ev) {\n      newItem.focus();\n    }\n  }\n\n  private _addKeyPress(ev): void {\n    if (ev.keyCode === 13) {\n      this._addItem(null);\n    }\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-shopping-list-card\": HuiShoppingListCard;\n  }\n}\n","import { html, LitElement, TemplateResult } from \"lit-element\";\n\nimport { createCardElement } from \"../common/create-card-element\";\nimport { LovelaceCard } from \"../types\";\nimport { LovelaceCardConfig } from \"../../../data/lovelace\";\nimport { HomeAssistant } from \"../../../types\";\nimport { StackCardConfig } from \"./types\";\n\nexport abstract class HuiStackCard extends LitElement implements LovelaceCard {\n  static get properties() {\n    return {\n      _config: {},\n    };\n  }\n\n  set hass(hass: HomeAssistant) {\n    this._hass = hass;\n\n    if (!this._cards) {\n      return;\n    }\n\n    for (const element of this._cards) {\n      element.hass = this._hass;\n    }\n  }\n  protected _cards?: LovelaceCard[];\n  private _config?: StackCardConfig;\n  private _hass?: HomeAssistant;\n\n  public abstract getCardSize(): number;\n\n  public setConfig(config: StackCardConfig): void {\n    if (!config || !config.cards || !Array.isArray(config.cards)) {\n      throw new Error(\"Card config incorrect\");\n    }\n    this._config = config;\n    this._cards = config.cards.map((card) => {\n      const element = this._createCardElement(card) as LovelaceCard;\n      return element;\n    });\n  }\n\n  protected render(): TemplateResult | void {\n    if (!this._config) {\n      return html``;\n    }\n\n    return html`\n      ${this.renderStyle()}\n      <div id=\"root\">${this._cards}</div>\n    `;\n  }\n\n  protected abstract renderStyle(): TemplateResult;\n\n  private _createCardElement(cardConfig: LovelaceCardConfig) {\n    const element = createCardElement(cardConfig) as LovelaceCard;\n    if (this._hass) {\n      element.hass = this._hass;\n    }\n    element.addEventListener(\n      \"ll-rebuild\",\n      (ev) => {\n        ev.stopPropagation();\n        this._rebuildCard(element, cardConfig);\n      },\n      { once: true }\n    );\n    return element;\n  }\n\n  private _rebuildCard(\n    cardElToReplace: LovelaceCard,\n    config: LovelaceCardConfig\n  ): void {\n    const newCardEl = this._createCardElement(config);\n    cardElToReplace.parentElement!.replaceChild(newCardEl, cardElToReplace);\n    this._cards = this._cards!.map((curCardEl) =>\n      curCardEl === cardElToReplace ? newCardEl : curCardEl\n    );\n  }\n}\n","import {\n  html,\n  LitElement,\n  PropertyValues,\n  TemplateResult,\n  customElement,\n  property,\n} from \"lit-element\";\nimport { classMap } from \"lit-html/directives/class-map\";\nimport \"@polymer/paper-icon-button/paper-icon-button\";\n\nimport \"../../../components/ha-card\";\nimport \"../../../components/ha-icon\";\nimport \"../components/hui-warning\";\n\nimport applyThemesOnElement from \"../../../common/dom/apply_themes_on_element\";\nimport computeStateName from \"../../../common/entity/compute_state_name\";\n\nimport { hasConfigOrEntityChanged } from \"../common/has-changed\";\nimport { HomeAssistant, ClimateEntity } from \"../../../types\";\nimport { LovelaceCard, LovelaceCardEditor } from \"../types\";\nimport { loadRoundslider } from \"../../../resources/jquery.roundslider.ondemand\";\nimport { UNIT_F } from \"../../../common/const\";\nimport { fireEvent } from \"../../../common/dom/fire_event\";\nimport { ThermostatCardConfig } from \"./types\";\n\nconst thermostatConfig = {\n  radius: 150,\n  circleShape: \"pie\",\n  startAngle: 315,\n  width: 5,\n  lineCap: \"round\",\n  handleSize: \"+10\",\n  showTooltip: false,\n  animation: false,\n};\n\nconst modeIcons = {\n  auto: \"hass:autorenew\",\n  manual: \"hass:cursor-pointer\",\n  heat: \"hass:fire\",\n  cool: \"hass:snowflake\",\n  off: \"hass:power\",\n  fan_only: \"hass:fan\",\n  eco: \"hass:leaf\",\n  dry: \"hass:water-percent\",\n  idle: \"hass:power-sleep\",\n};\n\n@customElement(\"hui-thermostat-card\")\nexport class HuiThermostatCard extends LitElement implements LovelaceCard {\n  public static async getConfigElement(): Promise<LovelaceCardEditor> {\n    await import(/* webpackChunkName: \"hui-thermostat-card-editor\" */ \"../editor/config-elements/hui-thermostat-card-editor\");\n    return document.createElement(\"hui-thermostat-card-editor\");\n  }\n\n  public static getStubConfig(): object {\n    return { entity: \"\" };\n  }\n\n  @property() public hass?: HomeAssistant;\n\n  @property() private _config?: ThermostatCardConfig;\n\n  @property() private _roundSliderStyle?: TemplateResult;\n\n  @property() private _jQuery?: any;\n\n  private _broadCard?: boolean;\n\n  private _loaded?: boolean;\n\n  private _updated?: boolean;\n\n  public getCardSize(): number {\n    return 4;\n  }\n\n  public setConfig(config: ThermostatCardConfig): void {\n    if (!config.entity || config.entity.split(\".\")[0] !== \"climate\") {\n      throw new Error(\"Specify an entity from within the climate domain.\");\n    }\n\n    this._config = { theme: \"default\", ...config };\n  }\n\n  public connectedCallback(): void {\n    super.connectedCallback();\n    if (this._updated && !this._loaded) {\n      this._initialLoad();\n    }\n  }\n\n  protected render(): TemplateResult | void {\n    if (!this.hass || !this._config) {\n      return html``;\n    }\n    const stateObj = this.hass.states[this._config.entity] as ClimateEntity;\n\n    if (!stateObj) {\n      return html`\n        <hui-warning\n          >${this.hass.localize(\n            \"ui.panel.lovelace.warning.entity_not_found\",\n            \"entity\",\n            this._config.entity\n          )}</hui-warning\n        >\n      `;\n    }\n\n    const mode = modeIcons[stateObj.attributes.operation_mode || \"\"]\n      ? stateObj.attributes.operation_mode!\n      : \"unknown-mode\";\n    return html`\n      ${this.renderStyle()}\n      <ha-card\n        class=\"${classMap({\n          [mode]: true,\n          large: this._broadCard!,\n          small: !this._broadCard,\n        })}\">\n        <div id=\"root\">\n          <paper-icon-button\n            icon=\"hass:dots-vertical\"\n            class=\"more-info\"\n            @click=\"${this._handleMoreInfo}\"\n          ></paper-icon-button>\n          <div id=\"thermostat\"></div>\n          <div id=\"tooltip\">\n            <div class=\"title\">${this._config.name ||\n              computeStateName(stateObj)}</div>\n            <div class=\"current-temperature\">\n              <span class=\"current-temperature-text\">\n                ${stateObj.attributes.current_temperature}\n                ${\n                  stateObj.attributes.current_temperature\n                    ? html`\n                        <span class=\"uom\"\n                          >${this.hass.config.unit_system.temperature}</span\n                        >\n                      `\n                    : \"\"\n                }\n              </span>\n            </div>\n            <div class=\"climate-info\">\n            <div id=\"set-temperature\"></div>\n            <div class=\"current-mode\">${this.hass!.localize(\n              `state.climate.${stateObj.state}`\n            )}</div>\n            <div class=\"modes\">\n              ${(stateObj.attributes.operation_list || []).map((modeItem) =>\n                this._renderIcon(modeItem, mode)\n              )}\n            </div>\n          </div>\n        </div>\n      </ha-card>\n    `;\n  }\n\n  protected shouldUpdate(changedProps: PropertyValues): boolean {\n    return hasConfigOrEntityChanged(this, changedProps);\n  }\n\n  protected firstUpdated(): void {\n    this._updated = true;\n    if (this.isConnected && !this._loaded) {\n      this._initialLoad();\n    }\n  }\n\n  protected updated(changedProps: PropertyValues): void {\n    super.updated(changedProps);\n    if (!this._config || !this.hass || !changedProps.has(\"hass\")) {\n      return;\n    }\n\n    const oldHass = changedProps.get(\"hass\") as HomeAssistant | undefined;\n\n    if (!oldHass || oldHass.themes !== this.hass.themes) {\n      applyThemesOnElement(this, this.hass.themes, this._config.theme);\n    }\n\n    const stateObj = this.hass.states[this._config.entity] as ClimateEntity;\n\n    if (!stateObj) {\n      return;\n    }\n\n    if (\n      this._jQuery &&\n      // If jQuery changed, we just rendered in firstUpdated\n      !changedProps.has(\"_jQuery\") &&\n      (!oldHass || oldHass.states[this._config.entity] !== stateObj)\n    ) {\n      const [sliderValue, uiValue] = this._genSliderValue(stateObj);\n\n      this._jQuery(\"#thermostat\", this.shadowRoot).roundSlider({\n        value: sliderValue,\n      });\n      this._updateSetTemp(uiValue);\n    }\n  }\n\n  private get _stepSize(): number {\n    const stateObj = this.hass!.states[this._config!.entity];\n\n    if (stateObj.attributes.target_temp_step) {\n      return stateObj.attributes.target_temp_step;\n    }\n    return this.hass!.config.unit_system.temperature === UNIT_F ? 1 : 0.5;\n  }\n\n  private async _initialLoad(): Promise<void> {\n    const stateObj = this.hass!.states[this._config!.entity] as ClimateEntity;\n\n    if (!stateObj) {\n      // Card will require refresh to work again\n      return;\n    }\n\n    this._loaded = true;\n\n    await this.updateComplete;\n\n    let radius = this.clientWidth / 3.2;\n    this._broadCard = this.clientWidth > 390;\n\n    if (radius === 0) {\n      radius = 100;\n    }\n\n    (this.shadowRoot!.querySelector(\n      \"#thermostat\"\n    ) as HTMLElement)!.style.height = radius * 2 + \"px\";\n\n    const loaded = await loadRoundslider();\n\n    this._roundSliderStyle = loaded.roundSliderStyle;\n    this._jQuery = loaded.jQuery;\n\n    const _sliderType =\n      stateObj.attributes.target_temp_low &&\n      stateObj.attributes.target_temp_high\n        ? \"range\"\n        : \"min-range\";\n\n    const [sliderValue, uiValue] = this._genSliderValue(stateObj);\n\n    this._jQuery(\"#thermostat\", this.shadowRoot).roundSlider({\n      ...thermostatConfig,\n      radius,\n      min: stateObj.attributes.min_temp,\n      max: stateObj.attributes.max_temp,\n      sliderType: _sliderType,\n      change: (value) => this._setTemperature(value),\n      drag: (value) => this._dragEvent(value),\n      value: sliderValue,\n      step: this._stepSize,\n    });\n    this._updateSetTemp(uiValue);\n  }\n\n  private _genSliderValue(stateObj: ClimateEntity): [string | number, string] {\n    let sliderValue: string | number;\n    let uiValue: string;\n\n    if (\n      stateObj.attributes.target_temp_low &&\n      stateObj.attributes.target_temp_high\n    ) {\n      sliderValue = `${stateObj.attributes.target_temp_low}, ${\n        stateObj.attributes.target_temp_high\n      }`;\n      uiValue = this.formatTemp(\n        [\n          String(stateObj.attributes.target_temp_low),\n          String(stateObj.attributes.target_temp_high),\n        ],\n        false\n      );\n    } else {\n      sliderValue = stateObj.attributes.temperature;\n      uiValue =\n        stateObj.attributes.temperature !== null\n          ? String(stateObj.attributes.temperature)\n          : \"\";\n    }\n\n    return [sliderValue, uiValue];\n  }\n\n  private _updateSetTemp(value: string): void {\n    this.shadowRoot!.querySelector(\"#set-temperature\")!.innerHTML = value;\n  }\n\n  private _dragEvent(e): void {\n    this._updateSetTemp(this.formatTemp(String(e.value).split(\",\"), true));\n  }\n\n  private _setTemperature(e): void {\n    const stateObj = this.hass!.states[this._config!.entity] as ClimateEntity;\n    if (\n      stateObj.attributes.target_temp_low &&\n      stateObj.attributes.target_temp_high\n    ) {\n      if (e.handle.index === 1) {\n        this.hass!.callService(\"climate\", \"set_temperature\", {\n          entity_id: this._config!.entity,\n          target_temp_low: e.handle.value,\n          target_temp_high: stateObj.attributes.target_temp_high,\n        });\n      } else {\n        this.hass!.callService(\"climate\", \"set_temperature\", {\n          entity_id: this._config!.entity,\n          target_temp_low: stateObj.attributes.target_temp_low,\n          target_temp_high: e.handle.value,\n        });\n      }\n    } else {\n      this.hass!.callService(\"climate\", \"set_temperature\", {\n        entity_id: this._config!.entity,\n        temperature: e.value,\n      });\n    }\n  }\n\n  private _renderIcon(mode: string, currentMode: string): TemplateResult {\n    if (!modeIcons[mode]) {\n      return html``;\n    }\n    return html`\n      <ha-icon\n        class=\"${classMap({ \"selected-icon\": currentMode === mode })}\"\n        .mode=\"${mode}\"\n        .icon=\"${modeIcons[mode]}\"\n        @click=\"${this._handleModeClick}\"\n      ></ha-icon>\n    `;\n  }\n\n  private _handleMoreInfo() {\n    fireEvent(this, \"hass-more-info\", {\n      entityId: this._config!.entity,\n    });\n  }\n\n  private _handleModeClick(e: MouseEvent): void {\n    this.hass!.callService(\"climate\", \"set_operation_mode\", {\n      entity_id: this._config!.entity,\n      operation_mode: (e.currentTarget as any).mode,\n    });\n  }\n\n  private formatTemp(temps: string[], spaceStepSize: boolean): string {\n    temps = temps.filter(Boolean);\n\n    // If we are sliding the slider, append 0 to the temperatures if we're\n    // having a 0.5 step size, so that the text doesn't jump while sliding\n    if (spaceStepSize) {\n      const stepSize = this._stepSize;\n      temps = temps.map((val) =>\n        val.includes(\".\") || stepSize === 1 ? val : `${val}.0`\n      );\n    }\n\n    return temps.join(\"-\");\n  }\n\n  private renderStyle(): TemplateResult {\n    return html`\n      ${this._roundSliderStyle}\n      <style>\n        :host {\n          display: block;\n        }\n        ha-card {\n          overflow: hidden;\n          --rail-border-color: transparent;\n          --auto-color: green;\n          --eco-color: springgreen;\n          --cool-color: #2b9af9;\n          --heat-color: #ff8100;\n          --manual-color: #44739e;\n          --off-color: #8a8a8a;\n          --fan_only-color: #8a8a8a;\n          --dry-color: #efbd07;\n          --idle-color: #8a8a8a;\n          --unknown-color: #bac;\n        }\n        #root {\n          position: relative;\n          overflow: hidden;\n        }\n        .auto {\n          --mode-color: var(--auto-color);\n        }\n        .cool {\n          --mode-color: var(--cool-color);\n        }\n        .heat {\n          --mode-color: var(--heat-color);\n        }\n        .manual {\n          --mode-color: var(--manual-color);\n        }\n        .off {\n          --mode-color: var(--off-color);\n        }\n        .fan_only {\n          --mode-color: var(--fan_only-color);\n        }\n        .eco {\n          --mode-color: var(--eco-color);\n        }\n        .dry {\n          --mode-color: var(--dry-color);\n        }\n        .idle {\n          --mode-color: var(--idle-color);\n        }\n        .unknown-mode {\n          --mode-color: var(--unknown-color);\n        }\n        .no-title {\n          --title-position-top: 33% !important;\n        }\n        .large {\n          --thermostat-padding-top: 25px;\n          --thermostat-margin-bottom: 25px;\n          --title-font-size: 28px;\n          --title-position-top: 27%;\n          --climate-info-position-top: 81%;\n          --set-temperature-font-size: 25px;\n          --current-temperature-font-size: 71px;\n          --current-temperature-position-top: 10%;\n          --current-temperature-text-padding-left: 15px;\n          --uom-font-size: 20px;\n          --uom-margin-left: -18px;\n          --current-mode-font-size: 18px;\n          --set-temperature-margin-bottom: -5px;\n        }\n        .small {\n          --thermostat-padding-top: 15px;\n          --thermostat-margin-bottom: 15px;\n          --title-font-size: 18px;\n          --title-position-top: 28%;\n          --climate-info-position-top: 79%;\n          --set-temperature-font-size: 16px;\n          --current-temperature-font-size: 25px;\n          --current-temperature-position-top: 5%;\n          --current-temperature-text-padding-left: 7px;\n          --uom-font-size: 12px;\n          --uom-margin-left: -5px;\n          --current-mode-font-size: 14px;\n          --set-temperature-margin-bottom: 0px;\n        }\n        #thermostat {\n          margin: 0 auto var(--thermostat-margin-bottom);\n          padding-top: var(--thermostat-padding-top);\n        }\n        #thermostat .rs-range-color {\n          background-color: var(--mode-color, var(--disabled-text-color));\n        }\n        #thermostat .rs-path-color {\n          background-color: var(--disabled-text-color);\n        }\n        #thermostat .rs-handle {\n          background-color: var(--paper-card-background-color, white);\n          padding: 7px;\n          border: 2px solid var(--disabled-text-color);\n        }\n        #thermostat .rs-handle.rs-focus {\n          border-color: var(--mode-color, var(--disabled-text-color));\n        }\n        #thermostat .rs-handle:after {\n          border-color: var(--mode-color, var(--disabled-text-color));\n          background-color: var(--mode-color, var(--disabled-text-color));\n        }\n        #thermostat .rs-border {\n          border-color: var(--rail-border-color);\n        }\n        #thermostat .rs-bar.rs-transition.rs-first,\n        .rs-bar.rs-transition.rs-second {\n          z-index: 20 !important;\n        }\n        #thermostat .rs-inner.rs-bg-color.rs-border,\n        #thermostat .rs-overlay.rs-transition.rs-bg-color {\n          background-color: var(--paper-card-background-color, white);\n        }\n        #tooltip {\n          position: absolute;\n          top: 0;\n          left: 0;\n          right: 0;\n          height: 100%;\n          text-align: center;\n          z-index: 15;\n          color: var(--primary-text-color);\n        }\n        #set-temperature {\n          font-size: var(--set-temperature-font-size);\n          margin-bottom: var(--set-temperature-margin-bottom);\n        }\n        .title {\n          font-size: var(--title-font-size);\n          position: absolute;\n          top: var(--title-position-top);\n          left: 50%;\n          transform: translate(-50%, -50%);\n        }\n        .climate-info {\n          position: absolute;\n          top: var(--climate-info-position-top);\n          left: 50%;\n          transform: translate(-50%, -50%);\n          width: 100%;\n        }\n        .current-mode {\n          font-size: var(--current-mode-font-size);\n          color: var(--secondary-text-color);\n        }\n        .modes {\n          margin-top: 16px;\n        }\n        .modes ha-icon {\n          color: var(--disabled-text-color);\n          cursor: pointer;\n          display: inline-block;\n          margin: 0 10px;\n        }\n        .modes ha-icon.selected-icon {\n          color: var(--mode-color);\n        }\n        .current-temperature {\n          position: absolute;\n          top: 50%;\n          left: 50%;\n          transform: translate(-50%, -50%);\n          font-size: var(--current-temperature-font-size);\n        }\n        .current-temperature-text {\n          padding-left: var(--current-temperature-text-padding-left);\n        }\n        .uom {\n          font-size: var(--uom-font-size);\n          vertical-align: top;\n          margin-left: var(--uom-margin-left);\n        }\n        .more-info {\n          position: absolute;\n          cursor: pointer;\n          top: 0;\n          right: 0;\n          z-index: 25;\n          color: var(--secondary-text-color);\n        }\n      </style>\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-thermostat-card\": HuiThermostatCard;\n  }\n}\n","import { html, TemplateResult } from \"lit-element\";\n\nimport { computeCardSize } from \"../common/compute-card-size\";\nimport { HuiStackCard } from \"./hui-stack-card\";\n\nclass HuiVerticalStackCard extends HuiStackCard {\n  public getCardSize() {\n    let totalSize = 0;\n\n    if (!this._cards) {\n      return totalSize;\n    }\n\n    for (const element of this._cards) {\n      totalSize += computeCardSize(element);\n    }\n\n    return totalSize;\n  }\n\n  protected renderStyle(): TemplateResult {\n    return html`\n      <style>\n        #root {\n          display: flex;\n          flex-direction: column;\n        }\n        #root > * {\n          margin: 4px 0 4px 0;\n        }\n        #root > *:first-child {\n          margin-top: 0;\n        }\n        #root > *:last-child {\n          margin-bottom: 0;\n        }\n      </style>\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-vertical-stack-card\": HuiVerticalStackCard;\n  }\n}\n\ncustomElements.define(\"hui-vertical-stack-card\", HuiVerticalStackCard);\n","import \"../../../cards/ha-weather-card\";\n\nimport LegacyWrapperCard from \"./hui-legacy-wrapper-card\";\n\nclass HuiWeatherForecastCard extends LegacyWrapperCard {\n  static async getConfigElement() {\n    await import(/* webpackChunkName: \"hui-weather-forecast-card-editor\" */ \"../editor/config-elements/hui-weather-forecast-card-editor\");\n    return document.createElement(\"hui-weather-forecast-card-editor\");\n  }\n\n  static getStubConfig() {\n    return {};\n  }\n\n  constructor() {\n    super(\"ha-weather-card\", \"weather\");\n  }\n\n  getCardSize() {\n    return 4;\n  }\n}\n\ncustomElements.define(\"hui-weather-forecast-card\", HuiWeatherForecastCard);\n","import { LovelaceElement, LovelaceElementConfig } from \"../../elements/types\";\nimport { createHuiElement } from \"../../common/create-hui-element\";\n\nexport function createStyledHuiElement(\n  elementConfig: LovelaceElementConfig\n): LovelaceElement {\n  const element = createHuiElement(elementConfig) as LovelaceElement;\n  // keep conditional card as a transparent container so let its position remain static\n  if (element.tagName !== \"HUI-CONDITIONAL-ELEMENT\") {\n    element.classList.add(\"element\");\n  }\n\n  if (elementConfig.style) {\n    Object.keys(elementConfig.style).forEach((prop) => {\n      element.style.setProperty(prop, elementConfig.style[prop]);\n    });\n  }\n\n  return element;\n}\n","import { HomeAssistant } from \"../../../types\";\nimport { CallServiceConfig } from \"../entity-rows/types\";\n\nexport const callService = (\n  config: CallServiceConfig,\n  hass: HomeAssistant\n): void => {\n  const entityId = config.entity;\n  const [domain, service] = config.service.split(\".\", 2);\n  const serviceData = { entity_id: entityId, ...config.service_data };\n  hass.callService(domain, service, serviceData);\n};\n","import { LovelaceCard } from \"../types\";\n\nexport const computeCardSize = (card: LovelaceCard): number => {\n  return typeof card.getCardSize === \"function\" ? card.getCardSize() : 1;\n};\n","import { HassEntities, HassEntity } from \"home-assistant-js-websocket\";\n\nimport computeDomain from \"../../../common/entity/compute_domain\";\n\nexport const computeNotifications = (states: HassEntities): HassEntity[] => {\n  return Object.keys(states)\n    .filter((entityId) => computeDomain(entityId) === \"configurator\")\n    .map((entityId) => states[entityId]);\n};\n","import computeStateName from \"../../../common/entity/compute_state_name\";\nimport { HomeAssistant } from \"../../../types\";\nimport { LovelaceElementConfig } from \"../elements/types\";\nimport { ActionConfig } from \"../../../data/lovelace\";\n\ninterface Config extends LovelaceElementConfig {\n  entity?: string;\n  title?: string;\n  tap_action?: ActionConfig;\n  hold_action?: ActionConfig;\n}\n\nexport const computeTooltip = (hass: HomeAssistant, config: Config): string => {\n  if (config.title === null) {\n    return \"\";\n  }\n\n  if (config.title) {\n    return config.title;\n  }\n\n  let stateName = \"\";\n  let tooltip = \"\";\n\n  if (config.entity) {\n    stateName =\n      config.entity in hass.states\n        ? computeStateName(hass.states[config.entity])\n        : config.entity;\n  }\n\n  const tapTooltip = config.tap_action\n    ? computeActionTooltip(hass, stateName, config.tap_action, false)\n    : \"\";\n  const holdTooltip = config.hold_action\n    ? computeActionTooltip(hass, stateName, config.hold_action, true)\n    : \"\";\n\n  const newline = tapTooltip && holdTooltip ? \"\\n\" : \"\";\n\n  tooltip = tapTooltip + newline + holdTooltip;\n\n  return tooltip;\n};\n\nfunction computeActionTooltip(\n  hass: HomeAssistant,\n  state: string,\n  config: ActionConfig,\n  isHold: boolean\n) {\n  if (!config || !config.action || config.action === \"none\") {\n    return \"\";\n  }\n\n  let tooltip =\n    (isHold\n      ? hass.localize(\"ui.panel.lovelace.cards.picture-elements.hold\")\n      : hass.localize(\"ui.panel.lovelace.cards.picture-elements.tap\")) + \" \";\n\n  switch (config.action) {\n    case \"navigate\":\n      tooltip += `${hass.localize(\n        \"ui.panel.lovelace.cards.picture-elements.navigate_to\",\n        \"location\",\n        config.navigation_path\n      )}`;\n      break;\n    case \"toggle\":\n      tooltip += `${hass.localize(\n        \"ui.panel.lovelace.cards.picture-elements.toggle\",\n        \"name\",\n        state\n      )}`;\n      break;\n    case \"call-service\":\n      tooltip += `${hass.localize(\n        \"ui.panel.lovelace.cards.picture-elements.call_service\",\n        \"name\",\n        config.service\n      )}`;\n      break;\n    case \"more-info\":\n      tooltip += `${hass.localize(\n        \"ui.panel.lovelace.cards.picture-elements.more_info\",\n        \"name\",\n        state\n      )}`;\n      break;\n  }\n\n  return tooltip;\n}\n","import deepClone from \"deep-clone-simple\";\n\nimport { fireEvent } from \"../../../common/dom/fire_event\";\n\nimport \"../cards/hui-alarm-panel-card\";\nimport \"../cards/hui-conditional-card\";\nimport \"../cards/hui-entities-card\";\nimport \"../cards/hui-entity-button-card\";\nimport \"../cards/hui-entity-filter-card\";\nimport {\n  createErrorCardElement,\n  createErrorCardConfig,\n  HuiErrorCard,\n} from \"../cards/hui-error-card\";\nimport \"../cards/hui-glance-card\";\nimport \"../cards/hui-history-graph-card\";\nimport \"../cards/hui-horizontal-stack-card\";\nimport \"../cards/hui-iframe-card\";\nimport \"../cards/hui-light-card\";\nimport \"../cards/hui-map-card\";\nimport \"../cards/hui-markdown-card\";\nimport \"../cards/hui-media-control-card\";\nimport \"../cards/hui-picture-card\";\nimport \"../cards/hui-picture-elements-card\";\nimport \"../cards/hui-picture-entity-card\";\nimport \"../cards/hui-picture-glance-card\";\nimport \"../cards/hui-plant-status-card\";\nimport \"../cards/hui-sensor-card\";\nimport \"../cards/hui-vertical-stack-card\";\nimport \"../cards/hui-shopping-list-card\";\nimport \"../cards/hui-thermostat-card\";\nimport \"../cards/hui-weather-forecast-card\";\nimport \"../cards/hui-gauge-card\";\nimport { LovelaceCard } from \"../types\";\nimport { LovelaceCardConfig } from \"../../../data/lovelace\";\n\nconst CARD_TYPES = new Set([\n  \"alarm-panel\",\n  \"conditional\",\n  \"entities\",\n  \"entity-button\",\n  \"entity-filter\",\n  \"error\",\n  \"gauge\",\n  \"glance\",\n  \"history-graph\",\n  \"horizontal-stack\",\n  \"iframe\",\n  \"light\",\n  \"map\",\n  \"markdown\",\n  \"media-control\",\n  \"picture\",\n  \"picture-elements\",\n  \"picture-entity\",\n  \"picture-glance\",\n  \"plant-status\",\n  \"sensor\",\n  \"shopping-list\",\n  \"thermostat\",\n  \"vertical-stack\",\n  \"weather-forecast\",\n]);\nconst CUSTOM_TYPE_PREFIX = \"custom:\";\nconst TIMEOUT = 2000;\n\nconst _createElement = (\n  tag: string,\n  config: LovelaceCardConfig\n): LovelaceCard | HuiErrorCard => {\n  const element = document.createElement(tag) as LovelaceCard;\n  try {\n    element.setConfig(deepClone(config));\n  } catch (err) {\n    // tslint:disable-next-line\n    console.error(tag, err);\n    return _createErrorElement(err.message, config);\n  }\n  return element;\n};\n\nconst _createErrorElement = (\n  error: string,\n  config: LovelaceCardConfig\n): HuiErrorCard => createErrorCardElement(createErrorCardConfig(error, config));\n\nexport const createCardElement = (\n  config: LovelaceCardConfig\n): LovelaceCard | HuiErrorCard => {\n  if (!config || typeof config !== \"object\" || !config.type) {\n    return _createErrorElement(\"No card type configured.\", config);\n  }\n\n  if (config.type.startsWith(CUSTOM_TYPE_PREFIX)) {\n    const tag = config.type.substr(CUSTOM_TYPE_PREFIX.length);\n\n    if (customElements.get(tag)) {\n      return _createElement(tag, config);\n    }\n    const element = _createErrorElement(\n      `Custom element doesn't exist: ${tag}.`,\n      config\n    );\n    element.style.display = \"None\";\n    const timer = window.setTimeout(() => {\n      element.style.display = \"\";\n    }, TIMEOUT);\n\n    customElements.whenDefined(tag).then(() => {\n      clearTimeout(timer);\n      fireEvent(element, \"ll-rebuild\");\n    });\n\n    return element;\n  }\n\n  if (!CARD_TYPES.has(config.type)) {\n    return _createErrorElement(\n      `Unknown card type encountered: ${config.type}.`,\n      config\n    );\n  }\n\n  return _createElement(`hui-${config.type}-card`, config);\n};\n","import deepClone from \"deep-clone-simple\";\n\nimport \"../elements/hui-conditional-element\";\nimport \"../elements/hui-icon-element\";\nimport \"../elements/hui-image-element\";\nimport \"../elements/hui-service-button-element\";\nimport \"../elements/hui-state-badge-element\";\nimport \"../elements/hui-state-icon-element\";\nimport \"../elements/hui-state-label-element\";\n\nimport { fireEvent } from \"../../../common/dom/fire_event\";\nimport {\n  createErrorCardElement,\n  createErrorCardConfig,\n  HuiErrorCard,\n} from \"../cards/hui-error-card\";\nimport { LovelaceElementConfig, LovelaceElement } from \"../elements/types\";\n\nconst CUSTOM_TYPE_PREFIX = \"custom:\";\nconst ELEMENT_TYPES = new Set([\n  \"conditional\",\n  \"icon\",\n  \"image\",\n  \"service-button\",\n  \"state-badge\",\n  \"state-icon\",\n  \"state-label\",\n]);\nconst TIMEOUT = 2000;\n\nconst _createElement = (\n  tag: string,\n  config: LovelaceElementConfig\n): LovelaceElement | HuiErrorCard => {\n  const element = document.createElement(tag) as LovelaceElement;\n  try {\n    element.setConfig(deepClone(config));\n  } catch (err) {\n    // tslint:disable-next-line\n    console.error(tag, err);\n    return _createErrorElement(err.message, config);\n  }\n  return element;\n};\n\nconst _createErrorElement = (\n  error: string,\n  config: LovelaceElementConfig\n): HuiErrorCard => createErrorCardElement(createErrorCardConfig(error, config));\n\nfunction _hideErrorElement(element) {\n  element.style.display = \"None\";\n  return window.setTimeout(() => {\n    element.style.display = \"\";\n  }, TIMEOUT);\n}\n\nexport const createHuiElement = (\n  config: LovelaceElementConfig\n): LovelaceElement | HuiErrorCard => {\n  if (!config || typeof config !== \"object\" || !config.type) {\n    return _createErrorElement(\"No element type configured.\", config);\n  }\n\n  if (config.type.startsWith(CUSTOM_TYPE_PREFIX)) {\n    const tag = config.type.substr(CUSTOM_TYPE_PREFIX.length);\n\n    if (customElements.get(tag)) {\n      return _createElement(tag, config);\n    }\n    const element = _createErrorElement(\n      `Custom element doesn't exist: ${tag}.`,\n      config\n    );\n    const timer = _hideErrorElement(element);\n\n    customElements.whenDefined(tag).then(() => {\n      clearTimeout(timer);\n      fireEvent(element, \"ll-rebuild\");\n    });\n\n    return element;\n  }\n\n  if (!ELEMENT_TYPES.has(config.type)) {\n    return _createErrorElement(\n      `Unknown element type encountered: ${config.type}.`,\n      config\n    );\n  }\n\n  return _createElement(`hui-${config.type}-element`, config);\n};\n","import deepClone from \"deep-clone-simple\";\n\nimport { fireEvent } from \"../../../common/dom/fire_event\";\n\nimport {\n  createErrorCardElement,\n  createErrorCardConfig,\n  HuiErrorCard,\n} from \"../cards/hui-error-card\";\nimport \"../entity-rows/hui-climate-entity-row\";\nimport \"../entity-rows/hui-cover-entity-row\";\nimport \"../entity-rows/hui-group-entity-row\";\nimport \"../entity-rows/hui-input-datetime-entity-row\";\nimport \"../entity-rows/hui-input-number-entity-row\";\nimport \"../entity-rows/hui-input-select-entity-row\";\nimport \"../entity-rows/hui-input-text-entity-row\";\nimport \"../entity-rows/hui-lock-entity-row\";\nimport \"../entity-rows/hui-media-player-entity-row\";\nimport \"../entity-rows/hui-scene-entity-row\";\nimport \"../entity-rows/hui-script-entity-row\";\nimport \"../entity-rows/hui-sensor-entity-row\";\nimport \"../entity-rows/hui-text-entity-row\";\nimport \"../entity-rows/hui-timer-entity-row\";\nimport \"../entity-rows/hui-toggle-entity-row\";\nimport \"../special-rows/hui-call-service-row\";\nimport \"../special-rows/hui-divider-row\";\nimport \"../special-rows/hui-section-row\";\nimport \"../special-rows/hui-weblink-row\";\nimport { EntityConfig, EntityRow } from \"../entity-rows/types\";\n\nconst CUSTOM_TYPE_PREFIX = \"custom:\";\nconst SPECIAL_TYPES = new Set([\n  \"call-service\",\n  \"divider\",\n  \"section\",\n  \"weblink\",\n]);\nconst DOMAIN_TO_ELEMENT_TYPE = {\n  alert: \"toggle\",\n  automation: \"toggle\",\n  climate: \"climate\",\n  cover: \"cover\",\n  fan: \"toggle\",\n  group: \"group\",\n  input_boolean: \"toggle\",\n  input_number: \"input-number\",\n  input_select: \"input-select\",\n  input_text: \"input-text\",\n  light: \"toggle\",\n  lock: \"lock\",\n  media_player: \"media-player\",\n  remote: \"toggle\",\n  scene: \"scene\",\n  script: \"script\",\n  sensor: \"sensor\",\n  timer: \"timer\",\n  switch: \"toggle\",\n  vacuum: \"toggle\",\n  // Temporary. Once climate is rewritten,\n  // water heater should get it's own row.\n  water_heater: \"climate\",\n  input_datetime: \"input-datetime\",\n};\nconst TIMEOUT = 2000;\n\nconst _createElement = (\n  tag: string,\n  config: EntityConfig\n): EntityRow | HuiErrorCard => {\n  const element = document.createElement(tag) as EntityRow;\n  try {\n    element.setConfig(deepClone(config));\n  } catch (err) {\n    // tslint:disable-next-line\n    console.error(tag, err);\n    return _createErrorElement(err.message, config);\n  }\n\n  return element;\n};\n\nconst _createErrorElement = (\n  error: string,\n  config: EntityConfig\n): HuiErrorCard => createErrorCardElement(createErrorCardConfig(error, config));\n\nconst _hideErrorElement = (element) => {\n  element.style.display = \"None\";\n  return window.setTimeout(() => {\n    element.style.display = \"\";\n  }, TIMEOUT);\n};\n\nexport const createRowElement = (\n  config: EntityConfig\n): EntityRow | HuiErrorCard => {\n  let tag;\n\n  if (\n    !config ||\n    typeof config !== \"object\" ||\n    (!config.entity && !config.type)\n  ) {\n    return _createErrorElement(\"Invalid config given.\", config);\n  }\n\n  const type = config.type || \"default\";\n  if (SPECIAL_TYPES.has(type)) {\n    return _createElement(`hui-${type}-row`, config);\n  }\n\n  if (type.startsWith(CUSTOM_TYPE_PREFIX)) {\n    tag = type.substr(CUSTOM_TYPE_PREFIX.length);\n\n    if (customElements.get(tag)) {\n      return _createElement(tag, config);\n    }\n    const element = _createErrorElement(\n      `Custom element doesn't exist: ${tag}.`,\n      config\n    );\n    const timer = _hideErrorElement(element);\n\n    customElements.whenDefined(tag).then(() => {\n      clearTimeout(timer);\n      fireEvent(element, \"ll-rebuild\");\n    });\n\n    return element;\n  }\n\n  const domain = config.entity.split(\".\", 1)[0];\n  tag = `hui-${DOMAIN_TO_ELEMENT_TYPE[domain] || \"text\"}-entity-row`;\n\n  return _createElement(tag, config);\n};\n","import { directive, PropertyPart } from \"lit-html\";\n// See https://github.com/home-assistant/home-assistant-polymer/pull/2457\n// on how to undo mwc -> paper migration\n// import \"@material/mwc-ripple\";\nimport \"@polymer/paper-ripple\";\n\nconst isTouch =\n  \"ontouchstart\" in window ||\n  navigator.maxTouchPoints > 0 ||\n  navigator.msMaxTouchPoints > 0;\n\ninterface LongPress extends HTMLElement {\n  holdTime: number;\n  bind(element: Element): void;\n}\ninterface LongPressElement extends Element {\n  longPress?: boolean;\n}\n\nclass LongPress extends HTMLElement implements LongPress {\n  public holdTime: number;\n  protected ripple: any;\n  protected timer: number | undefined;\n  protected held: boolean;\n  protected cooldownStart: boolean;\n  protected cooldownEnd: boolean;\n\n  constructor() {\n    super();\n    this.holdTime = 500;\n    this.ripple = document.createElement(\"paper-ripple\");\n    this.timer = undefined;\n    this.held = false;\n    this.cooldownStart = false;\n    this.cooldownEnd = false;\n  }\n\n  public connectedCallback() {\n    Object.assign(this.style, {\n      borderRadius: \"50%\", // paper-ripple\n      position: \"absolute\",\n      width: isTouch ? \"100px\" : \"50px\",\n      height: isTouch ? \"100px\" : \"50px\",\n      transform: \"translate(-50%, -50%)\",\n      pointerEvents: \"none\",\n    });\n\n    this.appendChild(this.ripple);\n    this.ripple.style.color = \"#03a9f4\"; // paper-ripple\n    this.ripple.style.color = \"var(--primary-color)\"; // paper-ripple\n    // this.ripple.primary = true;\n\n    [\n      \"touchcancel\",\n      \"mouseout\",\n      \"mouseup\",\n      \"touchmove\",\n      \"mousewheel\",\n      \"wheel\",\n      \"scroll\",\n    ].forEach((ev) => {\n      document.addEventListener(\n        ev,\n        () => {\n          clearTimeout(this.timer);\n          this.stopAnimation();\n          this.timer = undefined;\n        },\n        { passive: true }\n      );\n    });\n  }\n\n  public bind(element: LongPressElement) {\n    if (element.longPress) {\n      return;\n    }\n    element.longPress = true;\n\n    element.addEventListener(\"contextmenu\", (ev: Event) => {\n      const e = ev || window.event;\n      if (e.preventDefault) {\n        e.preventDefault();\n      }\n      if (e.stopPropagation) {\n        e.stopPropagation();\n      }\n      e.cancelBubble = true;\n      e.returnValue = false;\n      return false;\n    });\n\n    const clickStart = (ev: Event) => {\n      if (this.cooldownStart) {\n        return;\n      }\n      this.held = false;\n      let x;\n      let y;\n      if ((ev as TouchEvent).touches) {\n        x = (ev as TouchEvent).touches[0].pageX;\n        y = (ev as TouchEvent).touches[0].pageY;\n      } else {\n        x = (ev as MouseEvent).pageX;\n        y = (ev as MouseEvent).pageY;\n      }\n      this.timer = window.setTimeout(() => {\n        this.startAnimation(x, y);\n        this.held = true;\n      }, this.holdTime);\n\n      this.cooldownStart = true;\n      window.setTimeout(() => (this.cooldownStart = false), 100);\n    };\n\n    const clickEnd = (ev: Event) => {\n      if (\n        this.cooldownEnd ||\n        ([\"touchend\", \"touchcancel\"].includes(ev.type) &&\n          this.timer === undefined)\n      ) {\n        return;\n      }\n      clearTimeout(this.timer);\n      this.stopAnimation();\n      this.timer = undefined;\n      if (this.held) {\n        element.dispatchEvent(new Event(\"ha-hold\"));\n      } else {\n        element.dispatchEvent(new Event(\"ha-click\"));\n      }\n      this.cooldownEnd = true;\n      window.setTimeout(() => (this.cooldownEnd = false), 100);\n    };\n\n    element.addEventListener(\"touchstart\", clickStart, { passive: true });\n    element.addEventListener(\"touchend\", clickEnd);\n    element.addEventListener(\"touchcancel\", clickEnd);\n    element.addEventListener(\"mousedown\", clickStart, { passive: true });\n    element.addEventListener(\"click\", clickEnd);\n  }\n\n  private startAnimation(x: number, y: number) {\n    Object.assign(this.style, {\n      left: `${x}px`,\n      top: `${y}px`,\n      display: null,\n    });\n    this.ripple.holdDown = true; // paper-ripple\n    this.ripple.simulatedRipple(); // paper-ripple\n    // this.ripple.disabled = false;\n    // this.ripple.active = true;\n    // this.ripple.unbounded = true;\n  }\n\n  private stopAnimation() {\n    this.ripple.holdDown = false; // paper-ripple\n    // this.ripple.active = false;\n    // this.ripple.disabled = true;\n    this.style.display = \"none\";\n  }\n}\n\ncustomElements.define(\"long-press\", LongPress);\n\nconst getLongPress = (): LongPress => {\n  const body = document.body;\n  if (body.querySelector(\"long-press\")) {\n    return body.querySelector(\"long-press\") as LongPress;\n  }\n\n  const longpress = document.createElement(\"long-press\");\n  body.appendChild(longpress);\n\n  return longpress as LongPress;\n};\n\nexport const longPressBind = (element: LongPressElement) => {\n  const longpress: LongPress = getLongPress();\n  if (!longpress) {\n    return;\n  }\n  longpress.bind(element);\n};\n\nexport const longPress = directive(() => (part: PropertyPart) => {\n  longPressBind(part.committer.element);\n});\n","import { STATES_OFF } from \"../../../../common/const\";\nimport { turnOnOffEntity } from \"./turn-on-off-entity\";\nimport { HomeAssistant } from \"../../../../types\";\nexport const toggleEntity = (\n  hass: HomeAssistant,\n  entityId: string\n): Promise<void> => {\n  const turnOn = STATES_OFF.includes(hass.states[entityId].state);\n  return turnOnOffEntity(hass, entityId, turnOn);\n};\n","import computeDomain from \"../../../../common/entity/compute_domain\";\nimport { STATES_OFF } from \"../../../../common/const\";\nimport { HomeAssistant } from \"../../../../types\";\n\nexport const turnOnOffEntities = (\n  hass: HomeAssistant,\n  entityIds: string[],\n  turnOn = true\n): void => {\n  const domainsToCall = {};\n  entityIds.forEach((entityId) => {\n    if (STATES_OFF.includes(hass.states[entityId].state) === turnOn) {\n      const stateDomain = computeDomain(entityId);\n      const serviceDomain = [\"cover\", \"lock\"].includes(stateDomain)\n        ? stateDomain\n        : \"homeassistant\";\n\n      if (!(serviceDomain in domainsToCall)) {\n        domainsToCall[serviceDomain] = [];\n      }\n      domainsToCall[serviceDomain].push(entityId);\n    }\n  });\n\n  Object.keys(domainsToCall).forEach((domain) => {\n    let service;\n    switch (domain) {\n      case \"lock\":\n        service = turnOn ? \"unlock\" : \"lock\";\n        break;\n      case \"cover\":\n        service = turnOn ? \"open_cover\" : \"close_cover\";\n        break;\n      default:\n        service = turnOn ? \"turn_on\" : \"turn_off\";\n    }\n\n    const entities = domainsToCall[domain];\n    hass.callService(domain, service, { entity_id: entities });\n  });\n};\n","import computeDomain from \"../../../../common/entity/compute_domain\";\nimport { HomeAssistant } from \"../../../../types\";\n\nexport const turnOnOffEntity = (\n  hass: HomeAssistant,\n  entityId: string,\n  turnOn = true\n): Promise<void> => {\n  const stateDomain = computeDomain(entityId);\n  const serviceDomain = stateDomain === \"group\" ? \"homeassistant\" : stateDomain;\n\n  let service;\n  switch (stateDomain) {\n    case \"lock\":\n      service = turnOn ? \"unlock\" : \"lock\";\n      break;\n    case \"cover\":\n      service = turnOn ? \"open_cover\" : \"close_cover\";\n      break;\n    default:\n      service = turnOn ? \"turn_on\" : \"turn_off\";\n  }\n\n  return hass.callService(serviceDomain, service, { entity_id: entityId });\n};\n","import { HomeAssistant, GroupEntity } from \"../../../types\";\nimport {\n  LovelaceConfig,\n  LovelaceCardConfig,\n  LovelaceViewConfig,\n} from \"../../../data/lovelace\";\nimport { HassEntity, HassEntities } from \"home-assistant-js-websocket\";\n\nimport extractViews from \"../../../common/entity/extract_views\";\nimport getViewEntities from \"../../../common/entity/get_view_entities\";\nimport computeStateName from \"../../../common/entity/compute_state_name\";\nimport splitByGroups from \"../../../common/entity/split_by_groups\";\nimport computeObjectId from \"../../../common/entity/compute_object_id\";\nimport computeStateDomain from \"../../../common/entity/compute_state_domain\";\nimport computeDomain from \"../../../common/entity/compute_domain\";\n\nimport { EntityRowConfig, WeblinkConfig } from \"../entity-rows/types\";\nimport { LocalizeFunc } from \"../../../common/translations/localize\";\nimport { EntitiesCardConfig } from \"../cards/types\";\nimport {\n  subscribeAreaRegistry,\n  AreaRegistryEntry,\n} from \"../../../data/area_registry\";\nimport { subscribeOne } from \"../../../common/util/subscribe-one\";\nimport {\n  subscribeDeviceRegistry,\n  DeviceRegistryEntry,\n} from \"../../../data/device_registry\";\nimport {\n  subscribeEntityRegistry,\n  EntityRegistryEntry,\n} from \"../../../data/entity_registry\";\n\nconst DEFAULT_VIEW_ENTITY_ID = \"group.default_view\";\nconst DOMAINS_BADGES = [\n  \"binary_sensor\",\n  \"person\",\n  \"device_tracker\",\n  \"mailbox\",\n  \"sensor\",\n  \"sun\",\n  \"timer\",\n];\nconst HIDE_DOMAIN = new Set([\n  \"persistent_notification\",\n  \"configurator\",\n  \"geo_location\",\n]);\n\ninterface Registries {\n  areas: AreaRegistryEntry[];\n  devices: DeviceRegistryEntry[];\n  entities: EntityRegistryEntry[];\n}\n\nlet subscribedRegistries = false;\n\ninterface SplittedByAreas {\n  areasWithEntities: Array<[AreaRegistryEntry, HassEntity[]]>;\n  otherEntities: HassEntities;\n}\n\nconst splitByAreas = (\n  registries: Registries,\n  entities: HassEntities\n): SplittedByAreas => {\n  const allEntities = { ...entities };\n  const areasWithEntities: SplittedByAreas[\"areasWithEntities\"] = [];\n\n  for (const area of registries.areas) {\n    const areaEntities: HassEntity[] = [];\n    const areaDevices = new Set(\n      registries.devices\n        .filter((device) => device.area_id === area.area_id)\n        .map((device) => device.id)\n    );\n    for (const entity of registries.entities) {\n      if (\n        areaDevices.has(\n          // @ts-ignore\n          entity.device_id\n        ) &&\n        entity.entity_id in allEntities\n      ) {\n        areaEntities.push(allEntities[entity.entity_id]);\n        delete allEntities[entity.entity_id];\n      }\n    }\n    if (areaEntities.length > 0) {\n      areasWithEntities.push([area, areaEntities]);\n    }\n  }\n  return {\n    areasWithEntities,\n    otherEntities: allEntities,\n  };\n};\n\nconst computeCards = (\n  states: Array<[string, HassEntity]>,\n  entityCardOptions: Partial<EntitiesCardConfig>\n): LovelaceCardConfig[] => {\n  const cards: LovelaceCardConfig[] = [];\n\n  // For entity card\n  const entities: Array<string | EntityRowConfig> = [];\n\n  for (const [entityId, stateObj] of states) {\n    const domain = computeDomain(entityId);\n\n    if (domain === \"alarm_control_panel\") {\n      cards.push({\n        type: \"alarm-panel\",\n        entity: entityId,\n      });\n    } else if (domain === \"camera\") {\n      cards.push({\n        type: \"picture-entity\",\n        entity: entityId,\n      });\n    } else if (domain === \"climate\") {\n      cards.push({\n        type: \"thermostat\",\n        entity: entityId,\n      });\n    } else if (domain === \"history_graph\" && stateObj) {\n      cards.push({\n        type: \"history-graph\",\n        entities: stateObj.attributes.entity_id,\n        hours_to_show: stateObj.attributes.hours_to_show,\n        title: stateObj.attributes.friendly_name,\n        refresh_interval: stateObj.attributes.refresh,\n      });\n    } else if (domain === \"media_player\") {\n      cards.push({\n        type: \"media-control\",\n        entity: entityId,\n      });\n    } else if (domain === \"plant\") {\n      cards.push({\n        type: \"plant-status\",\n        entity: entityId,\n      });\n    } else if (domain === \"weather\") {\n      cards.push({\n        type: \"weather-forecast\",\n        entity: entityId,\n      });\n    } else if (domain === \"weblink\" && stateObj) {\n      const conf: WeblinkConfig = {\n        type: \"weblink\",\n        url: stateObj.state,\n        name: computeStateName(stateObj),\n      };\n      if (\"icon\" in stateObj.attributes) {\n        conf.icon = stateObj.attributes.icon;\n      }\n      entities.push(conf);\n    } else {\n      entities.push(entityId);\n    }\n  }\n\n  if (entities.length > 0) {\n    cards.unshift({\n      type: \"entities\",\n      entities,\n      ...entityCardOptions,\n    });\n  }\n\n  return cards;\n};\n\nconst computeDefaultViewStates = (hass: HomeAssistant): HassEntities => {\n  const states = {};\n  Object.keys(hass.states).forEach((entityId) => {\n    const stateObj = hass.states[entityId];\n    if (\n      !stateObj.attributes.hidden &&\n      !HIDE_DOMAIN.has(computeStateDomain(stateObj))\n    ) {\n      states[entityId] = hass.states[entityId];\n    }\n  });\n  return states;\n};\n\nconst generateDefaultViewConfig = (\n  hass: HomeAssistant,\n  registries: Registries\n): LovelaceViewConfig => {\n  const states = computeDefaultViewStates(hass);\n  const path = \"default_view\";\n  const title = \"Home\";\n  const icon = undefined;\n\n  // In the case of a default view, we want to use the group order attribute\n  const groupOrders = {};\n  Object.keys(states).forEach((entityId) => {\n    const stateObj = states[entityId];\n    if (stateObj.attributes.order) {\n      groupOrders[entityId] = stateObj.attributes.order;\n    }\n  });\n\n  const splittedByAreas = splitByAreas(registries, states);\n\n  const config = generateViewConfig(\n    hass.localize,\n    path,\n    title,\n    icon,\n    splittedByAreas.otherEntities,\n    groupOrders\n  );\n\n  const areaCards: LovelaceCardConfig[] = [];\n\n  splittedByAreas.areasWithEntities.forEach(([area, entities]) => {\n    areaCards.push(\n      ...computeCards(entities.map((entity) => [entity.entity_id, entity]), {\n        title: area.name,\n        show_header_toggle: true,\n      })\n    );\n  });\n\n  config.cards!.unshift(...areaCards);\n\n  return config;\n};\n\nconst generateViewConfig = (\n  localize: LocalizeFunc,\n  path: string,\n  title: string | undefined,\n  icon: string | undefined,\n  entities: HassEntities,\n  groupOrders: { [entityId: string]: number }\n): LovelaceViewConfig => {\n  const splitted = splitByGroups(entities);\n  splitted.groups.sort(\n    (gr1, gr2) => groupOrders[gr1.entity_id] - groupOrders[gr2.entity_id]\n  );\n\n  const badgeEntities: { [domain: string]: string[] } = {};\n  const ungroupedEntitites: { [domain: string]: string[] } = {};\n\n  // Organize ungrouped entities in badges/ungrouped things\n  Object.keys(splitted.ungrouped).forEach((entityId) => {\n    const state = splitted.ungrouped[entityId];\n    const domain = computeStateDomain(state);\n\n    const coll = DOMAINS_BADGES.includes(domain)\n      ? badgeEntities\n      : ungroupedEntitites;\n\n    if (!(domain in coll)) {\n      coll[domain] = [];\n    }\n\n    coll[domain].push(state.entity_id);\n  });\n\n  let badges: string[] = [];\n  DOMAINS_BADGES.forEach((domain) => {\n    if (domain in badgeEntities) {\n      badges = badges.concat(badgeEntities[domain]);\n    }\n  });\n\n  let cards: LovelaceCardConfig[] = [];\n\n  splitted.groups.forEach((groupEntity) => {\n    cards = cards.concat(\n      computeCards(\n        groupEntity.attributes.entity_id.map(\n          (entityId): [string, HassEntity] => [entityId, entities[entityId]]\n        ),\n        {\n          title: computeStateName(groupEntity),\n          show_header_toggle: groupEntity.attributes.control !== \"hidden\",\n        }\n      )\n    );\n  });\n\n  Object.keys(ungroupedEntitites)\n    .sort()\n    .forEach((domain) => {\n      cards = cards.concat(\n        computeCards(\n          ungroupedEntitites[domain].map(\n            (entityId): [string, HassEntity] => [entityId, entities[entityId]]\n          ),\n          {\n            title: localize(`domain.${domain}`),\n          }\n        )\n      );\n    });\n\n  const view: LovelaceViewConfig = {\n    path,\n    title,\n    badges,\n    cards,\n  };\n\n  if (icon) {\n    view.icon = icon;\n  }\n\n  return view;\n};\n\nexport const generateLovelaceConfig = async (\n  hass: HomeAssistant,\n  localize: LocalizeFunc\n): Promise<LovelaceConfig> => {\n  const viewEntities = extractViews(hass.states);\n\n  const views = viewEntities.map((viewEntity: GroupEntity) => {\n    const states = getViewEntities(hass.states, viewEntity);\n\n    // In the case of a normal view, we use group order as specified in view\n    const groupOrders = {};\n    Object.keys(states).forEach((entityId, idx) => {\n      groupOrders[entityId] = idx;\n    });\n\n    return generateViewConfig(\n      localize,\n      computeObjectId(viewEntity.entity_id),\n      computeStateName(viewEntity),\n      viewEntity.attributes.icon,\n      states,\n      groupOrders\n    );\n  });\n\n  let title = hass.config.location_name;\n\n  // User can override default view. If they didn't, we will add one\n  // that contains all entities.\n  if (\n    viewEntities.length === 0 ||\n    viewEntities[0].entity_id !== DEFAULT_VIEW_ENTITY_ID\n  ) {\n    // We want to keep the registry subscriptions alive after generating the UI\n    // so that we don't serve up stale data after changing areas.\n    if (!subscribedRegistries) {\n      subscribedRegistries = true;\n      subscribeAreaRegistry(hass.connection, () => undefined);\n      subscribeDeviceRegistry(hass.connection, () => undefined);\n      subscribeEntityRegistry(hass.connection, () => undefined);\n    }\n\n    const [areas, devices, entities] = await Promise.all([\n      subscribeOne(hass.connection, subscribeAreaRegistry),\n      subscribeOne(hass.connection, subscribeDeviceRegistry),\n      subscribeOne(hass.connection, subscribeEntityRegistry),\n    ]);\n    const registries = { areas, devices, entities };\n\n    views.unshift(generateDefaultViewConfig(hass, registries));\n\n    // Add map of geo locations to default view if loaded\n    if (hass.config.components.includes(\"geo_location\")) {\n      if (views[0] && views[0].cards) {\n        views[0].cards.push({\n          type: \"map\",\n          geo_location_sources: [\"all\"],\n        });\n      }\n    }\n\n    // Make sure we don't have Home as title and first tab.\n    if (views.length > 1 && title === \"Home\") {\n      title = \"Home Assistant\";\n    }\n  }\n\n  if (__DEMO__) {\n    views[0].cards!.unshift({\n      type: \"custom:ha-demo-card\",\n    });\n  }\n\n  // User has no entities\n  if (views.length === 1 && views[0].cards!.length === 0) {\n    import(/* webpackChunkName: \"hui-empty-state-card\" */ \"../cards/hui-empty-state-card\");\n    views[0].cards!.push({\n      type: \"custom:hui-empty-state-card\",\n    });\n  }\n\n  return {\n    title,\n    views,\n  };\n};\n","import { HomeAssistant } from \"../../../types\";\nimport { fireEvent } from \"../../../common/dom/fire_event\";\nimport { navigate } from \"../../../common/navigate\";\nimport { toggleEntity } from \"../../../../src/panels/lovelace/common/entity/toggle-entity\";\nimport { ActionConfig } from \"../../../data/lovelace\";\n\nexport const handleClick = (\n  node: HTMLElement,\n  hass: HomeAssistant,\n  config: {\n    entity?: string;\n    camera_image?: string;\n    hold_action?: ActionConfig;\n    tap_action?: ActionConfig;\n  },\n  hold: boolean\n): void => {\n  let actionConfig: ActionConfig | undefined;\n\n  if (hold && config.hold_action) {\n    actionConfig = config.hold_action;\n  } else if (!hold && config.tap_action) {\n    actionConfig = config.tap_action;\n  }\n\n  if (!actionConfig) {\n    actionConfig = {\n      action: \"more-info\",\n    };\n  }\n\n  switch (actionConfig.action) {\n    case \"more-info\":\n      if (config.entity || config.camera_image) {\n        fireEvent(node, \"hass-more-info\", {\n          entityId: config.entity ? config.entity : config.camera_image!,\n        });\n      }\n      break;\n    case \"navigate\":\n      if (actionConfig.navigation_path) {\n        navigate(node, actionConfig.navigation_path);\n      }\n      break;\n    case \"toggle\":\n      if (config.entity) {\n        toggleEntity(hass, config.entity!);\n      }\n      break;\n    case \"call-service\": {\n      if (!actionConfig.service) {\n        return;\n      }\n      const [domain, service] = actionConfig.service.split(\".\", 2);\n      hass.callService(domain, service, actionConfig.service_data);\n    }\n  }\n};\n","import { HomeAssistant } from \"../../../types\";\nimport { PropertyValues } from \"lit-element\";\n\n// Check if config or Entity changed\nexport function hasConfigOrEntityChanged(\n  element: any,\n  changedProps: PropertyValues\n): boolean {\n  if (changedProps.has(\"_config\")) {\n    return true;\n  }\n\n  const oldHass = changedProps.get(\"hass\") as HomeAssistant | undefined;\n  if (oldHass) {\n    return (\n      oldHass.states[element._config!.entity] !==\n      element.hass!.states[element._config!.entity]\n    );\n  }\n\n  return true;\n}\n","// Parse array of entity objects from config\nimport isValidEntityId from \"../../../common/entity/valid_entity_id\";\nimport { EntityConfig } from \"../entity-rows/types\";\n\nexport const processConfigEntities = <T extends EntityConfig>(\n  entities: Array<T | string>\n): T[] => {\n  if (!entities || !Array.isArray(entities)) {\n    throw new Error(\"Entities need to be an array\");\n  }\n\n  return entities.map(\n    (entityConf, index): T => {\n      if (\n        typeof entityConf === \"object\" &&\n        !Array.isArray(entityConf) &&\n        entityConf.type\n      ) {\n        return entityConf;\n      }\n\n      let config: T;\n\n      if (typeof entityConf === \"string\") {\n        // tslint:disable-next-line:no-object-literal-type-assertion\n        config = { entity: entityConf } as T;\n      } else if (typeof entityConf === \"object\" && !Array.isArray(entityConf)) {\n        if (!entityConf.entity) {\n          throw new Error(\n            `Entity object at position ${index} is missing entity field.`\n          );\n        }\n        config = entityConf as T;\n      } else {\n        throw new Error(`Invalid entity specified at position ${index}.`);\n      }\n\n      if (!isValidEntityId(config.entity)) {\n        throw new Error(\n          `Invalid entity ID at position ${index}: ${config.entity}`\n        );\n      }\n\n      return config;\n    }\n  );\n};\n","import { HomeAssistant } from \"../../../types\";\n\nexport interface Condition {\n  entity: string;\n  state?: string;\n  state_not?: string;\n}\n\nexport function checkConditionsMet(\n  conditions: Condition[],\n  hass: HomeAssistant\n): boolean {\n  return conditions.every((c) => {\n    const state = hass.states[c.entity]\n      ? hass!.states[c.entity].state\n      : \"unavailable\";\n\n    return c.state ? state === c.state : state !== c.state_not;\n  });\n}\n\nexport function validateConditionalConfig(conditions: Condition[]): boolean {\n  return conditions.every(\n    (c) => ((c.entity && (c.state || c.state_not)) as unknown) as boolean\n  );\n}\n","import {\n  html,\n  LitElement,\n  PropertyValues,\n  TemplateResult,\n  customElement,\n  property,\n  css,\n  CSSResult,\n} from \"lit-element\";\nimport { PaperToggleButtonElement } from \"@polymer/paper-toggle-button/paper-toggle-button\";\n\nimport { DOMAINS_TOGGLE } from \"../../../common/const\";\nimport { turnOnOffEntities } from \"../common/entity/turn-on-off-entities\";\nimport { HomeAssistant } from \"../../../types\";\nimport { forwardHaptic } from \"../../../data/haptics\";\n\n@customElement(\"hui-entities-toggle\")\nclass HuiEntitiesToggle extends LitElement {\n  @property() public entities?: string[];\n\n  @property() protected hass?: HomeAssistant;\n\n  @property() private _toggleEntities?: string[];\n\n  public updated(changedProperties: PropertyValues): void {\n    super.updated(changedProperties);\n    if (changedProperties.has(\"entities\")) {\n      this._toggleEntities = this.entities!.filter(\n        (entityId) =>\n          entityId in this.hass!.states &&\n          DOMAINS_TOGGLE.has(entityId.split(\".\", 1)[0])\n      );\n    }\n  }\n\n  protected render(): TemplateResult | void {\n    if (!this._toggleEntities) {\n      return html``;\n    }\n\n    return html`\n      <paper-toggle-button\n        ?checked=\"${this._toggleEntities!.some((entityId) => {\n          const stateObj = this.hass!.states[entityId];\n          return stateObj && stateObj.state === \"on\";\n        })}\"\n        @change=\"${this._callService}\"\n      ></paper-toggle-button>\n    `;\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      :host {\n        width: 38px;\n        display: block;\n      }\n      paper-toggle-button {\n        cursor: pointer;\n        --paper-toggle-button-label-spacing: 0;\n        padding: 13px 5px;\n        margin: -4px -5px;\n      }\n    `;\n  }\n\n  private _callService(ev: MouseEvent): void {\n    forwardHaptic(\"light\");\n    const turnOn = (ev.target as PaperToggleButtonElement).checked;\n    turnOnOffEntities(this.hass!, this._toggleEntities!, turnOn!);\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-entities-toggle\": HuiEntitiesToggle;\n  }\n}\n","import computeStateName from \"../../../common/entity/compute_state_name\";\nimport {\n  LitElement,\n  html,\n  css,\n  CSSResult,\n  PropertyValues,\n  property,\n  TemplateResult,\n} from \"lit-element\";\n\nimport \"../../../components/entity/state-badge\";\nimport \"../../../components/ha-relative-time\";\nimport \"../../../components/ha-icon\";\nimport \"../components/hui-warning\";\n\nimport { HomeAssistant } from \"../../../types\";\nimport { computeRTL } from \"../../../common/util/compute_rtl\";\nimport { EntitiesCardEntityConfig } from \"../cards/types\";\n\nclass HuiGenericEntityRow extends LitElement {\n  @property() public hass?: HomeAssistant;\n\n  @property() public config?: EntitiesCardEntityConfig;\n\n  @property() public showSecondary: boolean = true;\n\n  protected render(): TemplateResult | void {\n    if (!this.hass || !this.config) {\n      return html``;\n    }\n    const stateObj = this.config.entity\n      ? this.hass.states[this.config.entity]\n      : undefined;\n\n    if (!stateObj) {\n      return html`\n        <hui-warning\n          >${this.hass.localize(\n            \"ui.panel.lovelace.warning.entity_not_found\",\n            \"entity\",\n            this.config.entity\n          )}</hui-warning\n        >\n      `;\n    }\n\n    return html`\n      <state-badge\n        .stateObj=\"${stateObj}\"\n        .overrideIcon=\"${this.config.icon}\"\n      ></state-badge>\n      <div class=\"flex\">\n        <div class=\"info\">\n          ${this.config.name || computeStateName(stateObj)}\n          <div class=\"secondary\">\n            ${!this.showSecondary\n              ? html`\n                  <slot name=\"secondary\"></slot>\n                `\n              : this.config.secondary_info === \"entity-id\"\n              ? stateObj.entity_id\n              : this.config.secondary_info === \"last-changed\"\n              ? html`\n                  <ha-relative-time\n                    .hass=\"${this.hass}\"\n                    .datetime=\"${stateObj.last_changed}\"\n                  ></ha-relative-time>\n                `\n              : \"\"}\n          </div>\n        </div>\n\n        <slot></slot>\n      </div>\n    `;\n  }\n\n  protected updated(changedProps: PropertyValues): void {\n    super.updated(changedProps);\n    if (changedProps.has(\"hass\")) {\n      this.toggleAttribute(\"rtl\", computeRTL(this.hass!));\n    }\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      :host {\n        display: flex;\n        align-items: center;\n      }\n      .flex {\n        flex: 1;\n        margin-left: 16px;\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n        min-width: 0;\n      }\n      .info {\n        flex: 1 0 60px;\n      }\n      .info,\n      .info > * {\n        white-space: nowrap;\n        overflow: hidden;\n        text-overflow: ellipsis;\n      }\n      .flex ::slotted(*) {\n        margin-left: 8px;\n        min-width: 0;\n      }\n      .flex ::slotted([slot=\"secondary\"]) {\n        margin-left: 0;\n      }\n      .secondary,\n      ha-relative-time {\n        display: block;\n        color: var(--secondary-text-color);\n      }\n      state-badge {\n        flex: 0 0 40px;\n      }\n      :host([rtl]) .flex {\n        margin-left: 0;\n        margin-right: 16px;\n      }\n      :host([rtl]) .flex ::slotted(*) {\n        margin-left: 0;\n        margin-right: 8px;\n      }\n    `;\n  }\n}\ncustomElements.define(\"hui-generic-entity-row\", HuiGenericEntityRow);\n","import \"@polymer/paper-toggle-button/paper-toggle-button\";\n\nimport { STATES_OFF } from \"../../../common/const\";\n\nimport parseAspectRatio from \"../../../common/util/parse-aspect-ratio\";\nimport {\n  LitElement,\n  TemplateResult,\n  html,\n  property,\n  CSSResult,\n  css,\n  PropertyValues,\n  query,\n  customElement,\n} from \"lit-element\";\nimport { HomeAssistant, CameraEntity } from \"../../../types\";\nimport { styleMap } from \"lit-html/directives/style-map\";\nimport { classMap } from \"lit-html/directives/class-map\";\nimport { fetchThumbnailUrlWithCache } from \"../../../data/camera\";\n\nconst UPDATE_INTERVAL = 10000;\nconst DEFAULT_FILTER = \"grayscale(100%)\";\n\nexport interface StateSpecificConfig {\n  [state: string]: string;\n}\n\n@customElement(\"hui-image\")\nexport class HuiImage extends LitElement {\n  @property() public hass?: HomeAssistant;\n\n  @property() public entity?: string;\n\n  @property() public image?: string;\n\n  @property() public stateImage?: StateSpecificConfig;\n\n  @property() public cameraImage?: string;\n\n  @property() public cameraView?: \"live\" | \"auto\";\n\n  @property() public aspectRatio?: string;\n\n  @property() public filter?: string;\n\n  @property() public stateFilter?: StateSpecificConfig;\n\n  @property() private _loadError?: boolean;\n\n  @property() private _cameraImageSrc?: string;\n\n  @query(\"img\") private _image!: HTMLImageElement;\n\n  private _lastImageHeight?: number;\n\n  private _cameraUpdater?: number;\n\n  private _attached?: boolean;\n\n  public connectedCallback(): void {\n    super.connectedCallback();\n    this._attached = true;\n    if (this.cameraImage && this.cameraView !== \"live\") {\n      this._startUpdateCameraInterval();\n    }\n  }\n\n  public disconnectedCallback(): void {\n    super.disconnectedCallback();\n    this._attached = false;\n    this._stopUpdateCameraInterval();\n  }\n\n  protected render(): TemplateResult | void {\n    const ratio = this.aspectRatio ? parseAspectRatio(this.aspectRatio) : null;\n    const stateObj =\n      this.hass && this.entity ? this.hass.states[this.entity] : undefined;\n    const state = stateObj ? stateObj.state : \"unavailable\";\n\n    // Figure out image source to use\n    let imageSrc: string | undefined;\n    let cameraObj: CameraEntity | undefined;\n    // Track if we are we using a fallback image, used for filter.\n    let imageFallback = !this.stateImage;\n\n    if (this.cameraImage) {\n      if (this.cameraView === \"live\") {\n        cameraObj =\n          this.hass && (this.hass.states[this.cameraImage] as CameraEntity);\n      } else {\n        imageSrc = this._cameraImageSrc;\n      }\n    } else if (this.stateImage) {\n      const stateImage = this.stateImage[state];\n\n      if (stateImage) {\n        imageSrc = stateImage;\n      } else {\n        imageSrc = this.image;\n        imageFallback = true;\n      }\n    } else {\n      imageSrc = this.image;\n    }\n\n    // Figure out filter to use\n    let filter = this.filter || \"\";\n\n    if (this.stateFilter && this.stateFilter[state]) {\n      filter = this.stateFilter[state];\n    }\n\n    if (!filter && this.entity) {\n      const isOff = !stateObj || STATES_OFF.includes(state);\n      filter = isOff && imageFallback ? DEFAULT_FILTER : \"\";\n    }\n\n    return html`\n      <div\n        style=${styleMap({\n          paddingBottom:\n            ratio && ratio.w > 0 && ratio.h > 0\n              ? `${((100 * ratio.h) / ratio.w).toFixed(2)}%`\n              : \"\",\n        })}\n        class=${classMap({\n          ratio: Boolean(ratio && ratio.w > 0 && ratio.h > 0),\n        })}\n      >\n        ${this.cameraImage && this.cameraView === \"live\"\n          ? html`\n              <ha-camera-stream\n                .hass=\"${this.hass}\"\n                .stateObj=\"${cameraObj}\"\n              ></ha-camera-stream>\n            `\n          : html`\n              <img\n                id=\"image\"\n                src=${imageSrc}\n                @error=${this._onImageError}\n                @load=${this._onImageLoad}\n                style=${styleMap({\n                  filter,\n                  display: this._loadError ? \"none\" : \"block\",\n                })}\n              />\n            `}\n        <div\n          id=\"brokenImage\"\n          style=${styleMap({\n            height: `${this._lastImageHeight || \"100\"}px`,\n            display: this._loadError ? \"block\" : \"none\",\n          })}\n        ></div>\n      </div>\n    `;\n  }\n\n  protected updated(changedProps: PropertyValues): void {\n    if (changedProps.has(\"cameraImage\") && this.cameraView !== \"live\") {\n      this._updateCameraImageSrc();\n      this._startUpdateCameraInterval();\n      return;\n    }\n  }\n\n  private _startUpdateCameraInterval(): void {\n    this._stopUpdateCameraInterval();\n    if (this.cameraImage && this._attached) {\n      this._cameraUpdater = window.setInterval(\n        () => this._updateCameraImageSrc(),\n        UPDATE_INTERVAL\n      );\n    }\n  }\n\n  private _stopUpdateCameraInterval(): void {\n    if (this._cameraUpdater) {\n      clearInterval(this._cameraUpdater);\n    }\n  }\n\n  private _onImageError(): void {\n    this._loadError = true;\n  }\n\n  private async _onImageLoad(): Promise<void> {\n    this._loadError = false;\n    await this.updateComplete;\n    this._lastImageHeight = this._image.offsetHeight;\n  }\n\n  private async _updateCameraImageSrc(): Promise<void> {\n    if (!this.hass || !this.cameraImage) {\n      return;\n    }\n\n    const cameraState = this.hass.states[this.cameraImage] as\n      | CameraEntity\n      | undefined;\n\n    if (!cameraState) {\n      this._onImageError();\n      return;\n    }\n\n    this._cameraImageSrc = await fetchThumbnailUrlWithCache(\n      this.hass,\n      this.cameraImage\n    );\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      img {\n        display: block;\n        height: auto;\n        transition: filter 0.2s linear;\n        width: 100%;\n      }\n\n      .ratio {\n        position: relative;\n        width: 100%;\n        height: 0;\n      }\n\n      .ratio img,\n      .ratio div {\n        position: absolute;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n      }\n\n      #brokenImage {\n        background: grey url(\"/static/images/image-broken.svg\") center/36px\n          no-repeat;\n      }\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-image\": HuiImage;\n  }\n}\n","import {\n  html,\n  LitElement,\n  PropertyValues,\n  TemplateResult,\n  customElement,\n  property,\n} from \"lit-element\";\n\nimport { HomeAssistant } from \"../../../types\";\nimport format_date from \"../../../common/datetime/format_date\";\nimport format_date_time from \"../../../common/datetime/format_date_time\";\nimport format_time from \"../../../common/datetime/format_time\";\nimport relativeTime from \"../../../common/datetime/relative_time\";\n\nconst FORMATS: { [key: string]: (ts: Date, lang: string) => string } = {\n  date: format_date,\n  datetime: format_date_time,\n  time: format_time,\n};\nconst INTERVAL_FORMAT = [\"relative\", \"total\"];\n\n@customElement(\"hui-timestamp-display\")\nclass HuiTimestampDisplay extends LitElement {\n  @property() public hass?: HomeAssistant;\n\n  @property() public ts?: Date;\n\n  @property() public format?:\n    | \"relative\"\n    | \"total\"\n    | \"date\"\n    | \"datetime\"\n    | \"time\";\n\n  @property() private _relative?: string;\n\n  private _connected?: boolean;\n\n  private _interval?: number;\n\n  public connectedCallback(): void {\n    super.connectedCallback();\n    this._connected = true;\n    this._startInterval();\n  }\n\n  public disconnectedCallback(): void {\n    super.disconnectedCallback();\n    this._connected = false;\n    this._clearInterval();\n  }\n\n  protected render(): TemplateResult | void {\n    if (!this.ts || !this.hass) {\n      return html``;\n    }\n\n    if (isNaN(this.ts.getTime())) {\n      return html`\n        Invalid date\n      `;\n    }\n\n    const format = this._format;\n\n    if (INTERVAL_FORMAT.includes(format)) {\n      return html`\n        ${this._relative}\n      `;\n    }\n    if (format in FORMATS) {\n      return html`\n        ${FORMATS[format](this.ts, this.hass.language)}\n      `;\n    }\n    return html`\n      Invalid format\n    `;\n  }\n\n  protected updated(changedProperties: PropertyValues): void {\n    super.updated(changedProperties);\n    if (!changedProperties.has(\"format\") || !this._connected) {\n      return;\n    }\n\n    if (INTERVAL_FORMAT.includes(\"relative\")) {\n      this._startInterval();\n    } else {\n      this._clearInterval();\n    }\n  }\n\n  private get _format(): string {\n    return this.format || \"relative\";\n  }\n\n  private _startInterval(): void {\n    this._clearInterval();\n    if (this._connected && INTERVAL_FORMAT.includes(this._format)) {\n      this._updateRelative();\n      this._interval = window.setInterval(() => this._updateRelative(), 1000);\n    }\n  }\n\n  private _clearInterval(): void {\n    if (this._interval) {\n      clearInterval(this._interval);\n      this._interval = undefined;\n    }\n  }\n\n  private _updateRelative(): void {\n    if (this.ts && this.hass!.localize) {\n      this._relative =\n        this._format === \"relative\"\n          ? relativeTime(this.ts, this.hass!.localize)\n          : (this._relative = relativeTime(new Date(), this.hass!.localize, {\n              compareTime: this.ts,\n              includeTense: false,\n            }));\n    }\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-timestamp-display\": HuiTimestampDisplay;\n  }\n}\n","import {\n  html,\n  LitElement,\n  TemplateResult,\n  CSSResult,\n  css,\n  customElement,\n  property,\n} from \"lit-element\";\n\nimport \"../../../components/ha-icon\";\n\n@customElement(\"hui-warning-element\")\nexport class HuiWarningElement extends LitElement {\n  @property() public label?: string;\n\n  protected render(): TemplateResult | void {\n    return html`\n      <ha-icon icon=\"hass:alert\" .title=\"${this.label}\"></ha-icon>\n    `;\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      ha-icon {\n        color: #fce588;\n      }\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-warning-element\": HuiWarningElement;\n  }\n}\n","import {\n  html,\n  LitElement,\n  TemplateResult,\n  CSSResult,\n  css,\n  customElement,\n} from \"lit-element\";\n\n@customElement(\"hui-warning\")\nexport class HuiWarning extends LitElement {\n  protected render(): TemplateResult | void {\n    return html`\n      <slot></slot>\n    `;\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      :host {\n        display: block;\n        color: black;\n        background-color: #fce588;\n        padding: 8px;\n      }\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-warning\": HuiWarning;\n  }\n}\n","import {\n  html,\n  LitElement,\n  TemplateResult,\n  property,\n  customElement,\n} from \"lit-element\";\nimport \"@material/mwc-button\";\n\nimport \"./hui-notification-item-template\";\n\nimport { HomeAssistant } from \"../../../../types\";\nimport { fireEvent } from \"../../../../common/dom/fire_event\";\nimport { HassNotification } from \"./types\";\n\n@customElement(\"hui-configurator-notification-item\")\nexport class HuiConfiguratorNotificationItem extends LitElement {\n  @property() public hass?: HomeAssistant;\n\n  @property() public notification?: HassNotification;\n\n  protected render(): TemplateResult | void {\n    if (!this.hass || !this.notification) {\n      return html``;\n    }\n\n    return html`\n      <hui-notification-item-template>\n        <span slot=\"header\">${this.hass.localize(\"domain.configurator\")}</span>\n\n        <div>\n          ${this.hass.localize(\n            \"ui.notification_drawer.click_to_configure\",\n            \"entity\",\n            this.notification.attributes.friendly_name\n          )}\n        </div>\n\n        <mwc-button slot=\"actions\" @click=\"${this._handleClick}\"\n          >${this.hass.localize(\n            `state.configurator.${this.notification.state}`\n          )}</mwc-button\n        >\n      </hui-notification-item-template>\n    `;\n  }\n\n  private _handleClick(): void {\n    fireEvent(this, \"hass-more-info\", {\n      entityId: this.notification!.entity_id,\n    });\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-configurator-notification-item\": HuiConfiguratorNotificationItem;\n  }\n}\n","import \"@material/mwc-button\";\nimport \"@polymer/paper-icon-button/paper-icon-button\";\nimport \"@polymer/app-layout/app-toolbar/app-toolbar\";\n\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport \"./hui-notification-item\";\nimport \"../../../../components/ha-paper-icon-button-next\";\n\nimport { EventsMixin } from \"../../../../mixins/events-mixin\";\nimport LocalizeMixin from \"../../../../mixins/localize-mixin\";\nimport { computeRTL } from \"../../../../common/util/compute_rtl\";\n\n/*\n * @appliesMixin EventsMixin\n * @appliesMixin LocalizeMixin\n */\nexport class HuiNotificationDrawer extends EventsMixin(\n  LocalizeMixin(PolymerElement)\n) {\n  static get template() {\n    return html`\n    <style include=\"paper-material-styles\">\n      :host {\n        bottom: 0;\n        left: 0;\n        position: absolute;\n        right: 0;\n        top: 0;\n      }\n\n      :host([hidden]) {\n        display: none;\n      }\n\n      .container {\n        align-items: stretch;\n        background: var(--sidebar-background-color, var(--primary-background-color));\n        bottom: 0;\n        box-shadow: var(--paper-material-elevation-1_-_box-shadow);\n        display: flex;\n        flex-direction: column;\n        overflow-y: hidden;\n        position: fixed;\n        top: 0;\n        transition: right .2s ease-in;\n        width: 500px;\n        z-index: 10;\n      }\n\n      :host([rtl]) .container {\n        transition: left .2s ease-in !important;\n      }\n\n      :host(:not(narrow)) .container {\n        right: -500px;\n      }\n\n      :host([rtl]:not(narrow)) .container {\n        left: -500px;\n      }\n\n      :host([narrow]) .container {\n        right: -100%;\n        width: 100%;\n      }\n\n      :host([rtl][narrow]) .container {\n        left: -100%;\n        width: 100%;\n      }\n\n      :host(.open) .container,\n      :host(.open[narrow]) .container {\n        right: 0;\n      }\n\n      :host([rtl].open) .container,\n      :host([rtl].open[narrow]) .container {\n        left: 0;\n      }\n\n      app-toolbar {\n        color: var(--primary-text-color);\n        border-bottom: 1px solid var(--divider-color);\n        background-color: var(--primary-background-color);\n        min-height: 64px;\n        width: calc(100% - 32px);\n        z-index: 11;\n      }\n\n      .overlay {\n        display: none;\n      }\n\n      :host(.open) .overlay {\n        bottom: 0;\n        display: block;\n        left: 0;\n        position: absolute;\n        right: 0;\n        top: 0;\n        z-index: 5;\n      }\n\n      .notifications {\n        overflow-y: auto;\n        padding-top: 16px;\n      }\n\n      .notification {\n        padding: 0 16px 16px;\n      }\n\n      .empty {\n        padding: 16px;\n        text-align: center;\n      }\n    </style>\n    <div class=\"overlay\" on-click=\"_closeDrawer\"></div>\n    <div class=\"container\">\n      <app-toolbar>\n        <div main-title>[[localize('ui.notification_drawer.title')]]</div>\n        <ha-paper-icon-button-next on-click=\"_closeDrawer\"></paper-icon-button>\n      </app-toolbar>\n      <div class=\"notifications\">\n        <template is=\"dom-if\" if=\"[[!_empty(notifications)]]\">\n          <dom-repeat items=\"[[notifications]]\">\n            <template>\n              <div class=\"notification\">\n                <hui-notification-item hass=\"[[hass]]\" notification=\"[[item]]\"></hui-notification-item>\n              </div>\n            </template>\n          </dom-repeat>\n        </template>\n        <template is=\"dom-if\" if=\"[[_empty(notifications)]]\">\n          <div class=\"empty\">[[localize('ui.notification_drawer.empty')]]<div>\n        </template>\n      </div>\n    </div>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      narrow: {\n        type: Boolean,\n        reflectToAttribute: true,\n      },\n      open: {\n        type: Boolean,\n        notify: true,\n        observer: \"_openChanged\",\n      },\n      hidden: {\n        type: Boolean,\n        value: true,\n        reflectToAttribute: true,\n      },\n      notifications: {\n        type: Array,\n        value: [],\n      },\n      rtl: {\n        type: Boolean,\n        reflectToAttribute: true,\n        computed: \"_computeRTL(hass)\",\n      },\n    };\n  }\n\n  _closeDrawer(ev) {\n    ev.stopPropagation();\n    this.open = false;\n  }\n\n  _empty(notifications) {\n    return notifications.length === 0;\n  }\n\n  _openChanged(open) {\n    clearTimeout(this._openTimer);\n    if (open) {\n      // Render closed then animate open\n      this.hidden = false;\n      this._openTimer = setTimeout(() => {\n        this.classList.add(\"open\");\n      }, 50);\n    } else {\n      // Animate closed then hide\n      this.classList.remove(\"open\");\n      this._openTimer = setTimeout(() => {\n        this.hidden = true;\n      }, 250);\n    }\n  }\n\n  _computeRTL(hass) {\n    return computeRTL(hass);\n  }\n}\ncustomElements.define(\"hui-notification-drawer\", HuiNotificationDrawer);\n","import {\n  html,\n  LitElement,\n  TemplateResult,\n  customElement,\n  css,\n  CSSResult,\n} from \"lit-element\";\n\nimport \"../../../../components/ha-card\";\n\n@customElement(\"hui-notification-item-template\")\nexport class HuiNotificationItemTemplate extends LitElement {\n  protected render(): TemplateResult | void {\n    return html`\n      <ha-card>\n        <div class=\"header\"><slot name=\"header\"></slot></div>\n        <div class=\"contents\"><slot></slot></div>\n        <div class=\"actions\"><slot name=\"actions\"></slot></div>\n      </ha-card>\n    `;\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      .contents {\n        padding: 16px;\n      }\n\n      ha-card .header {\n        /* start paper-font-headline style */\n        font-family: \"Roboto\", \"Noto\", sans-serif;\n        -webkit-font-smoothing: antialiased; /* OS X subpixel AA bleed bug */\n        text-rendering: optimizeLegibility;\n        font-size: 24px;\n        font-weight: 400;\n        letter-spacing: -0.012em;\n        line-height: 32px;\n        /* end paper-font-headline style */\n\n        color: var(--primary-text-color);\n        padding: 16px 16px 0;\n      }\n\n      .actions {\n        border-top: 1px solid #e8e8e8;\n        padding: 5px 16px;\n      }\n\n      ::slotted(.primary) {\n        color: var(--primary-color);\n      }\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-notification-item-template\": HuiNotificationItemTemplate;\n  }\n}\n","import {\n  LitElement,\n  property,\n  customElement,\n  PropertyValues,\n  TemplateResult,\n  html,\n} from \"lit-element\";\n\nimport \"./hui-configurator-notification-item\";\nimport \"./hui-persistent-notification-item\";\n\nimport { HomeAssistant } from \"../../../../types\";\nimport { HassNotification } from \"./types\";\n\n@customElement(\"hui-notification-item\")\nexport class HuiNotificationItem extends LitElement {\n  @property() public hass?: HomeAssistant;\n\n  @property() public notification?: HassNotification;\n\n  protected shouldUpdate(changedProps: PropertyValues): boolean {\n    if (!this.hass || !this.notification || changedProps.has(\"notification\")) {\n      return true;\n    }\n\n    return false;\n  }\n\n  protected render(): TemplateResult | void {\n    if (!this.hass || !this.notification) {\n      return html``;\n    }\n\n    return this.notification.entity_id\n      ? html`\n          <hui-configurator-notification-item\n            .hass=\"${this.hass}\"\n            .notification=\"${this.notification}\"\n          ></hui-configurator-notification-item>\n        `\n      : html`\n          <hui-persistent-notification-item\n            .hass=\"${this.hass}\"\n            .notification=\"${this.notification}\"\n          ></hui-persistent-notification-item>\n        `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-notification-item\": HuiNotificationItem;\n  }\n}\n","import {\n  html,\n  LitElement,\n  TemplateResult,\n  css,\n  CSSResult,\n  property,\n} from \"lit-element\";\nimport \"@polymer/paper-icon-button/paper-icon-button\";\nimport { fireEvent } from \"../../../../common/dom/fire_event\";\n\ndeclare global {\n  // tslint:disable-next-line\n  interface HASSDomEvents {\n    \"opened-changed\": { value: boolean };\n  }\n}\n\nclass HuiNotificationsButton extends LitElement {\n  @property() public notifications?: string[];\n  @property() public opened?: boolean;\n\n  protected render(): TemplateResult | void {\n    return html`\n      <paper-icon-button\n        icon=\"hass:bell\"\n        @click=\"${this._clicked}\"\n      ></paper-icon-button>\n      ${this.notifications && this.notifications.length > 0\n        ? html`\n            <span class=\"indicator\">\n              <div>${this.notifications.length}</div>\n            </span>\n          `\n        : \"\"}\n    `;\n  }\n\n  static get styles(): CSSResult[] {\n    return [\n      css`\n        :host {\n          position: relative;\n        }\n\n        .indicator {\n          position: absolute;\n          top: 0px;\n          right: -3px;\n          width: 20px;\n          height: 20px;\n          border-radius: 50%;\n          background: var(--accent-color);\n          pointer-events: none;\n          z-index: 1;\n        }\n\n        .indicator > div {\n          right: 7px;\n          top: 3px;\n          position: absolute;\n          font-size: 0.55em;\n        }\n      `,\n    ];\n  }\n\n  private _clicked() {\n    this.opened = true;\n    fireEvent(this, \"opened-changed\", { value: this.opened });\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-notifications-button\": HuiNotificationsButton;\n  }\n}\n\ncustomElements.define(\"hui-notifications-button\", HuiNotificationsButton);\n","import {\n  html,\n  LitElement,\n  TemplateResult,\n  property,\n  customElement,\n  css,\n  CSSResult,\n} from \"lit-element\";\nimport \"@material/mwc-button\";\nimport \"@polymer/paper-tooltip/paper-tooltip\";\n\nimport \"../../../../components/ha-relative-time\";\nimport \"../../../../components/ha-markdown\";\nimport \"./hui-notification-item-template\";\n\nimport { HomeAssistant } from \"../../../../types\";\nimport { HassNotification } from \"./types\";\n\n@customElement(\"hui-persistent-notification-item\")\nexport class HuiPersistentNotificationItem extends LitElement {\n  @property() public hass?: HomeAssistant;\n\n  @property() public notification?: HassNotification;\n\n  protected render(): TemplateResult | void {\n    if (!this.hass || !this.notification) {\n      return html``;\n    }\n\n    return html`\n      <hui-notification-item-template>\n        <span slot=\"header\">${this._computeTitle(this.notification)}</span>\n\n        <ha-markdown content=\"${this.notification.message}\"></ha-markdown>\n\n        <div class=\"time\">\n          <span>\n            <ha-relative-time\n              .hass=\"${this.hass}\"\n              .datetime=\"${this.notification.created_at}\"\n            ></ha-relative-time>\n            <paper-tooltip\n              >${this._computeTooltip(\n                this.hass,\n                this.notification\n              )}</paper-tooltip\n            >\n          </span>\n        </div>\n\n        <mwc-button slot=\"actions\" @click=\"${this._handleDismiss}\"\n          >${this.hass.localize(\n            \"ui.card.persistent_notification.dismiss\"\n          )}</mwc-button\n        >\n      </hui-notification-item-template>\n    `;\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      .time {\n        display: flex;\n        justify-content: flex-end;\n        margin-top: 6px;\n      }\n      ha-relative-time {\n        color: var(--secondary-text-color);\n      }\n      a {\n        color: var(--primary-color);\n      }\n    `;\n  }\n\n  private _handleDismiss(): void {\n    this.hass!.callService(\"persistent_notification\", \"dismiss\", {\n      notification_id: this.notification!.notification_id,\n    });\n  }\n\n  private _computeTitle(notification: HassNotification): string | undefined {\n    return notification.title || notification.notification_id;\n  }\n\n  private _computeTooltip(\n    hass: HomeAssistant,\n    notification: HassNotification\n  ): string | undefined {\n    if (!hass || !notification) {\n      return undefined;\n    }\n\n    const d = new Date(notification.created_at!);\n    return d.toLocaleDateString(hass.language, {\n      year: \"numeric\",\n      month: \"short\",\n      day: \"numeric\",\n      minute: \"numeric\",\n      hour: \"numeric\",\n    });\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-persistent-notification-item\": HuiPersistentNotificationItem;\n  }\n}\n","import { fireEvent } from \"../../../../common/dom/fire_event\";\nimport { Lovelace } from \"../../types\";\n\ndeclare global {\n  // for fire event\n  interface HASSDomEvents {\n    \"show-edit-card\": EditCardDialogParams;\n  }\n}\n\nlet registeredDialog = false;\nconst dialogShowEvent = \"show-edit-card\";\nconst dialogTag = \"hui-dialog-edit-card\";\n\nexport interface EditCardDialogParams {\n  lovelace: Lovelace;\n  path: [number] | [number, number];\n}\n\nconst registerEditCardDialog = (element: HTMLElement): Event =>\n  fireEvent(element, \"register-dialog\", {\n    dialogShowEvent,\n    dialogTag,\n    dialogImport: () =>\n      import(/* webpackChunkName: \"hui-dialog-edit-card\" */ \"./hui-dialog-edit-card\"),\n  });\n\nexport const showEditCardDialog = (\n  element: HTMLElement,\n  editCardDialogParams: EditCardDialogParams\n): void => {\n  if (!registeredDialog) {\n    registeredDialog = true;\n    registerEditCardDialog(element);\n  }\n  fireEvent(element, dialogShowEvent, editCardDialogParams);\n};\n","import {\n  LovelaceConfig,\n  LovelaceCardConfig,\n  LovelaceViewConfig,\n} from \"../../../data/lovelace\";\n\nexport const addCard = (\n  config: LovelaceConfig,\n  path: [number],\n  cardConfig: LovelaceCardConfig\n): LovelaceConfig => {\n  const [viewIndex] = path;\n  const views: LovelaceViewConfig[] = [];\n\n  config.views.forEach((viewConf, index) => {\n    if (index !== viewIndex) {\n      views.push(config.views[index]);\n      return;\n    }\n\n    const cards = viewConf.cards\n      ? [...viewConf.cards, cardConfig]\n      : [cardConfig];\n\n    views.push({\n      ...viewConf,\n      cards,\n    });\n  });\n\n  return {\n    ...config,\n    views,\n  };\n};\n\nexport const replaceCard = (\n  config: LovelaceConfig,\n  path: [number, number],\n  cardConfig: LovelaceCardConfig\n): LovelaceConfig => {\n  const [viewIndex, cardIndex] = path;\n  const views: LovelaceViewConfig[] = [];\n\n  config.views.forEach((viewConf, index) => {\n    if (index !== viewIndex) {\n      views.push(config.views[index]);\n      return;\n    }\n\n    views.push({\n      ...viewConf,\n      cards: (viewConf.cards || []).map((origConf, ind) =>\n        ind === cardIndex ? cardConfig : origConf\n      ),\n    });\n  });\n\n  return {\n    ...config,\n    views,\n  };\n};\n\nexport const deleteCard = (\n  config: LovelaceConfig,\n  path: [number, number]\n): LovelaceConfig => {\n  const [viewIndex, cardIndex] = path;\n  const views: LovelaceViewConfig[] = [];\n\n  config.views.forEach((viewConf, index) => {\n    if (index !== viewIndex) {\n      views.push(config.views[index]);\n      return;\n    }\n\n    views.push({\n      ...viewConf,\n      cards: (viewConf.cards || []).filter(\n        (_origConf, ind) => ind !== cardIndex\n      ),\n    });\n  });\n\n  return {\n    ...config,\n    views,\n  };\n};\n\nexport const swapCard = (\n  config: LovelaceConfig,\n  path1: [number, number],\n  path2: [number, number]\n): LovelaceConfig => {\n  const card1 = config.views[path1[0]].cards![path1[1]];\n  const card2 = config.views[path2[0]].cards![path2[1]];\n\n  const origView1 = config.views[path1[0]];\n  const newView1 = {\n    ...origView1,\n    cards: origView1.cards!.map((origCard, index) =>\n      index === path1[1] ? card2 : origCard\n    ),\n  };\n\n  const origView2 = path1[0] === path2[0] ? newView1 : config.views[path2[0]];\n  const newView2 = {\n    ...origView2,\n    cards: origView2.cards!.map((origCard, index) =>\n      index === path2[1] ? card1 : origCard\n    ),\n  };\n\n  return {\n    ...config,\n    views: config.views.map((origView, index) =>\n      index === path2[0] ? newView2 : index === path1[0] ? newView1 : origView\n    ),\n  };\n};\n\nexport const moveCard = (\n  config: LovelaceConfig,\n  fromPath: [number, number],\n  toPath: [number]\n): LovelaceConfig => {\n  if (fromPath[0] === toPath[0]) {\n    throw new Error(\"You can not move a card to the view it is in.\");\n  }\n  const fromView = config.views[fromPath[0]];\n  const card = fromView.cards![fromPath[1]];\n\n  const newView1 = {\n    ...fromView,\n    cards: (fromView.cards || []).filter(\n      (_origConf, ind) => ind !== fromPath[1]\n    ),\n  };\n\n  const toView = config.views[toPath[0]];\n  const cards = toView.cards ? [...toView.cards, card] : [card];\n\n  const newView2 = {\n    ...toView,\n    cards,\n  };\n\n  return {\n    ...config,\n    views: config.views.map((origView, index) =>\n      index === toPath[0]\n        ? newView2\n        : index === fromPath[0]\n        ? newView1\n        : origView\n    ),\n  };\n};\n\nexport const addView = (\n  config: LovelaceConfig,\n  viewConfig: LovelaceViewConfig\n): LovelaceConfig => ({\n  ...config,\n  views: config.views.concat(viewConfig),\n});\n\nexport const replaceView = (\n  config: LovelaceConfig,\n  viewIndex: number,\n  viewConfig: LovelaceViewConfig\n): LovelaceConfig => ({\n  ...config,\n  views: config.views.map((origView, index) =>\n    index === viewIndex ? viewConfig : origView\n  ),\n});\n\nexport const swapView = (\n  config: LovelaceConfig,\n  path1: number,\n  path2: number\n): LovelaceConfig => {\n  const view1 = config.views[path1];\n  const view2 = config.views[path2];\n\n  return {\n    ...config,\n    views: config.views.map((origView, index) =>\n      index === path2 ? view1 : index === path1 ? view2 : origView\n    ),\n  };\n};\n\nexport const deleteView = (\n  config: LovelaceConfig,\n  viewIndex: number\n): LovelaceConfig => ({\n  ...config,\n  views: config.views.filter((_origView, index) => index !== viewIndex),\n});\n","import { fireEvent } from \"../../../../common/dom/fire_event\";\nimport { Lovelace } from \"../../types\";\n\ndeclare global {\n  // for fire event\n  interface HASSDomEvents {\n    \"show-edit-lovelace\": Lovelace;\n  }\n}\n\nlet registeredDialog = false;\nconst dialogShowEvent = \"show-edit-lovelace\";\nconst dialogTag = \"hui-dialog-edit-lovelace\";\n\nconst registerEditLovelaceDialog = (element: HTMLElement): Event =>\n  fireEvent(element, \"register-dialog\", {\n    dialogShowEvent,\n    dialogTag,\n    dialogImport: () =>\n      import(/* webpackChunkName: \"hui-dialog-edit-lovelace\" */ \"./hui-dialog-edit-lovelace\"),\n  });\n\nexport const showEditLovelaceDialog = (\n  element: HTMLElement,\n  lovelace: Lovelace\n): void => {\n  if (!registeredDialog) {\n    registeredDialog = true;\n    registerEditLovelaceDialog(element);\n  }\n  fireEvent(element, dialogShowEvent, lovelace);\n};\n","import { fireEvent } from \"../../../common/dom/fire_event\";\nimport { Lovelace } from \"../types\";\n\ndeclare global {\n  // for fire event\n  interface HASSDomEvents {\n    \"show-save-config\": SaveDialogParams;\n  }\n}\n\nconst dialogShowEvent = \"show-save-config\";\nconst dialogTag = \"hui-dialog-save-config\";\n\nexport interface SaveDialogParams {\n  lovelace: Lovelace;\n}\n\nlet registeredDialog = false;\n\nexport const showSaveDialog = (\n  element: HTMLElement,\n  saveDialogParams: SaveDialogParams\n) => {\n  if (!registeredDialog) {\n    registeredDialog = true;\n    fireEvent(element, \"register-dialog\", {\n      dialogShowEvent,\n      dialogTag,\n      dialogImport: () =>\n        import(/* webpackChunkName: \"hui-dialog-save-config\" */ \"./hui-dialog-save-config\"),\n    });\n  }\n  fireEvent(element, dialogShowEvent, saveDialogParams);\n};\n","import { HASSDomEvent, fireEvent } from \"../../../../common/dom/fire_event\";\nimport { Lovelace } from \"../../types\";\n\ndeclare global {\n  // for fire event\n  interface HASSDomEvents {\n    \"reload-lovelace\": undefined;\n    \"show-edit-view\": EditViewDialogParams;\n  }\n  // for add event listener\n  interface HTMLElementEventMap {\n    \"reload-lovelace\": HASSDomEvent<undefined>;\n  }\n}\n\nlet registeredDialog = false;\nconst dialogShowEvent = \"show-edit-view\";\nconst dialogTag = \"hui-dialog-edit-view\";\n\nexport interface EditViewDialogParams {\n  lovelace: Lovelace;\n  viewIndex?: number;\n}\n\nconst registerEditViewDialog = (element: HTMLElement): Event =>\n  fireEvent(element, \"register-dialog\", {\n    dialogShowEvent,\n    dialogTag,\n    dialogImport: () =>\n      import(/* webpackChunkName: \"hui-dialog-edit-view\" */ \"./hui-dialog-edit-view\"),\n  });\n\nexport const showEditViewDialog = (\n  element: HTMLElement,\n  editViewDialogParams: EditViewDialogParams\n): void => {\n  if (!registeredDialog) {\n    registeredDialog = true;\n    registerEditViewDialog(element);\n  }\n  fireEvent(element, dialogShowEvent, editViewDialogParams);\n};\n","import {\n  checkConditionsMet,\n  validateConditionalConfig,\n} from \"../../lovelace/common/validate-condition\";\nimport { createStyledHuiElement } from \"../cards/picture-elements/create-styled-hui-element\";\nimport {\n  LovelaceElement,\n  LovelaceElementConfig,\n  ConditionalElementConfig,\n} from \"./types\";\nimport { HomeAssistant } from \"../../../types\";\n\nclass HuiConditionalElement extends HTMLElement implements LovelaceElement {\n  public _hass?: HomeAssistant;\n  private _config?: ConditionalElementConfig;\n  private _elements: LovelaceElement[] = [];\n\n  public setConfig(config: ConditionalElementConfig): void {\n    if (\n      !config.conditions ||\n      !Array.isArray(config.conditions) ||\n      !config.elements ||\n      !Array.isArray(config.elements) ||\n      !validateConditionalConfig(config.conditions)\n    ) {\n      throw new Error(\"Error in card configuration.\");\n    }\n\n    if (this._elements.length > 0) {\n      this._elements.map((el: LovelaceElement) => {\n        if (el.parentElement) {\n          el.parentElement.removeChild(el);\n        }\n      });\n\n      this._elements = [];\n    }\n\n    this._config = config;\n\n    this._config.elements.map((elementConfig: LovelaceElementConfig) => {\n      this._elements.push(createStyledHuiElement(elementConfig));\n    });\n\n    this.updateElements();\n  }\n\n  set hass(hass: HomeAssistant) {\n    this._hass = hass;\n\n    this.updateElements();\n  }\n\n  private updateElements() {\n    if (!this._hass || !this._config) {\n      return;\n    }\n\n    const visible = checkConditionsMet(this._config.conditions, this._hass);\n\n    this._elements.map((el: LovelaceElement) => {\n      if (visible) {\n        el.hass = this._hass;\n        if (!el.parentElement) {\n          this.appendChild(el);\n        }\n      } else if (el.parentElement) {\n        el.parentElement.removeChild(el);\n      }\n    });\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-conditional-element\": HuiConditionalElement;\n  }\n}\n\ncustomElements.define(\"hui-conditional-element\", HuiConditionalElement);\n","import {\n  html,\n  LitElement,\n  TemplateResult,\n  property,\n  css,\n  CSSResult,\n  customElement,\n} from \"lit-element\";\n\nimport \"../../../components/ha-icon\";\n\nimport { computeTooltip } from \"../common/compute-tooltip\";\nimport { handleClick } from \"../common/handle-click\";\nimport { longPress } from \"../common/directives/long-press-directive\";\nimport { LovelaceElement, IconElementConfig } from \"./types\";\nimport { HomeAssistant } from \"../../../types\";\n\n@customElement(\"hui-icon-element\")\nexport class HuiIconElement extends LitElement implements LovelaceElement {\n  public hass?: HomeAssistant;\n  @property() private _config?: IconElementConfig;\n\n  public setConfig(config: IconElementConfig): void {\n    if (!config.icon) {\n      throw Error(\"Invalid Configuration: 'icon' required\");\n    }\n\n    this._config = config;\n  }\n\n  protected render(): TemplateResult | void {\n    if (!this._config || !this.hass) {\n      return html``;\n    }\n\n    return html`\n      <ha-icon\n        .icon=\"${this._config.icon}\"\n        .title=\"${computeTooltip(this.hass, this._config)}\"\n        @ha-click=\"${this._handleTap}\"\n        @ha-hold=\"${this._handleHold}\"\n        .longPress=\"${longPress()}\"\n      ></ha-icon>\n    `;\n  }\n\n  private _handleTap(): void {\n    handleClick(this, this.hass!, this._config!, false);\n  }\n\n  private _handleHold(): void {\n    handleClick(this, this.hass!, this._config!, true);\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      :host {\n        cursor: pointer;\n      }\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-icon-element\": HuiIconElement;\n  }\n}\n","import {\n  html,\n  LitElement,\n  TemplateResult,\n  property,\n  customElement,\n  css,\n  CSSResult,\n} from \"lit-element\";\n\nimport \"../components/hui-image\";\n\nimport { computeTooltip } from \"../common/compute-tooltip\";\nimport { handleClick } from \"../common/handle-click\";\nimport { longPress } from \"../common/directives/long-press-directive\";\nimport { LovelaceElement, ImageElementConfig } from \"./types\";\nimport { HomeAssistant } from \"../../../types\";\n\n@customElement(\"hui-image-element\")\nexport class HuiImageElement extends LitElement implements LovelaceElement {\n  @property() public hass?: HomeAssistant;\n  @property() private _config?: ImageElementConfig;\n\n  public setConfig(config: ImageElementConfig): void {\n    if (!config) {\n      throw Error(\"Error in element configuration\");\n    }\n\n    this.classList.toggle(\n      \"clickable\",\n      config.tap_action && config.tap_action.action !== \"none\"\n    );\n    this._config = config;\n  }\n\n  protected render(): TemplateResult | void {\n    if (!this._config || !this.hass) {\n      return html``;\n    }\n\n    return html`\n      <hui-image\n        .hass=\"${this.hass}\"\n        .entity=\"${this._config.entity}\"\n        .image=\"${this._config.image}\"\n        .stateImage=\"${this._config.state_image}\"\n        .cameraImage=\"${this._config.camera_image}\"\n        .filter=\"${this._config.filter}\"\n        .stateFilter=\"${this._config.state_filter}\"\n        .title=\"${computeTooltip(this.hass, this._config)}\"\n        .aspectRatio=\"${this._config.aspect_ratio}\"\n        @ha-click=\"${this._handleTap}\"\n        @ha-hold=\"${this._handleHold}\"\n        .longPress=\"${longPress()}\"\n      ></hui-image>\n    `;\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      :host(.clickable) {\n        cursor: pointer;\n        overflow: hidden;\n        -webkit-touch-callout: none !important;\n      }\n      hui-image {\n        -webkit-user-select: none !important;\n      }\n    `;\n  }\n\n  private _handleTap(): void {\n    handleClick(this, this.hass!, this._config!, false);\n  }\n\n  private _handleHold(): void {\n    handleClick(this, this.hass!, this._config!, true);\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-image-element\": HuiImageElement;\n  }\n}\n","import {\n  html,\n  LitElement,\n  TemplateResult,\n  property,\n  customElement,\n  CSSResult,\n  css,\n} from \"lit-element\";\n\nimport \"../../../components/buttons/ha-call-service-button\";\n\nimport { LovelaceElement, ServiceButtonElementConfig } from \"./types\";\nimport { HomeAssistant } from \"../../../types\";\n\n@customElement(\"hui-service-button-element\")\nexport class HuiServiceButtonElement extends LitElement\n  implements LovelaceElement {\n  public hass?: HomeAssistant;\n  @property() private _config?: ServiceButtonElementConfig;\n  private _domain?: string;\n  private _service?: string;\n\n  static get properties() {\n    return { _config: {} };\n  }\n\n  public setConfig(config: ServiceButtonElementConfig): void {\n    if (!config || !config.service) {\n      throw Error(\"Invalid Configuration: 'service' required\");\n    }\n\n    [this._domain, this._service] = config.service.split(\".\", 2);\n\n    if (!this._domain) {\n      throw Error(\"Invalid Configuration: 'service' does not have a domain\");\n    }\n\n    if (!this._service) {\n      throw Error(\n        \"Invalid Configuration: 'service' does not have a service name\"\n      );\n    }\n\n    this._config = config;\n  }\n\n  protected render(): TemplateResult | void {\n    if (!this._config || !this.hass) {\n      return html``;\n    }\n\n    return html`\n      <ha-call-service-button\n        .hass=\"${this.hass}\"\n        .domain=\"${this._domain}\"\n        .service=\"${this._service}\"\n        .serviceData=\"${this._config.service_data}\"\n        >${this._config.title}</ha-call-service-button\n      >\n    `;\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      ha-call-service-button {\n        color: var(--primary-color);\n        white-space: nowrap;\n      }\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-service-button-element\": HuiServiceButtonElement;\n  }\n}\n","import {\n  html,\n  LitElement,\n  TemplateResult,\n  customElement,\n  property,\n  PropertyValues,\n} from \"lit-element\";\n\nimport \"../../../components/entity/ha-state-label-badge\";\nimport \"../components/hui-warning-element\";\n\nimport computeStateName from \"../../../common/entity/compute_state_name\";\nimport { LovelaceElement, StateBadgeElementConfig } from \"./types\";\nimport { HomeAssistant } from \"../../../types\";\nimport { hasConfigOrEntityChanged } from \"../common/has-changed\";\n\n@customElement(\"hui-state-badge-element\")\nexport class HuiStateBadgeElement extends LitElement\n  implements LovelaceElement {\n  @property() public hass?: HomeAssistant;\n  @property() private _config?: StateBadgeElementConfig;\n\n  public setConfig(config: StateBadgeElementConfig): void {\n    if (!config.entity) {\n      throw Error(\"Invalid Configuration: 'entity' required\");\n    }\n\n    this._config = config;\n  }\n\n  protected shouldUpdate(changedProps: PropertyValues): boolean {\n    return hasConfigOrEntityChanged(this, changedProps);\n  }\n\n  protected render(): TemplateResult | void {\n    if (!this._config || !this.hass) {\n      return html``;\n    }\n\n    const stateObj = this.hass.states[this._config.entity!];\n\n    if (!stateObj) {\n      return html`\n        <hui-warning-element\n          label=\"${this.hass.localize(\n            \"ui.panel.lovelace.warning.entity_not_found\",\n            \"entity\",\n            this._config.entity\n          )}\"\n        ></hui-warning-element>\n      `;\n    }\n\n    return html`\n      <ha-state-label-badge\n        .hass=\"${this.hass}\"\n        .state=\"${stateObj}\"\n        .title=\"${this._config.title === undefined\n          ? computeStateName(stateObj)\n          : this._config.title === null\n          ? \"\"\n          : this._config.title}\"\n      ></ha-state-label-badge>\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-state-badge-element\": HuiStateBadgeElement;\n  }\n}\n","import {\n  html,\n  LitElement,\n  TemplateResult,\n  customElement,\n  property,\n  css,\n  CSSResult,\n  PropertyValues,\n} from \"lit-element\";\n\nimport \"../../../components/entity/state-badge\";\nimport \"../components/hui-warning-element\";\n\nimport { computeTooltip } from \"../common/compute-tooltip\";\nimport { handleClick } from \"../common/handle-click\";\nimport { longPress } from \"../common/directives/long-press-directive\";\nimport { LovelaceElement, StateIconElementConfig } from \"./types\";\nimport { HomeAssistant } from \"../../../types\";\nimport { hasConfigOrEntityChanged } from \"../common/has-changed\";\n\n@customElement(\"hui-state-icon-element\")\nexport class HuiStateIconElement extends LitElement implements LovelaceElement {\n  @property() public hass?: HomeAssistant;\n  @property() private _config?: StateIconElementConfig;\n\n  public setConfig(config: StateIconElementConfig): void {\n    if (!config.entity) {\n      throw Error(\"Invalid Configuration: 'entity' required\");\n    }\n\n    this._config = config;\n  }\n\n  protected shouldUpdate(changedProps: PropertyValues): boolean {\n    return hasConfigOrEntityChanged(this, changedProps);\n  }\n\n  protected render(): TemplateResult | void {\n    if (!this._config || !this.hass) {\n      return html``;\n    }\n\n    const stateObj = this.hass.states[this._config.entity!];\n\n    if (!stateObj) {\n      return html`\n        <hui-warning-element\n          label=${this.hass.localize(\n            \"ui.panel.lovelace.warning.entity_not_found\",\n            \"entity\",\n            this._config.entity\n          )}\n        ></hui-warning-element>\n      `;\n    }\n\n    return html`\n      <state-badge\n        .stateObj=\"${stateObj}\"\n        .title=\"${computeTooltip(this.hass, this._config)}\"\n        @ha-click=\"${this._handleClick}\"\n        @ha-hold=\"${this._handleHold}\"\n        .longPress=\"${longPress()}\"\n        .overrideIcon=${this._config.icon}\n      ></state-badge>\n    `;\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      :host {\n        cursor: pointer;\n      }\n    `;\n  }\n\n  private _handleClick(): void {\n    handleClick(this, this.hass!, this._config!, false);\n  }\n\n  private _handleHold(): void {\n    handleClick(this, this.hass!, this._config!, true);\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-state-icon-element\": HuiStateIconElement;\n  }\n}\n","import {\n  html,\n  LitElement,\n  TemplateResult,\n  customElement,\n  property,\n  css,\n  CSSResult,\n  PropertyValues,\n} from \"lit-element\";\n\nimport \"../../../components/entity/ha-state-label-badge\";\nimport \"../components/hui-warning-element\";\n\nimport computeStateDisplay from \"../../../common/entity/compute_state_display\";\nimport { computeTooltip } from \"../common/compute-tooltip\";\nimport { handleClick } from \"../common/handle-click\";\nimport { longPress } from \"../common/directives/long-press-directive\";\nimport { LovelaceElement, StateLabelElementConfig } from \"./types\";\nimport { HomeAssistant } from \"../../../types\";\nimport { hasConfigOrEntityChanged } from \"../common/has-changed\";\n\n@customElement(\"hui-state-label-element\")\nclass HuiStateLabelElement extends LitElement implements LovelaceElement {\n  @property() public hass?: HomeAssistant;\n  @property() private _config?: StateLabelElementConfig;\n\n  public setConfig(config: StateLabelElementConfig): void {\n    if (!config.entity) {\n      throw Error(\"Invalid Configuration: 'entity' required\");\n    }\n\n    this._config = config;\n  }\n\n  protected shouldUpdate(changedProps: PropertyValues): boolean {\n    return hasConfigOrEntityChanged(this, changedProps);\n  }\n\n  protected render(): TemplateResult | void {\n    if (!this._config || !this.hass) {\n      return html``;\n    }\n\n    const stateObj = this.hass.states[this._config.entity!];\n\n    if (!stateObj) {\n      return html`\n        <hui-warning-element\n          label=${this.hass.localize(\n            \"ui.panel.lovelace.warning.entity_not_found\",\n            \"entity\",\n            this._config.entity\n          )}\n        ></hui-warning-element>\n      `;\n    }\n\n    return html`\n      <div\n        .title=\"${computeTooltip(this.hass, this._config)}\"\n        @ha-click=\"${this._handleTap}\"\n        @ha-hold=\"${this._handleHold}\"\n        .longPress=\"${longPress()}\"\n      >\n        ${this._config.prefix}${stateObj\n          ? computeStateDisplay(\n              this.hass.localize,\n              stateObj,\n              this.hass.language\n            )\n          : \"-\"}${this._config.suffix}\n      </div>\n    `;\n  }\n\n  private _handleTap(): void {\n    handleClick(this, this.hass!, this._config!, false);\n  }\n\n  private _handleHold(): void {\n    handleClick(this, this.hass!, this._config!, true);\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      :host {\n        cursor: pointer;\n      }\n      div {\n        padding: 8px;\n        white-space: nowrap;\n      }\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-state-label-element\": HuiStateLabelElement;\n  }\n}\n","import {\n  html,\n  LitElement,\n  TemplateResult,\n  property,\n  css,\n  CSSResult,\n  customElement,\n  PropertyValues,\n} from \"lit-element\";\n\nimport \"../../../components/ha-climate-state\";\nimport \"../components/hui-generic-entity-row\";\nimport \"../components/hui-warning\";\n\nimport { HomeAssistant } from \"../../../types\";\nimport { EntityRow, EntityConfig } from \"./types\";\nimport { hasConfigOrEntityChanged } from \"../common/has-changed\";\n\n@customElement(\"hui-climate-entity-row\")\nclass HuiClimateEntityRow extends LitElement implements EntityRow {\n  @property() public hass?: HomeAssistant;\n\n  @property() private _config?: EntityConfig;\n\n  public setConfig(config: EntityConfig): void {\n    if (!config || !config.entity) {\n      throw new Error(\"Invalid Configuration: 'entity' required\");\n    }\n\n    this._config = config;\n  }\n\n  protected shouldUpdate(changedProps: PropertyValues): boolean {\n    return hasConfigOrEntityChanged(this, changedProps);\n  }\n\n  protected render(): TemplateResult | void {\n    if (!this.hass || !this._config) {\n      return html``;\n    }\n\n    const stateObj = this.hass.states[this._config.entity];\n\n    if (!stateObj) {\n      return html`\n        <hui-warning\n          >${this.hass.localize(\n            \"ui.panel.lovelace.warning.entity_not_found\",\n            \"entity\",\n            this._config.entity\n          )}</hui-warning\n        >\n      `;\n    }\n\n    return html`\n      <hui-generic-entity-row .hass=\"${this.hass}\" .config=\"${this._config}\">\n        <ha-climate-state\n          .hass=\"${this.hass}\"\n          .stateObj=\"${stateObj}\"\n        ></ha-climate-state>\n      </hui-generic-entity-row>\n    `;\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      ha-climate-state {\n        text-align: right;\n      }\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-climate-entity-row\": HuiClimateEntityRow;\n  }\n}\n","import {\n  html,\n  LitElement,\n  TemplateResult,\n  property,\n  css,\n  CSSResult,\n  customElement,\n  PropertyValues,\n} from \"lit-element\";\n\nimport \"../components/hui-generic-entity-row\";\nimport \"../../../components/ha-cover-controls\";\nimport \"../../../components/ha-cover-tilt-controls\";\nimport \"../components/hui-warning\";\n\nimport { isTiltOnly } from \"../../../util/cover-model\";\nimport { HomeAssistant } from \"../../../types\";\nimport { EntityRow, EntityConfig } from \"./types\";\nimport { hasConfigOrEntityChanged } from \"../common/has-changed\";\n\n@customElement(\"hui-cover-entity-row\")\nclass HuiCoverEntityRow extends LitElement implements EntityRow {\n  @property() public hass?: HomeAssistant;\n\n  @property() private _config?: EntityConfig;\n\n  public setConfig(config: EntityConfig): void {\n    if (!config) {\n      throw new Error(\"Configuration error\");\n    }\n    this._config = config;\n  }\n\n  protected shouldUpdate(changedProps: PropertyValues): boolean {\n    return hasConfigOrEntityChanged(this, changedProps);\n  }\n\n  protected render(): TemplateResult | void {\n    if (!this._config || !this.hass) {\n      return html``;\n    }\n\n    const stateObj = this.hass.states[this._config.entity];\n\n    if (!stateObj) {\n      return html`\n        <hui-warning\n          >${this.hass.localize(\n            \"ui.panel.lovelace.warning.entity_not_found\",\n            \"entity\",\n            this._config.entity\n          )}</hui-warning\n        >\n      `;\n    }\n\n    return html`\n      <hui-generic-entity-row .hass=\"${this.hass}\" .config=\"${this._config}\">\n        ${isTiltOnly(stateObj)\n          ? html`\n              <ha-cover-tilt-controls\n                .hass=\"${this.hass}\"\n                .stateObj=\"${stateObj}\"\n              ></ha-cover-tilt-controls>\n            `\n          : html`\n              <ha-cover-controls\n                .hass=\"${this.hass}\"\n                .stateObj=\"${stateObj}\"\n              ></ha-cover-controls>\n            `}\n      </hui-generic-entity-row>\n    `;\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      ha-cover-controls,\n      ha-cover-tilt-controls {\n        margin-right: -0.57em;\n      }\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-cover-entity-row\": HuiCoverEntityRow;\n  }\n}\n","import {\n  html,\n  LitElement,\n  TemplateResult,\n  property,\n  customElement,\n  PropertyValues,\n} from \"lit-element\";\n\nimport \"../components/hui-generic-entity-row\";\nimport \"../../../components/entity/ha-entity-toggle\";\nimport \"../components/hui-warning\";\n\nimport computeStateDisplay from \"../../../common/entity/compute_state_display\";\n\nimport { DOMAINS_TOGGLE } from \"../../../common/const\";\nimport { HomeAssistant } from \"../../../types\";\nimport { EntityRow, EntityConfig } from \"./types\";\nimport { hasConfigOrEntityChanged } from \"../common/has-changed\";\n\n@customElement(\"hui-group-entity-row\")\nclass HuiGroupEntityRow extends LitElement implements EntityRow {\n  @property() public hass?: HomeAssistant;\n\n  @property() private _config?: EntityConfig;\n\n  public setConfig(config: EntityConfig): void {\n    if (!config) {\n      throw new Error(\"Configuration error\");\n    }\n    this._config = config;\n  }\n\n  protected shouldUpdate(changedProps: PropertyValues): boolean {\n    return hasConfigOrEntityChanged(this, changedProps);\n  }\n\n  protected render(): TemplateResult | void {\n    if (!this._config || !this.hass) {\n      return html``;\n    }\n\n    const stateObj = this.hass.states[this._config.entity];\n\n    if (!stateObj) {\n      return html`\n        <hui-warning\n          >${this.hass.localize(\n            \"ui.panel.lovelace.warning.entity_not_found\",\n            \"entity\",\n            this._config.entity\n          )}</hui-warning\n        >\n      `;\n    }\n\n    return html`\n      <hui-generic-entity-row .hass=\"${this.hass}\" .config=\"${this._config}\">\n        ${this._computeCanToggle(stateObj.attributes.entity_id)\n          ? html`\n              <ha-entity-toggle\n                .hass=\"${this.hass}\"\n                .stateObj=\"${stateObj}\"\n              ></ha-entity-toggle>\n            `\n          : html`\n              <div>\n                ${computeStateDisplay(\n                  this.hass!.localize,\n                  stateObj,\n                  this.hass.language\n                )}\n              </div>\n            `}\n      </hui-generic-entity-row>\n    `;\n  }\n\n  private _computeCanToggle(entityIds): boolean {\n    return entityIds.some((entityId) =>\n      DOMAINS_TOGGLE.has(entityId.split(\".\", 1)[0])\n    );\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-group-entity-row\": HuiGroupEntityRow;\n  }\n}\n","import {\n  html,\n  LitElement,\n  TemplateResult,\n  property,\n  PropertyValues,\n  customElement,\n} from \"lit-element\";\n\nimport \"../components/hui-generic-entity-row\";\nimport \"../../../components/paper-time-input.js\";\n// tslint:disable-next-line:no-duplicate-imports\nimport { PaperTimeInput } from \"../../../components/paper-time-input.js\";\nimport \"../../../components/ha-date-input\";\n// tslint:disable-next-line:no-duplicate-imports\nimport { HaDateInput } from \"../../../components/ha-date-input\";\n\nimport { HomeAssistant } from \"../../../types\";\nimport { EntityRow, EntityConfig } from \"./types\";\nimport { setInputDateTimeValue } from \"../../../data/input_datetime\";\nimport { hasConfigOrEntityChanged } from \"../common/has-changed\";\n\n@customElement(\"hui-input-datetime-entity-row\")\nclass HuiInputDatetimeEntityRow extends LitElement implements EntityRow {\n  @property() public hass?: HomeAssistant;\n  @property() private _config?: EntityConfig;\n\n  public setConfig(config: EntityConfig): void {\n    if (!config) {\n      throw new Error(\"Configuration error\");\n    }\n    this._config = config;\n  }\n\n  protected shouldUpdate(changedProps: PropertyValues): boolean {\n    return hasConfigOrEntityChanged(this, changedProps);\n  }\n\n  protected render(): TemplateResult | void {\n    if (!this._config || !this.hass) {\n      return html``;\n    }\n\n    const stateObj = this.hass.states[this._config.entity];\n\n    if (!stateObj) {\n      return html`\n        <hui-warning\n          >${this.hass.localize(\n            \"ui.panel.lovelace.warning.entity_not_found\",\n            \"entity\",\n            this._config.entity\n          )}</hui-warning\n        >\n      `;\n    }\n\n    return html`\n      <hui-generic-entity-row .hass=\"${this.hass}\" .config=\"${this._config}\">\n        ${stateObj.attributes.has_date\n          ? html`\n              <ha-date-input\n                .year=${stateObj.attributes.year}\n                .month=${(\"0\" + stateObj.attributes.month).slice(-2)}\n                .day=${(\"0\" + stateObj.attributes.day).slice(-2)}\n                @change=${this._selectedValueChanged}\n                @click=${this._stopEventPropagation}\n              ></ha-date-input>\n              ${stateObj.attributes.has_time ? \",\" : \"\"}\n            `\n          : ``}\n        ${stateObj.attributes.has_time\n          ? html`\n              <paper-time-input\n                .hour=${stateObj.state === \"unknown\"\n                  ? \"\"\n                  : (\"0\" + stateObj.attributes.hour).slice(-2)}\n                .min=${stateObj.state === \"unknown\"\n                  ? \"\"\n                  : (\"0\" + stateObj.attributes.minute).slice(-2)}\n                .amPm=${false}\n                @change=${this._selectedValueChanged}\n                @click=${this._stopEventPropagation}\n                hide-label\n                format=\"24\"\n              ></paper-time-input>\n            `\n          : ``}\n      </hui-generic-entity-row>\n    `;\n  }\n\n  private _stopEventPropagation(ev: Event): void {\n    ev.stopPropagation();\n  }\n\n  private get _timeInputEl(): PaperTimeInput {\n    return this.shadowRoot!.querySelector(\"paper-time-input\")!;\n  }\n\n  private get _dateInputEl(): HaDateInput {\n    return this.shadowRoot!.querySelector(\"ha-date-input\")!;\n  }\n\n  private _selectedValueChanged(ev): void {\n    const stateObj = this.hass!.states[this._config!.entity];\n\n    const time =\n      this._timeInputEl !== null\n        ? this._timeInputEl.value.trim() + \":00\"\n        : undefined;\n\n    const date =\n      this._dateInputEl !== null ? this._dateInputEl.value : undefined;\n\n    if (time !== stateObj.state) {\n      setInputDateTimeValue(this.hass!, stateObj.entity_id, time, date);\n    }\n\n    ev.target.blur();\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-input-datetime-entity-row\": HuiInputDatetimeEntityRow;\n  }\n}\n","import {\n  html,\n  LitElement,\n  TemplateResult,\n  property,\n  customElement,\n  css,\n  CSSResult,\n  PropertyValues,\n} from \"lit-element\";\n\nimport \"../components/hui-generic-entity-row\";\nimport \"../../../components/ha-slider\";\nimport \"../components/hui-warning\";\n\nimport { computeRTLDirection } from \"../../../common/util/compute_rtl\";\nimport { EntityRow, EntityConfig } from \"./types\";\nimport { HomeAssistant } from \"../../../types\";\nimport { setValue } from \"../../../data/input_text\";\nimport { hasConfigOrEntityChanged } from \"../common/has-changed\";\n\n@customElement(\"hui-input-number-entity-row\")\nclass HuiInputNumberEntityRow extends LitElement implements EntityRow {\n  @property() public hass?: HomeAssistant;\n\n  @property() private _config?: EntityConfig;\n\n  private _loaded?: boolean;\n\n  private _updated?: boolean;\n\n  public setConfig(config: EntityConfig): void {\n    if (!config) {\n      throw new Error(\"Configuration error\");\n    }\n    this._config = config;\n  }\n\n  public connectedCallback(): void {\n    super.connectedCallback();\n    if (this._updated && !this._loaded) {\n      this._initialLoad();\n    }\n  }\n\n  protected firstUpdated(): void {\n    this._updated = true;\n    if (this.isConnected && !this._loaded) {\n      this._initialLoad();\n    }\n  }\n\n  protected shouldUpdate(changedProps: PropertyValues): boolean {\n    return hasConfigOrEntityChanged(this, changedProps);\n  }\n\n  protected render(): TemplateResult | void {\n    if (!this._config || !this.hass) {\n      return html``;\n    }\n\n    const stateObj = this.hass.states[this._config.entity];\n\n    if (!stateObj) {\n      return html`\n        <hui-warning\n          >${this.hass.localize(\n            \"ui.panel.lovelace.warning.entity_not_found\",\n            \"entity\",\n            this._config.entity\n          )}</hui-warning\n        >\n      `;\n    }\n\n    return html`\n      <hui-generic-entity-row .hass=\"${this.hass}\" .config=\"${this._config}\">\n        <div>\n          ${stateObj.attributes.mode === \"slider\"\n            ? html`\n                <div class=\"flex\">\n                  <ha-slider\n                    .dir=\"${computeRTLDirection(this.hass!)}\"\n                    .step=\"${Number(stateObj.attributes.step)}\"\n                    .min=\"${Number(stateObj.attributes.min)}\"\n                    .max=\"${Number(stateObj.attributes.max)}\"\n                    .value=\"${Number(stateObj.state)}\"\n                    pin\n                    @change=\"${this._selectedValueChanged}\"\n                    ignore-bar-touch\n                    id=\"input\"\n                  ></ha-slider>\n                  <span class=\"state\">\n                    ${Number(stateObj.state)}\n                    ${stateObj.attributes.unit_of_measurement}\n                  </span>\n                </div>\n              `\n            : html`\n                <paper-input\n                  no-label-float\n                  auto-validate\n                  .pattern=\"[0-9]+([\\\\.][0-9]+)?\"\n                  .step=\"${Number(stateObj.attributes.step)}\"\n                  .min=\"${Number(stateObj.attributes.min)}\"\n                  .max=\"${Number(stateObj.attributes.max)}\"\n                  .value=\"${Number(stateObj.state)}\"\n                  type=\"number\"\n                  @change=\"${this._selectedValueChanged}\"\n                  id=\"input\"\n                ></paper-input>\n              `}\n        </div>\n      </hui-generic-entity-row>\n    `;\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      .flex {\n        display: flex;\n        align-items: center;\n      }\n      .state {\n        min-width: 45px;\n        text-align: end;\n      }\n      paper-input {\n        text-align: end;\n      }\n    `;\n  }\n\n  private async _initialLoad(): Promise<void> {\n    this._loaded = true;\n    await this.updateComplete;\n    const element = this.shadowRoot!.querySelector(\".state\") as HTMLElement;\n\n    if (!element || !this.parentElement) {\n      return;\n    }\n\n    element.hidden = this.parentElement.clientWidth <= 350;\n  }\n\n  private get _inputElement(): { value: string } {\n    // linter recommended the following syntax\n    return (this.shadowRoot!.getElementById(\"input\") as unknown) as {\n      value: string;\n    };\n  }\n\n  private _selectedValueChanged(): void {\n    const element = this._inputElement;\n    const stateObj = this.hass!.states[this._config!.entity];\n\n    if (element.value !== stateObj.state) {\n      setValue(this.hass!, stateObj.entity_id, element.value!);\n    }\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-input-number-entity-row\": HuiInputNumberEntityRow;\n  }\n}\n","import {\n  html,\n  LitElement,\n  TemplateResult,\n  property,\n  css,\n  CSSResult,\n  customElement,\n  PropertyValues,\n} from \"lit-element\";\nimport \"@polymer/paper-item/paper-item\";\nimport \"@polymer/paper-listbox/paper-listbox\";\n\nimport \"../../../components/ha-paper-dropdown-menu\";\nimport \"../../../components/entity/state-badge\";\nimport \"../components/hui-warning\";\n\nimport computeStateName from \"../../../common/entity/compute_state_name\";\n\nimport { HomeAssistant, InputSelectEntity } from \"../../../types\";\nimport { EntityRow, EntityConfig } from \"./types\";\nimport { setInputSelectOption } from \"../../../data/input-select\";\nimport { hasConfigOrEntityChanged } from \"../common/has-changed\";\nimport { forwardHaptic } from \"../../../data/haptics\";\nimport { stopPropagation } from \"../../../common/dom/stop_propagation\";\n\n@customElement(\"hui-input-select-entity-row\")\nclass HuiInputSelectEntityRow extends LitElement implements EntityRow {\n  @property() public hass?: HomeAssistant;\n\n  @property() private _config?: EntityConfig;\n\n  public setConfig(config: EntityConfig): void {\n    if (!config || !config.entity) {\n      throw new Error(\"Invalid Configuration: 'entity' required\");\n    }\n\n    this._config = config;\n  }\n\n  protected shouldUpdate(changedProps: PropertyValues): boolean {\n    return hasConfigOrEntityChanged(this, changedProps);\n  }\n\n  protected render(): TemplateResult | void {\n    if (!this.hass || !this._config) {\n      return html``;\n    }\n\n    const stateObj = this.hass.states[this._config.entity] as\n      | InputSelectEntity\n      | undefined;\n\n    if (!stateObj) {\n      return html`\n        <hui-warning\n          >${this.hass.localize(\n            \"ui.panel.lovelace.warning.entity_not_found\",\n            \"entity\",\n            this._config.entity\n          )}</hui-warning\n        >\n      `;\n    }\n\n    return html`\n      <state-badge .stateObj=\"${stateObj}\"></state-badge>\n      <ha-paper-dropdown-menu\n        .label=${this._config.name || computeStateName(stateObj)}\n        .value=${stateObj.state}\n        @iron-select=${this._selectedChanged}\n        @click=${stopPropagation}\n      >\n        <paper-listbox slot=\"dropdown-content\">\n          ${stateObj.attributes.options.map(\n            (option) => html`\n              <paper-item>${option}</paper-item>\n            `\n          )}\n        </paper-listbox>\n      </ha-paper-dropdown-menu>\n    `;\n  }\n\n  protected updated(changedProps: PropertyValues) {\n    super.updated(changedProps);\n\n    if (!this.hass || !this._config) {\n      return;\n    }\n\n    const stateObj = this.hass.states[this._config.entity] as\n      | InputSelectEntity\n      | undefined;\n\n    if (!stateObj) {\n      return;\n    }\n\n    // Update selected after rendering the items or else it won't work in Firefox\n    this.shadowRoot!.querySelector(\n      \"paper-listbox\"\n    )!.selected = stateObj.attributes.options.indexOf(stateObj.state);\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      :host {\n        display: flex;\n        align-items: center;\n      }\n      ha-paper-dropdown-menu {\n        margin-left: 16px;\n        flex: 1;\n      }\n\n      paper-item {\n        cursor: pointer;\n        min-width: 200px;\n      }\n    `;\n  }\n\n  private _selectedChanged(ev): void {\n    const stateObj = this.hass!.states[this._config!.entity];\n    const option = ev.target.selectedItem.innerText.trim();\n    if (option === stateObj.state) {\n      return;\n    }\n\n    forwardHaptic(\"light\");\n\n    setInputSelectOption(this.hass!, stateObj.entity_id, option);\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-input-select-entity-row\": HuiInputSelectEntityRow;\n  }\n}\n","import {\n  html,\n  LitElement,\n  TemplateResult,\n  property,\n  customElement,\n  PropertyValues,\n} from \"lit-element\";\nimport { PaperInputElement } from \"@polymer/paper-input/paper-input\";\n\nimport \"../components/hui-generic-entity-row\";\nimport \"../components/hui-warning\";\n\nimport { HomeAssistant } from \"../../../types\";\nimport { EntityRow, EntityConfig } from \"./types\";\nimport { setValue } from \"../../../data/input_text\";\nimport { hasConfigOrEntityChanged } from \"../common/has-changed\";\n\n@customElement(\"hui-input-text-entity-row\")\nclass HuiInputTextEntityRow extends LitElement implements EntityRow {\n  @property() public hass?: HomeAssistant;\n\n  @property() private _config?: EntityConfig;\n\n  public setConfig(config: EntityConfig): void {\n    if (!config) {\n      throw new Error(\"Configuration error\");\n    }\n    this._config = config;\n  }\n\n  protected shouldUpdate(changedProps: PropertyValues): boolean {\n    return hasConfigOrEntityChanged(this, changedProps);\n  }\n\n  protected render(): TemplateResult | void {\n    if (!this._config || !this.hass) {\n      return html``;\n    }\n\n    const stateObj = this.hass.states[this._config.entity];\n\n    if (!stateObj) {\n      return html`\n        <hui-warning\n          >${this.hass.localize(\n            \"ui.panel.lovelace.warning.entity_not_found\",\n            \"entity\",\n            this._config.entity\n          )}</hui-warning\n        >\n      `;\n    }\n\n    return html`\n      <hui-generic-entity-row .hass=\"${this.hass}\" .config=\"${this._config}\">\n        <paper-input\n          no-label-float\n          .value=\"${stateObj.state}\"\n          .minlength=\"${stateObj.attributes.min}\"\n          .maxlength=\"${stateObj.attributes.max}\"\n          .autoValidate=\"${stateObj.attributes.pattern}\"\n          .pattern=\"${stateObj.attributes.pattern}\"\n          .type=\"${stateObj.attributes.mode}\"\n          @change=\"${this._selectedValueChanged}\"\n          placeholder=\"(empty value)\"\n        ></paper-input>\n      </hui-generic-entity-row>\n    `;\n  }\n\n  private get _inputEl(): PaperInputElement {\n    return this.shadowRoot!.querySelector(\"paper-input\") as PaperInputElement;\n  }\n\n  private _selectedValueChanged(ev): void {\n    const element = this._inputEl;\n    const stateObj = this.hass!.states[this._config!.entity];\n\n    if (element.value !== stateObj.state) {\n      setValue(this.hass!, stateObj.entity_id, element.value!);\n    }\n\n    ev.target.blur();\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-input-text-entity-row\": HuiInputTextEntityRow;\n  }\n}\n","import {\n  html,\n  LitElement,\n  TemplateResult,\n  property,\n  css,\n  CSSResult,\n  customElement,\n  PropertyValues,\n} from \"lit-element\";\n\nimport \"../components/hui-generic-entity-row\";\nimport \"../components/hui-warning\";\n\nimport { HomeAssistant } from \"../../../types\";\nimport { EntityRow, EntityConfig } from \"./types\";\nimport { hasConfigOrEntityChanged } from \"../common/has-changed\";\n\n@customElement(\"hui-lock-entity-row\")\nclass HuiLockEntityRow extends LitElement implements EntityRow {\n  @property() public hass?: HomeAssistant;\n\n  @property() private _config?: EntityConfig;\n\n  public setConfig(config: EntityConfig): void {\n    if (!config) {\n      throw new Error(\"Configuration error\");\n    }\n    this._config = config;\n  }\n\n  protected shouldUpdate(changedProps: PropertyValues): boolean {\n    return hasConfigOrEntityChanged(this, changedProps);\n  }\n\n  protected render(): TemplateResult | void {\n    if (!this._config || !this.hass) {\n      return html``;\n    }\n\n    const stateObj = this.hass.states[this._config.entity];\n\n    if (!stateObj) {\n      return html`\n        <hui-warning\n          >${this.hass.localize(\n            \"ui.panel.lovelace.warning.entity_not_found\",\n            \"entity\",\n            this._config.entity\n          )}</hui-warning\n        >\n      `;\n    }\n\n    return html`\n      <hui-generic-entity-row .hass=\"${this.hass}\" .config=\"${this._config}\">\n        <mwc-button @click=\"${this._callService}\">\n          ${stateObj.state === \"locked\"\n            ? this.hass!.localize(\"ui.card.lock.unlock\")\n            : this.hass!.localize(\"ui.card.lock.lock\")}\n        </mwc-button>\n      </hui-generic-entity-row>\n    `;\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      mwc-button {\n        margin-right: -0.57em;\n      }\n    `;\n  }\n\n  private _callService(ev): void {\n    ev.stopPropagation();\n    const stateObj = this.hass!.states[this._config!.entity];\n    this.hass!.callService(\n      \"lock\",\n      stateObj.state === \"locked\" ? \"unlock\" : \"lock\",\n      { entity_id: stateObj.entity_id }\n    );\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-lock-entity-row\": HuiLockEntityRow;\n  }\n}\n","import {\n  html,\n  LitElement,\n  TemplateResult,\n  css,\n  CSSResult,\n  property,\n  customElement,\n  PropertyValues,\n} from \"lit-element\";\nimport \"@polymer/paper-icon-button/paper-icon-button\";\n\nimport \"../components/hui-generic-entity-row\";\nimport \"../components/hui-warning\";\n\nimport { EntityRow, EntityConfig } from \"./types\";\nimport { HomeAssistant } from \"../../../types\";\nimport { HassEntity } from \"home-assistant-js-websocket\";\nimport { supportsFeature } from \"../../../common/entity/supports-feature\";\nimport {\n  SUPPORTS_PLAY,\n  SUPPORT_NEXT_TRACK,\n  OFF_STATES,\n  SUPPORT_PAUSE,\n} from \"../../../data/media-player\";\nimport { hasConfigOrEntityChanged } from \"../common/has-changed\";\n\n@customElement(\"hui-media-player-entity-row\")\nclass HuiMediaPlayerEntityRow extends LitElement implements EntityRow {\n  @property() public hass?: HomeAssistant;\n\n  @property() private _config?: EntityConfig;\n\n  public setConfig(config: EntityConfig): void {\n    if (!config || !config.entity) {\n      throw new Error(\"Invalid Configuration: 'entity' required\");\n    }\n\n    this._config = config;\n  }\n\n  protected shouldUpdate(changedProps: PropertyValues): boolean {\n    return hasConfigOrEntityChanged(this, changedProps);\n  }\n\n  protected render(): TemplateResult | void {\n    if (!this.hass || !this._config) {\n      return html``;\n    }\n\n    const stateObj = this.hass.states[this._config.entity];\n\n    if (!stateObj) {\n      return html`\n        <hui-warning\n          >${this.hass.localize(\n            \"ui.panel.lovelace.warning.entity_not_found\",\n            \"entity\",\n            this._config.entity\n          )}</hui-warning\n        >\n      `;\n    }\n\n    return html`\n      <hui-generic-entity-row\n        .hass=\"${this.hass}\"\n        .config=\"${this._config}\"\n        .showSecondary=\"false\"\n      >\n        ${OFF_STATES.includes(stateObj.state)\n          ? html`\n              <div>\n                ${this.hass!.localize(`state.media_player.${stateObj.state}`) ||\n                  this.hass!.localize(`state.default.${stateObj.state}`) ||\n                  stateObj.state}\n              </div>\n            `\n          : html`\n              <div class=\"controls\">\n                ${stateObj.state !== \"playing\" &&\n                !supportsFeature(stateObj, SUPPORTS_PLAY)\n                  ? \"\"\n                  : html`\n                      <paper-icon-button\n                        icon=\"${this._computeControlIcon(stateObj)}\"\n                        @click=\"${this._playPause}\"\n                      ></paper-icon-button>\n                    `}\n                ${supportsFeature(stateObj, SUPPORT_NEXT_TRACK)\n                  ? html`\n                      <paper-icon-button\n                        icon=\"hass:skip-next\"\n                        @click=\"${this._nextTrack}\"\n                      ></paper-icon-button>\n                    `\n                  : \"\"}\n              </div>\n              <div slot=\"secondary\">${this._computeMediaTitle(stateObj)}</div>\n            `}\n      </hui-generic-entity-row>\n    `;\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      .controls {\n        white-space: nowrap;\n      }\n    `;\n  }\n\n  private _computeControlIcon(stateObj: HassEntity): string {\n    if (stateObj.state !== \"playing\") {\n      return \"hass:play\";\n    }\n\n    // tslint:disable-next-line:no-bitwise\n    return supportsFeature(stateObj, SUPPORT_PAUSE)\n      ? \"hass:pause\"\n      : \"hass:stop\";\n  }\n\n  private _computeMediaTitle(stateObj: HassEntity): string {\n    let prefix;\n    let suffix;\n\n    switch (stateObj.attributes.media_content_type) {\n      case \"music\":\n        prefix = stateObj.attributes.media_artist;\n        suffix = stateObj.attributes.media_title;\n        break;\n      case \"tvshow\":\n        prefix = stateObj.attributes.media_series_title;\n        suffix = stateObj.attributes.media_title;\n        break;\n      default:\n        prefix =\n          stateObj.attributes.media_title ||\n          stateObj.attributes.app_name ||\n          stateObj.state;\n        suffix = \"\";\n    }\n\n    return prefix && suffix ? `${prefix}: ${suffix}` : prefix || suffix || \"\";\n  }\n\n  private _playPause(ev: MouseEvent): void {\n    ev.stopPropagation();\n    this.hass!.callService(\"media_player\", \"media_play_pause\", {\n      entity_id: this._config!.entity,\n    });\n  }\n\n  private _nextTrack(ev: MouseEvent): void {\n    ev.stopPropagation();\n    this.hass!.callService(\"media_player\", \"media_next_track\", {\n      entity_id: this._config!.entity,\n    });\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-media-player-entity-row\": HuiMediaPlayerEntityRow;\n  }\n}\n","import {\n  html,\n  LitElement,\n  TemplateResult,\n  CSSResult,\n  css,\n  property,\n  customElement,\n  PropertyValues,\n} from \"lit-element\";\n\nimport \"../components/hui-generic-entity-row\";\nimport \"../../../components/entity/ha-entity-toggle\";\nimport \"../components/hui-warning\";\n\nimport { HomeAssistant } from \"../../../types\";\nimport { EntityRow, EntityConfig } from \"./types\";\nimport { hasConfigOrEntityChanged } from \"../common/has-changed\";\n\n@customElement(\"hui-scene-entity-row\")\nclass HuiSceneEntityRow extends LitElement implements EntityRow {\n  @property() public hass?: HomeAssistant;\n\n  @property() private _config?: EntityConfig;\n\n  public setConfig(config: EntityConfig): void {\n    if (!config) {\n      throw new Error(\"Configuration error\");\n    }\n    this._config = config;\n  }\n\n  protected shouldUpdate(changedProps: PropertyValues): boolean {\n    return hasConfigOrEntityChanged(this, changedProps);\n  }\n\n  protected render(): TemplateResult | void {\n    if (!this._config || !this.hass) {\n      return html``;\n    }\n\n    const stateObj = this.hass.states[this._config.entity];\n\n    if (!stateObj) {\n      return html`\n        <hui-warning\n          >${this.hass.localize(\n            \"ui.panel.lovelace.warning.entity_not_found\",\n            \"entity\",\n            this._config.entity\n          )}</hui-warning\n        >\n      `;\n    }\n\n    return html`\n      <hui-generic-entity-row .hass=\"${this.hass}\" .config=\"${this._config}\">\n        ${stateObj.attributes.can_cancel\n          ? html`\n              <ha-entity-toggle\n                .hass=\"${this.hass}\"\n                .stateObj=\"${stateObj}\"\n              ></ha-entity-toggle>\n            `\n          : html`\n              <mwc-button @click=\"${this._callService}\">\n                ${this.hass!.localize(\"ui.card.scene.activate\")}\n              </mwc-button>\n            `}\n      </hui-generic-entity-row>\n    `;\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      mwc-button {\n        margin-right: -0.57em;\n      }\n    `;\n  }\n\n  private _callService(ev): void {\n    ev.stopPropagation();\n    this.hass!.callService(\"scene\", \"turn_on\", {\n      entity_id: this._config!.entity,\n    });\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-scene-entity-row\": HuiSceneEntityRow;\n  }\n}\n","import {\n  html,\n  LitElement,\n  TemplateResult,\n  property,\n  CSSResult,\n  css,\n  customElement,\n  PropertyValues,\n} from \"lit-element\";\n\nimport \"../components/hui-generic-entity-row\";\nimport \"../../../components/entity/ha-entity-toggle\";\nimport \"../components/hui-warning\";\n\nimport { HomeAssistant } from \"../../../types\";\nimport { EntityRow, EntityConfig } from \"./types\";\nimport { hasConfigOrEntityChanged } from \"../common/has-changed\";\n\n@customElement(\"hui-script-entity-row\")\nclass HuiScriptEntityRow extends LitElement implements EntityRow {\n  public hass?: HomeAssistant;\n\n  @property() private _config?: EntityConfig;\n\n  public setConfig(config: EntityConfig): void {\n    if (!config) {\n      throw new Error(\"Configuration error\");\n    }\n    this._config = config;\n  }\n\n  protected shouldUpdate(changedProps: PropertyValues): boolean {\n    return hasConfigOrEntityChanged(this, changedProps);\n  }\n\n  protected render(): TemplateResult | void {\n    if (!this._config || !this.hass) {\n      return html``;\n    }\n\n    const stateObj = this.hass.states[this._config.entity];\n\n    if (!stateObj) {\n      return html`\n        <hui-warning\n          >${this.hass.localize(\n            \"ui.panel.lovelace.warning.entity_not_found\",\n            \"entity\",\n            this._config.entity\n          )}</hui-warning\n        >\n      `;\n    }\n\n    return html`\n      <hui-generic-entity-row .hass=\"${this.hass}\" .config=\"${this._config}\">\n        ${stateObj.attributes.can_cancel\n          ? html`\n              <ha-entity-toggle\n                .hass=\"${this.hass}\"\n                .stateObj=\"${stateObj}\"\n              ></ha-entity-toggle>\n            `\n          : html`\n              <mwc-button @click=\"${this._callService}\">\n                ${this.hass!.localize(\"ui.card.script.execute\")}\n              </mwc-button>\n            `}\n      </hui-generic-entity-row>\n    `;\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      mwc-button {\n        margin-right: -0.57em;\n      }\n    `;\n  }\n\n  private _callService(ev): void {\n    ev.stopPropagation();\n    this.hass!.callService(\"script\", \"turn_on\", {\n      entity_id: this._config!.entity,\n    });\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-script-entity-row\": HuiScriptEntityRow;\n  }\n}\n","import {\n  html,\n  LitElement,\n  TemplateResult,\n  property,\n  CSSResult,\n  css,\n  customElement,\n  PropertyValues,\n} from \"lit-element\";\n\nimport \"../components/hui-generic-entity-row\";\nimport \"../components/hui-timestamp-display\";\nimport \"../components/hui-warning\";\n\nimport { HomeAssistant } from \"../../../types\";\nimport { EntityRow, EntityConfig } from \"./types\";\nimport { hasConfigOrEntityChanged } from \"../common/has-changed\";\n\nimport computeStateDisplay from \"../../../common/entity/compute_state_display\";\n\ninterface SensorEntityConfig extends EntityConfig {\n  format?: \"relative\" | \"date\" | \"time\" | \"datetime\";\n}\n\n@customElement(\"hui-sensor-entity-row\")\nclass HuiSensorEntityRow extends LitElement implements EntityRow {\n  @property() public hass?: HomeAssistant;\n\n  @property() private _config?: SensorEntityConfig;\n\n  public setConfig(config: SensorEntityConfig): void {\n    if (!config) {\n      throw new Error(\"Configuration error\");\n    }\n    this._config = config;\n  }\n\n  protected shouldUpdate(changedProps: PropertyValues): boolean {\n    return hasConfigOrEntityChanged(this, changedProps);\n  }\n\n  protected render(): TemplateResult | void {\n    if (!this._config || !this.hass) {\n      return html``;\n    }\n\n    const stateObj = this.hass.states[this._config.entity];\n\n    if (!stateObj) {\n      return html`\n        <hui-warning\n          >${this.hass.localize(\n            \"ui.panel.lovelace.warning.entity_not_found\",\n            \"entity\",\n            this._config.entity\n          )}</hui-warning\n        >\n      `;\n    }\n\n    return html`\n      <hui-generic-entity-row .hass=\"${this.hass}\" .config=\"${this._config}\">\n        <div>\n          ${stateObj.attributes.device_class === \"timestamp\"\n            ? html`\n                <hui-timestamp-display\n                  .hass=\"${this.hass}\"\n                  .ts=\"${new Date(stateObj.state)}\"\n                  .format=\"${this._config.format}\"\n                ></hui-timestamp-display>\n              `\n            : computeStateDisplay(\n                this.hass!.localize,\n                stateObj,\n                this.hass.language\n              )}\n        </div>\n      </hui-generic-entity-row>\n    `;\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      div {\n        text-align: right;\n      }\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-sensor-entity-row\": HuiSensorEntityRow;\n  }\n}\n","import {\n  html,\n  LitElement,\n  TemplateResult,\n  property,\n  CSSResult,\n  css,\n  customElement,\n  PropertyValues,\n} from \"lit-element\";\n\nimport \"../components/hui-generic-entity-row\";\nimport \"../components/hui-warning\";\n\nimport computeStateDisplay from \"../../../common/entity/compute_state_display\";\n\nimport { HomeAssistant } from \"../../../types\";\nimport { EntityRow, EntityConfig } from \"./types\";\nimport { hasConfigOrEntityChanged } from \"../common/has-changed\";\n\n@customElement(\"hui-text-entity-row\")\nclass HuiTextEntityRow extends LitElement implements EntityRow {\n  @property() public hass?: HomeAssistant;\n\n  @property() private _config?: EntityConfig;\n\n  public setConfig(config: EntityConfig): void {\n    if (!config) {\n      throw new Error(\"Configuration error\");\n    }\n    this._config = config;\n  }\n\n  protected shouldUpdate(changedProps: PropertyValues): boolean {\n    return hasConfigOrEntityChanged(this, changedProps);\n  }\n\n  protected render(): TemplateResult | void {\n    if (!this._config || !this.hass) {\n      return html``;\n    }\n\n    const stateObj = this.hass.states[this._config.entity];\n\n    if (!stateObj) {\n      return html`\n        <hui-warning\n          >${this.hass.localize(\n            \"ui.panel.lovelace.warning.entity_not_found\",\n            \"entity\",\n            this._config.entity\n          )}</hui-warning\n        >\n      `;\n    }\n\n    return html`\n      <hui-generic-entity-row .hass=\"${this.hass}\" .config=\"${this._config}\">\n        <div>\n          ${computeStateDisplay(\n            this.hass!.localize,\n            stateObj,\n            this.hass.language\n          )}\n        </div>\n      </hui-generic-entity-row>\n    `;\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      div {\n        text-align: right;\n      }\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-text-entity-row\": HuiTextEntityRow;\n  }\n}\n","import {\n  html,\n  LitElement,\n  TemplateResult,\n  property,\n  PropertyValues,\n  customElement,\n} from \"lit-element\";\n\nimport \"../components/hui-generic-entity-row\";\nimport \"../components/hui-warning\";\n\nimport timerTimeRemaining from \"../../../common/entity/timer_time_remaining\";\nimport secondsToDuration from \"../../../common/datetime/seconds_to_duration\";\n\nimport { HomeAssistant } from \"../../../types\";\nimport { EntityConfig } from \"./types\";\nimport { HassEntity } from \"home-assistant-js-websocket\";\nimport { hasConfigOrEntityChanged } from \"../common/has-changed\";\n\n@customElement(\"hui-timer-entity-row\")\nclass HuiTimerEntityRow extends LitElement {\n  @property() public hass?: HomeAssistant;\n\n  @property() private _config?: EntityConfig;\n\n  @property() private _timeRemaining?: number;\n\n  private _interval?: number;\n\n  public setConfig(config: EntityConfig): void {\n    if (!config) {\n      throw new Error(\"Configuration error\");\n    }\n    this._config = config;\n  }\n\n  public disconnectedCallback(): void {\n    super.disconnectedCallback();\n    this._clearInterval();\n  }\n\n  protected render(): TemplateResult | void {\n    if (!this._config || !this.hass) {\n      return html``;\n    }\n\n    const stateObj = this.hass.states[this._config.entity];\n\n    if (!stateObj) {\n      return html`\n        <hui-warning\n          >${this.hass.localize(\n            \"ui.panel.lovelace.warning.entity_not_found\",\n            \"entity\",\n            this._config.entity\n          )}</hui-warning\n        >\n      `;\n    }\n\n    return html`\n      <hui-generic-entity-row .hass=\"${this.hass}\" .config=\"${this._config}\">\n        <div>${this._computeDisplay(stateObj)}</div>\n      </hui-generic-entity-row>\n    `;\n  }\n\n  protected shouldUpdate(changedProps: PropertyValues): boolean {\n    if (changedProps.has(\"_timeRemaining\")) {\n      return true;\n    }\n\n    return hasConfigOrEntityChanged(this, changedProps);\n  }\n\n  protected updated(changedProps: PropertyValues) {\n    super.updated(changedProps);\n\n    if (changedProps.has(\"hass\")) {\n      const stateObj = this.hass!.states[this._config!.entity];\n      const oldHass = changedProps.get(\"hass\") as this[\"hass\"];\n      const oldStateObj = oldHass\n        ? oldHass.states[this._config!.entity]\n        : undefined;\n\n      if (oldStateObj !== stateObj) {\n        this._startInterval(stateObj);\n      } else if (!stateObj) {\n        this._clearInterval();\n      }\n    }\n  }\n\n  private _clearInterval(): void {\n    if (this._interval) {\n      window.clearInterval(this._interval);\n      this._interval = undefined;\n    }\n  }\n\n  private _startInterval(stateObj: HassEntity): void {\n    this._clearInterval();\n    this._calculateRemaining(stateObj);\n\n    if (stateObj.state === \"active\") {\n      this._interval = window.setInterval(\n        () => this._calculateRemaining(stateObj),\n        1000\n      );\n    }\n  }\n\n  private _calculateRemaining(stateObj: HassEntity): void {\n    this._timeRemaining = timerTimeRemaining(stateObj);\n  }\n\n  private _computeDisplay(stateObj: HassEntity): string | null {\n    if (!stateObj) {\n      return null;\n    }\n\n    if (stateObj.state === \"idle\" || this._timeRemaining === 0) {\n      return this.hass!.localize(\"state.timer.\" + stateObj.state);\n    }\n\n    let display = secondsToDuration(this._timeRemaining || 0);\n\n    if (stateObj.state === \"paused\") {\n      display += ` (${this.hass!.localize(\"state.timer.paused\")})`;\n    }\n\n    return display;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-timer-entity-row\": HuiTimerEntityRow;\n  }\n}\n","import {\n  html,\n  LitElement,\n  TemplateResult,\n  customElement,\n  property,\n  PropertyValues,\n} from \"lit-element\";\n\nimport \"../components/hui-generic-entity-row\";\nimport \"../../../components/entity/ha-entity-toggle\";\nimport \"../components/hui-warning\";\n\nimport computeStateDisplay from \"../../../common/entity/compute_state_display\";\n\nimport { HomeAssistant } from \"../../../types\";\nimport { EntityRow, EntityConfig } from \"./types\";\nimport { hasConfigOrEntityChanged } from \"../common/has-changed\";\n\n@customElement(\"hui-toggle-entity-row\")\nclass HuiToggleEntityRow extends LitElement implements EntityRow {\n  @property() public hass?: HomeAssistant;\n\n  @property() private _config?: EntityConfig;\n\n  public setConfig(config: EntityConfig): void {\n    if (!config) {\n      throw new Error(\"Configuration error\");\n    }\n    this._config = config;\n  }\n\n  protected shouldUpdate(changedProps: PropertyValues): boolean {\n    return hasConfigOrEntityChanged(this, changedProps);\n  }\n\n  protected render(): TemplateResult | void {\n    if (!this._config || !this.hass) {\n      return html``;\n    }\n\n    const stateObj = this.hass.states[this._config.entity];\n\n    if (!stateObj) {\n      return html`\n        <hui-warning\n          >${this.hass.localize(\n            \"ui.panel.lovelace.warning.entity_not_found\",\n            \"entity\",\n            this._config.entity\n          )}</hui-warning\n        >\n      `;\n    }\n\n    return html`\n      <hui-generic-entity-row .hass=\"${this.hass}\" .config=\"${this._config}\">\n        ${stateObj.state === \"on\" || stateObj.state === \"off\"\n          ? html`\n              <ha-entity-toggle\n                .hass=\"${this.hass}\"\n                .stateObj=\"${stateObj}\"\n              ></ha-entity-toggle>\n            `\n          : html`\n              <div>\n                ${computeStateDisplay(\n                  this.hass!.localize,\n                  stateObj,\n                  this.hass!.language\n                )}\n              </div>\n            `}\n      </hui-generic-entity-row>\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-toggle-entity-row\": HuiToggleEntityRow;\n  }\n}\n","import \"@material/mwc-button\";\n\nimport {\n  fetchConfig,\n  LovelaceConfig,\n  saveConfig,\n  subscribeLovelaceUpdates,\n} from \"../../data/lovelace\";\nimport \"../../layouts/hass-loading-screen\";\nimport \"../../layouts/hass-error-screen\";\nimport \"./hui-root\";\nimport { HomeAssistant, PanelInfo, Route } from \"../../types\";\nimport { Lovelace } from \"./types\";\nimport {\n  LitElement,\n  html,\n  PropertyValues,\n  TemplateResult,\n  property,\n} from \"lit-element\";\nimport { showSaveDialog } from \"./editor/show-save-config-dialog\";\nimport { generateLovelaceConfig } from \"./common/generate-lovelace-config\";\nimport { showToast } from \"../../util/toast\";\n\ninterface LovelacePanelConfig {\n  mode: \"yaml\" | \"storage\";\n}\n\nlet editorLoaded = false;\n\nclass LovelacePanel extends LitElement {\n  @property() public panel?: PanelInfo<LovelacePanelConfig>;\n\n  @property() public hass?: HomeAssistant;\n\n  @property() public narrow?: boolean;\n\n  @property() public route?: Route;\n\n  @property() private _columns?: number;\n\n  @property()\n  private _state?: \"loading\" | \"loaded\" | \"error\" | \"yaml-editor\" = \"loading\";\n\n  @property() private _errorMsg?: string;\n\n  @property() private lovelace?: Lovelace;\n\n  private mqls?: MediaQueryList[];\n\n  private _saving: boolean = false;\n\n  constructor() {\n    super();\n    this._closeEditor = this._closeEditor.bind(this);\n  }\n\n  public render(): TemplateResult | void {\n    const state = this._state!;\n\n    if (state === \"loaded\") {\n      return html`\n        <hui-root\n          .hass=\"${this.hass}\"\n          .lovelace=\"${this.lovelace}\"\n          .route=\"${this.route}\"\n          .columns=\"${this._columns}\"\n          .narrow=${this.narrow}\n          @config-refresh=\"${this._forceFetchConfig}\"\n        ></hui-root>\n      `;\n    }\n\n    if (state === \"error\") {\n      return html`\n        <hass-error-screen title=\"Lovelace\" .error=\"${this._errorMsg}\">\n          <mwc-button on-click=\"_forceFetchConfig\"\n            >${this.hass!.localize(\n              \"ui.panel.lovelace.reload_lovelace\"\n            )}</mwc-button\n          >\n        </hass-error-screen>\n      `;\n    }\n\n    if (state === \"yaml-editor\") {\n      return html`\n        <hui-editor\n          .hass=\"${this.hass}\"\n          .lovelace=\"${this.lovelace}\"\n          .closeEditor=\"${this._closeEditor}\"\n        ></hui-editor>\n      `;\n    }\n\n    return html`\n      <hass-loading-screen rootnav></hass-loading-screen>\n    `;\n  }\n\n  public updated(changedProps: PropertyValues): void {\n    super.updated(changedProps);\n\n    if (changedProps.has(\"narrow\")) {\n      this._updateColumns();\n      return;\n    }\n\n    if (!changedProps.has(\"hass\")) {\n      return;\n    }\n\n    const oldHass = changedProps.get(\"hass\") as this[\"hass\"];\n\n    if (oldHass && this.hass!.dockedSidebar !== oldHass.dockedSidebar) {\n      this._updateColumns();\n    }\n  }\n\n  public firstUpdated() {\n    this._fetchConfig(false);\n    // we don't want to unsub as we want to stay informed of updates\n    subscribeLovelaceUpdates(this.hass!.connection, () =>\n      this._lovelaceChanged()\n    );\n    // reload lovelace on reconnect so we are sure we have the latest config\n    window.addEventListener(\"connection-status\", (ev) => {\n      if (ev.detail === \"connected\") {\n        this._fetchConfig(false);\n      }\n    });\n    this._updateColumns = this._updateColumns.bind(this);\n    this.mqls = [300, 600, 900, 1200].map((width) => {\n      const mql = matchMedia(`(min-width: ${width}px)`);\n      mql.addListener(this._updateColumns);\n      return mql;\n    });\n    this._updateColumns();\n  }\n\n  public connectedCallback(): void {\n    super.connectedCallback();\n    if (\n      this.lovelace &&\n      this.hass &&\n      this.lovelace.language !== this.hass.language\n    ) {\n      // language has been changed, rebuild UI\n      this._setLovelaceConfig(this.lovelace.config, this.lovelace.mode);\n    } else if (this.lovelace && this.lovelace.mode === \"generated\") {\n      // When lovelace is generated, we re-generate each time a user goes\n      // to the states panel to make sure new entities are shown.\n      this._state = \"loading\";\n      this._regenerateConfig();\n    }\n  }\n\n  private async _regenerateConfig() {\n    const conf = await generateLovelaceConfig(this.hass!, this.hass!.localize);\n    this._setLovelaceConfig(conf, \"generated\");\n    this._state = \"loaded\";\n  }\n\n  private _closeEditor() {\n    this._state = \"loaded\";\n  }\n\n  private _updateColumns() {\n    const matchColumns = this.mqls!.reduce(\n      (cols, mql) => cols + Number(mql.matches),\n      0\n    );\n    // Do -1 column if the menu is docked and open\n    this._columns = Math.max(\n      1,\n      matchColumns - Number(!this.narrow && this.hass!.dockedSidebar)\n    );\n  }\n\n  private _lovelaceChanged() {\n    if (this._saving) {\n      this._saving = false;\n    } else {\n      showToast(this, {\n        message: this.hass!.localize(\"ui.panel.lovelace.changed_toast.message\"),\n        action: {\n          action: () => this._fetchConfig(false),\n          text: this.hass!.localize(\"ui.panel.lovelace.changed_toast.refresh\"),\n        },\n        duration: 0,\n        dismissable: false,\n      });\n    }\n  }\n\n  private _forceFetchConfig() {\n    this._fetchConfig(true);\n  }\n\n  private async _fetchConfig(forceDiskRefresh) {\n    let conf: LovelaceConfig;\n    let confMode: Lovelace[\"mode\"] = this.panel!.config.mode;\n\n    try {\n      conf = await fetchConfig(this.hass!, forceDiskRefresh);\n    } catch (err) {\n      if (err.code !== \"config_not_found\") {\n        // tslint:disable-next-line\n        console.log(err);\n        this._state = \"error\";\n        this._errorMsg = err.message;\n        return;\n      }\n      conf = await generateLovelaceConfig(this.hass!, this.hass!.localize);\n      confMode = \"generated\";\n    }\n\n    this._state = \"loaded\";\n    this._setLovelaceConfig(conf, confMode);\n  }\n\n  private _setLovelaceConfig(config: LovelaceConfig, mode: Lovelace[\"mode\"]) {\n    this.lovelace = {\n      config,\n      mode,\n      editMode: this.lovelace ? this.lovelace.editMode : false,\n      language: this.hass!.language,\n      enableFullEditMode: () => {\n        if (!editorLoaded) {\n          editorLoaded = true;\n          import(/* webpackChunkName: \"lovelace-yaml-editor\" */ \"./hui-editor\");\n        }\n        this._state = \"yaml-editor\";\n      },\n      setEditMode: (editMode: boolean) => {\n        if (!editMode || this.lovelace!.mode !== \"generated\") {\n          this._updateLovelace({ editMode });\n          return;\n        }\n        showSaveDialog(this, {\n          lovelace: this.lovelace!,\n        });\n      },\n      saveConfig: async (newConfig: LovelaceConfig): Promise<void> => {\n        const { config: previousConfig, mode: previousMode } = this.lovelace!;\n        try {\n          // Optimistic update\n          this._updateLovelace({\n            config: newConfig,\n            mode: \"storage\",\n          });\n          this._saving = true;\n          await saveConfig(this.hass!, newConfig);\n        } catch (err) {\n          // tslint:disable-next-line\n          console.error(err);\n          // Rollback the optimistic update\n          this._updateLovelace({\n            config: previousConfig,\n            mode: previousMode,\n          });\n          throw err;\n        }\n      },\n    };\n  }\n\n  private _updateLovelace(props: Partial<Lovelace>) {\n    this.lovelace = {\n      ...this.lovelace!,\n      ...props,\n    };\n  }\n}\n\ncustomElements.define(\"ha-panel-lovelace\", LovelacePanel);\n","import {\n  html,\n  LitElement,\n  PropertyValues,\n  TemplateResult,\n  CSSResult,\n  css,\n  property,\n} from \"lit-element\";\nimport { classMap } from \"lit-html/directives/class-map\";\nimport \"@polymer/app-layout/app-header-layout/app-header-layout\";\nimport \"@polymer/app-layout/app-header/app-header\";\nimport \"@polymer/app-layout/app-scroll-effects/effects/waterfall\";\nimport \"@polymer/app-layout/app-toolbar/app-toolbar\";\nimport \"@polymer/app-route/app-route\";\nimport \"@polymer/paper-icon-button/paper-icon-button\";\nimport \"@material/mwc-button\";\nimport \"@polymer/paper-item/paper-item\";\nimport \"@polymer/paper-listbox/paper-listbox\";\nimport \"@polymer/paper-menu-button/paper-menu-button\";\nimport \"@polymer/paper-tabs/paper-tab\";\nimport \"@polymer/paper-tabs/paper-tabs\";\nimport { HassEntities } from \"home-assistant-js-websocket\";\n\nimport scrollToTarget from \"../../common/dom/scroll-to-target\";\n\nimport \"../../layouts/ha-app-layout\";\nimport \"../../components/ha-start-voice-button\";\nimport \"../../components/ha-paper-icon-button-arrow-next\";\nimport \"../../components/ha-paper-icon-button-arrow-prev\";\nimport \"../../components/ha-icon\";\nimport { loadModule, loadCSS, loadJS } from \"../../common/dom/load_resource\";\nimport { subscribeNotifications } from \"../../data/ws-notifications\";\nimport { debounce } from \"../../common/util/debounce\";\nimport { HomeAssistant } from \"../../types\";\nimport { LovelaceConfig } from \"../../data/lovelace\";\nimport { navigate } from \"../../common/navigate\";\nimport { fireEvent } from \"../../common/dom/fire_event\";\nimport { computeNotifications } from \"./common/compute-notifications\";\nimport { swapView } from \"./editor/config-util\";\n\nimport \"./components/notifications/hui-notification-drawer\";\nimport \"./components/notifications/hui-notifications-button\";\nimport \"./hui-view\";\n// Not a duplicate import, this one is for type\n// tslint:disable-next-line\nimport { HUIView } from \"./hui-view\";\nimport { createCardElement } from \"./common/create-card-element\";\nimport { showEditViewDialog } from \"./editor/view-editor/show-edit-view-dialog\";\nimport { showEditLovelaceDialog } from \"./editor/lovelace-editor/show-edit-lovelace-dialog\";\nimport { Lovelace } from \"./types\";\nimport { afterNextRender } from \"../../common/util/render-status\";\nimport { haStyle } from \"../../resources/styles\";\nimport { computeRTLDirection } from \"../../common/util/compute_rtl\";\n\n// CSS and JS should only be imported once. Modules and HTML are safe.\nconst CSS_CACHE = {};\nconst JS_CACHE = {};\n\nlet loadedUnusedEntities = false;\n\nclass HUIRoot extends LitElement {\n  @property() public hass?: HomeAssistant;\n  @property() public lovelace?: Lovelace;\n  @property() public columns?: number;\n  @property() public narrow?: boolean;\n  @property() public route?: { path: string; prefix: string };\n  @property() private _routeData?: { view: string };\n  @property() private _curView?: number | \"hass-unused-entities\";\n  @property() private _notificationsOpen = false;\n  @property() private _persistentNotifications?: Notification[];\n  private _viewCache?: { [viewId: string]: HUIView };\n\n  private _debouncedConfigChanged: () => void;\n  private _unsubNotifications?: () => void;\n\n  constructor() {\n    super();\n    // The view can trigger a re-render when it knows that certain\n    // web components have been loaded.\n    this._debouncedConfigChanged = debounce(\n      () => this._selectView(this._curView, true),\n      100,\n      false\n    );\n  }\n\n  public connectedCallback(): void {\n    super.connectedCallback();\n    this._unsubNotifications = subscribeNotifications(\n      this.hass!.connection,\n      (notifications) => {\n        this._persistentNotifications = notifications;\n      }\n    );\n  }\n\n  public disconnectedCallback(): void {\n    super.disconnectedCallback();\n    if (this._unsubNotifications) {\n      this._unsubNotifications();\n    }\n  }\n\n  protected render(): TemplateResult | void {\n    return html`\n    <app-route .route=\"${this.route}\" pattern=\"/:view\" data=\"${\n      this._routeData\n    }\" @data-changed=\"${this._routeDataChanged}\"></app-route>\n    <hui-notification-drawer\n      .hass=\"${this.hass}\"\n      .notifications=\"${this._notifications}\"\n      .open=\"${this._notificationsOpen}\"\n      @open-changed=\"${this._handleNotificationsOpenChanged}\"\n      .narrow=\"${this.narrow}\"\n    ></hui-notification-drawer>\n    <ha-app-layout id=\"layout\">\n      <app-header slot=\"header\" effects=\"waterfall\" class=\"${classMap({\n        \"edit-mode\": this._editMode,\n      })}\" fixed condenses>\n        ${\n          this._editMode\n            ? html`\n                <app-toolbar class=\"edit-mode\">\n                  <paper-icon-button\n                    icon=\"hass:close\"\n                    @click=\"${this._editModeDisable}\"\n                  ></paper-icon-button>\n                  <div main-title>\n                    ${this.config.title ||\n                      this.hass!.localize(\"ui.panel.lovelace.editor.header\")}\n                    <paper-icon-button\n                      icon=\"hass:pencil\"\n                      class=\"edit-icon\"\n                      @click=\"${this._editLovelace}\"\n                    ></paper-icon-button>\n                  </div>\n                  <paper-icon-button\n                    icon=\"hass:help-circle\"\n                    title=\"Help\"\n                    @click=\"${this._handleHelp}\"\n                  ></paper-icon-button>\n                  <paper-menu-button\n                    no-animations\n                    horizontal-align=\"right\"\n                    horizontal-offset=\"-5\"\n                  >\n                    <paper-icon-button\n                      icon=\"hass:dots-vertical\"\n                      slot=\"dropdown-trigger\"\n                    ></paper-icon-button>\n                    <paper-listbox\n                      @iron-select=\"${this._deselect}\"\n                      slot=\"dropdown-content\"\n                    >\n                      <paper-item @click=\"${this.lovelace!.enableFullEditMode}\"\n                        >${this.hass!.localize(\n                          \"ui.panel.lovelace.editor.menu.raw_editor\"\n                        )}</paper-item\n                      >\n                    </paper-listbox>\n                  </paper-menu-button>\n                </app-toolbar>\n              `\n            : /* IoB */ this._hideToolbar ? \"\" : html`\n                <app-toolbar>\n                  <!-- Disabled for IoB -->\n                  <!--ha-menu-button></ha-menu-button-->\n                  <div main-title>${this.config.title || \"Home Assistant\"}</div>\n                  <hui-notifications-button\n                    .hass=\"${this.hass}\"\n                    .opened=\"${this._notificationsOpen}\"\n                    @opened-changed=\"${this._handleNotificationsOpenChanged}\"\n                    .notifications=\"${this._notifications}\"\n                  ></hui-notifications-button>\n                  <ha-start-voice-button\n                    .hass=\"${this.hass}\"\n                  ></ha-start-voice-button>\n                  <paper-menu-button\n                    no-animations\n                    horizontal-align=\"right\"\n                    horizontal-offset=\"-5\"\n                  >\n                    <paper-icon-button\n                      icon=\"hass:dots-vertical\"\n                      slot=\"dropdown-trigger\"\n                    ></paper-icon-button>\n                    <paper-listbox\n                      @iron-select=\"${this._deselect}\"\n                      slot=\"dropdown-content\"\n                    >\n                      ${this._yamlMode\n                        ? html`\n                            <paper-item @click=\"${this._handleRefresh}\"\n                              >${this.hass!.localize(\n                                \"ui.panel.lovelace.menu.refresh\"\n                              )}</paper-item\n                            >\n                          `\n                        : \"\"}\n                      <paper-item @click=\"${this._handleUnusedEntities}\"\n                        >${this.hass!.localize(\n                          \"ui.panel.lovelace.menu.unused_entities\"\n                        )}</paper-item\n                      >\n                      <paper-item @click=\"${this._editModeEnable}\"\n                        >${this.hass!.localize(\n                          \"ui.panel.lovelace.menu.configure_ui\"\n                        )}</paper-item\n                      >\n                      <paper-item @click=\"${this._handleHelp}\"\n                        >${this.hass!.localize(\n                          \"ui.panel.lovelace.menu.help\"\n                        )}</paper-item\n                      >\n                    </paper-listbox>\n                  </paper-menu-button>\n                </app-toolbar>\n              `\n        }\n\n        ${\n          this.lovelace!.config.views.length > 1 || this._editMode\n            ? html`\n                <div sticky>\n                  <paper-tabs\n                    scrollable\n                    .selected=\"${this._curView}\"\n                    @iron-activate=\"${this._handleViewSelected}\"\n                    dir=\"${computeRTLDirection(this.hass!)}\"\n                  >\n                    ${this.lovelace!.config.views.map(\n                      (view) => html`\n                        <paper-tab>\n                          ${this._editMode\n                            ? html`\n                                <ha-paper-icon-button-arrow-prev\n                                  title=\"Move view left\"\n                                  class=\"edit-icon view\"\n                                  @click=\"${this._moveViewLeft}\"\n                                  ?disabled=\"${this._curView === 0}\"\n                                ></ha-paper-icon-button-arrow-prev>\n                              `\n                            : \"\"}\n                          ${view.icon\n                            ? html`\n                                <ha-icon\n                                  title=\"${view.title}\"\n                                  .icon=\"${view.icon}\"\n                                ></ha-icon>\n                              `\n                            : view.title || \"Unnamed view\"}\n                          ${this._editMode\n                            ? html`\n                                <ha-icon\n                                  title=\"Edit view\"\n                                  class=\"edit-icon view\"\n                                  icon=\"hass:pencil\"\n                                  @click=\"${this._editView}\"\n                                ></ha-icon>\n                                <ha-paper-icon-button-arrow-next\n                                  title=\"Move view right\"\n                                  class=\"edit-icon view\"\n                                  @click=\"${this._moveViewRight}\"\n                                  ?disabled=\"${(this._curView! as number) +\n                                    1 ===\n                                    this.lovelace!.config.views.length}\"\n                                ></ha-paper-icon-button-arrow-next>\n                              `\n                            : \"\"}\n                        </paper-tab>\n                      `\n                    )}\n                    ${this._editMode\n                      ? html`\n                          <paper-icon-button\n                            id=\"add-view\"\n                            @click=\"${this._addView}\"\n                            title=\"${this.hass!.localize(\n                              \"ui.panel.lovelace.editor.edit_view.add\"\n                            )}\"\n                            icon=\"hass:plus\"\n                          ></paper-icon-button>\n                        `\n                      : \"\"}\n                  </paper-tabs>\n                </div>\n              `\n            : \"\"\n        }\n      </app-header>\n      <div id='view' class=\"${classMap({\n        \"tabs-hidden\": this.lovelace!.config.views.length < 2,\n      })}\" @ll-rebuild='${this._debouncedConfigChanged}'></div>\n    </app-header-layout>\n    `;\n  }\n\n  static get styles(): CSSResult[] {\n    return [\n      haStyle,\n      css`\n        :host {\n          -ms-user-select: none;\n          -webkit-user-select: none;\n          -moz-user-select: none;\n          --dark-color: #455a64;\n          --text-dark-color: #fff;\n        }\n\n        ha-app-layout {\n          min-height: 100%;\n        }\n        paper-menu-button {\n          padding: 0;\n        }\n        paper-tabs {\n          margin-left: 12px;\n          --paper-tabs-selection-bar-color: var(--text-primary-color, #fff);\n          text-transform: uppercase;\n        }\n        .edit-mode {\n          background-color: var(--dark-color, #455a64);\n          color: var(--text-dark-color);\n        }\n        .edit-mode div[main-title] {\n          pointer-events: auto;\n        }\n        paper-tab.iron-selected .edit-icon {\n          display: inline-flex;\n        }\n        .edit-icon {\n          color: var(--accent-color);\n          padding-left: 8px;\n        }\n        .edit-icon[disabled] {\n          color: var(--disabled-text-color);\n        }\n        .edit-icon.view {\n          display: none;\n        }\n        #add-view {\n          position: absolute;\n          height: 44px;\n        }\n        #add-view ha-icon {\n          background-color: var(--accent-color);\n          border-radius: 5px;\n          margin-top: 4px;\n        }\n        app-toolbar a {\n          color: var(--text-primary-color, white);\n        }\n        mwc-button.warning:not([disabled]) {\n          color: var(--google-red-500);\n        }\n        #view {\n          min-height: calc(100vh - 112px);\n          /**\n         * Since we only set min-height, if child nodes need percentage\n         * heights they must use absolute positioning so we need relative\n         * positioning here.\n         *\n         * https://www.w3.org/TR/CSS2/visudet.html#the-height-property\n         */\n          position: relative;\n        }\n        #view.tabs-hidden {\n          min-height: calc(100vh - 64px);\n        }\n        paper-item {\n          cursor: pointer;\n        }\n      `,\n    ];\n  }\n\n  protected updated(changedProperties: PropertyValues): void {\n    super.updated(changedProperties);\n\n    const view = this._viewRoot;\n    const huiView = view.lastChild as HUIView;\n\n    if (changedProperties.has(\"columns\") && huiView) {\n      huiView.columns = this.columns;\n    }\n\n    if (changedProperties.has(\"hass\") && huiView) {\n      huiView.hass = this.hass;\n    }\n\n    let newSelectView;\n    let force = false;\n\n    if (changedProperties.has(\"route\")) {\n      const views = this.config && this.config.views;\n      if (\n        this.route!.path === \"\" &&\n        this.route!.prefix === \"/lovelace\" &&\n        views\n      ) {\n        navigate(this, `/lovelace/${views[0].path || 0}`, true);\n        newSelectView = 0;\n      } else if (this._routeData!.view === \"hass-unused-entities\") {\n        newSelectView = \"hass-unused-entities\";\n      } else if (this._routeData!.view) {\n        const selectedView = this._routeData!.view;\n        const selectedViewInt = parseInt(selectedView, 10);\n        let index = 0;\n        for (let i = 0; i < views.length; i++) {\n          if (views[i].path === selectedView || i === selectedViewInt) {\n            index = i;\n            break;\n          }\n        }\n        newSelectView = index;\n      }\n    }\n\n    if (changedProperties.has(\"lovelace\")) {\n      const oldLovelace = changedProperties.get(\"lovelace\") as\n        | Lovelace\n        | undefined;\n\n      if (!oldLovelace || oldLovelace.config !== this.lovelace!.config) {\n        this._loadResources(this.lovelace!.config.resources || []);\n        // On config change, recreate the current view from scratch.\n        force = true;\n        // Recalculate to see if we need to adjust content area for tab bar\n        fireEvent(this, \"iron-resize\");\n      }\n\n      if (!oldLovelace || oldLovelace.editMode !== this.lovelace!.editMode) {\n        // On edit mode change, recreate the current view from scratch\n        force = true;\n        // Recalculate to see if we need to adjust content area for tab bar\n        fireEvent(this, \"iron-resize\");\n      }\n    }\n\n    if (newSelectView !== undefined || force) {\n      if (force && newSelectView === undefined) {\n        newSelectView = this._curView;\n      }\n      this._selectView(newSelectView, force);\n    }\n  }\n\n  private get _notifications() {\n    return this._updateNotifications(\n      this.hass!.states,\n      this._persistentNotifications! || []\n    );\n  }\n  private get _hideToolbar(): boolean {\n    return (\n      this.config.hideToolbar === true &&\n      window.location.search.indexOf(\"toolbar\") === -1\n    );\n  }\n\n  private get config(): LovelaceConfig {\n    return this.lovelace!.config;\n  }\n\n  private get _yamlMode(): boolean {\n    return this.lovelace!.mode === \"yaml\";\n  }\n\n  private get _editMode() {\n    return this.lovelace!.editMode;\n  }\n\n  private get _layout(): any {\n    return this.shadowRoot!.getElementById(\"layout\");\n  }\n\n  private get _viewRoot(): HTMLDivElement {\n    return this.shadowRoot!.getElementById(\"view\") as HTMLDivElement;\n  }\n\n  private _routeDataChanged(ev): void {\n    this._routeData = ev.detail.value;\n  }\n\n  private _handleNotificationsOpenChanged(ev): void {\n    this._notificationsOpen = ev.detail.value;\n  }\n\n  private _updateNotifications(\n    states: HassEntities,\n    persistent: unknown[]\n  ): unknown[] {\n    const configurator = computeNotifications(states);\n    return persistent.concat(configurator);\n  }\n\n  private _handleRefresh(): void {\n    fireEvent(this, \"config-refresh\");\n  }\n\n  private _handleUnusedEntities(): void {\n    navigate(this, `/lovelace/hass-unused-entities`);\n  }\n\n  private _deselect(ev): void {\n    ev.target.selected = null;\n  }\n\n  private _handleHelp(): void {\n    // window.open(\"https://www.home-assistant.io/lovelace/\", \"_blank\");\n    // IoB\n    window.open(\"https://www.iobroker.net/#en/adapters/adapterref/iobroker.lovelace/README.md\", \"_blank\");\n  }\n\n  private _editModeEnable(): void {\n    if (this._yamlMode) {\n      window.alert(\"The edit UI is not available when in YAML mode.\");\n      return;\n    }\n    this.lovelace!.setEditMode(true);\n    if (this.config.views.length < 2) {\n      fireEvent(this, \"iron-resize\");\n    }\n  }\n\n  private _editModeDisable(): void {\n    this.lovelace!.setEditMode(false);\n    if (this.config.views.length < 2) {\n      fireEvent(this, \"iron-resize\");\n    }\n  }\n\n  private _editLovelace() {\n    showEditLovelaceDialog(this, this.lovelace!);\n  }\n\n  private _editView() {\n    showEditViewDialog(this, {\n      lovelace: this.lovelace!,\n      viewIndex: this._curView as number,\n    });\n  }\n\n  private _moveViewLeft() {\n    const lovelace = this.lovelace!;\n    const oldIndex = this._curView as number;\n    const newIndex = (this._curView as number) - 1;\n    this._curView = newIndex;\n    lovelace.saveConfig(swapView(lovelace.config, oldIndex, newIndex));\n  }\n\n  private _moveViewRight() {\n    const lovelace = this.lovelace!;\n    const oldIndex = this._curView as number;\n    const newIndex = (this._curView as number) + 1;\n    this._curView = newIndex;\n    lovelace.saveConfig(swapView(lovelace.config, oldIndex, newIndex));\n  }\n\n  private _addView() {\n    showEditViewDialog(this, {\n      lovelace: this.lovelace!,\n    });\n  }\n\n  private _handleViewSelected(ev) {\n    const viewIndex = ev.detail.selected as number;\n\n    if (viewIndex !== this._curView) {\n      const path = this.config.views[viewIndex].path || viewIndex;\n      navigate(this, `/lovelace/${path}`);\n    }\n    scrollToTarget(this, this._layout.header.scrollTarget);\n  }\n\n  private async _selectView(\n    viewIndex: HUIRoot[\"_curView\"],\n    force: boolean\n  ): Promise<void> {\n    if (!force && this._curView === viewIndex) {\n      return;\n    }\n\n    viewIndex = viewIndex === undefined ? 0 : viewIndex;\n\n    this._curView = viewIndex;\n\n    if (force) {\n      this._viewCache = {};\n    }\n\n    // Recreate a new element to clear the applied themes.\n    const root = this._viewRoot;\n\n    if (root.lastChild) {\n      root.removeChild(root.lastChild);\n    }\n\n    if (viewIndex === \"hass-unused-entities\") {\n      if (!loadedUnusedEntities) {\n        loadedUnusedEntities = true;\n        await import(/* webpackChunkName: \"hui-unused-entities\" */ \"./hui-unused-entities\");\n      }\n      const unusedEntities = document.createElement(\"hui-unused-entities\");\n      unusedEntities.setConfig(this.config);\n      unusedEntities.hass = this.hass!;\n      root.style.background = this.config.background || \"\";\n      root.appendChild(unusedEntities);\n      return;\n    }\n\n    let view;\n    const viewConfig = this.config.views[viewIndex];\n\n    if (!viewConfig) {\n      this._editModeEnable();\n      return;\n    }\n\n    if (!force && this._viewCache![viewIndex]) {\n      view = this._viewCache![viewIndex];\n    } else {\n      await new Promise((resolve) => afterNextRender(resolve));\n\n      if (viewConfig.panel && viewConfig.cards && viewConfig.cards.length > 0) {\n        view = createCardElement(viewConfig.cards[0]);\n        view.isPanel = true;\n      } else {\n        view = document.createElement(\"hui-view\");\n        view.lovelace = this.lovelace;\n        view.columns = this.columns;\n        view.index = viewIndex;\n      }\n      this._viewCache![viewIndex] = view;\n    }\n\n    view.hass = this.hass;\n    root.style.background =\n      viewConfig.background || this.config.background || \"\";\n    root.appendChild(view);\n  }\n\n  private _loadResources(resources) {\n    resources.forEach((resource) => {\n      switch (resource.type) {\n        case \"css\":\n          if (resource.url in CSS_CACHE) {\n            break;\n          }\n          CSS_CACHE[resource.url] = loadCSS(resource.url);\n          break;\n\n        case \"js\":\n          if (resource.url in JS_CACHE) {\n            break;\n          }\n          JS_CACHE[resource.url] = loadJS(resource.url);\n          break;\n\n        case \"module\":\n          loadModule(resource.url);\n          break;\n\n        case \"html\":\n          import(/* webpackChunkName: \"import-href-polyfill\" */ \"../../resources/html-import/import-href\").then(\n            ({ importHref }) => importHref(resource.url)\n          );\n          break;\n\n        default:\n          // tslint:disable-next-line\n          console.warn(`Unknown resource type specified: ${resource.type}`);\n      }\n    });\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-root\": HUIRoot;\n  }\n}\n\ncustomElements.define(\"hui-root\", HUIRoot);\n","import {\n  html,\n  LitElement,\n  PropertyValues,\n  property,\n  PropertyDeclarations,\n  TemplateResult,\n} from \"lit-element\";\n\nimport \"../../components/entity/ha-state-label-badge\";\n// This one is for types\n// tslint:disable-next-line\nimport { HaStateLabelBadge } from \"../../components/entity/ha-state-label-badge\";\n\nimport applyThemesOnElement from \"../../common/dom/apply_themes_on_element\";\n\nimport { LovelaceViewConfig, LovelaceCardConfig } from \"../../data/lovelace\";\nimport { HomeAssistant } from \"../../types\";\nimport { classMap } from \"lit-html/directives/class-map\";\n\nimport { Lovelace, LovelaceCard } from \"./types\";\nimport { createCardElement } from \"./common/create-card-element\";\nimport { computeCardSize } from \"./common/compute-card-size\";\nimport { showEditCardDialog } from \"./editor/card-editor/show-edit-card-dialog\";\nimport { HuiErrorCard } from \"./cards/hui-error-card\";\n\nimport { computeRTL } from \"../../common/util/compute_rtl\";\n\nlet editCodeLoaded = false;\n\n// Find column with < 5 entities, else column with lowest count\nconst getColumnIndex = (columnEntityCount: number[], size: number) => {\n  let minIndex = 0;\n  for (let i = 0; i < columnEntityCount.length; i++) {\n    if (columnEntityCount[i] < 5) {\n      minIndex = i;\n      break;\n    }\n    if (columnEntityCount[i] < columnEntityCount[minIndex]) {\n      minIndex = i;\n    }\n  }\n\n  columnEntityCount[minIndex] += size;\n\n  return minIndex;\n};\n\nexport class HUIView extends LitElement {\n  @property() public hass?: HomeAssistant;\n  @property() public lovelace?: Lovelace;\n  @property() public columns?: number;\n  @property() public index?: number;\n  private _cards: Array<LovelaceCard | HuiErrorCard>;\n  private _badges: Array<{ element: HaStateLabelBadge; entityId: string }>;\n\n  static get properties(): PropertyDeclarations {\n    return {\n      hass: {},\n      lovelace: {},\n      columns: {},\n      index: {},\n      _cards: {},\n      _badges: {},\n    };\n  }\n\n  constructor() {\n    super();\n    this._cards = [];\n    this._badges = [];\n  }\n\n  // Public to make demo happy\n  public createCardElement(cardConfig: LovelaceCardConfig) {\n    const element = createCardElement(cardConfig) as LovelaceCard;\n    element.hass = this.hass;\n    element.addEventListener(\n      \"ll-rebuild\",\n      (ev) => {\n        // In edit mode let it go to hui-root and rebuild whole view.\n        if (!this.lovelace!.editMode) {\n          ev.stopPropagation();\n          this._rebuildCard(element, cardConfig);\n        }\n      },\n      { once: true }\n    );\n    return element;\n  }\n\n  protected render(): TemplateResult | void {\n    return html`\n      ${this.renderStyles()}\n      <div id=\"badges\"></div>\n      <div id=\"columns\"></div>\n      ${this.lovelace!.editMode\n        ? html`\n            <paper-fab\n              elevated=\"2\"\n              icon=\"hass:plus\"\n              title=\"${this.hass!.localize(\n                \"ui.panel.lovelace.editor.edit_card.add\"\n              )}\"\n              @click=\"${this._addCard}\"\n              class=\"${classMap({\n                rtl: computeRTL(this.hass!),\n              })}\"\n            ></paper-fab>\n          `\n        : \"\"}\n    `;\n  }\n\n  protected renderStyles(): TemplateResult {\n    return html`\n      <style>\n        :host {\n          display: block;\n          padding: 4px 4px 0;\n          transform: translateZ(0);\n          position: relative;\n          min-height: calc(100vh - 155px);\n        }\n\n        #badges {\n          margin: 8px 16px;\n          font-size: 85%;\n          text-align: center;\n        }\n\n        #columns {\n          display: flex;\n          flex-direction: row;\n          justify-content: center;\n        }\n\n        .column {\n          flex-basis: 0;\n          flex-grow: 1;\n          max-width: 500px;\n          overflow-x: hidden;\n        }\n\n        .column > * {\n          display: block;\n          margin: 4px 4px 8px;\n        }\n\n        paper-fab {\n          position: sticky;\n          float: right;\n          bottom: 16px;\n          right: 16px;\n          z-index: 1;\n        }\n\n        paper-fab.rtl {\n          float: left;\n          right: auto;\n          left: 16px;\n        }\n\n        @media (max-width: 500px) {\n          :host {\n            padding-left: 0;\n            padding-right: 0;\n          }\n\n          .column > * {\n            margin-left: 0;\n            margin-right: 0;\n          }\n        }\n\n        @media (max-width: 599px) {\n          .column {\n            max-width: 600px;\n          }\n        }\n      </style>\n    `;\n  }\n\n  protected updated(changedProperties: PropertyValues): void {\n    super.updated(changedProperties);\n\n    const lovelace = this.lovelace!;\n\n    if (lovelace.editMode && !editCodeLoaded) {\n      editCodeLoaded = true;\n      import(/* webpackChunkName: \"hui-view-editable\" */ \"./hui-view-editable\");\n    }\n\n    let editModeChanged = false;\n    let configChanged = false;\n\n    if (changedProperties.has(\"lovelace\")) {\n      const oldLovelace = changedProperties.get(\"lovelace\") as Lovelace;\n      editModeChanged =\n        !oldLovelace || lovelace.editMode !== oldLovelace.editMode;\n      configChanged = !oldLovelace || lovelace.config !== oldLovelace.config;\n    }\n\n    if (configChanged) {\n      this._createBadges(lovelace.config.views[this.index!]);\n    } else if (changedProperties.has(\"hass\")) {\n      this._badges.forEach((badge) => {\n        const { element, entityId } = badge;\n        element.hass = this.hass!;\n        element.state = this.hass!.states[entityId];\n      });\n    }\n\n    if (configChanged || editModeChanged || changedProperties.has(\"columns\")) {\n      this._createCards(lovelace.config.views[this.index!]);\n    } else if (changedProperties.has(\"hass\")) {\n      this._cards.forEach((element) => {\n        element.hass = this.hass;\n      });\n    }\n  }\n\n  private _addCard(): void {\n    showEditCardDialog(this, {\n      lovelace: this.lovelace!,\n      path: [this.index!],\n    });\n  }\n\n  private _createBadges(config: LovelaceViewConfig): void {\n    const root = this.shadowRoot!.getElementById(\"badges\")!;\n\n    while (root.lastChild) {\n      root.removeChild(root.lastChild);\n    }\n\n    if (!config || !config.badges || !Array.isArray(config.badges)) {\n      root.style.display = \"none\";\n      this._badges = [];\n      return;\n    }\n\n    const elements: HUIView[\"_badges\"] = [];\n    for (const entityId of config.badges) {\n      const element = document.createElement(\"ha-state-label-badge\");\n      element.hass = this.hass;\n      element.state = this.hass!.states[entityId];\n      elements.push({ element, entityId });\n      root.appendChild(element);\n    }\n    this._badges = elements;\n    root.style.display = elements.length > 0 ? \"block\" : \"none\";\n  }\n\n  private _createCards(config: LovelaceViewConfig): void {\n    const root = this.shadowRoot!.getElementById(\"columns\")!;\n\n    while (root.lastChild) {\n      root.removeChild(root.lastChild);\n    }\n\n    if (!config || !config.cards || !Array.isArray(config.cards)) {\n      this._cards = [];\n      return;\n    }\n\n    const elements: LovelaceCard[] = [];\n    const elementsToAppend: HTMLElement[] = [];\n    config.cards.forEach((cardConfig, cardIndex) => {\n      const element = this.createCardElement(cardConfig);\n      elements.push(element);\n\n      if (!this.lovelace!.editMode) {\n        elementsToAppend.push(element);\n        return;\n      }\n\n      const wrapper = document.createElement(\"hui-card-options\");\n      wrapper.hass = this.hass;\n      wrapper.lovelace = this.lovelace;\n      wrapper.path = [this.index!, cardIndex];\n      wrapper.appendChild(element);\n      elementsToAppend.push(wrapper);\n    });\n\n    let columns: HTMLElement[][] = [];\n    const columnEntityCount: number[] = [];\n    for (let i = 0; i < this.columns!; i++) {\n      columns.push([]);\n      columnEntityCount.push(0);\n    }\n\n    elements.forEach((el, index) => {\n      const cardSize = computeCardSize(el);\n      // Element to append might be the wrapped card when we're editing.\n      columns[getColumnIndex(columnEntityCount, cardSize)].push(\n        elementsToAppend[index]\n      );\n    });\n\n    // Remove empty columns\n    columns = columns.filter((val) => val.length > 0);\n\n    columns.forEach((column) => {\n      const columnEl = document.createElement(\"div\");\n      columnEl.classList.add(\"column\");\n      column.forEach((el) => columnEl.appendChild(el));\n      root.appendChild(columnEl);\n    });\n\n    this._cards = elements;\n\n    if (\"theme\" in config) {\n      applyThemesOnElement(root, this.hass!.themes, config.theme);\n    }\n  }\n\n  private _rebuildCard(\n    cardElToReplace: LovelaceCard,\n    config: LovelaceCardConfig\n  ): void {\n    const newCardEl = this.createCardElement(config);\n    cardElToReplace.parentElement!.replaceChild(newCardEl, cardElToReplace);\n    this._cards = this._cards!.map((curCardEl) =>\n      curCardEl === cardElToReplace ? newCardEl : curCardEl\n    );\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-view\": HUIView;\n  }\n}\n\ncustomElements.define(\"hui-view\", HUIView);\n","import {\n  html,\n  LitElement,\n  TemplateResult,\n  customElement,\n  property,\n  css,\n  CSSResult,\n} from \"lit-element\";\nimport \"@material/mwc-button\";\n\nimport \"../../../components/ha-icon\";\n\nimport { callService } from \"../common/call-service\";\nimport { EntityRow, CallServiceConfig } from \"../entity-rows/types\";\nimport { HomeAssistant } from \"../../../types\";\n\n@customElement(\"hui-call-service-row\")\nclass HuiCallServiceRow extends LitElement implements EntityRow {\n  public hass?: HomeAssistant;\n\n  @property() private _config?: CallServiceConfig;\n\n  public setConfig(config: CallServiceConfig): void {\n    if (!config || !config.name || !config.service) {\n      throw new Error(\"Error in card configuration.\");\n    }\n\n    this._config = { icon: \"hass:remote\", action_name: \"Run\", ...config };\n  }\n\n  protected render(): TemplateResult | void {\n    if (!this._config) {\n      return html``;\n    }\n\n    return html`\n      <ha-icon .icon=\"${this._config.icon}\"></ha-icon>\n      <div class=\"flex\">\n        <div>${this._config.name}</div>\n        <mwc-button @click=\"${this._callService}\"\n          >${this._config.action_name}</mwc-button\n        >\n      </div>\n    `;\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      :host {\n        display: flex;\n        align-items: center;\n      }\n      ha-icon {\n        padding: 8px;\n        color: var(--paper-item-icon-color);\n      }\n      .flex {\n        flex: 1;\n        overflow: hidden;\n        margin-left: 16px;\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n      }\n      .flex div {\n        white-space: nowrap;\n        overflow: hidden;\n        text-overflow: ellipsis;\n      }\n      mwc-button {\n        margin-right: -0.57em;\n      }\n    `;\n  }\n\n  private _callService() {\n    callService(this._config!, this.hass!);\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-call-service-row\": HuiCallServiceRow;\n  }\n}\n","import {\n  html,\n  LitElement,\n  TemplateResult,\n  customElement,\n  property,\n} from \"lit-element\";\n\nimport { EntityRow, DividerConfig } from \"../entity-rows/types\";\nimport { HomeAssistant } from \"../../../types\";\n\n@customElement(\"hui-divider-row\")\nclass HuiDividerRow extends LitElement implements EntityRow {\n  public hass?: HomeAssistant;\n\n  @property() private _config?: DividerConfig;\n\n  public setConfig(config): void {\n    if (!config) {\n      throw new Error(\"Error in card configuration.\");\n    }\n\n    this._config = {\n      style: {\n        height: \"1px\",\n        \"background-color\": \"var(--secondary-text-color)\",\n      },\n      ...config,\n    };\n  }\n\n  protected render(): TemplateResult | void {\n    if (!this._config) {\n      return html``;\n    }\n\n    const el = document.createElement(\"div\");\n\n    Object.keys(this._config.style).forEach((prop) => {\n      el.style.setProperty(prop, this._config!.style[prop]);\n    });\n\n    return html`\n      ${el}\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-divider-row\": HuiDividerRow;\n  }\n}\n","import {\n  html,\n  LitElement,\n  TemplateResult,\n  customElement,\n  property,\n  css,\n  CSSResult,\n} from \"lit-element\";\n\nimport { EntityRow, SectionConfig } from \"../entity-rows/types\";\nimport { HomeAssistant } from \"../../../types\";\n\nimport \"../../../components/ha-icon\";\n\n@customElement(\"hui-section-row\")\nclass HuiSectionRow extends LitElement implements EntityRow {\n  public hass?: HomeAssistant;\n\n  @property() private _config?: SectionConfig;\n\n  public setConfig(config: SectionConfig): void {\n    if (!config) {\n      throw new Error(\"Error in card configuration.\");\n    }\n\n    this._config = config;\n  }\n\n  protected render(): TemplateResult | void {\n    if (!this._config) {\n      return html``;\n    }\n\n    return html`\n      <div class=\"divider\"></div>\n      ${this._config.label\n        ? html`\n            <div class=\"label\">${this._config.label}</div>\n          `\n        : html``}\n    `;\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      .label {\n        color: var(--primary-color);\n        margin-left: 8px;\n        margin-bottom: 16px;\n        margin-top: 16px;\n      }\n      .divider {\n        height: 1px;\n        background-color: var(--secondary-text-color);\n        opacity: 0.25;\n        margin-left: -16px;\n        margin-right: -16px;\n        margin-top: 8px;\n      }\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-section-row\": HuiSectionRow;\n  }\n}\n","import {\n  html,\n  LitElement,\n  TemplateResult,\n  customElement,\n  property,\n  css,\n  CSSResult,\n} from \"lit-element\";\n\nimport { EntityRow, WeblinkConfig } from \"../entity-rows/types\";\nimport { HomeAssistant } from \"../../../types\";\n\nimport \"../../../components/ha-icon\";\n\n@customElement(\"hui-weblink-row\")\nclass HuiWeblinkRow extends LitElement implements EntityRow {\n  public hass?: HomeAssistant;\n\n  @property() private _config?: WeblinkConfig;\n\n  public setConfig(config: WeblinkConfig): void {\n    if (!config || !config.url) {\n      throw new Error(\"Invalid Configuration: 'url' required\");\n    }\n\n    this._config = {\n      icon: \"hass:link\",\n      name: config.url,\n      ...config,\n    };\n  }\n\n  protected render(): TemplateResult | void {\n    if (!this._config) {\n      return html``;\n    }\n\n    return html`\n      <a href=\"${this._config.url}\" target=\"_blank\">\n        <ha-icon .icon=\"${this._config.icon}\"></ha-icon>\n        <div>${this._config.name}</div>\n      </a>\n    `;\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      a {\n        display: flex;\n        align-items: center;\n        color: var(--primary-color);\n      }\n      ha-icon {\n        padding: 8px;\n        color: var(--paper-item-icon-color);\n      }\n      div {\n        flex: 1;\n        white-space: nowrap;\n        overflow: hidden;\n        text-overflow: ellipsis;\n        margin-left: 16px;\n      }\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-weblink-row\": HuiWeblinkRow;\n  }\n}\n","import \"@polymer/iron-image/iron-image\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport { EventsMixin } from \"../../mixins/events-mixin\";\n\n/*\n * @appliesMixin EventsMixin\n */\nclass HaEntityMarker extends EventsMixin(PolymerElement) {\n  static get template() {\n    return html`\n      <style include=\"iron-positioning\"></style>\n      <style>\n        .marker {\n          vertical-align: top;\n          position: relative;\n          display: block;\n          margin: 0 auto;\n          width: 2.5em;\n          text-align: center;\n          height: 2.5em;\n          line-height: 2.5em;\n          font-size: 1.5em;\n          border-radius: 50%;\n          border: 0.1em solid\n            var(--ha-marker-color, var(--default-primary-color));\n          color: rgb(76, 76, 76);\n          background-color: white;\n        }\n        iron-image {\n          border-radius: 50%;\n        }\n      </style>\n\n      <div class=\"marker\">\n        <template is=\"dom-if\" if=\"[[entityName]]\"\n          >[[entityName]]</template\n        >\n        <template is=\"dom-if\" if=\"[[entityPicture]]\">\n          <iron-image\n            sizing=\"cover\"\n            class=\"fit\"\n            src=\"[[entityPicture]]\"\n          ></iron-image>\n        </template>\n      </div>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: {\n        type: Object,\n      },\n\n      entityId: {\n        type: String,\n        value: \"\",\n      },\n\n      entityName: {\n        type: String,\n        value: null,\n      },\n\n      entityPicture: {\n        type: String,\n        value: null,\n      },\n    };\n  }\n\n  ready() {\n    super.ready();\n    this.addEventListener(\"click\", (ev) => this.badgeTap(ev));\n  }\n\n  badgeTap(ev) {\n    ev.stopPropagation();\n    if (this.entityId) {\n      this.fire(\"hass-more-info\", { entityId: this.entityId });\n    }\n  }\n}\n\ncustomElements.define(\"ha-entity-marker\", HaEntityMarker);\n","import { TemplateResult } from \"lit-element\";\n\ntype LoadedRoundSlider = Promise<{\n  roundSliderStyle: TemplateResult;\n  jQuery: any;\n}>;\n\nlet loaded: LoadedRoundSlider;\n\nexport const loadRoundslider = async (): LoadedRoundSlider => {\n  if (!loaded) {\n    loaded = import(/* webpackChunkName: \"jquery-roundslider\" */ \"./jquery.roundslider\");\n  }\n  return loaded;\n};\n"],"sourceRoot":""}