{"version":3,"sources":["webpack:///./src/common/datetime/relative_time.ts","webpack:///./src/common/string/compare.ts","webpack:///./src/components/entity/state-info.js","webpack:///./src/components/ha-relative-time.js","webpack:///./src/dialogs/domain-toggler/show-dialog-domain-toggler.ts","webpack:///./src/panels/config/cloud/ha-config-cloud-google-assistant.ts"],"names":["tests","langKey","relativeTime","dateObj","localize","options","compareTime","Date","delta","getTime","tense","Math","abs","timeDesc","i","length","floor","undefined","includeTense","compare","a","b","caseInsensitiveCompare","toLowerCase","StateInfo","PolymerElement","template","html","styleTemplate","stateBadgeTemplate","infoTemplate","properties","hass","Object","stateObj","inDialog","type","Boolean","value","rtl","reflectToAttribute","computed","computeStateName","computeRTL","customElements","define","HaRelativeTime","LocalizeMixin","datetime","String","observer","datetimeObj","parsedDateTime","constructor","updateRelative","bind","connectedCallback","updateInterval","setInterval","disconnectedCallback","clearInterval","datetimeChanged","newVal","datetimeObjChanged","root","dom","innerHTML","loadDomainTogglerDialog","showDomainTogglerDialog","element","dialogParams","fireEvent","dialogTag","dialogImport","DEFAULT_CONFIG_EXPOSE","configIsExposed","config","should_expose","CloudGoogleAssistant","customElement","property","memoizeOne","filter","generateFilter","include_domains","include_entities","exclude_domains","exclude_entities","_entities","emptyFilter","isEmptyFilter","cloudStatus","google_entities","filterFunc","_getEntityFilterFunc","selected","cards","map","entity","states","entity_id","_entityConfigs","isExposed","_showMoreInfo","traits","trait","substr","lastIndexOf","join","_exposeChanged","might_2fa","disable_2fa","_disable2FAChanged","narrow","_openDomainToggler","changedProps","_fetchData","has","prefs","google_entity_configs","entities","fetchCloudGoogleEntities","sort","stateA","stateB","ev","entityId","currentTarget","newExposed","detail","_updateExposed","curExposed","_updateConfig","_ensureEntitySync","newDisable2FA","curDisable2FA","values","updatedConfig","updateCloudGoogleEntityConfig","_ensureStatusReload","domains","computeDomain","idx","self","indexOf","toggleDomain","domain","turnOn","forEach","_popstateReloadStatusAttached","parent","parentElement","window","addEventListener","once","_popstateSyncAttached","showToast","message","cloudSyncGoogleAssistant","css","LitElement"],"mappings":"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","file":"1.chunk.js","sourcesContent":["import { LocalizeFunc } from \"../translations/localize\";\n\n/**\n * Calculate a string representing a date object as relative time from now.\n *\n * Example output: 5 minutes ago, in 3 days.\n */\nconst tests = [60, 60, 24, 7];\nconst langKey = [\"second\", \"minute\", \"hour\", \"day\"];\n\nexport default function relativeTime(\n  dateObj: Date,\n  localize: LocalizeFunc,\n  options: {\n    compareTime?: Date;\n    includeTense?: boolean;\n  } = {}\n): string {\n  const compareTime = options.compareTime || new Date();\n  let delta = (compareTime.getTime() - dateObj.getTime()) / 1000;\n  const tense = delta >= 0 ? \"past\" : \"future\";\n  delta = Math.abs(delta);\n\n  let timeDesc;\n\n  for (let i = 0; i < tests.length; i++) {\n    if (delta < tests[i]) {\n      delta = Math.floor(delta);\n      timeDesc = localize(\n        `ui.components.relative_time.duration.${langKey[i]}`,\n        \"count\",\n        delta\n      );\n      break;\n    }\n\n    delta /= tests[i];\n  }\n\n  if (timeDesc === undefined) {\n    delta = Math.floor(delta);\n    timeDesc = localize(\n      \"ui.components.relative_time.duration.week\",\n      \"count\",\n      delta\n    );\n  }\n\n  return options.includeTense === false\n    ? timeDesc\n    : localize(`ui.components.relative_time.${tense}`, \"time\", timeDesc);\n}\n","export const compare = (a: string, b: string) => {\n  if (a < b) {\n    return -1;\n  }\n  if (a > b) {\n    return 1;\n  }\n\n  return 0;\n};\n\nexport const caseInsensitiveCompare = (a: string, b: string) =>\n  compare(a.toLowerCase(), b.toLowerCase());\n","import { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport \"../ha-relative-time\";\nimport \"./state-badge\";\nimport computeStateName from \"../../common/entity/compute_state_name\";\nimport { computeRTL } from \"../../common/util/compute_rtl\";\n\nclass StateInfo extends PolymerElement {\n  static get template() {\n    return html`\n      ${this.styleTemplate} ${this.stateBadgeTemplate} ${this.infoTemplate}\n    `;\n  }\n\n  static get styleTemplate() {\n    return html`\n      <style>\n        :host {\n          @apply --paper-font-body1;\n          min-width: 120px;\n          white-space: nowrap;\n        }\n\n        state-badge {\n          float: left;\n        }\n\n        :host([rtl]) state-badge {\n          float: right;\n        }\n\n        .info {\n          margin-left: 56px;\n        }\n\n        :host([rtl]) .info {\n          margin-right: 56px;\n          margin-left: 0;\n          text-align: right;\n        }\n\n        .name {\n          @apply --paper-font-common-nowrap;\n          color: var(--primary-text-color);\n          line-height: 40px;\n        }\n\n        .name[in-dialog],\n        :host([secondary-line]) .name {\n          line-height: 20px;\n        }\n\n        .time-ago,\n        .extra-info,\n        .extra-info > * {\n          @apply --paper-font-common-nowrap;\n          color: var(--secondary-text-color);\n        }\n      </style>\n    `;\n  }\n\n  static get stateBadgeTemplate() {\n    return html`\n      <state-badge state-obj=\"[[stateObj]]\"></state-badge>\n    `;\n  }\n\n  static get infoTemplate() {\n    return html`\n      <div class=\"info\">\n        <div class=\"name\" in-dialog$=\"[[inDialog]]\">\n          [[computeStateName(stateObj)]]\n        </div>\n\n        <template is=\"dom-if\" if=\"[[inDialog]]\">\n          <div class=\"time-ago\">\n            <ha-relative-time\n              hass=\"[[hass]]\"\n              datetime=\"[[stateObj.last_changed]]\"\n            ></ha-relative-time>\n          </div>\n        </template>\n        <template is=\"dom-if\" if=\"[[!inDialog]]\">\n          <div class=\"extra-info\"><slot> </slot></div>\n        </template>\n      </div>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      stateObj: Object,\n      inDialog: {\n        type: Boolean,\n        value: () => false,\n      },\n      rtl: {\n        type: Boolean,\n        reflectToAttribute: true,\n        computed: \"computeRTL(hass)\",\n      },\n    };\n  }\n\n  computeStateName(stateObj) {\n    return computeStateName(stateObj);\n  }\n\n  computeRTL(hass) {\n    return computeRTL(hass);\n  }\n}\n\ncustomElements.define(\"state-info\", StateInfo);\n","import { dom } from \"@polymer/polymer/lib/legacy/polymer.dom\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport relativeTime from \"../common/datetime/relative_time\";\n\nimport LocalizeMixin from \"../mixins/localize-mixin\";\n\n/*\n * @appliesMixin LocalizeMixin\n */\nclass HaRelativeTime extends LocalizeMixin(PolymerElement) {\n  static get properties() {\n    return {\n      hass: Object,\n      datetime: {\n        type: String,\n        observer: \"datetimeChanged\",\n      },\n\n      datetimeObj: {\n        type: Object,\n        observer: \"datetimeObjChanged\",\n      },\n\n      parsedDateTime: Object,\n    };\n  }\n\n  constructor() {\n    super();\n    this.updateRelative = this.updateRelative.bind(this);\n  }\n\n  connectedCallback() {\n    super.connectedCallback();\n    // update every 60 seconds\n    this.updateInterval = setInterval(this.updateRelative, 60000);\n  }\n\n  disconnectedCallback() {\n    super.disconnectedCallback();\n    clearInterval(this.updateInterval);\n  }\n\n  datetimeChanged(newVal) {\n    this.parsedDateTime = newVal ? new Date(newVal) : null;\n\n    this.updateRelative();\n  }\n\n  datetimeObjChanged(newVal) {\n    this.parsedDateTime = newVal;\n\n    this.updateRelative();\n  }\n\n  updateRelative() {\n    const root = dom(this);\n    if (!this.parsedDateTime) {\n      root.innerHTML = this.localize(\"ui.components.relative_time.never\");\n    } else {\n      root.innerHTML = relativeTime(this.parsedDateTime, this.localize);\n    }\n  }\n}\n\ncustomElements.define(\"ha-relative-time\", HaRelativeTime);\n","import { fireEvent } from \"../../common/dom/fire_event\";\n\nexport interface HaDomainTogglerDialogParams {\n  domains: string[];\n  toggleDomain: (domain: string, turnOn: boolean) => void;\n}\n\nexport const loadDomainTogglerDialog = () =>\n  import(/* webpackChunkName: \"dialog-domain-toggler\" */ \"./dialog-domain-toggler\");\n\nexport const showDomainTogglerDialog = (\n  element: HTMLElement,\n  dialogParams: HaDomainTogglerDialogParams\n): void => {\n  fireEvent(element, \"show-dialog\", {\n    dialogTag: \"dialog-domain-toggler\",\n    dialogImport: loadDomainTogglerDialog,\n    dialogParams,\n  });\n};\n","import {\n  LitElement,\n  TemplateResult,\n  html,\n  CSSResult,\n  css,\n  customElement,\n  property,\n} from \"lit-element\";\nimport \"@polymer/paper-toggle-button\";\nimport \"@polymer/paper-icon-button\";\nimport \"../../../layouts/hass-subpage\";\nimport \"../../../layouts/hass-loading-screen\";\nimport \"../../../components/ha-card\";\nimport \"../../../components/entity/state-info\";\nimport { HomeAssistant } from \"../../../types\";\nimport {\n  GoogleEntity,\n  fetchCloudGoogleEntities,\n  CloudStatusLoggedIn,\n  CloudPreferences,\n  updateCloudGoogleEntityConfig,\n  cloudSyncGoogleAssistant,\n  GoogleEntityConfig,\n} from \"../../../data/cloud\";\nimport memoizeOne from \"memoize-one\";\nimport {\n  generateFilter,\n  isEmptyFilter,\n  EntityFilter,\n} from \"../../../common/entity/entity_filter\";\nimport { compare } from \"../../../common/string/compare\";\nimport computeStateName from \"../../../common/entity/compute_state_name\";\nimport { fireEvent } from \"../../../common/dom/fire_event\";\nimport { showToast } from \"../../../util/toast\";\nimport { PolymerChangedEvent } from \"../../../polymer-types\";\nimport { showDomainTogglerDialog } from \"../../../dialogs/domain-toggler/show-dialog-domain-toggler\";\nimport computeDomain from \"../../../common/entity/compute_domain\";\n\nconst DEFAULT_CONFIG_EXPOSE = true;\n\nconst configIsExposed = (config: GoogleEntityConfig) =>\n  config.should_expose === undefined\n    ? DEFAULT_CONFIG_EXPOSE\n    : config.should_expose;\n\n@customElement(\"ha-config-cloud-google-assistant\")\nclass CloudGoogleAssistant extends LitElement {\n  @property() public hass!: HomeAssistant;\n  @property() public cloudStatus!: CloudStatusLoggedIn;\n  @property() public narrow!: boolean;\n  @property() private _entities?: GoogleEntity[];\n  @property()\n  private _entityConfigs: CloudPreferences[\"google_entity_configs\"] = {};\n  private _popstateSyncAttached = false;\n  private _popstateReloadStatusAttached = false;\n\n  private _getEntityFilterFunc = memoizeOne((filter: EntityFilter) =>\n    generateFilter(\n      filter.include_domains,\n      filter.include_entities,\n      filter.exclude_domains,\n      filter.exclude_entities\n    )\n  );\n\n  protected render(): TemplateResult | void {\n    if (this._entities === undefined) {\n      return html`\n        <hass-loading-screen></hass-loading-screen>\n      `;\n    }\n    const emptyFilter = isEmptyFilter(this.cloudStatus.google_entities);\n    const filterFunc = this._getEntityFilterFunc(\n      this.cloudStatus.google_entities\n    );\n    let selected = 0;\n    const cards = this._entities.map((entity) => {\n      const stateObj = this.hass.states[entity.entity_id];\n      const config = this._entityConfigs[entity.entity_id] || {};\n      const isExposed = emptyFilter\n        ? configIsExposed(config)\n        : filterFunc(entity.entity_id);\n      if (isExposed) {\n        selected++;\n      }\n\n      return html`\n        <ha-card>\n          <div class=\"card-content\">\n            <state-info\n              .hass=${this.hass}\n              .stateObj=${stateObj}\n              secondary-line\n              @click=${this._showMoreInfo}\n            >\n              ${entity.traits\n                .map((trait) => trait.substr(trait.lastIndexOf(\".\") + 1))\n                .join(\", \")}\n            </state-info>\n            <paper-toggle-button\n              .entityId=${entity.entity_id}\n              .disabled=${!emptyFilter}\n              .checked=${isExposed}\n              @checked-changed=${this._exposeChanged}\n            >\n              Expose to Google Assistant\n            </paper-toggle-button>\n            ${entity.might_2fa\n              ? html`\n                  <paper-toggle-button\n                    .entityId=${entity.entity_id}\n                    .checked=${Boolean(config.disable_2fa)}\n                    @checked-changed=${this._disable2FAChanged}\n                  >\n                    Disable two factor authentication\n                  </paper-toggle-button>\n                `\n              : \"\"}\n          </div>\n        </ha-card>\n      `;\n    });\n\n    return html`\n      <hass-subpage header=\"Google Assistant\">\n        <span slot=\"toolbar-icon\">\n          ${selected}${!this.narrow\n            ? html`\n                selected\n              `\n            : \"\"}\n        </span>\n        <paper-icon-button\n          slot=\"toolbar-icon\"\n          icon=\"hass:tune\"\n          @click=${this._openDomainToggler}\n        ></paper-icon-button>\n        ${!emptyFilter\n          ? html`\n              <div class=\"banner\">\n                Editing which entities are exposed via this UI is disabled\n                because you have configured entity filters in\n                configuration.yaml.\n              </div>\n            `\n          : \"\"}\n        <div class=\"content\">\n          ${cards}\n        </div>\n      </hass-subpage>\n    `;\n  }\n\n  protected firstUpdated(changedProps) {\n    super.firstUpdated(changedProps);\n    this._fetchData();\n  }\n\n  protected updated(changedProps) {\n    super.updated(changedProps);\n    if (changedProps.has(\"cloudStatus\")) {\n      this._entityConfigs = this.cloudStatus.prefs.google_entity_configs;\n    }\n  }\n\n  private async _fetchData() {\n    const entities = await fetchCloudGoogleEntities(this.hass);\n    entities.sort((a, b) => {\n      const stateA = this.hass.states[a.entity_id];\n      const stateB = this.hass.states[b.entity_id];\n      return compare(\n        stateA ? computeStateName(stateA) : a.entity_id,\n        stateB ? computeStateName(stateB) : b.entity_id\n      );\n    });\n    this._entities = entities;\n  }\n\n  private _showMoreInfo(ev) {\n    const entityId = ev.currentTarget.stateObj.entity_id;\n    fireEvent(this, \"hass-more-info\", { entityId });\n  }\n\n  private async _exposeChanged(ev: PolymerChangedEvent<boolean>) {\n    const entityId = (ev.currentTarget as any).entityId;\n    const newExposed = ev.detail.value;\n    await this._updateExposed(entityId, newExposed);\n  }\n\n  private async _updateExposed(entityId: string, newExposed: boolean) {\n    const curExposed = configIsExposed(this._entityConfigs[entityId] || {});\n    if (newExposed === curExposed) {\n      return;\n    }\n    await this._updateConfig(entityId, {\n      should_expose: newExposed,\n    });\n    this._ensureEntitySync();\n  }\n\n  private async _disable2FAChanged(ev: PolymerChangedEvent<boolean>) {\n    const entityId = (ev.currentTarget as any).entityId;\n    const newDisable2FA = ev.detail.value;\n    const curDisable2FA = Boolean(\n      (this._entityConfigs[entityId] || {}).disable_2fa\n    );\n    if (newDisable2FA === curDisable2FA) {\n      return;\n    }\n    await this._updateConfig(entityId, {\n      disable_2fa: newDisable2FA,\n    });\n  }\n\n  private async _updateConfig(entityId: string, values: GoogleEntityConfig) {\n    const updatedConfig = await updateCloudGoogleEntityConfig(\n      this.hass,\n      entityId,\n      values\n    );\n    this._entityConfigs = {\n      ...this._entityConfigs,\n      [entityId]: updatedConfig,\n    };\n    this._ensureStatusReload();\n  }\n\n  private _openDomainToggler() {\n    showDomainTogglerDialog(this, {\n      domains: this._entities!.map((entity) =>\n        computeDomain(entity.entity_id)\n      ).filter((value, idx, self) => self.indexOf(value) === idx),\n      toggleDomain: (domain, turnOn) => {\n        this._entities!.forEach((entity) => {\n          if (computeDomain(entity.entity_id) === domain) {\n            this._updateExposed(entity.entity_id, turnOn);\n          }\n        });\n      },\n    });\n  }\n\n  private _ensureStatusReload() {\n    if (this._popstateReloadStatusAttached) {\n      return;\n    }\n    this._popstateReloadStatusAttached = true;\n    // Cache parent because by the time popstate happens,\n    // this element is detached\n    const parent = this.parentElement!;\n    window.addEventListener(\n      \"popstate\",\n      () => fireEvent(parent, \"ha-refresh-cloud-status\"),\n      { once: true }\n    );\n  }\n\n  private _ensureEntitySync() {\n    if (this._popstateSyncAttached) {\n      return;\n    }\n    this._popstateSyncAttached = true;\n    // Cache parent because by the time popstate happens,\n    // this element is detached\n    const parent = this.parentElement!;\n    window.addEventListener(\n      \"popstate\",\n      () => {\n        showToast(parent, { message: \"Synchronizing changes to Google.\" });\n        cloudSyncGoogleAssistant(this.hass);\n      },\n      { once: true }\n    );\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      .banner {\n        color: var(--primary-text-color);\n        background-color: var(\n          --ha-card-background,\n          var(--paper-card-background-color, white)\n        );\n        padding: 16px 8px;\n        text-align: center;\n      }\n      .content {\n        display: flex;\n        flex-wrap: wrap;\n        padding: 4px;\n        --paper-toggle-button-label-spacing: 16px;\n      }\n      ha-card {\n        margin: 4px;\n        width: 100%;\n        max-width: 300px;\n      }\n      .card-content {\n        padding-bottom: 12px;\n      }\n      state-info {\n        cursor: pointer;\n      }\n      paper-toggle-button {\n        padding: 8px 0;\n      }\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-config-cloud-google-assistant\": CloudGoogleAssistant;\n  }\n}\n"],"sourceRoot":""}