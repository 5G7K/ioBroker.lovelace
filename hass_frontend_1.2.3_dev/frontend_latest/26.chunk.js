(self["webpackJsonp"] = self["webpackJsonp"] || []).push([[26],{

/***/ "./src/common/util/time-cache-function-promise.ts":
/*!********************************************************!*\
  !*** ./src/common/util/time-cache-function-promise.ts ***!
  \********************************************************/
/*! exports provided: timeCachePromiseFunc */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"timeCachePromiseFunc\", function() { return timeCachePromiseFunc; });\nconst timeCachePromiseFunc = async (cacheKey, cacheTime, func, hass, entityId, ...args) => {\n  let cache = hass[cacheKey];\n\n  if (!cache) {\n    cache = hass[cacheKey] = {};\n  }\n\n  const lastResult = cache[entityId];\n\n  if (lastResult) {\n    return lastResult;\n  }\n\n  const result = func(hass, entityId, ...args);\n  cache[entityId] = result;\n  result.then( // When successful, set timer to clear cache\n  () => setTimeout(() => {\n    cache[entityId] = undefined;\n  }, cacheTime), // On failure, clear cache right away\n  () => {\n    cache[entityId] = undefined;\n  });\n  return result;\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29tbW9uL3V0aWwvdGltZS1jYWNoZS1mdW5jdGlvbi1wcm9taXNlLnRzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL2NvbW1vbi91dGlsL3RpbWUtY2FjaGUtZnVuY3Rpb24tcHJvbWlzZS50cz85MzIyIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEhvbWVBc3Npc3RhbnQgfSBmcm9tIFwiLi4vLi4vdHlwZXNcIjtcblxuaW50ZXJmYWNlIFJlc3VsdENhY2hlPFQ+IHtcbiAgW2VudGl0eUlkOiBzdHJpbmddOiBQcm9taXNlPFQ+IHwgdW5kZWZpbmVkO1xufVxuXG5leHBvcnQgY29uc3QgdGltZUNhY2hlUHJvbWlzZUZ1bmMgPSBhc3luYyA8VD4oXG4gIGNhY2hlS2V5OiBzdHJpbmcsXG4gIGNhY2hlVGltZTogbnVtYmVyLFxuICBmdW5jOiAoXG4gICAgaGFzczogSG9tZUFzc2lzdGFudCxcbiAgICBlbnRpdHlJZDogc3RyaW5nLFxuICAgIC4uLmFyZ3M6IHVua25vd25bXVxuICApID0+IFByb21pc2U8VD4sXG4gIGhhc3M6IEhvbWVBc3Npc3RhbnQsXG4gIGVudGl0eUlkOiBzdHJpbmcsXG4gIC4uLmFyZ3M6IHVua25vd25bXVxuKTogUHJvbWlzZTxUPiA9PiB7XG4gIGxldCBjYWNoZTogUmVzdWx0Q2FjaGU8VD4gfCB1bmRlZmluZWQgPSAoaGFzcyBhcyBhbnkpW2NhY2hlS2V5XTtcblxuICBpZiAoIWNhY2hlKSB7XG4gICAgY2FjaGUgPSBoYXNzW2NhY2hlS2V5XSA9IHt9O1xuICB9XG5cbiAgY29uc3QgbGFzdFJlc3VsdCA9IGNhY2hlW2VudGl0eUlkXTtcblxuICBpZiAobGFzdFJlc3VsdCkge1xuICAgIHJldHVybiBsYXN0UmVzdWx0O1xuICB9XG5cbiAgY29uc3QgcmVzdWx0ID0gZnVuYyhoYXNzLCBlbnRpdHlJZCwgLi4uYXJncyk7XG4gIGNhY2hlW2VudGl0eUlkXSA9IHJlc3VsdDtcblxuICByZXN1bHQudGhlbihcbiAgICAvLyBXaGVuIHN1Y2Nlc3NmdWwsIHNldCB0aW1lciB0byBjbGVhciBjYWNoZVxuICAgICgpID0+XG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgY2FjaGUhW2VudGl0eUlkXSA9IHVuZGVmaW5lZDtcbiAgICAgIH0sIGNhY2hlVGltZSksXG4gICAgLy8gT24gZmFpbHVyZSwgY2xlYXIgY2FjaGUgcmlnaHQgYXdheVxuICAgICgpID0+IHtcbiAgICAgIGNhY2hlIVtlbnRpdHlJZF0gPSB1bmRlZmluZWQ7XG4gICAgfVxuICApO1xuXG4gIHJldHVybiByZXN1bHQ7XG59O1xuIl0sIm1hcHBpbmdzIjoiQUFNQTtBQUFBO0FBQUE7QUFZQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFHQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/common/util/time-cache-function-promise.ts\n");

/***/ }),

/***/ "./src/components/ha-camera-stream.ts":
/*!********************************************!*\
  !*** ./src/components/ha-camera-stream.ts ***!
  \********************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var lit_element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lit-element */ \"./node_modules/lit-element/lit-element.js\");\n/* harmony import */ var _common_dom_fire_event__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../common/dom/fire_event */ \"./src/common/dom/fire_event.ts\");\n/* harmony import */ var _common_entity_compute_state_name__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../common/entity/compute_state_name */ \"./src/common/entity/compute_state_name.ts\");\n/* harmony import */ var _common_entity_supports_feature__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../common/entity/supports-feature */ \"./src/common/entity/supports-feature.ts\");\n/* harmony import */ var _data_camera__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../data/camera */ \"./src/data/camera.ts\");\nfunction _decorate(decorators, factory, superClass, mixins) { var api = _getDecoratorsApi(); if (mixins) { for (var i = 0; i < mixins.length; i++) { api = mixins[i](api); } } var r = factory(function initialize(O) { api.initializeInstanceElements(O, decorated.elements); }, superClass); var decorated = api.decorateClass(_coalesceClassElements(r.d.map(_createElementDescriptor)), decorators); api.initializeClassElements(r.F, decorated.elements); return api.runClassFinishers(r.F, decorated.finishers); }\n\nfunction _getDecoratorsApi() { _getDecoratorsApi = function () { return api; }; var api = { elementsDefinitionOrder: [[\"method\"], [\"field\"]], initializeInstanceElements: function (O, elements) { [\"method\", \"field\"].forEach(function (kind) { elements.forEach(function (element) { if (element.kind === kind && element.placement === \"own\") { this.defineClassElement(O, element); } }, this); }, this); }, initializeClassElements: function (F, elements) { var proto = F.prototype; [\"method\", \"field\"].forEach(function (kind) { elements.forEach(function (element) { var placement = element.placement; if (element.kind === kind && (placement === \"static\" || placement === \"prototype\")) { var receiver = placement === \"static\" ? F : proto; this.defineClassElement(receiver, element); } }, this); }, this); }, defineClassElement: function (receiver, element) { var descriptor = element.descriptor; if (element.kind === \"field\") { var initializer = element.initializer; descriptor = { enumerable: descriptor.enumerable, writable: descriptor.writable, configurable: descriptor.configurable, value: initializer === void 0 ? void 0 : initializer.call(receiver) }; } Object.defineProperty(receiver, element.key, descriptor); }, decorateClass: function (elements, decorators) { var newElements = []; var finishers = []; var placements = { static: [], prototype: [], own: [] }; elements.forEach(function (element) { this.addElementPlacement(element, placements); }, this); elements.forEach(function (element) { if (!_hasDecorators(element)) return newElements.push(element); var elementFinishersExtras = this.decorateElement(element, placements); newElements.push(elementFinishersExtras.element); newElements.push.apply(newElements, elementFinishersExtras.extras); finishers.push.apply(finishers, elementFinishersExtras.finishers); }, this); if (!decorators) { return { elements: newElements, finishers: finishers }; } var result = this.decorateConstructor(newElements, decorators); finishers.push.apply(finishers, result.finishers); result.finishers = finishers; return result; }, addElementPlacement: function (element, placements, silent) { var keys = placements[element.placement]; if (!silent && keys.indexOf(element.key) !== -1) { throw new TypeError(\"Duplicated element (\" + element.key + \")\"); } keys.push(element.key); }, decorateElement: function (element, placements) { var extras = []; var finishers = []; for (var decorators = element.decorators, i = decorators.length - 1; i >= 0; i--) { var keys = placements[element.placement]; keys.splice(keys.indexOf(element.key), 1); var elementObject = this.fromElementDescriptor(element); var elementFinisherExtras = this.toElementFinisherExtras((0, decorators[i])(elementObject) || elementObject); element = elementFinisherExtras.element; this.addElementPlacement(element, placements); if (elementFinisherExtras.finisher) { finishers.push(elementFinisherExtras.finisher); } var newExtras = elementFinisherExtras.extras; if (newExtras) { for (var j = 0; j < newExtras.length; j++) { this.addElementPlacement(newExtras[j], placements); } extras.push.apply(extras, newExtras); } } return { element: element, finishers: finishers, extras: extras }; }, decorateConstructor: function (elements, decorators) { var finishers = []; for (var i = decorators.length - 1; i >= 0; i--) { var obj = this.fromClassDescriptor(elements); var elementsAndFinisher = this.toClassDescriptor((0, decorators[i])(obj) || obj); if (elementsAndFinisher.finisher !== undefined) { finishers.push(elementsAndFinisher.finisher); } if (elementsAndFinisher.elements !== undefined) { elements = elementsAndFinisher.elements; for (var j = 0; j < elements.length - 1; j++) { for (var k = j + 1; k < elements.length; k++) { if (elements[j].key === elements[k].key && elements[j].placement === elements[k].placement) { throw new TypeError(\"Duplicated element (\" + elements[j].key + \")\"); } } } } } return { elements: elements, finishers: finishers }; }, fromElementDescriptor: function (element) { var obj = { kind: element.kind, key: element.key, placement: element.placement, descriptor: element.descriptor }; var desc = { value: \"Descriptor\", configurable: true }; Object.defineProperty(obj, Symbol.toStringTag, desc); if (element.kind === \"field\") obj.initializer = element.initializer; return obj; }, toElementDescriptors: function (elementObjects) { if (elementObjects === undefined) return; return _toArray(elementObjects).map(function (elementObject) { var element = this.toElementDescriptor(elementObject); this.disallowProperty(elementObject, \"finisher\", \"An element descriptor\"); this.disallowProperty(elementObject, \"extras\", \"An element descriptor\"); return element; }, this); }, toElementDescriptor: function (elementObject) { var kind = String(elementObject.kind); if (kind !== \"method\" && kind !== \"field\") { throw new TypeError('An element descriptor\\'s .kind property must be either \"method\" or' + ' \"field\", but a decorator created an element descriptor with' + ' .kind \"' + kind + '\"'); } var key = _toPropertyKey(elementObject.key); var placement = String(elementObject.placement); if (placement !== \"static\" && placement !== \"prototype\" && placement !== \"own\") { throw new TypeError('An element descriptor\\'s .placement property must be one of \"static\",' + ' \"prototype\" or \"own\", but a decorator created an element descriptor' + ' with .placement \"' + placement + '\"'); } var descriptor = elementObject.descriptor; this.disallowProperty(elementObject, \"elements\", \"An element descriptor\"); var element = { kind: kind, key: key, placement: placement, descriptor: Object.assign({}, descriptor) }; if (kind !== \"field\") { this.disallowProperty(elementObject, \"initializer\", \"A method descriptor\"); } else { this.disallowProperty(descriptor, \"get\", \"The property descriptor of a field descriptor\"); this.disallowProperty(descriptor, \"set\", \"The property descriptor of a field descriptor\"); this.disallowProperty(descriptor, \"value\", \"The property descriptor of a field descriptor\"); element.initializer = elementObject.initializer; } return element; }, toElementFinisherExtras: function (elementObject) { var element = this.toElementDescriptor(elementObject); var finisher = _optionalCallableProperty(elementObject, \"finisher\"); var extras = this.toElementDescriptors(elementObject.extras); return { element: element, finisher: finisher, extras: extras }; }, fromClassDescriptor: function (elements) { var obj = { kind: \"class\", elements: elements.map(this.fromElementDescriptor, this) }; var desc = { value: \"Descriptor\", configurable: true }; Object.defineProperty(obj, Symbol.toStringTag, desc); return obj; }, toClassDescriptor: function (obj) { var kind = String(obj.kind); if (kind !== \"class\") { throw new TypeError('A class descriptor\\'s .kind property must be \"class\", but a decorator' + ' created a class descriptor with .kind \"' + kind + '\"'); } this.disallowProperty(obj, \"key\", \"A class descriptor\"); this.disallowProperty(obj, \"placement\", \"A class descriptor\"); this.disallowProperty(obj, \"descriptor\", \"A class descriptor\"); this.disallowProperty(obj, \"initializer\", \"A class descriptor\"); this.disallowProperty(obj, \"extras\", \"A class descriptor\"); var finisher = _optionalCallableProperty(obj, \"finisher\"); var elements = this.toElementDescriptors(obj.elements); return { elements: elements, finisher: finisher }; }, runClassFinishers: function (constructor, finishers) { for (var i = 0; i < finishers.length; i++) { var newConstructor = (0, finishers[i])(constructor); if (newConstructor !== undefined) { if (typeof newConstructor !== \"function\") { throw new TypeError(\"Finishers must return a constructor.\"); } constructor = newConstructor; } } return constructor; }, disallowProperty: function (obj, name, objectType) { if (obj[name] !== undefined) { throw new TypeError(objectType + \" can't have a .\" + name + \" property.\"); } } }; return api; }\n\nfunction _createElementDescriptor(def) { var key = _toPropertyKey(def.key); var descriptor; if (def.kind === \"method\") { descriptor = { value: def.value, writable: true, configurable: true, enumerable: false }; } else if (def.kind === \"get\") { descriptor = { get: def.value, configurable: true, enumerable: false }; } else if (def.kind === \"set\") { descriptor = { set: def.value, configurable: true, enumerable: false }; } else if (def.kind === \"field\") { descriptor = { configurable: true, writable: true, enumerable: true }; } var element = { kind: def.kind === \"field\" ? \"field\" : \"method\", key: key, placement: def.static ? \"static\" : def.kind === \"field\" ? \"own\" : \"prototype\", descriptor: descriptor }; if (def.decorators) element.decorators = def.decorators; if (def.kind === \"field\") element.initializer = def.value; return element; }\n\nfunction _coalesceGetterSetter(element, other) { if (element.descriptor.get !== undefined) { other.descriptor.get = element.descriptor.get; } else { other.descriptor.set = element.descriptor.set; } }\n\nfunction _coalesceClassElements(elements) { var newElements = []; var isSameElement = function (other) { return other.kind === \"method\" && other.key === element.key && other.placement === element.placement; }; for (var i = 0; i < elements.length; i++) { var element = elements[i]; var other; if (element.kind === \"method\" && (other = newElements.find(isSameElement))) { if (_isDataDescriptor(element.descriptor) || _isDataDescriptor(other.descriptor)) { if (_hasDecorators(element) || _hasDecorators(other)) { throw new ReferenceError(\"Duplicated methods (\" + element.key + \") can't be decorated.\"); } other.descriptor = element.descriptor; } else { if (_hasDecorators(element)) { if (_hasDecorators(other)) { throw new ReferenceError(\"Decorators can't be placed on different accessors with for \" + \"the same property (\" + element.key + \").\"); } other.decorators = element.decorators; } _coalesceGetterSetter(element, other); } } else { newElements.push(element); } } return newElements; }\n\nfunction _hasDecorators(element) { return element.decorators && element.decorators.length; }\n\nfunction _isDataDescriptor(desc) { return desc !== undefined && !(desc.value === undefined && desc.writable === undefined); }\n\nfunction _optionalCallableProperty(obj, name) { var value = obj[name]; if (value !== undefined && typeof value !== \"function\") { throw new TypeError(\"Expected '\" + name + \"' to be a function\"); } return value; }\n\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return typeof key === \"symbol\" ? key : String(key); }\n\nfunction _toPrimitive(input, hint) { if (typeof input !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (typeof res !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\n\nfunction _toArray(arr) { return _arrayWithHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }\n\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter); }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nfunction _get(target, property, receiver) { if (typeof Reflect !== \"undefined\" && Reflect.get) { _get = Reflect.get; } else { _get = function _get(target, property, receiver) { var base = _superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return _get(target, property, receiver || target); }\n\nfunction _superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = _getPrototypeOf(object); if (object === null) break; } return object; }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\n\n\n\n\n\n\nlet HaCameraStream = _decorate([Object(lit_element__WEBPACK_IMPORTED_MODULE_0__[\"customElement\"])(\"ha-camera-stream\")], function (_initialize, _LitElement) {\n  class HaCameraStream extends _LitElement {\n    constructor(...args) {\n      super(...args);\n\n      _initialize(this);\n    }\n\n  }\n\n  return {\n    F: HaCameraStream,\n    d: [{\n      kind: \"field\",\n      decorators: [Object(lit_element__WEBPACK_IMPORTED_MODULE_0__[\"property\"])()],\n      key: \"hass\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [Object(lit_element__WEBPACK_IMPORTED_MODULE_0__[\"property\"])()],\n      key: \"stateObj\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [Object(lit_element__WEBPACK_IMPORTED_MODULE_0__[\"property\"])({\n        type: Boolean\n      })],\n      key: \"showControls\",\n\n      value() {\n        return false;\n      }\n\n    }, {\n      kind: \"field\",\n      decorators: [Object(lit_element__WEBPACK_IMPORTED_MODULE_0__[\"property\"])()],\n      key: \"_attached\",\n\n      value() {\n        return false;\n      }\n\n    }, {\n      kind: \"field\",\n      decorators: [Object(lit_element__WEBPACK_IMPORTED_MODULE_0__[\"property\"])()],\n      key: \"_forceMJPEG\",\n\n      value() {\n        return undefined;\n      }\n\n    }, {\n      kind: \"field\",\n      key: \"_hlsPolyfillInstance\",\n      value: void 0\n    }, {\n      kind: \"method\",\n      key: \"connectedCallback\",\n      value: // We keep track if we should force MJPEG with a string\n      // that way it automatically resets if we change entity.\n      function connectedCallback() {\n        _get(_getPrototypeOf(HaCameraStream.prototype), \"connectedCallback\", this).call(this);\n\n        this._attached = true;\n      }\n    }, {\n      kind: \"method\",\n      key: \"disconnectedCallback\",\n      value: function disconnectedCallback() {\n        _get(_getPrototypeOf(HaCameraStream.prototype), \"disconnectedCallback\", this).call(this);\n\n        this._attached = false;\n      }\n    }, {\n      kind: \"method\",\n      key: \"render\",\n      value: function render() {\n        if (!this.stateObj || !this._attached) {\n          return lit_element__WEBPACK_IMPORTED_MODULE_0__[\"html\"]``;\n        }\n\n        return lit_element__WEBPACK_IMPORTED_MODULE_0__[\"html\"]`\n      ${ false || this._shouldRenderMJPEG ? lit_element__WEBPACK_IMPORTED_MODULE_0__[\"html\"]`\n            <img\n              @load=${this._elementResized}\n              .src=${ false ? undefined : Object(_data_camera__WEBPACK_IMPORTED_MODULE_4__[\"computeMJPEGStreamUrl\"])(this.stateObj)}\n              .alt=${`Preview of the ${Object(_common_entity_compute_state_name__WEBPACK_IMPORTED_MODULE_2__[\"computeStateName\"])(this.stateObj)} camera.`}\n            />\n          ` : lit_element__WEBPACK_IMPORTED_MODULE_0__[\"html\"]`\n            <video\n              autoplay\n              muted\n              playsinline\n              ?controls=${this.showControls}\n              @loadeddata=${this._elementResized}\n            ></video>\n          `}\n    `;\n      }\n    }, {\n      kind: \"method\",\n      key: \"updated\",\n      value: function updated(changedProps) {\n        _get(_getPrototypeOf(HaCameraStream.prototype), \"updated\", this).call(this, changedProps);\n\n        const stateObjChanged = changedProps.has(\"stateObj\");\n        const attachedChanged = changedProps.has(\"_attached\");\n        const oldState = changedProps.get(\"stateObj\");\n        const oldEntityId = oldState ? oldState.entity_id : undefined;\n        const curEntityId = this.stateObj ? this.stateObj.entity_id : undefined;\n\n        if (!stateObjChanged && !attachedChanged || stateObjChanged && oldEntityId === curEntityId) {\n          return;\n        } // If we are no longer attached, destroy polyfill.\n\n\n        if (attachedChanged && !this._attached) {\n          this._destroyPolyfill();\n\n          return;\n        } // Nothing to do if we are render MJPEG.\n\n\n        if (this._shouldRenderMJPEG) {\n          return;\n        } // Tear down existing polyfill, if available\n\n\n        this._destroyPolyfill();\n\n        if (curEntityId) {\n          this._startHls();\n        }\n      }\n    }, {\n      kind: \"get\",\n      key: \"_shouldRenderMJPEG\",\n      value: function _shouldRenderMJPEG() {\n        return this._forceMJPEG === this.stateObj.entity_id || !this.hass.config.components.includes(\"stream\") || !Object(_common_entity_supports_feature__WEBPACK_IMPORTED_MODULE_3__[\"supportsFeature\"])(this.stateObj, _data_camera__WEBPACK_IMPORTED_MODULE_4__[\"CAMERA_SUPPORT_STREAM\"]);\n      }\n    }, {\n      kind: \"get\",\n      key: \"_videoEl\",\n      value: function _videoEl() {\n        return this.shadowRoot.querySelector(\"video\");\n      }\n    }, {\n      kind: \"method\",\n      key: \"_startHls\",\n      value: async function _startHls() {\n        // eslint-disable-next-line\n        const Hls = (await __webpack_require__.e(/*! import() | hls.js */ \"vendors~hls.js\").then(__webpack_require__.t.bind(null, /*! hls.js */ \"./node_modules/hls.js/dist/hls.js\", 7))).default;\n        let hlsSupported = Hls.isSupported();\n        const videoEl = this._videoEl;\n\n        if (!hlsSupported) {\n          hlsSupported = videoEl.canPlayType(\"application/vnd.apple.mpegurl\") !== \"\";\n        }\n\n        if (!hlsSupported) {\n          this._forceMJPEG = this.stateObj.entity_id;\n          return;\n        }\n\n        try {\n          const {\n            url\n          } = await Object(_data_camera__WEBPACK_IMPORTED_MODULE_4__[\"fetchStreamUrl\"])(this.hass, this.stateObj.entity_id);\n\n          if (Hls.isSupported()) {\n            this._renderHLSPolyfill(videoEl, Hls, url);\n          } else {\n            this._renderHLSNative(videoEl, url);\n          }\n\n          return;\n        } catch (err) {\n          // Fails if we were unable to get a stream\n          // eslint-disable-next-line\n          console.error(err);\n          this._forceMJPEG = this.stateObj.entity_id;\n        }\n      }\n    }, {\n      kind: \"method\",\n      key: \"_renderHLSNative\",\n      value: async function _renderHLSNative(videoEl, url) {\n        videoEl.src = url;\n        await new Promise(resolve => videoEl.addEventListener(\"loadedmetadata\", resolve));\n        videoEl.play();\n      }\n    }, {\n      kind: \"method\",\n      key: \"_renderHLSPolyfill\",\n      value: async function _renderHLSPolyfill(videoEl, // eslint-disable-next-line\n      Hls, url) {\n        const hls = new Hls({\n          liveBackBufferLength: 60\n        });\n        this._hlsPolyfillInstance = hls;\n        hls.attachMedia(videoEl);\n        hls.on(Hls.Events.MEDIA_ATTACHED, () => {\n          hls.loadSource(url);\n        });\n      }\n    }, {\n      kind: \"method\",\n      key: \"_elementResized\",\n      value: function _elementResized() {\n        Object(_common_dom_fire_event__WEBPACK_IMPORTED_MODULE_1__[\"fireEvent\"])(this, \"iron-resize\");\n      }\n    }, {\n      kind: \"method\",\n      key: \"_destroyPolyfill\",\n      value: function _destroyPolyfill() {\n        if (this._hlsPolyfillInstance) {\n          this._hlsPolyfillInstance.destroy();\n\n          this._hlsPolyfillInstance = undefined;\n        }\n      }\n    }, {\n      kind: \"get\",\n      static: true,\n      key: \"styles\",\n      value: function styles() {\n        return lit_element__WEBPACK_IMPORTED_MODULE_0__[\"css\"]`\n      :host,\n      img,\n      video {\n        display: block;\n      }\n\n      img,\n      video {\n        width: 100%;\n      }\n    `;\n      }\n    }]\n  };\n}, lit_element__WEBPACK_IMPORTED_MODULE_0__[\"LitElement\"]);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29tcG9uZW50cy9oYS1jYW1lcmEtc3RyZWFtLnRzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvaGEtY2FtZXJhLXN0cmVhbS50cz85NjFlIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gIGNzcyxcbiAgQ1NTUmVzdWx0LFxuICBjdXN0b21FbGVtZW50LFxuICBodG1sLFxuICBMaXRFbGVtZW50LFxuICBwcm9wZXJ0eSxcbiAgUHJvcGVydHlWYWx1ZXMsXG4gIFRlbXBsYXRlUmVzdWx0LFxufSBmcm9tIFwibGl0LWVsZW1lbnRcIjtcbmltcG9ydCB7IGZpcmVFdmVudCB9IGZyb20gXCIuLi9jb21tb24vZG9tL2ZpcmVfZXZlbnRcIjtcbmltcG9ydCB7IGNvbXB1dGVTdGF0ZU5hbWUgfSBmcm9tIFwiLi4vY29tbW9uL2VudGl0eS9jb21wdXRlX3N0YXRlX25hbWVcIjtcbmltcG9ydCB7IHN1cHBvcnRzRmVhdHVyZSB9IGZyb20gXCIuLi9jb21tb24vZW50aXR5L3N1cHBvcnRzLWZlYXR1cmVcIjtcbmltcG9ydCB7XG4gIENBTUVSQV9TVVBQT1JUX1NUUkVBTSxcbiAgY29tcHV0ZU1KUEVHU3RyZWFtVXJsLFxuICBmZXRjaFN0cmVhbVVybCxcbn0gZnJvbSBcIi4uL2RhdGEvY2FtZXJhXCI7XG5pbXBvcnQgeyBDYW1lcmFFbnRpdHksIEhvbWVBc3Npc3RhbnQgfSBmcm9tIFwiLi4vdHlwZXNcIjtcblxudHlwZSBITFNNb2R1bGUgPSB0eXBlb2YgaW1wb3J0KFwiaGxzLmpzXCIpO1xuXG5AY3VzdG9tRWxlbWVudChcImhhLWNhbWVyYS1zdHJlYW1cIilcbmNsYXNzIEhhQ2FtZXJhU3RyZWFtIGV4dGVuZHMgTGl0RWxlbWVudCB7XG4gIEBwcm9wZXJ0eSgpIHB1YmxpYyBoYXNzPzogSG9tZUFzc2lzdGFudDtcblxuICBAcHJvcGVydHkoKSBwdWJsaWMgc3RhdGVPYmo/OiBDYW1lcmFFbnRpdHk7XG5cbiAgQHByb3BlcnR5KHsgdHlwZTogQm9vbGVhbiB9KSBwdWJsaWMgc2hvd0NvbnRyb2xzID0gZmFsc2U7XG5cbiAgQHByb3BlcnR5KCkgcHJpdmF0ZSBfYXR0YWNoZWQgPSBmYWxzZTtcblxuICAvLyBXZSBrZWVwIHRyYWNrIGlmIHdlIHNob3VsZCBmb3JjZSBNSlBFRyB3aXRoIGEgc3RyaW5nXG4gIC8vIHRoYXQgd2F5IGl0IGF1dG9tYXRpY2FsbHkgcmVzZXRzIGlmIHdlIGNoYW5nZSBlbnRpdHkuXG4gIEBwcm9wZXJ0eSgpIHByaXZhdGUgX2ZvcmNlTUpQRUc6IHN0cmluZyB8IHVuZGVmaW5lZCA9IHVuZGVmaW5lZDtcblxuICBwcml2YXRlIF9obHNQb2x5ZmlsbEluc3RhbmNlPzogSGxzO1xuXG4gIHB1YmxpYyBjb25uZWN0ZWRDYWxsYmFjaygpIHtcbiAgICBzdXBlci5jb25uZWN0ZWRDYWxsYmFjaygpO1xuICAgIHRoaXMuX2F0dGFjaGVkID0gdHJ1ZTtcbiAgfVxuXG4gIHB1YmxpYyBkaXNjb25uZWN0ZWRDYWxsYmFjaygpIHtcbiAgICBzdXBlci5kaXNjb25uZWN0ZWRDYWxsYmFjaygpO1xuICAgIHRoaXMuX2F0dGFjaGVkID0gZmFsc2U7XG4gIH1cblxuICBwcm90ZWN0ZWQgcmVuZGVyKCk6IFRlbXBsYXRlUmVzdWx0IHtcbiAgICBpZiAoIXRoaXMuc3RhdGVPYmogfHwgIXRoaXMuX2F0dGFjaGVkKSB7XG4gICAgICByZXR1cm4gaHRtbGBgO1xuICAgIH1cblxuICAgIHJldHVybiBodG1sYFxuICAgICAgJHtfX0RFTU9fXyB8fCB0aGlzLl9zaG91bGRSZW5kZXJNSlBFR1xuICAgICAgICA/IGh0bWxgXG4gICAgICAgICAgICA8aW1nXG4gICAgICAgICAgICAgIEBsb2FkPSR7dGhpcy5fZWxlbWVudFJlc2l6ZWR9XG4gICAgICAgICAgICAgIC5zcmM9JHtfX0RFTU9fX1xuICAgICAgICAgICAgICAgID8gdGhpcy5zdGF0ZU9iaiEuYXR0cmlidXRlcy5lbnRpdHlfcGljdHVyZVxuICAgICAgICAgICAgICAgIDogY29tcHV0ZU1KUEVHU3RyZWFtVXJsKHRoaXMuc3RhdGVPYmopfVxuICAgICAgICAgICAgICAuYWx0PSR7YFByZXZpZXcgb2YgdGhlICR7Y29tcHV0ZVN0YXRlTmFtZShcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXRlT2JqXG4gICAgICAgICAgICAgICl9IGNhbWVyYS5gfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICBgXG4gICAgICAgIDogaHRtbGBcbiAgICAgICAgICAgIDx2aWRlb1xuICAgICAgICAgICAgICBhdXRvcGxheVxuICAgICAgICAgICAgICBtdXRlZFxuICAgICAgICAgICAgICBwbGF5c2lubGluZVxuICAgICAgICAgICAgICA/Y29udHJvbHM9JHt0aGlzLnNob3dDb250cm9sc31cbiAgICAgICAgICAgICAgQGxvYWRlZGRhdGE9JHt0aGlzLl9lbGVtZW50UmVzaXplZH1cbiAgICAgICAgICAgID48L3ZpZGVvPlxuICAgICAgICAgIGB9XG4gICAgYDtcbiAgfVxuXG4gIHByb3RlY3RlZCB1cGRhdGVkKGNoYW5nZWRQcm9wczogUHJvcGVydHlWYWx1ZXMpIHtcbiAgICBzdXBlci51cGRhdGVkKGNoYW5nZWRQcm9wcyk7XG5cbiAgICBjb25zdCBzdGF0ZU9iakNoYW5nZWQgPSBjaGFuZ2VkUHJvcHMuaGFzKFwic3RhdGVPYmpcIik7XG4gICAgY29uc3QgYXR0YWNoZWRDaGFuZ2VkID0gY2hhbmdlZFByb3BzLmhhcyhcIl9hdHRhY2hlZFwiKTtcblxuICAgIGNvbnN0IG9sZFN0YXRlID0gY2hhbmdlZFByb3BzLmdldChcInN0YXRlT2JqXCIpIGFzIHRoaXNbXCJzdGF0ZU9ialwiXTtcbiAgICBjb25zdCBvbGRFbnRpdHlJZCA9IG9sZFN0YXRlID8gb2xkU3RhdGUuZW50aXR5X2lkIDogdW5kZWZpbmVkO1xuICAgIGNvbnN0IGN1ckVudGl0eUlkID0gdGhpcy5zdGF0ZU9iaiA/IHRoaXMuc3RhdGVPYmouZW50aXR5X2lkIDogdW5kZWZpbmVkO1xuXG4gICAgaWYgKFxuICAgICAgKCFzdGF0ZU9iakNoYW5nZWQgJiYgIWF0dGFjaGVkQ2hhbmdlZCkgfHxcbiAgICAgIChzdGF0ZU9iakNoYW5nZWQgJiYgb2xkRW50aXR5SWQgPT09IGN1ckVudGl0eUlkKVxuICAgICkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIElmIHdlIGFyZSBubyBsb25nZXIgYXR0YWNoZWQsIGRlc3Ryb3kgcG9seWZpbGwuXG4gICAgaWYgKGF0dGFjaGVkQ2hhbmdlZCAmJiAhdGhpcy5fYXR0YWNoZWQpIHtcbiAgICAgIHRoaXMuX2Rlc3Ryb3lQb2x5ZmlsbCgpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIE5vdGhpbmcgdG8gZG8gaWYgd2UgYXJlIHJlbmRlciBNSlBFRy5cbiAgICBpZiAodGhpcy5fc2hvdWxkUmVuZGVyTUpQRUcpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBUZWFyIGRvd24gZXhpc3RpbmcgcG9seWZpbGwsIGlmIGF2YWlsYWJsZVxuICAgIHRoaXMuX2Rlc3Ryb3lQb2x5ZmlsbCgpO1xuXG4gICAgaWYgKGN1ckVudGl0eUlkKSB7XG4gICAgICB0aGlzLl9zdGFydEhscygpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgZ2V0IF9zaG91bGRSZW5kZXJNSlBFRygpIHtcbiAgICByZXR1cm4gKFxuICAgICAgdGhpcy5fZm9yY2VNSlBFRyA9PT0gdGhpcy5zdGF0ZU9iaiEuZW50aXR5X2lkIHx8XG4gICAgICAhdGhpcy5oYXNzIS5jb25maWcuY29tcG9uZW50cy5pbmNsdWRlcyhcInN0cmVhbVwiKSB8fFxuICAgICAgIXN1cHBvcnRzRmVhdHVyZSh0aGlzLnN0YXRlT2JqISwgQ0FNRVJBX1NVUFBPUlRfU1RSRUFNKVxuICAgICk7XG4gIH1cblxuICBwcml2YXRlIGdldCBfdmlkZW9FbCgpOiBIVE1MVmlkZW9FbGVtZW50IHtcbiAgICByZXR1cm4gdGhpcy5zaGFkb3dSb290IS5xdWVyeVNlbGVjdG9yKFwidmlkZW9cIikhO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBfc3RhcnRIbHMoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lXG4gICAgY29uc3QgSGxzID0gKChhd2FpdCBpbXBvcnQoXG4gICAgICAvKiB3ZWJwYWNrQ2h1bmtOYW1lOiBcImhscy5qc1wiICovIFwiaGxzLmpzXCJcbiAgICApKSBhcyBhbnkpLmRlZmF1bHQgYXMgSExTTW9kdWxlO1xuICAgIGxldCBobHNTdXBwb3J0ZWQgPSBIbHMuaXNTdXBwb3J0ZWQoKTtcbiAgICBjb25zdCB2aWRlb0VsID0gdGhpcy5fdmlkZW9FbDtcblxuICAgIGlmICghaGxzU3VwcG9ydGVkKSB7XG4gICAgICBobHNTdXBwb3J0ZWQgPVxuICAgICAgICB2aWRlb0VsLmNhblBsYXlUeXBlKFwiYXBwbGljYXRpb24vdm5kLmFwcGxlLm1wZWd1cmxcIikgIT09IFwiXCI7XG4gICAgfVxuXG4gICAgaWYgKCFobHNTdXBwb3J0ZWQpIHtcbiAgICAgIHRoaXMuX2ZvcmNlTUpQRUcgPSB0aGlzLnN0YXRlT2JqIS5lbnRpdHlfaWQ7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHsgdXJsIH0gPSBhd2FpdCBmZXRjaFN0cmVhbVVybChcbiAgICAgICAgdGhpcy5oYXNzISxcbiAgICAgICAgdGhpcy5zdGF0ZU9iaiEuZW50aXR5X2lkXG4gICAgICApO1xuXG4gICAgICBpZiAoSGxzLmlzU3VwcG9ydGVkKCkpIHtcbiAgICAgICAgdGhpcy5fcmVuZGVySExTUG9seWZpbGwodmlkZW9FbCwgSGxzLCB1cmwpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5fcmVuZGVySExTTmF0aXZlKHZpZGVvRWwsIHVybCk7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAvLyBGYWlscyBpZiB3ZSB3ZXJlIHVuYWJsZSB0byBnZXQgYSBzdHJlYW1cbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZVxuICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xuICAgICAgdGhpcy5fZm9yY2VNSlBFRyA9IHRoaXMuc3RhdGVPYmohLmVudGl0eV9pZDtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIF9yZW5kZXJITFNOYXRpdmUodmlkZW9FbDogSFRNTFZpZGVvRWxlbWVudCwgdXJsOiBzdHJpbmcpIHtcbiAgICB2aWRlb0VsLnNyYyA9IHVybDtcbiAgICBhd2FpdCBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT5cbiAgICAgIHZpZGVvRWwuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRlZG1ldGFkYXRhXCIsIHJlc29sdmUpXG4gICAgKTtcbiAgICB2aWRlb0VsLnBsYXkoKTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgX3JlbmRlckhMU1BvbHlmaWxsKFxuICAgIHZpZGVvRWw6IEhUTUxWaWRlb0VsZW1lbnQsXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lXG4gICAgSGxzOiBITFNNb2R1bGUsXG4gICAgdXJsOiBzdHJpbmdcbiAgKSB7XG4gICAgY29uc3QgaGxzID0gbmV3IEhscyh7XG4gICAgICBsaXZlQmFja0J1ZmZlckxlbmd0aDogNjAsXG4gICAgfSk7XG4gICAgdGhpcy5faGxzUG9seWZpbGxJbnN0YW5jZSA9IGhscztcbiAgICBobHMuYXR0YWNoTWVkaWEodmlkZW9FbCk7XG4gICAgaGxzLm9uKEhscy5FdmVudHMuTUVESUFfQVRUQUNIRUQsICgpID0+IHtcbiAgICAgIGhscy5sb2FkU291cmNlKHVybCk7XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIF9lbGVtZW50UmVzaXplZCgpIHtcbiAgICBmaXJlRXZlbnQodGhpcywgXCJpcm9uLXJlc2l6ZVwiKTtcbiAgfVxuXG4gIHByaXZhdGUgX2Rlc3Ryb3lQb2x5ZmlsbCgpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5faGxzUG9seWZpbGxJbnN0YW5jZSkge1xuICAgICAgdGhpcy5faGxzUG9seWZpbGxJbnN0YW5jZS5kZXN0cm95KCk7XG4gICAgICB0aGlzLl9obHNQb2x5ZmlsbEluc3RhbmNlID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBnZXQgc3R5bGVzKCk6IENTU1Jlc3VsdCB7XG4gICAgcmV0dXJuIGNzc2BcbiAgICAgIDpob3N0LFxuICAgICAgaW1nLFxuICAgICAgdmlkZW8ge1xuICAgICAgICBkaXNwbGF5OiBibG9jaztcbiAgICAgIH1cblxuICAgICAgaW1nLFxuICAgICAgdmlkZW8ge1xuICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgIH1cbiAgICBgO1xuICB9XG59XG5cbmRlY2xhcmUgZ2xvYmFsIHtcbiAgaW50ZXJmYWNlIEhUTUxFbGVtZW50VGFnTmFtZU1hcCB7XG4gICAgXCJoYS1jYW1lcmEtc3RyZWFtXCI6IEhhQ2FtZXJhU3RyZWFtO1xuICB9XG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFVQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBU0E7QUFEQTtBQUNBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFDQTtBQURBO0FBQ0E7O0FBREE7OztBQUNBOzs7OztBQUVBOzs7OztBQUVBO0FBQUE7QUFBQTs7OztBQUFBOzs7OztBQUVBOzs7O0FBQUE7Ozs7O0FBSUE7Ozs7QUFBQTs7Ozs7Ozs7OztBQUZBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFBQTtBQUNBOzs7O0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFDQTs7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUdBO0FBQ0E7QUFHQTs7QUFQQTs7Ozs7QUFpQkE7QUFDQTs7QUFFQTtBQXJCQTtBQXVCQTs7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7QUFFQTtBQUNBO0FBS0E7Ozs7QUFFQTtBQUNBO0FBQ0E7Ozs7QUFFQTtBQUNBO0FBQ0Esd0xBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztBQUVBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7Ozs7QUFFQTtBQUdBO0FBR0E7QUFDQTtBQURBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7O0FBRUE7QUFDQTtBQUNBOzs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7Ozs7O0FBRUE7QUFDQTs7Ozs7Ozs7Ozs7QUFBQTtBQVlBOzs7QUE3TEEiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/components/ha-camera-stream.ts\n");

/***/ }),

/***/ "./src/data/auth.ts":
/*!**************************!*\
  !*** ./src/data/auth.ts ***!
  \**************************/
/*! exports provided: hassUrl, getSignedPath, fetchAuthProviders, createAuthForUser */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"hassUrl\", function() { return hassUrl; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"getSignedPath\", function() { return getSignedPath; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"fetchAuthProviders\", function() { return fetchAuthProviders; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"createAuthForUser\", function() { return createAuthForUser; });\nconst hassUrl = `${location.protocol}//${location.host}`;\nconst getSignedPath = (hass, path) => hass.callWS({\n  type: \"auth/sign_path\",\n  path\n});\nconst fetchAuthProviders = () => fetch(\"/auth/providers\", {\n  credentials: \"same-origin\"\n});\nconst createAuthForUser = async (hass, userId, username, password) => hass.callWS({\n  type: \"config/auth_provider/homeassistant/create\",\n  user_id: userId,\n  username,\n  password\n});//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvZGF0YS9hdXRoLnRzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL2RhdGEvYXV0aC50cz9jZDVmIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEhvbWVBc3Npc3RhbnQgfSBmcm9tIFwiLi4vdHlwZXNcIjtcblxuZXhwb3J0IGludGVyZmFjZSBBdXRoVXJsU2VhcmNoUGFyYW1zIHtcbiAgY2xpZW50X2lkPzogc3RyaW5nO1xuICByZWRpcmVjdF91cmk/OiBzdHJpbmc7XG4gIHN0YXRlPzogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEF1dGhQcm92aWRlciB7XG4gIG5hbWU6IHN0cmluZztcbiAgaWQ6IHN0cmluZztcbiAgdHlwZTogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENyZWRlbnRpYWwge1xuICB0eXBlOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU2lnbmVkUGF0aCB7XG4gIHBhdGg6IHN0cmluZztcbn1cblxuZXhwb3J0IGNvbnN0IGhhc3NVcmwgPSBgJHtsb2NhdGlvbi5wcm90b2NvbH0vLyR7bG9jYXRpb24uaG9zdH1gO1xuXG5leHBvcnQgY29uc3QgZ2V0U2lnbmVkUGF0aCA9IChcbiAgaGFzczogSG9tZUFzc2lzdGFudCxcbiAgcGF0aDogc3RyaW5nXG4pOiBQcm9taXNlPFNpZ25lZFBhdGg+ID0+IGhhc3MuY2FsbFdTKHsgdHlwZTogXCJhdXRoL3NpZ25fcGF0aFwiLCBwYXRoIH0pO1xuXG5leHBvcnQgY29uc3QgZmV0Y2hBdXRoUHJvdmlkZXJzID0gKCkgPT5cbiAgZmV0Y2goXCIvYXV0aC9wcm92aWRlcnNcIiwge1xuICAgIGNyZWRlbnRpYWxzOiBcInNhbWUtb3JpZ2luXCIsXG4gIH0pO1xuXG5leHBvcnQgY29uc3QgY3JlYXRlQXV0aEZvclVzZXIgPSBhc3luYyAoXG4gIGhhc3M6IEhvbWVBc3Npc3RhbnQsXG4gIHVzZXJJZDogc3RyaW5nLFxuICB1c2VybmFtZTogc3RyaW5nLFxuICBwYXNzd29yZDogc3RyaW5nXG4pID0+XG4gIGhhc3MuY2FsbFdTKHtcbiAgICB0eXBlOiBcImNvbmZpZy9hdXRoX3Byb3ZpZGVyL2hvbWVhc3Npc3RhbnQvY3JlYXRlXCIsXG4gICAgdXNlcl9pZDogdXNlcklkLFxuICAgIHVzZXJuYW1lLFxuICAgIHBhc3N3b3JkLFxuICB9KTtcbiJdLCJtYXBwaW5ncyI6IkFBc0JBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBR0E7QUFBQTtBQUFBO0FBRUE7QUFFQTtBQURBO0FBSUE7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQUpBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/data/auth.ts\n");

/***/ }),

/***/ "./src/data/camera.ts":
/*!****************************!*\
  !*** ./src/data/camera.ts ***!
  \****************************/
/*! exports provided: CAMERA_SUPPORT_ON_OFF, CAMERA_SUPPORT_STREAM, computeMJPEGStreamUrl, fetchThumbnailUrlWithCache, fetchThumbnailUrl, fetchStreamUrl, fetchCameraPrefs, updateCameraPrefs */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"CAMERA_SUPPORT_ON_OFF\", function() { return CAMERA_SUPPORT_ON_OFF; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"CAMERA_SUPPORT_STREAM\", function() { return CAMERA_SUPPORT_STREAM; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"computeMJPEGStreamUrl\", function() { return computeMJPEGStreamUrl; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"fetchThumbnailUrlWithCache\", function() { return fetchThumbnailUrlWithCache; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"fetchThumbnailUrl\", function() { return fetchThumbnailUrl; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"fetchStreamUrl\", function() { return fetchStreamUrl; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"fetchCameraPrefs\", function() { return fetchCameraPrefs; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"updateCameraPrefs\", function() { return updateCameraPrefs; });\n/* harmony import */ var _common_util_time_cache_function_promise__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../common/util/time-cache-function-promise */ \"./src/common/util/time-cache-function-promise.ts\");\n/* harmony import */ var _auth__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./auth */ \"./src/data/auth.ts\");\n\n\nconst CAMERA_SUPPORT_ON_OFF = 1;\nconst CAMERA_SUPPORT_STREAM = 2;\nconst computeMJPEGStreamUrl = entity => `/api/camera_proxy_stream/${entity.entity_id}?token=${entity.attributes.access_token}`;\nconst fetchThumbnailUrlWithCache = (hass, entityId) => Object(_common_util_time_cache_function_promise__WEBPACK_IMPORTED_MODULE_0__[\"timeCachePromiseFunc\"])(\"_cameraTmbUrl\", 9000, fetchThumbnailUrl, hass, entityId);\nconst fetchThumbnailUrl = async (hass, entityId) => {\n  const path = await Object(_auth__WEBPACK_IMPORTED_MODULE_1__[\"getSignedPath\"])(hass, `/api/camera_proxy/${entityId}`);\n  return hass.hassUrl(path.path);\n};\nconst fetchStreamUrl = async (hass, entityId, format) => {\n  const data = {\n    type: \"camera/stream\",\n    entity_id: entityId\n  };\n\n  if (format) {\n    // @ts-ignore\n    data.format = format;\n  }\n\n  const stream = await hass.callWS(data);\n  stream.url = hass.hassUrl(stream.url);\n  return stream;\n};\nconst fetchCameraPrefs = (hass, entityId) => hass.callWS({\n  type: \"camera/get_prefs\",\n  entity_id: entityId\n});\nconst updateCameraPrefs = (hass, entityId, prefs) => hass.callWS(Object.assign({\n  type: \"camera/update_prefs\",\n  entity_id: entityId\n}, prefs));//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvZGF0YS9jYW1lcmEudHMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvZGF0YS9jYW1lcmEudHM/MDg2MiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB0aW1lQ2FjaGVQcm9taXNlRnVuYyB9IGZyb20gXCIuLi9jb21tb24vdXRpbC90aW1lLWNhY2hlLWZ1bmN0aW9uLXByb21pc2VcIjtcbmltcG9ydCB7IENhbWVyYUVudGl0eSwgSG9tZUFzc2lzdGFudCB9IGZyb20gXCIuLi90eXBlc1wiO1xuaW1wb3J0IHsgZ2V0U2lnbmVkUGF0aCB9IGZyb20gXCIuL2F1dGhcIjtcblxuZXhwb3J0IGNvbnN0IENBTUVSQV9TVVBQT1JUX09OX09GRiA9IDE7XG5leHBvcnQgY29uc3QgQ0FNRVJBX1NVUFBPUlRfU1RSRUFNID0gMjtcblxuZXhwb3J0IGludGVyZmFjZSBDYW1lcmFQcmVmZXJlbmNlcyB7XG4gIHByZWxvYWRfc3RyZWFtOiBib29sZWFuO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENhbWVyYVRodW1ibmFpbCB7XG4gIGNvbnRlbnRfdHlwZTogc3RyaW5nO1xuICBjb250ZW50OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU3RyZWFtIHtcbiAgdXJsOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBjb25zdCBjb21wdXRlTUpQRUdTdHJlYW1VcmwgPSAoZW50aXR5OiBDYW1lcmFFbnRpdHkpID0+XG4gIGAvYXBpL2NhbWVyYV9wcm94eV9zdHJlYW0vJHtlbnRpdHkuZW50aXR5X2lkfT90b2tlbj0ke2VudGl0eS5hdHRyaWJ1dGVzLmFjY2Vzc190b2tlbn1gO1xuXG5leHBvcnQgY29uc3QgZmV0Y2hUaHVtYm5haWxVcmxXaXRoQ2FjaGUgPSAoXG4gIGhhc3M6IEhvbWVBc3Npc3RhbnQsXG4gIGVudGl0eUlkOiBzdHJpbmdcbikgPT5cbiAgdGltZUNhY2hlUHJvbWlzZUZ1bmMoXG4gICAgXCJfY2FtZXJhVG1iVXJsXCIsXG4gICAgOTAwMCxcbiAgICBmZXRjaFRodW1ibmFpbFVybCxcbiAgICBoYXNzLFxuICAgIGVudGl0eUlkXG4gICk7XG5cbmV4cG9ydCBjb25zdCBmZXRjaFRodW1ibmFpbFVybCA9IGFzeW5jIChcbiAgaGFzczogSG9tZUFzc2lzdGFudCxcbiAgZW50aXR5SWQ6IHN0cmluZ1xuKSA9PiB7XG4gIGNvbnN0IHBhdGggPSBhd2FpdCBnZXRTaWduZWRQYXRoKGhhc3MsIGAvYXBpL2NhbWVyYV9wcm94eS8ke2VudGl0eUlkfWApO1xuICByZXR1cm4gaGFzcy5oYXNzVXJsKHBhdGgucGF0aCk7XG59O1xuXG5leHBvcnQgY29uc3QgZmV0Y2hTdHJlYW1VcmwgPSBhc3luYyAoXG4gIGhhc3M6IEhvbWVBc3Npc3RhbnQsXG4gIGVudGl0eUlkOiBzdHJpbmcsXG4gIGZvcm1hdD86IFwiaGxzXCJcbikgPT4ge1xuICBjb25zdCBkYXRhID0ge1xuICAgIHR5cGU6IFwiY2FtZXJhL3N0cmVhbVwiLFxuICAgIGVudGl0eV9pZDogZW50aXR5SWQsXG4gIH07XG4gIGlmIChmb3JtYXQpIHtcbiAgICAvLyBAdHMtaWdub3JlXG4gICAgZGF0YS5mb3JtYXQgPSBmb3JtYXQ7XG4gIH1cbiAgY29uc3Qgc3RyZWFtID0gYXdhaXQgaGFzcy5jYWxsV1M8U3RyZWFtPihkYXRhKTtcbiAgc3RyZWFtLnVybCA9IGhhc3MuaGFzc1VybChzdHJlYW0udXJsKTtcbiAgcmV0dXJuIHN0cmVhbTtcbn07XG5cbmV4cG9ydCBjb25zdCBmZXRjaENhbWVyYVByZWZzID0gKGhhc3M6IEhvbWVBc3Npc3RhbnQsIGVudGl0eUlkOiBzdHJpbmcpID0+XG4gIGhhc3MuY2FsbFdTPENhbWVyYVByZWZlcmVuY2VzPih7XG4gICAgdHlwZTogXCJjYW1lcmEvZ2V0X3ByZWZzXCIsXG4gICAgZW50aXR5X2lkOiBlbnRpdHlJZCxcbiAgfSk7XG5cbmV4cG9ydCBjb25zdCB1cGRhdGVDYW1lcmFQcmVmcyA9IChcbiAgaGFzczogSG9tZUFzc2lzdGFudCxcbiAgZW50aXR5SWQ6IHN0cmluZyxcbiAgcHJlZnM6IHtcbiAgICBwcmVsb2FkX3N0cmVhbT86IGJvb2xlYW47XG4gIH1cbikgPT5cbiAgaGFzcy5jYWxsV1M8Q2FtZXJhUHJlZmVyZW5jZXM+KHtcbiAgICB0eXBlOiBcImNhbWVyYS91cGRhdGVfcHJlZnNcIixcbiAgICBlbnRpdHlfaWQ6IGVudGl0eUlkLFxuICAgIC4uLnByZWZzLFxuICB9KTtcbiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFFQTtBQUNBO0FBZUE7QUFHQTtBQVlBO0FBSUE7QUFDQTtBQUNBO0FBRUE7QUFLQTtBQUNBO0FBQ0E7QUFGQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBRkE7QUFLQTtBQVFBO0FBQ0E7QUFGQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/data/camera.ts\n");

/***/ })

}]);